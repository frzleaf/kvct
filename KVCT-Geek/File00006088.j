globals
sound o
location V=Location(0,0)
integer E=0
string array O
integer N=0
integer C=0
integer D=0
integer F=1
integer array G
real array H
boolean array J
real L
real M
real P
real Q
real S
real T
real U
real W
unit array Z
integer vv=0
timer ev=CreateTimer()
integer xv=0
damagetype array ov
timer rv=CreateTimer()
unit iv
integer av
trigger array Vv
boolean Ev=false
boolean Xv=bj_isSinglePlayer
boolean Ov=false
boolean Rv=false
real Iv=10.
boolean Nv=false
string bv=""
boolean Bv=false
unit Dv=null
unit Fv=null
player Hv=Player(0)
integer jv=0
integer Jv=0
rect kv
real Kv=0
real Lv=0
integer mv=0
integer Mv=0
integer pv=0
real Pv=0
real qv=0
unit Qv=null
group sv=CreateGroup()
item Sv=null
rect tv=null
effect Tv=null
string uv=null
player Uv=null
boolean wv=false
boolexpr Wv=null
boolean yv=true
boolean Yv=false
constant player zv=Player($C)
constant player Zv=Player($F)
constant hashtable ht=InitHashtable()
constant hashtable ve=InitHashtable()
real ee=.0
real xe=.0
real oe=.0
boolexpr re=null
real ie=0
real ae=0
real Ve=0
boolean Ee=false
group Xe=null
item Re=null
rect Ie=null
item array Ae
integer Ne=0
rect be=Rect(0,0,0,0)
group Be=CreateGroup()
real ce=0
boolean de=false
unit array iu
integer fe=1
trigger Fe=CreateTrigger()
hashtable UH=InitHashtable()
constant integer ge=$7F
constant integer Ge=$6B
constant integer he=$AD9
constant integer He=$F97
constant integer je=$E04
constant integer Je=$625
constant integer ke=$AB1
constant integer Ke=$BAF
dialog le=DialogCreate()
timer Le=CreateTimer()
player me
integer Me=0
trigger pe=CreateTrigger()
integer Qe='e007'
unit array se
integer Se='A0JC'
integer array te
integer Te=0
hashtable ue=InitHashtable()
hashtable f2=InitHashtable()
integer Ue=0
boolean We=false
boolean ye=false
boolean Ye=false
boolean ze=false
constant integer Ze=$47D
constant integer vx=$7F4
constant integer xx=$7D5
constant integer ox=$73A
constant integer rx=$433
constant integer ix=$961
constant integer ax=$EF6
constant integer Vx=$ADF
constant integer Ex=$808
constant integer Xx=$839
constant integer Ox=$92E
constant integer Rx=$DF7
constant integer Ix=$5E4
constant integer Ax=$C00
constant integer Nx=$C66
constant integer bx=$FDD
constant integer Bx=$F62
constant integer cx=$CFB
constant integer Cx=$F8
constant integer Dx=$4E9
constant integer fx=$7D4
constant integer Fx=$735
constant integer gx=$41A
constant integer Gx=$6F0
constant integer hx=$DD6
constant integer Hx=$53F
constant integer jx=$C0E
constant integer Jx=$DC4
constant integer kx=$4E5
constant integer Kx=$5E0
constant integer lx=$B3D
constant integer Lx=$8D0
constant integer mx=$C21
constant integer Mx=$F9F
constant integer px=$E2C
constant integer Px=$6ED
constant integer qx=$D8B
constant integer Qx=$5A4
constant integer sx=$D6A
constant integer Sx=$FC0
trigger tx=CreateTrigger()
trigger Tx=CreateTrigger()
unit Ux=null
unit array wx
integer Wx=0
real array yx
real array Yx
constant integer zx=$ED1
boolean array Zx
boolean array vo
boolean array eo
boolean xo=false
integer oo=0
integer array ro
unit array io
boolean array ao
boolean no=false
integer Vo=$4B0
integer Eo=0
integer Xo=0
boolean Oo=false
boolean Ro=true
boolean Io=true
integer Ao
string No
string bo=""
constant integer Bo=$A26
integer co
string Co
constant integer do=$C
constant integer Do=$F0
string array fo
real Fo=0
real go=0
integer Go=25
unit ho=null
string Ho=null
integer array jo
integer Jo
integer array ko
string array Ko
hashtable IT=InitHashtable()
constant integer lo=$CB8
constant integer Lo=$DDA
integer array mo
string Mo=null
string po=null
string Po=null
constant integer qo=$553
constant integer Qo=$581
constant integer so=$9FF
integer array So
integer array to
string To=null
string uo=null
string Uo=null
string array wo
framehandle Wo=null
framehandle yo=null
framehandle Yo
integer array zo
integer array Zo
integer array vr
integer array xr
integer array ir
real array Vr
string array Er
effect array Xr
integer array Rr
string Ir=null
string Ar=null
string Nr=null
string br=null
string Br=null
string cr=null
string Cr="Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl"
unit array dr
integer array Dr
integer array fr
boolean array Fr
integer gr=0
integer Gr=0
integer hr=0
boolean Hr=false
boolean jr=false
boolean Jr=false
integer kr=$BB8
string array Kr
string array lr
string array Lr
string array mr
string array Mr
string array pr
string array Pr
integer array qr
boolean Qr=true
boolean sr=false
boolean Sr=false
integer tr=0
boolean Tr=false
integer array ur
constant real Ur=32
constant real Wr=30
integer array yr
integer array Yr
string array Zr
framehandle vi=null
framehandle ei=null
framehandle xi
boolean array oi
boolean ri=FALSE
boolean ii=false
integer ai=0
integer array ni
string array Vi
integer array Ei
integer array Xi
integer array Oi
integer array Ri
framehandle Ii=null
framehandle Ai=null
constant integer Ni=$917
framehandle bi
item array Bi
constant integer ci=$D84
integer array Ci
boolean array di
string Di=null
string fi=null
framehandle Fi=null
framehandle gi=null
framehandle Gi
boolean hi=false
effect array Hi
integer array ji
integer array Ji
integer array ki
framehandle Ki=null
framehandle li=null
framehandle Li
boolean mi=false
framehandle Mi=null
framehandle pi=null
framehandle Pi
framehandle qi
framehandle Qi=null
framehandle si=null
framehandle Si
boolean array ti
boolean array Ti
integer ui=0
integer array Ui
integer array wi
real array Wi
string array yi
string array Yi
string array zi
string array Zi
integer va=0
integer ea='A08U'
integer xa='A08W'
integer oa='A05J'
integer ra='A05L'
integer ia='A04X'
constant real aa=900
constant real Va=25
constant real Ea=$3E8
constant real Xa=$A
constant real Oa=460
constant real Ra=$A
integer Ia='A05U'
integer Aa='A0NG'
effect array Na
integer array ba
integer array Ba
constant real ca=$578
constant real Ca=20
integer da='A0SX'
constant real Da=20
constant real Fa=900
integer ga='A06W'
integer Ga='A06Y'
constant real ha=912
constant real Ha=24
integer ja='A06R'
constant real Ja=570
constant real ka=30
integer Ka='A053'
hashtable la=InitHashtable()
integer La='A03G'
integer ma='A03I'
integer Ma='A0UR'
integer array pa
integer Pa='A08M'
integer array Qa
integer sa='A068'
constant real Sa=25
integer ta='A06N'
integer Ta='A06P'
integer ua='A06V'
integer Ua='A09P'
integer wa='A09Q'
integer Wa='A02Z'
integer ya='A031'
constant real Ya=25
integer za='A0SZ'
integer Za='A0RU'
integer vn='A04P'
integer array en
integer xn='A0VD'
integer rn='A0VL'
integer in='A05X'
constant real an=$3E8
constant real nn=20
constant real Vn=$4B0
constant real En=$A
integer Xn='A0BF'
constant real On=800
constant real Rn=20
integer An='A0AW'
integer Nn='A0W0'
integer bn='A0W2'
boolean array Bn
constant real cn=800
constant real Cn=24
integer dn='A03B'
integer Dn='A03D'
integer fn='A0BI'
integer Fn='A0BK'
integer gn='A07C'
integer Gn='A038'
integer hn='A03A'
boolean array Hn
constant real jn=320
constant real Jn=32
integer kn='A03K'
integer Kn='A04Z'
integer ln='A051'
constant real Ln=800
constant real mn=24
integer Mn='A057'
constant real pn=48
constant real Pn=800
constant real qn=16
constant real Qn=600
constant real sn=25
integer Sn='A093'
constant real Tn=$4A0
constant real Un=24
constant real wn=300
constant real Wn=25
integer yn='A034'
integer Yn='A036'
integer zn='A04B'
integer Zn='A06C'
constant real vV=$96
constant real eV=$4B0
integer xV='A097'
integer oV='A048'
integer rV='A04A'
integer iV='A08C'
integer aV='A08E'
constant integer nV=$4B0
constant integer VV=$4B0
integer EV='A03Q'
integer XV='A047'
integer array OV
integer RV='A0B9'
integer IV='A0VW'
integer AV='A0VY'
constant real NV=800
constant real bV=$F
integer BV='A0RV'
constant real cV=25
integer CV='A0BT'
integer dV='A062'
boolean array DV
integer fV='A0VN'
constant real FV=30
constant real gV=800
integer GV='A0SR'
constant real hV=20
constant real HV=48
integer jV='A0W4'
constant real JV=300
constant real kV=20
constant real KV=900
constant real lV=20
integer LV='A07R'
constant real mV=600
constant real MV=20
constant real pV=25
constant real PV=800
constant real qV=20
integer QV='A04H'
integer sV='A04J'
integer SV='A089'
boolean array tV
constant real TV=700
constant real uV=20
integer UV='A0R2'
constant real wV=20
integer WV='A0VR'
integer yV='A0VT'
integer YV='A03Z'
integer zV='A0RL'
integer ZV='A0RN'
boolean array vE
constant real eE=600
constant real xE=$F
constant real oE=560
constant real rE=20
integer iE='A09M'
constant real aE=$3E8
constant real nE=20
constant real VE=20
integer EE='A0VV'
constant real XE=260
constant real OE=30
integer RE='A03E'
constant integer IE=$96
constant integer AE=$5DC
constant integer NE=$5DC
constant real bE=20
constant real BE=20
integer cE='A0RC'
integer CE='A0BD'
integer dE='A0RH'
constant real DE=$3E8
constant real fE=$F
integer FE='A09R'
integer gE='A09T'
integer GE='A09Z'
constant real hE=$4E2
constant real HE=$F
constant real jE=$C
constant real JE=$4B0
integer kE='A05D'
constant real KE=48
integer lE='A05F'
integer LE='A05H'
integer mE='A08Z'
integer ME='A091'
constant real pE=$96
constant real PE='d'
constant real qE=800
constant real QE=25
integer sE='A0B7'
constant real SE=600
constant real tE=30
integer TE='A0BU'
integer uE='A0BW'
constant real UE=960
constant real wE=32
integer WE='A071'
integer yE='A072'
integer YE='A074'
constant real zE=600
constant real ZE=$96
constant real vX=$96
constant real eX=900
constant real xX=$504
constant real oX=24
constant real rX=$DC
constant real iX=20
constant real aX=30
integer nX='A0RK'
integer VX='A0RY'
constant real EX=900
constant real XX=45
integer OX='A0B4'
integer RX='A0B6'
integer IX='A098'
integer AX='A09A'
constant real NX=450
constant real bX=25
constant real BX=50
integer cX='A05E'
integer CX='A03P'
constant real dX=800
constant real DX=24
constant real fX=900
constant real FX=25
integer gX='A03L'
integer GX='A03N'
integer hX='A0VQ'
constant real HX=900
constant real jX=25
constant real JX=700
constant real kX=30
integer KX='A025'
integer lX='A083'
integer LX='A085'
integer mX='A07U'
integer MX='A07W'
constant real pX=40
boolean array PX
integer qX='A0S8'
integer QX='A0SA'
integer sX='A06S'
constant real SX=600
constant real tX=$F
integer TX='A06H'
constant real uX=400
constant real UX=25
integer wX='A081'
boolean array WX
constant real yX=$424
constant real YX=20
constant real zX='d'
constant real ZX=$3E8
constant real vO=$F
constant real eO=30
constant real xO=900
constant real oO=30
integer rO='A03J'
integer iO='A0SP'
constant real aO=900
constant real nO=25
integer VO='A0A0'
integer EO='A0WD'
integer XO='A0WF'
constant real OO=$5DC
constant real RO=$F
integer IO='A0T2'
integer AO='A09J'
constant real NO=900
constant real bO=30
constant real BO=$5DC
constant real cO=30
constant real CO=600
constant real dO=30
integer DO='A0AP'
integer fO='A0AR'
integer FO='A0AE'
integer gO='A0RI'
integer GO='A0VG'
integer hO='A0VI'
integer HO='A0AY'
integer jO='A0B0'
integer JO='A0EB'
boolean array kO
boolean array KO
boolean array lO
boolean array LO
integer mO='A05B'
boolean array MO
constant real pO=$5DC
constant real PO=25
constant real qO=$578
constant real QO=25
constant real sO=$4B0
constant real SO=8
constant real tO=20
boolean array TO
constant real uO=20
integer UO='A08X'
constant real wO=20
integer WO='A04T'
integer yO='A0T6'
constant real YO=20
constant real zO=900
integer ZO='A0T8'
integer vR='A0R4'
integer eR='A0R6'
integer xR='A09B'
integer oR='A09J'
integer rR='A07I'
integer iR='A07K'
integer aR='A0BH'
constant real nR=800
constant real VR=30
integer ER='A033'
integer XR='A04G'
integer OR='A040'
integer RR='A042'
integer IR='A0RT'
boolean array AR
integer NR='A096'
constant real bR=600
constant real BR=24
integer cR='A07G'
integer CR='A08F'
integer dR='A08H'
constant real DR=$5DC
constant real fR=25
constant real FR=$7D0
constant real gR=$F
constant real GR=$C0
constant real hR=20
integer HR='A0AK'
integer jR='A0AM'
integer JR='A0AV'
real array kR
integer KR='A09G'
boolean array lR
integer LR='A0SV'
constant real mR=18
constant real MR=$3E8
constant real pR='d'
integer PR='A0SS'
constant real qR=$3E8
constant real QR=25
constant real sR=600
constant real SR=30
integer tR='A05C'
integer TR='A0A3'
integer uR='A0A5'
constant real UR=$3E8
constant real wR=30
constant real WR=600
constant real yR=30
constant real YR=50
constant real zR=$4B0
constant real ZR=25
constant real vI=900
constant real eI=20
constant real xI=$5DC
constant real oI=30
constant real rI=600
constant real iI=$F
integer aI='A06F'
boolean array nI
integer VI='A07H'
integer EI='A0SO'
integer XI='A0B1'
integer OI='A0B3'
integer RI='A07D'
integer II='A07F'
integer array AI
constant real NI=400
constant real bI=20
integer BI='A07S'
integer cI='A06K'
integer CI='A06M'
real dI=$A
integer DI='A05T'
integer fI='A05O'
integer FI='A05Q'
constant real gI=840
constant real GI=32
constant real hI=$4B0
constant real HI=25
integer jI='A0M7'
constant real JI=$4B0
constant real kI=30
constant real KI=$F
constant real lI=$3E8
constant real LI='d'
constant real mI=20
integer MI='A054'
integer array pI
integer array PI
integer array qI
unit array QI
integer array sI
integer array SI
real array tI
integer array TI
integer array uI
string UI=null
framehandle wI=null
framehandle WI=null
framehandle yI
integer array YI
integer array zI
string ZI=null
string vA=null
string eA=null
boolean xA=false
string oA=null
string rA=null
string iA=null
string array aA
integer array nA
integer VA=0
integer EA=0
integer array XA
integer array OA
integer array RA
integer array IA
hashtable AA=InitHashtable()
integer array NA
integer array bA
constant integer BA=$9FC
constant integer cA=$A98
constant integer CA=$93E
integer array dA
integer array DA
integer array fA
integer array FA
integer array gA
integer array GA
boolean array hA
integer array HA
integer array jA
integer array JA
integer array kA
integer KA='A06B'
constant real lA=50
integer LA='A0AI'
constant real mA=500
constant real MA=20
constant real pA=600
constant real PA=20
integer qA='A0SW'
integer QA='A0SN'
constant real sA=$4B0
constant real SA=20
constant real tA=800
constant real TA=25
integer uA='A0W6'
constant real UA=400
constant real wA=20
integer WA='A08R'
integer yA='A0T4'
constant real YA=20
constant real zA=600
integer ZA='A0T5'
constant real vN=20
constant real eN=900
constant real xN=$F
integer oN='A0SD'
constant real rN=900
constant real iN=20
constant real aN=800
constant real nN=16
integer VN='A063'
integer EN='A0T1'
constant real XN=$FA
constant real ON=25
constant real RN=600
constant real IN=$F
integer AN='A0WH'
constant real NN=800
constant real bN=20
integer BN='A05W'
constant real cN=500
constant real CN=20
integer dN='A05M'
constant real DN=700
constant real fN=30
integer FN='A0S1'
constant real gN=480
constant real GN=24
integer hN='A08A'
integer HN='A0VM'
integer jN='A0RD'
constant real JN=800
constant real kN=20
constant real KN=800
constant real lN=20
integer LN='A0WK'
integer mN='A0T0'
constant real MN=20
constant real pN=900
constant real PN=48
constant real qN=40
constant real QN=400
constant real sN=20
integer SN='A06Z'
integer tN='A0SY'
constant real TN=25
constant real uN=800
constant real UN=800
constant real wN=30
constant real WN=25
integer yN='A0SC'
constant real YN=800
constant real zN=20
integer ZN='A0WG'
constant real vb=24
integer eb='A08B'
integer xb='A09K'
integer ob='A0VF'
real rb=40
integer ib='A0V9'
integer Vb='A0S3'
integer Eb='A0S5'
constant real Xb=900
constant real Ob=30
integer Rb='A0AO'
constant real Ib=800
constant real Ab=30
constant real Nb=25
integer bb='A0T9'
constant real Bb=30
integer cb='A043'
integer Cb='A0ST'
constant real Db=20
constant real fb=900
integer Fb='A0SU'
constant real gb=$E1
constant real Gb=25
integer hb='A09U'
constant real Hb=400
constant real jb=20
integer Jb='A0VC'
integer kb='A0SQ'
constant real Kb=600
constant real lb=$F
integer Lb='A075'
framehandle mb=null
framehandle Mb=null
constant integer pb=$E47
framehandle Pb
integer array qb
integer array Qb
string array sb
integer array Sb
string Tb=null
integer array ub
boolean array Ub
boolean array wb
integer array Wb
effect array yb
string array Yb
integer array zb
effect array Zb
string array vB
real array eB
boolean array xB
constant integer oB=$774
constant integer rB=$555
integer array iB
integer aB=0
integer nB=0
unit array VB
unit EB
integer XB=0
rect array OB
integer array RB
boolean IB=false
boolean AB=false
integer NB=0
integer bB=0
integer BB=0
unit array cB
unit CB
boolean array dB
integer DB=0
boolean fB=false
boolean FB=false
integer gB=0
integer GB=0
integer hB=0
integer HB=0
boolean jB=false
boolean JB=false
integer kB=0
integer KB=$438
integer lB=0
integer LB=0
integer mB=0
boolean MB=false
boolean pB=false
integer PB=0
integer qB=$4B0
unit array QB
integer sB=0
integer SB=0
integer tB=0
rect array TB
integer array uB
integer array UB
boolean wB=false
boolean WB=false
integer yB=0
integer YB=0
integer zB=0
boolean ZB=false
boolean vc=false
integer ec=0
integer xc=0
integer oc=0
unit array ic
boolean ac=false
boolean nc=false
integer Vc=0
integer Ec=0
integer Xc=0
boolean Oc=false
boolean Rc=false
integer Ic=0
integer Ac=$5B4
boolean Nc=false
integer bc=0
integer Bc=0
boolean cc=false
boolean Cc=false
integer Dc=0
integer fc=0
boolean Fc=false
boolean gc=false
integer Gc=0
integer hc=0
integer Hc=0
boolean jc=false
boolean Jc=false
integer array kc
integer Kc=0
integer lc=0
unit Lc=null
boolean mc=false
unit Mc=null
boolean pc=false
boolean Pc=false
integer qc=0
unit Qc=null
boolean Sc=false
integer Tc=0
integer array uc
framehandle Uc=null
framehandle wc=null
constant integer Wc=$5B3
framehandle yc
framehandle Yc
string zc=null
string Zc=null
string vC=null
string eC=null
string xC=null
string oC=null
real rC=0
real iC=0
real aC=0
real nC=0
boolean array VC
boolean EC=false
unit XC=null
boolean OC=false
integer RC=0
boolean IC=false
boolean AC=false
integer NC=0
boolean bC=false
boolean BC=false
boolean cC=false
integer CC=0
integer array dC
integer DC=0
integer fC=0
integer FC=0
boolean gC=false
boolean GC=false
integer hC=0
integer HC=$834
boolean jC=false
boolean JC=false
boolean kC=false
boolean KC=false
string array lC
timer LC=null
multiboard mC=null
integer MC=0
integer pC=0
timer PC=null
timerdialog qC=null
dialog QC=null
rect sC=null
rect SC=null
rect tC=null
rect TC=null
rect uC=null
rect UC=null
rect wC=null
rect WC=null
rect yC=null
rect YC=null
rect zC=null
rect ZC=null
rect vd=null
rect ed=null
rect xd=null
rect od=null
rect ad=null
rect Vd=null
rect Ed=null
rect Xd=null
rect Od=null
rect Rd=null
rect Id=null
rect Ad=null
rect Nd=null
rect bd=null
rect Bd=null
rect cd=null
rect Cd=null
rect dd=null
rect Dd=null
rect fd=null
rect Fd=null
rect gd=null
rect Gd=null
rect hd=null
rect Hd=null
rect jd=null
rect Jd=null
rect kd=null
rect Kd=null
rect ld=null
rect Ld=null
rect md=null
rect Md=null
rect Pd=null
rect qd=null
rect Qd=null
rect sd=null
rect Sd=null
rect td=null
rect Td=null
rect ud=null
rect Ud=null
rect wd=null
rect Wd=null
rect yd=null
rect Yd=null
rect zd=null
rect Zd=null
rect vD=null
rect eD=null
rect xD=null
rect oD=null
rect rD=null
rect iD=null
rect aD=null
rect nD=null
rect VD=null
rect ED=null
rect XD=null
rect OD=null
rect RD=null
rect ID=null
rect AD=null
rect ND=null
rect bD=null
rect BD=null
rect cD=null
rect CD=null
rect dD=null
rect DD=null
rect fD=null
rect FD=null
rect gD=null
rect GD=null
rect hD=null
rect HD=null
rect jD=null
rect JD=null
rect kD=null
rect KD=null
rect lD=null
rect LD=null
rect mD=null
rect MD=null
rect pD=null
rect PD=null
rect qD=null
rect QD=null
rect sD=null
rect SD=null
rect tD=null
rect TD=null
rect uD=null
rect UD=null
rect wD=null
rect WD=null
rect yD=null
rect YD=null
rect zD=null
rect ZD=null
rect vf=null
rect ef=null
rect xf=null
rect of=null
rect rf=null
rect af=null
rect nf=null
rect Vf=null
rect Ef=null
rect Xf=null
rect Of=null
rect Rf=null
rect If=null
rect Af=null
rect Nf=null
rect bf=null
rect Bf=null
rect cf=null
rect Cf=null
rect df=null
rect Df=null
rect Ff=null
rect gf=null
rect Gf=null
rect hf=null
rect Hf=null
rect jf=null
rect Jf=null
rect kf=null
rect Kf=null
rect lf=null
rect Lf=null
rect mf=null
rect Mf=null
rect pf=null
rect Pf=null
rect qf=null
rect Qf=null
rect sf=null
rect Sf=null
rect tf=null
rect Tf=null
rect uf=null
rect Uf=null
rect wf=null
rect Wf=null
rect yf=null
rect Yf=null
rect zf=null
rect Zf=null
rect vF=null
rect eF=null
rect xF=null
rect oF=null
rect rF=null
rect iF=null
rect aF=null
rect nF=null
rect VF=null
rect EF=null
rect XF=null
rect OF=null
rect RF=null
rect IF=null
rect AF=null
rect NF=null
rect bF=null
rect BF=null
rect cF=null
rect CF=null
rect dF=null
rect DF=null
rect fF=null
rect FF=null
rect gF=null
rect GF=null
rect hF=null
rect HF=null
rect jF=null
rect JF=null
rect kF=null
rect KF=null
rect lF=null
rect LF=null
rect mF=null
rect MF=null
rect pF=null
rect PF=null
rect qF=null
rect QF=null
rect sF=null
rect SF=null
rect tF=null
rect TF=null
rect uF=null
rect UF=null
rect wF=null
rect WF=null
rect yF=null
rect YF=null
rect zF=null
rect ZF=null
rect vg=null
rect eg=null
rect xg=null
rect og=null
rect rg=null
rect ig=null
rect ag=null
rect Vg=null
rect Eg=null
rect Xg=null
rect Og=null
rect Rg=null
rect Ig=null
rect Ag=null
rect Ng=null
rect bg=null
rect Bg=null
rect cg=null
rect Cg=null
rect dg=null
rect Dg=null
rect fg=null
rect Fg=null
rect gg=null
rect Gg=null
rect hg=null
rect Hg=null
rect jg=null
rect Jg=null
rect kg=null
rect Kg=null
rect lg=null
rect Lg=null
rect mg=null
rect Mg=null
rect pg=null
rect Pg=null
rect qg=null
rect Qg=null
rect sg=null
rect Sg=null
rect tg=null
rect Tg=null
rect ug=null
rect Ug=null
rect Wg=null
rect yg=null
rect Yg=null
rect zg=null
rect Zg=null
rect vG=null
rect eG=null
rect xG=null
rect oG=null
rect rG=null
rect iG=null
rect aG=null
rect nG=null
rect VG=null
rect EG=null
rect XG=null
rect OG=null
rect RG=null
rect IG=null
rect AG=null
rect NG=null
rect bG=null
rect BG=null
rect cG=null
rect CG=null
rect dG=null
rect DG=null
rect fG=null
rect FG=null
rect gG=null
rect GG=null
rect hG=null
rect HG=null
rect jG=null
rect JG=null
rect kG=null
rect KG=null
rect lG=null
rect LG=null
rect mG=null
rect MG=null
rect pG=null
rect PG=null
rect qG=null
rect QG=null
rect sG=null
rect SG=null
rect tG=null
rect TG=null
rect uG=null
rect UG=null
rect wG=null
rect WG=null
rect yG=null
rect YG=null
rect zG=null
rect ZG=null
rect vh=null
rect eh=null
rect xh=null
rect oh=null
rect rh=null
rect ih=null
rect ah=null
rect Vh=null
rect Eh=null
rect Xh=null
rect Oh=null
rect Rh=null
rect Ih=null
rect Ah=null
rect Nh=null
rect bh=null
rect Bh=null
rect Ch=null
rect dh=null
rect Dh=null
rect Fh=null
rect gh=null
rect Gh=null
rect hh=null
rect Hh=null
rect jh=null
rect Jh=null
rect kh=null
rect Kh=null
rect lh=null
rect Lh=null
rect mh=null
rect Mh=null
rect ph=null
rect Ph=null
rect qh=null
rect Qh=null
rect sh=null
rect Sh=null
rect th=null
rect Th=null
rect uh=null
rect Uh=null
rect wh=null
rect Wh=null
rect yh=null
rect Yh=null
rect zh=null
rect Zh=null
rect vH=null
rect eH=null
rect xH=null
rect oH=null
rect rH=null
rect iH=null
rect aH=null
rect nH=null
rect VH=null
trigger EH=null
trigger XH=null
unit OH=null
unit RH=null
unit IH=null
unit AH=null
unit NH=null
unit bH=null
unit BH=null
unit cH=null
unit CH=null
unit dH=null
unit DH=null
unit fH=null
unit FH=null
unit gH=null
unit GH=null
unit hH=null
unit HH=null
unit jH=null
unit JH=null
unit kH=null
unit KH=null
unit lH=null
unit LH=null
unit mH=null
unit MH=null
unit pH=null
unit PH=null
constant integer qH=GetRandomInt($457,9999)
constant integer K1=$3E8
constant integer sH=$2710
constant integer SH=$186A0
constant integer tH=$F4240
integer TH=0
integer uH=$A
real wH=5
integer WH=0
string array yH
integer YH=771
integer array zH
boolean ZH=false
integer vj=1
real ej=.415
real xj=1.
real oj=1.
constant integer De=-1
string array rj
string array ij
integer array aj
integer array nj
integer array Vj
integer array Ej
string array Xj
string array Oj
string array Rj
integer array Ij
integer array Aj
real array Nj
integer array bj
string array Bj
integer array cj
string array Cj
integer array dj
real array Dj
integer array fj
string array Fj
rect array gj
integer array Gj
rect array hj
integer array Hj
rect array jj
integer array Jj
integer array kj
string array Kj
rect array lj
integer array Lj
integer array mj
string array Mj
integer array pj
string array Pj
string array qj
string array Qj
integer array sj
integer array Sj
string array tj
integer array Tj
string array uj
integer array Uj
integer array wj
rect array Wj
string array yj
rect array Yj
string array zj
integer array Zj
integer array vJ
string array eJ
integer array xJ
integer array oJ
integer array rJ
integer array iJ
integer array aJ
integer array nJ
boolean array VJ
unit array EJ
unit array XJ
unit array OJ
rect array RJ
rect array IJ
rect array AJ
integer array NJ
integer array bJ
integer array BJ
integer array cJ
integer array CJ
integer array dJ
integer array DJ
integer array fJ
integer array FJ
integer array gJ
integer array GJ
integer array hJ
integer array HJ
integer array jJ
integer array JJ
integer array kJ
integer array KJ
integer array lJ
integer array LJ
real array mJ
real array MJ
integer array pJ
string array PJ
string array qJ
string array QJ
string array sJ
framehandle SJ=null
integer array tJ
boolean array TJ
boolean array uJ
boolean array UJ
boolean array wJ
boolean array WJ
boolean array yJ
constant real YJ=0
constant real zJ=$FA0
constant integer ZJ=$7D0
integer array vk
real array ek
trigger xk
group ok
integer array rk
integer ik=$41A
integer ak=$A8E
integer nk=$636
integer array Vk
constant integer Ek=$EE1
constant integer Xk=$A76
integer array Ok
boolean Rk=false
integer array Ik
boolean Ak=false
integer Nk=0
string bk=""
string Bk=""
string Ck=""
string dk=""
string Dk=""
string fk=""
string Fk=""
boolean gk=true
boolean Gk=true
integer hk='e008'
integer array Hk
integer array jk
string array Jk
boolean array kk
integer array Kk
boolean array lk
unit array Lk
integer mk=6
integer array Mk
integer array pk
boolean array Pk
string array qk
integer Qk=0
integer array sk
integer array Sk
integer array tk
boolean array Tk
boolean array uk
integer array Uk
trigger wk
boolean array Wk
real yk=.14
integer array Yk
real array zk
real array Zk
boolean array vK
boolean array eK
integer xK=0
integer oK=0
integer array rK
fogmodifier array iK
integer aK=0
integer nK=0
integer array VK
real array EK
real array XK
real array OK
real array RK
unit array IK
real array AK
real array NK
real array bK
real array BK
real array cK
integer CK=0
integer dK=0
integer array DK
lightning array fK
real array FK
real array gK
real array GK
integer array hK
integer HK=0
integer jK=0
integer array JK
unit array kK
unit array KK
real array lK
string array LK
lightning array mK
integer MK=0
integer pK=0
integer array PK
unit array qK
real array QK
real array sK
real array SK
real array tK
real array TK
real array uK
real array UK
real array wK
real array WK
real array yK
real array YK
real array zK
real array ZK
real array vl
string array el
boolean array xl
integer ol=0
integer rl=0
integer array il
unit array al
boolean array nl
boolean array Vl
boolean array El
real array Xl
real array Ol
real array Rl
string array Il
boolean array Al
integer Nl=0
integer bl=0
integer array Bl
integer array cl
unit array Cl
integer dl=0
integer Dl=0
integer array fl
integer array Fl
unit array gl
integer Gl=0
integer hl=0
integer array Hl
unit array jl
integer Jl=0
integer kl=0
integer array Kl
unit array ll
integer Ll=0
integer ml=0
integer array Ml
unit array Pl
integer ql=0
integer Ql=0
integer array sl
integer array Sl
integer array Tl
player array ul
integer array Ul
effect array wl
trigger Wl=CreateTrigger()
integer array yl
integer array Yl
boolean array zl
unit array Zl
real array vL
real array eL
real array xL
real array oL
real array rL
integer iL=0
integer aL=0
integer array nL
integer array VL
integer array EL
integer XL=0
integer OL=0
integer array RL
integer array IL
integer array AL
integer NL=0
integer bL=0
integer array BL
integer array cL
integer array CL
integer array dL
integer array DL
real array fL
integer array FL
integer array gL
integer array GL
integer hL=0
integer HL=0
integer array jL
group JL=CreateGroup()
unit array kL
integer array KL
unit lL
integer LL=0
integer mL=0
integer array ML
unit array pL
integer array PL
integer array qL
integer QL=0
integer sL=0
integer array SL
integer array tL
integer array TL
real array uL
real array UL
integer array wL
real array WL
integer yL=0
integer YL=0
integer array zL
integer array ZL
unit array vm
integer em=0
integer xm=0
integer array om
unit array rm
unit array im
player array am
integer array Vm
integer array Em
integer array Xm
real array Om
boolean array Rm
integer array Im
real array Am
integer Nm=0
integer bm=0
integer array Bm
unit array cm
player array Cm
integer array dm
real array Dm
integer array fm
real array Fm
integer gm=0
integer Gm=0
integer array hm
integer array Hm
player array jm
integer array Jm
integer array Km
integer lm=0
integer Lm=0
integer array mm
integer array Mm
integer pm=0
integer Pm=0
integer array qm
integer array Qm
integer array sm
timer array Sm
timerdialog array tm
integer Tm=0
integer um=0
integer array Um
integer array wm
integer Wm=0
integer ym=0
integer array Ym
unit array zm
real array Zm
integer array vM
real array eM
real array xM
real array oM
effect array rM
integer iM=0
integer aM=0
integer array nM
unit array VM
real array EM
integer array XM
real array OM
real array RM
integer IM=0
integer AM=0
integer array NM
integer array bM
string array BM
integer cM=0
integer CM=0
integer array dM
integer array DM
string array fM
integer array FM
integer gM=0
integer GM=0
integer array hM
integer array HM
integer array jM
integer array JM
integer kM=0
integer KM=0
integer array lM
integer array LM
timer array mM
timerdialog array MM
unit array pM
integer PM=0
integer qM=0
integer array QM
unit array sM
real array SM
integer array tM
real array TM
real array uM
real array UM
effect array wM
integer WM=0
integer yM=0
integer array YM
unit array zM
real array ZM
integer array vp
real array ep
real array xp
integer op=0
integer rp=0
integer array ip
integer array ap
real array np
unit array Vp
unit array Ep
integer Xp=0
integer Op=0
integer array Rp
unit array Ip
real array Ap
integer array Np
real array bp
real array Bp
effect array cp
integer Cp=0
integer dp=0
integer array Dp
unit array fp
real array Fp
integer array gp
real array Gp
real array Hp
integer jp=0
integer Jp=0
integer array Kp
unit array lp
real array Lp
integer array Mp
integer Pp=0
integer qp=0
integer array Qp
unit array sp
group array Sp
real array Tp
real array up
real array Up
real array wp
real array Wp
real array yp
integer array Yp
effect array zp
boolean array Zp
integer vP=0
integer eP=0
integer array xP
unit array oP
integer array rP
real array iP
real array aP
real array nP
real array VP
real array EP
integer XP=0
integer OP=0
integer array RP
unit array IP
group array AP
real array NP
real array bP
real array BP
real array cP
real array CP
integer array dP
effect array DP
integer fP=0
integer FP=0
integer array gP
unit array GP
integer array hP
real array HP
integer jP=0
integer JP=0
integer array kP
unit array KP
real array lP
integer array LP
real array mP
real array MP
real array pP
effect array PP
integer qP=0
integer QP=0
integer array sP
unit array SP
real array tP
integer array TP
real array uP
real array UP
integer wP=0
integer WP=0
integer array yP
unit array YP
integer array zP
boolean array ZP
integer array vq
integer eq=0
integer xq=0
integer array oq
integer array rq
string array iq
item array aq
integer nq=0
integer Vq=0
integer array Eq
unit array Xq
integer array Oq
integer Rq=0
integer Iq=0
integer array Aq
integer array Nq
effect array bq
integer Bq=0
integer cq=0
integer array Cq
integer array dq
integer array Dq
integer fq=0
integer Fq=0
integer array gq
unit array Gq
integer array hq
real array Hq
integer jq=0
integer Jq=0
integer array kq
unit array Kq
real array lq
real array Lq
integer array mq
integer Mq=0
integer pq=0
integer array Pq
integer array qq
real array Qq
unit array sq
unit array Sq
integer tq=0
integer Tq=0
integer array uq
unit array Uq
effect array wq
integer array Wq
real array yq
real array Yq
real array zq
real array Zq
real array vQ
group array eQ
integer xQ=0
integer oQ=0
integer array rQ
integer array iQ
real array aQ
unit array nQ
unit array VQ
integer EQ=0
integer XQ=0
integer array OQ
unit array RQ
effect array IQ
integer array AQ
real array NQ
real array bQ
real array BQ
real array cQ
real array CQ
group array dQ
integer DQ=0
integer fQ=0
integer array FQ
unit array gQ
real array GQ
integer array hQ
integer HQ=0
integer jQ=0
integer array JQ
integer array kQ
unit array KQ
real array lQ
real array LQ
real array mQ
real array MQ
real array pQ
integer PQ=0
integer qQ=0
integer array QQ
integer array sQ
real array SQ
unit array tQ
integer array TQ
unit array uQ
integer UQ=0
integer wQ=0
integer array WQ
unit array yQ
real array YQ
real array zQ
real array ZQ
real array vs
real array es
integer array xs
effect array os
real array is
integer array ns
player array Vs
group array Es
integer array Xs
real array Os
integer Rs=0
integer Is=0
integer array As
unit array Ns
real array bs
real array Bs
real array cs
integer array Cs
integer array ds
integer Ds=0
integer fs=0
integer array Fs
integer array gs
unit array Gs
integer hs=0
integer Hs=0
integer array js
integer array Js
unit array ks
integer array Ks
integer ls=0
integer Ls=0
integer array Ms
unit array ps
effect array Ps
integer array qs
real array Qs
real array Ss
real array Ts
real array us
real array Us
group array ws
integer Ws=0
integer ys=0
integer array Ys
unit array zs
integer array Zs
real array vS
real array eS
real array xS
real array oS
integer rS=0
integer iS=0
integer array aS
integer array nS
real array VS
unit array ES
real array XS
real array OS
integer RS=0
integer IS=0
integer array AS
integer array NS
unit array bS
real array BS
integer cS=0
integer CS=0
integer array dS
unit array DS
player array fS
effect array FS
integer array gS
real array GS
real array hS
real array HS
real array jS
real array JS
real array kS
real array KS
integer array lS
group array LS
integer mS=0
integer MS=0
integer array pS
unit array PS
integer array qS
real array QS
real array sS
real array SS
real array tS
real array TS
real array uS
integer US=0
integer wS=0
integer array WS
unit array yS
real array YS
integer array zS
integer ZS=0
integer vt=0
integer array et
unit array xt
player array ot
effect array rt
integer array at
real array Vt
real array Et
real array Xt
real array Ot
real array Rt
real array It
real array At
group array Nt
integer array Bt
integer Ct=0
integer dt=0
integer array Dt
unit array ft
player array Ft
effect array gt
integer array Gt
real array Ht
real array jt
real array Jt
real array kt
real array Kt
real array lt
integer array Lt
group array mt
integer Mt=0
integer pt=0
integer array Pt
integer array qt
real array Qt
real array St
real array Tt
real array ut
real array Ut
real array wt
real array Wt
unit array yt
integer Yt=0
integer zt=0
integer array Zt
integer array vT
real array eT
unit array xT
integer array oT
unit array rT
integer iT=0
integer aT=0
integer array nT
unit array VT
player array ET
group array XT
effect array OT
integer array RT
real array AT
real array NT
real array bT
real array BT
real array cT
real array CT
real array dT
integer array DT
integer array fT
integer array FT
integer array gT
integer GT=0
integer hT=0
integer array HT
unit array jT
integer array JT
real array kT
real array KT
real array lT
real array LT
real array mT
real array MT
player array pT
effect array PT
integer qT=0
integer QT=0
integer array sT
unit array ST
real array tT
integer array TT
integer uT=0
integer UT=0
integer array wT
integer array WT
integer array yT
integer YT=0
integer zT=0
integer array ZT
unit array vu
real array eu
real array xu
integer ou=0
integer ru=0
integer array au
integer array nu
integer array Vu
unit array Eu
integer Xu=0
integer Ou=0
integer array Ru
unit array Iu
real array Au
integer array Nu
integer array bu
integer Bu=0
integer cu=0
integer array Cu
integer array du
unit array Du
real array fu
integer Fu=0
integer gu=0
integer array Gu
integer array hu
unit array Hu
real array ju
integer Ju=0
integer ku=0
integer array Ku
integer array lu
unit array Lu
integer mu=0
integer Mu=0
integer array pu
unit array Pu
player array qu
effect array Qu
integer array su
integer array Su
real array tu
real array Tu
real array uu
real array Uu
real array wu
real array Wu
real array yu
integer array Yu
group array zu
integer Zu=0
integer vU=0
integer array eU
effect array xU
integer array oU
real array rU
real array iU
real array aU
real array nU
integer VU=0
integer EU=0
integer array XU
integer array OU
real array RU
real array IU
real array AU
real array NU
real array bU
real array BU
unit array cU
integer CU=0
integer dU=0
integer array DU
unit array fU
integer array FU
integer array gU
real array GU
integer hU=0
integer HU=0
integer array jU
integer array JU
unit array kU
real array KU
real array lU
real array LU
integer mU=0
integer MU=0
integer array pU
unit array PU
real array qU
real array QU
integer sU=0
integer SU=0
integer array tU
unit array TU
unit array uU
player array UU
group array wU
effect array WU
integer array yU
real array YU
real array zU
real array ZU
real array vw
real array ew
real array xw
real array ow
integer array rw
integer array iw
integer aw=0
integer nw=0
integer array Vw
unit array Ew
player array Xw
integer array Ow
real array Rw
real array Iw
real array Aw
real array Nw
real array bw
real array Bw
unit array cw
integer Cw=0
integer dw=0
integer array Dw
integer array fw
effect array Fw
integer gw=0
integer Gw=0
integer array hw
unit array Hw
player array jw
integer array Jw
real array kw
real array Kw
real array lw
real array Lw
real array mw
integer Mw=0
integer pw=0
integer array Pw
unit array qw
real array Qw
real array sw
integer array Sw
integer array tw
integer Tw=0
integer uw=0
integer array Uw
unit array ww
integer array Ww
integer yw=0
integer Yw=0
integer array zw
integer array Zw
real array vW
unit array eW
integer array xW
unit array oW
integer rW=0
integer iW=0
integer array aW
unit array nW
player array VW
integer array EW
real array XW
real array OW
real array RW
real array IW
real array AW
effect array NW
integer bW=0
integer BW=0
integer array cW
unit array CW
group array dW
effect array DW
integer array fW
real array FW
real array gW
real array GW
real array hW
real array HW
integer jW=0
integer JW=0
integer array kW
unit array KW
real array lW
integer array LW
real array mW
real array MW
integer array pW
real array PW
integer qW=0
integer QW=0
integer array sW
unit array SW
group array tW
effect array TW
integer array uW
real array UW
real array wW
real array WW
real array yW
real array YW
real array zW
integer ZW=0
integer vy=0
integer array ey
integer array xy
unit array oy
real array ry
integer iy=0
integer ay=0
integer array Vy
integer array Ey
unit array Xy
real array Oy
integer Ry=0
integer Iy=0
integer array Ay
integer array Ny
real array by
unit array By
unit array cy
integer Cy=0
integer Dy=0
integer array fy
unit array Fy
group array gy
effect array Gy
integer array hy
real array Hy
real array jy
real array Jy
real array ky
real array Ky
integer ly=0
integer Ly=0
integer array my
unit array My
real array py
integer array Py
real array qy
real array Qy
real array sy
effect array Sy
integer ty=0
integer Ty=0
integer array Uy
unit array wy
real array Wy
integer array yy
real array Yy
real array zy
integer Zy=0
integer vY=0
integer array eY
unit array xY
player array oY
integer array rY
real array iY
real array aY
real array nY
real array VY
real array EY
effect array XY
real array OY
integer RY=0
integer IY=0
integer array AY
unit array NY
player array bY
group array BY
effect array cY
integer array CY
real array dY
real array DY
real array fY
real array FY
real array gY
integer array GY
real array hY
real array HY
integer jY=0
integer JY=0
integer array kY
unit array KY
integer array lY
integer array LY
integer mY=0
integer MY=0
integer array pY
unit array PY
player array qY
effect array QY
integer array sY
real array SY
real array tY
real array TY
real array uY
real array UY
real array wY
integer array WY
integer yY=0
integer YY=0
integer array zY
unit array ZY
real array vz
real array ez
integer array xz
integer oz=0
integer iz=0
integer array az
unit array nz
real array Vz
integer array Ez
integer array Xz
integer Oz=0
integer Rz=0
integer array Iz
integer array Az
unit array Nz
unit array bz
integer Bz=0
integer cz=0
integer array Cz
integer array dz
real array Dz
unit array fz
real array Fz
real array gz
effect array Gz
integer hz=0
integer Hz=0
integer array jz
integer array Jz
real array kz
unit array Kz
integer lz=0
integer Lz=0
integer array mz
unit array Mz
integer array pz
integer array Pz
real array qz
integer Qz=0
integer sz=0
integer array Sz
integer array tz
integer array Tz
integer array uz
integer Uz=0
integer wz=0
integer array Wz
unit array yz
player array Yz
group array zz
effect array Zz
integer array vZ
real array eZ
real array xZ
real array oZ
real array rZ
real array iZ
integer array aZ
real array nZ
real array VZ
integer array EZ
integer XZ=0
integer OZ=0
integer array RZ
unit array IZ
integer array AZ
real array NZ
real array bZ
real array BZ
real array cZ
real array CZ
real array dZ
integer DZ=0
integer fZ=0
integer array FZ
unit array gZ
real array GZ
real array hZ
real array HZ
integer array jZ
integer array JZ
integer kZ=0
integer KZ=0
integer array lZ
unit array LZ
integer array mZ
integer MZ=0
integer pZ=0
integer array PZ
unit array qZ
player array QZ
integer array sZ
real array SZ
real array tZ
real array TZ
real array uZ
integer array UZ
group array wZ
real array WZ
effect array yZ
integer YZ=0
integer zZ=0
integer array ZZ
unit array v0
integer array e0
integer o0=0
integer r0=0
integer array i0
unit array n0
player array V0
real array E0
real array X0
real array O0
integer array R0
real array I0
integer array A0
integer N0=0
integer b0=0
integer array B0
unit array c0
group array C0
real array d0
real array D0
real array f0
real array F0
real array g0
integer array G0
effect array h0
integer H0=0
integer j0=0
integer array J0
unit array k0
real array K0
integer array l0
real array L0
integer m0=0
integer M0=0
integer array p0
unit array P0
real array q0
integer array Q0
real array s0
effect array S0
real array t0
real array T0
real array u0
group array U0
integer w0=0
integer W0=0
integer array Y0
unit array z0
real array Z0
integer array v1
real array e1
real array o1
integer n1=0
integer V1=0
integer array E1
unit array X1
effect array O1
integer array R1
real array I1
real array A1
real array N1
real array B1
real array c1
integer array C1
group array D1
integer f1=0
integer F1=0
integer array g1
integer array G1
real array H1
real array j1
real array J1
unit array k1
integer l1=0
integer L1=0
integer array m1
unit array M1
group array p1
effect array P1
integer array q1
real array Q1
real array S1
real array T1
real array u1
real array U1
integer w1=0
integer W1=0
integer array Y1
integer array Z1
unit array v2
real array e2
real array o2
real array n2
real array V2
integer E2=0
integer X2=0
integer array O2
integer array I2
real array A2
real array N2
real array B2
player array c2
effect array C2
real array D2
real array F2
unit array g2
integer G2=0
integer H2=0
integer array j2
unit array J2
player array k2
effect array l2
integer array L2
real array m2
real array M2
real array p2
real array P2
real array q2
real array Q2
real array S2
integer T2=0
integer u2=0
integer array U2
unit array w2
real array W2
integer array Y2
integer z2=0
integer Z2=0
integer array v3
unit array e3
effect array x3
integer array o3
real array i3
real array n3
real array V3
real array E3
real array X3
integer array O3
group array R3
integer I3=0
integer A3=0
integer array N3
integer array b3
real array B3
real array c3
real array C3
unit array D3
integer f3=0
integer F3=0
integer array g3
unit array G3
group array h3
effect array H3
integer array j3
real array J3
real array k3
real array l3
real array L3
real array m3
real array M3
integer p3=0
integer P3=0
integer array q3
integer array Q3
unit array S3
integer T3=0
integer u3=0
integer array U3
unit array w3
integer array W3
real array y3
real array Y3
real array z3
integer array Z3
integer v4=0
integer e4=0
integer array x4
unit array o4
player array i4
integer array n4
real array V4
real array E4
real array X4
real array O4
real array R4
effect array I4
integer array A4
integer N4=0
integer b4=0
integer array B4
integer array c4
real array C4
unit array d4
unit array D4
integer f4=0
integer F4=0
integer array g4
integer array G4
real array h4
unit array H4
integer array j4
unit array J4
effect array k4
integer l4=0
integer L4=0
integer array m4
integer array M4
real array p4
unit array P4
real array q4
real array Q4
integer S4=0
integer T4=0
integer array u4
integer array U4
unit array w4
real array W4
integer y4=0
integer Y4=0
integer array z4
unit array Z4
real array v5
real array e5
real array x5
real array o5
integer array i5
group array n5
integer V5=0
integer E5=0
integer array X5
unit array O5
player array R5
integer array I5
real array A5
real array N5
real array b5
real array B5
effect array c5
integer C5=0
integer d5=0
integer array D5
unit array f5
integer array F5
integer g5=0
integer G5=0
integer array h5
unit array H5
real array j5
real array J5
integer array k5
integer K5=0
integer l5=0
integer array L5
unit array m5
real array M5
integer array p5
real array P5
effect array q5
real array Q5
real array S5
real array T5
group array u5
integer U5=0
integer w5=0
integer array W5
integer array y5
unit array Y5
real array z5
real array Z5
real array v6
real array e6
integer x6=0
integer o6=0
integer array i6
unit array n6
real array V6
integer array E6
real array X6
effect array O6
real array R6
real array I6
real array A6
group array N6
integer b6=0
integer B6=0
integer array c6
unit array C6
real array d6
integer array D6
integer array f6
integer F6=0
integer g6=0
integer array G6
unit array h6
player array H6
integer array j6
real array J6
real array k6
real array K6
real array l6
real array L6
integer array m6
integer M6=0
integer p6=0
integer array P6
unit array q6
player array Q6
integer array S6
real array t6
real array T6
real array u6
real array U6
real array w6
real array W6
effect array y6
integer Y6=0
integer z6=0
integer array Z6
integer array v7
real array e7
real array x7
real array o7
unit array i7
integer n7=0
integer V7=0
integer array E7
unit array X7
player array O7
effect array R7
integer array I7
real array A7
real array N7
real array b7
real array B7
real array c7
group array C7
integer array d7
integer D7=0
integer f7=0
integer array F7
integer array g7
real array G7
unit array h7
integer H7=0
integer j7=0
integer array J7
unit array k7
integer array K7
real array l7
real array L7
real array m7
integer M7=0
integer p7=0
integer array P7
unit array q7
player array Q7
effect array S7
integer array t7
real array T7
real array u7
real array U7
real array w7
real array W7
real array y7
real array Y7
unit array z7
integer Z7=0
integer v8=0
integer array e8
unit array x8
integer array o8
real array i8
real array n8
real array V8
unit array E8
integer X8=0
integer O8=0
integer array R8
unit array I8
integer array A8
integer array N8
real array b8
integer B8=0
integer c8=0
integer array C8
unit array d8
real array D8
real array f8
integer array F8
integer array g8
integer G8=0
integer h8=0
integer array H8
integer array j8
real array J8
unit array k8
unit array K8
integer l8=0
integer L8=0
integer array m8
unit array M8
player array p8
integer array P8
real array q8
real array Q8
real array S8
real array t8
real array T8
integer u8=0
integer U8=0
integer array w8
unit array W8
player array y8
effect array Y8
integer array z8
real array Z8
real array vvv
real array vev
real array vxv
real array vov
real array vrv
real array viv
integer array vav
group array vnv
integer vVv=0
integer vEv=0
integer array vXv
integer array vOv
real array vRv
real array vIv
real array vAv
real array vNv
real array vbv
real array vBv
player array vcv
unit array vCv
effect array vdv
integer vDv=0
integer vfv=0
integer array vFv
integer array vgv
unit array vGv
real array vhv
real array vHv
real array vjv
integer vJv=0
integer vkv=0
integer array vKv
unit array vlv
unit array vLv
real array vmv
real array vMv
real array vpv
real array vPv
real array vqv
integer array vQv
effect array vsv
real array vSv
player array vtv
real array vTv
integer array vuv
integer array vUv
integer vwv=0
integer vWv=0
integer array vyv
integer array vYv
real array vzv
unit array vZv
unit array v_v
integer v0v=0
integer v1v=0
integer array v2v
unit array v3v
player array v4v
real array v5v
real array v6v
real array v7v
real array v8v
real array v9v
integer array evv
real array eev
integer array exv
integer eov=0
integer erv=0
integer array eiv
integer array eav
real array env
unit array eVv
unit array eEv
integer eXv=0
integer eOv=0
integer array eRv
integer array eIv
real array eAv
real array eNv
unit array ebv
unit array eBv
integer ecv=0
integer eCv=0
integer array edv
effect array eDv
integer array efv
real array eFv
real array egv
real array eGv
real array ehv
integer eHv=0
integer ejv=0
integer array eJv
unit array ekv
player array eKv
integer array elv
real array eLv
real array emv
real array eMv
real array epv
real array ePv
integer array eqv
integer eQv=0
integer esv=0
integer array eSv
unit array etv
player array eTv
group array euv
effect array eUv
integer array ewv
real array eWv
real array eyv
real array eYv
real array ezv
real array eZv
integer array e_v
real array e0v
real array e1v
integer e2v=0
integer e3v=0
integer array e4v
unit array e5v
integer array e6v
real array e7v
real array e8v
real array e9v
real array xvv
real array xev
real array xxv
integer xov=0
integer xrv=0
integer array xiv
integer array xav
real array xnv
unit array xVv
unit array xEv
integer xXv=0
integer xOv=0
integer array xRv
integer array xIv
unit array xAv
real array xNv
real array xbv
real array xBv
real array xcv
real array xCv
integer xdv=0
integer xDv=0
integer array xfv
unit array xFv
group array xgv
effect array xGv
integer array xhv
real array xHv
real array xjv
real array xJv
real array xkv
real array xKv
integer xlv=0
integer xLv=0
integer array xmv
unit array xMv
effect array xpv
integer array xPv
real array xqv
real array xQv
real array xsv
real array xSv
group array xtv
real array xTv
integer xuv=0
integer xUv=0
integer array xwv
unit array xWv
real array xyv
integer array xYv
real array xzv
real array xZv
integer x_v=0
integer x0v=0
integer array x1v
integer array x2v
real array x3v
unit array x4v
real array x5v
real array x6v
effect array x7v
integer x8v=0
integer x9v=0
integer array ovv
integer array oev
unit array oxv
real array oov
integer orv=0
integer oiv=0
integer array oav
unit array onv
effect array oVv
integer array oEv
real array oXv
real array oOv
real array oRv
real array oIv
group array oAv
real array oNv
integer obv=0
integer oBv=0
integer array ocv
unit array oCv
real array odv
real array oDv
integer array ofv
integer oFv=0
integer ogv=0
integer array oGv
integer array ohv
unit array oHv
unit array ojv
integer oJv=0
integer okv=0
integer array oKv
unit array olv
real array oLv
integer array omv
integer array oMv
integer opv=0
integer oPv=0
integer array oqv
unit array oQv
player array osv
effect array oSv
integer array otv
real array oTv
real array ouv
real array oUv
real array owv
real array oWv
real array oyv
real array oYv
group array ozv
integer array oZv
integer o_v=0
integer o0v=0
integer array o1v
unit array o2v
integer array o3v
real array o4v
real array o5v
real array o6v
effect array o7v
integer o8v=0
integer o9v=0
integer array rvv
unit array rev
effect array rxv
integer array rov
real array rrv
real array riv
real array rav
real array rnv
group array rVv
real array rEv
integer rXv=0
integer rOv=0
integer array rRv
unit array rIv
real array rAv
integer array rNv
real array rbv
real array rBv
integer rcv=0
integer rCv=0
integer array rdv
unit array rDv
integer array rfv
real array rFv
real array rgv
real array rGv
integer array rhv
integer rHv=0
integer rjv=0
integer array rJv
integer array rkv
unit array rKv
integer rlv=0
integer rLv=0
integer array rmv
unit array rMv
integer array rpv
integer array rPv
integer array rqv
real array rQv
real array rsv
integer rSv=0
integer rtv=0
integer array rTv
unit array ruv
real array rUv
integer array rwv
unit array rWv
integer ryv=0
integer rYv=0
integer array rzv
unit array rZv
real array r_v
real array r0v
real array r1v
integer array r2v
integer array r3v
integer r4v=0
integer r5v=0
integer array r6v
integer array r7v
integer array r8v
integer r9v=0
integer ivv=0
integer array iev
unit array ixv
group array iov
effect array irv
integer array iiv
real array iav
real array inv
real array iVv
real array iEv
real array iXv
integer iOv=0
integer iRv=0
integer array iIv
integer array iAv
unit array iNv
real array ibv
integer iBv=0
integer icv=0
integer array iCv
unit array idv
real array iDv
integer array ifv
real array iFv
real array igv
integer iGv=0
integer ihv=0
integer array iHv
integer array ijv
real array iJv
unit array ikv
real array iKv
real array ilv
integer iLv=0
integer imv=0
integer array iMv
integer array ipv
unit array iPv
real array iqv
integer iQv=0
integer isv=0
integer array iSv
unit array itv
player array iTv
effect array iuv
integer array iUv
real array iwv
real array iWv
real array iyv
real array iYv
real array izv
real array iZv
real array i_v
group array i0v
integer array i1v
integer i2v=0
integer i3v=0
integer array i4v
integer array i5v
real array i6v
real array i7v
real array i8v
real array i9v
real array avv
unit array aev
integer axv=0
integer aov=0
integer array arv
unit array aiv
group array aav
effect array anv
integer array aVv
real array aEv
real array aXv
real array aOv
real array aRv
real array aIv
integer aAv=0
integer aNv=0
integer array abv
integer array aBv
unit array acv
real array aCv
real array adv
real array afv
real array aFv
real array agv
integer aGv=0
integer ahv=0
integer array aHv
unit array ajv
effect array aJv
integer array akv
real array aKv
real array alv
real array aLv
real array amv
group array aMv
real array apv
integer aPv=0
integer aqv=0
integer array aQv
integer array asv
real array aSv
unit array atv
integer aTv=0
integer auv=0
integer array aUv
unit array awv
unit array aWv
player array ayv
real array aYv
real array azv
real array aZv
integer array a_v
group array a0v
real array a1v
real array a2v
integer a3v=0
integer a4v=0
integer array a5v
integer array a6v
real array a7v
unit array a8v
unit array a9v
integer nvv=0
integer nev=0
integer array nxv
effect array nov
integer array nrv
real array niv
real array nav
real array nnv
real array nVv
integer nEv=0
integer nXv=0
integer array nOv
unit array nRv
player array nIv
integer array nAv
real array nNv
real array nbv
real array nBv
real array ncv
real array nCv
integer array ndv
integer nDv=0
integer nfv=0
integer array nFv
unit array ngv
player array nGv
integer array nhv
real array nHv
real array njv
real array nJv
real array nkv
real array nKv
integer array nlv
integer nLv=0
integer nmv=0
integer array nMv
unit array npv
real array nPv
integer array nqv
real array nQv
real array nsv
real array nSv
integer ntv=0
integer nTv=0
integer array nuv
unit array nUv
real array nwv
integer array nWv
real array nyv
real array nYv
real array nzv
integer nZv=0
integer n_v=0
integer array n0v
unit array n1v
player array n2v
effect array n3v
integer array n4v
real array n5v
real array n6v
real array n7v
real array n8v
real array n9v
real array Vvv
unit array Vev
integer Vxv=0
integer Vov=0
integer array Vrv
unit array Viv
unit array Vav
integer array Vnv
integer array VVv
real array VEv
real array VXv
integer VOv=0
integer VRv=0
integer array VIv
integer array VAv
real array VNv
unit array Vbv
unit array VBv
integer Vcv=0
integer VCv=0
integer array Vdv
unit array VDv
integer array Vfv
real array VFv
real array Vgv
real array VGv
integer Vhv=0
integer VHv=0
integer array Vjv
unit array VJv
player array Vkv
effect array VKv
integer array Vlv
real array VLv
real array Vmv
real array VMv
real array Vpv
real array VPv
real array Vqv
real array VQv
group array Vsv
integer array VSv
boolean array Vtv
integer VTv=0
integer Vuv=0
integer array VUv
integer array Vwv
real array VWv
real array Vyv
real array VYv
real array Vzv
real array VZv
player array V_v
real array V0v
unit array V1v
unit array V2v
effect array V3v
integer V4v=0
integer V5v=0
integer array V6v
unit array V7v
integer array V8v
integer array V9v
real array Evv
real array Eev
integer Exv=0
integer Eov=0
integer array Erv
unit array Eiv
integer array Eav
real array Env
real array EVv
real array EEv
integer EXv=0
integer EOv=0
integer array ERv
integer array EIv
integer array EAv
integer ENv=0
integer Ebv=0
integer array EBv
unit array Ecv
group array ECv
effect array Edv
integer array EDv
real array Efv
real array EFv
real array Egv
real array EGv
real array Ehv
integer EHv=0
integer Ejv=0
integer array EJv
integer array Ekv
unit array EKv
real array Elv
real array ELv
integer Emv=0
integer EMv=0
integer array Epv
integer array EPv
unit array Eqv
real array EQv
real array Esv
real array ESv
integer Etv=0
integer ETv=0
integer array Euv
unit array EUv
group array Ewv
effect array EWv
integer array Eyv
real array EYv
real array Ezv
real array EZv
real array E_v
real array E0v
integer E1v=0
integer E2v=0
integer array E3v
integer array E4v
unit array E5v
real array E6v
integer E7v=0
integer E8v=0
integer array E9v
unit array Xvv
real array Xev
real array Xxv
real array Xov
real array Xrv
integer array Xiv
effect array Xav
group array Xnv
real array XVv
integer XEv=0
integer XXv=0
integer array XOv
unit array XRv
real array XIv
real array XAv
real array XNv
real array Xbv
integer array XBv
effect array Xcv
group array XCv
real array Xdv
integer XDv=0
integer Xfv=0
integer array XFv
integer array Xgv
real array XGv
unit array Xhv
unit array XHv
integer Xjv=0
integer XJv=0
integer array Xkv
unit array XKv
player array Xlv
integer array XLv
real array Xmv
real array XMv
real array Xpv
real array XPv
real array Xqv
integer array XQv
effect array Xsv
integer XSv=0
integer Xtv=0
integer array XTv
unit array Xuv
real array XUv
integer array Xwv
integer XWv=0
integer Xyv=0
integer array XYv
unit array Xzv
real array XZv
real array X_v
real array X0v
integer array X1v
real array X2v
player array X3v
integer array X4v
integer X5v=0
integer X6v=0
integer array X7v
unit array X8v
real array X9v
integer array Ovv
integer Oev=0
integer Oxv=0
integer array Oov
unit array Orv
player array Oiv
integer array Oav
real array Onv
real array OVv
real array OEv
effect array OXv
integer OOv=0
integer ORv=0
integer array OIv
unit array OAv
real array ONv
real array Obv
integer OBv=0
integer Ocv=0
integer array OCv
integer array Odv
real array ODv
unit array Ofv
real array OFv
real array Ogv
integer OGv=0
integer Ohv=0
integer array OHv
integer array Ojv
unit array OJv
real array Okv
integer OKv=0
integer Olv=0
integer array OLv
integer array Omv
real array OMv
unit array Opv
real array OPv
real array Oqv
effect array OQv
integer Osv=0
integer OSv=0
integer array Otv
unit array OTv
real array Ouv
real array OUv
real array Owv
real array OWv
integer array Oyv
integer OYv=0
integer Ozv=0
integer array OZv
unit array O_v
real array O0v
real array O1v
real array O2v
real array O3v
integer array O4v
integer O5v=0
integer O6v=0
integer array O7v
integer array O8v
unit array O9v
unit array Rvv
integer Rev=0
integer Rxv=0
integer array Rov
unit array Rrv
player array Riv
integer array Rav
real array Rnv
real array RVv
real array REv
real array RXv
real array ROv
effect array RRv
integer RIv=0
integer RAv=0
integer array RNv
integer array Rbv
real array RBv
real array Rcv
unit array RCv
unit array Rdv
integer RDv=0
integer Rfv=0
integer array RFv
unit array Rgv
player array RGv
group array Rhv
effect array RHv
effect array Rjv
integer array RJv
real array Rkv
real array RKv
real array Rlv
real array RLv
real array Rmv
integer array RMv
real array Rpv
integer array RPv
real array Rqv
boolean array RQv
integer Rsv=0
integer RSv=0
integer array Rtv
unit array RTv
effect array Ruv
integer array RUv
real array Rwv
real array RWv
real array Ryv
real array RYv
real array Rzv
group array RZv
integer R_v=0
integer R0v=0
integer array R1v
unit array R2v
integer array R3v
integer R4v=0
integer R5v=0
integer array R6v
unit array R7v
player array R8v
effect array R9v
integer array Ivv
real array Iev
real array Ixv
real array Iov
real array Irv
real array Iiv
integer array Iav
group array Inv
integer IVv=0
integer IEv=0
integer array IXv
unit array IOv
integer array IRv
integer IIv=0
integer IAv=0
integer array INv
integer array Ibv
unit array IBv
real array Icv
integer ICv=0
integer Idv=0
integer array IDv
unit array Ifv
integer array IFv
real array Igv
real array IGv
real array Ihv
real array IHv
real array Ijv
real array IJv
integer Ikv=0
integer IKv=0
integer array Ilv
unit array ILv
real array Imv
real array IMv
integer array Ipv
real array IPv
real array Iqv
integer IQv=0
integer Isv=0
integer array ISv
unit array Itv
real array ITv
real array Iuv
real array IUv
real array Iwv
integer array IWv
group array Iyv
integer IYv=0
integer Izv=0
integer array IZv
unit array I_v
effect array I0v
effect array I1v
integer array I2v
real array I3v
real array I4v
real array I5v
real array I6v
real array I7v
integer array I8v
group array I9v
integer Avv=0
integer Aev=0
integer array Axv
unit array Aov
player array Arv
group array Aiv
real array Aav
real array Anv
real array AVv
real array AEv
real array AXv
real array AOv
real array ARv
integer array AIv
effect array AAv
integer array ANv
boolean array Abv
integer ABv=0
integer Acv=0
integer array ACv
integer array Adv
effect array ADv
real array Afv
real array AFv
real array Agv
unit array AGv
player array Ahv
real array AHv
real array Ajv
real array AJv
integer Akv=0
integer AKv=0
integer array Alv
unit array ALv
real array Amv
real array AMv
real array Apv
real array APv
real array Aqv
real array AQv
integer array Asv
integer ASv=0
integer Atv=0
integer array ATv
unit array Auv
integer array AUv
integer array Awv
real array AWv
real array Ayv
integer AYv=0
integer Azv=0
integer array AZv
unit array A_v
player array A0v
effect array A1v
integer array A2v
real array A3v
real array A4v
real array A5v
real array A6v
real array A7v
real array A8v
real array A9v
group array Nvv
integer array Nev
integer Nxv=0
integer Nov=0
integer array Nrv
integer array Niv
real array Nav
real array Nnv
real array NVv
real array NEv
unit array NXv
real array NOv
real array NRv
integer NIv=0
integer NAv=0
integer array NNv
unit array Nbv
real array NBv
real array Ncv
integer array NCv
integer Ndv=0
integer NDv=0
integer array Nfv
integer array NFv
unit array Ngv
unit array NGv
integer Nhv=0
integer NHv=0
integer array Njv
integer array NJv
real array Nkv
unit array NKv
integer Nlv=0
integer NLv=0
integer array Nmv
effect array NMv
integer array Npv
real array NPv
real array Nqv
real array NQv
real array Nsv
integer NSv=0
integer Ntv=0
integer array NTv
integer array Nuv
real array NUv
real array Nwv
real array NWv
effect array Nyv
integer NYv=0
integer Nzv=0
integer array NZv
unit array N_v
real array N0v
real array N1v
real array N2v
real array N3v
player array N4v
integer array N5v
real array N6v
real array N7v
integer array N8v
integer array N9v
integer bvv=0
integer bev=0
integer array bxv
unit array bov
player array brv
group array biv
effect array bav
integer array bnv
real array bVv
real array bEv
real array bXv
real array bOv
real array bRv
integer array bIv
real array bAv
real array bNv
integer bbv=0
integer bBv=0
integer array bcv
integer array bCv
unit array bdv
player array bDv
real array bfv
real array bFv
real array bgv
real array bGv
real array bhv
integer array bHv
integer bjv=0
integer bJv=0
integer array bkv
unit array bKv
effect array blv
integer array bLv
real array bmv
real array bMv
real array bpv
real array bPv
real array bqv
group array bQv
integer bsv=0
integer bSv=0
integer array btv
integer array bTv
unit array buv
real array bUv
real array bwv
real array bWv
real array byv
integer bYv=0
integer bzv=0
integer array bZv
unit array b_v
integer array b0v
real array b1v
real array b2v
real array b3v
real array b4v
integer b5v=0
integer b6v=0
integer array b7v
integer array b8v
real array b9v
unit array Bvv
unit array Bev
integer Bxv=0
integer Bov=0
integer array Brv
unit array Biv
player array Bav
effect array Bnv
integer array BVv
real array BEv
real array BXv
real array BOv
real array BRv
real array BIv
real array BAv
real array BNv
group array Bbv
integer array BBv
integer array Bcv
boolean array BCv
integer Bdv=0
integer BDv=0
integer array Bfv
integer array BFv
real array Bgv
real array BGv
real array Bhv
unit array BHv
integer Bjv=0
integer BJv=0
integer array Bkv
unit array BKv
player array Blv
group array BLv
effect array Bmv
integer array BMv
real array Bpv
real array BPv
real array Bqv
real array BQv
real array Bsv
integer array BSv
real array Btv
real array BTv
integer Buv=0
integer BUv=0
integer array Bwv
unit array BWv
real array Byv
real array BYv
integer array Bzv
integer BZv=0
integer B_v=0
integer array B0v
integer array B1v
unit array B2v
unit array B3v
integer B4v=0
integer B5v=0
integer array B6v
unit array B7v
real array B8v
real array B9v
integer array cvv
integer cev=0
integer cxv=0
integer array cov
integer array crv
integer array civ
integer cav=0
integer cnv=0
integer array cVv
integer array cEv
real array cXv
unit array cOv
unit array cRv
real array cIv
integer cAv=0
integer cNv=0
integer array cbv
unit array cBv
real array ccv
real array cCv
real array cdv
real array cDv
real array cfv
integer array cFv
real array cgv
player array cGv
integer array chv
group array cHv
effect array cjv
integer cJv=0
integer ckv=0
integer array cKv
unit array clv
integer array cLv
real array cmv
real array cMv
real array cpv
integer array cPv
integer cqv=0
integer cQv=0
integer array csv
unit array cSv
player array ctv
integer array cTv
real array cuv
real array cUv
real array cwv
real array cWv
real array cyv
effect array cYv
integer czv=0
integer cZv=0
integer array c_v
unit array c0v
player array c1v
effect array c2v
integer array c3v
real array c4v
real array c5v
real array c6v
real array c7v
real array c8v
real array c9v
real array Cvv
group array Cev
integer array Cxv
integer Cov=0
integer Crv=0
integer array Civ
integer array Cav
integer array Cnv
real array CVv
real array CEv
real array CXv
real array COv
real array CRv
player array CIv
unit array CAv
integer CNv=0
integer Cbv=0
integer array CBv
unit array Ccv
unit array CCv
player array Cdv
group array CDv
effect array Cfv
integer array CFv
real array Cgv
real array CGv
real array Chv
real array CHv
real array Cjv
real array CJv
real array Ckv
integer array CKv
integer array Clv
integer array CLv
integer Cmv=0
integer CMv=0
integer array Cpv
unit array CPv
effect array Cqv
integer array CQv
real array Csv
real array CSv
real array Ctv
real array CTv
real array Cuv
integer array CUv
group array Cwv
integer CWv=0
integer Cyv=0
integer array CYv
integer array Czv
real array CZv
real array C_v
real array C0v
unit array C1v
integer C2v=0
integer C3v=0
integer array C4v
integer array C5v
real array C6v
unit array C7v
real array C8v
real array C9v
effect array dvv
integer dev=0
integer dxv=0
integer array dov
integer array drv
unit array div
real array dav
integer dnv=0
integer dVv=0
integer array dEv
unit array dXv
integer array dOv
real array dRv
real array dIv
real array dAv
real array dNv
integer dbv=0
integer dBv=0
integer array dcv
unit array dCv
group array ddv
effect array dDv
integer array dfv
real array dFv
real array dgv
real array dGv
real array dhv
real array dHv
integer djv=0
integer dJv=0
integer array dkv
integer array dKv
unit array dLv
real array dmv
integer dMv=0
integer dpv=0
integer array dPv
unit array dqv
group array dQv
effect array dsv
integer array dSv
real array dtv
real array dTv
real array duv
real array dUv
real array dwv
integer dWv=0
integer dyv=0
integer array dYv
unit array dzv
group array dZv
effect array d_v
integer array d0v
real array d1v
real array d2v
real array d3v
real array d4v
real array d5v
integer d6v=0
integer d7v=0
integer array d8v
integer array d9v
unit array Dvv
real array Dev
integer Dxv=0
integer Dov=0
integer array Drv
unit array Div
player array Dav
group array Dnv
effect array DVv
integer array DEv
real array DXv
real array DOv
real array DRv
real array DIv
real array DAv
integer array DNv
real array Dbv
real array DBv
integer array Dcv
integer DCv=0
integer Ddv=0
integer array DDv
unit array Dfv
player array DFv
integer array Dgv
real array DGv
real array Dhv
real array DHv
real array Djv
real array DJv
integer Dkv=0
integer DKv=0
integer array Dlv
unit array DLv
integer array Dmv
integer DMv=0
integer Dpv=0
integer array DPv
unit array Dqv
group array DQv
effect array Dsv
integer array DSv
real array Dtv
real array DTv
real array Duv
real array DUv
real array Dwv
integer DWv=0
integer Dyv=0
integer array DYv
integer array Dzv
unit array DZv
real array D_v
integer D0v=0
integer D1v=0
integer array D2v
integer array D3v
real array D4v
unit array D5v
unit array D6v
real array D7v
integer D8v=0
integer D9v=0
integer array fvv
integer array fev
unit array fxv
integer fov=0
integer frv=0
integer array fiv
unit array fav
player array fnv
integer array fVv
real array fEv
real array fXv
real array fOv
real array fRv
real array fIv
integer array fAv
effect array fNv
integer fbv=0
integer fBv=0
integer array fcv
integer array fCv
real array fdv
unit array fDv
unit array ffv
integer fFv=0
integer fgv=0
integer array fGv
integer array fhv
unit array fHv
real array fjv
integer fJv=0
integer fkv=0
integer array fKv
unit array flv
effect array fLv
integer array fmv
real array fMv
real array fpv
real array fPv
real array fqv
real array fQv
group array fsv
integer fSv=0
integer ftv=0
integer array fTv
integer array fuv
unit array fUv
real array fwv
real array fWv
real array fyv
real array fYv
integer fzv=0
integer fZv=0
integer array f_v
unit array f0v
group array f1v
effect array f2v
integer array f3v
real array f4v
real array f5v
real array f6v
real array f7v
real array f8v
integer f9v=0
integer Fvv=0
integer array Fev
integer array Fxv
unit array Fov
real array Frv
integer Fiv=0
integer Fav=0
integer array Fnv
unit array FVv
integer array FEv
real array FXv
integer FOv=0
integer FRv=0
integer array FIv
unit array FAv
integer array FNv
integer Fbv=0
integer FBv=0
integer array Fcv
unit array FCv
player array Fdv
effect array FDv
integer array Ffv
real array FFv
real array Fgv
real array FGv
real array Fhv
real array FHv
real array Fjv
real array FJv
group array Fkv
integer array FKv
integer Flv=0
integer FLv=0
integer array Fmv
unit array FMv
integer array Fpv
integer FPv=0
integer Fqv=0
integer array FQv
unit array Fsv
integer array FSv
integer array Ftv
integer FTv=0
integer Fuv=0
integer array FUv
unit array Fwv
player array FWv
integer array Fyv
real array FYv
real array Fzv
real array FZv
real array F_v
real array F0v
integer array F1v
integer F2v=0
integer F3v=0
integer array F4v
integer array F5v
integer array F6v
unit array F7v
integer F8v=0
integer F9v=0
integer array gvv
unit array gev
integer array gxv
integer gov=0
integer grv=0
integer array giv
unit array gav
real array gnv
real array gVv
integer gEv=0
integer gXv=0
integer array gOv
unit array gRv
integer array gIv
integer array gAv
integer array gNv
integer gbv=0
integer gBv=0
integer array gcv
unit array gCv
integer array gdv
integer array gDv
real array gfv
integer gFv=0
integer ggv=0
integer array gGv
unit array ghv
integer array gHv
integer array gjv
real array gJv
integer gkv=0
integer gKv=0
integer array glv
unit array gLv
integer array gmv
integer array gMv
real array gpv
integer gPv=0
integer gqv=0
integer array gQv
unit array gsv
integer array gSv
integer array gtv
real array gTv
integer guv=0
integer gUv=0
integer array gwv
unit array gWv
real array gyv
real array gYv
real array gzv
integer array gZv
integer array g_v
integer array g0v
integer g1v=0
integer g2v=0
integer array g3v
unit array g4v
group array g5v
effect array g6v
integer array g7v
real array g8v
real array g9v
real array Gvv
real array Gev
real array Gxv
integer Gov=0
integer Grv=0
integer array Giv
unit array Gav
real array Gnv
integer array GVv
real array GEv
real array GXv
real array GOv
integer GRv=0
integer GIv=0
integer array GAv
unit array GNv
effect array Gbv
effect array GBv
integer array Gcv
real array GCv
real array Gdv
real array GDv
real array Gfv
real array GFv
integer array Ggv
group array GGv
integer Ghv=0
integer GHv=0
integer array Gjv
integer array GJv
real array Gkv
real array GKv
real array Glv
unit array GLv
integer Gmv=0
integer GMv=0
integer array Gpv
unit array GPv
effect array Gqv
integer array GQv
real array Gsv
real array GSv
real array Gtv
real array GTv
real array Guv
integer array GUv
integer Gwv=0
integer GWv=0
integer array Gyv
unit array GYv
group array Gzv
real array GZv
real array G_v
real array G0v
real array G1v
real array G2v
unit array G3v
integer array G4v
effect array G5v
integer G6v=0
integer G7v=0
integer array G8v
integer array G9v
real array hvv
unit array hev
unit array hxv
integer hov=0
integer hrv=0
integer array hiv
unit array hav
real array hnv
real array hVv
integer array hEv
integer array hXv
player array hOv
integer hRv=0
integer hIv=0
integer array hAv
integer array hNv
unit array hbv
unit array hBv
real array hcv
real array hCv
integer hdv=0
integer hDv=0
integer array hfv
unit array hFv
unit array hgv
player array hGv
group array hhv
effect array hHv
integer array hjv
real array hJv
real array hkv
real array hKv
real array hlv
real array hLv
real array hmv
real array hMv
real array hpv
integer array hPv
integer array hqv
integer array hQv
integer array hsv
integer hSv=0
integer htv=0
integer array hTv
integer array huv
real array hUv
unit array hwv
integer array hWv
unit array hyv
integer hYv=0
integer hzv=0
integer array hZv
unit array h_v
unit array h0v
real array h1v
real array h2v
real array h3v
real array h4v
real array h5v
integer array h6v
effect array h7v
real array h8v
integer array h9v
player array Hvv
group array Hev
real array Hxv
integer Hov=0
integer Hrv=0
integer array Hiv
integer array Hav
real array Hnv
unit array HVv
player array HEv
real array HXv
real array HOv
real array HRv
real array HIv
integer HAv=0
integer HNv=0
integer array Hbv
unit array HBv
player array Hcv
effect array HCv
integer array Hdv
real array HDv
real array Hfv
real array HFv
real array Hgv
real array HGv
real array Hhv
real array HHv
integer array Hjv
group array HJv
integer Hkv=0
integer HKv=0
integer array Hlv
integer array HLv
effect array Hmv
integer HMv=0
integer Hpv=0
integer array HPv
unit array Hqv
player array HQv
integer array Hsv
real array HSv
real array Htv
real array HTv
real array Huv
real array HUv
effect array Hwv
integer HWv=0
integer Hyv=0
integer array HYv
unit array Hzv
real array HZv
real array H_v
integer array H0v
integer H1v=0
integer H2v=0
integer array H3v
integer array H4v
unit array H5v
integer H6v=0
integer H7v=0
integer array H8v
unit array H9v
player array jvv
integer array jev
real array jxv
real array jov
real array jrv
real array jiv
real array jav
real array jnv
integer array jVv
integer jEv=0
integer jXv=0
integer array jOv
unit array jRv
real array jIv
real array jAv
real array jNv
real array jbv
real array jBv
integer array jcv
integer array jCv
integer array jdv
integer jDv=0
integer jfv=0
integer array jFv
integer array jgv
unit array jGv
unit array jhv
integer jHv=0
integer jjv=0
integer array jJv
unit array jkv
real array jKv
real array jlv
real array jLv
real array jmv
real array jMv
player array jpv
integer array jPv
integer array jqv
integer array jQv
integer jsv=0
integer jSv=0
integer array jtv
unit array jTv
player array juv
group array jUv
effect array jwv
integer array jWv
real array jyv
real array jYv
real array jzv
real array jZv
real array j_v
integer array j0v
real array j1v
real array j2v
integer array j3v
integer j4v=0
integer j5v=0
integer array j6v
unit array j7v
integer array j8v
real array j9v
real array Jvv
real array Jev
real array Jxv
real array Jov
real array Jrv
integer Jiv=0
integer Jav=0
integer array Jnv
unit array JVv
integer array JEv
integer array JXv
integer array JOv
integer JRv=0
integer JIv=0
integer array JAv
unit array JNv
real array Jbv
real array JBv
real array Jcv
integer array JCv
integer Jdv=0
integer JDv=0
integer array Jfv
integer array JFv
unit array Jgv
unit array JGv
integer Jhv=0
integer JHv=0
integer array Jjv
integer array JJv
real array Jkv
unit array JKv
real array Jlv
real array JLv
integer Jmv=0
integer JMv=0
integer array Jpv
integer array JPv
unit array Jqv
real array JQv
integer Jsv=0
integer JSv=0
integer array Jtv
integer array JTv
integer array Juv
real array JUv
unit array Jwv
integer JWv=0
integer Jyv=0
integer array JYv
unit array Jzv
player array JZv
integer array J_v
real array J0v
real array J1v
real array J2v
real array J3v
real array J4v
effect array J5v
integer J6v=0
integer J7v=0
integer array J8v
unit array J9v
player array kvv
effect array kev
integer array kxv
real array kov
real array krv
real array kiv
real array kav
real array knv
real array kVv
real array kEv
group array kXv
integer array kOv
integer kRv=0
integer kIv=0
integer array kAv
unit array kNv
integer array kbv
real array kBv
real array kcv
real array kCv
real array kdv
real array kDv
real array kfv
integer kFv=0
integer kgv=0
integer array kGv
unit array khv
integer array kHv
real array kjv
integer kJv=0
integer kkv=0
integer array kKv
unit array klv
group array kLv
effect array kmv
integer array kMv
real array kpv
real array kPv
real array kqv
real array kQv
real array ksv
integer kSv=0
integer ktv=0
integer array kTv
unit array kuv
real array kUv
integer array kwv
real array kWv
real array kyv
real array kYv
integer kzv=0
integer kZv=0
integer array k_v
unit array k0v
group array k1v
effect array k2v
integer array k3v
real array k4v
real array k5v
real array k6v
real array k7v
real array k8v
integer k9v=0
integer Kvv=0
integer array Kev
integer array Kxv
unit array Kov
real array Krv
integer Kiv=0
integer Kav=0
integer array Knv
real array KVv
real array KEv
real array KXv
real array KOv
integer array KRv
effect array KIv
integer KAv=0
integer KNv=0
integer array Kbv
unit array KBv
real array Kcv
real array KCv
player array Kdv
real array KDv
real array Kfv
real array KFv
real array Kgv
integer array KGv
integer Khv=0
integer KHv=0
integer array Kjv
unit array KJv
integer array Kkv
integer KKv=0
integer Klv=0
integer array KLv
unit array Kmv
integer array KMv
integer array Kpv
integer KPv=0
integer Kqv=0
integer array KQv
unit array Ksv
real array KSv
real array Ktv
integer array KTv
integer array Kuv
integer KUv=0
integer Kwv=0
integer array KWv
integer array Kyv
real array KYv
real array Kzv
unit array KZv
unit array K_v
integer K0v=0
integer K1v=0
integer array K2v
unit array K3v
player array K4v
effect array K5v
effect array K6v
integer array K7v
real array K8v
real array K9v
real array lvv
real array lev
real array lxv
real array lov
real array lrv
integer array liv
group array lav
integer lnv=0
integer lVv=0
integer array lEv
unit array lXv
integer array lOv
real array lRv
real array lIv
real array lAv
effect array lNv
integer lbv=0
integer lBv=0
integer array lcv
unit array lCv
real array ldv
real array lDv
real array lfv
real array lFv
integer array lgv
integer lGv=0
integer lhv=0
integer array lHv
unit array ljv
real array lJv
real array lkv
real array lKv
real array llv
integer array lLv
integer lmv=0
integer lMv=0
integer array lpv
integer array lPv
real array lqv
unit array lQv
unit array lsv
integer lSv=0
integer ltv=0
integer array lTv
unit array luv
real array lUv
real array lwv
real array lWv
real array lyv
real array lYv
integer array lzv
player array lZv
integer l_v=0
integer l0v=0
integer array l1v
unit array l2v
effect array l3v
integer array l4v
real array l5v
real array l6v
real array l7v
real array l8v
real array l9v
group array Lvv
integer Lev=0
integer Lxv=0
integer array Lov
integer array Lrv
unit array Liv
real array Lav
integer Lnv=0
integer LVv=0
integer array LEv
integer array LXv
real array LOv
unit array LRv
unit array LIv
integer LAv=0
integer LNv=0
integer array Lbv
unit array LBv
player array Lcv
effect array LCv
integer array Ldv
real array LDv
real array Lfv
real array LFv
real array Lgv
real array LGv
real array Lhv
real array LHv
integer Ljv=0
integer LJv=0
integer array Lkv
integer array LKv
unit array Llv
integer LLv=0
integer Lmv=0
integer array LMv
integer array Lpv
unit array LPv
real array Lqv
real array LQv
real array Lsv
integer LSv=0
integer Ltv=0
integer array LTv
integer array Luv
unit array LUv
real array Lwv
real array LWv
real array Lyv
integer LYv=0
integer Lzv=0
integer array LZv
unit array L_v
real array L0v
integer L1v=0
integer L2v=0
integer array L3v
unit array L4v
effect array L5v
integer array L6v
real array L7v
real array L8v
real array L9v
real array mvv
real array mev
group array mxv
integer mov=0
integer mrv=0
integer array miv
unit array mav
real array mnv
integer array mVv
integer mEv=0
integer mXv=0
integer array mOv
unit array mRv
integer array mIv
real array mAv
real array mNv
real array mbv
integer mBv=0
integer mcv=0
integer array mCv
integer array mdv
real array mDv
unit array mfv
real array mFv
real array mgv
integer mGv=0
integer mhv=0
integer array mHv
integer array mjv
unit array mJv
real array mkv
real array mKv
real array mlv
integer mLv=0
integer mmv=0
integer array mMv
unit array mpv
group array mPv
effect array mqv
integer array mQv
real array msv
real array mSv
real array mtv
real array mTv
real array muv
integer mUv=0
integer mwv=0
integer array mWv
integer array myv
unit array mYv
real array mzv
integer mZv=0
integer m_v=0
integer array m0v
unit array m1v
real array m2v
real array m3v
integer array m4v
integer m5v=0
integer m6v=0
integer array m7v
unit array m8v
real array m9v
real array Mvv
real array Mev
real array Mxv
player array Mov
integer array Mrv
integer Miv=0
integer Mav=0
integer array Mnv
unit array MVv
real array MEv
real array MXv
real array MOv
real array MRv
integer array MIv
real array MAv
player array MNv
integer Mbv=0
integer MBv=0
integer array Mcv
unit array MCv
group array Mdv
effect array MDv
integer array Mfv
real array MFv
real array Mgv
real array MGv
real array Mhv
real array MHv
integer Mjv=0
integer MJv=0
integer array Mkv
unit array MKv
real array Mlv
integer array MLv
real array Mmv
real array MMv
integer Mpv=0
integer MPv=0
integer array Mqv
unit array MQv
group array Msv
effect array MSv
integer array Mtv
real array MTv
real array Muv
real array MUv
real array Mwv
real array MWv
integer Myv=0
integer MYv=0
integer array Mzv
integer array MZv
unit array M_v
real array M0v
integer M1v=0
integer M2v=0
integer array M3v
unit array M4v
effect array M5v
integer array M6v
real array M7v
real array M8v
real array M9v
integer pvv=0
integer pev=0
integer array pxv
unit array pov
group array prv
effect array piv
integer array pav
real array pnv
real array pVv
real array pEv
real array pXv
real array pOv
integer pRv=0
integer pIv=0
integer array pAv
unit array pNv
group array pbv
effect array pBv
integer array pcv
real array pCv
real array pdv
real array pDv
real array pfv
real array pFv
integer pgv=0
integer pGv=0
integer array phv
integer array pHv
unit array pjv
real array pJv
integer pkv=0
integer pKv=0
integer array plv
unit array pLv
real array pmv
real array pMv
integer array ppv
integer array pPv
integer pqv=0
integer pQv=0
integer array psv
unit array pSv
real array ptv
integer array pTv
integer puv=0
integer pUv=0
integer array pwv
unit array pWv
player array pyv
integer array pYv
real array pzv
real array pZv
real array p_v
real array p0v
real array p1v
integer array p2v
integer p3v=0
integer p4v=0
integer array p5v
unit array p6v
integer array p7v
real array p8v
real array p9v
integer Pvv=0
integer Pev=0
integer array Pxv
unit array Pov
real array Prv
integer array Piv
integer array Pav
integer Pnv=0
integer PVv=0
integer array PEv
unit array PXv
player array POv
group array PRv
effect array PIv
integer array PAv
real array PNv
real array Pbv
real array PBv
real array Pcv
real array PCv
real array Pdv
real array PDv
integer array Pfv
integer array PFv
integer Pgv=0
integer PGv=0
integer array Phv
unit array PHv
integer array Pjv
real array PJv
real array Pkv
real array PKv
real array Plv
real array PLv
real array Pmv
player array PMv
integer Ppv=0
integer PPv=0
integer array Pqv
unit array PQv
real array Psv
real array PSv
real array Ptv
integer array PTv
integer Puv=0
integer PUv=0
integer array Pwv
integer array PWv
real array Pyv
unit array PYv
real array Pzv
real array PZv
integer P_v=0
integer P0v=0
integer array P1v
integer array P2v
unit array P3v
real array P4v
integer P5v=0
integer P6v=0
integer array P7v
unit array P8v
effect array P9v
integer array qvv
real array qev
real array qxv
real array qov
real array qrv
real array qiv
unit array qav
integer qnv=0
integer qVv=0
integer array qEv
integer array qXv
unit array qOv
real array qRv
integer qIv=0
integer qAv=0
integer array qNv
integer array qbv
real array qBv
unit array qcv
integer array qCv
unit array qdv
integer qDv=0
integer qfv=0
integer array qFv
unit array qgv
real array qGv
real array qhv
real array qHv
player array qjv
integer array qJv
integer qkv=0
integer qKv=0
integer array qlv
unit array qLv
group array qmv
real array qMv
real array qpv
real array qPv
real array qqv
real array qQv
integer array qsv
effect array qSv
integer qtv=0
integer qTv=0
integer array quv
unit array qUv
group array qwv
real array qWv
real array qyv
real array qYv
real array qzv
real array qZv
integer array q_v
effect array q0v
integer q1v=0
integer q2v=0
integer array q3v
unit array q4v
real array q5v
integer array q6v
real array q7v
effect array q8v
real array q9v
real array Qvv
real array Qev
group array Qxv
integer Qov=0
integer Qrv=0
integer array Qiv
integer array Qav
unit array Qnv
real array QVv
integer QEv=0
integer QXv=0
integer array QOv
unit array QRv
effect array QIv
integer array QAv
real array QNv
real array Qbv
real array QBv
real array Qcv
real array QCv
integer array Qdv
group array QDv
integer Qfv=0
integer QFv=0
integer array Qgv
integer array QGv
real array Qhv
real array QHv
real array Qjv
unit array QJv
integer Qkv=0
integer QKv=0
integer array Qlv
integer array QLv
unit array Qmv
unit array QMv
integer Qpv=0
integer QPv=0
integer array Qqv
unit array QQv
player array Qsv
real array QSv
real array Qtv
real array QTv
real array Quv
real array QUv
integer array Qwv
effect array QWv
integer Qyv=0
integer QYv=0
integer array Qzv
unit array QZv
real array Q_v
real array Q0v
real array Q1v
real array Q2v
real array Q3v
integer array Q4v
player array Q5v
real array Q6v
integer Q7v=0
integer Q8v=0
integer array Q9v
unit array svv
group array sev
effect array sxv
integer array sov
real array srv
real array siv
real array sav
real array snv
real array sVv
integer sEv=0
integer sXv=0
integer array sOv
unit array sRv
real array sIv
integer array sAv
real array sNv
real array sbv
real array sBv
integer scv=0
integer sCv=0
integer array sdv
unit array sDv
effect array sfv
integer array sFv
real array sgv
real array sGv
real array shv
real array sHv
integer sjv=0
integer sJv=0
integer array skv
integer array sKv
unit array slv
real array sLv
integer smv=0
integer sMv=0
integer array spv
unit array sPv
real array sqv
real array sQv
real array ssv
real array sSv
integer array stv
integer sTv=0
integer suv=0
integer array sUv
integer array swv
real array sWv
unit array syv
integer array sYv
unit array szv
integer sZv=0
integer s_v=0
integer array s0v
unit array s1v
real array s2v
real array s3v
real array s4v
real array s5v
integer array s6v
effect array s7v
real array s8v
player array s9v
group array Svv
real array Sev
integer Sxv=0
integer Sov=0
integer array Srv
integer array Siv
real array Sav
real array Snv
player array SVv
unit array SEv
unit array SXv
integer SOv=0
integer SRv=0
integer array SIv
unit array SAv
unit array SNv
real array Sbv
real array SBv
real array Scv
real array SCv
real array Sdv
integer array SDv
effect array Sfv
real array SFv
integer array Sgv
player array SGv
group array Shv
real array SHv
boolean array Sjv
integer array SJv
integer Skv=0
integer SKv=0
integer array Slv
integer array SLv
real array Smv
unit array SMv
unit array Spv
integer SPv=0
integer Sqv=0
integer array SQv
unit array Ssv
player array SSv
effect array Stv
effect array STv
effect array Suv
integer array SUv
real array Swv
real array SWv
real array Syv
real array SYv
real array Szv
integer array SZv
group array S_v
integer S0v=0
integer S1v=0
integer array S2v
unit array S3v
real array S4v
real array S5v
real array S6v
integer array S7v
integer S8v=0
integer S9v=0
integer array tvv
unit array tev
real array txv
real array tov
real array trv
integer array tiv
real array tav
integer tnv=0
integer tVv=0
integer array tEv
unit array tXv
effect array tOv
integer array tRv
real array tIv
real array tAv
real array tNv
real array tbv
integer array tBv
real array tcv
integer tCv=0
integer tdv=0
integer array tDv
unit array tfv
player array tFv
integer array tgv
real array tGv
real array thv
real array tHv
real array tjv
real array tJv
integer tkv=0
integer tKv=0
integer array tlv
unit array tLv
player array tmv
group array tMv
real array tpv
real array tPv
real array tqv
real array tQv
real array tsv
real array tSv
real array ttv
integer array tTv
effect array tuv
integer array tUv
integer array twv
boolean array tWv
integer tyv=0
integer tYv=0
integer array tzv
unit array tZv
player array t_v
effect array t0v
integer array t1v
real array t2v
real array t3v
real array t4v
real array t5v
real array t6v
real array t7v
group array t8v
real array t9v
integer array Tvv
integer Tev=0
integer Txv=0
integer array Tov
unit array Trv
player array Tiv
effect array Tav
integer array Tnv
real array TVv
real array TEv
real array TXv
real array TOv
real array TRv
real array TIv
real array TAv
integer TNv=0
integer Tbv=0
integer array TBv
integer array Tcv
effect array TCv
integer Tdv=0
integer TDv=0
integer array Tfv
real array TFv
real array Tgv
real array TGv
real array Thv
integer array THv
effect array Tjv
integer TJv=0
integer Tkv=0
integer array TKv
integer array Tlv
real array TLv
real array Tmv
real array TMv
integer Tpv=0
integer TPv=0
integer array Tqv
unit array TQv
player array Tsv
integer array TSv
real array Ttv
real array TTv
real array Tuv
real array TUv
real array Twv
integer array TWv
integer array Tyv
integer TYv=0
integer Tzv=0
integer array TZv
unit array T_v
effect array T0v
integer array T1v
real array T2v
real array T3v
real array T4v
real array T5v
real array T6v
group array T7v
integer T8v=0
integer T9v=0
integer array uvv
unit array uev
player array uxv
group array uov
effect array urv
integer array uiv
real array uav
real array unv
real array uVv
real array uEv
real array uXv
integer array uOv
real array uRv
real array uIv
integer array uAv
integer uNv=0
integer ubv=0
integer array uBv
unit array ucv
effect array uCv
integer array udv
real array uDv
real array ufv
real array uFv
real array ugv
real array uGv
player array uhv
real array uHv
boolean array ujv
real array uJv
integer ukv=0
integer uKv=0
integer array ulv
unit array uLv
player array umv
real array uMv
real array upv
integer array uPv
group array uqv
effect array uQv
integer array usv
integer uSv=0
integer utv=0
integer array uTv
integer array uuv
real array uUv
unit array uwv
unit array uWv
real array uyv
integer uYv=0
integer uzv=0
integer array uZv
unit array u_v
player array u0v
effect array u1v
integer array u2v
real array u3v
real array u4v
real array u5v
real array u6v
real array u7v
real array u8v
real array u9v
integer array Uvv
group array Uev
integer array Uxv
real array Uov
effect array Urv
effect array Uiv
effect array Uav
real array Unv
integer UVv=0
integer UEv=0
integer array UXv
integer array UOv
real array URv
real array UIv
unit array UAv
unit array UNv
effect array Ubv
integer UBv=0
integer Ucv=0
integer array UCv
unit array Udv
player array UDv
effect array Ufv
effect array UFv
integer array Ugv
real array UGv
real array Uhv
real array UHv
real array Ujv
real array UJv
real array Ukv
real array UKv
integer array Ulv
group array ULv
boolean array Umv
integer array UMv
integer Upv=0
integer UPv=0
integer array Uqv
unit array UQv
unit array Usv
effect array USv
integer array Utv
real array UTv
real array Uuv
real array UUv
real array Uwv
real array UWv
real array Uyv
integer UYv=0
integer Uzv=0
integer array UZv
unit array U_v
player array U0v
effect array U1v
integer array U2v
real array U3v
real array U4v
real array U5v
real array U6v
real array U7v
real array U8v
group array U9v
real array wvv
integer array wev
integer wxv=0
integer wov=0
integer array wrv
unit array wiv
integer array wav
real array wnv
real array wVv
real array wEv
real array wXv
real array wOv
real array wRv
integer wIv=0
integer wAv=0
integer array wNv
integer array wbv
real array wBv
unit array wcv
unit array wCv
integer wdv=0
integer wDv=0
integer array wfv
unit array wFv
player array wgv
effect array wGv
integer array whv
real array wHv
real array wjv
real array wJv
real array wkv
real array wKv
real array wlv
integer wLv=0
integer wmv=0
integer array wMv
unit array wpv
player array wPv
group array wqv
effect array wQv
integer array wsv
real array wSv
real array wtv
real array wTv
real array wuv
real array wUv
integer array wwv
real array wWv
real array wyv
integer wYv=0
integer wzv=0
integer array wZv
integer array w_v
effect array w0v
integer w1v=0
integer w2v=0
integer array w3v
unit array w4v
player array w5v
group array w6v
effect array w7v
integer array w8v
real array w9v
real array Wvv
real array Wev
real array Wxv
real array Wov
integer array Wrv
real array Wiv
real array Wav
integer array Wnv
integer WVv=0
integer WEv=0
integer array WXv
integer array WOv
real array WRv
unit array WIv
integer array WAv
unit array WNv
integer Wbv=0
integer WBv=0
integer array Wcv
unit array WCv
player array Wdv
effect array WDv
integer array Wfv
real array WFv
real array Wgv
real array WGv
real array Whv
real array WHv
real array Wjv
real array WJv
group array Wkv
integer array WKv
integer array Wlv
integer array WLv
integer Wmv=0
integer WMv=0
integer array Wpv
integer array WPv
real array Wqv
real array WQv
real array Wsv
real array WSv
real array Wtv
real array WTv
unit array Wuv
integer WUv=0
integer Wwv=0
integer array WWv
integer array Wyv
real array WYv
unit array Wzv
integer array WZv
unit array W_v
integer W0v=0
integer W1v=0
integer array W2v
unit array W3v
player array W4v
effect array W5v
integer array W6v
real array W7v
real array W8v
real array W9v
real array yvv
real array yev
real array yxv
real array yov
group array yrv
integer array yiv
integer array yav
integer ynv=0
integer yVv=0
integer array yEv
unit array yXv
player array yOv
group array yRv
effect array yIv
integer array yAv
real array yNv
real array ybv
real array yBv
real array ycv
real array yCv
integer array ydv
real array yDv
real array yfv
integer yFv=0
integer ygv=0
integer array yGv
unit array yhv
player array yHv
effect array yjv
integer array yJv
real array ykv
real array yKv
real array ylv
real array yLv
real array ymv
real array yMv
real array ypv
group array yPv
integer array yqv
integer yQv=0
integer ysv=0
integer array ySv
integer array ytv
real array yTv
unit array yuv
integer array yUv
unit array ywv
integer yWv=0
integer yyv=0
integer array yYv
unit array yzv
real array yZv
real array y_v
real array y0v
real array y1v
real array y2v
player array y3v
integer array y4v
integer array y5v
group array y6v
integer y7v=0
integer y8v=0
integer array y9v
integer array Yvv
real array Yev
real array Yxv
real array Yov
real array Yrv
real array Yiv
player array Yav
real array Ynv
unit array YVv
integer YEv=0
integer YXv=0
integer array YOv
unit array YRv
player array YIv
effect array YAv
integer array YNv
real array Ybv
real array YBv
real array Ycv
real array YCv
real array Ydv
real array YDv
real array Yfv
group array YFv
integer array Ygv
integer YGv=0
integer Yhv=0
integer array YHv
unit array Yjv
player array YJv
group array Ykv
effect array YKv
integer array Ylv
real array YLv
real array Ymv
real array YMv
real array Ypv
integer array YPv
real array Yqv
real array YQv
integer array Ysv
integer YSv=0
integer Ytv=0
integer array YTv
unit array Yuv
player array YUv
group array Ywv
effect array YWv
integer array Yyv
real array YYv
real array Yzv
real array YZv
real array Y_v
real array Y0v
integer array Y1v
real array Y2v
real array Y3v
integer array Y4v
boolean array Y5v
integer Y6v=0
integer Y7v=0
integer array Y8v
unit array Y9v
integer array zvv
real array zev
real array zxv
real array zov
real array zrv
real array ziv
real array zav
integer znv=0
integer zVv=0
integer array zEv
unit array zXv
real array zOv
integer array zRv
real array zIv
real array zAv
integer zNv=0
integer zbv=0
integer array zBv
integer array zcv
real array zCv
unit array zdv
unit array zDv
real array zfv
integer zFv=0
integer zgv=0
integer array zGv
unit array zhv
player array zHv
effect array zjv
integer array zJv
real array zkv
real array zKv
real array zlv
real array zLv
real array zmv
real array zMv
real array zpv
integer array zPv
group array zqv
boolean array zQv
integer zsv=0
integer zSv=0
integer array ztv
integer array zTv
real array zuv
real array zUv
real array zwv
real array zWv
real array zyv
real array zYv
player array zzv
unit array zZv
boolean array z_v
integer z0v=0
integer z1v=0
integer array z2v
unit array z3v
real array z4v
integer array z5v
integer z6v=0
integer z7v=0
integer array z8v
integer array z9v
real array Zvv
unit array Zev
unit array Zxv
real array Zov
integer Zrv=0
integer Ziv=0
integer array Zav
unit array Znv
player array ZVv
group array ZEv
effect array ZXv
integer array ZOv
real array ZRv
real array ZIv
real array ZAv
real array ZNv
real array Zbv
integer array ZBv
real array Zcv
real array ZCv
integer array Zdv
integer ZDv=0
integer Zfv=0
integer array ZFv
unit array Zgv
player array ZGv
real array Zhv
real array ZHv
real array Zjv
real array ZJv
real array Zkv
real array ZKv
integer array Zlv
real array ZLv
effect array Zmv
integer ZMv=0
integer Zpv=0
integer array ZPv
unit array Zqv
player array ZQv
real array Zsv
real array ZSv
real array Ztv
integer array ZTv
integer Zuv=0
integer ZUv=0
integer array Zwv
unit array ZWv
integer array Zyv
real array ZYv
real array Zzv
real array ZZv
integer Z_v=0
integer Z0v=0
integer array Z1v
unit array Z2v
player array Z3v
real array Z4v
real array Z5v
real array Z6v
real array Z7v
real array Z8v
integer array Z9v
real array vve
integer array vee
integer vxe=0
integer voe=0
integer array vre
unit array vie
player array vae
effect array vne
integer array vVe
real array vEe
real array vXe
real array vOe
real array vRe
real array vIe
real array vAe
real array vNe
group array vbe
integer array vBe
integer vce=0
integer vCe=0
integer array vde
unit array vDe
real array vfe
integer array vFe
real array vge
real array vGe
integer vhe=0
integer vHe=0
integer array vje
integer array vJe
unit array vke
real array vKe
integer vle=0
integer vLe=0
integer array vme
unit array vMe
unit array vpe
player array vPe
effect array vqe
integer array vQe
real array vse
real array vSe
real array vte
real array vTe
real array vue
real array vUe
real array vwe
group array vWe
integer array vye
integer array vYe
integer array vze
boolean array vZe
boolean array v_e
integer v0e=0
integer v1e=0
integer array v2e
unit array v3e
unit array v4e
real array v5e
real array v6e
real array v7e
real array v8e
real array v9e
integer array eve
player array eee
real array exe
integer eoe=0
integer ere=0
integer array eie
unit array eae
player array ene
effect array eVe
integer array eEe
real array eXe
real array eOe
real array eRe
real array eIe
real array eAe
real array eNe
group array ebe
real array eBe
integer array ece
integer eCe=0
integer ede=0
integer array eDe
unit array efe
player array eFe
effect array ege
integer array eGe
real array ehe
real array eHe
real array eje
real array eJe
real array eke
real array eKe
real array ele
real array eLe
integer eme=0
integer eMe=0
integer array epe
unit array ePe
player array eqe
group array eQe
effect array ese
integer array eSe
real array ete
real array eTe
real array eue
real array eUe
real array ewe
integer array eWe
real array eye
real array eYe
integer array eze
integer eZe=0
integer e_e=0
integer array e0e
unit array e1e
integer array e2e
real array e3e
real array e4e
real array e5e
real array e6e
real array e7e
real array e8e
integer e9e=0
integer xve=0
integer array xee
effect array xxe
integer array xoe
real array xre
real array xie
real array xae
real array xne
integer xVe=0
integer xEe=0
integer array xXe
unit array xOe
unit array xRe
effect array xIe
integer array xAe
real array xNe
real array xbe
real array xBe
real array xce
real array xCe
real array xde
real array xDe
boolean array xfe
boolean array xFe
player array xge
integer xGe=0
integer xhe=0
integer array xHe
integer array xje
unit array xJe
real array xke
integer xKe=0
integer xle=0
integer array xLe
unit array xme
player array xMe
integer array xpe
real array xPe
real array xqe
real array xQe
real array xse
real array xSe
effect array xte
integer array xTe
integer xue=0
integer xUe=0
integer array xwe
integer array xWe
unit array xye
real array xYe
integer xze=0
integer xZe=0
integer array x_e
integer array x0e
real array x1e
unit array x2e
integer array x3e
unit array x4e
integer x5e=0
integer x6e=0
integer array x7e
integer array x8e
effect array x9e
real array ove
real array oee
real array oxe
integer ooe=0
integer ore=0
integer array oie
unit array oae
real array one
real array oVe
real array oEe
real array oXe
real array oOe
player array oRe
integer array oIe
integer array oAe
group array oNe
integer obe=0
integer oBe=0
integer array oce
integer array oCe
real array ode
real array oDe
real array ofe
player array oFe
effect array oge
real array oGe
real array ohe
unit array oHe
integer array oje
integer oJe=0
integer oke=0
integer array oKe
unit array ole
integer array oLe
real array ome
integer oMe=0
integer ope=0
integer array oPe
integer array oqe
real array oQe
real array ose
real array oSe
player array ote
effect array oTe
real array oue
real array oUe
unit array owe
integer oWe=0
integer oye=0
integer array oYe
unit array oze
player array oZe
effect array o_e
integer array o0e
real array o1e
real array o2e
real array o3e
real array o4e
real array o5e
real array o6e
real array o7e
integer o8e=0
integer o9e=0
integer array rve
unit array ree
player array rxe
integer array roe
real array rre
real array rie
real array rae
real array rne
real array rVe
effect array rEe
effect array rXe
integer rOe=0
integer rRe=0
integer array rIe
unit array rAe
player array rNe
effect array rbe
integer array rBe
real array rce
real array rCe
real array rde
real array rDe
real array rfe
real array rFe
group array rge
real array rGe
integer array rhe
integer rHe=0
integer rje=0
integer array rJe
unit array rke
player array rKe
effect array rle
integer array rLe
real array rme
real array rMe
real array rpe
real array rPe
real array rqe
real array rQe
real array rse
real array rSe
integer rte=0
integer rTe=0
integer array rue
integer array rUe
effect array rwe
real array rWe
real array rye
real array rYe
unit array rze
player array rZe
real array r_e
real array r0e
real array r1e
integer r2e=0
integer r3e=0
integer array r4e
integer array r5e
unit array r6e
real array r7e
integer r8e=0
integer r9e=0
integer array ive
integer array iee
unit array ixe
real array ioe
integer ire=0
integer iie=0
integer array iae
real array ine
real array iVe
real array iEe
real array iXe
integer array iOe
effect array iRe
integer iIe=0
integer iAe=0
integer array iNe
unit array ibe
player array iBe
integer array ice
real array iCe
real array ide
real array iDe
real array ife
real array iFe
integer array ige
effect array iGe
unit array ihe
integer array iHe
integer ije=0
integer iJe=0
integer array ike
integer array iKe
real array ile
unit array iLe
integer array ime
unit array iMe
integer ipe=0
integer iPe=0
integer array iqe
unit array iQe
unit array ise
player array iSe
effect array ite
integer array iTe
real array iue
real array iUe
real array iwe
real array iWe
real array iye
real array iYe
real array ize
group array iZe
integer array i_e
integer array i0e
integer array i1e
boolean array i2e
boolean array i3e
integer i4e=0
integer i5e=0
integer array i6e
unit array i7e
unit array i8e
real array i9e
real array ave
real array aee
real array axe
real array are
integer array aie
player array aae
real array ane
integer aVe=0
integer aEe=0
integer array aXe
integer array aOe
real array aRe
unit array aIe
unit array aAe
integer aNe=0
integer abe=0
integer array aBe
unit array ace
player array aCe
integer array ade
real array aDe
real array afe
real array aFe
real array age
real array aGe
integer array ahe
integer aHe=0
integer aje=0
integer array aJe
unit array ake
player array aKe
group array ale
effect array aLe
integer array ame
real array aMe
real array ape
real array aPe
real array aqe
real array aQe
integer array ase
real array aSe
real array ate
effect array aTe
integer aue=0
integer aUe=0
integer array awe
integer array aWe
real array aye
unit array aYe
unit array aze
integer array aZe
integer a_e=0
integer a0e=0
integer array a1e
unit array a2e
player array a3e
group array a4e
effect array a5e
integer array a6e
real array a7e
real array a8e
real array a9e
real array nve
real array nee
real array nxe
real array noe
integer array nre
integer array nie
integer nae=0
integer nne=0
integer array nVe
unit array nEe
integer array nXe
real array nOe
real array nRe
real array nIe
real array nAe
real array nNe
real array nbe
player array nBe
integer nce=0
integer nCe=0
integer array nde
unit array nDe
integer array nfe
real array nFe
real array nge
real array nGe
real array nhe
real array nHe
player array nje
integer nJe=0
integer nke=0
integer array nKe
integer array nle
unit array nLe
real array nme
real array nMe
real array npe
real array nPe
integer nqe=0
integer nQe=0
integer array nse
unit array nSe
player array nte
effect array nTe
integer array nue
real array nUe
real array nwe
real array nWe
real array nye
real array nYe
real array nze
real array nZe
group array n_e
integer array n0e
integer n1e=0
integer n2e=0
integer array n3e
integer array n4e
real array n5e
real array n6e
real array n7e
real array n8e
real array n9e
real array Vve
unit array Vee
integer Vxe=0
integer Voe=0
integer array Vre
integer array Vie
unit array Vae
integer Vne=0
integer VVe=0
integer array VEe
integer array VXe
unit array VOe
integer array VRe
integer VIe=0
integer VAe=0
integer array VNe
player array Vbe
integer array VBe
integer array Vce
real array VCe
real array Vde
integer VDe=0
integer Vfe=0
integer array VFe
integer array Vge
unit array VGe
real array Vhe
real array VHe
real array Vje
real array VJe
integer Vke=0
integer VKe=0
integer array Vle
integer array VLe
unit array Vme
real array VMe
integer Vpe=0
integer VPe=0
integer array Vqe
integer array VQe
unit array Vse
real array VSe
integer Vte=0
integer VTe=0
integer array Vue
integer array VUe
integer Vwe=0
integer VWe=0
integer array Vye
integer array VYe
timer array Vze
timerdialog array VZe
integer V_e=0
integer V0e=0
integer array V1e
integer array V2e
real array V3e
real array V4e
integer array V5e
integer array V6e
integer V7e=0
integer V8e=0
integer array V9e
integer array Eve
integer Eee=0
integer Exe=0
integer array Eoe
integer array Ere
timer array Eie
timerdialog array Eae
integer Ene=0
integer EVe=0
integer array EEe
integer array EXe
integer EOe=0
integer ERe=0
integer array EIe
integer array EAe
timer array ENe
timerdialog array Ebe
integer EBe=0
integer Ece=0
integer array ECe
integer array Ede
integer EDe=0
integer Efe=0
integer array EFe
integer array Ege
unit array EGe
real array Ehe
real array EHe
real array Eje
real array EJe
integer Eke=0
integer EKe=0
integer array Ele
integer array ELe
integer Eme=0
integer EMe=0
integer array Epe
integer array EPe
timer array Eqe
timerdialog array EQe
integer Ese=0
integer ESe=0
integer array Ete
integer array ETe
integer Eue=0
integer EUe=0
integer array Ewe
integer array EWe
unit array Eye
real array EYe
real array Eze
real array EZe
real array E_e
integer E0e=0
integer E1e=0
integer array E2e
unit array E3e
real array E4e
integer array E5e
integer E6e=0
integer E7e=0
integer array E8e
integer array E9e
real array Xve
real array Xee
integer Xxe=0
integer Xoe=0
integer array Xre
integer array Xie
integer Xae=0
integer Xne=0
integer array XVe
integer array XEe
timer array XXe
timerdialog array XOe
integer XRe=0
integer XIe=0
integer array XAe
integer array XNe
integer Xbe=0
integer XBe=0
integer array Xce
integer array XCe
timer array Xde
timerdialog array XDe
integer Xfe=0
integer XFe=0
integer array Xge
integer array XGe
unit array Xhe
real array XHe
integer Xje=0
integer XJe=0
integer array Xke
integer array XKe
integer Xle=0
integer XLe=0
integer array Xme
integer array XMe
integer Xpe=0
integer XPe=0
integer array Xqe
integer array XQe
timer array Xse
timerdialog array XSe
integer Xte=0
integer XTe=0
integer array Xue
integer array XUe
unit array Xwe
real array XWe
integer Xye=0
integer XYe=0
integer array Xze
integer array XZe
integer X_e=0
integer X0e=0
integer array X1e
integer array X2e
timer array X3e
timerdialog array X4e
integer X5e=0
integer X6e=0
integer array X7e
integer array X8e
integer X9e=0
integer Ove=0
integer array Oee
integer array Oxe
integer Ooe=0
integer Ore=0
integer array Oie
integer array Oae
timer array One
timerdialog array OVe
integer OEe=0
integer OXe=0
integer array OOe
integer array ORe
integer OIe=0
integer OAe=0
integer array ONe
integer array Obe
timer array OBe
timerdialog array Oce
integer OCe=0
integer Ode=0
integer array ODe
unit array Ofe
unit array OFe
unit array Oge
unit array OGe
integer array Ohe
integer OHe=0
integer Oje=0
integer array OJe
integer array Oke
integer OKe=0
integer Ole=0
integer array OLe
integer array Ome
timer array OMe
timerdialog array Ope
integer OPe=0
integer Oqe=0
integer array OQe
integer array Ose
real array OSe
real array Ote
integer OTe=0
integer Oue=0
integer array OUe
integer array Owe
integer OWe=0
integer Oye=0
integer array OYe
integer array Oze
timer array OZe
timerdialog array O_e
integer O0e=0
integer O1e=0
integer array O2e
integer array O3e
integer O4e=0
integer O5e=0
integer array O6e
integer array O7e
timer array O8e
timerdialog array O9e
unit array Rve
integer Ree=0
integer Rxe=0
integer array Roe
integer array Rre
integer array Rie
player array Rae
integer Rne=0
integer RVe=0
integer array REe
integer array RXe
integer array ROe
integer array RRe
integer RIe=0
integer RAe=0
integer array RNe
integer array Rbe
integer RBe=0
integer Rce=0
integer array RCe
integer array Rde
timer array RDe
timerdialog array Rfe
integer RFe=0
integer Rge=0
integer array RGe
integer array Rhe
integer RHe=0
integer Rje=0
integer array RJe
integer array Rke
timer array RKe
timerdialog array Rle
integer RLe=0
integer Rme=0
integer array RMe
integer array Rpe
integer RPe=0
integer Rqe=0
integer array RQe
integer array Rse
integer RSe=0
integer Rte=0
integer array RTe
integer array Rue
timer array RUe
timerdialog array Rwe
integer RWe=0
integer Rye=0
integer array RYe
integer array Rze
integer RZe=0
integer R_e=0
integer array R0e
integer array R1e
unit array R2e
integer R3e=0
integer R4e=0
integer array R5e
integer array R6e
integer R7e=0
integer R8e=0
integer array R9e
integer array Ive
unit array Iee
player array Ixe
effect array Ioe
integer array Ire
integer Iie=0
integer Iae=0
integer array Ine
integer array IVe
integer array IEe
integer IXe=0
integer IOe=0
integer array IRe
integer array IIe
integer array IAe
integer INe=0
integer Ibe=0
integer array IBe
integer array Ice
integer ICe=0
integer Ide=0
integer array IDe
integer array Ife
integer array IFe
unit array Ige
integer IGe=0
integer Ihe=0
integer array IHe
integer array Ije
integer IJe=0
integer Ike=0
integer array IKe
integer Ile=0
integer ILe=0
integer array Ime
integer array IMe
integer Ipe=0
integer IPe=0
integer array Iqe
integer array IQe
integer array Ise
effect array ISe
real array Ite
real array ITe
integer Iue=0
integer IUe=0
integer array Iwe
integer array IWe
integer array Iye
player array IYe
integer array Ize
integer IZe=0
integer I_e=0
integer array I0e
player array I1e
integer array I2e
integer array I3e
integer array I4e
integer I5e=0
integer I6e=0
integer array I7e
integer array I8e
integer array I9e
integer Ave=0
integer Aee=0
integer array Axe
integer array Aoe
integer array Are
player array Aie
integer Aae=0
integer Ane=0
integer array AVe
integer array AEe
unit array AXe
player array AOe
integer ARe=0
integer AIe=0
integer array AAe
integer array ANe
integer array Abe
integer array ABe
unit array Ace
integer ACe=0
integer Ade=0
integer array ADe
integer array Afe
unit array AFe
unit array Age
integer array AGe
real array Ahe
real array AHe
integer Aje=0
integer AJe=0
integer array Ake
integer array AKe
unit array Ale
real array ALe
integer array Ame
integer AMe=0
integer Ape=0
integer array APe
integer array Aqe
unit array AQe
unit array Ase
integer array ASe
integer Ate=0
integer ATe=0
integer array Aue
effect array AUe
integer Awe=0
integer AWe=0
integer array Aye
integer array AYe
unit array Aze
integer AZe=0
integer A_e=0
integer array A0e
integer array A1e
integer array A2e
integer A3e=0
integer A4e=0
integer array A5e
integer array A6e
integer array A7e
player array A8e
unit array A9e
integer array Nve
integer array Nee
integer array Nxe
integer array Noe
integer array Nre
item array Nie
item array Nae
item array Nne
integer array NVe
integer array NEe
integer array NXe
integer array NOe
integer array NRe
integer NIe=0
integer NAe=0
integer array NNe
integer array Nbe
integer array NBe
player array Nce
unit array NCe
integer array Nde
integer array NDe
integer array Nfe
integer array NFe
integer array Nge
item array NGe
item array Nhe
integer array NHe
integer array Nje
integer array NJe
integer array Nke
integer NKe=0
integer Nle=0
integer array NLe
integer array Nme
integer array NMe
player array Npe
unit array NPe
integer array Nqe
integer array NQe
integer array Nse
integer array NSe
integer array Nte
item array NTe
item array Nue
item array NUe
integer array Nwe
integer array NWe
integer array Nye
integer array NYe
integer array Nze
integer array NZe
integer array N_e
string array N0e
string array N1e
string array N2e
real array N3e
real array N4e
integer array N5e
integer array N6e
integer array N7e
integer array N8e
integer array N9e
item array bve
integer array bee
integer array bxe
integer array boe
integer array bre
integer array bie
integer array bae
integer array bne
integer array bVe
integer array bEe
integer array bXe
integer array bOe
integer array bRe
integer array bIe
integer array bAe
boolean array bNe
framehandle array bbe
integer array bBe
string array bce
string array bCe
boolean array bde
unit array bDe
integer array bfe
integer array bFe
integer array bge
integer array bGe
integer array bhe
integer array bHe
integer array bje
string array bJe
item array bke
integer array bKe
string array ble
boolean array bLe
framehandle array bme
integer array bMe
string array bpe
string array bPe
string array bqe
boolean array bQe
framehandle array bse
string array bSe
string array bte
string array bTe
item array bue
integer array bUe
effect array bwe
item array bWe
boolean array bye
framehandle array bYe
integer array bze
string array bZe
string array b_e
string array b0e
boolean array b1e
framehandle array b2e
string array b3e
string array b4e
boolean array b5e
integer array b6e
string array b7e
string array b8e
boolean array b9e
framehandle array Bve
string array Bee
boolean array Bxe
string array Boe
unit array Bre
integer array Bie
boolean array Bae
integer array Bne
boolean array BVe
boolean array BEe
boolean array BXe
boolean array BOe
integer array BRe
boolean array BIe
boolean array BAe
boolean array BNe
boolean array Bbe
boolean array BBe
boolean array Bce
integer array BCe
integer array Bde
integer array BDe
integer array Bfe
integer array BFe
real array Bge
integer array BGe
integer array Bhe
boolean array BHe
framehandle array Bje
boolean array BJe
integer array Bke
string array BKe
string array Ble
string array BLe
integer array Bme
integer array BMe
integer array Bpe
integer array BPe
integer array Bqe
boolean array BQe
framehandle array Bse
integer array BSe
string array Bte
string array BTe
integer array Bue
integer array BUe
integer array Bwe
integer array BWe
integer array Bye
real array BYe
unit array Bze
integer array BZe
integer array B_e
integer array B0e
integer array B1e
boolean array B2e
framehandle array B3e
integer array B4e
string array B5e
string array B6e
string array B7e
integer array B8e
integer array B9e
boolean array cve
integer array cee
integer array cxe
string array coe
string array cre
string array cie
string array cae
integer array cne
string array cVe
integer array cEe
string array cXe
integer array cOe
integer array cRe
integer array cIe
integer array cAe
integer array cNe
integer array cbe
integer array cBe
integer array cce
integer array cCe
integer array cde
integer array cDe
integer array cfe
integer array cFe
integer array cge
integer array cGe
integer array che
integer array cHe
boolean array cje
real array cJe
real array cke
integer array cKe
integer array cle
integer array cLe
trigger array cme
trigger array cMe
trigger array cpe
trigger array cPe
trigger array cqe
trigger array cQe
trigger array cse
trigger array cSe
trigger array cte
trigger array cTe
trigger array cue
unit cUe
string cwe
real cWe
real cye
real cYe
real cze
effect cZe
player c_e
integer c0e
integer c1e
integer c2e
boolean c3e
group c4e
lightning c5e
real c8e=.0
real c9e=.0
boolexpr Cxe=null
endglobals
function Cre takes nothing returns boolean
local real dx=GetDestructableX(GetFilterDestructable())-c8e
local real dy=GetDestructableY(GetFilterDestructable())-c9e
return(dx*dx+dy*dy<=bj_enumDestructableRadius)
endfunction
function Cie takes itemtype Cae,integer Cne returns nothing
local group g
set bj_stockPickedItemType=Cae
set bj_stockPickedItemLevel=Cne
set g=CreateGroup()
call GroupEnumUnitsOfType(g,"marketplace",Cxe)
call ForGroup(g,function UpdateEachStockBuildingEnum)
call DestroyGroup(g)
set g=null
endfunction
function CVe takes nothing returns nothing
local integer pickedItemId
local itemtype CEe
local integer CXe=0
local integer COe=0
local integer Cne
set Cne=1
loop
if(bj_stockAllowedPermanent[Cne])then
set COe=COe+1
if(GetRandomInt(1,COe)==1)then
set CEe=ITEM_TYPE_PERMANENT
set CXe=Cne
endif
endif
if(bj_stockAllowedCharged[Cne])then
set COe=COe+1
if(GetRandomInt(1,COe)==1)then
set CEe=ITEM_TYPE_CHARGED
set CXe=Cne
endif
endif
if(bj_stockAllowedArtifact[Cne])then
set COe=COe+1
if(GetRandomInt(1,COe)==1)then
set CEe=ITEM_TYPE_ARTIFACT
set CXe=Cne
endif
endif
set Cne=Cne+1
exitwhen Cne>$A
endloop
if(COe==0)then
set CEe=null
return
endif
call Cie(CEe,CXe)
set CEe=null
endfunction
function CRe takes nothing returns nothing
call CVe()
call TimerStart(bj_stockUpdateTimer,bj_STOCK_RESTOCK_INTERVAL,true,function CVe)
endfunction
function CAe takes nothing returns boolean
return true
endfunction
function CCe takes integer i,real v returns nothing
if(i<8191)then
set N3e[i]=v
else
set N4e[i-8191]=v
endif
endfunction
function Cde takes integer i returns integer
if(i<8191)then
return N5e[i]
else
return N6e[i-8191]
endif
endfunction
function CDe takes integer i,integer v returns nothing
if(i<8191)then
set N5e[i]=v
else
set N6e[i-8191]=v
endif
endfunction
function Cfe takes integer i returns integer
if(i<8191)then
return N7e[i]
else
return N8e[i-8191]
endif
endfunction
function CFe takes integer i,integer v returns nothing
if(i<8191)then
set N7e[i]=v
else
set N8e[i-8191]=v
endif
endfunction
function Cge takes nothing returns integer
local integer CGe=NKe
if(CGe!=0)then
set NKe=NLe[CGe]
else
set Nle=Nle+1
set CGe=Nle
endif
if(CGe>8190)then
return 0
endif
set NLe[CGe]=-1
return CGe
endfunction
function Che takes integer CGe returns nothing
if CGe==null then
return
elseif(NLe[CGe]!=-1)then
return
endif
set NLe[CGe]=NKe
set NKe=CGe
endfunction
function CHe takes nothing returns integer
local integer CGe=NIe
if(CGe!=0)then
set NIe=NNe[CGe]
else
set NAe=NAe+1
set CGe=NAe
endif
if(CGe>8190)then
return 0
endif
set NNe[CGe]=-1
return CGe
endfunction
function Cje takes integer CGe returns nothing
if CGe==null then
return
elseif(NNe[CGe]!=-1)then
return
endif
set NNe[CGe]=NIe
set NIe=CGe
endfunction
function CJe takes nothing returns integer
local integer CGe=A3e
if(CGe!=0)then
set A3e=A5e[CGe]
else
set A4e=A4e+1
set CGe=A4e
endif
if(CGe>8190)then
return 0
endif
set A5e[CGe]=-1
return CGe
endfunction
function Cke takes integer CGe returns nothing
if CGe==null then
return
elseif(A5e[CGe]!=-1)then
return
endif
set A5e[CGe]=A3e
set A3e=CGe
endfunction
function CKe takes nothing returns integer
local integer CGe=AZe
if(CGe!=0)then
set AZe=A0e[CGe]
else
set A_e=A_e+1
set CGe=A_e
endif
if(CGe>8190)then
return 0
endif
set A0e[CGe]=-1
return CGe
endfunction
function Cle takes integer CGe returns nothing
if CGe==null then
return
elseif(A0e[CGe]!=-1)then
return
endif
set A0e[CGe]=AZe
set AZe=CGe
endfunction
function CLe takes nothing returns integer
local integer CGe=Awe
if(CGe!=0)then
set Awe=Aye[CGe]
else
set AWe=AWe+1
set CGe=AWe
endif
if(CGe>8190)then
return 0
endif
set Aye[CGe]=-1
return CGe
endfunction
function Cme takes integer CGe returns nothing
if CGe==null then
return
elseif(Aye[CGe]!=-1)then
return
endif
set Aye[CGe]=Awe
set Awe=CGe
endfunction
function CMe takes nothing returns integer
local integer CGe=Ate
if(CGe!=0)then
set Ate=Aue[CGe]
else
set ATe=ATe+1
set CGe=ATe
endif
if(CGe>8190)then
return 0
endif
set Aue[CGe]=-1
return CGe
endfunction
function Cpe takes integer CGe returns nothing
if CGe==null then
return
elseif(Aue[CGe]!=-1)then
return
endif
set Aue[CGe]=Ate
set Ate=CGe
endfunction
function CPe takes nothing returns integer
local integer CGe=AMe
if(CGe!=0)then
set AMe=APe[CGe]
else
set Ape=Ape+1
set CGe=Ape
endif
if(CGe>8190)then
return 0
endif
set APe[CGe]=-1
return CGe
endfunction
function Cqe takes integer CGe returns nothing
if CGe==null then
return
elseif(APe[CGe]!=-1)then
return
endif
set APe[CGe]=AMe
set AMe=CGe
endfunction
function CQe takes nothing returns integer
local integer CGe=Aje
if(CGe!=0)then
set Aje=Ake[CGe]
else
set AJe=AJe+1
set CGe=AJe
endif
if(CGe>8190)then
return 0
endif
set Ake[CGe]=-1
return CGe
endfunction
function Cse takes integer CGe returns nothing
if CGe==null then
return
elseif(Ake[CGe]!=-1)then
return
endif
set Ake[CGe]=Aje
set Aje=CGe
endfunction
function CSe takes nothing returns integer
local integer CGe=ACe
if(CGe!=0)then
set ACe=ADe[CGe]
else
set Ade=Ade+1
set CGe=Ade
endif
if(CGe>8190)then
return 0
endif
set ADe[CGe]=-1
return CGe
endfunction
function Cte takes integer CGe returns nothing
if CGe==null then
return
elseif(ADe[CGe]!=-1)then
return
endif
set ADe[CGe]=ACe
set ACe=CGe
endfunction
function CTe takes nothing returns integer
local integer CGe=ARe
if(CGe!=0)then
set ARe=AAe[CGe]
else
set AIe=AIe+1
set CGe=AIe
endif
if(CGe>8190)then
return 0
endif
set AAe[CGe]=-1
return CGe
endfunction
function Cue takes integer CGe returns nothing
if CGe==null then
return
elseif(AAe[CGe]!=-1)then
return
endif
set AAe[CGe]=ARe
set ARe=CGe
endfunction
function CUe takes nothing returns integer
local integer CGe=Aae
if(CGe!=0)then
set Aae=AVe[CGe]
else
set Ane=Ane+1
set CGe=Ane
endif
if(CGe>8190)then
return 0
endif
set AVe[CGe]=-1
return CGe
endfunction
function Cwe takes integer CGe returns nothing
if CGe==null then
return
elseif(AVe[CGe]!=-1)then
return
endif
set AVe[CGe]=Aae
set Aae=CGe
endfunction
function CWe takes nothing returns integer
local integer CGe=Ave
if(CGe!=0)then
set Ave=Axe[CGe]
else
set Aee=Aee+1
set CGe=Aee
endif
if(CGe>8190)then
return 0
endif
set Axe[CGe]=-1
return CGe
endfunction
function Cye takes integer CGe returns nothing
if CGe==null then
return
elseif(Axe[CGe]!=-1)then
return
endif
set Axe[CGe]=Ave
set Ave=CGe
endfunction
function CYe takes nothing returns integer
local integer CGe=I5e
if(CGe!=0)then
set I5e=I7e[CGe]
else
set I6e=I6e+1
set CGe=I6e
endif
if(CGe>8190)then
return 0
endif
set I7e[CGe]=-1
return CGe
endfunction
function Cze takes integer CGe returns nothing
if CGe==null then
return
elseif(I7e[CGe]!=-1)then
return
endif
set I7e[CGe]=I5e
set I5e=CGe
endfunction
function CZe takes nothing returns integer
local integer CGe=IZe
if(CGe!=0)then
set IZe=I0e[CGe]
else
set I_e=I_e+1
set CGe=I_e
endif
if(CGe>8190)then
return 0
endif
set I0e[CGe]=-1
return CGe
endfunction
function C_e takes integer CGe returns nothing
if CGe==null then
return
elseif(I0e[CGe]!=-1)then
return
endif
set I0e[CGe]=IZe
set IZe=CGe
endfunction
function C0e takes nothing returns integer
local integer CGe=Iue
if(CGe!=0)then
set Iue=Iwe[CGe]
else
set IUe=IUe+1
set CGe=IUe
endif
if(CGe>8190)then
return 0
endif
set Iwe[CGe]=-1
return CGe
endfunction
function C1e takes integer CGe returns nothing
if CGe==null then
return
elseif(Iwe[CGe]!=-1)then
return
endif
set Iwe[CGe]=Iue
set Iue=CGe
endfunction
function C2e takes nothing returns integer
local integer CGe=Ipe
if(CGe!=0)then
set Ipe=Iqe[CGe]
else
set IPe=IPe+1
set CGe=IPe
endif
if(CGe>8190)then
return 0
endif
set Iqe[CGe]=-1
return CGe
endfunction
function C3e takes integer CGe returns nothing
if CGe==null then
return
elseif(Iqe[CGe]!=-1)then
return
endif
set Iqe[CGe]=Ipe
set Ipe=CGe
endfunction
function C4e takes nothing returns integer
local integer CGe=Ile
if(CGe!=0)then
set Ile=Ime[CGe]
else
set ILe=ILe+1
set CGe=ILe
endif
if(CGe>8190)then
return 0
endif
set Ime[CGe]=-1
return CGe
endfunction
function C5e takes integer CGe returns nothing
if CGe==null then
return
elseif(Ime[CGe]!=-1)then
return
endif
set Ime[CGe]=Ile
set Ile=CGe
endfunction
function C6e takes nothing returns integer
local integer CGe=IJe
if(CGe!=0)then
set IJe=IKe[CGe]
else
set Ike=Ike+1
set CGe=Ike
endif
if(CGe>8190)then
return 0
endif
set IKe[CGe]=-1
return CGe
endfunction
function C7e takes integer CGe returns nothing
if CGe==null then
return
elseif(IKe[CGe]!=-1)then
return
endif
set IKe[CGe]=IJe
set IJe=CGe
endfunction
function C8e takes nothing returns integer
local integer CGe=IGe
if(CGe!=0)then
set IGe=IHe[CGe]
else
set Ihe=Ihe+1
set CGe=Ihe
endif
if(CGe>8190)then
return 0
endif
set IHe[CGe]=-1
return CGe
endfunction
function C9e takes integer CGe returns nothing
if CGe==null then
return
elseif(IHe[CGe]!=-1)then
return
endif
set IHe[CGe]=IGe
set IGe=CGe
endfunction
function dve takes nothing returns integer
local integer CGe=ICe
if(CGe!=0)then
set ICe=IDe[CGe]
else
set Ide=Ide+1
set CGe=Ide
endif
if(CGe>8190)then
return 0
endif
set IDe[CGe]=-1
return CGe
endfunction
function dee takes integer CGe returns nothing
if CGe==null then
return
elseif(IDe[CGe]!=-1)then
return
endif
set IDe[CGe]=ICe
set ICe=CGe
endfunction
function dxe takes nothing returns integer
local integer CGe=INe
if(CGe!=0)then
set INe=IBe[CGe]
else
set Ibe=Ibe+1
set CGe=Ibe
endif
if(CGe>8190)then
return 0
endif
set IBe[CGe]=-1
return CGe
endfunction
function doe takes integer CGe returns nothing
if CGe==null then
return
elseif(IBe[CGe]!=-1)then
return
endif
set IBe[CGe]=INe
set INe=CGe
endfunction
function dre takes nothing returns integer
local integer CGe=IXe
if(CGe!=0)then
set IXe=IRe[CGe]
else
set IOe=IOe+1
set CGe=IOe
endif
if(CGe>8190)then
return 0
endif
set IRe[CGe]=-1
return CGe
endfunction
function die takes integer CGe returns nothing
if CGe==null then
return
elseif(IRe[CGe]!=-1)then
return
endif
set IRe[CGe]=IXe
set IXe=CGe
endfunction
function dae takes nothing returns integer
local integer CGe=Iie
if(CGe!=0)then
set Iie=Ine[CGe]
else
set Iae=Iae+1
set CGe=Iae
endif
if(CGe>8190)then
return 0
endif
set Ine[CGe]=-1
return CGe
endfunction
function dne takes integer CGe returns nothing
if CGe==null then
return
elseif(Ine[CGe]!=-1)then
return
endif
set Ine[CGe]=Iie
set Iie=CGe
endfunction
function dVe takes nothing returns integer
local integer CGe=R7e
if(CGe!=0)then
set R7e=R9e[CGe]
else
set R8e=R8e+1
set CGe=R8e
endif
if(CGe>8190)then
return 0
endif
set R9e[CGe]=-1
return CGe
endfunction
function dEe takes integer CGe returns nothing
if CGe==null then
return
elseif(R9e[CGe]!=-1)then
return
endif
set R9e[CGe]=R7e
set R7e=CGe
endfunction
function dXe takes nothing returns integer
local integer CGe=R3e
if(CGe!=0)then
set R3e=R5e[CGe]
else
set R4e=R4e+1
set CGe=R4e
endif
if(CGe>8190)then
return 0
endif
set R5e[CGe]=-1
return CGe
endfunction
function dOe takes integer CGe returns nothing
if CGe==null then
return
elseif(R5e[CGe]!=-1)then
return
endif
set R5e[CGe]=R3e
set R3e=CGe
endfunction
function dRe takes nothing returns integer
local integer CGe=RZe
if(CGe!=0)then
set RZe=R0e[CGe]
else
set R_e=R_e+1
set CGe=R_e
endif
if(CGe>8190)then
return 0
endif
set R0e[CGe]=-1
return CGe
endfunction
function dIe takes integer CGe returns nothing
if CGe==null then
return
elseif(R0e[CGe]!=-1)then
return
endif
set R0e[CGe]=RZe
set RZe=CGe
endfunction
function dAe takes nothing returns integer
local integer CGe=RWe
if(CGe!=0)then
set RWe=RYe[CGe]
else
set Rye=Rye+1
set CGe=Rye
endif
if(CGe>8190)then
return 0
endif
set RYe[CGe]=-1
return CGe
endfunction
function dNe takes integer CGe returns nothing
if CGe==null then
return
elseif(RYe[CGe]!=-1)then
return
endif
set RYe[CGe]=RWe
set RWe=CGe
endfunction
function dbe takes nothing returns integer
local integer CGe=RSe
if(CGe!=0)then
set RSe=RTe[CGe]
else
set Rte=Rte+1
set CGe=Rte
endif
if(CGe>8190)then
return 0
endif
set RTe[CGe]=-1
return CGe
endfunction
function dBe takes integer CGe returns nothing
if CGe==null then
return
elseif(RTe[CGe]!=-1)then
return
endif
set RTe[CGe]=RSe
set RSe=CGe
endfunction
function dce takes nothing returns integer
local integer CGe=RPe
if(CGe!=0)then
set RPe=RQe[CGe]
else
set Rqe=Rqe+1
set CGe=Rqe
endif
if(CGe>8190)then
return 0
endif
set RQe[CGe]=-1
return CGe
endfunction
function dCe takes integer CGe returns nothing
if CGe==null then
return
elseif(RQe[CGe]!=-1)then
return
endif
set RQe[CGe]=RPe
set RPe=CGe
endfunction
function dde takes nothing returns integer
local integer CGe=RLe
if(CGe!=0)then
set RLe=RMe[CGe]
else
set Rme=Rme+1
set CGe=Rme
endif
if(CGe>8190)then
return 0
endif
set RMe[CGe]=-1
return CGe
endfunction
function dDe takes integer CGe returns nothing
if CGe==null then
return
elseif(RMe[CGe]!=-1)then
return
endif
set RMe[CGe]=RLe
set RLe=CGe
endfunction
function dfe takes nothing returns integer
local integer CGe=RHe
if(CGe!=0)then
set RHe=RJe[CGe]
else
set Rje=Rje+1
set CGe=Rje
endif
if(CGe>8190)then
return 0
endif
set RJe[CGe]=-1
return CGe
endfunction
function dFe takes integer CGe returns nothing
if CGe==null then
return
elseif(RJe[CGe]!=-1)then
return
endif
set RJe[CGe]=RHe
set RHe=CGe
endfunction
function dge takes nothing returns integer
local integer CGe=RFe
if(CGe!=0)then
set RFe=RGe[CGe]
else
set Rge=Rge+1
set CGe=Rge
endif
if(CGe>8190)then
return 0
endif
set RGe[CGe]=-1
return CGe
endfunction
function dGe takes integer CGe returns nothing
if CGe==null then
return
elseif(RGe[CGe]!=-1)then
return
endif
set RGe[CGe]=RFe
set RFe=CGe
endfunction
function dhe takes nothing returns integer
local integer CGe=RBe
if(CGe!=0)then
set RBe=RCe[CGe]
else
set Rce=Rce+1
set CGe=Rce
endif
if(CGe>8190)then
return 0
endif
set RCe[CGe]=-1
return CGe
endfunction
function dHe takes integer CGe returns nothing
if CGe==null then
return
elseif(RCe[CGe]!=-1)then
return
endif
set RCe[CGe]=RBe
set RBe=CGe
endfunction
function dje takes nothing returns integer
local integer CGe=RIe
if(CGe!=0)then
set RIe=RNe[CGe]
else
set RAe=RAe+1
set CGe=RAe
endif
if(CGe>8190)then
return 0
endif
set RNe[CGe]=-1
return CGe
endfunction
function dJe takes integer CGe returns nothing
if CGe==null then
return
elseif(RNe[CGe]!=-1)then
return
endif
set RNe[CGe]=RIe
set RIe=CGe
endfunction
function dke takes nothing returns integer
local integer CGe=Rne
if(CGe!=0)then
set Rne=REe[CGe]
else
set RVe=RVe+1
set CGe=RVe
endif
if(CGe>8190)then
return 0
endif
set REe[CGe]=-1
return CGe
endfunction
function dKe takes integer CGe returns nothing
if CGe==null then
return
elseif(REe[CGe]!=-1)then
return
endif
set REe[CGe]=Rne
set Rne=CGe
endfunction
function dle takes nothing returns integer
local integer CGe=Ree
if(CGe!=0)then
set Ree=Roe[CGe]
else
set Rxe=Rxe+1
set CGe=Rxe
endif
if(CGe>8190)then
return 0
endif
set Roe[CGe]=-1
return CGe
endfunction
function dLe takes integer CGe returns nothing
if CGe==null then
return
elseif(Roe[CGe]!=-1)then
return
endif
set Roe[CGe]=Ree
set Ree=CGe
endfunction
function dme takes nothing returns integer
local integer CGe=O4e
if(CGe!=0)then
set O4e=O6e[CGe]
else
set O5e=O5e+1
set CGe=O5e
endif
if(CGe>8190)then
return 0
endif
set O6e[CGe]=-1
return CGe
endfunction
function dMe takes integer CGe returns nothing
if CGe==null then
return
elseif(O6e[CGe]!=-1)then
return
endif
set O6e[CGe]=O4e
set O4e=CGe
endfunction
function dpe takes nothing returns integer
local integer CGe=O0e
if(CGe!=0)then
set O0e=O2e[CGe]
else
set O1e=O1e+1
set CGe=O1e
endif
if(CGe>8190)then
return 0
endif
set O2e[CGe]=-1
return CGe
endfunction
function dPe takes integer CGe returns nothing
if CGe==null then
return
elseif(O2e[CGe]!=-1)then
return
endif
set O2e[CGe]=O0e
set O0e=CGe
endfunction
function dqe takes nothing returns integer
local integer CGe=OWe
if(CGe!=0)then
set OWe=OYe[CGe]
else
set Oye=Oye+1
set CGe=Oye
endif
if(CGe>8190)then
return 0
endif
set OYe[CGe]=-1
return CGe
endfunction
function dQe takes integer CGe returns nothing
if CGe==null then
return
elseif(OYe[CGe]!=-1)then
return
endif
set OYe[CGe]=OWe
set OWe=CGe
endfunction
function dse takes nothing returns integer
local integer CGe=OTe
if(CGe!=0)then
set OTe=OUe[CGe]
else
set Oue=Oue+1
set CGe=Oue
endif
if(CGe>8190)then
return 0
endif
set OUe[CGe]=-1
return CGe
endfunction
function dSe takes integer CGe returns nothing
if CGe==null then
return
elseif(OUe[CGe]!=-1)then
return
endif
set OUe[CGe]=OTe
set OTe=CGe
endfunction
function dte takes nothing returns integer
local integer CGe=OPe
if(CGe!=0)then
set OPe=OQe[CGe]
else
set Oqe=Oqe+1
set CGe=Oqe
endif
if(CGe>8190)then
return 0
endif
set OQe[CGe]=-1
return CGe
endfunction
function dTe takes integer CGe returns nothing
if CGe==null then
return
elseif(OQe[CGe]!=-1)then
return
endif
set OQe[CGe]=OPe
set OPe=CGe
endfunction
function due takes nothing returns integer
local integer CGe=OKe
if(CGe!=0)then
set OKe=OLe[CGe]
else
set Ole=Ole+1
set CGe=Ole
endif
if(CGe>8190)then
return 0
endif
set OLe[CGe]=-1
return CGe
endfunction
function dUe takes integer CGe returns nothing
if CGe==null then
return
elseif(OLe[CGe]!=-1)then
return
endif
set OLe[CGe]=OKe
set OKe=CGe
endfunction
function dwe takes nothing returns integer
local integer CGe=OHe
if(CGe!=0)then
set OHe=OJe[CGe]
else
set Oje=Oje+1
set CGe=Oje
endif
if(CGe>8190)then
return 0
endif
set OJe[CGe]=-1
return CGe
endfunction
function dWe takes integer CGe returns nothing
if CGe==null then
return
elseif(OJe[CGe]!=-1)then
return
endif
set OJe[CGe]=OHe
set OHe=CGe
endfunction
function dye takes nothing returns integer
local integer CGe=OCe
if(CGe!=0)then
set OCe=ODe[CGe]
else
set Ode=Ode+1
set CGe=Ode
endif
if(CGe>8190)then
return 0
endif
set ODe[CGe]=-1
return CGe
endfunction
function dYe takes integer CGe returns nothing
if CGe==null then
return
elseif(ODe[CGe]!=-1)then
return
endif
set ODe[CGe]=OCe
set OCe=CGe
endfunction
function dze takes nothing returns integer
local integer CGe=OIe
if(CGe!=0)then
set OIe=ONe[CGe]
else
set OAe=OAe+1
set CGe=OAe
endif
if(CGe>8190)then
return 0
endif
set ONe[CGe]=-1
return CGe
endfunction
function dZe takes integer CGe returns nothing
if CGe==null then
return
elseif(ONe[CGe]!=-1)then
return
endif
set ONe[CGe]=OIe
set OIe=CGe
endfunction
function d_e takes nothing returns integer
local integer CGe=OEe
if(CGe!=0)then
set OEe=OOe[CGe]
else
set OXe=OXe+1
set CGe=OXe
endif
if(CGe>8190)then
return 0
endif
set OOe[CGe]=-1
return CGe
endfunction
function d0e takes integer CGe returns nothing
if CGe==null then
return
elseif(OOe[CGe]!=-1)then
return
endif
set OOe[CGe]=OEe
set OEe=CGe
endfunction
function d1e takes nothing returns integer
local integer CGe=Ooe
if(CGe!=0)then
set Ooe=Oie[CGe]
else
set Ore=Ore+1
set CGe=Ore
endif
if(CGe>8190)then
return 0
endif
set Oie[CGe]=-1
return CGe
endfunction
function d2e takes integer CGe returns nothing
if CGe==null then
return
elseif(Oie[CGe]!=-1)then
return
endif
set Oie[CGe]=Ooe
set Ooe=CGe
endfunction
function d3e takes nothing returns integer
local integer CGe=X9e
if(CGe!=0)then
set X9e=Oee[CGe]
else
set Ove=Ove+1
set CGe=Ove
endif
if(CGe>8190)then
return 0
endif
set Oee[CGe]=-1
return CGe
endfunction
function d4e takes integer CGe returns nothing
if CGe==null then
return
elseif(Oee[CGe]!=-1)then
return
endif
set Oee[CGe]=X9e
set X9e=CGe
endfunction
function d5e takes nothing returns integer
local integer CGe=X5e
if(CGe!=0)then
set X5e=X7e[CGe]
else
set X6e=X6e+1
set CGe=X6e
endif
if(CGe>8190)then
return 0
endif
set X7e[CGe]=-1
return CGe
endfunction
function d6e takes integer CGe returns nothing
if CGe==null then
return
elseif(X7e[CGe]!=-1)then
return
endif
set X7e[CGe]=X5e
set X5e=CGe
endfunction
function d7e takes nothing returns integer
local integer CGe=X_e
if(CGe!=0)then
set X_e=X1e[CGe]
else
set X0e=X0e+1
set CGe=X0e
endif
if(CGe>8190)then
return 0
endif
set X1e[CGe]=-1
return CGe
endfunction
function d8e takes integer CGe returns nothing
if CGe==null then
return
elseif(X1e[CGe]!=-1)then
return
endif
set X1e[CGe]=X_e
set X_e=CGe
endfunction
function d9e takes nothing returns integer
local integer CGe=Xye
if(CGe!=0)then
set Xye=Xze[CGe]
else
set XYe=XYe+1
set CGe=XYe
endif
if(CGe>8190)then
return 0
endif
set Xze[CGe]=-1
return CGe
endfunction
function Dve takes integer CGe returns nothing
if CGe==null then
return
elseif(Xze[CGe]!=-1)then
return
endif
set Xze[CGe]=Xye
set Xye=CGe
endfunction
function Dee takes nothing returns integer
local integer CGe=Xte
if(CGe!=0)then
set Xte=Xue[CGe]
else
set XTe=XTe+1
set CGe=XTe
endif
if(CGe>8190)then
return 0
endif
set Xue[CGe]=-1
return CGe
endfunction
function Dxe takes integer CGe returns nothing
if CGe==null then
return
elseif(Xue[CGe]!=-1)then
return
endif
set Xue[CGe]=Xte
set Xte=CGe
endfunction
function Doe takes nothing returns integer
local integer CGe=Xpe
if(CGe!=0)then
set Xpe=Xqe[CGe]
else
set XPe=XPe+1
set CGe=XPe
endif
if(CGe>8190)then
return 0
endif
set Xqe[CGe]=-1
return CGe
endfunction
function Dre takes integer CGe returns nothing
if CGe==null then
return
elseif(Xqe[CGe]!=-1)then
return
endif
set Xqe[CGe]=Xpe
set Xpe=CGe
endfunction
function Die takes nothing returns integer
local integer CGe=Xle
if(CGe!=0)then
set Xle=Xme[CGe]
else
set XLe=XLe+1
set CGe=XLe
endif
if(CGe>8190)then
return 0
endif
set Xme[CGe]=-1
return CGe
endfunction
function Dae takes integer CGe returns nothing
if CGe==null then
return
elseif(Xme[CGe]!=-1)then
return
endif
set Xme[CGe]=Xle
set Xle=CGe
endfunction
function Dne takes nothing returns integer
local integer CGe=Xje
if(CGe!=0)then
set Xje=Xke[CGe]
else
set XJe=XJe+1
set CGe=XJe
endif
if(CGe>8190)then
return 0
endif
set Xke[CGe]=-1
return CGe
endfunction
function DVe takes integer CGe returns nothing
if CGe==null then
return
elseif(Xke[CGe]!=-1)then
return
endif
set Xke[CGe]=Xje
set Xje=CGe
endfunction
function DEe takes nothing returns integer
local integer CGe=Xfe
if(CGe!=0)then
set Xfe=Xge[CGe]
else
set XFe=XFe+1
set CGe=XFe
endif
if(CGe>8190)then
return 0
endif
set Xge[CGe]=-1
return CGe
endfunction
function DXe takes integer CGe returns nothing
if CGe==null then
return
elseif(Xge[CGe]!=-1)then
return
endif
set Xge[CGe]=Xfe
set Xfe=CGe
endfunction
function DOe takes nothing returns integer
local integer CGe=Xbe
if(CGe!=0)then
set Xbe=Xce[CGe]
else
set XBe=XBe+1
set CGe=XBe
endif
if(CGe>8190)then
return 0
endif
set Xce[CGe]=-1
return CGe
endfunction
function DRe takes integer CGe returns nothing
if CGe==null then
return
elseif(Xce[CGe]!=-1)then
return
endif
set Xce[CGe]=Xbe
set Xbe=CGe
endfunction
function DIe takes nothing returns integer
local integer CGe=XRe
if(CGe!=0)then
set XRe=XAe[CGe]
else
set XIe=XIe+1
set CGe=XIe
endif
if(CGe>8190)then
return 0
endif
set XAe[CGe]=-1
return CGe
endfunction
function DAe takes integer CGe returns nothing
if CGe==null then
return
elseif(XAe[CGe]!=-1)then
return
endif
set XAe[CGe]=XRe
set XRe=CGe
endfunction
function DNe takes nothing returns integer
local integer CGe=Xae
if(CGe!=0)then
set Xae=XVe[CGe]
else
set Xne=Xne+1
set CGe=Xne
endif
if(CGe>8190)then
return 0
endif
set XVe[CGe]=-1
return CGe
endfunction
function Dbe takes integer CGe returns nothing
if CGe==null then
return
elseif(XVe[CGe]!=-1)then
return
endif
set XVe[CGe]=Xae
set Xae=CGe
endfunction
function DBe takes nothing returns integer
local integer CGe=Xxe
if(CGe!=0)then
set Xxe=Xre[CGe]
else
set Xoe=Xoe+1
set CGe=Xoe
endif
if(CGe>8190)then
return 0
endif
set Xre[CGe]=-1
return CGe
endfunction
function Dce takes integer CGe returns nothing
if CGe==null then
return
elseif(Xre[CGe]!=-1)then
return
endif
set Xre[CGe]=Xxe
set Xxe=CGe
endfunction
function DCe takes nothing returns integer
local integer CGe=E6e
if(CGe!=0)then
set E6e=E8e[CGe]
else
set E7e=E7e+1
set CGe=E7e
endif
if(CGe>8190)then
return 0
endif
set E8e[CGe]=-1
return CGe
endfunction
function Dde takes integer CGe returns nothing
if CGe==null then
return
elseif(E8e[CGe]!=-1)then
return
endif
set E8e[CGe]=E6e
set E6e=CGe
endfunction
function DDe takes nothing returns integer
local integer CGe=E0e
if(CGe!=0)then
set E0e=E2e[CGe]
else
set E1e=E1e+1
set CGe=E1e
endif
if(CGe>8190)then
return 0
endif
set E2e[CGe]=-1
return CGe
endfunction
function Dfe takes integer CGe returns nothing
if CGe==null then
return
elseif(E2e[CGe]!=-1)then
return
endif
set E2e[CGe]=E0e
set E0e=CGe
endfunction
function DFe takes nothing returns integer
local integer CGe=Eue
if(CGe!=0)then
set Eue=Ewe[CGe]
else
set EUe=EUe+1
set CGe=EUe
endif
if(CGe>8190)then
return 0
endif
set Ewe[CGe]=-1
return CGe
endfunction
function Dge takes integer CGe returns nothing
if CGe==null then
return
elseif(Ewe[CGe]!=-1)then
return
endif
set Ewe[CGe]=Eue
set Eue=CGe
endfunction
function DGe takes nothing returns integer
local integer CGe=Ese
if(CGe!=0)then
set Ese=Ete[CGe]
else
set ESe=ESe+1
set CGe=ESe
endif
if(CGe>8190)then
return 0
endif
set Ete[CGe]=-1
return CGe
endfunction
function Dhe takes integer CGe returns nothing
if CGe==null then
return
elseif(Ete[CGe]!=-1)then
return
endif
set Ete[CGe]=Ese
set Ese=CGe
endfunction
function DHe takes nothing returns integer
local integer CGe=Eme
if(CGe!=0)then
set Eme=Epe[CGe]
else
set EMe=EMe+1
set CGe=EMe
endif
if(CGe>8190)then
return 0
endif
set Epe[CGe]=-1
return CGe
endfunction
function Dje takes integer CGe returns nothing
if CGe==null then
return
elseif(Epe[CGe]!=-1)then
return
endif
set Epe[CGe]=Eme
set Eme=CGe
endfunction
function DJe takes nothing returns integer
local integer CGe=Eke
if(CGe!=0)then
set Eke=Ele[CGe]
else
set EKe=EKe+1
set CGe=EKe
endif
if(CGe>8190)then
return 0
endif
set Ele[CGe]=-1
return CGe
endfunction
function Dke takes integer CGe returns nothing
if CGe==null then
return
elseif(Ele[CGe]!=-1)then
return
endif
set Ele[CGe]=Eke
set Eke=CGe
endfunction
function DKe takes nothing returns integer
local integer CGe=EDe
if(CGe!=0)then
set EDe=EFe[CGe]
else
set Efe=Efe+1
set CGe=Efe
endif
if(CGe>8190)then
return 0
endif
set EFe[CGe]=-1
return CGe
endfunction
function Dle takes integer CGe returns nothing
if CGe==null then
return
elseif(EFe[CGe]!=-1)then
return
endif
set EFe[CGe]=EDe
set EDe=CGe
endfunction
function DLe takes nothing returns integer
local integer CGe=EBe
if(CGe!=0)then
set EBe=ECe[CGe]
else
set Ece=Ece+1
set CGe=Ece
endif
if(CGe>8190)then
return 0
endif
set ECe[CGe]=-1
return CGe
endfunction
function Dme takes integer CGe returns nothing
if CGe==null then
return
elseif(ECe[CGe]!=-1)then
return
endif
set ECe[CGe]=EBe
set EBe=CGe
endfunction
function DMe takes nothing returns integer
local integer CGe=EOe
if(CGe!=0)then
set EOe=EIe[CGe]
else
set ERe=ERe+1
set CGe=ERe
endif
if(CGe>8190)then
return 0
endif
set EIe[CGe]=-1
return CGe
endfunction
function Dpe takes integer CGe returns nothing
if CGe==null then
return
elseif(EIe[CGe]!=-1)then
return
endif
set EIe[CGe]=EOe
set EOe=CGe
endfunction
function DPe takes nothing returns integer
local integer CGe=Ene
if(CGe!=0)then
set Ene=EEe[CGe]
else
set EVe=EVe+1
set CGe=EVe
endif
if(CGe>8190)then
return 0
endif
set EEe[CGe]=-1
return CGe
endfunction
function Dqe takes integer CGe returns nothing
if CGe==null then
return
elseif(EEe[CGe]!=-1)then
return
endif
set EEe[CGe]=Ene
set Ene=CGe
endfunction
function DQe takes nothing returns integer
local integer CGe=Eee
if(CGe!=0)then
set Eee=Eoe[CGe]
else
set Exe=Exe+1
set CGe=Exe
endif
if(CGe>8190)then
return 0
endif
set Eoe[CGe]=-1
return CGe
endfunction
function Dse takes integer CGe returns nothing
if CGe==null then
return
elseif(Eoe[CGe]!=-1)then
return
endif
set Eoe[CGe]=Eee
set Eee=CGe
endfunction
function DSe takes nothing returns integer
local integer CGe=V7e
if(CGe!=0)then
set V7e=V9e[CGe]
else
set V8e=V8e+1
set CGe=V8e
endif
if(CGe>8190)then
return 0
endif
set V9e[CGe]=-1
return CGe
endfunction
function Dte takes integer CGe returns nothing
if CGe==null then
return
elseif(V9e[CGe]!=-1)then
return
endif
set V9e[CGe]=V7e
set V7e=CGe
endfunction
function DTe takes nothing returns integer
local integer CGe=V_e
if(CGe!=0)then
set V_e=V1e[CGe]
else
set V0e=V0e+1
set CGe=V0e
endif
if(CGe>8190)then
return 0
endif
set V1e[CGe]=-1
return CGe
endfunction
function Due takes integer CGe returns nothing
if CGe==null then
return
elseif(V1e[CGe]!=-1)then
return
endif
set V1e[CGe]=V_e
set V_e=CGe
endfunction
function DUe takes nothing returns integer
local integer CGe=Vwe
if(CGe!=0)then
set Vwe=Vye[CGe]
else
set VWe=VWe+1
set CGe=VWe
endif
if(CGe>8190)then
return 0
endif
set Vye[CGe]=-1
return CGe
endfunction
function Dwe takes integer CGe returns nothing
if CGe==null then
return
elseif(Vye[CGe]!=-1)then
return
endif
set Vye[CGe]=Vwe
set Vwe=CGe
endfunction
function DWe takes nothing returns integer
local integer CGe=Vte
if(CGe!=0)then
set Vte=Vue[CGe]
else
set VTe=VTe+1
set CGe=VTe
endif
if(CGe>8190)then
return 0
endif
set Vue[CGe]=-1
return CGe
endfunction
function Dye takes integer CGe returns nothing
if CGe==null then
return
elseif(Vue[CGe]!=-1)then
return
endif
set Vue[CGe]=Vte
set Vte=CGe
endfunction
function DYe takes nothing returns integer
local integer CGe=Vpe
if(CGe!=0)then
set Vpe=Vqe[CGe]
else
set VPe=VPe+1
set CGe=VPe
endif
if(CGe>8190)then
return 0
endif
set Vqe[CGe]=-1
return CGe
endfunction
function Dze takes integer CGe returns nothing
if CGe==null then
return
elseif(Vqe[CGe]!=-1)then
return
endif
set Vqe[CGe]=Vpe
set Vpe=CGe
endfunction
function DZe takes nothing returns integer
local integer CGe=Vke
if(CGe!=0)then
set Vke=Vle[CGe]
else
set VKe=VKe+1
set CGe=VKe
endif
if(CGe>8190)then
return 0
endif
set Vle[CGe]=-1
return CGe
endfunction
function D_e takes integer CGe returns nothing
if CGe==null then
return
elseif(Vle[CGe]!=-1)then
return
endif
set Vle[CGe]=Vke
set Vke=CGe
endfunction
function D0e takes nothing returns integer
local integer CGe=VDe
if(CGe!=0)then
set VDe=VFe[CGe]
else
set Vfe=Vfe+1
set CGe=Vfe
endif
if(CGe>8190)then
return 0
endif
set VFe[CGe]=-1
return CGe
endfunction
function D1e takes integer CGe returns nothing
if CGe==null then
return
elseif(VFe[CGe]!=-1)then
return
endif
set VFe[CGe]=VDe
set VDe=CGe
endfunction
function D2e takes nothing returns integer
local integer CGe=VIe
if(CGe!=0)then
set VIe=VNe[CGe]
else
set VAe=VAe+1
set CGe=VAe
endif
if(CGe>8190)then
return 0
endif
set VNe[CGe]=-1
return CGe
endfunction
function D3e takes integer CGe returns nothing
if CGe==null then
return
elseif(VNe[CGe]!=-1)then
return
endif
set VNe[CGe]=VIe
set VIe=CGe
endfunction
function D4e takes nothing returns integer
local integer CGe=Vne
if(CGe!=0)then
set Vne=VEe[CGe]
else
set VVe=VVe+1
set CGe=VVe
endif
if(CGe>8190)then
return 0
endif
set VEe[CGe]=-1
return CGe
endfunction
function D5e takes integer CGe returns nothing
if CGe==null then
return
elseif(VEe[CGe]!=-1)then
return
endif
set VEe[CGe]=Vne
set Vne=CGe
endfunction
function D6e takes nothing returns integer
local integer CGe=Vxe
if(CGe!=0)then
set Vxe=Vre[CGe]
else
set Voe=Voe+1
set CGe=Voe
endif
if(CGe>8190)then
return 0
endif
set Vre[CGe]=-1
return CGe
endfunction
function D7e takes integer CGe returns nothing
if CGe==null then
return
elseif(Vre[CGe]!=-1)then
return
endif
set Vre[CGe]=Vxe
set Vxe=CGe
endfunction
function D8e takes nothing returns integer
local integer CGe=n1e
if(CGe!=0)then
set n1e=n3e[CGe]
else
set n2e=n2e+1
set CGe=n2e
endif
if(CGe>8190)then
return 0
endif
set n3e[CGe]=-1
return CGe
endfunction
function D9e takes integer CGe returns nothing
if CGe==null then
return
elseif(n3e[CGe]!=-1)then
return
endif
set n3e[CGe]=n1e
set n1e=CGe
endfunction
function fve takes nothing returns integer
local integer CGe=nqe
if(CGe!=0)then
set nqe=nse[CGe]
else
set nQe=nQe+1
set CGe=nQe
endif
if(CGe>8190)then
return 0
endif
set nse[CGe]=-1
return CGe
endfunction
function fee takes integer CGe returns nothing
if CGe==null then
return
elseif(nse[CGe]!=-1)then
return
endif
set nse[CGe]=nqe
set nqe=CGe
endfunction
function fxe takes nothing returns integer
local integer CGe=nJe
if(CGe!=0)then
set nJe=nKe[CGe]
else
set nke=nke+1
set CGe=nke
endif
if(CGe>8190)then
return 0
endif
set nKe[CGe]=-1
return CGe
endfunction
function foe takes integer CGe returns nothing
if CGe==null then
return
elseif(nKe[CGe]!=-1)then
return
endif
set nKe[CGe]=nJe
set nJe=CGe
endfunction
function fre takes nothing returns integer
local integer CGe=nce
if(CGe!=0)then
set nce=nde[CGe]
else
set nCe=nCe+1
set CGe=nCe
endif
if(CGe>8190)then
return 0
endif
set nde[CGe]=-1
return CGe
endfunction
function fie takes integer CGe returns nothing
if CGe==null then
return
elseif(nde[CGe]!=-1)then
return
endif
set nde[CGe]=nce
set nce=CGe
endfunction
function fae takes nothing returns integer
local integer CGe=nae
if(CGe!=0)then
set nae=nVe[CGe]
else
set nne=nne+1
set CGe=nne
endif
if(CGe>8190)then
return 0
endif
set nVe[CGe]=-1
return CGe
endfunction
function fne takes integer CGe returns nothing
if CGe==null then
return
elseif(nVe[CGe]!=-1)then
return
endif
set nVe[CGe]=nae
set nae=CGe
endfunction
function fVe takes nothing returns integer
local integer CGe=a_e
if(CGe!=0)then
set a_e=a1e[CGe]
else
set a0e=a0e+1
set CGe=a0e
endif
if(CGe>8190)then
return 0
endif
set a1e[CGe]=-1
return CGe
endfunction
function fEe takes integer CGe returns nothing
if CGe==null then
return
elseif(a1e[CGe]!=-1)then
return
endif
set a1e[CGe]=a_e
set a_e=CGe
endfunction
function fXe takes nothing returns integer
local integer CGe=aue
if(CGe!=0)then
set aue=awe[CGe]
else
set aUe=aUe+1
set CGe=aUe
endif
if(CGe>8190)then
return 0
endif
set awe[CGe]=-1
return CGe
endfunction
function fOe takes integer CGe returns nothing
if CGe==null then
return
elseif(awe[CGe]!=-1)then
return
endif
set awe[CGe]=aue
set aue=CGe
endfunction
function fRe takes nothing returns integer
local integer CGe=aHe
if(CGe!=0)then
set aHe=aJe[CGe]
else
set aje=aje+1
set CGe=aje
endif
if(CGe>8190)then
return 0
endif
set aJe[CGe]=-1
return CGe
endfunction
function fIe takes integer CGe returns nothing
if CGe==null then
return
elseif(aJe[CGe]!=-1)then
return
endif
set aJe[CGe]=aHe
set aHe=CGe
endfunction
function fAe takes nothing returns integer
local integer CGe=aNe
if(CGe!=0)then
set aNe=aBe[CGe]
else
set abe=abe+1
set CGe=abe
endif
if(CGe>8190)then
return 0
endif
set aBe[CGe]=-1
return CGe
endfunction
function fNe takes integer CGe returns nothing
if CGe==null then
return
elseif(aBe[CGe]!=-1)then
return
endif
set aBe[CGe]=aNe
set aNe=CGe
endfunction
function fbe takes nothing returns integer
local integer CGe=aVe
if(CGe!=0)then
set aVe=aXe[CGe]
else
set aEe=aEe+1
set CGe=aEe
endif
if(CGe>8190)then
return 0
endif
set aXe[CGe]=-1
return CGe
endfunction
function fBe takes integer CGe returns nothing
if CGe==null then
return
elseif(aXe[CGe]!=-1)then
return
endif
set aXe[CGe]=aVe
set aVe=CGe
endfunction
function fce takes nothing returns integer
local integer CGe=i4e
if(CGe!=0)then
set i4e=i6e[CGe]
else
set i5e=i5e+1
set CGe=i5e
endif
if(CGe>8190)then
return 0
endif
set i6e[CGe]=-1
return CGe
endfunction
function fCe takes integer CGe returns nothing
if CGe==null then
return
elseif(i6e[CGe]!=-1)then
return
endif
set i6e[CGe]=i4e
set i4e=CGe
endfunction
function fde takes nothing returns integer
local integer CGe=ipe
if(CGe!=0)then
set ipe=iqe[CGe]
else
set iPe=iPe+1
set CGe=iPe
endif
if(CGe>8190)then
return 0
endif
set iqe[CGe]=-1
return CGe
endfunction
function fDe takes integer CGe returns nothing
if CGe==null then
return
elseif(iqe[CGe]!=-1)then
return
endif
set iqe[CGe]=ipe
set ipe=CGe
endfunction
function ffe takes nothing returns integer
local integer CGe=ije
if(CGe!=0)then
set ije=ike[CGe]
else
set iJe=iJe+1
set CGe=iJe
endif
if(CGe>8190)then
return 0
endif
set ike[CGe]=-1
return CGe
endfunction
function fFe takes integer CGe returns nothing
if CGe==null then
return
elseif(ike[CGe]!=-1)then
return
endif
set ike[CGe]=ije
set ije=CGe
endfunction
function fge takes nothing returns integer
local integer CGe=iIe
if(CGe!=0)then
set iIe=iNe[CGe]
else
set iAe=iAe+1
set CGe=iAe
endif
if(CGe>8190)then
return 0
endif
set iNe[CGe]=-1
return CGe
endfunction
function fGe takes integer CGe returns nothing
if CGe==null then
return
elseif(iNe[CGe]!=-1)then
return
endif
set iNe[CGe]=iIe
set iIe=CGe
endfunction
function fhe takes nothing returns integer
local integer CGe=ire
if(CGe!=0)then
set ire=iae[CGe]
else
set iie=iie+1
set CGe=iie
endif
if(CGe>8190)then
return 0
endif
set iae[CGe]=-1
return CGe
endfunction
function fHe takes integer CGe returns nothing
if CGe==null then
return
elseif(iae[CGe]!=-1)then
return
endif
set iae[CGe]=ire
set ire=CGe
endfunction
function fje takes nothing returns integer
local integer CGe=r8e
if(CGe!=0)then
set r8e=ive[CGe]
else
set r9e=r9e+1
set CGe=r9e
endif
if(CGe>8190)then
return 0
endif
set ive[CGe]=-1
return CGe
endfunction
function fJe takes integer CGe returns nothing
if CGe==null then
return
elseif(ive[CGe]!=-1)then
return
endif
set ive[CGe]=r8e
set r8e=CGe
endfunction
function fke takes nothing returns integer
local integer CGe=r2e
if(CGe!=0)then
set r2e=r4e[CGe]
else
set r3e=r3e+1
set CGe=r3e
endif
if(CGe>8190)then
return 0
endif
set r4e[CGe]=-1
return CGe
endfunction
function fKe takes integer CGe returns nothing
if CGe==null then
return
elseif(r4e[CGe]!=-1)then
return
endif
set r4e[CGe]=r2e
set r2e=CGe
endfunction
function fle takes nothing returns integer
local integer CGe=rte
if(CGe!=0)then
set rte=rue[CGe]
else
set rTe=rTe+1
set CGe=rTe
endif
if(CGe>8190)then
return 0
endif
set rue[CGe]=-1
return CGe
endfunction
function fLe takes integer CGe returns nothing
if CGe==null then
return
elseif(rue[CGe]!=-1)then
return
endif
set rue[CGe]=rte
set rte=CGe
endfunction
function fme takes nothing returns integer
local integer CGe=rHe
if(CGe!=0)then
set rHe=rJe[CGe]
else
set rje=rje+1
set CGe=rje
endif
if(CGe>8190)then
return 0
endif
set rJe[CGe]=-1
return CGe
endfunction
function fMe takes integer CGe returns nothing
if CGe==null then
return
elseif(rJe[CGe]!=-1)then
return
endif
set rJe[CGe]=rHe
set rHe=CGe
endfunction
function fpe takes nothing returns integer
local integer CGe=rOe
if(CGe!=0)then
set rOe=rIe[CGe]
else
set rRe=rRe+1
set CGe=rRe
endif
if(CGe>8190)then
return 0
endif
set rIe[CGe]=-1
return CGe
endfunction
function fPe takes integer CGe returns nothing
if CGe==null then
return
elseif(rIe[CGe]!=-1)then
return
endif
set rIe[CGe]=rOe
set rOe=CGe
endfunction
function fqe takes nothing returns integer
local integer CGe=o8e
if(CGe!=0)then
set o8e=rve[CGe]
else
set o9e=o9e+1
set CGe=o9e
endif
if(CGe>8190)then
return 0
endif
set rve[CGe]=-1
return CGe
endfunction
function fQe takes integer CGe returns nothing
if CGe==null then
return
elseif(rve[CGe]!=-1)then
return
endif
set rve[CGe]=o8e
set o8e=CGe
endfunction
function fse takes nothing returns integer
local integer CGe=oWe
if(CGe!=0)then
set oWe=oYe[CGe]
else
set oye=oye+1
set CGe=oye
endif
if(CGe>8190)then
return 0
endif
set oYe[CGe]=-1
return CGe
endfunction
function fSe takes integer CGe returns nothing
if CGe==null then
return
elseif(oYe[CGe]!=-1)then
return
endif
set oYe[CGe]=oWe
set oWe=CGe
endfunction
function fte takes nothing returns integer
local integer CGe=oMe
if(CGe!=0)then
set oMe=oPe[CGe]
else
set ope=ope+1
set CGe=ope
endif
if(CGe>8190)then
return 0
endif
set oPe[CGe]=-1
return CGe
endfunction
function fTe takes integer CGe returns nothing
if CGe==null then
return
elseif(oPe[CGe]!=-1)then
return
endif
set oPe[CGe]=oMe
set oMe=CGe
endfunction
function fue takes nothing returns integer
local integer CGe=oJe
if(CGe!=0)then
set oJe=oKe[CGe]
else
set oke=oke+1
set CGe=oke
endif
if(CGe>8190)then
return 0
endif
set oKe[CGe]=-1
return CGe
endfunction
function fUe takes integer CGe returns nothing
if CGe==null then
return
elseif(oKe[CGe]!=-1)then
return
endif
set oKe[CGe]=oJe
set oJe=CGe
endfunction
function fwe takes nothing returns integer
local integer CGe=obe
if(CGe!=0)then
set obe=oce[CGe]
else
set oBe=oBe+1
set CGe=oBe
endif
if(CGe>8190)then
return 0
endif
set oce[CGe]=-1
return CGe
endfunction
function fWe takes integer CGe returns nothing
if CGe==null then
return
elseif(oce[CGe]!=-1)then
return
endif
set oce[CGe]=obe
set obe=CGe
endfunction
function fye takes nothing returns integer
local integer CGe=ooe
if(CGe!=0)then
set ooe=oie[CGe]
else
set ore=ore+1
set CGe=ore
endif
if(CGe>8190)then
return 0
endif
set oie[CGe]=-1
return CGe
endfunction
function fYe takes integer CGe returns nothing
if CGe==null then
return
elseif(oie[CGe]!=-1)then
return
endif
set oie[CGe]=ooe
set ooe=CGe
endfunction
function fze takes nothing returns integer
local integer CGe=x5e
if(CGe!=0)then
set x5e=x7e[CGe]
else
set x6e=x6e+1
set CGe=x6e
endif
if(CGe>8190)then
return 0
endif
set x7e[CGe]=-1
return CGe
endfunction
function fZe takes integer CGe returns nothing
if CGe==null then
return
elseif(x7e[CGe]!=-1)then
return
endif
set x7e[CGe]=x5e
set x5e=CGe
endfunction
function f_e takes nothing returns integer
local integer CGe=xze
if(CGe!=0)then
set xze=x_e[CGe]
else
set xZe=xZe+1
set CGe=xZe
endif
if(CGe>8190)then
return 0
endif
set x_e[CGe]=-1
return CGe
endfunction
function f0e takes integer CGe returns nothing
if CGe==null then
return
elseif(x_e[CGe]!=-1)then
return
endif
set x_e[CGe]=xze
set xze=CGe
endfunction
function f1e takes nothing returns integer
local integer CGe=xue
if(CGe!=0)then
set xue=xwe[CGe]
else
set xUe=xUe+1
set CGe=xUe
endif
if(CGe>8190)then
return 0
endif
set xwe[CGe]=-1
return CGe
endfunction
function f2e takes integer CGe returns nothing
if CGe==null then
return
elseif(xwe[CGe]!=-1)then
return
endif
set xwe[CGe]=xue
set xue=CGe
endfunction
function f3e takes nothing returns integer
local integer CGe=xKe
if(CGe!=0)then
set xKe=xLe[CGe]
else
set xle=xle+1
set CGe=xle
endif
if(CGe>8190)then
return 0
endif
set xLe[CGe]=-1
return CGe
endfunction
function f4e takes integer CGe returns nothing
if CGe==null then
return
elseif(xLe[CGe]!=-1)then
return
endif
set xLe[CGe]=xKe
set xKe=CGe
endfunction
function f5e takes nothing returns integer
local integer CGe=xGe
if(CGe!=0)then
set xGe=xHe[CGe]
else
set xhe=xhe+1
set CGe=xhe
endif
if(CGe>8190)then
return 0
endif
set xHe[CGe]=-1
return CGe
endfunction
function f6e takes integer CGe returns nothing
if CGe==null then
return
elseif(xHe[CGe]!=-1)then
return
endif
set xHe[CGe]=xGe
set xGe=CGe
endfunction
function f7e takes nothing returns integer
local integer CGe=xVe
if(CGe!=0)then
set xVe=xXe[CGe]
else
set xEe=xEe+1
set CGe=xEe
endif
if(CGe>8190)then
return 0
endif
set xXe[CGe]=-1
return CGe
endfunction
function f8e takes integer CGe returns nothing
if CGe==null then
return
elseif(xXe[CGe]!=-1)then
return
endif
set xXe[CGe]=xVe
set xVe=CGe
endfunction
function f9e takes nothing returns integer
local integer CGe=e9e
if(CGe!=0)then
set e9e=xee[CGe]
else
set xve=xve+1
set CGe=xve
endif
if(CGe>8190)then
return 0
endif
set xee[CGe]=-1
return CGe
endfunction
function Fve takes integer CGe returns nothing
if CGe==null then
return
elseif(xee[CGe]!=-1)then
return
endif
set xee[CGe]=e9e
set e9e=CGe
endfunction
function Fee takes nothing returns integer
local integer CGe=eZe
if(CGe!=0)then
set eZe=e0e[CGe]
else
set e_e=e_e+1
set CGe=e_e
endif
if(CGe>8190)then
return 0
endif
set e0e[CGe]=-1
return CGe
endfunction
function Fxe takes integer CGe returns nothing
if CGe==null then
return
elseif(e0e[CGe]!=-1)then
return
endif
set e0e[CGe]=eZe
set eZe=CGe
endfunction
function Foe takes nothing returns integer
local integer CGe=eme
if(CGe!=0)then
set eme=epe[CGe]
else
set eMe=eMe+1
set CGe=eMe
endif
if(CGe>8190)then
return 0
endif
set epe[CGe]=-1
return CGe
endfunction
function Fre takes integer CGe returns nothing
if CGe==null then
return
elseif(epe[CGe]!=-1)then
return
endif
set epe[CGe]=eme
set eme=CGe
endfunction
function Fie takes nothing returns integer
local integer CGe=eCe
if(CGe!=0)then
set eCe=eDe[CGe]
else
set ede=ede+1
set CGe=ede
endif
if(CGe>8190)then
return 0
endif
set eDe[CGe]=-1
return CGe
endfunction
function Fae takes integer CGe returns nothing
if CGe==null then
return
elseif(eDe[CGe]!=-1)then
return
endif
set eDe[CGe]=eCe
set eCe=CGe
endfunction
function Fne takes nothing returns integer
local integer CGe=eoe
if(CGe!=0)then
set eoe=eie[CGe]
else
set ere=ere+1
set CGe=ere
endif
if(CGe>8190)then
return 0
endif
set eie[CGe]=-1
return CGe
endfunction
function FVe takes integer CGe returns nothing
if CGe==null then
return
elseif(eie[CGe]!=-1)then
return
endif
set eie[CGe]=eoe
set eoe=CGe
endfunction
function FEe takes nothing returns integer
local integer CGe=v0e
if(CGe!=0)then
set v0e=v2e[CGe]
else
set v1e=v1e+1
set CGe=v1e
endif
if(CGe>8190)then
return 0
endif
set v2e[CGe]=-1
return CGe
endfunction
function FXe takes integer CGe returns nothing
if CGe==null then
return
elseif(v2e[CGe]!=-1)then
return
endif
set v2e[CGe]=v0e
set v0e=CGe
endfunction
function FOe takes nothing returns integer
local integer CGe=vle
if(CGe!=0)then
set vle=vme[CGe]
else
set vLe=vLe+1
set CGe=vLe
endif
if(CGe>8190)then
return 0
endif
set vme[CGe]=-1
return CGe
endfunction
function FRe takes integer CGe returns nothing
if CGe==null then
return
elseif(vme[CGe]!=-1)then
return
endif
set vme[CGe]=vle
set vle=CGe
endfunction
function FIe takes nothing returns integer
local integer CGe=vhe
if(CGe!=0)then
set vhe=vje[CGe]
else
set vHe=vHe+1
set CGe=vHe
endif
if(CGe>8190)then
return 0
endif
set vje[CGe]=-1
return CGe
endfunction
function FAe takes integer CGe returns nothing
if CGe==null then
return
elseif(vje[CGe]!=-1)then
return
endif
set vje[CGe]=vhe
set vhe=CGe
endfunction
function FNe takes nothing returns integer
local integer CGe=vce
if(CGe!=0)then
set vce=vde[CGe]
else
set vCe=vCe+1
set CGe=vCe
endif
if(CGe>8190)then
return 0
endif
set vde[CGe]=-1
return CGe
endfunction
function Fbe takes integer CGe returns nothing
if CGe==null then
return
elseif(vde[CGe]!=-1)then
return
endif
set vde[CGe]=vce
set vce=CGe
endfunction
function FBe takes nothing returns integer
local integer CGe=vxe
if(CGe!=0)then
set vxe=vre[CGe]
else
set voe=voe+1
set CGe=voe
endif
if(CGe>8190)then
return 0
endif
set vre[CGe]=-1
return CGe
endfunction
function Fce takes integer CGe returns nothing
if CGe==null then
return
elseif(vre[CGe]!=-1)then
return
endif
set vre[CGe]=vxe
set vxe=CGe
endfunction
function FCe takes nothing returns integer
local integer CGe=Z_v
if(CGe!=0)then
set Z_v=Z1v[CGe]
else
set Z0v=Z0v+1
set CGe=Z0v
endif
if(CGe>8190)then
return 0
endif
set Z1v[CGe]=-1
return CGe
endfunction
function Fde takes integer CGe returns nothing
if CGe==null then
return
elseif(Z1v[CGe]!=-1)then
return
endif
set Z1v[CGe]=Z_v
set Z_v=CGe
endfunction
function FDe takes nothing returns integer
local integer CGe=Zuv
if(CGe!=0)then
set Zuv=Zwv[CGe]
else
set ZUv=ZUv+1
set CGe=ZUv
endif
if(CGe>8190)then
return 0
endif
set Zwv[CGe]=-1
return CGe
endfunction
function Ffe takes integer CGe returns nothing
if CGe==null then
return
elseif(Zwv[CGe]!=-1)then
return
endif
set Zwv[CGe]=Zuv
set Zuv=CGe
endfunction
function FFe takes nothing returns integer
local integer CGe=ZMv
if(CGe!=0)then
set ZMv=ZPv[CGe]
else
set Zpv=Zpv+1
set CGe=Zpv
endif
if(CGe>8190)then
return 0
endif
set ZPv[CGe]=-1
return CGe
endfunction
function Fge takes integer CGe returns nothing
if CGe==null then
return
elseif(ZPv[CGe]!=-1)then
return
endif
set ZPv[CGe]=ZMv
set ZMv=CGe
endfunction
function FGe takes nothing returns integer
local integer CGe=ZDv
if(CGe!=0)then
set ZDv=ZFv[CGe]
else
set Zfv=Zfv+1
set CGe=Zfv
endif
if(CGe>8190)then
return 0
endif
set ZFv[CGe]=-1
return CGe
endfunction
function Fhe takes integer CGe returns nothing
if CGe==null then
return
elseif(ZFv[CGe]!=-1)then
return
endif
set ZFv[CGe]=ZDv
set ZDv=CGe
endfunction
function FHe takes nothing returns integer
local integer CGe=Zrv
if(CGe!=0)then
set Zrv=Zav[CGe]
else
set Ziv=Ziv+1
set CGe=Ziv
endif
if(CGe>8190)then
return 0
endif
set Zav[CGe]=-1
return CGe
endfunction
function Fje takes integer CGe returns nothing
if CGe==null then
return
elseif(Zav[CGe]!=-1)then
return
endif
set Zav[CGe]=Zrv
set Zrv=CGe
endfunction
function FJe takes nothing returns integer
local integer CGe=z6v
if(CGe!=0)then
set z6v=z8v[CGe]
else
set z7v=z7v+1
set CGe=z7v
endif
if(CGe>8190)then
return 0
endif
set z8v[CGe]=-1
return CGe
endfunction
function Fke takes integer CGe returns nothing
if CGe==null then
return
elseif(z8v[CGe]!=-1)then
return
endif
set z8v[CGe]=z6v
set z6v=CGe
endfunction
function FKe takes nothing returns integer
local integer CGe=z0v
if(CGe!=0)then
set z0v=z2v[CGe]
else
set z1v=z1v+1
set CGe=z1v
endif
if(CGe>8190)then
return 0
endif
set z2v[CGe]=-1
return CGe
endfunction
function Fle takes integer CGe returns nothing
if CGe==null then
return
elseif(z2v[CGe]!=-1)then
return
endif
set z2v[CGe]=z0v
set z0v=CGe
endfunction
function FLe takes nothing returns integer
local integer CGe=zsv
if(CGe!=0)then
set zsv=ztv[CGe]
else
set zSv=zSv+1
set CGe=zSv
endif
if(CGe>8190)then
return 0
endif
set ztv[CGe]=-1
return CGe
endfunction
function Fme takes integer CGe returns nothing
if CGe==null then
return
elseif(ztv[CGe]!=-1)then
return
endif
set ztv[CGe]=zsv
set zsv=CGe
endfunction
function FMe takes nothing returns integer
local integer CGe=zFv
if(CGe!=0)then
set zFv=zGv[CGe]
else
set zgv=zgv+1
set CGe=zgv
endif
if(CGe>8190)then
return 0
endif
set zGv[CGe]=-1
return CGe
endfunction
function Fpe takes integer CGe returns nothing
if CGe==null then
return
elseif(zGv[CGe]!=-1)then
return
endif
set zGv[CGe]=zFv
set zFv=CGe
endfunction
function FPe takes nothing returns integer
local integer CGe=zNv
if(CGe!=0)then
set zNv=zBv[CGe]
else
set zbv=zbv+1
set CGe=zbv
endif
if(CGe>8190)then
return 0
endif
set zBv[CGe]=-1
return CGe
endfunction
function Fqe takes integer CGe returns nothing
if CGe==null then
return
elseif(zBv[CGe]!=-1)then
return
endif
set zBv[CGe]=zNv
set zNv=CGe
endfunction
function FQe takes nothing returns integer
local integer CGe=znv
if(CGe!=0)then
set znv=zEv[CGe]
else
set zVv=zVv+1
set CGe=zVv
endif
if(CGe>8190)then
return 0
endif
set zEv[CGe]=-1
return CGe
endfunction
function Fse takes integer CGe returns nothing
if CGe==null then
return
elseif(zEv[CGe]!=-1)then
return
endif
set zEv[CGe]=znv
set znv=CGe
endfunction
function FSe takes nothing returns integer
local integer CGe=Y6v
if(CGe!=0)then
set Y6v=Y8v[CGe]
else
set Y7v=Y7v+1
set CGe=Y7v
endif
if(CGe>8190)then
return 0
endif
set Y8v[CGe]=-1
return CGe
endfunction
function Fte takes integer CGe returns nothing
if CGe==null then
return
elseif(Y8v[CGe]!=-1)then
return
endif
set Y8v[CGe]=Y6v
set Y6v=CGe
endfunction
function FTe takes nothing returns integer
local integer CGe=YSv
if(CGe!=0)then
set YSv=YTv[CGe]
else
set Ytv=Ytv+1
set CGe=Ytv
endif
if(CGe>8190)then
return 0
endif
set YTv[CGe]=-1
return CGe
endfunction
function Fue takes integer CGe returns nothing
if CGe==null then
return
elseif(YTv[CGe]!=-1)then
return
endif
set YTv[CGe]=YSv
set YSv=CGe
endfunction
function FUe takes nothing returns integer
local integer CGe=YGv
if(CGe!=0)then
set YGv=YHv[CGe]
else
set Yhv=Yhv+1
set CGe=Yhv
endif
if(CGe>8190)then
return 0
endif
set YHv[CGe]=-1
return CGe
endfunction
function Fwe takes integer CGe returns nothing
if CGe==null then
return
elseif(YHv[CGe]!=-1)then
return
endif
set YHv[CGe]=YGv
set YGv=CGe
endfunction
function FWe takes nothing returns integer
local integer CGe=YEv
if(CGe!=0)then
set YEv=YOv[CGe]
else
set YXv=YXv+1
set CGe=YXv
endif
if(CGe>8190)then
return 0
endif
set YOv[CGe]=-1
return CGe
endfunction
function Fye takes integer CGe returns nothing
if CGe==null then
return
elseif(YOv[CGe]!=-1)then
return
endif
set YOv[CGe]=YEv
set YEv=CGe
endfunction
function FYe takes nothing returns integer
local integer CGe=y7v
if(CGe!=0)then
set y7v=y9v[CGe]
else
set y8v=y8v+1
set CGe=y8v
endif
if(CGe>8190)then
return 0
endif
set y9v[CGe]=-1
return CGe
endfunction
function Fze takes integer CGe returns nothing
if CGe==null then
return
elseif(y9v[CGe]!=-1)then
return
endif
set y9v[CGe]=y7v
set y7v=CGe
endfunction
function FZe takes nothing returns integer
local integer CGe=yWv
if(CGe!=0)then
set yWv=yYv[CGe]
else
set yyv=yyv+1
set CGe=yyv
endif
if(CGe>8190)then
return 0
endif
set yYv[CGe]=-1
return CGe
endfunction
function F_e takes integer CGe returns nothing
if CGe==null then
return
elseif(yYv[CGe]!=-1)then
return
endif
set yYv[CGe]=yWv
set yWv=CGe
endfunction
function F0e takes nothing returns integer
local integer CGe=yQv
if(CGe!=0)then
set yQv=ySv[CGe]
else
set ysv=ysv+1
set CGe=ysv
endif
if(CGe>8190)then
return 0
endif
set ySv[CGe]=-1
return CGe
endfunction
function F1e takes integer CGe returns nothing
if CGe==null then
return
elseif(ySv[CGe]!=-1)then
return
endif
set ySv[CGe]=yQv
set yQv=CGe
endfunction
function F2e takes nothing returns integer
local integer CGe=yFv
if(CGe!=0)then
set yFv=yGv[CGe]
else
set ygv=ygv+1
set CGe=ygv
endif
if(CGe>8190)then
return 0
endif
set yGv[CGe]=-1
return CGe
endfunction
function F3e takes integer CGe returns nothing
if CGe==null then
return
elseif(yGv[CGe]!=-1)then
return
endif
set yGv[CGe]=yFv
set yFv=CGe
endfunction
function F4e takes nothing returns integer
local integer CGe=ynv
if(CGe!=0)then
set ynv=yEv[CGe]
else
set yVv=yVv+1
set CGe=yVv
endif
if(CGe>8190)then
return 0
endif
set yEv[CGe]=-1
return CGe
endfunction
function F5e takes integer CGe returns nothing
if CGe==null then
return
elseif(yEv[CGe]!=-1)then
return
endif
set yEv[CGe]=ynv
set ynv=CGe
endfunction
function F6e takes nothing returns integer
local integer CGe=W0v
if(CGe!=0)then
set W0v=W2v[CGe]
else
set W1v=W1v+1
set CGe=W1v
endif
if(CGe>8190)then
return 0
endif
set W2v[CGe]=-1
return CGe
endfunction
function F7e takes integer CGe returns nothing
if CGe==null then
return
elseif(W2v[CGe]!=-1)then
return
endif
set W2v[CGe]=W0v
set W0v=CGe
endfunction
function F8e takes nothing returns integer
local integer CGe=WUv
if(CGe!=0)then
set WUv=WWv[CGe]
else
set Wwv=Wwv+1
set CGe=Wwv
endif
if(CGe>8190)then
return 0
endif
set WWv[CGe]=-1
return CGe
endfunction
function F9e takes integer CGe returns nothing
if CGe==null then
return
elseif(WWv[CGe]!=-1)then
return
endif
set WWv[CGe]=WUv
set WUv=CGe
endfunction
function gve takes nothing returns integer
local integer CGe=Wmv
if(CGe!=0)then
set Wmv=Wpv[CGe]
else
set WMv=WMv+1
set CGe=WMv
endif
if(CGe>8190)then
return 0
endif
set Wpv[CGe]=-1
return CGe
endfunction
function gee takes integer CGe returns nothing
if CGe==null then
return
elseif(Wpv[CGe]!=-1)then
return
endif
set Wpv[CGe]=Wmv
set Wmv=CGe
endfunction
function gxe takes nothing returns integer
local integer CGe=Wbv
if(CGe!=0)then
set Wbv=Wcv[CGe]
else
set WBv=WBv+1
set CGe=WBv
endif
if(CGe>8190)then
return 0
endif
set Wcv[CGe]=-1
return CGe
endfunction
function goe takes integer CGe returns nothing
if CGe==null then
return
elseif(Wcv[CGe]!=-1)then
return
endif
set Wcv[CGe]=Wbv
set Wbv=CGe
endfunction
function gre takes nothing returns integer
local integer CGe=WVv
if(CGe!=0)then
set WVv=WXv[CGe]
else
set WEv=WEv+1
set CGe=WEv
endif
if(CGe>8190)then
return 0
endif
set WXv[CGe]=-1
return CGe
endfunction
function gie takes integer CGe returns nothing
if CGe==null then
return
elseif(WXv[CGe]!=-1)then
return
endif
set WXv[CGe]=WVv
set WVv=CGe
endfunction
function gae takes nothing returns integer
local integer CGe=w1v
if(CGe!=0)then
set w1v=w3v[CGe]
else
set w2v=w2v+1
set CGe=w2v
endif
if(CGe>8190)then
return 0
endif
set w3v[CGe]=-1
return CGe
endfunction
function gne takes integer CGe returns nothing
if CGe==null then
return
elseif(w3v[CGe]!=-1)then
return
endif
set w3v[CGe]=w1v
set w1v=CGe
endfunction
function gVe takes nothing returns integer
local integer CGe=wYv
if(CGe!=0)then
set wYv=wZv[CGe]
else
set wzv=wzv+1
set CGe=wzv
endif
if(CGe>8190)then
return 0
endif
set wZv[CGe]=-1
return CGe
endfunction
function gEe takes integer CGe returns nothing
if CGe==null then
return
elseif(wZv[CGe]!=-1)then
return
endif
set wZv[CGe]=wYv
set wYv=CGe
endfunction
function gXe takes nothing returns integer
local integer CGe=wLv
if(CGe!=0)then
set wLv=wMv[CGe]
else
set wmv=wmv+1
set CGe=wmv
endif
if(CGe>8190)then
return 0
endif
set wMv[CGe]=-1
return CGe
endfunction
function gOe takes integer CGe returns nothing
if CGe==null then
return
elseif(wMv[CGe]!=-1)then
return
endif
set wMv[CGe]=wLv
set wLv=CGe
endfunction
function gRe takes nothing returns integer
local integer CGe=wdv
if(CGe!=0)then
set wdv=wfv[CGe]
else
set wDv=wDv+1
set CGe=wDv
endif
if(CGe>8190)then
return 0
endif
set wfv[CGe]=-1
return CGe
endfunction
function gIe takes integer CGe returns nothing
if CGe==null then
return
elseif(wfv[CGe]!=-1)then
return
endif
set wfv[CGe]=wdv
set wdv=CGe
endfunction
function gAe takes nothing returns integer
local integer CGe=wIv
if(CGe!=0)then
set wIv=wNv[CGe]
else
set wAv=wAv+1
set CGe=wAv
endif
if(CGe>8190)then
return 0
endif
set wNv[CGe]=-1
return CGe
endfunction
function gNe takes integer CGe returns nothing
if CGe==null then
return
elseif(wNv[CGe]!=-1)then
return
endif
set wNv[CGe]=wIv
set wIv=CGe
endfunction
function gbe takes nothing returns integer
local integer CGe=wxv
if(CGe!=0)then
set wxv=wrv[CGe]
else
set wov=wov+1
set CGe=wov
endif
if(CGe>8190)then
return 0
endif
set wrv[CGe]=-1
return CGe
endfunction
function gBe takes integer CGe returns nothing
if CGe==null then
return
elseif(wrv[CGe]!=-1)then
return
endif
set wrv[CGe]=wxv
set wxv=CGe
endfunction
function gce takes nothing returns integer
local integer CGe=UYv
if(CGe!=0)then
set UYv=UZv[CGe]
else
set Uzv=Uzv+1
set CGe=Uzv
endif
if(CGe>8190)then
return 0
endif
set UZv[CGe]=-1
return CGe
endfunction
function gCe takes integer CGe returns nothing
if CGe==null then
return
elseif(UZv[CGe]!=-1)then
return
endif
set UZv[CGe]=UYv
set UYv=CGe
endfunction
function gde takes nothing returns integer
local integer CGe=Upv
if(CGe!=0)then
set Upv=Uqv[CGe]
else
set UPv=UPv+1
set CGe=UPv
endif
if(CGe>8190)then
return 0
endif
set Uqv[CGe]=-1
return CGe
endfunction
function gDe takes integer CGe returns nothing
if CGe==null then
return
elseif(Uqv[CGe]!=-1)then
return
endif
set Uqv[CGe]=Upv
set Upv=CGe
endfunction
function gfe takes nothing returns integer
local integer CGe=UBv
if(CGe!=0)then
set UBv=UCv[CGe]
else
set Ucv=Ucv+1
set CGe=Ucv
endif
if(CGe>8190)then
return 0
endif
set UCv[CGe]=-1
return CGe
endfunction
function gFe takes integer CGe returns nothing
if CGe==null then
return
elseif(UCv[CGe]!=-1)then
return
endif
set UCv[CGe]=UBv
set UBv=CGe
endfunction
function gge takes nothing returns integer
local integer CGe=UVv
if(CGe!=0)then
set UVv=UXv[CGe]
else
set UEv=UEv+1
set CGe=UEv
endif
if(CGe>8190)then
return 0
endif
set UXv[CGe]=-1
return CGe
endfunction
function gGe takes integer CGe returns nothing
if CGe==null then
return
elseif(UXv[CGe]!=-1)then
return
endif
set UXv[CGe]=UVv
set UVv=CGe
endfunction
function ghe takes nothing returns integer
local integer CGe=uYv
if(CGe!=0)then
set uYv=uZv[CGe]
else
set uzv=uzv+1
set CGe=uzv
endif
if(CGe>8190)then
return 0
endif
set uZv[CGe]=-1
return CGe
endfunction
function gHe takes integer CGe returns nothing
if CGe==null then
return
elseif(uZv[CGe]!=-1)then
return
endif
set uZv[CGe]=uYv
set uYv=CGe
endfunction
function gje takes nothing returns integer
local integer CGe=uSv
if(CGe!=0)then
set uSv=uTv[CGe]
else
set utv=utv+1
set CGe=utv
endif
if(CGe>8190)then
return 0
endif
set uTv[CGe]=-1
return CGe
endfunction
function gJe takes integer CGe returns nothing
if CGe==null then
return
elseif(uTv[CGe]!=-1)then
return
endif
set uTv[CGe]=uSv
set uSv=CGe
endfunction
function gke takes nothing returns integer
local integer CGe=ukv
if(CGe!=0)then
set ukv=ulv[CGe]
else
set uKv=uKv+1
set CGe=uKv
endif
if(CGe>8190)then
return 0
endif
set ulv[CGe]=-1
return CGe
endfunction
function gKe takes integer CGe returns nothing
if CGe==null then
return
elseif(ulv[CGe]!=-1)then
return
endif
set ulv[CGe]=ukv
set ukv=CGe
endfunction
function gle takes nothing returns integer
local integer CGe=uNv
if(CGe!=0)then
set uNv=uBv[CGe]
else
set ubv=ubv+1
set CGe=ubv
endif
if(CGe>8190)then
return 0
endif
set uBv[CGe]=-1
return CGe
endfunction
function gLe takes integer CGe returns nothing
if CGe==null then
return
elseif(uBv[CGe]!=-1)then
return
endif
set uBv[CGe]=uNv
set uNv=CGe
endfunction
function gme takes nothing returns integer
local integer CGe=T8v
if(CGe!=0)then
set T8v=uvv[CGe]
else
set T9v=T9v+1
set CGe=T9v
endif
if(CGe>8190)then
return 0
endif
set uvv[CGe]=-1
return CGe
endfunction
function gMe takes integer CGe returns nothing
if CGe==null then
return
elseif(uvv[CGe]!=-1)then
return
endif
set uvv[CGe]=T8v
set T8v=CGe
endfunction
function gpe takes nothing returns integer
local integer CGe=TYv
if(CGe!=0)then
set TYv=TZv[CGe]
else
set Tzv=Tzv+1
set CGe=Tzv
endif
if(CGe>8190)then
return 0
endif
set TZv[CGe]=-1
return CGe
endfunction
function gPe takes integer CGe returns nothing
if CGe==null then
return
elseif(TZv[CGe]!=-1)then
return
endif
set TZv[CGe]=TYv
set TYv=CGe
endfunction
function gqe takes nothing returns integer
local integer CGe=Tpv
if(CGe!=0)then
set Tpv=Tqv[CGe]
else
set TPv=TPv+1
set CGe=TPv
endif
if(CGe>8190)then
return 0
endif
set Tqv[CGe]=-1
return CGe
endfunction
function gQe takes integer CGe returns nothing
if CGe==null then
return
elseif(Tqv[CGe]!=-1)then
return
endif
set Tqv[CGe]=Tpv
set Tpv=CGe
endfunction
function gse takes nothing returns integer
local integer CGe=TJv
if(CGe!=0)then
set TJv=TKv[CGe]
else
set Tkv=Tkv+1
set CGe=Tkv
endif
if(CGe>8190)then
return 0
endif
set TKv[CGe]=-1
return CGe
endfunction
function gSe takes integer CGe returns nothing
if CGe==null then
return
elseif(TKv[CGe]!=-1)then
return
endif
set TKv[CGe]=TJv
set TJv=CGe
endfunction
function gte takes nothing returns integer
local integer CGe=Tdv
if(CGe!=0)then
set Tdv=Tfv[CGe]
else
set TDv=TDv+1
set CGe=TDv
endif
if(CGe>8190)then
return 0
endif
set Tfv[CGe]=-1
return CGe
endfunction
function gTe takes integer CGe returns nothing
if CGe==null then
return
elseif(Tfv[CGe]!=-1)then
return
endif
set Tfv[CGe]=Tdv
set Tdv=CGe
endfunction
function gue takes nothing returns integer
local integer CGe=TNv
if(CGe!=0)then
set TNv=TBv[CGe]
else
set Tbv=Tbv+1
set CGe=Tbv
endif
if(CGe>8190)then
return 0
endif
set TBv[CGe]=-1
return CGe
endfunction
function gUe takes integer CGe returns nothing
if CGe==null then
return
elseif(TBv[CGe]!=-1)then
return
endif
set TBv[CGe]=TNv
set TNv=CGe
endfunction
function gwe takes nothing returns integer
local integer CGe=Tev
if(CGe!=0)then
set Tev=Tov[CGe]
else
set Txv=Txv+1
set CGe=Txv
endif
if(CGe>8190)then
return 0
endif
set Tov[CGe]=-1
return CGe
endfunction
function gWe takes integer CGe returns nothing
if CGe==null then
return
elseif(Tov[CGe]!=-1)then
return
endif
set Tov[CGe]=Tev
set Tev=CGe
endfunction
function gye takes nothing returns integer
local integer CGe=tyv
if(CGe!=0)then
set tyv=tzv[CGe]
else
set tYv=tYv+1
set CGe=tYv
endif
if(CGe>8190)then
return 0
endif
set tzv[CGe]=-1
return CGe
endfunction
function gYe takes integer CGe returns nothing
if CGe==null then
return
elseif(tzv[CGe]!=-1)then
return
endif
set tzv[CGe]=tyv
set tyv=CGe
endfunction
function gze takes nothing returns integer
local integer CGe=tkv
if(CGe!=0)then
set tkv=tlv[CGe]
else
set tKv=tKv+1
set CGe=tKv
endif
if(CGe>8190)then
return 0
endif
set tlv[CGe]=-1
return CGe
endfunction
function gZe takes integer CGe returns nothing
if CGe==null then
return
elseif(tlv[CGe]!=-1)then
return
endif
set tlv[CGe]=tkv
set tkv=CGe
endfunction
function g_e takes nothing returns integer
local integer CGe=tCv
if(CGe!=0)then
set tCv=tDv[CGe]
else
set tdv=tdv+1
set CGe=tdv
endif
if(CGe>8190)then
return 0
endif
set tDv[CGe]=-1
return CGe
endfunction
function g0e takes integer CGe returns nothing
if CGe==null then
return
elseif(tDv[CGe]!=-1)then
return
endif
set tDv[CGe]=tCv
set tCv=CGe
endfunction
function g1e takes nothing returns integer
local integer CGe=tnv
if(CGe!=0)then
set tnv=tEv[CGe]
else
set tVv=tVv+1
set CGe=tVv
endif
if(CGe>8190)then
return 0
endif
set tEv[CGe]=-1
return CGe
endfunction
function g2e takes integer CGe returns nothing
if CGe==null then
return
elseif(tEv[CGe]!=-1)then
return
endif
set tEv[CGe]=tnv
set tnv=CGe
endfunction
function g3e takes nothing returns integer
local integer CGe=S8v
if(CGe!=0)then
set S8v=tvv[CGe]
else
set S9v=S9v+1
set CGe=S9v
endif
if(CGe>8190)then
return 0
endif
set tvv[CGe]=-1
return CGe
endfunction
function g4e takes integer CGe returns nothing
if CGe==null then
return
elseif(tvv[CGe]!=-1)then
return
endif
set tvv[CGe]=S8v
set S8v=CGe
endfunction
function g5e takes nothing returns integer
local integer CGe=S0v
if(CGe!=0)then
set S0v=S2v[CGe]
else
set S1v=S1v+1
set CGe=S1v
endif
if(CGe>8190)then
return 0
endif
set S2v[CGe]=-1
return CGe
endfunction
function g6e takes integer CGe returns nothing
if CGe==null then
return
elseif(S2v[CGe]!=-1)then
return
endif
set S2v[CGe]=S0v
set S0v=CGe
endfunction
function g7e takes nothing returns integer
local integer CGe=SPv
if(CGe!=0)then
set SPv=SQv[CGe]
else
set Sqv=Sqv+1
set CGe=Sqv
endif
if(CGe>8190)then
return 0
endif
set SQv[CGe]=-1
return CGe
endfunction
function g8e takes integer CGe returns nothing
if CGe==null then
return
elseif(SQv[CGe]!=-1)then
return
endif
set SQv[CGe]=SPv
set SPv=CGe
endfunction
function g9e takes nothing returns integer
local integer CGe=Skv
if(CGe!=0)then
set Skv=Slv[CGe]
else
set SKv=SKv+1
set CGe=SKv
endif
if(CGe>8190)then
return 0
endif
set Slv[CGe]=-1
return CGe
endfunction
function Gve takes integer CGe returns nothing
if CGe==null then
return
elseif(Slv[CGe]!=-1)then
return
endif
set Slv[CGe]=Skv
set Skv=CGe
endfunction
function Gee takes nothing returns integer
local integer CGe=SOv
if(CGe!=0)then
set SOv=SIv[CGe]
else
set SRv=SRv+1
set CGe=SRv
endif
if(CGe>8190)then
return 0
endif
set SIv[CGe]=-1
return CGe
endfunction
function Gxe takes integer CGe returns nothing
if CGe==null then
return
elseif(SIv[CGe]!=-1)then
return
endif
set SIv[CGe]=SOv
set SOv=CGe
endfunction
function Goe takes nothing returns integer
local integer CGe=Sxv
if(CGe!=0)then
set Sxv=Srv[CGe]
else
set Sov=Sov+1
set CGe=Sov
endif
if(CGe>8190)then
return 0
endif
set Srv[CGe]=-1
return CGe
endfunction
function Gre takes integer CGe returns nothing
if CGe==null then
return
elseif(Srv[CGe]!=-1)then
return
endif
set Srv[CGe]=Sxv
set Sxv=CGe
endfunction
function Gie takes nothing returns integer
local integer CGe=sZv
if(CGe!=0)then
set sZv=s0v[CGe]
else
set s_v=s_v+1
set CGe=s_v
endif
if(CGe>8190)then
return 0
endif
set s0v[CGe]=-1
return CGe
endfunction
function Gae takes integer CGe returns nothing
if CGe==null then
return
elseif(s0v[CGe]!=-1)then
return
endif
set s0v[CGe]=sZv
set sZv=CGe
endfunction
function Gne takes nothing returns integer
local integer CGe=sTv
if(CGe!=0)then
set sTv=sUv[CGe]
else
set suv=suv+1
set CGe=suv
endif
if(CGe>8190)then
return 0
endif
set sUv[CGe]=-1
return CGe
endfunction
function GVe takes integer CGe returns nothing
if CGe==null then
return
elseif(sUv[CGe]!=-1)then
return
endif
set sUv[CGe]=sTv
set sTv=CGe
endfunction
function GEe takes nothing returns integer
local integer CGe=smv
if(CGe!=0)then
set smv=spv[CGe]
else
set sMv=sMv+1
set CGe=sMv
endif
if(CGe>8190)then
return 0
endif
set spv[CGe]=-1
return CGe
endfunction
function GXe takes integer CGe returns nothing
if CGe==null then
return
elseif(spv[CGe]!=-1)then
return
endif
set spv[CGe]=smv
set smv=CGe
endfunction
function GOe takes nothing returns integer
local integer CGe=sjv
if(CGe!=0)then
set sjv=skv[CGe]
else
set sJv=sJv+1
set CGe=sJv
endif
if(CGe>8190)then
return 0
endif
set skv[CGe]=-1
return CGe
endfunction
function GRe takes integer CGe returns nothing
if CGe==null then
return
elseif(skv[CGe]!=-1)then
return
endif
set skv[CGe]=sjv
set sjv=CGe
endfunction
function GIe takes nothing returns integer
local integer CGe=scv
if(CGe!=0)then
set scv=sdv[CGe]
else
set sCv=sCv+1
set CGe=sCv
endif
if(CGe>8190)then
return 0
endif
set sdv[CGe]=-1
return CGe
endfunction
function GAe takes integer CGe returns nothing
if CGe==null then
return
elseif(sdv[CGe]!=-1)then
return
endif
set sdv[CGe]=scv
set scv=CGe
endfunction
function GNe takes nothing returns integer
local integer CGe=sEv
if(CGe!=0)then
set sEv=sOv[CGe]
else
set sXv=sXv+1
set CGe=sXv
endif
if(CGe>8190)then
return 0
endif
set sOv[CGe]=-1
return CGe
endfunction
function Gbe takes integer CGe returns nothing
if CGe==null then
return
elseif(sOv[CGe]!=-1)then
return
endif
set sOv[CGe]=sEv
set sEv=CGe
endfunction
function GBe takes nothing returns integer
local integer CGe=Q7v
if(CGe!=0)then
set Q7v=Q9v[CGe]
else
set Q8v=Q8v+1
set CGe=Q8v
endif
if(CGe>8190)then
return 0
endif
set Q9v[CGe]=-1
return CGe
endfunction
function Gce takes integer CGe returns nothing
if CGe==null then
return
elseif(Q9v[CGe]!=-1)then
return
endif
set Q9v[CGe]=Q7v
set Q7v=CGe
endfunction
function GCe takes nothing returns integer
local integer CGe=Qyv
if(CGe!=0)then
set Qyv=Qzv[CGe]
else
set QYv=QYv+1
set CGe=QYv
endif
if(CGe>8190)then
return 0
endif
set Qzv[CGe]=-1
return CGe
endfunction
function Gde takes integer CGe returns nothing
if CGe==null then
return
elseif(Qzv[CGe]!=-1)then
return
endif
set Qzv[CGe]=Qyv
set Qyv=CGe
endfunction
function GDe takes nothing returns integer
local integer CGe=Qpv
if(CGe!=0)then
set Qpv=Qqv[CGe]
else
set QPv=QPv+1
set CGe=QPv
endif
if(CGe>8190)then
return 0
endif
set Qqv[CGe]=-1
return CGe
endfunction
function Gfe takes integer CGe returns nothing
if CGe==null then
return
elseif(Qqv[CGe]!=-1)then
return
endif
set Qqv[CGe]=Qpv
set Qpv=CGe
endfunction
function GFe takes nothing returns integer
local integer CGe=Qkv
if(CGe!=0)then
set Qkv=Qlv[CGe]
else
set QKv=QKv+1
set CGe=QKv
endif
if(CGe>8190)then
return 0
endif
set Qlv[CGe]=-1
return CGe
endfunction
function Gge takes integer CGe returns nothing
if CGe==null then
return
elseif(Qlv[CGe]!=-1)then
return
endif
set Qlv[CGe]=Qkv
set Qkv=CGe
endfunction
function GGe takes nothing returns integer
local integer CGe=Qfv
if(CGe!=0)then
set Qfv=Qgv[CGe]
else
set QFv=QFv+1
set CGe=QFv
endif
if(CGe>8190)then
return 0
endif
set Qgv[CGe]=-1
return CGe
endfunction
function Ghe takes integer CGe returns nothing
if CGe==null then
return
elseif(Qgv[CGe]!=-1)then
return
endif
set Qgv[CGe]=Qfv
set Qfv=CGe
endfunction
function GHe takes nothing returns integer
local integer CGe=QEv
if(CGe!=0)then
set QEv=QOv[CGe]
else
set QXv=QXv+1
set CGe=QXv
endif
if(CGe>8190)then
return 0
endif
set QOv[CGe]=-1
return CGe
endfunction
function Gje takes integer CGe returns nothing
if CGe==null then
return
elseif(QOv[CGe]!=-1)then
return
endif
set QOv[CGe]=QEv
set QEv=CGe
endfunction
function GJe takes nothing returns integer
local integer CGe=Qov
if(CGe!=0)then
set Qov=Qiv[CGe]
else
set Qrv=Qrv+1
set CGe=Qrv
endif
if(CGe>8190)then
return 0
endif
set Qiv[CGe]=-1
return CGe
endfunction
function Gke takes integer CGe returns nothing
if CGe==null then
return
elseif(Qiv[CGe]!=-1)then
return
endif
set Qiv[CGe]=Qov
set Qov=CGe
endfunction
function GKe takes nothing returns integer
local integer CGe=q1v
if(CGe!=0)then
set q1v=q3v[CGe]
else
set q2v=q2v+1
set CGe=q2v
endif
if(CGe>8190)then
return 0
endif
set q3v[CGe]=-1
return CGe
endfunction
function Gle takes integer CGe returns nothing
if CGe==null then
return
elseif(q3v[CGe]!=-1)then
return
endif
set q3v[CGe]=q1v
set q1v=CGe
endfunction
function GLe takes nothing returns integer
local integer CGe=qtv
if(CGe!=0)then
set qtv=quv[CGe]
else
set qTv=qTv+1
set CGe=qTv
endif
if(CGe>8190)then
return 0
endif
set quv[CGe]=-1
return CGe
endfunction
function Gme takes integer CGe returns nothing
if CGe==null then
return
elseif(quv[CGe]!=-1)then
return
endif
set quv[CGe]=qtv
set qtv=CGe
endfunction
function GMe takes nothing returns integer
local integer CGe=qkv
if(CGe!=0)then
set qkv=qlv[CGe]
else
set qKv=qKv+1
set CGe=qKv
endif
if(CGe>8190)then
return 0
endif
set qlv[CGe]=-1
return CGe
endfunction
function Gpe takes integer CGe returns nothing
if CGe==null then
return
elseif(qlv[CGe]!=-1)then
return
endif
set qlv[CGe]=qkv
set qkv=CGe
endfunction
function GPe takes nothing returns integer
local integer CGe=qDv
if(CGe!=0)then
set qDv=qFv[CGe]
else
set qfv=qfv+1
set CGe=qfv
endif
if(CGe>8190)then
return 0
endif
set qFv[CGe]=-1
return CGe
endfunction
function Gqe takes integer CGe returns nothing
if CGe==null then
return
elseif(qFv[CGe]!=-1)then
return
endif
set qFv[CGe]=qDv
set qDv=CGe
endfunction
function GQe takes nothing returns integer
local integer CGe=qIv
if(CGe!=0)then
set qIv=qNv[CGe]
else
set qAv=qAv+1
set CGe=qAv
endif
if(CGe>8190)then
return 0
endif
set qNv[CGe]=-1
return CGe
endfunction
function Gse takes integer CGe returns nothing
if CGe==null then
return
elseif(qNv[CGe]!=-1)then
return
endif
set qNv[CGe]=qIv
set qIv=CGe
endfunction
function GSe takes nothing returns integer
local integer CGe=qnv
if(CGe!=0)then
set qnv=qEv[CGe]
else
set qVv=qVv+1
set CGe=qVv
endif
if(CGe>8190)then
return 0
endif
set qEv[CGe]=-1
return CGe
endfunction
function Gte takes integer CGe returns nothing
if CGe==null then
return
elseif(qEv[CGe]!=-1)then
return
endif
set qEv[CGe]=qnv
set qnv=CGe
endfunction
function GTe takes nothing returns integer
local integer CGe=P5v
if(CGe!=0)then
set P5v=P7v[CGe]
else
set P6v=P6v+1
set CGe=P6v
endif
if(CGe>8190)then
return 0
endif
set P7v[CGe]=-1
return CGe
endfunction
function Gue takes integer CGe returns nothing
if CGe==null then
return
elseif(P7v[CGe]!=-1)then
return
endif
set P7v[CGe]=P5v
set P5v=CGe
endfunction
function GUe takes nothing returns integer
local integer CGe=P_v
if(CGe!=0)then
set P_v=P1v[CGe]
else
set P0v=P0v+1
set CGe=P0v
endif
if(CGe>8190)then
return 0
endif
set P1v[CGe]=-1
return CGe
endfunction
function Gwe takes integer CGe returns nothing
if CGe==null then
return
elseif(P1v[CGe]!=-1)then
return
endif
set P1v[CGe]=P_v
set P_v=CGe
endfunction
function GWe takes nothing returns integer
local integer CGe=Puv
if(CGe!=0)then
set Puv=Pwv[CGe]
else
set PUv=PUv+1
set CGe=PUv
endif
if(CGe>8190)then
return 0
endif
set Pwv[CGe]=-1
return CGe
endfunction
function Gye takes integer CGe returns nothing
if CGe==null then
return
elseif(Pwv[CGe]!=-1)then
return
endif
set Pwv[CGe]=Puv
set Puv=CGe
endfunction
function GYe takes nothing returns integer
local integer CGe=Ppv
if(CGe!=0)then
set Ppv=Pqv[CGe]
else
set PPv=PPv+1
set CGe=PPv
endif
if(CGe>8190)then
return 0
endif
set Pqv[CGe]=-1
return CGe
endfunction
function Gze takes integer CGe returns nothing
if CGe==null then
return
elseif(Pqv[CGe]!=-1)then
return
endif
set Pqv[CGe]=Ppv
set Ppv=CGe
endfunction
function GZe takes nothing returns integer
local integer CGe=Pgv
if(CGe!=0)then
set Pgv=Phv[CGe]
else
set PGv=PGv+1
set CGe=PGv
endif
if(CGe>8190)then
return 0
endif
set Phv[CGe]=-1
return CGe
endfunction
function G_e takes integer CGe returns nothing
if CGe==null then
return
elseif(Phv[CGe]!=-1)then
return
endif
set Phv[CGe]=Pgv
set Pgv=CGe
endfunction
function G0e takes nothing returns integer
local integer CGe=Pnv
if(CGe!=0)then
set Pnv=PEv[CGe]
else
set PVv=PVv+1
set CGe=PVv
endif
if(CGe>8190)then
return 0
endif
set PEv[CGe]=-1
return CGe
endfunction
function G1e takes integer CGe returns nothing
if CGe==null then
return
elseif(PEv[CGe]!=-1)then
return
endif
set PEv[CGe]=Pnv
set Pnv=CGe
endfunction
function G2e takes nothing returns integer
local integer CGe=Pvv
if(CGe!=0)then
set Pvv=Pxv[CGe]
else
set Pev=Pev+1
set CGe=Pev
endif
if(CGe>8190)then
return 0
endif
set Pxv[CGe]=-1
return CGe
endfunction
function G3e takes integer CGe returns nothing
if CGe==null then
return
elseif(Pxv[CGe]!=-1)then
return
endif
set Pxv[CGe]=Pvv
set Pvv=CGe
endfunction
function G4e takes nothing returns integer
local integer CGe=p3v
if(CGe!=0)then
set p3v=p5v[CGe]
else
set p4v=p4v+1
set CGe=p4v
endif
if(CGe>8190)then
return 0
endif
set p5v[CGe]=-1
return CGe
endfunction
function G5e takes integer CGe returns nothing
if CGe==null then
return
elseif(p5v[CGe]!=-1)then
return
endif
set p5v[CGe]=p3v
set p3v=CGe
endfunction
function G6e takes nothing returns integer
local integer CGe=puv
if(CGe!=0)then
set puv=pwv[CGe]
else
set pUv=pUv+1
set CGe=pUv
endif
if(CGe>8190)then
return 0
endif
set pwv[CGe]=-1
return CGe
endfunction
function G7e takes integer CGe returns nothing
if CGe==null then
return
elseif(pwv[CGe]!=-1)then
return
endif
set pwv[CGe]=puv
set puv=CGe
endfunction
function G8e takes nothing returns integer
local integer CGe=pqv
if(CGe!=0)then
set pqv=psv[CGe]
else
set pQv=pQv+1
set CGe=pQv
endif
if(CGe>8190)then
return 0
endif
set psv[CGe]=-1
return CGe
endfunction
function G9e takes integer CGe returns nothing
if CGe==null then
return
elseif(psv[CGe]!=-1)then
return
endif
set psv[CGe]=pqv
set pqv=CGe
endfunction
function hve takes nothing returns integer
local integer CGe=pkv
if(CGe!=0)then
set pkv=plv[CGe]
else
set pKv=pKv+1
set CGe=pKv
endif
if(CGe>8190)then
return 0
endif
set plv[CGe]=-1
return CGe
endfunction
function hee takes integer CGe returns nothing
if CGe==null then
return
elseif(plv[CGe]!=-1)then
return
endif
set plv[CGe]=pkv
set pkv=CGe
endfunction
function hxe takes nothing returns integer
local integer CGe=pgv
if(CGe!=0)then
set pgv=phv[CGe]
else
set pGv=pGv+1
set CGe=pGv
endif
if(CGe>8190)then
return 0
endif
set phv[CGe]=-1
return CGe
endfunction
function hoe takes integer CGe returns nothing
if CGe==null then
return
elseif(phv[CGe]!=-1)then
return
endif
set phv[CGe]=pgv
set pgv=CGe
endfunction
function hre takes nothing returns integer
local integer CGe=pRv
if(CGe!=0)then
set pRv=pAv[CGe]
else
set pIv=pIv+1
set CGe=pIv
endif
if(CGe>8190)then
return 0
endif
set pAv[CGe]=-1
return CGe
endfunction
function hie takes integer CGe returns nothing
if CGe==null then
return
elseif(pAv[CGe]!=-1)then
return
endif
set pAv[CGe]=pRv
set pRv=CGe
endfunction
function hae takes nothing returns integer
local integer CGe=pvv
if(CGe!=0)then
set pvv=pxv[CGe]
else
set pev=pev+1
set CGe=pev
endif
if(CGe>8190)then
return 0
endif
set pxv[CGe]=-1
return CGe
endfunction
function hne takes integer CGe returns nothing
if CGe==null then
return
elseif(pxv[CGe]!=-1)then
return
endif
set pxv[CGe]=pvv
set pvv=CGe
endfunction
function hVe takes nothing returns integer
local integer CGe=M1v
if(CGe!=0)then
set M1v=M3v[CGe]
else
set M2v=M2v+1
set CGe=M2v
endif
if(CGe>8190)then
return 0
endif
set M3v[CGe]=-1
return CGe
endfunction
function hEe takes integer CGe returns nothing
if CGe==null then
return
elseif(M3v[CGe]!=-1)then
return
endif
set M3v[CGe]=M1v
set M1v=CGe
endfunction
function hXe takes nothing returns integer
local integer CGe=Myv
if(CGe!=0)then
set Myv=Mzv[CGe]
else
set MYv=MYv+1
set CGe=MYv
endif
if(CGe>8190)then
return 0
endif
set Mzv[CGe]=-1
return CGe
endfunction
function hOe takes integer CGe returns nothing
if CGe==null then
return
elseif(Mzv[CGe]!=-1)then
return
endif
set Mzv[CGe]=Myv
set Myv=CGe
endfunction
function hRe takes nothing returns integer
local integer CGe=Mpv
if(CGe!=0)then
set Mpv=Mqv[CGe]
else
set MPv=MPv+1
set CGe=MPv
endif
if(CGe>8190)then
return 0
endif
set Mqv[CGe]=-1
return CGe
endfunction
function hIe takes integer CGe returns nothing
if CGe==null then
return
elseif(Mqv[CGe]!=-1)then
return
endif
set Mqv[CGe]=Mpv
set Mpv=CGe
endfunction
function hAe takes nothing returns integer
local integer CGe=Mjv
if(CGe!=0)then
set Mjv=Mkv[CGe]
else
set MJv=MJv+1
set CGe=MJv
endif
if(CGe>8190)then
return 0
endif
set Mkv[CGe]=-1
return CGe
endfunction
function hNe takes integer CGe returns nothing
if CGe==null then
return
elseif(Mkv[CGe]!=-1)then
return
endif
set Mkv[CGe]=Mjv
set Mjv=CGe
endfunction
function hbe takes nothing returns integer
local integer CGe=Mbv
if(CGe!=0)then
set Mbv=Mcv[CGe]
else
set MBv=MBv+1
set CGe=MBv
endif
if(CGe>8190)then
return 0
endif
set Mcv[CGe]=-1
return CGe
endfunction
function hBe takes integer CGe returns nothing
if CGe==null then
return
elseif(Mcv[CGe]!=-1)then
return
endif
set Mcv[CGe]=Mbv
set Mbv=CGe
endfunction
function hce takes nothing returns integer
local integer CGe=Miv
if(CGe!=0)then
set Miv=Mnv[CGe]
else
set Mav=Mav+1
set CGe=Mav
endif
if(CGe>8190)then
return 0
endif
set Mnv[CGe]=-1
return CGe
endfunction
function hCe takes integer CGe returns nothing
if CGe==null then
return
elseif(Mnv[CGe]!=-1)then
return
endif
set Mnv[CGe]=Miv
set Miv=CGe
endfunction
function hde takes nothing returns integer
local integer CGe=m5v
if(CGe!=0)then
set m5v=m7v[CGe]
else
set m6v=m6v+1
set CGe=m6v
endif
if(CGe>8190)then
return 0
endif
set m7v[CGe]=-1
return CGe
endfunction
function hDe takes integer CGe returns nothing
if CGe==null then
return
elseif(m7v[CGe]!=-1)then
return
endif
set m7v[CGe]=m5v
set m5v=CGe
endfunction
function hfe takes nothing returns integer
local integer CGe=mZv
if(CGe!=0)then
set mZv=m0v[CGe]
else
set m_v=m_v+1
set CGe=m_v
endif
if(CGe>8190)then
return 0
endif
set m0v[CGe]=-1
return CGe
endfunction
function hFe takes integer CGe returns nothing
if CGe==null then
return
elseif(m0v[CGe]!=-1)then
return
endif
set m0v[CGe]=mZv
set mZv=CGe
endfunction
function hge takes nothing returns integer
local integer CGe=mUv
if(CGe!=0)then
set mUv=mWv[CGe]
else
set mwv=mwv+1
set CGe=mwv
endif
if(CGe>8190)then
return 0
endif
set mWv[CGe]=-1
return CGe
endfunction
function hGe takes integer CGe returns nothing
if CGe==null then
return
elseif(mWv[CGe]!=-1)then
return
endif
set mWv[CGe]=mUv
set mUv=CGe
endfunction
function hhe takes nothing returns integer
local integer CGe=mLv
if(CGe!=0)then
set mLv=mMv[CGe]
else
set mmv=mmv+1
set CGe=mmv
endif
if(CGe>8190)then
return 0
endif
set mMv[CGe]=-1
return CGe
endfunction
function hHe takes integer CGe returns nothing
if CGe==null then
return
elseif(mMv[CGe]!=-1)then
return
endif
set mMv[CGe]=mLv
set mLv=CGe
endfunction
function hje takes nothing returns integer
local integer CGe=mGv
if(CGe!=0)then
set mGv=mHv[CGe]
else
set mhv=mhv+1
set CGe=mhv
endif
if(CGe>8190)then
return 0
endif
set mHv[CGe]=-1
return CGe
endfunction
function hJe takes integer CGe returns nothing
if CGe==null then
return
elseif(mHv[CGe]!=-1)then
return
endif
set mHv[CGe]=mGv
set mGv=CGe
endfunction
function hke takes nothing returns integer
local integer CGe=mBv
if(CGe!=0)then
set mBv=mCv[CGe]
else
set mcv=mcv+1
set CGe=mcv
endif
if(CGe>8190)then
return 0
endif
set mCv[CGe]=-1
return CGe
endfunction
function hKe takes integer CGe returns nothing
if CGe==null then
return
elseif(mCv[CGe]!=-1)then
return
endif
set mCv[CGe]=mBv
set mBv=CGe
endfunction
function hle takes nothing returns integer
local integer CGe=mEv
if(CGe!=0)then
set mEv=mOv[CGe]
else
set mXv=mXv+1
set CGe=mXv
endif
if(CGe>8190)then
return 0
endif
set mOv[CGe]=-1
return CGe
endfunction
function hLe takes integer CGe returns nothing
if CGe==null then
return
elseif(mOv[CGe]!=-1)then
return
endif
set mOv[CGe]=mEv
set mEv=CGe
endfunction
function hme takes nothing returns integer
local integer CGe=mov
if(CGe!=0)then
set mov=miv[CGe]
else
set mrv=mrv+1
set CGe=mrv
endif
if(CGe>8190)then
return 0
endif
set miv[CGe]=-1
return CGe
endfunction
function hMe takes integer CGe returns nothing
if CGe==null then
return
elseif(miv[CGe]!=-1)then
return
endif
set miv[CGe]=mov
set mov=CGe
endfunction
function hpe takes nothing returns integer
local integer CGe=L1v
if(CGe!=0)then
set L1v=L3v[CGe]
else
set L2v=L2v+1
set CGe=L2v
endif
if(CGe>8190)then
return 0
endif
set L3v[CGe]=-1
return CGe
endfunction
function hPe takes integer CGe returns nothing
if CGe==null then
return
elseif(L3v[CGe]!=-1)then
return
endif
set L3v[CGe]=L1v
set L1v=CGe
endfunction
function hqe takes nothing returns integer
local integer CGe=LYv
if(CGe!=0)then
set LYv=LZv[CGe]
else
set Lzv=Lzv+1
set CGe=Lzv
endif
if(CGe>8190)then
return 0
endif
set LZv[CGe]=-1
return CGe
endfunction
function hQe takes integer CGe returns nothing
if CGe==null then
return
elseif(LZv[CGe]!=-1)then
return
endif
set LZv[CGe]=LYv
set LYv=CGe
endfunction
function hse takes nothing returns integer
local integer CGe=LSv
if(CGe!=0)then
set LSv=LTv[CGe]
else
set Ltv=Ltv+1
set CGe=Ltv
endif
if(CGe>8190)then
return 0
endif
set LTv[CGe]=-1
return CGe
endfunction
function hSe takes integer CGe returns nothing
if CGe==null then
return
elseif(LTv[CGe]!=-1)then
return
endif
set LTv[CGe]=LSv
set LSv=CGe
endfunction
function hte takes nothing returns integer
local integer CGe=LLv
if(CGe!=0)then
set LLv=LMv[CGe]
else
set Lmv=Lmv+1
set CGe=Lmv
endif
if(CGe>8190)then
return 0
endif
set LMv[CGe]=-1
return CGe
endfunction
function hTe takes integer CGe returns nothing
if CGe==null then
return
elseif(LMv[CGe]!=-1)then
return
endif
set LMv[CGe]=LLv
set LLv=CGe
endfunction
function hue takes nothing returns integer
local integer CGe=Ljv
if(CGe!=0)then
set Ljv=Lkv[CGe]
else
set LJv=LJv+1
set CGe=LJv
endif
if(CGe>8190)then
return 0
endif
set Lkv[CGe]=-1
return CGe
endfunction
function hUe takes integer CGe returns nothing
if CGe==null then
return
elseif(Lkv[CGe]!=-1)then
return
endif
set Lkv[CGe]=Ljv
set Ljv=CGe
endfunction
function hwe takes nothing returns integer
local integer CGe=LAv
if(CGe!=0)then
set LAv=Lbv[CGe]
else
set LNv=LNv+1
set CGe=LNv
endif
if(CGe>8190)then
return 0
endif
set Lbv[CGe]=-1
return CGe
endfunction
function hWe takes integer CGe returns nothing
if CGe==null then
return
elseif(Lbv[CGe]!=-1)then
return
endif
set Lbv[CGe]=LAv
set LAv=CGe
endfunction
function hye takes nothing returns integer
local integer CGe=Lnv
if(CGe!=0)then
set Lnv=LEv[CGe]
else
set LVv=LVv+1
set CGe=LVv
endif
if(CGe>8190)then
return 0
endif
set LEv[CGe]=-1
return CGe
endfunction
function hYe takes integer CGe returns nothing
if CGe==null then
return
elseif(LEv[CGe]!=-1)then
return
endif
set LEv[CGe]=Lnv
set Lnv=CGe
endfunction
function hze takes nothing returns integer
local integer CGe=Lev
if(CGe!=0)then
set Lev=Lov[CGe]
else
set Lxv=Lxv+1
set CGe=Lxv
endif
if(CGe>8190)then
return 0
endif
set Lov[CGe]=-1
return CGe
endfunction
function hZe takes integer CGe returns nothing
if CGe==null then
return
elseif(Lov[CGe]!=-1)then
return
endif
set Lov[CGe]=Lev
set Lev=CGe
endfunction
function h_e takes nothing returns integer
local integer CGe=l_v
if(CGe!=0)then
set l_v=l1v[CGe]
else
set l0v=l0v+1
set CGe=l0v
endif
if(CGe>8190)then
return 0
endif
set l1v[CGe]=-1
return CGe
endfunction
function h0e takes integer CGe returns nothing
if CGe==null then
return
elseif(l1v[CGe]!=-1)then
return
endif
set l1v[CGe]=l_v
set l_v=CGe
endfunction
function h1e takes nothing returns integer
local integer CGe=lSv
if(CGe!=0)then
set lSv=lTv[CGe]
else
set ltv=ltv+1
set CGe=ltv
endif
if(CGe>8190)then
return 0
endif
set lTv[CGe]=-1
return CGe
endfunction
function h2e takes integer CGe returns nothing
if CGe==null then
return
elseif(lTv[CGe]!=-1)then
return
endif
set lTv[CGe]=lSv
set lSv=CGe
endfunction
function h3e takes nothing returns integer
local integer CGe=lmv
if(CGe!=0)then
set lmv=lpv[CGe]
else
set lMv=lMv+1
set CGe=lMv
endif
if(CGe>8190)then
return 0
endif
set lpv[CGe]=-1
return CGe
endfunction
function h4e takes integer CGe returns nothing
if CGe==null then
return
elseif(lpv[CGe]!=-1)then
return
endif
set lpv[CGe]=lmv
set lmv=CGe
endfunction
function h5e takes nothing returns integer
local integer CGe=lGv
if(CGe!=0)then
set lGv=lHv[CGe]
else
set lhv=lhv+1
set CGe=lhv
endif
if(CGe>8190)then
return 0
endif
set lHv[CGe]=-1
return CGe
endfunction
function h6e takes integer CGe returns nothing
if CGe==null then
return
elseif(lHv[CGe]!=-1)then
return
endif
set lHv[CGe]=lGv
set lGv=CGe
endfunction
function h7e takes nothing returns integer
local integer CGe=lbv
if(CGe!=0)then
set lbv=lcv[CGe]
else
set lBv=lBv+1
set CGe=lBv
endif
if(CGe>8190)then
return 0
endif
set lcv[CGe]=-1
return CGe
endfunction
function h8e takes integer CGe returns nothing
if CGe==null then
return
elseif(lcv[CGe]!=-1)then
return
endif
set lcv[CGe]=lbv
set lbv=CGe
endfunction
function h9e takes nothing returns integer
local integer CGe=lnv
if(CGe!=0)then
set lnv=lEv[CGe]
else
set lVv=lVv+1
set CGe=lVv
endif
if(CGe>8190)then
return 0
endif
set lEv[CGe]=-1
return CGe
endfunction
function Hve takes integer CGe returns nothing
if CGe==null then
return
elseif(lEv[CGe]!=-1)then
return
endif
set lEv[CGe]=lnv
set lnv=CGe
endfunction
function Hee takes nothing returns integer
local integer CGe=K0v
if(CGe!=0)then
set K0v=K2v[CGe]
else
set K1v=K1v+1
set CGe=K1v
endif
if(CGe>8190)then
return 0
endif
set K2v[CGe]=-1
return CGe
endfunction
function Hxe takes integer CGe returns nothing
if CGe==null then
return
elseif(K2v[CGe]!=-1)then
return
endif
set K2v[CGe]=K0v
set K0v=CGe
endfunction
function Hoe takes nothing returns integer
local integer CGe=KUv
if(CGe!=0)then
set KUv=KWv[CGe]
else
set Kwv=Kwv+1
set CGe=Kwv
endif
if(CGe>8190)then
return 0
endif
set KWv[CGe]=-1
return CGe
endfunction
function Hre takes integer CGe returns nothing
if CGe==null then
return
elseif(KWv[CGe]!=-1)then
return
endif
set KWv[CGe]=KUv
set KUv=CGe
endfunction
function Hie takes nothing returns integer
local integer CGe=KPv
if(CGe!=0)then
set KPv=KQv[CGe]
else
set Kqv=Kqv+1
set CGe=Kqv
endif
if(CGe>8190)then
return 0
endif
set KQv[CGe]=-1
return CGe
endfunction
function Hae takes integer CGe returns nothing
if CGe==null then
return
elseif(KQv[CGe]!=-1)then
return
endif
set KQv[CGe]=KPv
set KPv=CGe
endfunction
function Hne takes nothing returns integer
local integer CGe=KKv
if(CGe!=0)then
set KKv=KLv[CGe]
else
set Klv=Klv+1
set CGe=Klv
endif
if(CGe>8190)then
return 0
endif
set KLv[CGe]=-1
return CGe
endfunction
function HVe takes integer CGe returns nothing
if CGe==null then
return
elseif(KLv[CGe]!=-1)then
return
endif
set KLv[CGe]=KKv
set KKv=CGe
endfunction
function HEe takes nothing returns integer
local integer CGe=Khv
if(CGe!=0)then
set Khv=Kjv[CGe]
else
set KHv=KHv+1
set CGe=KHv
endif
if(CGe>8190)then
return 0
endif
set Kjv[CGe]=-1
return CGe
endfunction
function HXe takes integer CGe returns nothing
if CGe==null then
return
elseif(Kjv[CGe]!=-1)then
return
endif
set Kjv[CGe]=Khv
set Khv=CGe
endfunction
function HOe takes nothing returns integer
local integer CGe=KAv
if(CGe!=0)then
set KAv=Kbv[CGe]
else
set KNv=KNv+1
set CGe=KNv
endif
if(CGe>8190)then
return 0
endif
set Kbv[CGe]=-1
return CGe
endfunction
function HRe takes integer CGe returns nothing
if CGe==null then
return
elseif(Kbv[CGe]!=-1)then
return
endif
set Kbv[CGe]=KAv
set KAv=CGe
endfunction
function HIe takes nothing returns integer
local integer CGe=Kiv
if(CGe!=0)then
set Kiv=Knv[CGe]
else
set Kav=Kav+1
set CGe=Kav
endif
if(CGe>8190)then
return 0
endif
set Knv[CGe]=-1
return CGe
endfunction
function HAe takes integer CGe returns nothing
if CGe==null then
return
elseif(Knv[CGe]!=-1)then
return
endif
set Knv[CGe]=Kiv
set Kiv=CGe
endfunction
function HNe takes nothing returns integer
local integer CGe=k9v
if(CGe!=0)then
set k9v=Kev[CGe]
else
set Kvv=Kvv+1
set CGe=Kvv
endif
if(CGe>8190)then
return 0
endif
set Kev[CGe]=-1
return CGe
endfunction
function Hbe takes integer CGe returns nothing
if CGe==null then
return
elseif(Kev[CGe]!=-1)then
return
endif
set Kev[CGe]=k9v
set k9v=CGe
endfunction
function HBe takes nothing returns integer
local integer CGe=kzv
if(CGe!=0)then
set kzv=k_v[CGe]
else
set kZv=kZv+1
set CGe=kZv
endif
if(CGe>8190)then
return 0
endif
set k_v[CGe]=-1
return CGe
endfunction
function Hce takes integer CGe returns nothing
if CGe==null then
return
elseif(k_v[CGe]!=-1)then
return
endif
set k_v[CGe]=kzv
set kzv=CGe
endfunction
function HCe takes nothing returns integer
local integer CGe=kSv
if(CGe!=0)then
set kSv=kTv[CGe]
else
set ktv=ktv+1
set CGe=ktv
endif
if(CGe>8190)then
return 0
endif
set kTv[CGe]=-1
return CGe
endfunction
function Hde takes integer CGe returns nothing
if CGe==null then
return
elseif(kTv[CGe]!=-1)then
return
endif
set kTv[CGe]=kSv
set kSv=CGe
endfunction
function HDe takes nothing returns integer
local integer CGe=kJv
if(CGe!=0)then
set kJv=kKv[CGe]
else
set kkv=kkv+1
set CGe=kkv
endif
if(CGe>8190)then
return 0
endif
set kKv[CGe]=-1
return CGe
endfunction
function Hfe takes integer CGe returns nothing
if CGe==null then
return
elseif(kKv[CGe]!=-1)then
return
endif
set kKv[CGe]=kJv
set kJv=CGe
endfunction
function HFe takes nothing returns integer
local integer CGe=kFv
if(CGe!=0)then
set kFv=kGv[CGe]
else
set kgv=kgv+1
set CGe=kgv
endif
if(CGe>8190)then
return 0
endif
set kGv[CGe]=-1
return CGe
endfunction
function Hge takes integer CGe returns nothing
if CGe==null then
return
elseif(kGv[CGe]!=-1)then
return
endif
set kGv[CGe]=kFv
set kFv=CGe
endfunction
function HGe takes nothing returns integer
local integer CGe=kRv
if(CGe!=0)then
set kRv=kAv[CGe]
else
set kIv=kIv+1
set CGe=kIv
endif
if(CGe>8190)then
return 0
endif
set kAv[CGe]=-1
return CGe
endfunction
function Hhe takes integer CGe returns nothing
if CGe==null then
return
elseif(kAv[CGe]!=-1)then
return
endif
set kAv[CGe]=kRv
set kRv=CGe
endfunction
function HHe takes nothing returns integer
local integer CGe=J6v
if(CGe!=0)then
set J6v=J8v[CGe]
else
set J7v=J7v+1
set CGe=J7v
endif
if(CGe>8190)then
return 0
endif
set J8v[CGe]=-1
return CGe
endfunction
function Hje takes integer CGe returns nothing
if CGe==null then
return
elseif(J8v[CGe]!=-1)then
return
endif
set J8v[CGe]=J6v
set J6v=CGe
endfunction
function HJe takes nothing returns integer
local integer CGe=JWv
if(CGe!=0)then
set JWv=JYv[CGe]
else
set Jyv=Jyv+1
set CGe=Jyv
endif
if(CGe>8190)then
return 0
endif
set JYv[CGe]=-1
return CGe
endfunction
function Hke takes integer CGe returns nothing
if CGe==null then
return
elseif(JYv[CGe]!=-1)then
return
endif
set JYv[CGe]=JWv
set JWv=CGe
endfunction
function HKe takes nothing returns integer
local integer CGe=Jsv
if(CGe!=0)then
set Jsv=Jtv[CGe]
else
set JSv=JSv+1
set CGe=JSv
endif
if(CGe>8190)then
return 0
endif
set Jtv[CGe]=-1
return CGe
endfunction
function Hle takes integer CGe returns nothing
if CGe==null then
return
elseif(Jtv[CGe]!=-1)then
return
endif
set Jtv[CGe]=Jsv
set Jsv=CGe
endfunction
function HLe takes nothing returns integer
local integer CGe=Jmv
if(CGe!=0)then
set Jmv=Jpv[CGe]
else
set JMv=JMv+1
set CGe=JMv
endif
if(CGe>8190)then
return 0
endif
set Jpv[CGe]=-1
return CGe
endfunction
function Hme takes integer CGe returns nothing
if CGe==null then
return
elseif(Jpv[CGe]!=-1)then
return
endif
set Jpv[CGe]=Jmv
set Jmv=CGe
endfunction
function HMe takes nothing returns integer
local integer CGe=Jhv
if(CGe!=0)then
set Jhv=Jjv[CGe]
else
set JHv=JHv+1
set CGe=JHv
endif
if(CGe>8190)then
return 0
endif
set Jjv[CGe]=-1
return CGe
endfunction
function Hpe takes integer CGe returns nothing
if CGe==null then
return
elseif(Jjv[CGe]!=-1)then
return
endif
set Jjv[CGe]=Jhv
set Jhv=CGe
endfunction
function HPe takes nothing returns integer
local integer CGe=Jdv
if(CGe!=0)then
set Jdv=Jfv[CGe]
else
set JDv=JDv+1
set CGe=JDv
endif
if(CGe>8190)then
return 0
endif
set Jfv[CGe]=-1
return CGe
endfunction
function Hqe takes integer CGe returns nothing
if CGe==null then
return
elseif(Jfv[CGe]!=-1)then
return
endif
set Jfv[CGe]=Jdv
set Jdv=CGe
endfunction
function HQe takes nothing returns integer
local integer CGe=JRv
if(CGe!=0)then
set JRv=JAv[CGe]
else
set JIv=JIv+1
set CGe=JIv
endif
if(CGe>8190)then
return 0
endif
set JAv[CGe]=-1
return CGe
endfunction
function Hse takes integer CGe returns nothing
if CGe==null then
return
elseif(JAv[CGe]!=-1)then
return
endif
set JAv[CGe]=JRv
set JRv=CGe
endfunction
function HSe takes nothing returns integer
local integer CGe=Jiv
if(CGe!=0)then
set Jiv=Jnv[CGe]
else
set Jav=Jav+1
set CGe=Jav
endif
if(CGe>8190)then
return 0
endif
set Jnv[CGe]=-1
return CGe
endfunction
function Hte takes integer CGe returns nothing
if CGe==null then
return
elseif(Jnv[CGe]!=-1)then
return
endif
set Jnv[CGe]=Jiv
set Jiv=CGe
endfunction
function HTe takes nothing returns integer
local integer CGe=j4v
if(CGe!=0)then
set j4v=j6v[CGe]
else
set j5v=j5v+1
set CGe=j5v
endif
if(CGe>8190)then
return 0
endif
set j6v[CGe]=-1
return CGe
endfunction
function Hue takes integer CGe returns nothing
if CGe==null then
return
elseif(j6v[CGe]!=-1)then
return
endif
set j6v[CGe]=j4v
set j4v=CGe
endfunction
function HUe takes nothing returns integer
local integer CGe=jsv
if(CGe!=0)then
set jsv=jtv[CGe]
else
set jSv=jSv+1
set CGe=jSv
endif
if(CGe>8190)then
return 0
endif
set jtv[CGe]=-1
return CGe
endfunction
function Hwe takes integer CGe returns nothing
if CGe==null then
return
elseif(jtv[CGe]!=-1)then
return
endif
set jtv[CGe]=jsv
set jsv=CGe
endfunction
function HWe takes nothing returns integer
local integer CGe=jHv
if(CGe!=0)then
set jHv=jJv[CGe]
else
set jjv=jjv+1
set CGe=jjv
endif
if(CGe>8190)then
return 0
endif
set jJv[CGe]=-1
return CGe
endfunction
function Hye takes integer CGe returns nothing
if CGe==null then
return
elseif(jJv[CGe]!=-1)then
return
endif
set jJv[CGe]=jHv
set jHv=CGe
endfunction
function HYe takes nothing returns integer
local integer CGe=jDv
if(CGe!=0)then
set jDv=jFv[CGe]
else
set jfv=jfv+1
set CGe=jfv
endif
if(CGe>8190)then
return 0
endif
set jFv[CGe]=-1
return CGe
endfunction
function Hze takes integer CGe returns nothing
if CGe==null then
return
elseif(jFv[CGe]!=-1)then
return
endif
set jFv[CGe]=jDv
set jDv=CGe
endfunction
function HZe takes nothing returns integer
local integer CGe=jEv
if(CGe!=0)then
set jEv=jOv[CGe]
else
set jXv=jXv+1
set CGe=jXv
endif
if(CGe>8190)then
return 0
endif
set jOv[CGe]=-1
return CGe
endfunction
function H_e takes integer CGe returns nothing
if CGe==null then
return
elseif(jOv[CGe]!=-1)then
return
endif
set jOv[CGe]=jEv
set jEv=CGe
endfunction
function H0e takes nothing returns integer
local integer CGe=H6v
if(CGe!=0)then
set H6v=H8v[CGe]
else
set H7v=H7v+1
set CGe=H7v
endif
if(CGe>8190)then
return 0
endif
set H8v[CGe]=-1
return CGe
endfunction
function H1e takes integer CGe returns nothing
if CGe==null then
return
elseif(H8v[CGe]!=-1)then
return
endif
set H8v[CGe]=H6v
set H6v=CGe
endfunction
function H2e takes nothing returns integer
local integer CGe=H1v
if(CGe!=0)then
set H1v=H3v[CGe]
else
set H2v=H2v+1
set CGe=H2v
endif
if(CGe>8190)then
return 0
endif
set H3v[CGe]=-1
return CGe
endfunction
function H3e takes integer CGe returns nothing
if CGe==null then
return
elseif(H3v[CGe]!=-1)then
return
endif
set H3v[CGe]=H1v
set H1v=CGe
endfunction
function H4e takes nothing returns integer
local integer CGe=HWv
if(CGe!=0)then
set HWv=HYv[CGe]
else
set Hyv=Hyv+1
set CGe=Hyv
endif
if(CGe>8190)then
return 0
endif
set HYv[CGe]=-1
return CGe
endfunction
function H5e takes integer CGe returns nothing
if CGe==null then
return
elseif(HYv[CGe]!=-1)then
return
endif
set HYv[CGe]=HWv
set HWv=CGe
endfunction
function H6e takes nothing returns integer
local integer CGe=HMv
if(CGe!=0)then
set HMv=HPv[CGe]
else
set Hpv=Hpv+1
set CGe=Hpv
endif
if(CGe>8190)then
return 0
endif
set HPv[CGe]=-1
return CGe
endfunction
function H7e takes integer CGe returns nothing
if CGe==null then
return
elseif(HPv[CGe]!=-1)then
return
endif
set HPv[CGe]=HMv
set HMv=CGe
endfunction
function H8e takes nothing returns integer
local integer CGe=Hkv
if(CGe!=0)then
set Hkv=Hlv[CGe]
else
set HKv=HKv+1
set CGe=HKv
endif
if(CGe>8190)then
return 0
endif
set Hlv[CGe]=-1
return CGe
endfunction
function H9e takes integer CGe returns nothing
if CGe==null then
return
elseif(Hlv[CGe]!=-1)then
return
endif
set Hlv[CGe]=Hkv
set Hkv=CGe
endfunction
function jve takes nothing returns integer
local integer CGe=HAv
if(CGe!=0)then
set HAv=Hbv[CGe]
else
set HNv=HNv+1
set CGe=HNv
endif
if(CGe>8190)then
return 0
endif
set Hbv[CGe]=-1
return CGe
endfunction
function jee takes integer CGe returns nothing
if CGe==null then
return
elseif(Hbv[CGe]!=-1)then
return
endif
set Hbv[CGe]=HAv
set HAv=CGe
endfunction
function jxe takes nothing returns integer
local integer CGe=Hov
if(CGe!=0)then
set Hov=Hiv[CGe]
else
set Hrv=Hrv+1
set CGe=Hrv
endif
if(CGe>8190)then
return 0
endif
set Hiv[CGe]=-1
return CGe
endfunction
function joe takes integer CGe returns nothing
if CGe==null then
return
elseif(Hiv[CGe]!=-1)then
return
endif
set Hiv[CGe]=Hov
set Hov=CGe
endfunction
function jre takes nothing returns integer
local integer CGe=hYv
if(CGe!=0)then
set hYv=hZv[CGe]
else
set hzv=hzv+1
set CGe=hzv
endif
if(CGe>8190)then
return 0
endif
set hZv[CGe]=-1
return CGe
endfunction
function jie takes integer CGe returns nothing
if CGe==null then
return
elseif(hZv[CGe]!=-1)then
return
endif
set hZv[CGe]=hYv
set hYv=CGe
endfunction
function jae takes nothing returns integer
local integer CGe=hSv
if(CGe!=0)then
set hSv=hTv[CGe]
else
set htv=htv+1
set CGe=htv
endif
if(CGe>8190)then
return 0
endif
set hTv[CGe]=-1
return CGe
endfunction
function jne takes integer CGe returns nothing
if CGe==null then
return
elseif(hTv[CGe]!=-1)then
return
endif
set hTv[CGe]=hSv
set hSv=CGe
endfunction
function jVe takes nothing returns integer
local integer CGe=hdv
if(CGe!=0)then
set hdv=hfv[CGe]
else
set hDv=hDv+1
set CGe=hDv
endif
if(CGe>8190)then
return 0
endif
set hfv[CGe]=-1
return CGe
endfunction
function jEe takes integer CGe returns nothing
if CGe==null then
return
elseif(hfv[CGe]!=-1)then
return
endif
set hfv[CGe]=hdv
set hdv=CGe
endfunction
function jXe takes nothing returns integer
local integer CGe=hRv
if(CGe!=0)then
set hRv=hAv[CGe]
else
set hIv=hIv+1
set CGe=hIv
endif
if(CGe>8190)then
return 0
endif
set hAv[CGe]=-1
return CGe
endfunction
function jOe takes integer CGe returns nothing
if CGe==null then
return
elseif(hAv[CGe]!=-1)then
return
endif
set hAv[CGe]=hRv
set hRv=CGe
endfunction
function jRe takes nothing returns integer
local integer CGe=hov
if(CGe!=0)then
set hov=hiv[CGe]
else
set hrv=hrv+1
set CGe=hrv
endif
if(CGe>8190)then
return 0
endif
set hiv[CGe]=-1
return CGe
endfunction
function jIe takes integer CGe returns nothing
if CGe==null then
return
elseif(hiv[CGe]!=-1)then
return
endif
set hiv[CGe]=hov
set hov=CGe
endfunction
function jAe takes nothing returns integer
local integer CGe=G6v
if(CGe!=0)then
set G6v=G8v[CGe]
else
set G7v=G7v+1
set CGe=G7v
endif
if(CGe>8190)then
return 0
endif
set G8v[CGe]=-1
return CGe
endfunction
function jNe takes integer CGe returns nothing
if CGe==null then
return
elseif(G8v[CGe]!=-1)then
return
endif
set G8v[CGe]=G6v
set G6v=CGe
endfunction
function jbe takes nothing returns integer
local integer CGe=Gwv
if(CGe!=0)then
set Gwv=Gyv[CGe]
else
set GWv=GWv+1
set CGe=GWv
endif
if(CGe>8190)then
return 0
endif
set Gyv[CGe]=-1
return CGe
endfunction
function jBe takes integer CGe returns nothing
if CGe==null then
return
elseif(Gyv[CGe]!=-1)then
return
endif
set Gyv[CGe]=Gwv
set Gwv=CGe
endfunction
function jce takes nothing returns integer
local integer CGe=Gmv
if(CGe!=0)then
set Gmv=Gpv[CGe]
else
set GMv=GMv+1
set CGe=GMv
endif
if(CGe>8190)then
return 0
endif
set Gpv[CGe]=-1
return CGe
endfunction
function jCe takes integer CGe returns nothing
if CGe==null then
return
elseif(Gpv[CGe]!=-1)then
return
endif
set Gpv[CGe]=Gmv
set Gmv=CGe
endfunction
function jde takes nothing returns integer
local integer CGe=Ghv
if(CGe!=0)then
set Ghv=Gjv[CGe]
else
set GHv=GHv+1
set CGe=GHv
endif
if(CGe>8190)then
return 0
endif
set Gjv[CGe]=-1
return CGe
endfunction
function jDe takes integer CGe returns nothing
if CGe==null then
return
elseif(Gjv[CGe]!=-1)then
return
endif
set Gjv[CGe]=Ghv
set Ghv=CGe
endfunction
function jfe takes nothing returns integer
local integer CGe=GRv
if(CGe!=0)then
set GRv=GAv[CGe]
else
set GIv=GIv+1
set CGe=GIv
endif
if(CGe>8190)then
return 0
endif
set GAv[CGe]=-1
return CGe
endfunction
function jFe takes integer CGe returns nothing
if CGe==null then
return
elseif(GAv[CGe]!=-1)then
return
endif
set GAv[CGe]=GRv
set GRv=CGe
endfunction
function jge takes nothing returns integer
local integer CGe=Gov
if(CGe!=0)then
set Gov=Giv[CGe]
else
set Grv=Grv+1
set CGe=Grv
endif
if(CGe>8190)then
return 0
endif
set Giv[CGe]=-1
return CGe
endfunction
function jGe takes integer CGe returns nothing
if CGe==null then
return
elseif(Giv[CGe]!=-1)then
return
endif
set Giv[CGe]=Gov
set Gov=CGe
endfunction
function jhe takes nothing returns integer
local integer CGe=g1v
if(CGe!=0)then
set g1v=g3v[CGe]
else
set g2v=g2v+1
set CGe=g2v
endif
if(CGe>8190)then
return 0
endif
set g3v[CGe]=-1
return CGe
endfunction
function jHe takes integer CGe returns nothing
if CGe==null then
return
elseif(g3v[CGe]!=-1)then
return
endif
set g3v[CGe]=g1v
set g1v=CGe
endfunction
function jje takes nothing returns integer
local integer CGe=guv
if(CGe!=0)then
set guv=gwv[CGe]
else
set gUv=gUv+1
set CGe=gUv
endif
if(CGe>8190)then
return 0
endif
set gwv[CGe]=-1
return CGe
endfunction
function jJe takes integer CGe returns nothing
if CGe==null then
return
elseif(gwv[CGe]!=-1)then
return
endif
set gwv[CGe]=guv
set guv=CGe
endfunction
function jke takes nothing returns integer
local integer CGe=gPv
if(CGe!=0)then
set gPv=gQv[CGe]
else
set gqv=gqv+1
set CGe=gqv
endif
if(CGe>8190)then
return 0
endif
set gQv[CGe]=-1
return CGe
endfunction
function jKe takes integer CGe returns nothing
if CGe==null then
return
elseif(gQv[CGe]!=-1)then
return
endif
set gQv[CGe]=gPv
set gPv=CGe
endfunction
function jle takes nothing returns integer
local integer CGe=gkv
if(CGe!=0)then
set gkv=glv[CGe]
else
set gKv=gKv+1
set CGe=gKv
endif
if(CGe>8190)then
return 0
endif
set glv[CGe]=-1
return CGe
endfunction
function jLe takes integer CGe returns nothing
if CGe==null then
return
elseif(glv[CGe]!=-1)then
return
endif
set glv[CGe]=gkv
set gkv=CGe
endfunction
function jme takes nothing returns integer
local integer CGe=gFv
if(CGe!=0)then
set gFv=gGv[CGe]
else
set ggv=ggv+1
set CGe=ggv
endif
if(CGe>8190)then
return 0
endif
set gGv[CGe]=-1
return CGe
endfunction
function jMe takes integer CGe returns nothing
if CGe==null then
return
elseif(gGv[CGe]!=-1)then
return
endif
set gGv[CGe]=gFv
set gFv=CGe
endfunction
function jpe takes nothing returns integer
local integer CGe=gbv
if(CGe!=0)then
set gbv=gcv[CGe]
else
set gBv=gBv+1
set CGe=gBv
endif
if(CGe>8190)then
return 0
endif
set gcv[CGe]=-1
return CGe
endfunction
function jPe takes integer CGe returns nothing
if CGe==null then
return
elseif(gcv[CGe]!=-1)then
return
endif
set gcv[CGe]=gbv
set gbv=CGe
endfunction
function jqe takes nothing returns integer
local integer CGe=gEv
if(CGe!=0)then
set gEv=gOv[CGe]
else
set gXv=gXv+1
set CGe=gXv
endif
if(CGe>8190)then
return 0
endif
set gOv[CGe]=-1
return CGe
endfunction
function jQe takes integer CGe returns nothing
if CGe==null then
return
elseif(gOv[CGe]!=-1)then
return
endif
set gOv[CGe]=gEv
set gEv=CGe
endfunction
function jse takes nothing returns integer
local integer CGe=gov
if(CGe!=0)then
set gov=giv[CGe]
else
set grv=grv+1
set CGe=grv
endif
if(CGe>8190)then
return 0
endif
set giv[CGe]=-1
return CGe
endfunction
function jSe takes integer CGe returns nothing
if CGe==null then
return
elseif(giv[CGe]!=-1)then
return
endif
set giv[CGe]=gov
set gov=CGe
endfunction
function jte takes nothing returns integer
local integer CGe=F8v
if(CGe!=0)then
set F8v=gvv[CGe]
else
set F9v=F9v+1
set CGe=F9v
endif
if(CGe>8190)then
return 0
endif
set gvv[CGe]=-1
return CGe
endfunction
function jTe takes integer CGe returns nothing
if CGe==null then
return
elseif(gvv[CGe]!=-1)then
return
endif
set gvv[CGe]=F8v
set F8v=CGe
endfunction
function jue takes nothing returns integer
local integer CGe=F2v
if(CGe!=0)then
set F2v=F4v[CGe]
else
set F3v=F3v+1
set CGe=F3v
endif
if(CGe>8190)then
return 0
endif
set F4v[CGe]=-1
return CGe
endfunction
function jUe takes integer CGe returns nothing
if CGe==null then
return
elseif(F4v[CGe]!=-1)then
return
endif
set F4v[CGe]=F2v
set F2v=CGe
endfunction
function jwe takes nothing returns integer
local integer CGe=FTv
if(CGe!=0)then
set FTv=FUv[CGe]
else
set Fuv=Fuv+1
set CGe=Fuv
endif
if(CGe>8190)then
return 0
endif
set FUv[CGe]=-1
return CGe
endfunction
function jWe takes integer CGe returns nothing
if CGe==null then
return
elseif(FUv[CGe]!=-1)then
return
endif
set FUv[CGe]=FTv
set FTv=CGe
endfunction
function jye takes nothing returns integer
local integer CGe=FPv
if(CGe!=0)then
set FPv=FQv[CGe]
else
set Fqv=Fqv+1
set CGe=Fqv
endif
if(CGe>8190)then
return 0
endif
set FQv[CGe]=-1
return CGe
endfunction
function jYe takes integer CGe returns nothing
if CGe==null then
return
elseif(FQv[CGe]!=-1)then
return
endif
set FQv[CGe]=FPv
set FPv=CGe
endfunction
function jze takes nothing returns integer
local integer CGe=Flv
if(CGe!=0)then
set Flv=Fmv[CGe]
else
set FLv=FLv+1
set CGe=FLv
endif
if(CGe>8190)then
return 0
endif
set Fmv[CGe]=-1
return CGe
endfunction
function jZe takes integer CGe returns nothing
if CGe==null then
return
elseif(Fmv[CGe]!=-1)then
return
endif
set Fmv[CGe]=Flv
set Flv=CGe
endfunction
function j_e takes nothing returns integer
local integer CGe=Fbv
if(CGe!=0)then
set Fbv=Fcv[CGe]
else
set FBv=FBv+1
set CGe=FBv
endif
if(CGe>8190)then
return 0
endif
set Fcv[CGe]=-1
return CGe
endfunction
function j0e takes integer CGe returns nothing
if CGe==null then
return
elseif(Fcv[CGe]!=-1)then
return
endif
set Fcv[CGe]=Fbv
set Fbv=CGe
endfunction
function j1e takes nothing returns integer
local integer CGe=FOv
if(CGe!=0)then
set FOv=FIv[CGe]
else
set FRv=FRv+1
set CGe=FRv
endif
if(CGe>8190)then
return 0
endif
set FIv[CGe]=-1
return CGe
endfunction
function j2e takes integer CGe returns nothing
if CGe==null then
return
elseif(FIv[CGe]!=-1)then
return
endif
set FIv[CGe]=FOv
set FOv=CGe
endfunction
function j3e takes nothing returns integer
local integer CGe=Fiv
if(CGe!=0)then
set Fiv=Fnv[CGe]
else
set Fav=Fav+1
set CGe=Fav
endif
if(CGe>8190)then
return 0
endif
set Fnv[CGe]=-1
return CGe
endfunction
function j4e takes integer CGe returns nothing
if CGe==null then
return
elseif(Fnv[CGe]!=-1)then
return
endif
set Fnv[CGe]=Fiv
set Fiv=CGe
endfunction
function j5e takes nothing returns integer
local integer CGe=f9v
if(CGe!=0)then
set f9v=Fev[CGe]
else
set Fvv=Fvv+1
set CGe=Fvv
endif
if(CGe>8190)then
return 0
endif
set Fev[CGe]=-1
return CGe
endfunction
function j6e takes integer CGe returns nothing
if CGe==null then
return
elseif(Fev[CGe]!=-1)then
return
endif
set Fev[CGe]=f9v
set f9v=CGe
endfunction
function j7e takes nothing returns integer
local integer CGe=fzv
if(CGe!=0)then
set fzv=f_v[CGe]
else
set fZv=fZv+1
set CGe=fZv
endif
if(CGe>8190)then
return 0
endif
set f_v[CGe]=-1
return CGe
endfunction
function j8e takes integer CGe returns nothing
if CGe==null then
return
elseif(f_v[CGe]!=-1)then
return
endif
set f_v[CGe]=fzv
set fzv=CGe
endfunction
function j9e takes nothing returns integer
local integer CGe=fSv
if(CGe!=0)then
set fSv=fTv[CGe]
else
set ftv=ftv+1
set CGe=ftv
endif
if(CGe>8190)then
return 0
endif
set fTv[CGe]=-1
return CGe
endfunction
function Jve takes integer CGe returns nothing
if CGe==null then
return
elseif(fTv[CGe]!=-1)then
return
endif
set fTv[CGe]=fSv
set fSv=CGe
endfunction
function Jee takes nothing returns integer
local integer CGe=fJv
if(CGe!=0)then
set fJv=fKv[CGe]
else
set fkv=fkv+1
set CGe=fkv
endif
if(CGe>8190)then
return 0
endif
set fKv[CGe]=-1
return CGe
endfunction
function Jxe takes integer CGe returns nothing
if CGe==null then
return
elseif(fKv[CGe]!=-1)then
return
endif
set fKv[CGe]=fJv
set fJv=CGe
endfunction
function Joe takes nothing returns integer
local integer CGe=fFv
if(CGe!=0)then
set fFv=fGv[CGe]
else
set fgv=fgv+1
set CGe=fgv
endif
if(CGe>8190)then
return 0
endif
set fGv[CGe]=-1
return CGe
endfunction
function Jre takes integer CGe returns nothing
if CGe==null then
return
elseif(fGv[CGe]!=-1)then
return
endif
set fGv[CGe]=fFv
set fFv=CGe
endfunction
function Jie takes nothing returns integer
local integer CGe=fbv
if(CGe!=0)then
set fbv=fcv[CGe]
else
set fBv=fBv+1
set CGe=fBv
endif
if(CGe>8190)then
return 0
endif
set fcv[CGe]=-1
return CGe
endfunction
function Jae takes integer CGe returns nothing
if CGe==null then
return
elseif(fcv[CGe]!=-1)then
return
endif
set fcv[CGe]=fbv
set fbv=CGe
endfunction
function Jne takes nothing returns integer
local integer CGe=fov
if(CGe!=0)then
set fov=fiv[CGe]
else
set frv=frv+1
set CGe=frv
endif
if(CGe>8190)then
return 0
endif
set fiv[CGe]=-1
return CGe
endfunction
function JVe takes integer CGe returns nothing
if CGe==null then
return
elseif(fiv[CGe]!=-1)then
return
endif
set fiv[CGe]=fov
set fov=CGe
endfunction
function JEe takes nothing returns integer
local integer CGe=D8v
if(CGe!=0)then
set D8v=fvv[CGe]
else
set D9v=D9v+1
set CGe=D9v
endif
if(CGe>8190)then
return 0
endif
set fvv[CGe]=-1
return CGe
endfunction
function JXe takes integer CGe returns nothing
if CGe==null then
return
elseif(fvv[CGe]!=-1)then
return
endif
set fvv[CGe]=D8v
set D8v=CGe
endfunction
function JOe takes nothing returns integer
local integer CGe=D0v
if(CGe!=0)then
set D0v=D2v[CGe]
else
set D1v=D1v+1
set CGe=D1v
endif
if(CGe>8190)then
return 0
endif
set D2v[CGe]=-1
return CGe
endfunction
function JRe takes integer CGe returns nothing
if CGe==null then
return
elseif(D2v[CGe]!=-1)then
return
endif
set D2v[CGe]=D0v
set D0v=CGe
endfunction
function JIe takes nothing returns integer
local integer CGe=DWv
if(CGe!=0)then
set DWv=DYv[CGe]
else
set Dyv=Dyv+1
set CGe=Dyv
endif
if(CGe>8190)then
return 0
endif
set DYv[CGe]=-1
return CGe
endfunction
function JAe takes integer CGe returns nothing
if CGe==null then
return
elseif(DYv[CGe]!=-1)then
return
endif
set DYv[CGe]=DWv
set DWv=CGe
endfunction
function JNe takes nothing returns integer
local integer CGe=DMv
if(CGe!=0)then
set DMv=DPv[CGe]
else
set Dpv=Dpv+1
set CGe=Dpv
endif
if(CGe>8190)then
return 0
endif
set DPv[CGe]=-1
return CGe
endfunction
function Jbe takes integer CGe returns nothing
if CGe==null then
return
elseif(DPv[CGe]!=-1)then
return
endif
set DPv[CGe]=DMv
set DMv=CGe
endfunction
function JBe takes nothing returns integer
local integer CGe=Dkv
if(CGe!=0)then
set Dkv=Dlv[CGe]
else
set DKv=DKv+1
set CGe=DKv
endif
if(CGe>8190)then
return 0
endif
set Dlv[CGe]=-1
return CGe
endfunction
function Jce takes integer CGe returns nothing
if CGe==null then
return
elseif(Dlv[CGe]!=-1)then
return
endif
set Dlv[CGe]=Dkv
set Dkv=CGe
endfunction
function JCe takes nothing returns integer
local integer CGe=DCv
if(CGe!=0)then
set DCv=DDv[CGe]
else
set Ddv=Ddv+1
set CGe=Ddv
endif
if(CGe>8190)then
return 0
endif
set DDv[CGe]=-1
return CGe
endfunction
function Jde takes integer CGe returns nothing
if CGe==null then
return
elseif(DDv[CGe]!=-1)then
return
endif
set DDv[CGe]=DCv
set DCv=CGe
endfunction
function JDe takes nothing returns integer
local integer CGe=Dxv
if(CGe!=0)then
set Dxv=Drv[CGe]
else
set Dov=Dov+1
set CGe=Dov
endif
if(CGe>8190)then
return 0
endif
set Drv[CGe]=-1
return CGe
endfunction
function Jfe takes integer CGe returns nothing
if CGe==null then
return
elseif(Drv[CGe]!=-1)then
return
endif
set Drv[CGe]=Dxv
set Dxv=CGe
endfunction
function JFe takes nothing returns integer
local integer CGe=d6v
if(CGe!=0)then
set d6v=d8v[CGe]
else
set d7v=d7v+1
set CGe=d7v
endif
if(CGe>8190)then
return 0
endif
set d8v[CGe]=-1
return CGe
endfunction
function Jge takes integer CGe returns nothing
if CGe==null then
return
elseif(d8v[CGe]!=-1)then
return
endif
set d8v[CGe]=d6v
set d6v=CGe
endfunction
function JGe takes nothing returns integer
local integer CGe=dWv
if(CGe!=0)then
set dWv=dYv[CGe]
else
set dyv=dyv+1
set CGe=dyv
endif
if(CGe>8190)then
return 0
endif
set dYv[CGe]=-1
return CGe
endfunction
function Jhe takes integer CGe returns nothing
if CGe==null then
return
elseif(dYv[CGe]!=-1)then
return
endif
set dYv[CGe]=dWv
set dWv=CGe
endfunction
function JHe takes nothing returns integer
local integer CGe=dMv
if(CGe!=0)then
set dMv=dPv[CGe]
else
set dpv=dpv+1
set CGe=dpv
endif
if(CGe>8190)then
return 0
endif
set dPv[CGe]=-1
return CGe
endfunction
function Jje takes integer CGe returns nothing
if CGe==null then
return
elseif(dPv[CGe]!=-1)then
return
endif
set dPv[CGe]=dMv
set dMv=CGe
endfunction
function JJe takes nothing returns integer
local integer CGe=djv
if(CGe!=0)then
set djv=dkv[CGe]
else
set dJv=dJv+1
set CGe=dJv
endif
if(CGe>8190)then
return 0
endif
set dkv[CGe]=-1
return CGe
endfunction
function Jke takes integer CGe returns nothing
if CGe==null then
return
elseif(dkv[CGe]!=-1)then
return
endif
set dkv[CGe]=djv
set djv=CGe
endfunction
function JKe takes nothing returns integer
local integer CGe=dbv
if(CGe!=0)then
set dbv=dcv[CGe]
else
set dBv=dBv+1
set CGe=dBv
endif
if(CGe>8190)then
return 0
endif
set dcv[CGe]=-1
return CGe
endfunction
function Jle takes integer CGe returns nothing
if CGe==null then
return
elseif(dcv[CGe]!=-1)then
return
endif
set dcv[CGe]=dbv
set dbv=CGe
endfunction
function JLe takes nothing returns integer
local integer CGe=dnv
if(CGe!=0)then
set dnv=dEv[CGe]
else
set dVv=dVv+1
set CGe=dVv
endif
if(CGe>8190)then
return 0
endif
set dEv[CGe]=-1
return CGe
endfunction
function Jme takes integer CGe returns nothing
if CGe==null then
return
elseif(dEv[CGe]!=-1)then
return
endif
set dEv[CGe]=dnv
set dnv=CGe
endfunction
function JMe takes nothing returns integer
local integer CGe=dev
if(CGe!=0)then
set dev=dov[CGe]
else
set dxv=dxv+1
set CGe=dxv
endif
if(CGe>8190)then
return 0
endif
set dov[CGe]=-1
return CGe
endfunction
function Jpe takes integer CGe returns nothing
if CGe==null then
return
elseif(dov[CGe]!=-1)then
return
endif
set dov[CGe]=dev
set dev=CGe
endfunction
function JPe takes nothing returns integer
local integer CGe=C2v
if(CGe!=0)then
set C2v=C4v[CGe]
else
set C3v=C3v+1
set CGe=C3v
endif
if(CGe>8190)then
return 0
endif
set C4v[CGe]=-1
return CGe
endfunction
function Jqe takes integer CGe returns nothing
if CGe==null then
return
elseif(C4v[CGe]!=-1)then
return
endif
set C4v[CGe]=C2v
set C2v=CGe
endfunction
function JQe takes nothing returns integer
local integer CGe=CWv
if(CGe!=0)then
set CWv=CYv[CGe]
else
set Cyv=Cyv+1
set CGe=Cyv
endif
if(CGe>8190)then
return 0
endif
set CYv[CGe]=-1
return CGe
endfunction
function Jse takes integer CGe returns nothing
if CGe==null then
return
elseif(CYv[CGe]!=-1)then
return
endif
set CYv[CGe]=CWv
set CWv=CGe
endfunction
function JSe takes nothing returns integer
local integer CGe=Cmv
if(CGe!=0)then
set Cmv=Cpv[CGe]
else
set CMv=CMv+1
set CGe=CMv
endif
if(CGe>8190)then
return 0
endif
set Cpv[CGe]=-1
return CGe
endfunction
function Jte takes integer CGe returns nothing
if CGe==null then
return
elseif(Cpv[CGe]!=-1)then
return
endif
set Cpv[CGe]=Cmv
set Cmv=CGe
endfunction
function JTe takes nothing returns integer
local integer CGe=CNv
if(CGe!=0)then
set CNv=CBv[CGe]
else
set Cbv=Cbv+1
set CGe=Cbv
endif
if(CGe>8190)then
return 0
endif
set CBv[CGe]=-1
return CGe
endfunction
function Jue takes integer CGe returns nothing
if CGe==null then
return
elseif(CBv[CGe]!=-1)then
return
endif
set CBv[CGe]=CNv
set CNv=CGe
endfunction
function JUe takes nothing returns integer
local integer CGe=Cov
if(CGe!=0)then
set Cov=Civ[CGe]
else
set Crv=Crv+1
set CGe=Crv
endif
if(CGe>8190)then
return 0
endif
set Civ[CGe]=-1
return CGe
endfunction
function Jwe takes integer CGe returns nothing
if CGe==null then
return
elseif(Civ[CGe]!=-1)then
return
endif
set Civ[CGe]=Cov
set Cov=CGe
endfunction
function JWe takes nothing returns integer
local integer CGe=czv
if(CGe!=0)then
set czv=c_v[CGe]
else
set cZv=cZv+1
set CGe=cZv
endif
if(CGe>8190)then
return 0
endif
set c_v[CGe]=-1
return CGe
endfunction
function Jye takes integer CGe returns nothing
if CGe==null then
return
elseif(c_v[CGe]!=-1)then
return
endif
set c_v[CGe]=czv
set czv=CGe
endfunction
function JYe takes nothing returns integer
local integer CGe=cqv
if(CGe!=0)then
set cqv=csv[CGe]
else
set cQv=cQv+1
set CGe=cQv
endif
if(CGe>8190)then
return 0
endif
set csv[CGe]=-1
return CGe
endfunction
function Jze takes integer CGe returns nothing
if CGe==null then
return
elseif(csv[CGe]!=-1)then
return
endif
set csv[CGe]=cqv
set cqv=CGe
endfunction
function JZe takes nothing returns integer
local integer CGe=cJv
if(CGe!=0)then
set cJv=cKv[CGe]
else
set ckv=ckv+1
set CGe=ckv
endif
if(CGe>8190)then
return 0
endif
set cKv[CGe]=-1
return CGe
endfunction
function J_e takes integer CGe returns nothing
if CGe==null then
return
elseif(cKv[CGe]!=-1)then
return
endif
set cKv[CGe]=cJv
set cJv=CGe
endfunction
function J0e takes nothing returns integer
local integer CGe=cAv
if(CGe!=0)then
set cAv=cbv[CGe]
else
set cNv=cNv+1
set CGe=cNv
endif
if(CGe>8190)then
return 0
endif
set cbv[CGe]=-1
return CGe
endfunction
function J1e takes integer CGe returns nothing
if CGe==null then
return
elseif(cbv[CGe]!=-1)then
return
endif
set cbv[CGe]=cAv
set cAv=CGe
endfunction
function J2e takes nothing returns integer
local integer CGe=cav
if(CGe!=0)then
set cav=cVv[CGe]
else
set cnv=cnv+1
set CGe=cnv
endif
if(CGe>8190)then
return 0
endif
set cVv[CGe]=-1
return CGe
endfunction
function J3e takes integer CGe returns nothing
if CGe==null then
return
elseif(cVv[CGe]!=-1)then
return
endif
set cVv[CGe]=cav
set cav=CGe
endfunction
function J4e takes nothing returns integer
local integer CGe=cev
if(CGe!=0)then
set cev=cov[CGe]
else
set cxv=cxv+1
set CGe=cxv
endif
if(CGe>8190)then
return 0
endif
set cov[CGe]=-1
return CGe
endfunction
function J5e takes integer CGe returns nothing
if CGe==null then
return
elseif(cov[CGe]!=-1)then
return
endif
set cov[CGe]=cev
set cev=CGe
endfunction
function J6e takes nothing returns integer
local integer CGe=B4v
if(CGe!=0)then
set B4v=B6v[CGe]
else
set B5v=B5v+1
set CGe=B5v
endif
if(CGe>8190)then
return 0
endif
set B6v[CGe]=-1
return CGe
endfunction
function J7e takes integer CGe returns nothing
if CGe==null then
return
elseif(B6v[CGe]!=-1)then
return
endif
set B6v[CGe]=B4v
set B4v=CGe
endfunction
function J8e takes nothing returns integer
local integer CGe=BZv
if(CGe!=0)then
set BZv=B0v[CGe]
else
set B_v=B_v+1
set CGe=B_v
endif
if(CGe>8190)then
return 0
endif
set B0v[CGe]=-1
return CGe
endfunction
function J9e takes integer CGe returns nothing
if CGe==null then
return
elseif(B0v[CGe]!=-1)then
return
endif
set B0v[CGe]=BZv
set BZv=CGe
endfunction
function kve takes nothing returns integer
local integer CGe=Buv
if(CGe!=0)then
set Buv=Bwv[CGe]
else
set BUv=BUv+1
set CGe=BUv
endif
if(CGe>8190)then
return 0
endif
set Bwv[CGe]=-1
return CGe
endfunction
function kee takes integer CGe returns nothing
if CGe==null then
return
elseif(Bwv[CGe]!=-1)then
return
endif
set Bwv[CGe]=Buv
set Buv=CGe
endfunction
function kxe takes nothing returns integer
local integer CGe=Bjv
if(CGe!=0)then
set Bjv=Bkv[CGe]
else
set BJv=BJv+1
set CGe=BJv
endif
if(CGe>8190)then
return 0
endif
set Bkv[CGe]=-1
return CGe
endfunction
function koe takes integer CGe returns nothing
if CGe==null then
return
elseif(Bkv[CGe]!=-1)then
return
endif
set Bkv[CGe]=Bjv
set Bjv=CGe
endfunction
function kre takes nothing returns integer
local integer CGe=Bdv
if(CGe!=0)then
set Bdv=Bfv[CGe]
else
set BDv=BDv+1
set CGe=BDv
endif
if(CGe>8190)then
return 0
endif
set Bfv[CGe]=-1
return CGe
endfunction
function kie takes integer CGe returns nothing
if CGe==null then
return
elseif(Bfv[CGe]!=-1)then
return
endif
set Bfv[CGe]=Bdv
set Bdv=CGe
endfunction
function kae takes nothing returns integer
local integer CGe=Bxv
if(CGe!=0)then
set Bxv=Brv[CGe]
else
set Bov=Bov+1
set CGe=Bov
endif
if(CGe>8190)then
return 0
endif
set Brv[CGe]=-1
return CGe
endfunction
function kne takes integer CGe returns nothing
if CGe==null then
return
elseif(Brv[CGe]!=-1)then
return
endif
set Brv[CGe]=Bxv
set Bxv=CGe
endfunction
function kVe takes nothing returns integer
local integer CGe=b5v
if(CGe!=0)then
set b5v=b7v[CGe]
else
set b6v=b6v+1
set CGe=b6v
endif
if(CGe>8190)then
return 0
endif
set b7v[CGe]=-1
return CGe
endfunction
function kEe takes integer CGe returns nothing
if CGe==null then
return
elseif(b7v[CGe]!=-1)then
return
endif
set b7v[CGe]=b5v
set b5v=CGe
endfunction
function kXe takes nothing returns integer
local integer CGe=bYv
if(CGe!=0)then
set bYv=bZv[CGe]
else
set bzv=bzv+1
set CGe=bzv
endif
if(CGe>8190)then
return 0
endif
set bZv[CGe]=-1
return CGe
endfunction
function kOe takes integer CGe returns nothing
if CGe==null then
return
elseif(bZv[CGe]!=-1)then
return
endif
set bZv[CGe]=bYv
set bYv=CGe
endfunction
function kRe takes nothing returns integer
local integer CGe=bsv
if(CGe!=0)then
set bsv=btv[CGe]
else
set bSv=bSv+1
set CGe=bSv
endif
if(CGe>8190)then
return 0
endif
set btv[CGe]=-1
return CGe
endfunction
function kIe takes integer CGe returns nothing
if CGe==null then
return
elseif(btv[CGe]!=-1)then
return
endif
set btv[CGe]=bsv
set bsv=CGe
endfunction
function kAe takes nothing returns integer
local integer CGe=bjv
if(CGe!=0)then
set bjv=bkv[CGe]
else
set bJv=bJv+1
set CGe=bJv
endif
if(CGe>8190)then
return 0
endif
set bkv[CGe]=-1
return CGe
endfunction
function kNe takes integer CGe returns nothing
if CGe==null then
return
elseif(bkv[CGe]!=-1)then
return
endif
set bkv[CGe]=bjv
set bjv=CGe
endfunction
function kbe takes nothing returns integer
local integer CGe=bbv
if(CGe!=0)then
set bbv=bcv[CGe]
else
set bBv=bBv+1
set CGe=bBv
endif
if(CGe>8190)then
return 0
endif
set bcv[CGe]=-1
return CGe
endfunction
function kBe takes integer CGe returns nothing
if CGe==null then
return
elseif(bcv[CGe]!=-1)then
return
endif
set bcv[CGe]=bbv
set bbv=CGe
endfunction
function kce takes nothing returns integer
local integer CGe=bvv
if(CGe!=0)then
set bvv=bxv[CGe]
else
set bev=bev+1
set CGe=bev
endif
if(CGe>8190)then
return 0
endif
set bxv[CGe]=-1
return CGe
endfunction
function kCe takes integer CGe returns nothing
if CGe==null then
return
elseif(bxv[CGe]!=-1)then
return
endif
set bxv[CGe]=bvv
set bvv=CGe
endfunction
function kde takes nothing returns integer
local integer CGe=NYv
if(CGe!=0)then
set NYv=NZv[CGe]
else
set Nzv=Nzv+1
set CGe=Nzv
endif
if(CGe>8190)then
return 0
endif
set NZv[CGe]=-1
return CGe
endfunction
function kDe takes integer CGe returns nothing
if CGe==null then
return
elseif(NZv[CGe]!=-1)then
return
endif
set NZv[CGe]=NYv
set NYv=CGe
endfunction
function kfe takes nothing returns integer
local integer CGe=NSv
if(CGe!=0)then
set NSv=NTv[CGe]
else
set Ntv=Ntv+1
set CGe=Ntv
endif
if(CGe>8190)then
return 0
endif
set NTv[CGe]=-1
return CGe
endfunction
function kFe takes integer CGe returns nothing
if CGe==null then
return
elseif(NTv[CGe]!=-1)then
return
endif
set NTv[CGe]=NSv
set NSv=CGe
endfunction
function kge takes nothing returns integer
local integer CGe=Nlv
if(CGe!=0)then
set Nlv=Nmv[CGe]
else
set NLv=NLv+1
set CGe=NLv
endif
if(CGe>8190)then
return 0
endif
set Nmv[CGe]=-1
return CGe
endfunction
function kGe takes integer CGe returns nothing
if CGe==null then
return
elseif(Nmv[CGe]!=-1)then
return
endif
set Nmv[CGe]=Nlv
set Nlv=CGe
endfunction
function khe takes nothing returns integer
local integer CGe=Nhv
if(CGe!=0)then
set Nhv=Njv[CGe]
else
set NHv=NHv+1
set CGe=NHv
endif
if(CGe>8190)then
return 0
endif
set Njv[CGe]=-1
return CGe
endfunction
function kHe takes integer CGe returns nothing
if CGe==null then
return
elseif(Njv[CGe]!=-1)then
return
endif
set Njv[CGe]=Nhv
set Nhv=CGe
endfunction
function kje takes nothing returns integer
local integer CGe=Ndv
if(CGe!=0)then
set Ndv=Nfv[CGe]
else
set NDv=NDv+1
set CGe=NDv
endif
if(CGe>8190)then
return 0
endif
set Nfv[CGe]=-1
return CGe
endfunction
function kJe takes integer CGe returns nothing
if CGe==null then
return
elseif(Nfv[CGe]!=-1)then
return
endif
set Nfv[CGe]=Ndv
set Ndv=CGe
endfunction
function kke takes nothing returns integer
local integer CGe=NIv
if(CGe!=0)then
set NIv=NNv[CGe]
else
set NAv=NAv+1
set CGe=NAv
endif
if(CGe>8190)then
return 0
endif
set NNv[CGe]=-1
return CGe
endfunction
function kKe takes integer CGe returns nothing
if CGe==null then
return
elseif(NNv[CGe]!=-1)then
return
endif
set NNv[CGe]=NIv
set NIv=CGe
endfunction
function kle takes nothing returns integer
local integer CGe=Nxv
if(CGe!=0)then
set Nxv=Nrv[CGe]
else
set Nov=Nov+1
set CGe=Nov
endif
if(CGe>8190)then
return 0
endif
set Nrv[CGe]=-1
return CGe
endfunction
function kLe takes integer CGe returns nothing
if CGe==null then
return
elseif(Nrv[CGe]!=-1)then
return
endif
set Nrv[CGe]=Nxv
set Nxv=CGe
endfunction
function kme takes nothing returns integer
local integer CGe=AYv
if(CGe!=0)then
set AYv=AZv[CGe]
else
set Azv=Azv+1
set CGe=Azv
endif
if(CGe>8190)then
return 0
endif
set AZv[CGe]=-1
return CGe
endfunction
function kMe takes integer CGe returns nothing
if CGe==null then
return
elseif(AZv[CGe]!=-1)then
return
endif
set AZv[CGe]=AYv
set AYv=CGe
endfunction
function kpe takes nothing returns integer
local integer CGe=ASv
if(CGe!=0)then
set ASv=ATv[CGe]
else
set Atv=Atv+1
set CGe=Atv
endif
if(CGe>8190)then
return 0
endif
set ATv[CGe]=-1
return CGe
endfunction
function kPe takes integer CGe returns nothing
if CGe==null then
return
elseif(ATv[CGe]!=-1)then
return
endif
set ATv[CGe]=ASv
set ASv=CGe
endfunction
function kqe takes nothing returns integer
local integer CGe=Akv
if(CGe!=0)then
set Akv=Alv[CGe]
else
set AKv=AKv+1
set CGe=AKv
endif
if(CGe>8190)then
return 0
endif
set Alv[CGe]=-1
return CGe
endfunction
function kQe takes integer CGe returns nothing
if CGe==null then
return
elseif(Alv[CGe]!=-1)then
return
endif
set Alv[CGe]=Akv
set Akv=CGe
endfunction
function kse takes nothing returns integer
local integer CGe=ABv
if(CGe!=0)then
set ABv=ACv[CGe]
else
set Acv=Acv+1
set CGe=Acv
endif
if(CGe>8190)then
return 0
endif
set ACv[CGe]=-1
return CGe
endfunction
function kSe takes integer CGe returns nothing
if CGe==null then
return
elseif(ACv[CGe]!=-1)then
return
endif
set ACv[CGe]=ABv
set ABv=CGe
endfunction
function kte takes nothing returns integer
local integer CGe=Avv
if(CGe!=0)then
set Avv=Axv[CGe]
else
set Aev=Aev+1
set CGe=Aev
endif
if(CGe>8190)then
return 0
endif
set Axv[CGe]=-1
return CGe
endfunction
function kTe takes integer CGe returns nothing
if CGe==null then
return
elseif(Axv[CGe]!=-1)then
return
endif
set Axv[CGe]=Avv
set Avv=CGe
endfunction
function kue takes nothing returns integer
local integer CGe=IYv
if(CGe!=0)then
set IYv=IZv[CGe]
else
set Izv=Izv+1
set CGe=Izv
endif
if(CGe>8190)then
return 0
endif
set IZv[CGe]=-1
return CGe
endfunction
function kUe takes integer CGe returns nothing
if CGe==null then
return
elseif(IZv[CGe]!=-1)then
return
endif
set IZv[CGe]=IYv
set IYv=CGe
endfunction
function kwe takes nothing returns integer
local integer CGe=IQv
if(CGe!=0)then
set IQv=ISv[CGe]
else
set Isv=Isv+1
set CGe=Isv
endif
if(CGe>8190)then
return 0
endif
set ISv[CGe]=-1
return CGe
endfunction
function kWe takes integer CGe returns nothing
if CGe==null then
return
elseif(ISv[CGe]!=-1)then
return
endif
set ISv[CGe]=IQv
set IQv=CGe
endfunction
function kye takes nothing returns integer
local integer CGe=Ikv
if(CGe!=0)then
set Ikv=Ilv[CGe]
else
set IKv=IKv+1
set CGe=IKv
endif
if(CGe>8190)then
return 0
endif
set Ilv[CGe]=-1
return CGe
endfunction
function kYe takes integer CGe returns nothing
if CGe==null then
return
elseif(Ilv[CGe]!=-1)then
return
endif
set Ilv[CGe]=Ikv
set Ikv=CGe
endfunction
function kze takes nothing returns integer
local integer CGe=ICv
if(CGe!=0)then
set ICv=IDv[CGe]
else
set Idv=Idv+1
set CGe=Idv
endif
if(CGe>8190)then
return 0
endif
set IDv[CGe]=-1
return CGe
endfunction
function kZe takes integer CGe returns nothing
if CGe==null then
return
elseif(IDv[CGe]!=-1)then
return
endif
set IDv[CGe]=ICv
set ICv=CGe
endfunction
function k_e takes nothing returns integer
local integer CGe=IIv
if(CGe!=0)then
set IIv=INv[CGe]
else
set IAv=IAv+1
set CGe=IAv
endif
if(CGe>8190)then
return 0
endif
set INv[CGe]=-1
return CGe
endfunction
function k0e takes integer CGe returns nothing
if CGe==null then
return
elseif(INv[CGe]!=-1)then
return
endif
set INv[CGe]=IIv
set IIv=CGe
endfunction
function k1e takes nothing returns integer
local integer CGe=IVv
if(CGe!=0)then
set IVv=IXv[CGe]
else
set IEv=IEv+1
set CGe=IEv
endif
if(CGe>8190)then
return 0
endif
set IXv[CGe]=-1
return CGe
endfunction
function k2e takes integer CGe returns nothing
if CGe==null then
return
elseif(IXv[CGe]!=-1)then
return
endif
set IXv[CGe]=IVv
set IVv=CGe
endfunction
function k3e takes nothing returns integer
local integer CGe=R4v
if(CGe!=0)then
set R4v=R6v[CGe]
else
set R5v=R5v+1
set CGe=R5v
endif
if(CGe>8190)then
return 0
endif
set R6v[CGe]=-1
return CGe
endfunction
function k4e takes integer CGe returns nothing
if CGe==null then
return
elseif(R6v[CGe]!=-1)then
return
endif
set R6v[CGe]=R4v
set R4v=CGe
endfunction
function k5e takes nothing returns integer
local integer CGe=R_v
if(CGe!=0)then
set R_v=R1v[CGe]
else
set R0v=R0v+1
set CGe=R0v
endif
if(CGe>8190)then
return 0
endif
set R1v[CGe]=-1
return CGe
endfunction
function k6e takes integer CGe returns nothing
if CGe==null then
return
elseif(R1v[CGe]!=-1)then
return
endif
set R1v[CGe]=R_v
set R_v=CGe
endfunction
function k7e takes nothing returns integer
local integer CGe=Rsv
if(CGe!=0)then
set Rsv=Rtv[CGe]
else
set RSv=RSv+1
set CGe=RSv
endif
if(CGe>8190)then
return 0
endif
set Rtv[CGe]=-1
return CGe
endfunction
function k8e takes integer CGe returns nothing
if CGe==null then
return
elseif(Rtv[CGe]!=-1)then
return
endif
set Rtv[CGe]=Rsv
set Rsv=CGe
endfunction
function k9e takes nothing returns integer
local integer CGe=RDv
if(CGe!=0)then
set RDv=RFv[CGe]
else
set Rfv=Rfv+1
set CGe=Rfv
endif
if(CGe>8190)then
return 0
endif
set RFv[CGe]=-1
return CGe
endfunction
function Kve takes integer CGe returns nothing
if CGe==null then
return
elseif(RFv[CGe]!=-1)then
return
endif
set RFv[CGe]=RDv
set RDv=CGe
endfunction
function Kee takes nothing returns integer
local integer CGe=RIv
if(CGe!=0)then
set RIv=RNv[CGe]
else
set RAv=RAv+1
set CGe=RAv
endif
if(CGe>8190)then
return 0
endif
set RNv[CGe]=-1
return CGe
endfunction
function Kxe takes integer CGe returns nothing
if CGe==null then
return
elseif(RNv[CGe]!=-1)then
return
endif
set RNv[CGe]=RIv
set RIv=CGe
endfunction
function Koe takes nothing returns integer
local integer CGe=Rev
if(CGe!=0)then
set Rev=Rov[CGe]
else
set Rxv=Rxv+1
set CGe=Rxv
endif
if(CGe>8190)then
return 0
endif
set Rov[CGe]=-1
return CGe
endfunction
function Kre takes integer CGe returns nothing
if CGe==null then
return
elseif(Rov[CGe]!=-1)then
return
endif
set Rov[CGe]=Rev
set Rev=CGe
endfunction
function Kie takes nothing returns integer
local integer CGe=O5v
if(CGe!=0)then
set O5v=O7v[CGe]
else
set O6v=O6v+1
set CGe=O6v
endif
if(CGe>8190)then
return 0
endif
set O7v[CGe]=-1
return CGe
endfunction
function Kae takes integer CGe returns nothing
if CGe==null then
return
elseif(O7v[CGe]!=-1)then
return
endif
set O7v[CGe]=O5v
set O5v=CGe
endfunction
function Kne takes nothing returns integer
local integer CGe=OYv
if(CGe!=0)then
set OYv=OZv[CGe]
else
set Ozv=Ozv+1
set CGe=Ozv
endif
if(CGe>8190)then
return 0
endif
set OZv[CGe]=-1
return CGe
endfunction
function KVe takes integer CGe returns nothing
if CGe==null then
return
elseif(OZv[CGe]!=-1)then
return
endif
set OZv[CGe]=OYv
set OYv=CGe
endfunction
function KEe takes nothing returns integer
local integer CGe=Osv
if(CGe!=0)then
set Osv=Otv[CGe]
else
set OSv=OSv+1
set CGe=OSv
endif
if(CGe>8190)then
return 0
endif
set Otv[CGe]=-1
return CGe
endfunction
function KXe takes integer CGe returns nothing
if CGe==null then
return
elseif(Otv[CGe]!=-1)then
return
endif
set Otv[CGe]=Osv
set Osv=CGe
endfunction
function KOe takes nothing returns integer
local integer CGe=OKv
if(CGe!=0)then
set OKv=OLv[CGe]
else
set Olv=Olv+1
set CGe=Olv
endif
if(CGe>8190)then
return 0
endif
set OLv[CGe]=-1
return CGe
endfunction
function KRe takes integer CGe returns nothing
if CGe==null then
return
elseif(OLv[CGe]!=-1)then
return
endif
set OLv[CGe]=OKv
set OKv=CGe
endfunction
function KIe takes nothing returns integer
local integer CGe=OGv
if(CGe!=0)then
set OGv=OHv[CGe]
else
set Ohv=Ohv+1
set CGe=Ohv
endif
if(CGe>8190)then
return 0
endif
set OHv[CGe]=-1
return CGe
endfunction
function KAe takes integer CGe returns nothing
if CGe==null then
return
elseif(OHv[CGe]!=-1)then
return
endif
set OHv[CGe]=OGv
set OGv=CGe
endfunction
function KNe takes nothing returns integer
local integer CGe=OBv
if(CGe!=0)then
set OBv=OCv[CGe]
else
set Ocv=Ocv+1
set CGe=Ocv
endif
if(CGe>8190)then
return 0
endif
set OCv[CGe]=-1
return CGe
endfunction
function Kbe takes integer CGe returns nothing
if CGe==null then
return
elseif(OCv[CGe]!=-1)then
return
endif
set OCv[CGe]=OBv
set OBv=CGe
endfunction
function KBe takes nothing returns integer
local integer CGe=OOv
if(CGe!=0)then
set OOv=OIv[CGe]
else
set ORv=ORv+1
set CGe=ORv
endif
if(CGe>8190)then
return 0
endif
set OIv[CGe]=-1
return CGe
endfunction
function Kce takes integer CGe returns nothing
if CGe==null then
return
elseif(OIv[CGe]!=-1)then
return
endif
set OIv[CGe]=OOv
set OOv=CGe
endfunction
function KCe takes nothing returns integer
local integer CGe=Oev
if(CGe!=0)then
set Oev=Oov[CGe]
else
set Oxv=Oxv+1
set CGe=Oxv
endif
if(CGe>8190)then
return 0
endif
set Oov[CGe]=-1
return CGe
endfunction
function Kde takes integer CGe returns nothing
if CGe==null then
return
elseif(Oov[CGe]!=-1)then
return
endif
set Oov[CGe]=Oev
set Oev=CGe
endfunction
function KDe takes nothing returns integer
local integer CGe=X5v
if(CGe!=0)then
set X5v=X7v[CGe]
else
set X6v=X6v+1
set CGe=X6v
endif
if(CGe>8190)then
return 0
endif
set X7v[CGe]=-1
return CGe
endfunction
function Kfe takes integer CGe returns nothing
if CGe==null then
return
elseif(X7v[CGe]!=-1)then
return
endif
set X7v[CGe]=X5v
set X5v=CGe
endfunction
function KFe takes nothing returns integer
local integer CGe=XWv
if(CGe!=0)then
set XWv=XYv[CGe]
else
set Xyv=Xyv+1
set CGe=Xyv
endif
if(CGe>8190)then
return 0
endif
set XYv[CGe]=-1
return CGe
endfunction
function Kge takes integer CGe returns nothing
if CGe==null then
return
elseif(XYv[CGe]!=-1)then
return
endif
set XYv[CGe]=XWv
set XWv=CGe
endfunction
function KGe takes nothing returns integer
local integer CGe=XSv
if(CGe!=0)then
set XSv=XTv[CGe]
else
set Xtv=Xtv+1
set CGe=Xtv
endif
if(CGe>8190)then
return 0
endif
set XTv[CGe]=-1
return CGe
endfunction
function Khe takes integer CGe returns nothing
if CGe==null then
return
elseif(XTv[CGe]!=-1)then
return
endif
set XTv[CGe]=XSv
set XSv=CGe
endfunction
function KHe takes nothing returns integer
local integer CGe=Xjv
if(CGe!=0)then
set Xjv=Xkv[CGe]
else
set XJv=XJv+1
set CGe=XJv
endif
if(CGe>8190)then
return 0
endif
set Xkv[CGe]=-1
return CGe
endfunction
function Kje takes integer CGe returns nothing
if CGe==null then
return
elseif(Xkv[CGe]!=-1)then
return
endif
set Xkv[CGe]=Xjv
set Xjv=CGe
endfunction
function KJe takes nothing returns integer
local integer CGe=XDv
if(CGe!=0)then
set XDv=XFv[CGe]
else
set Xfv=Xfv+1
set CGe=Xfv
endif
if(CGe>8190)then
return 0
endif
set XFv[CGe]=-1
return CGe
endfunction
function Kke takes integer CGe returns nothing
if CGe==null then
return
elseif(XFv[CGe]!=-1)then
return
endif
set XFv[CGe]=XDv
set XDv=CGe
endfunction
function KKe takes nothing returns integer
local integer CGe=XEv
if(CGe!=0)then
set XEv=XOv[CGe]
else
set XXv=XXv+1
set CGe=XXv
endif
if(CGe>8190)then
return 0
endif
set XOv[CGe]=-1
return CGe
endfunction
function Kle takes integer CGe returns nothing
if CGe==null then
return
elseif(XOv[CGe]!=-1)then
return
endif
set XOv[CGe]=XEv
set XEv=CGe
endfunction
function KLe takes nothing returns integer
local integer CGe=E7v
if(CGe!=0)then
set E7v=E9v[CGe]
else
set E8v=E8v+1
set CGe=E8v
endif
if(CGe>8190)then
return 0
endif
set E9v[CGe]=-1
return CGe
endfunction
function Kme takes integer CGe returns nothing
if CGe==null then
return
elseif(E9v[CGe]!=-1)then
return
endif
set E9v[CGe]=E7v
set E7v=CGe
endfunction
function KMe takes nothing returns integer
local integer CGe=E1v
if(CGe!=0)then
set E1v=E3v[CGe]
else
set E2v=E2v+1
set CGe=E2v
endif
if(CGe>8190)then
return 0
endif
set E3v[CGe]=-1
return CGe
endfunction
function Kpe takes integer CGe returns nothing
if CGe==null then
return
elseif(E3v[CGe]!=-1)then
return
endif
set E3v[CGe]=E1v
set E1v=CGe
endfunction
function KPe takes nothing returns integer
local integer CGe=Etv
if(CGe!=0)then
set Etv=Euv[CGe]
else
set ETv=ETv+1
set CGe=ETv
endif
if(CGe>8190)then
return 0
endif
set Euv[CGe]=-1
return CGe
endfunction
function Kqe takes integer CGe returns nothing
if CGe==null then
return
elseif(Euv[CGe]!=-1)then
return
endif
set Euv[CGe]=Etv
set Etv=CGe
endfunction
function KQe takes nothing returns integer
local integer CGe=Emv
if(CGe!=0)then
set Emv=Epv[CGe]
else
set EMv=EMv+1
set CGe=EMv
endif
if(CGe>8190)then
return 0
endif
set Epv[CGe]=-1
return CGe
endfunction
function Kse takes integer CGe returns nothing
if CGe==null then
return
elseif(Epv[CGe]!=-1)then
return
endif
set Epv[CGe]=Emv
set Emv=CGe
endfunction
function KSe takes nothing returns integer
local integer CGe=EHv
if(CGe!=0)then
set EHv=EJv[CGe]
else
set Ejv=Ejv+1
set CGe=Ejv
endif
if(CGe>8190)then
return 0
endif
set EJv[CGe]=-1
return CGe
endfunction
function Kte takes integer CGe returns nothing
if CGe==null then
return
elseif(EJv[CGe]!=-1)then
return
endif
set EJv[CGe]=EHv
set EHv=CGe
endfunction
function KTe takes nothing returns integer
local integer CGe=ENv
if(CGe!=0)then
set ENv=EBv[CGe]
else
set Ebv=Ebv+1
set CGe=Ebv
endif
if(CGe>8190)then
return 0
endif
set EBv[CGe]=-1
return CGe
endfunction
function Kue takes integer CGe returns nothing
if CGe==null then
return
elseif(EBv[CGe]!=-1)then
return
endif
set EBv[CGe]=ENv
set ENv=CGe
endfunction
function KUe takes nothing returns integer
local integer CGe=EXv
if(CGe!=0)then
set EXv=ERv[CGe]
else
set EOv=EOv+1
set CGe=EOv
endif
if(CGe>8190)then
return 0
endif
set ERv[CGe]=-1
return CGe
endfunction
function Kwe takes integer CGe returns nothing
if CGe==null then
return
elseif(ERv[CGe]!=-1)then
return
endif
set ERv[CGe]=EXv
set EXv=CGe
endfunction
function KWe takes nothing returns integer
local integer CGe=Exv
if(CGe!=0)then
set Exv=Erv[CGe]
else
set Eov=Eov+1
set CGe=Eov
endif
if(CGe>8190)then
return 0
endif
set Erv[CGe]=-1
return CGe
endfunction
function Kye takes integer CGe returns nothing
if CGe==null then
return
elseif(Erv[CGe]!=-1)then
return
endif
set Erv[CGe]=Exv
set Exv=CGe
endfunction
function KYe takes nothing returns integer
local integer CGe=V4v
if(CGe!=0)then
set V4v=V6v[CGe]
else
set V5v=V5v+1
set CGe=V5v
endif
if(CGe>8190)then
return 0
endif
set V6v[CGe]=-1
return CGe
endfunction
function Kze takes integer CGe returns nothing
if CGe==null then
return
elseif(V6v[CGe]!=-1)then
return
endif
set V6v[CGe]=V4v
set V4v=CGe
endfunction
function KZe takes nothing returns integer
local integer CGe=VTv
if(CGe!=0)then
set VTv=VUv[CGe]
else
set Vuv=Vuv+1
set CGe=Vuv
endif
if(CGe>8190)then
return 0
endif
set VUv[CGe]=-1
return CGe
endfunction
function K_e takes integer CGe returns nothing
if CGe==null then
return
elseif(VUv[CGe]!=-1)then
return
endif
set VUv[CGe]=VTv
set VTv=CGe
endfunction
function K0e takes nothing returns integer
local integer CGe=Vhv
if(CGe!=0)then
set Vhv=Vjv[CGe]
else
set VHv=VHv+1
set CGe=VHv
endif
if(CGe>8190)then
return 0
endif
set Vjv[CGe]=-1
return CGe
endfunction
function K1e takes integer CGe returns nothing
if CGe==null then
return
elseif(Vjv[CGe]!=-1)then
return
endif
set Vjv[CGe]=Vhv
set Vhv=CGe
endfunction
function K2e takes nothing returns integer
local integer CGe=Vcv
if(CGe!=0)then
set Vcv=Vdv[CGe]
else
set VCv=VCv+1
set CGe=VCv
endif
if(CGe>8190)then
return 0
endif
set Vdv[CGe]=-1
return CGe
endfunction
function K3e takes integer CGe returns nothing
if CGe==null then
return
elseif(Vdv[CGe]!=-1)then
return
endif
set Vdv[CGe]=Vcv
set Vcv=CGe
endfunction
function K4e takes nothing returns integer
local integer CGe=VOv
if(CGe!=0)then
set VOv=VIv[CGe]
else
set VRv=VRv+1
set CGe=VRv
endif
if(CGe>8190)then
return 0
endif
set VIv[CGe]=-1
return CGe
endfunction
function K5e takes integer CGe returns nothing
if CGe==null then
return
elseif(VIv[CGe]!=-1)then
return
endif
set VIv[CGe]=VOv
set VOv=CGe
endfunction
function K6e takes nothing returns integer
local integer CGe=Vxv
if(CGe!=0)then
set Vxv=Vrv[CGe]
else
set Vov=Vov+1
set CGe=Vov
endif
if(CGe>8190)then
return 0
endif
set Vrv[CGe]=-1
return CGe
endfunction
function K7e takes integer CGe returns nothing
if CGe==null then
return
elseif(Vrv[CGe]!=-1)then
return
endif
set Vrv[CGe]=Vxv
set Vxv=CGe
endfunction
function K8e takes nothing returns integer
local integer CGe=nZv
if(CGe!=0)then
set nZv=n0v[CGe]
else
set n_v=n_v+1
set CGe=n_v
endif
if(CGe>8190)then
return 0
endif
set n0v[CGe]=-1
return CGe
endfunction
function K9e takes integer CGe returns nothing
if CGe==null then
return
elseif(n0v[CGe]!=-1)then
return
endif
set n0v[CGe]=nZv
set nZv=CGe
endfunction
function lve takes nothing returns integer
local integer CGe=ntv
if(CGe!=0)then
set ntv=nuv[CGe]
else
set nTv=nTv+1
set CGe=nTv
endif
if(CGe>8190)then
return 0
endif
set nuv[CGe]=-1
return CGe
endfunction
function lee takes integer CGe returns nothing
if CGe==null then
return
elseif(nuv[CGe]!=-1)then
return
endif
set nuv[CGe]=ntv
set ntv=CGe
endfunction
function lxe takes nothing returns integer
local integer CGe=nLv
if(CGe!=0)then
set nLv=nMv[CGe]
else
set nmv=nmv+1
set CGe=nmv
endif
if(CGe>8190)then
return 0
endif
set nMv[CGe]=-1
return CGe
endfunction
function loe takes integer CGe returns nothing
if CGe==null then
return
elseif(nMv[CGe]!=-1)then
return
endif
set nMv[CGe]=nLv
set nLv=CGe
endfunction
function lre takes nothing returns integer
local integer CGe=nDv
if(CGe!=0)then
set nDv=nFv[CGe]
else
set nfv=nfv+1
set CGe=nfv
endif
if(CGe>8190)then
return 0
endif
set nFv[CGe]=-1
return CGe
endfunction
function lie takes integer CGe returns nothing
if CGe==null then
return
elseif(nFv[CGe]!=-1)then
return
endif
set nFv[CGe]=nDv
set nDv=CGe
endfunction
function lae takes nothing returns integer
local integer CGe=nEv
if(CGe!=0)then
set nEv=nOv[CGe]
else
set nXv=nXv+1
set CGe=nXv
endif
if(CGe>8190)then
return 0
endif
set nOv[CGe]=-1
return CGe
endfunction
function lne takes integer CGe returns nothing
if CGe==null then
return
elseif(nOv[CGe]!=-1)then
return
endif
set nOv[CGe]=nEv
set nEv=CGe
endfunction
function lVe takes nothing returns integer
local integer CGe=nvv
if(CGe!=0)then
set nvv=nxv[CGe]
else
set nev=nev+1
set CGe=nev
endif
if(CGe>8190)then
return 0
endif
set nxv[CGe]=-1
return CGe
endfunction
function lEe takes integer CGe returns nothing
if CGe==null then
return
elseif(nxv[CGe]!=-1)then
return
endif
set nxv[CGe]=nvv
set nvv=CGe
endfunction
function lXe takes nothing returns integer
local integer CGe=a3v
if(CGe!=0)then
set a3v=a5v[CGe]
else
set a4v=a4v+1
set CGe=a4v
endif
if(CGe>8190)then
return 0
endif
set a5v[CGe]=-1
return CGe
endfunction
function lOe takes integer CGe returns nothing
if CGe==null then
return
elseif(a5v[CGe]!=-1)then
return
endif
set a5v[CGe]=a3v
set a3v=CGe
endfunction
function lRe takes nothing returns integer
local integer CGe=aTv
if(CGe!=0)then
set aTv=aUv[CGe]
else
set auv=auv+1
set CGe=auv
endif
if(CGe>8190)then
return 0
endif
set aUv[CGe]=-1
return CGe
endfunction
function lIe takes integer CGe returns nothing
if CGe==null then
return
elseif(aUv[CGe]!=-1)then
return
endif
set aUv[CGe]=aTv
set aTv=CGe
endfunction
function lAe takes nothing returns integer
local integer CGe=aPv
if(CGe!=0)then
set aPv=aQv[CGe]
else
set aqv=aqv+1
set CGe=aqv
endif
if(CGe>8190)then
return 0
endif
set aQv[CGe]=-1
return CGe
endfunction
function lNe takes integer CGe returns nothing
if CGe==null then
return
elseif(aQv[CGe]!=-1)then
return
endif
set aQv[CGe]=aPv
set aPv=CGe
endfunction
function lbe takes nothing returns integer
local integer CGe=aGv
if(CGe!=0)then
set aGv=aHv[CGe]
else
set ahv=ahv+1
set CGe=ahv
endif
if(CGe>8190)then
return 0
endif
set aHv[CGe]=-1
return CGe
endfunction
function lBe takes integer CGe returns nothing
if CGe==null then
return
elseif(aHv[CGe]!=-1)then
return
endif
set aHv[CGe]=aGv
set aGv=CGe
endfunction
function lce takes nothing returns integer
local integer CGe=aAv
if(CGe!=0)then
set aAv=abv[CGe]
else
set aNv=aNv+1
set CGe=aNv
endif
if(CGe>8190)then
return 0
endif
set abv[CGe]=-1
return CGe
endfunction
function lCe takes integer CGe returns nothing
if CGe==null then
return
elseif(abv[CGe]!=-1)then
return
endif
set abv[CGe]=aAv
set aAv=CGe
endfunction
function lde takes nothing returns integer
local integer CGe=axv
if(CGe!=0)then
set axv=arv[CGe]
else
set aov=aov+1
set CGe=aov
endif
if(CGe>8190)then
return 0
endif
set arv[CGe]=-1
return CGe
endfunction
function lDe takes integer CGe returns nothing
if CGe==null then
return
elseif(arv[CGe]!=-1)then
return
endif
set arv[CGe]=axv
set axv=CGe
endfunction
function lfe takes nothing returns integer
local integer CGe=i2v
if(CGe!=0)then
set i2v=i4v[CGe]
else
set i3v=i3v+1
set CGe=i3v
endif
if(CGe>8190)then
return 0
endif
set i4v[CGe]=-1
return CGe
endfunction
function lFe takes integer CGe returns nothing
if CGe==null then
return
elseif(i4v[CGe]!=-1)then
return
endif
set i4v[CGe]=i2v
set i2v=CGe
endfunction
function lge takes nothing returns integer
local integer CGe=iQv
if(CGe!=0)then
set iQv=iSv[CGe]
else
set isv=isv+1
set CGe=isv
endif
if(CGe>8190)then
return 0
endif
set iSv[CGe]=-1
return CGe
endfunction
function lGe takes integer CGe returns nothing
if CGe==null then
return
elseif(iSv[CGe]!=-1)then
return
endif
set iSv[CGe]=iQv
set iQv=CGe
endfunction
function lhe takes nothing returns integer
local integer CGe=iLv
if(CGe!=0)then
set iLv=iMv[CGe]
else
set imv=imv+1
set CGe=imv
endif
if(CGe>8190)then
return 0
endif
set iMv[CGe]=-1
return CGe
endfunction
function lHe takes integer CGe returns nothing
if CGe==null then
return
elseif(iMv[CGe]!=-1)then
return
endif
set iMv[CGe]=iLv
set iLv=CGe
endfunction
function lje takes nothing returns integer
local integer CGe=iGv
if(CGe!=0)then
set iGv=iHv[CGe]
else
set ihv=ihv+1
set CGe=ihv
endif
if(CGe>8190)then
return 0
endif
set iHv[CGe]=-1
return CGe
endfunction
function lJe takes integer CGe returns nothing
if CGe==null then
return
elseif(iHv[CGe]!=-1)then
return
endif
set iHv[CGe]=iGv
set iGv=CGe
endfunction
function lke takes nothing returns integer
local integer CGe=iBv
if(CGe!=0)then
set iBv=iCv[CGe]
else
set icv=icv+1
set CGe=icv
endif
if(CGe>8190)then
return 0
endif
set iCv[CGe]=-1
return CGe
endfunction
function lKe takes integer CGe returns nothing
if CGe==null then
return
elseif(iCv[CGe]!=-1)then
return
endif
set iCv[CGe]=iBv
set iBv=CGe
endfunction
function lle takes nothing returns integer
local integer CGe=iOv
if(CGe!=0)then
set iOv=iIv[CGe]
else
set iRv=iRv+1
set CGe=iRv
endif
if(CGe>8190)then
return 0
endif
set iIv[CGe]=-1
return CGe
endfunction
function lLe takes integer CGe returns nothing
if CGe==null then
return
elseif(iIv[CGe]!=-1)then
return
endif
set iIv[CGe]=iOv
set iOv=CGe
endfunction
function lme takes nothing returns integer
local integer CGe=r9v
if(CGe!=0)then
set r9v=iev[CGe]
else
set ivv=ivv+1
set CGe=ivv
endif
if(CGe>8190)then
return 0
endif
set iev[CGe]=-1
return CGe
endfunction
function lMe takes integer CGe returns nothing
if CGe==null then
return
elseif(iev[CGe]!=-1)then
return
endif
set iev[CGe]=r9v
set r9v=CGe
endfunction
function lpe takes nothing returns integer
local integer CGe=r4v
if(CGe!=0)then
set r4v=r6v[CGe]
else
set r5v=r5v+1
set CGe=r5v
endif
if(CGe>8190)then
return 0
endif
set r6v[CGe]=-1
return CGe
endfunction
function lPe takes integer CGe returns nothing
if CGe==null then
return
elseif(r6v[CGe]!=-1)then
return
endif
set r6v[CGe]=r4v
set r4v=CGe
endfunction
function lqe takes nothing returns integer
local integer CGe=ryv
if(CGe!=0)then
set ryv=rzv[CGe]
else
set rYv=rYv+1
set CGe=rYv
endif
if(CGe>8190)then
return 0
endif
set rzv[CGe]=-1
return CGe
endfunction
function lQe takes integer CGe returns nothing
if CGe==null then
return
elseif(rzv[CGe]!=-1)then
return
endif
set rzv[CGe]=ryv
set ryv=CGe
endfunction
function lse takes nothing returns integer
local integer CGe=rSv
if(CGe!=0)then
set rSv=rTv[CGe]
else
set rtv=rtv+1
set CGe=rtv
endif
if(CGe>8190)then
return 0
endif
set rTv[CGe]=-1
return CGe
endfunction
function lSe takes integer CGe returns nothing
if CGe==null then
return
elseif(rTv[CGe]!=-1)then
return
endif
set rTv[CGe]=rSv
set rSv=CGe
endfunction
function lte takes nothing returns integer
local integer CGe=rlv
if(CGe!=0)then
set rlv=rmv[CGe]
else
set rLv=rLv+1
set CGe=rLv
endif
if(CGe>8190)then
return 0
endif
set rmv[CGe]=-1
return CGe
endfunction
function lTe takes integer CGe returns nothing
if CGe==null then
return
elseif(rmv[CGe]!=-1)then
return
endif
set rmv[CGe]=rlv
set rlv=CGe
endfunction
function lue takes nothing returns integer
local integer CGe=rHv
if(CGe!=0)then
set rHv=rJv[CGe]
else
set rjv=rjv+1
set CGe=rjv
endif
if(CGe>8190)then
return 0
endif
set rJv[CGe]=-1
return CGe
endfunction
function lUe takes integer CGe returns nothing
if CGe==null then
return
elseif(rJv[CGe]!=-1)then
return
endif
set rJv[CGe]=rHv
set rHv=CGe
endfunction
function lwe takes nothing returns integer
local integer CGe=rcv
if(CGe!=0)then
set rcv=rdv[CGe]
else
set rCv=rCv+1
set CGe=rCv
endif
if(CGe>8190)then
return 0
endif
set rdv[CGe]=-1
return CGe
endfunction
function lWe takes integer CGe returns nothing
if CGe==null then
return
elseif(rdv[CGe]!=-1)then
return
endif
set rdv[CGe]=rcv
set rcv=CGe
endfunction
function lye takes nothing returns integer
local integer CGe=rXv
if(CGe!=0)then
set rXv=rRv[CGe]
else
set rOv=rOv+1
set CGe=rOv
endif
if(CGe>8190)then
return 0
endif
set rRv[CGe]=-1
return CGe
endfunction
function lYe takes integer CGe returns nothing
if CGe==null then
return
elseif(rRv[CGe]!=-1)then
return
endif
set rRv[CGe]=rXv
set rXv=CGe
endfunction
function lze takes nothing returns integer
local integer CGe=o8v
if(CGe!=0)then
set o8v=rvv[CGe]
else
set o9v=o9v+1
set CGe=o9v
endif
if(CGe>8190)then
return 0
endif
set rvv[CGe]=-1
return CGe
endfunction
function lZe takes integer CGe returns nothing
if CGe==null then
return
elseif(rvv[CGe]!=-1)then
return
endif
set rvv[CGe]=o8v
set o8v=CGe
endfunction
function l_e takes nothing returns integer
local integer CGe=o_v
if(CGe!=0)then
set o_v=o1v[CGe]
else
set o0v=o0v+1
set CGe=o0v
endif
if(CGe>8190)then
return 0
endif
set o1v[CGe]=-1
return CGe
endfunction
function l0e takes integer CGe returns nothing
if CGe==null then
return
elseif(o1v[CGe]!=-1)then
return
endif
set o1v[CGe]=o_v
set o_v=CGe
endfunction
function l1e takes nothing returns integer
local integer CGe=opv
if(CGe!=0)then
set opv=oqv[CGe]
else
set oPv=oPv+1
set CGe=oPv
endif
if(CGe>8190)then
return 0
endif
set oqv[CGe]=-1
return CGe
endfunction
function l2e takes integer CGe returns nothing
if CGe==null then
return
elseif(oqv[CGe]!=-1)then
return
endif
set oqv[CGe]=opv
set opv=CGe
endfunction
function l3e takes nothing returns integer
local integer CGe=oJv
if(CGe!=0)then
set oJv=oKv[CGe]
else
set okv=okv+1
set CGe=okv
endif
if(CGe>8190)then
return 0
endif
set oKv[CGe]=-1
return CGe
endfunction
function l4e takes integer CGe returns nothing
if CGe==null then
return
elseif(oKv[CGe]!=-1)then
return
endif
set oKv[CGe]=oJv
set oJv=CGe
endfunction
function l5e takes nothing returns integer
local integer CGe=oFv
if(CGe!=0)then
set oFv=oGv[CGe]
else
set ogv=ogv+1
set CGe=ogv
endif
if(CGe>8190)then
return 0
endif
set oGv[CGe]=-1
return CGe
endfunction
function l6e takes integer CGe returns nothing
if CGe==null then
return
elseif(oGv[CGe]!=-1)then
return
endif
set oGv[CGe]=oFv
set oFv=CGe
endfunction
function l7e takes nothing returns integer
local integer CGe=obv
if(CGe!=0)then
set obv=ocv[CGe]
else
set oBv=oBv+1
set CGe=oBv
endif
if(CGe>8190)then
return 0
endif
set ocv[CGe]=-1
return CGe
endfunction
function l8e takes integer CGe returns nothing
if CGe==null then
return
elseif(ocv[CGe]!=-1)then
return
endif
set ocv[CGe]=obv
set obv=CGe
endfunction
function l9e takes nothing returns integer
local integer CGe=orv
if(CGe!=0)then
set orv=oav[CGe]
else
set oiv=oiv+1
set CGe=oiv
endif
if(CGe>8190)then
return 0
endif
set oav[CGe]=-1
return CGe
endfunction
function Lve takes integer CGe returns nothing
if CGe==null then
return
elseif(oav[CGe]!=-1)then
return
endif
set oav[CGe]=orv
set orv=CGe
endfunction
function Lee takes nothing returns integer
local integer CGe=x8v
if(CGe!=0)then
set x8v=ovv[CGe]
else
set x9v=x9v+1
set CGe=x9v
endif
if(CGe>8190)then
return 0
endif
set ovv[CGe]=-1
return CGe
endfunction
function Lxe takes integer CGe returns nothing
if CGe==null then
return
elseif(ovv[CGe]!=-1)then
return
endif
set ovv[CGe]=x8v
set x8v=CGe
endfunction
function Loe takes nothing returns integer
local integer CGe=x_v
if(CGe!=0)then
set x_v=x1v[CGe]
else
set x0v=x0v+1
set CGe=x0v
endif
if(CGe>8190)then
return 0
endif
set x1v[CGe]=-1
return CGe
endfunction
function Lre takes integer CGe returns nothing
if CGe==null then
return
elseif(x1v[CGe]!=-1)then
return
endif
set x1v[CGe]=x_v
set x_v=CGe
endfunction
function Lie takes nothing returns integer
local integer CGe=xuv
if(CGe!=0)then
set xuv=xwv[CGe]
else
set xUv=xUv+1
set CGe=xUv
endif
if(CGe>8190)then
return 0
endif
set xwv[CGe]=-1
return CGe
endfunction
function Lae takes integer CGe returns nothing
if CGe==null then
return
elseif(xwv[CGe]!=-1)then
return
endif
set xwv[CGe]=xuv
set xuv=CGe
endfunction
function Lne takes nothing returns integer
local integer CGe=xlv
if(CGe!=0)then
set xlv=xmv[CGe]
else
set xLv=xLv+1
set CGe=xLv
endif
if(CGe>8190)then
return 0
endif
set xmv[CGe]=-1
return CGe
endfunction
function LVe takes integer CGe returns nothing
if CGe==null then
return
elseif(xmv[CGe]!=-1)then
return
endif
set xmv[CGe]=xlv
set xlv=CGe
endfunction
function LEe takes nothing returns integer
local integer CGe=xdv
if(CGe!=0)then
set xdv=xfv[CGe]
else
set xDv=xDv+1
set CGe=xDv
endif
if(CGe>8190)then
return 0
endif
set xfv[CGe]=-1
return CGe
endfunction
function LXe takes integer CGe returns nothing
if CGe==null then
return
elseif(xfv[CGe]!=-1)then
return
endif
set xfv[CGe]=xdv
set xdv=CGe
endfunction
function LOe takes nothing returns integer
local integer CGe=xXv
if(CGe!=0)then
set xXv=xRv[CGe]
else
set xOv=xOv+1
set CGe=xOv
endif
if(CGe>8190)then
return 0
endif
set xRv[CGe]=-1
return CGe
endfunction
function LRe takes integer CGe returns nothing
if CGe==null then
return
elseif(xRv[CGe]!=-1)then
return
endif
set xRv[CGe]=xXv
set xXv=CGe
endfunction
function LIe takes nothing returns integer
local integer CGe=xov
if(CGe!=0)then
set xov=xiv[CGe]
else
set xrv=xrv+1
set CGe=xrv
endif
if(CGe>8190)then
return 0
endif
set xiv[CGe]=-1
return CGe
endfunction
function LAe takes integer CGe returns nothing
if CGe==null then
return
elseif(xiv[CGe]!=-1)then
return
endif
set xiv[CGe]=xov
set xov=CGe
endfunction
function LNe takes nothing returns integer
local integer CGe=e2v
if(CGe!=0)then
set e2v=e4v[CGe]
else
set e3v=e3v+1
set CGe=e3v
endif
if(CGe>8190)then
return 0
endif
set e4v[CGe]=-1
return CGe
endfunction
function Lbe takes integer CGe returns nothing
if CGe==null then
return
elseif(e4v[CGe]!=-1)then
return
endif
set e4v[CGe]=e2v
set e2v=CGe
endfunction
function LBe takes nothing returns integer
local integer CGe=eQv
if(CGe!=0)then
set eQv=eSv[CGe]
else
set esv=esv+1
set CGe=esv
endif
if(CGe>8190)then
return 0
endif
set eSv[CGe]=-1
return CGe
endfunction
function Lce takes integer CGe returns nothing
if CGe==null then
return
elseif(eSv[CGe]!=-1)then
return
endif
set eSv[CGe]=eQv
set eQv=CGe
endfunction
function LCe takes nothing returns integer
local integer CGe=eHv
if(CGe!=0)then
set eHv=eJv[CGe]
else
set ejv=ejv+1
set CGe=ejv
endif
if(CGe>8190)then
return 0
endif
set eJv[CGe]=-1
return CGe
endfunction
function Lde takes integer CGe returns nothing
if CGe==null then
return
elseif(eJv[CGe]!=-1)then
return
endif
set eJv[CGe]=eHv
set eHv=CGe
endfunction
function LDe takes nothing returns integer
local integer CGe=ecv
if(CGe!=0)then
set ecv=edv[CGe]
else
set eCv=eCv+1
set CGe=eCv
endif
if(CGe>8190)then
return 0
endif
set edv[CGe]=-1
return CGe
endfunction
function Lfe takes integer CGe returns nothing
if CGe==null then
return
elseif(edv[CGe]!=-1)then
return
endif
set edv[CGe]=ecv
set ecv=CGe
endfunction
function LFe takes nothing returns integer
local integer CGe=eXv
if(CGe!=0)then
set eXv=eRv[CGe]
else
set eOv=eOv+1
set CGe=eOv
endif
if(CGe>8190)then
return 0
endif
set eRv[CGe]=-1
return CGe
endfunction
function Lge takes integer CGe returns nothing
if CGe==null then
return
elseif(eRv[CGe]!=-1)then
return
endif
set eRv[CGe]=eXv
set eXv=CGe
endfunction
function LGe takes nothing returns integer
local integer CGe=eov
if(CGe!=0)then
set eov=eiv[CGe]
else
set erv=erv+1
set CGe=erv
endif
if(CGe>8190)then
return 0
endif
set eiv[CGe]=-1
return CGe
endfunction
function Lhe takes integer CGe returns nothing
if CGe==null then
return
elseif(eiv[CGe]!=-1)then
return
endif
set eiv[CGe]=eov
set eov=CGe
endfunction
function LHe takes nothing returns integer
local integer CGe=v0v
if(CGe!=0)then
set v0v=v2v[CGe]
else
set v1v=v1v+1
set CGe=v1v
endif
if(CGe>8190)then
return 0
endif
set v2v[CGe]=-1
return CGe
endfunction
function Lje takes integer CGe returns nothing
if CGe==null then
return
elseif(v2v[CGe]!=-1)then
return
endif
set v2v[CGe]=v0v
set v0v=CGe
endfunction
function LJe takes nothing returns integer
local integer CGe=vwv
if(CGe!=0)then
set vwv=vyv[CGe]
else
set vWv=vWv+1
set CGe=vWv
endif
if(CGe>8190)then
return 0
endif
set vyv[CGe]=-1
return CGe
endfunction
function Lke takes integer CGe returns nothing
if CGe==null then
return
elseif(vyv[CGe]!=-1)then
return
endif
set vyv[CGe]=vwv
set vwv=CGe
endfunction
function LKe takes nothing returns integer
local integer CGe=vJv
if(CGe!=0)then
set vJv=vKv[CGe]
else
set vkv=vkv+1
set CGe=vkv
endif
if(CGe>8190)then
return 0
endif
set vKv[CGe]=-1
return CGe
endfunction
function Lle takes integer CGe returns nothing
if CGe==null then
return
elseif(vKv[CGe]!=-1)then
return
endif
set vKv[CGe]=vJv
set vJv=CGe
endfunction
function LLe takes nothing returns integer
local integer CGe=vDv
if(CGe!=0)then
set vDv=vFv[CGe]
else
set vfv=vfv+1
set CGe=vfv
endif
if(CGe>8190)then
return 0
endif
set vFv[CGe]=-1
return CGe
endfunction
function Lme takes integer CGe returns nothing
if CGe==null then
return
elseif(vFv[CGe]!=-1)then
return
endif
set vFv[CGe]=vDv
set vDv=CGe
endfunction
function LMe takes nothing returns integer
local integer CGe=vVv
if(CGe!=0)then
set vVv=vXv[CGe]
else
set vEv=vEv+1
set CGe=vEv
endif
if(CGe>8190)then
return 0
endif
set vXv[CGe]=-1
return CGe
endfunction
function Lpe takes integer CGe returns nothing
if CGe==null then
return
elseif(vXv[CGe]!=-1)then
return
endif
set vXv[CGe]=vVv
set vVv=CGe
endfunction
function LPe takes nothing returns integer
local integer CGe=u8
if(CGe!=0)then
set u8=w8[CGe]
else
set U8=U8+1
set CGe=U8
endif
if(CGe>8190)then
return 0
endif
set w8[CGe]=-1
return CGe
endfunction
function Lqe takes integer CGe returns nothing
if CGe==null then
return
elseif(w8[CGe]!=-1)then
return
endif
set w8[CGe]=u8
set u8=CGe
endfunction
function LQe takes nothing returns integer
local integer CGe=l8
if(CGe!=0)then
set l8=m8[CGe]
else
set L8=L8+1
set CGe=L8
endif
if(CGe>8190)then
return 0
endif
set m8[CGe]=-1
return CGe
endfunction
function Lse takes integer CGe returns nothing
if CGe==null then
return
elseif(m8[CGe]!=-1)then
return
endif
set m8[CGe]=l8
set l8=CGe
endfunction
function LSe takes nothing returns integer
local integer CGe=G8
if(CGe!=0)then
set G8=H8[CGe]
else
set h8=h8+1
set CGe=h8
endif
if(CGe>8190)then
return 0
endif
set H8[CGe]=-1
return CGe
endfunction
function Lte takes integer CGe returns nothing
if CGe==null then
return
elseif(H8[CGe]!=-1)then
return
endif
set H8[CGe]=G8
set G8=CGe
endfunction
function LTe takes nothing returns integer
local integer CGe=B8
if(CGe!=0)then
set B8=C8[CGe]
else
set c8=c8+1
set CGe=c8
endif
if(CGe>8190)then
return 0
endif
set C8[CGe]=-1
return CGe
endfunction
function Lue takes integer CGe returns nothing
if CGe==null then
return
elseif(C8[CGe]!=-1)then
return
endif
set C8[CGe]=B8
set B8=CGe
endfunction
function LUe takes nothing returns integer
local integer CGe=X8
if(CGe!=0)then
set X8=R8[CGe]
else
set O8=O8+1
set CGe=O8
endif
if(CGe>8190)then
return 0
endif
set R8[CGe]=-1
return CGe
endfunction
function Lwe takes integer CGe returns nothing
if CGe==null then
return
elseif(R8[CGe]!=-1)then
return
endif
set R8[CGe]=X8
set X8=CGe
endfunction
function LWe takes nothing returns integer
local integer CGe=Z7
if(CGe!=0)then
set Z7=e8[CGe]
else
set v8=v8+1
set CGe=v8
endif
if(CGe>8190)then
return 0
endif
set e8[CGe]=-1
return CGe
endfunction
function Lye takes integer CGe returns nothing
if CGe==null then
return
elseif(e8[CGe]!=-1)then
return
endif
set e8[CGe]=Z7
set Z7=CGe
endfunction
function LYe takes nothing returns integer
local integer CGe=M7
if(CGe!=0)then
set M7=P7[CGe]
else
set p7=p7+1
set CGe=p7
endif
if(CGe>8190)then
return 0
endif
set P7[CGe]=-1
return CGe
endfunction
function Lze takes integer CGe returns nothing
if CGe==null then
return
elseif(P7[CGe]!=-1)then
return
endif
set P7[CGe]=M7
set M7=CGe
endfunction
function LZe takes nothing returns integer
local integer CGe=H7
if(CGe!=0)then
set H7=J7[CGe]
else
set j7=j7+1
set CGe=j7
endif
if(CGe>8190)then
return 0
endif
set J7[CGe]=-1
return CGe
endfunction
function L_e takes integer CGe returns nothing
if CGe==null then
return
elseif(J7[CGe]!=-1)then
return
endif
set J7[CGe]=H7
set H7=CGe
endfunction
function L0e takes nothing returns integer
local integer CGe=D7
if(CGe!=0)then
set D7=F7[CGe]
else
set f7=f7+1
set CGe=f7
endif
if(CGe>8190)then
return 0
endif
set F7[CGe]=-1
return CGe
endfunction
function L1e takes integer CGe returns nothing
if CGe==null then
return
elseif(F7[CGe]!=-1)then
return
endif
set F7[CGe]=D7
set D7=CGe
endfunction
function L2e takes nothing returns integer
local integer CGe=n7
if(CGe!=0)then
set n7=E7[CGe]
else
set V7=V7+1
set CGe=V7
endif
if(CGe>8190)then
return 0
endif
set E7[CGe]=-1
return CGe
endfunction
function L3e takes integer CGe returns nothing
if CGe==null then
return
elseif(E7[CGe]!=-1)then
return
endif
set E7[CGe]=n7
set n7=CGe
endfunction
function L4e takes nothing returns integer
local integer CGe=Y6
if(CGe!=0)then
set Y6=Z6[CGe]
else
set z6=z6+1
set CGe=z6
endif
if(CGe>8190)then
return 0
endif
set Z6[CGe]=-1
return CGe
endfunction
function L5e takes integer CGe returns nothing
if CGe==null then
return
elseif(Z6[CGe]!=-1)then
return
endif
set Z6[CGe]=Y6
set Y6=CGe
endfunction
function L6e takes nothing returns integer
local integer CGe=M6
if(CGe!=0)then
set M6=P6[CGe]
else
set p6=p6+1
set CGe=p6
endif
if(CGe>8190)then
return 0
endif
set P6[CGe]=-1
return CGe
endfunction
function L7e takes integer CGe returns nothing
if CGe==null then
return
elseif(P6[CGe]!=-1)then
return
endif
set P6[CGe]=M6
set M6=CGe
endfunction
function L8e takes nothing returns integer
local integer CGe=F6
if(CGe!=0)then
set F6=G6[CGe]
else
set g6=g6+1
set CGe=g6
endif
if(CGe>8190)then
return 0
endif
set G6[CGe]=-1
return CGe
endfunction
function L9e takes integer CGe returns nothing
if CGe==null then
return
elseif(G6[CGe]!=-1)then
return
endif
set G6[CGe]=F6
set F6=CGe
endfunction
function mve takes nothing returns integer
local integer CGe=b6
if(CGe!=0)then
set b6=c6[CGe]
else
set B6=B6+1
set CGe=B6
endif
if(CGe>8190)then
return 0
endif
set c6[CGe]=-1
return CGe
endfunction
function mee takes integer CGe returns nothing
if CGe==null then
return
elseif(c6[CGe]!=-1)then
return
endif
set c6[CGe]=b6
set b6=CGe
endfunction
function mxe takes nothing returns integer
local integer CGe=x6
if(CGe!=0)then
set x6=i6[CGe]
else
set o6=o6+1
set CGe=o6
endif
if(CGe>8190)then
return 0
endif
set i6[CGe]=-1
return CGe
endfunction
function moe takes integer CGe returns nothing
if CGe==null then
return
elseif(i6[CGe]!=-1)then
return
endif
set i6[CGe]=x6
set x6=CGe
endfunction
function mre takes nothing returns integer
local integer CGe=U5
if(CGe!=0)then
set U5=W5[CGe]
else
set w5=w5+1
set CGe=w5
endif
if(CGe>8190)then
return 0
endif
set W5[CGe]=-1
return CGe
endfunction
function mie takes integer CGe returns nothing
if CGe==null then
return
elseif(W5[CGe]!=-1)then
return
endif
set W5[CGe]=U5
set U5=CGe
endfunction
function mae takes nothing returns integer
local integer CGe=K5
if(CGe!=0)then
set K5=L5[CGe]
else
set l5=l5+1
set CGe=l5
endif
if(CGe>8190)then
return 0
endif
set L5[CGe]=-1
return CGe
endfunction
function mne takes integer CGe returns nothing
if CGe==null then
return
elseif(L5[CGe]!=-1)then
return
endif
set L5[CGe]=K5
set K5=CGe
endfunction
function mVe takes nothing returns integer
local integer CGe=g5
if(CGe!=0)then
set g5=h5[CGe]
else
set G5=G5+1
set CGe=G5
endif
if(CGe>8190)then
return 0
endif
set h5[CGe]=-1
return CGe
endfunction
function mEe takes integer CGe returns nothing
if CGe==null then
return
elseif(h5[CGe]!=-1)then
return
endif
set h5[CGe]=g5
set g5=CGe
endfunction
function mXe takes nothing returns integer
local integer CGe=C5
if(CGe!=0)then
set C5=D5[CGe]
else
set d5=d5+1
set CGe=d5
endif
if(CGe>8190)then
return 0
endif
set D5[CGe]=-1
return CGe
endfunction
function mOe takes integer CGe returns nothing
if CGe==null then
return
elseif(D5[CGe]!=-1)then
return
endif
set D5[CGe]=C5
set C5=CGe
endfunction
function mRe takes nothing returns integer
local integer CGe=V5
if(CGe!=0)then
set V5=X5[CGe]
else
set E5=E5+1
set CGe=E5
endif
if(CGe>8190)then
return 0
endif
set X5[CGe]=-1
return CGe
endfunction
function mIe takes integer CGe returns nothing
if CGe==null then
return
elseif(X5[CGe]!=-1)then
return
endif
set X5[CGe]=V5
set V5=CGe
endfunction
function mAe takes nothing returns integer
local integer CGe=y4
if(CGe!=0)then
set y4=z4[CGe]
else
set Y4=Y4+1
set CGe=Y4
endif
if(CGe>8190)then
return 0
endif
set z4[CGe]=-1
return CGe
endfunction
function mNe takes integer CGe returns nothing
if CGe==null then
return
elseif(z4[CGe]!=-1)then
return
endif
set z4[CGe]=y4
set y4=CGe
endfunction
function mbe takes nothing returns integer
local integer CGe=S4
if(CGe!=0)then
set S4=u4[CGe]
else
set T4=T4+1
set CGe=T4
endif
if(CGe>8190)then
return 0
endif
set u4[CGe]=-1
return CGe
endfunction
function mBe takes integer CGe returns nothing
if CGe==null then
return
elseif(u4[CGe]!=-1)then
return
endif
set u4[CGe]=S4
set S4=CGe
endfunction
function mce takes nothing returns integer
local integer CGe=l4
if(CGe!=0)then
set l4=m4[CGe]
else
set L4=L4+1
set CGe=L4
endif
if(CGe>8190)then
return 0
endif
set m4[CGe]=-1
return CGe
endfunction
function mCe takes integer CGe returns nothing
if CGe==null then
return
elseif(m4[CGe]!=-1)then
return
endif
set m4[CGe]=l4
set l4=CGe
endfunction
function mde takes nothing returns integer
local integer CGe=f4
if(CGe!=0)then
set f4=g4[CGe]
else
set F4=F4+1
set CGe=F4
endif
if(CGe>8190)then
return 0
endif
set g4[CGe]=-1
return CGe
endfunction
function mDe takes integer CGe returns nothing
if CGe==null then
return
elseif(g4[CGe]!=-1)then
return
endif
set g4[CGe]=f4
set f4=CGe
endfunction
function mfe takes nothing returns integer
local integer CGe=N4
if(CGe!=0)then
set N4=B4[CGe]
else
set b4=b4+1
set CGe=b4
endif
if(CGe>8190)then
return 0
endif
set B4[CGe]=-1
return CGe
endfunction
function mFe takes integer CGe returns nothing
if CGe==null then
return
elseif(B4[CGe]!=-1)then
return
endif
set B4[CGe]=N4
set N4=CGe
endfunction
function mge takes nothing returns integer
local integer CGe=v4
if(CGe!=0)then
set v4=x4[CGe]
else
set e4=e4+1
set CGe=e4
endif
if(CGe>8190)then
return 0
endif
set x4[CGe]=-1
return CGe
endfunction
function mGe takes integer CGe returns nothing
if CGe==null then
return
elseif(x4[CGe]!=-1)then
return
endif
set x4[CGe]=v4
set v4=CGe
endfunction
function mhe takes nothing returns integer
local integer CGe=T3
if(CGe!=0)then
set T3=U3[CGe]
else
set u3=u3+1
set CGe=u3
endif
if(CGe>8190)then
return 0
endif
set U3[CGe]=-1
return CGe
endfunction
function mHe takes integer CGe returns nothing
if CGe==null then
return
elseif(U3[CGe]!=-1)then
return
endif
set U3[CGe]=T3
set T3=CGe
endfunction
function mje takes nothing returns integer
local integer CGe=p3
if(CGe!=0)then
set p3=q3[CGe]
else
set P3=P3+1
set CGe=P3
endif
if(CGe>8190)then
return 0
endif
set q3[CGe]=-1
return CGe
endfunction
function mJe takes integer CGe returns nothing
if CGe==null then
return
elseif(q3[CGe]!=-1)then
return
endif
set q3[CGe]=p3
set p3=CGe
endfunction
function mke takes nothing returns integer
local integer CGe=f3
if(CGe!=0)then
set f3=g3[CGe]
else
set F3=F3+1
set CGe=F3
endif
if(CGe>8190)then
return 0
endif
set g3[CGe]=-1
return CGe
endfunction
function mKe takes integer CGe returns nothing
if CGe==null then
return
elseif(g3[CGe]!=-1)then
return
endif
set g3[CGe]=f3
set f3=CGe
endfunction
function mle takes nothing returns integer
local integer CGe=I3
if(CGe!=0)then
set I3=N3[CGe]
else
set A3=A3+1
set CGe=A3
endif
if(CGe>8190)then
return 0
endif
set N3[CGe]=-1
return CGe
endfunction
function mLe takes integer CGe returns nothing
if CGe==null then
return
elseif(N3[CGe]!=-1)then
return
endif
set N3[CGe]=I3
set I3=CGe
endfunction
function mme takes nothing returns integer
local integer CGe=z2
if(CGe!=0)then
set z2=v3[CGe]
else
set Z2=Z2+1
set CGe=Z2
endif
if(CGe>8190)then
return 0
endif
set v3[CGe]=-1
return CGe
endfunction
function mMe takes integer CGe returns nothing
if CGe==null then
return
elseif(v3[CGe]!=-1)then
return
endif
set v3[CGe]=z2
set z2=CGe
endfunction
function mpe takes nothing returns integer
local integer CGe=T2
if(CGe!=0)then
set T2=U2[CGe]
else
set u2=u2+1
set CGe=u2
endif
if(CGe>8190)then
return 0
endif
set U2[CGe]=-1
return CGe
endfunction
function mPe takes integer CGe returns nothing
if CGe==null then
return
elseif(U2[CGe]!=-1)then
return
endif
set U2[CGe]=T2
set T2=CGe
endfunction
function mqe takes nothing returns integer
local integer CGe=G2
if(CGe!=0)then
set G2=j2[CGe]
else
set H2=H2+1
set CGe=H2
endif
if(CGe>8190)then
return 0
endif
set j2[CGe]=-1
return CGe
endfunction
function mQe takes integer CGe returns nothing
if CGe==null then
return
elseif(j2[CGe]!=-1)then
return
endif
set j2[CGe]=G2
set G2=CGe
endfunction
function mse takes nothing returns integer
local integer CGe=E2
if(CGe!=0)then
set E2=O2[CGe]
else
set X2=X2+1
set CGe=X2
endif
if(CGe>8190)then
return 0
endif
set O2[CGe]=-1
return CGe
endfunction
function mSe takes integer CGe returns nothing
if CGe==null then
return
elseif(O2[CGe]!=-1)then
return
endif
set O2[CGe]=E2
set E2=CGe
endfunction
function mte takes nothing returns integer
local integer CGe=w1
if(CGe!=0)then
set w1=Y1[CGe]
else
set W1=W1+1
set CGe=W1
endif
if(CGe>8190)then
return 0
endif
set Y1[CGe]=-1
return CGe
endfunction
function mTe takes integer CGe returns nothing
if CGe==null then
return
elseif(Y1[CGe]!=-1)then
return
endif
set Y1[CGe]=w1
set w1=CGe
endfunction
function mue takes nothing returns integer
local integer CGe=l1
if(CGe!=0)then
set l1=m1[CGe]
else
set L1=L1+1
set CGe=L1
endif
if(CGe>8190)then
return 0
endif
set m1[CGe]=-1
return CGe
endfunction
function mUe takes integer CGe returns nothing
if CGe==null then
return
elseif(m1[CGe]!=-1)then
return
endif
set m1[CGe]=l1
set l1=CGe
endfunction
function mwe takes nothing returns integer
local integer CGe=f1
if(CGe!=0)then
set f1=g1[CGe]
else
set F1=F1+1
set CGe=F1
endif
if(CGe>8190)then
return 0
endif
set g1[CGe]=-1
return CGe
endfunction
function mWe takes integer CGe returns nothing
if CGe==null then
return
elseif(g1[CGe]!=-1)then
return
endif
set g1[CGe]=f1
set f1=CGe
endfunction
function mye takes nothing returns integer
local integer CGe=n1
if(CGe!=0)then
set n1=E1[CGe]
else
set V1=V1+1
set CGe=V1
endif
if(CGe>8190)then
return 0
endif
set E1[CGe]=-1
return CGe
endfunction
function mYe takes integer CGe returns nothing
if CGe==null then
return
elseif(E1[CGe]!=-1)then
return
endif
set E1[CGe]=n1
set n1=CGe
endfunction
function mze takes nothing returns integer
local integer CGe=w0
if(CGe!=0)then
set w0=Y0[CGe]
else
set W0=W0+1
set CGe=W0
endif
if(CGe>8190)then
return 0
endif
set Y0[CGe]=-1
return CGe
endfunction
function mZe takes integer CGe returns nothing
if CGe==null then
return
elseif(Y0[CGe]!=-1)then
return
endif
set Y0[CGe]=w0
set w0=CGe
endfunction
function m_e takes nothing returns integer
local integer CGe=m0
if(CGe!=0)then
set m0=p0[CGe]
else
set M0=M0+1
set CGe=M0
endif
if(CGe>8190)then
return 0
endif
set p0[CGe]=-1
return CGe
endfunction
function m0e takes integer CGe returns nothing
if CGe==null then
return
elseif(p0[CGe]!=-1)then
return
endif
set p0[CGe]=m0
set m0=CGe
endfunction
function m1e takes nothing returns integer
local integer CGe=H0
if(CGe!=0)then
set H0=J0[CGe]
else
set j0=j0+1
set CGe=j0
endif
if(CGe>8190)then
return 0
endif
set J0[CGe]=-1
return CGe
endfunction
function m2e takes integer CGe returns nothing
if CGe==null then
return
elseif(J0[CGe]!=-1)then
return
endif
set J0[CGe]=H0
set H0=CGe
endfunction
function m3e takes nothing returns integer
local integer CGe=N0
if(CGe!=0)then
set N0=B0[CGe]
else
set b0=b0+1
set CGe=b0
endif
if(CGe>8190)then
return 0
endif
set B0[CGe]=-1
return CGe
endfunction
function m4e takes integer CGe returns nothing
if CGe==null then
return
elseif(B0[CGe]!=-1)then
return
endif
set B0[CGe]=N0
set N0=CGe
endfunction
function m5e takes nothing returns integer
local integer CGe=o0
if(CGe!=0)then
set o0=i0[CGe]
else
set r0=r0+1
set CGe=r0
endif
if(CGe>8190)then
return 0
endif
set i0[CGe]=-1
return CGe
endfunction
function m6e takes integer CGe returns nothing
if CGe==null then
return
elseif(i0[CGe]!=-1)then
return
endif
set i0[CGe]=o0
set o0=CGe
endfunction
function m7e takes nothing returns integer
local integer CGe=YZ
if(CGe!=0)then
set YZ=ZZ[CGe]
else
set zZ=zZ+1
set CGe=zZ
endif
if(CGe>8190)then
return 0
endif
set ZZ[CGe]=-1
return CGe
endfunction
function m8e takes integer CGe returns nothing
if CGe==null then
return
elseif(ZZ[CGe]!=-1)then
return
endif
set ZZ[CGe]=YZ
set YZ=CGe
endfunction
function m9e takes nothing returns integer
local integer CGe=MZ
if(CGe!=0)then
set MZ=PZ[CGe]
else
set pZ=pZ+1
set CGe=pZ
endif
if(CGe>8190)then
return 0
endif
set PZ[CGe]=-1
return CGe
endfunction
function Mve takes integer CGe returns nothing
if CGe==null then
return
elseif(PZ[CGe]!=-1)then
return
endif
set PZ[CGe]=MZ
set MZ=CGe
endfunction
function Mee takes nothing returns integer
local integer CGe=kZ
if(CGe!=0)then
set kZ=lZ[CGe]
else
set KZ=KZ+1
set CGe=KZ
endif
if(CGe>8190)then
return 0
endif
set lZ[CGe]=-1
return CGe
endfunction
function Mxe takes integer CGe returns nothing
if CGe==null then
return
elseif(lZ[CGe]!=-1)then
return
endif
set lZ[CGe]=kZ
set kZ=CGe
endfunction
function Moe takes nothing returns integer
local integer CGe=DZ
if(CGe!=0)then
set DZ=FZ[CGe]
else
set fZ=fZ+1
set CGe=fZ
endif
if(CGe>8190)then
return 0
endif
set FZ[CGe]=-1
return CGe
endfunction
function Mre takes integer CGe returns nothing
if CGe==null then
return
elseif(FZ[CGe]!=-1)then
return
endif
set FZ[CGe]=DZ
set DZ=CGe
endfunction
function Mie takes nothing returns integer
local integer CGe=XZ
if(CGe!=0)then
set XZ=RZ[CGe]
else
set OZ=OZ+1
set CGe=OZ
endif
if(CGe>8190)then
return 0
endif
set RZ[CGe]=-1
return CGe
endfunction
function Mae takes integer CGe returns nothing
if CGe==null then
return
elseif(RZ[CGe]!=-1)then
return
endif
set RZ[CGe]=XZ
set XZ=CGe
endfunction
function Mne takes nothing returns integer
local integer CGe=Uz
if(CGe!=0)then
set Uz=Wz[CGe]
else
set wz=wz+1
set CGe=wz
endif
if(CGe>8190)then
return 0
endif
set Wz[CGe]=-1
return CGe
endfunction
function MVe takes integer CGe returns nothing
if CGe==null then
return
elseif(Wz[CGe]!=-1)then
return
endif
set Wz[CGe]=Uz
set Uz=CGe
endfunction
function MEe takes nothing returns integer
local integer CGe=Qz
if(CGe!=0)then
set Qz=Sz[CGe]
else
set sz=sz+1
set CGe=sz
endif
if(CGe>8190)then
return 0
endif
set Sz[CGe]=-1
return CGe
endfunction
function MXe takes integer CGe returns nothing
if CGe==null then
return
elseif(Sz[CGe]!=-1)then
return
endif
set Sz[CGe]=Qz
set Qz=CGe
endfunction
function MOe takes nothing returns integer
local integer CGe=lz
if(CGe!=0)then
set lz=mz[CGe]
else
set Lz=Lz+1
set CGe=Lz
endif
if(CGe>8190)then
return 0
endif
set mz[CGe]=-1
return CGe
endfunction
function MRe takes integer CGe returns nothing
if CGe==null then
return
elseif(mz[CGe]!=-1)then
return
endif
set mz[CGe]=lz
set lz=CGe
endfunction
function MIe takes nothing returns integer
local integer CGe=hz
if(CGe!=0)then
set hz=jz[CGe]
else
set Hz=Hz+1
set CGe=Hz
endif
if(CGe>8190)then
return 0
endif
set jz[CGe]=-1
return CGe
endfunction
function MAe takes integer CGe returns nothing
if CGe==null then
return
elseif(jz[CGe]!=-1)then
return
endif
set jz[CGe]=hz
set hz=CGe
endfunction
function MNe takes nothing returns integer
local integer CGe=Bz
if(CGe!=0)then
set Bz=Cz[CGe]
else
set cz=cz+1
set CGe=cz
endif
if(CGe>8190)then
return 0
endif
set Cz[CGe]=-1
return CGe
endfunction
function Mbe takes integer CGe returns nothing
if CGe==null then
return
elseif(Cz[CGe]!=-1)then
return
endif
set Cz[CGe]=Bz
set Bz=CGe
endfunction
function MBe takes nothing returns integer
local integer CGe=Oz
if(CGe!=0)then
set Oz=Iz[CGe]
else
set Rz=Rz+1
set CGe=Rz
endif
if(CGe>8190)then
return 0
endif
set Iz[CGe]=-1
return CGe
endfunction
function Mce takes integer CGe returns nothing
if CGe==null then
return
elseif(Iz[CGe]!=-1)then
return
endif
set Iz[CGe]=Oz
set Oz=CGe
endfunction
function MCe takes nothing returns integer
local integer CGe=oz
if(CGe!=0)then
set oz=az[CGe]
else
set iz=iz+1
set CGe=iz
endif
if(CGe>8190)then
return 0
endif
set az[CGe]=-1
return CGe
endfunction
function Mde takes integer CGe returns nothing
if CGe==null then
return
elseif(az[CGe]!=-1)then
return
endif
set az[CGe]=oz
set oz=CGe
endfunction
function MDe takes nothing returns integer
local integer CGe=yY
if(CGe!=0)then
set yY=zY[CGe]
else
set YY=YY+1
set CGe=YY
endif
if(CGe>8190)then
return 0
endif
set zY[CGe]=-1
return CGe
endfunction
function Mfe takes integer CGe returns nothing
if CGe==null then
return
elseif(zY[CGe]!=-1)then
return
endif
set zY[CGe]=yY
set yY=CGe
endfunction
function MFe takes nothing returns integer
local integer CGe=mY
if(CGe!=0)then
set mY=pY[CGe]
else
set MY=MY+1
set CGe=MY
endif
if(CGe>8190)then
return 0
endif
set pY[CGe]=-1
return CGe
endfunction
function Mge takes integer CGe returns nothing
if CGe==null then
return
elseif(pY[CGe]!=-1)then
return
endif
set pY[CGe]=mY
set mY=CGe
endfunction
function MGe takes nothing returns integer
local integer CGe=jY
if(CGe!=0)then
set jY=kY[CGe]
else
set JY=JY+1
set CGe=JY
endif
if(CGe>8190)then
return 0
endif
set kY[CGe]=-1
return CGe
endfunction
function Mhe takes integer CGe returns nothing
if CGe==null then
return
elseif(kY[CGe]!=-1)then
return
endif
set kY[CGe]=jY
set jY=CGe
endfunction
function MHe takes nothing returns integer
local integer CGe=RY
if(CGe!=0)then
set RY=AY[CGe]
else
set IY=IY+1
set CGe=IY
endif
if(CGe>8190)then
return 0
endif
set AY[CGe]=-1
return CGe
endfunction
function Mje takes integer CGe returns nothing
if CGe==null then
return
elseif(AY[CGe]!=-1)then
return
endif
set AY[CGe]=RY
set RY=CGe
endfunction
function MJe takes nothing returns integer
local integer CGe=Zy
if(CGe!=0)then
set Zy=eY[CGe]
else
set vY=vY+1
set CGe=vY
endif
if(CGe>8190)then
return 0
endif
set eY[CGe]=-1
return CGe
endfunction
function Mke takes integer CGe returns nothing
if CGe==null then
return
elseif(eY[CGe]!=-1)then
return
endif
set eY[CGe]=Zy
set Zy=CGe
endfunction
function MKe takes nothing returns integer
local integer CGe=ty
if(CGe!=0)then
set ty=Uy[CGe]
else
set Ty=Ty+1
set CGe=Ty
endif
if(CGe>8190)then
return 0
endif
set Uy[CGe]=-1
return CGe
endfunction
function Mle takes integer CGe returns nothing
if CGe==null then
return
elseif(Uy[CGe]!=-1)then
return
endif
set Uy[CGe]=ty
set ty=CGe
endfunction
function MLe takes nothing returns integer
local integer CGe=ly
if(CGe!=0)then
set ly=my[CGe]
else
set Ly=Ly+1
set CGe=Ly
endif
if(CGe>8190)then
return 0
endif
set my[CGe]=-1
return CGe
endfunction
function Mme takes integer CGe returns nothing
if CGe==null then
return
elseif(my[CGe]!=-1)then
return
endif
set my[CGe]=ly
set ly=CGe
endfunction
function MMe takes nothing returns integer
local integer CGe=Cy
if(CGe!=0)then
set Cy=fy[CGe]
else
set Dy=Dy+1
set CGe=Dy
endif
if(CGe>8190)then
return 0
endif
set fy[CGe]=-1
return CGe
endfunction
function Mpe takes integer CGe returns nothing
if CGe==null then
return
elseif(fy[CGe]!=-1)then
return
endif
set fy[CGe]=Cy
set Cy=CGe
endfunction
function MPe takes nothing returns integer
local integer CGe=Ry
if(CGe!=0)then
set Ry=Ay[CGe]
else
set Iy=Iy+1
set CGe=Iy
endif
if(CGe>8190)then
return 0
endif
set Ay[CGe]=-1
return CGe
endfunction
function Mqe takes integer CGe returns nothing
if CGe==null then
return
elseif(Ay[CGe]!=-1)then
return
endif
set Ay[CGe]=Ry
set Ry=CGe
endfunction
function MQe takes nothing returns integer
local integer CGe=iy
if(CGe!=0)then
set iy=Vy[CGe]
else
set ay=ay+1
set CGe=ay
endif
if(CGe>8190)then
return 0
endif
set Vy[CGe]=-1
return CGe
endfunction
function Mse takes integer CGe returns nothing
if CGe==null then
return
elseif(Vy[CGe]!=-1)then
return
endif
set Vy[CGe]=iy
set iy=CGe
endfunction
function MSe takes nothing returns integer
local integer CGe=ZW
if(CGe!=0)then
set ZW=ey[CGe]
else
set vy=vy+1
set CGe=vy
endif
if(CGe>8190)then
return 0
endif
set ey[CGe]=-1
return CGe
endfunction
function Mte takes integer CGe returns nothing
if CGe==null then
return
elseif(ey[CGe]!=-1)then
return
endif
set ey[CGe]=ZW
set ZW=CGe
endfunction
function MTe takes nothing returns integer
local integer CGe=qW
if(CGe!=0)then
set qW=sW[CGe]
else
set QW=QW+1
set CGe=QW
endif
if(CGe>8190)then
return 0
endif
set sW[CGe]=-1
return CGe
endfunction
function Mue takes integer CGe returns nothing
if CGe==null then
return
elseif(sW[CGe]!=-1)then
return
endif
set sW[CGe]=qW
set qW=CGe
endfunction
function MUe takes nothing returns integer
local integer CGe=jW
if(CGe!=0)then
set jW=kW[CGe]
else
set JW=JW+1
set CGe=JW
endif
if(CGe>8190)then
return 0
endif
set kW[CGe]=-1
return CGe
endfunction
function Mwe takes integer CGe returns nothing
if CGe==null then
return
elseif(kW[CGe]!=-1)then
return
endif
set kW[CGe]=jW
set jW=CGe
endfunction
function MWe takes nothing returns integer
local integer CGe=bW
if(CGe!=0)then
set bW=cW[CGe]
else
set BW=BW+1
set CGe=BW
endif
if(CGe>8190)then
return 0
endif
set cW[CGe]=-1
return CGe
endfunction
function Mye takes integer CGe returns nothing
if CGe==null then
return
elseif(cW[CGe]!=-1)then
return
endif
set cW[CGe]=bW
set bW=CGe
endfunction
function MYe takes nothing returns integer
local integer CGe=rW
if(CGe!=0)then
set rW=aW[CGe]
else
set iW=iW+1
set CGe=iW
endif
if(CGe>8190)then
return 0
endif
set aW[CGe]=-1
return CGe
endfunction
function Mze takes integer CGe returns nothing
if CGe==null then
return
elseif(aW[CGe]!=-1)then
return
endif
set aW[CGe]=rW
set rW=CGe
endfunction
function MZe takes nothing returns integer
local integer CGe=yw
if(CGe!=0)then
set yw=zw[CGe]
else
set Yw=Yw+1
set CGe=Yw
endif
if(CGe>8190)then
return 0
endif
set zw[CGe]=-1
return CGe
endfunction
function M_e takes integer CGe returns nothing
if CGe==null then
return
elseif(zw[CGe]!=-1)then
return
endif
set zw[CGe]=yw
set yw=CGe
endfunction
function M0e takes nothing returns integer
local integer CGe=Tw
if(CGe!=0)then
set Tw=Uw[CGe]
else
set uw=uw+1
set CGe=uw
endif
if(CGe>8190)then
return 0
endif
set Uw[CGe]=-1
return CGe
endfunction
function M1e takes integer CGe returns nothing
if CGe==null then
return
elseif(Uw[CGe]!=-1)then
return
endif
set Uw[CGe]=Tw
set Tw=CGe
endfunction
function M2e takes nothing returns integer
local integer CGe=Mw
if(CGe!=0)then
set Mw=Pw[CGe]
else
set pw=pw+1
set CGe=pw
endif
if(CGe>8190)then
return 0
endif
set Pw[CGe]=-1
return CGe
endfunction
function M3e takes integer CGe returns nothing
if CGe==null then
return
elseif(Pw[CGe]!=-1)then
return
endif
set Pw[CGe]=Mw
set Mw=CGe
endfunction
function M4e takes nothing returns integer
local integer CGe=gw
if(CGe!=0)then
set gw=hw[CGe]
else
set Gw=Gw+1
set CGe=Gw
endif
if(CGe>8190)then
return 0
endif
set hw[CGe]=-1
return CGe
endfunction
function M5e takes integer CGe returns nothing
if CGe==null then
return
elseif(hw[CGe]!=-1)then
return
endif
set hw[CGe]=gw
set gw=CGe
endfunction
function M6e takes nothing returns integer
local integer CGe=Cw
if(CGe!=0)then
set Cw=Dw[CGe]
else
set dw=dw+1
set CGe=dw
endif
if(CGe>8190)then
return 0
endif
set Dw[CGe]=-1
return CGe
endfunction
function M7e takes integer CGe returns nothing
if CGe==null then
return
elseif(Dw[CGe]!=-1)then
return
endif
set Dw[CGe]=Cw
set Cw=CGe
endfunction
function M8e takes nothing returns integer
local integer CGe=aw
if(CGe!=0)then
set aw=Vw[CGe]
else
set nw=nw+1
set CGe=nw
endif
if(CGe>8190)then
return 0
endif
set Vw[CGe]=-1
return CGe
endfunction
function M9e takes integer CGe returns nothing
if CGe==null then
return
elseif(Vw[CGe]!=-1)then
return
endif
set Vw[CGe]=aw
set aw=CGe
endfunction
function pve takes nothing returns integer
local integer CGe=sU
if(CGe!=0)then
set sU=tU[CGe]
else
set SU=SU+1
set CGe=SU
endif
if(CGe>8190)then
return 0
endif
set tU[CGe]=-1
return CGe
endfunction
function pee takes integer CGe returns nothing
if CGe==null then
return
elseif(tU[CGe]!=-1)then
return
endif
set tU[CGe]=sU
set sU=CGe
endfunction
function pxe takes nothing returns integer
local integer CGe=mU
if(CGe!=0)then
set mU=pU[CGe]
else
set MU=MU+1
set CGe=MU
endif
if(CGe>8190)then
return 0
endif
set pU[CGe]=-1
return CGe
endfunction
function poe takes integer CGe returns nothing
if CGe==null then
return
elseif(pU[CGe]!=-1)then
return
endif
set pU[CGe]=mU
set mU=CGe
endfunction
function pre takes nothing returns integer
local integer CGe=hU
if(CGe!=0)then
set hU=jU[CGe]
else
set HU=HU+1
set CGe=HU
endif
if(CGe>8190)then
return 0
endif
set jU[CGe]=-1
return CGe
endfunction
function pie takes integer CGe returns nothing
if CGe==null then
return
elseif(jU[CGe]!=-1)then
return
endif
set jU[CGe]=hU
set hU=CGe
endfunction
function pae takes nothing returns integer
local integer CGe=CU
if(CGe!=0)then
set CU=DU[CGe]
else
set dU=dU+1
set CGe=dU
endif
if(CGe>8190)then
return 0
endif
set DU[CGe]=-1
return CGe
endfunction
function pne takes integer CGe returns nothing
if CGe==null then
return
elseif(DU[CGe]!=-1)then
return
endif
set DU[CGe]=CU
set CU=CGe
endfunction
function pVe takes nothing returns integer
local integer CGe=VU
if(CGe!=0)then
set VU=XU[CGe]
else
set EU=EU+1
set CGe=EU
endif
if(CGe>8190)then
return 0
endif
set XU[CGe]=-1
return CGe
endfunction
function pEe takes integer CGe returns nothing
if CGe==null then
return
elseif(XU[CGe]!=-1)then
return
endif
set XU[CGe]=VU
set VU=CGe
endfunction
function pXe takes nothing returns integer
local integer CGe=Zu
if(CGe!=0)then
set Zu=eU[CGe]
else
set vU=vU+1
set CGe=vU
endif
if(CGe>8190)then
return 0
endif
set eU[CGe]=-1
return CGe
endfunction
function pOe takes integer CGe returns nothing
if CGe==null then
return
elseif(eU[CGe]!=-1)then
return
endif
set eU[CGe]=Zu
set Zu=CGe
endfunction
function pRe takes nothing returns integer
local integer CGe=mu
if(CGe!=0)then
set mu=pu[CGe]
else
set Mu=Mu+1
set CGe=Mu
endif
if(CGe>8190)then
return 0
endif
set pu[CGe]=-1
return CGe
endfunction
function pIe takes integer CGe returns nothing
if CGe==null then
return
elseif(pu[CGe]!=-1)then
return
endif
set pu[CGe]=mu
set mu=CGe
endfunction
function pAe takes nothing returns integer
local integer CGe=Ju
if(CGe!=0)then
set Ju=Ku[CGe]
else
set ku=ku+1
set CGe=ku
endif
if(CGe>8190)then
return 0
endif
set Ku[CGe]=-1
return CGe
endfunction
function pNe takes integer CGe returns nothing
if CGe==null then
return
elseif(Ku[CGe]!=-1)then
return
endif
set Ku[CGe]=Ju
set Ju=CGe
endfunction
function pbe takes nothing returns integer
local integer CGe=Fu
if(CGe!=0)then
set Fu=Gu[CGe]
else
set gu=gu+1
set CGe=gu
endif
if(CGe>8190)then
return 0
endif
set Gu[CGe]=-1
return CGe
endfunction
function pBe takes integer CGe returns nothing
if CGe==null then
return
elseif(Gu[CGe]!=-1)then
return
endif
set Gu[CGe]=Fu
set Fu=CGe
endfunction
function pce takes nothing returns integer
local integer CGe=Bu
if(CGe!=0)then
set Bu=Cu[CGe]
else
set cu=cu+1
set CGe=cu
endif
if(CGe>8190)then
return 0
endif
set Cu[CGe]=-1
return CGe
endfunction
function pCe takes integer CGe returns nothing
if CGe==null then
return
elseif(Cu[CGe]!=-1)then
return
endif
set Cu[CGe]=Bu
set Bu=CGe
endfunction
function pde takes nothing returns integer
local integer CGe=Xu
if(CGe!=0)then
set Xu=Ru[CGe]
else
set Ou=Ou+1
set CGe=Ou
endif
if(CGe>8190)then
return 0
endif
set Ru[CGe]=-1
return CGe
endfunction
function pDe takes integer CGe returns nothing
if CGe==null then
return
elseif(Ru[CGe]!=-1)then
return
endif
set Ru[CGe]=Xu
set Xu=CGe
endfunction
function pfe takes nothing returns integer
local integer CGe=ou
if(CGe!=0)then
set ou=au[CGe]
else
set ru=ru+1
set CGe=ru
endif
if(CGe>8190)then
return 0
endif
set au[CGe]=-1
return CGe
endfunction
function pFe takes integer CGe returns nothing
if CGe==null then
return
elseif(au[CGe]!=-1)then
return
endif
set au[CGe]=ou
set ou=CGe
endfunction
function pge takes nothing returns integer
local integer CGe=YT
if(CGe!=0)then
set YT=ZT[CGe]
else
set zT=zT+1
set CGe=zT
endif
if(CGe>8190)then
return 0
endif
set ZT[CGe]=-1
return CGe
endfunction
function pGe takes integer CGe returns nothing
if CGe==null then
return
elseif(ZT[CGe]!=-1)then
return
endif
set ZT[CGe]=YT
set YT=CGe
endfunction
function phe takes nothing returns integer
local integer CGe=uT
if(CGe!=0)then
set uT=wT[CGe]
else
set UT=UT+1
set CGe=UT
endif
if(CGe>8190)then
return 0
endif
set wT[CGe]=-1
return CGe
endfunction
function pHe takes integer CGe returns nothing
if CGe==null then
return
elseif(wT[CGe]!=-1)then
return
endif
set wT[CGe]=uT
set uT=CGe
endfunction
function pje takes nothing returns integer
local integer CGe=qT
if(CGe!=0)then
set qT=sT[CGe]
else
set QT=QT+1
set CGe=QT
endif
if(CGe>8190)then
return 0
endif
set sT[CGe]=-1
return CGe
endfunction
function pJe takes integer CGe returns nothing
if CGe==null then
return
elseif(sT[CGe]!=-1)then
return
endif
set sT[CGe]=qT
set qT=CGe
endfunction
function pke takes nothing returns integer
local integer CGe=GT
if(CGe!=0)then
set GT=HT[CGe]
else
set hT=hT+1
set CGe=hT
endif
if(CGe>8190)then
return 0
endif
set HT[CGe]=-1
return CGe
endfunction
function pKe takes integer CGe returns nothing
if CGe==null then
return
elseif(HT[CGe]!=-1)then
return
endif
set HT[CGe]=GT
set GT=CGe
endfunction
function ple takes nothing returns integer
local integer CGe=iT
if(CGe!=0)then
set iT=nT[CGe]
else
set aT=aT+1
set CGe=aT
endif
if(CGe>8190)then
return 0
endif
set nT[CGe]=-1
return CGe
endfunction
function pLe takes integer CGe returns nothing
if CGe==null then
return
elseif(nT[CGe]!=-1)then
return
endif
set nT[CGe]=iT
set iT=CGe
endfunction
function pme takes nothing returns integer
local integer CGe=Yt
if(CGe!=0)then
set Yt=Zt[CGe]
else
set zt=zt+1
set CGe=zt
endif
if(CGe>8190)then
return 0
endif
set Zt[CGe]=-1
return CGe
endfunction
function pMe takes integer CGe returns nothing
if CGe==null then
return
elseif(Zt[CGe]!=-1)then
return
endif
set Zt[CGe]=Yt
set Yt=CGe
endfunction
function ppe takes nothing returns integer
local integer CGe=Mt
if(CGe!=0)then
set Mt=Pt[CGe]
else
set pt=pt+1
set CGe=pt
endif
if(CGe>8190)then
return 0
endif
set Pt[CGe]=-1
return CGe
endfunction
function pPe takes integer CGe returns nothing
if CGe==null then
return
elseif(Pt[CGe]!=-1)then
return
endif
set Pt[CGe]=Mt
set Mt=CGe
endfunction
function pqe takes nothing returns integer
local integer CGe=Ct
if(CGe!=0)then
set Ct=Dt[CGe]
else
set dt=dt+1
set CGe=dt
endif
if(CGe>8190)then
return 0
endif
set Dt[CGe]=-1
return CGe
endfunction
function pQe takes integer CGe returns nothing
if CGe==null then
return
elseif(Dt[CGe]!=-1)then
return
endif
set Dt[CGe]=Ct
set Ct=CGe
endfunction
function pse takes nothing returns integer
local integer CGe=ZS
if(CGe!=0)then
set ZS=et[CGe]
else
set vt=vt+1
set CGe=vt
endif
if(CGe>8190)then
return 0
endif
set et[CGe]=-1
return CGe
endfunction
function pSe takes integer CGe returns nothing
if CGe==null then
return
elseif(et[CGe]!=-1)then
return
endif
set et[CGe]=ZS
set ZS=CGe
endfunction
function pte takes nothing returns integer
local integer CGe=US
if(CGe!=0)then
set US=WS[CGe]
else
set wS=wS+1
set CGe=wS
endif
if(CGe>8190)then
return 0
endif
set WS[CGe]=-1
return CGe
endfunction
function pTe takes integer CGe returns nothing
if CGe==null then
return
elseif(WS[CGe]!=-1)then
return
endif
set WS[CGe]=US
set US=CGe
endfunction
function pue takes nothing returns integer
local integer CGe=mS
if(CGe!=0)then
set mS=pS[CGe]
else
set MS=MS+1
set CGe=MS
endif
if(CGe>8190)then
return 0
endif
set pS[CGe]=-1
return CGe
endfunction
function pUe takes integer CGe returns nothing
if CGe==null then
return
elseif(pS[CGe]!=-1)then
return
endif
set pS[CGe]=mS
set mS=CGe
endfunction
function pwe takes nothing returns integer
local integer CGe=cS
if(CGe!=0)then
set cS=dS[CGe]
else
set CS=CS+1
set CGe=CS
endif
if(CGe>8190)then
return 0
endif
set dS[CGe]=-1
return CGe
endfunction
function pWe takes integer CGe returns nothing
if CGe==null then
return
elseif(dS[CGe]!=-1)then
return
endif
set dS[CGe]=cS
set cS=CGe
endfunction
function pye takes nothing returns integer
local integer CGe=RS
if(CGe!=0)then
set RS=AS[CGe]
else
set IS=IS+1
set CGe=IS
endif
if(CGe>8190)then
return 0
endif
set AS[CGe]=-1
return CGe
endfunction
function pYe takes integer CGe returns nothing
if CGe==null then
return
elseif(AS[CGe]!=-1)then
return
endif
set AS[CGe]=RS
set RS=CGe
endfunction
function pze takes nothing returns integer
local integer CGe=rS
if(CGe!=0)then
set rS=aS[CGe]
else
set iS=iS+1
set CGe=iS
endif
if(CGe>8190)then
return 0
endif
set aS[CGe]=-1
return CGe
endfunction
function pZe takes integer CGe returns nothing
if CGe==null then
return
elseif(aS[CGe]!=-1)then
return
endif
set aS[CGe]=rS
set rS=CGe
endfunction
function p_e takes nothing returns integer
local integer CGe=Ws
if(CGe!=0)then
set Ws=Ys[CGe]
else
set ys=ys+1
set CGe=ys
endif
if(CGe>8190)then
return 0
endif
set Ys[CGe]=-1
return CGe
endfunction
function p0e takes integer CGe returns nothing
if CGe==null then
return
elseif(Ys[CGe]!=-1)then
return
endif
set Ys[CGe]=Ws
set Ws=CGe
endfunction
function p1e takes nothing returns integer
local integer CGe=ls
if(CGe!=0)then
set ls=Ms[CGe]
else
set Ls=Ls+1
set CGe=Ls
endif
if(CGe>8190)then
return 0
endif
set Ms[CGe]=-1
return CGe
endfunction
function p2e takes integer CGe returns nothing
if CGe==null then
return
elseif(Ms[CGe]!=-1)then
return
endif
set Ms[CGe]=ls
set ls=CGe
endfunction
function p3e takes nothing returns integer
local integer CGe=hs
if(CGe!=0)then
set hs=js[CGe]
else
set Hs=Hs+1
set CGe=Hs
endif
if(CGe>8190)then
return 0
endif
set js[CGe]=-1
return CGe
endfunction
function p4e takes integer CGe returns nothing
if CGe==null then
return
elseif(js[CGe]!=-1)then
return
endif
set js[CGe]=hs
set hs=CGe
endfunction
function p5e takes nothing returns integer
local integer CGe=Ds
if(CGe!=0)then
set Ds=Fs[CGe]
else
set fs=fs+1
set CGe=fs
endif
if(CGe>8190)then
return 0
endif
set Fs[CGe]=-1
return CGe
endfunction
function p6e takes integer CGe returns nothing
if CGe==null then
return
elseif(Fs[CGe]!=-1)then
return
endif
set Fs[CGe]=Ds
set Ds=CGe
endfunction
function p7e takes nothing returns integer
local integer CGe=Rs
if(CGe!=0)then
set Rs=As[CGe]
else
set Is=Is+1
set CGe=Is
endif
if(CGe>8190)then
return 0
endif
set As[CGe]=-1
return CGe
endfunction
function p8e takes integer CGe returns nothing
if CGe==null then
return
elseif(As[CGe]!=-1)then
return
endif
set As[CGe]=Rs
set Rs=CGe
endfunction
function p9e takes nothing returns integer
local integer CGe=UQ
if(CGe!=0)then
set UQ=WQ[CGe]
else
set wQ=wQ+1
set CGe=wQ
endif
if(CGe>8190)then
return 0
endif
set WQ[CGe]=-1
return CGe
endfunction
function Pve takes integer CGe returns nothing
if CGe==null then
return
elseif(WQ[CGe]!=-1)then
return
endif
set WQ[CGe]=UQ
set UQ=CGe
endfunction
function Pee takes nothing returns integer
local integer CGe=PQ
if(CGe!=0)then
set PQ=QQ[CGe]
else
set qQ=qQ+1
set CGe=qQ
endif
if(CGe>8190)then
return 0
endif
set QQ[CGe]=-1
return CGe
endfunction
function Pxe takes integer CGe returns nothing
if CGe==null then
return
elseif(QQ[CGe]!=-1)then
return
endif
set QQ[CGe]=PQ
set PQ=CGe
endfunction
function Poe takes nothing returns integer
local integer CGe=HQ
if(CGe!=0)then
set HQ=JQ[CGe]
else
set jQ=jQ+1
set CGe=jQ
endif
if(CGe>8190)then
return 0
endif
set JQ[CGe]=-1
return CGe
endfunction
function Pre takes integer CGe returns nothing
if CGe==null then
return
elseif(JQ[CGe]!=-1)then
return
endif
set JQ[CGe]=HQ
set HQ=CGe
endfunction
function Pie takes nothing returns integer
local integer CGe=DQ
if(CGe!=0)then
set DQ=FQ[CGe]
else
set fQ=fQ+1
set CGe=fQ
endif
if(CGe>8190)then
return 0
endif
set FQ[CGe]=-1
return CGe
endfunction
function Pae takes integer CGe returns nothing
if CGe==null then
return
elseif(FQ[CGe]!=-1)then
return
endif
set FQ[CGe]=DQ
set DQ=CGe
endfunction
function Pne takes nothing returns integer
local integer CGe=EQ
if(CGe!=0)then
set EQ=OQ[CGe]
else
set XQ=XQ+1
set CGe=XQ
endif
if(CGe>8190)then
return 0
endif
set OQ[CGe]=-1
return CGe
endfunction
function PVe takes integer CGe returns nothing
if CGe==null then
return
elseif(OQ[CGe]!=-1)then
return
endif
set OQ[CGe]=EQ
set EQ=CGe
endfunction
function PEe takes nothing returns integer
local integer CGe=xQ
if(CGe!=0)then
set xQ=rQ[CGe]
else
set oQ=oQ+1
set CGe=oQ
endif
if(CGe>8190)then
return 0
endif
set rQ[CGe]=-1
return CGe
endfunction
function PXe takes integer CGe returns nothing
if CGe==null then
return
elseif(rQ[CGe]!=-1)then
return
endif
set rQ[CGe]=xQ
set xQ=CGe
endfunction
function POe takes nothing returns integer
local integer CGe=tq
if(CGe!=0)then
set tq=uq[CGe]
else
set Tq=Tq+1
set CGe=Tq
endif
if(CGe>8190)then
return 0
endif
set uq[CGe]=-1
return CGe
endfunction
function PRe takes integer CGe returns nothing
if CGe==null then
return
elseif(uq[CGe]!=-1)then
return
endif
set uq[CGe]=tq
set tq=CGe
endfunction
function PIe takes nothing returns integer
local integer CGe=Mq
if(CGe!=0)then
set Mq=Pq[CGe]
else
set pq=pq+1
set CGe=pq
endif
if(CGe>8190)then
return 0
endif
set Pq[CGe]=-1
return CGe
endfunction
function PAe takes integer CGe returns nothing
if CGe==null then
return
elseif(Pq[CGe]!=-1)then
return
endif
set Pq[CGe]=Mq
set Mq=CGe
endfunction
function PNe takes nothing returns integer
local integer CGe=jq
if(CGe!=0)then
set jq=kq[CGe]
else
set Jq=Jq+1
set CGe=Jq
endif
if(CGe>8190)then
return 0
endif
set kq[CGe]=-1
return CGe
endfunction
function Pbe takes integer CGe returns nothing
if CGe==null then
return
elseif(kq[CGe]!=-1)then
return
endif
set kq[CGe]=jq
set jq=CGe
endfunction
function PBe takes nothing returns integer
local integer CGe=fq
if(CGe!=0)then
set fq=gq[CGe]
else
set Fq=Fq+1
set CGe=Fq
endif
if(CGe>8190)then
return 0
endif
set gq[CGe]=-1
return CGe
endfunction
function Pce takes integer CGe returns nothing
if CGe==null then
return
elseif(gq[CGe]!=-1)then
return
endif
set gq[CGe]=fq
set fq=CGe
endfunction
function PCe takes nothing returns integer
local integer CGe=Bq
if(CGe!=0)then
set Bq=Cq[CGe]
else
set cq=cq+1
set CGe=cq
endif
if(CGe>8190)then
return 0
endif
set Cq[CGe]=-1
return CGe
endfunction
function Pde takes integer CGe returns nothing
if CGe==null then
return
elseif(Cq[CGe]!=-1)then
return
endif
set Cq[CGe]=Bq
set Bq=CGe
endfunction
function PDe takes nothing returns integer
local integer CGe=Rq
if(CGe!=0)then
set Rq=Aq[CGe]
else
set Iq=Iq+1
set CGe=Iq
endif
if(CGe>8190)then
return 0
endif
set Aq[CGe]=-1
return CGe
endfunction
function Pfe takes integer CGe returns nothing
if CGe==null then
return
elseif(Aq[CGe]!=-1)then
return
endif
set Aq[CGe]=Rq
set Rq=CGe
endfunction
function PFe takes nothing returns integer
local integer CGe=nq
if(CGe!=0)then
set nq=Eq[CGe]
else
set Vq=Vq+1
set CGe=Vq
endif
if(CGe>8190)then
return 0
endif
set Eq[CGe]=-1
return CGe
endfunction
function Pge takes integer CGe returns nothing
if CGe==null then
return
elseif(Eq[CGe]!=-1)then
return
endif
set Eq[CGe]=nq
set nq=CGe
endfunction
function PGe takes nothing returns integer
local integer CGe=eq
if(CGe!=0)then
set eq=oq[CGe]
else
set xq=xq+1
set CGe=xq
endif
if(CGe>8190)then
return 0
endif
set oq[CGe]=-1
return CGe
endfunction
function Phe takes integer CGe returns nothing
if CGe==null then
return
elseif(oq[CGe]!=-1)then
return
endif
set oq[CGe]=eq
set eq=CGe
endfunction
function PHe takes nothing returns integer
local integer CGe=wP
if(CGe!=0)then
set wP=yP[CGe]
else
set WP=WP+1
set CGe=WP
endif
if(CGe>8190)then
return 0
endif
set yP[CGe]=-1
return CGe
endfunction
function Pje takes integer CGe returns nothing
if CGe==null then
return
elseif(yP[CGe]!=-1)then
return
endif
set yP[CGe]=wP
set wP=CGe
endfunction
function PJe takes nothing returns integer
local integer CGe=qP
if(CGe!=0)then
set qP=sP[CGe]
else
set QP=QP+1
set CGe=QP
endif
if(CGe>8190)then
return 0
endif
set sP[CGe]=-1
return CGe
endfunction
function Pke takes integer CGe returns nothing
if CGe==null then
return
elseif(sP[CGe]!=-1)then
return
endif
set sP[CGe]=qP
set qP=CGe
endfunction
function PKe takes nothing returns integer
local integer CGe=jP
if(CGe!=0)then
set jP=kP[CGe]
else
set JP=JP+1
set CGe=JP
endif
if(CGe>8190)then
return 0
endif
set kP[CGe]=-1
return CGe
endfunction
function Ple takes integer CGe returns nothing
if CGe==null then
return
elseif(kP[CGe]!=-1)then
return
endif
set kP[CGe]=jP
set jP=CGe
endfunction
function PLe takes nothing returns integer
local integer CGe=fP
if(CGe!=0)then
set fP=gP[CGe]
else
set FP=FP+1
set CGe=FP
endif
if(CGe>8190)then
return 0
endif
set gP[CGe]=-1
return CGe
endfunction
function Pme takes integer CGe returns nothing
if CGe==null then
return
elseif(gP[CGe]!=-1)then
return
endif
set gP[CGe]=fP
set fP=CGe
endfunction
function PMe takes nothing returns integer
local integer CGe=XP
if(CGe!=0)then
set XP=RP[CGe]
else
set OP=OP+1
set CGe=OP
endif
if(CGe>8190)then
return 0
endif
set RP[CGe]=-1
return CGe
endfunction
function Ppe takes integer CGe returns nothing
if CGe==null then
return
elseif(RP[CGe]!=-1)then
return
endif
set RP[CGe]=XP
set XP=CGe
endfunction
function PPe takes nothing returns integer
local integer CGe=vP
if(CGe!=0)then
set vP=xP[CGe]
else
set eP=eP+1
set CGe=eP
endif
if(CGe>8190)then
return 0
endif
set xP[CGe]=-1
return CGe
endfunction
function Pqe takes integer CGe returns nothing
if CGe==null then
return
elseif(xP[CGe]!=-1)then
return
endif
set xP[CGe]=vP
set vP=CGe
endfunction
function PQe takes nothing returns integer
local integer CGe=Pp
if(CGe!=0)then
set Pp=Qp[CGe]
else
set qp=qp+1
set CGe=qp
endif
if(CGe>8190)then
return 0
endif
set Qp[CGe]=-1
return CGe
endfunction
function Pse takes integer CGe returns nothing
if CGe==null then
return
elseif(Qp[CGe]!=-1)then
return
endif
set Qp[CGe]=Pp
set Pp=CGe
endfunction
function PSe takes nothing returns integer
local integer CGe=jp
if(CGe!=0)then
set jp=Kp[CGe]
else
set Jp=Jp+1
set CGe=Jp
endif
if(CGe>8190)then
return 0
endif
set Kp[CGe]=-1
return CGe
endfunction
function Pte takes integer CGe returns nothing
if CGe==null then
return
elseif(Kp[CGe]!=-1)then
return
endif
set Kp[CGe]=jp
set jp=CGe
endfunction
function PTe takes nothing returns integer
local integer CGe=Cp
if(CGe!=0)then
set Cp=Dp[CGe]
else
set dp=dp+1
set CGe=dp
endif
if(CGe>8190)then
return 0
endif
set Dp[CGe]=-1
return CGe
endfunction
function Pue takes integer CGe returns nothing
if CGe==null then
return
elseif(Dp[CGe]!=-1)then
return
endif
set Dp[CGe]=Cp
set Cp=CGe
endfunction
function PUe takes nothing returns integer
local integer CGe=Xp
if(CGe!=0)then
set Xp=Rp[CGe]
else
set Op=Op+1
set CGe=Op
endif
if(CGe>8190)then
return 0
endif
set Rp[CGe]=-1
return CGe
endfunction
function Pwe takes integer CGe returns nothing
if CGe==null then
return
elseif(Rp[CGe]!=-1)then
return
endif
set Rp[CGe]=Xp
set Xp=CGe
endfunction
function PWe takes nothing returns integer
local integer CGe=op
if(CGe!=0)then
set op=ip[CGe]
else
set rp=rp+1
set CGe=rp
endif
if(CGe>8190)then
return 0
endif
set ip[CGe]=-1
return CGe
endfunction
function Pye takes integer CGe returns nothing
if CGe==null then
return
elseif(ip[CGe]!=-1)then
return
endif
set ip[CGe]=op
set op=CGe
endfunction
function PYe takes nothing returns integer
local integer CGe=WM
if(CGe!=0)then
set WM=YM[CGe]
else
set yM=yM+1
set CGe=yM
endif
if(CGe>8190)then
return 0
endif
set YM[CGe]=-1
return CGe
endfunction
function Pze takes integer CGe returns nothing
if CGe==null then
return
elseif(YM[CGe]!=-1)then
return
endif
set YM[CGe]=WM
set WM=CGe
endfunction
function PZe takes nothing returns integer
local integer CGe=PM
if(CGe!=0)then
set PM=QM[CGe]
else
set qM=qM+1
set CGe=qM
endif
if(CGe>8190)then
return 0
endif
set QM[CGe]=-1
return CGe
endfunction
function P_e takes integer CGe returns nothing
if CGe==null then
return
elseif(QM[CGe]!=-1)then
return
endif
set QM[CGe]=PM
set PM=CGe
endfunction
function P0e takes nothing returns integer
local integer CGe=kM
if(CGe!=0)then
set kM=lM[CGe]
else
set KM=KM+1
set CGe=KM
endif
if(CGe>8190)then
return 0
endif
set lM[CGe]=-1
return CGe
endfunction
function P1e takes integer CGe returns nothing
if CGe==null then
return
elseif(lM[CGe]!=-1)then
return
endif
set lM[CGe]=kM
set kM=CGe
endfunction
function P2e takes nothing returns integer
local integer CGe=gM
if(CGe!=0)then
set gM=hM[CGe]
else
set GM=GM+1
set CGe=GM
endif
if(CGe>8190)then
return 0
endif
set hM[CGe]=-1
return CGe
endfunction
function P3e takes integer CGe returns nothing
if CGe==null then
return
elseif(hM[CGe]!=-1)then
return
endif
set hM[CGe]=gM
set gM=CGe
endfunction
function P4e takes nothing returns integer
local integer CGe=cM
if(CGe!=0)then
set cM=dM[CGe]
else
set CM=CM+1
set CGe=CM
endif
if(CGe>8190)then
return 0
endif
set dM[CGe]=-1
return CGe
endfunction
function P5e takes integer CGe returns nothing
if CGe==null then
return
elseif(dM[CGe]!=-1)then
return
endif
set dM[CGe]=cM
set cM=CGe
endfunction
function P6e takes nothing returns integer
local integer CGe=IM
if(CGe!=0)then
set IM=NM[CGe]
else
set AM=AM+1
set CGe=AM
endif
if(CGe>8190)then
return 0
endif
set NM[CGe]=-1
return CGe
endfunction
function P7e takes integer CGe returns nothing
if CGe==null then
return
elseif(NM[CGe]!=-1)then
return
endif
set NM[CGe]=IM
set IM=CGe
endfunction
function P8e takes nothing returns integer
local integer CGe=iM
if(CGe!=0)then
set iM=nM[CGe]
else
set aM=aM+1
set CGe=aM
endif
if(CGe>8190)then
return 0
endif
set nM[CGe]=-1
return CGe
endfunction
function P9e takes integer CGe returns nothing
if CGe==null then
return
elseif(nM[CGe]!=-1)then
return
endif
set nM[CGe]=iM
set iM=CGe
endfunction
function qve takes nothing returns integer
local integer CGe=Wm
if(CGe!=0)then
set Wm=Ym[CGe]
else
set ym=ym+1
set CGe=ym
endif
if(CGe>8190)then
return 0
endif
set Ym[CGe]=-1
return CGe
endfunction
function qee takes integer CGe returns nothing
if CGe==null then
return
elseif(Ym[CGe]!=-1)then
return
endif
set Ym[CGe]=Wm
set Wm=CGe
endfunction
function qxe takes nothing returns integer
local integer CGe=Tm
if(CGe!=0)then
set Tm=Um[CGe]
else
set um=um+1
set CGe=um
endif
if(CGe>8190)then
return 0
endif
set Um[CGe]=-1
return CGe
endfunction
function qoe takes integer CGe returns nothing
if CGe==null then
return
elseif(Um[CGe]!=-1)then
return
endif
set Um[CGe]=Tm
set Tm=CGe
endfunction
function qre takes nothing returns integer
local integer CGe=pm
if(CGe!=0)then
set pm=qm[CGe]
else
set Pm=Pm+1
set CGe=Pm
endif
if(CGe>8190)then
return 0
endif
set qm[CGe]=-1
return CGe
endfunction
function qie takes integer CGe returns nothing
if CGe==null then
return
elseif(qm[CGe]!=-1)then
return
endif
set qm[CGe]=pm
set pm=CGe
endfunction
function qae takes nothing returns integer
local integer CGe=lm
if(CGe!=0)then
set lm=mm[CGe]
else
set Lm=Lm+1
set CGe=Lm
endif
if(CGe>8190)then
return 0
endif
set mm[CGe]=-1
return CGe
endfunction
function qne takes integer CGe returns nothing
if CGe==null then
return
elseif(mm[CGe]!=-1)then
return
endif
set mm[CGe]=lm
set lm=CGe
endfunction
function qVe takes nothing returns integer
local integer CGe=gm
if(CGe!=0)then
set gm=hm[CGe]
else
set Gm=Gm+1
set CGe=Gm
endif
if(CGe>8190)then
return 0
endif
set hm[CGe]=-1
return CGe
endfunction
function qEe takes integer CGe returns nothing
if CGe==null then
return
elseif(hm[CGe]!=-1)then
return
endif
set hm[CGe]=gm
set gm=CGe
endfunction
function qXe takes nothing returns integer
local integer CGe=Nm
if(CGe!=0)then
set Nm=Bm[CGe]
else
set bm=bm+1
set CGe=bm
endif
if(CGe>8190)then
return 0
endif
set Bm[CGe]=-1
return CGe
endfunction
function qOe takes integer CGe returns nothing
if CGe==null then
return
elseif(Bm[CGe]!=-1)then
return
endif
set Bm[CGe]=Nm
set Nm=CGe
endfunction
function qRe takes nothing returns integer
local integer CGe=em
if(CGe!=0)then
set em=om[CGe]
else
set xm=xm+1
set CGe=xm
endif
if(CGe>8190)then
return 0
endif
set om[CGe]=-1
return CGe
endfunction
function qIe takes integer CGe returns nothing
if CGe==null then
return
elseif(om[CGe]!=-1)then
return
endif
set om[CGe]=em
set em=CGe
endfunction
function qAe takes nothing returns integer
local integer CGe=yL
if(CGe!=0)then
set yL=zL[CGe]
else
set YL=YL+1
set CGe=YL
endif
if(CGe>8190)then
return 0
endif
set zL[CGe]=-1
return CGe
endfunction
function qNe takes integer CGe returns nothing
if CGe==null then
return
elseif(zL[CGe]!=-1)then
return
endif
set zL[CGe]=yL
set yL=CGe
endfunction
function qbe takes nothing returns integer
local integer CGe=QL
if(CGe!=0)then
set QL=SL[CGe]
else
set sL=sL+1
set CGe=sL
endif
if(CGe>8190)then
return 0
endif
set SL[CGe]=-1
return CGe
endfunction
function qBe takes integer CGe returns nothing
if CGe==null then
return
elseif(SL[CGe]!=-1)then
return
endif
set SL[CGe]=QL
set QL=CGe
endfunction
function qce takes nothing returns integer
local integer CGe=LL
if(CGe!=0)then
set LL=ML[CGe]
else
set mL=mL+1
set CGe=mL
endif
if(CGe>8190)then
return 0
endif
set ML[CGe]=-1
return CGe
endfunction
function qCe takes integer CGe returns nothing
if CGe==null then
return
elseif(ML[CGe]!=-1)then
return
endif
set ML[CGe]=LL
set LL=CGe
endfunction
function qde takes nothing returns integer
local integer CGe=hL
if(CGe!=0)then
set hL=jL[CGe]
else
set HL=HL+1
set CGe=HL
endif
if(CGe>8190)then
return 0
endif
set jL[CGe]=-1
return CGe
endfunction
function qDe takes integer CGe returns nothing
if CGe==null then
return
elseif(jL[CGe]!=-1)then
return
endif
set jL[CGe]=hL
set hL=CGe
endfunction
function qfe takes nothing returns integer
local integer CGe=NL
if(CGe!=0)then
set NL=BL[CGe]
else
set bL=bL+1
set CGe=bL
endif
if(CGe>8190)then
return 0
endif
set BL[CGe]=-1
return CGe
endfunction
function qFe takes integer CGe returns nothing
if CGe==null then
return
elseif(BL[CGe]!=-1)then
return
endif
set BL[CGe]=NL
set NL=CGe
endfunction
function qge takes nothing returns integer
local integer CGe=XL
if(CGe!=0)then
set XL=RL[CGe]
else
set OL=OL+1
set CGe=OL
endif
if(CGe>8190)then
return 0
endif
set RL[CGe]=-1
return CGe
endfunction
function qGe takes integer CGe returns nothing
if CGe==null then
return
elseif(RL[CGe]!=-1)then
return
endif
set RL[CGe]=XL
set XL=CGe
endfunction
function qhe takes nothing returns integer
local integer CGe=iL
if(CGe!=0)then
set iL=nL[CGe]
else
set aL=aL+1
set CGe=aL
endif
if(CGe>8190)then
return 0
endif
set nL[CGe]=-1
return CGe
endfunction
function qHe takes integer CGe returns nothing
if CGe==null then
return
elseif(nL[CGe]!=-1)then
return
endif
set nL[CGe]=iL
set iL=CGe
endfunction
function qje takes nothing returns integer
local integer CGe=ql
if(CGe!=0)then
set ql=sl[CGe]
else
set Ql=Ql+1
set CGe=Ql
endif
if(CGe>8190)then
return 0
endif
set sl[CGe]=-1
return CGe
endfunction
function qJe takes integer CGe returns nothing
if CGe==null then
return
elseif(sl[CGe]!=-1)then
return
endif
set sl[CGe]=ql
set ql=CGe
endfunction
function qke takes nothing returns integer
local integer CGe=Ll
if(CGe!=0)then
set Ll=Ml[CGe]
else
set ml=ml+1
set CGe=ml
endif
if(CGe>8190)then
return 0
endif
set Ml[CGe]=-1
return CGe
endfunction
function qKe takes integer CGe returns nothing
if CGe==null then
return
elseif(Ml[CGe]!=-1)then
return
endif
set Ml[CGe]=Ll
set Ll=CGe
endfunction
function qle takes nothing returns integer
local integer CGe=Jl
if(CGe!=0)then
set Jl=Kl[CGe]
else
set kl=kl+1
set CGe=kl
endif
if(CGe>8190)then
return 0
endif
set Kl[CGe]=-1
return CGe
endfunction
function qLe takes integer CGe returns nothing
if CGe==null then
return
elseif(Kl[CGe]!=-1)then
return
endif
set Kl[CGe]=Jl
set Jl=CGe
endfunction
function qme takes nothing returns integer
local integer CGe=Gl
if(CGe!=0)then
set Gl=Hl[CGe]
else
set hl=hl+1
set CGe=hl
endif
if(CGe>8190)then
return 0
endif
set Hl[CGe]=-1
return CGe
endfunction
function qMe takes integer CGe returns nothing
if CGe==null then
return
elseif(Hl[CGe]!=-1)then
return
endif
set Hl[CGe]=Gl
set Gl=CGe
endfunction
function qpe takes nothing returns integer
local integer CGe=dl
if(CGe!=0)then
set dl=fl[CGe]
else
set Dl=Dl+1
set CGe=Dl
endif
if(CGe>8190)then
return 0
endif
set fl[CGe]=-1
return CGe
endfunction
function qPe takes integer CGe returns nothing
if CGe==null then
return
elseif(fl[CGe]!=-1)then
return
endif
set fl[CGe]=dl
set dl=CGe
endfunction
function qqe takes nothing returns integer
local integer CGe=Nl
if(CGe!=0)then
set Nl=Bl[CGe]
else
set bl=bl+1
set CGe=bl
endif
if(CGe>8190)then
return 0
endif
set Bl[CGe]=-1
return CGe
endfunction
function qQe takes integer CGe returns nothing
if CGe==null then
return
elseif(Bl[CGe]!=-1)then
return
endif
set Bl[CGe]=Nl
set Nl=CGe
endfunction
function qse takes nothing returns integer
local integer CGe=ol
if(CGe!=0)then
set ol=il[CGe]
else
set rl=rl+1
set CGe=rl
endif
if(CGe>8190)then
return 0
endif
set il[CGe]=-1
return CGe
endfunction
function qSe takes integer CGe returns nothing
if CGe==null then
return
elseif(il[CGe]!=-1)then
return
endif
set il[CGe]=ol
set ol=CGe
endfunction
function qte takes nothing returns integer
local integer CGe=MK
if(CGe!=0)then
set MK=PK[CGe]
else
set pK=pK+1
set CGe=pK
endif
if(CGe>8190)then
return 0
endif
set PK[CGe]=-1
return CGe
endfunction
function qTe takes integer CGe returns nothing
if CGe==null then
return
elseif(PK[CGe]!=-1)then
return
endif
set PK[CGe]=MK
set MK=CGe
endfunction
function que takes nothing returns integer
local integer CGe=HK
if(CGe!=0)then
set HK=JK[CGe]
else
set jK=jK+1
set CGe=jK
endif
if(CGe>8190)then
return 0
endif
set JK[CGe]=-1
return CGe
endfunction
function qUe takes integer CGe returns nothing
if CGe==null then
return
elseif(JK[CGe]!=-1)then
return
endif
set JK[CGe]=HK
set HK=CGe
endfunction
function qwe takes nothing returns integer
local integer CGe=CK
if(CGe!=0)then
set CK=DK[CGe]
else
set dK=dK+1
set CGe=dK
endif
if(CGe>8190)then
return 0
endif
set hK[CGe]=0
set DK[CGe]=-1
return CGe
endfunction
function qWe takes integer CGe returns nothing
if CGe==null then
return
elseif(DK[CGe]!=-1)then
return
endif
set DK[CGe]=CK
set CK=CGe
endfunction
function qye takes nothing returns integer
local integer CGe=aK
if(CGe!=0)then
set aK=VK[CGe]
else
set nK=nK+1
set CGe=nK
endif
if(CGe>8190)then
return 0
endif
set VK[CGe]=-1
return CGe
endfunction
function qYe takes integer CGe returns nothing
if CGe==null then
return
elseif(VK[CGe]!=-1)then
return
endif
set VK[CGe]=aK
set aK=CGe
endfunction
function qze takes nothing returns integer
local integer CGe=xK
if(CGe!=0)then
set xK=rK[CGe]
else
set oK=oK+1
set CGe=oK
endif
if(CGe>8190)then
return 0
endif
set rK[CGe]=-1
return CGe
endfunction
function qZe takes integer CGe returns nothing
if CGe==null then
return
elseif(rK[CGe]!=-1)then
return
endif
set rK[CGe]=xK
set xK=CGe
endfunction
function q0e takes integer i,string a1 returns nothing
set cwe=a1
call TriggerEvaluate(cMe[i])
endfunction
function q1e takes integer i,unit a1,real a2 returns nothing
set cUe=a1
set cWe=a2
call TriggerExecute(cpe[i])
endfunction
function q2e takes integer i,unit a1,real a2 returns nothing
set cUe=a1
set cWe=a2
call TriggerEvaluate(cpe[i])
endfunction
function q4e takes integer i,effect a1,real a2 returns nothing
set cZe=a1
set cWe=a2
call TriggerEvaluate(cPe[i])
endfunction
function q6e takes integer i,group a1 returns nothing
set c4e=a1
call TriggerEvaluate(cQe[i])
endfunction
function q7e takes integer i,real a1,real a2,real a3,integer a4,integer a5 returns nothing
set cWe=a1
set cye=a2
set cYe=a3
set c0e=a4
set c1e=a5
call TriggerExecute(cse[i])
endfunction
function q9e takes integer i,effect a1 returns nothing
set cZe=a1
call TriggerEvaluate(cte[i])
endfunction
function Qve takes integer i,lightning a1,real a2,real a3,real a4,real a5 returns nothing
set c5e=a1
set cWe=a2
set cye=a3
set cYe=a4
set cze=a5
call TriggerEvaluate(cTe[i])
endfunction
function Qee takes integer i,lightning a1 returns nothing
set c5e=a1
call TriggerEvaluate(cue[i])
endfunction
function Qxe takes effect a0,real a1 returns nothing
call q4e(2,a0,a1)
call BlzSetSpecialEffectRoll(a0,a1)
endfunction
function Qoe takes string a0 returns nothing
call q0e(1,a0)
call BJDebugMsg(a0)
endfunction
function Qre takes effect a0 returns nothing
call q9e(1,a0)
call DestroyEffect(a0)
endfunction
function Qie takes lightning a0,real a1,real a2,real a3,real a4 returns boolean
call Qve(1,a0,a1,a2,a3,a4)
return SetLightningColor(a0,a1,a2,a3,a4)
endfunction
function Qae takes lightning a0 returns boolean
call Qee(1,a0)
return DestroyLightning(a0)
endfunction
function Qne takes group a0 returns nothing
call q6e(1,a0)
call DestroyGroup(a0)
endfunction
function QVe takes unit a0,real a1 returns nothing
call q2e(6,a0,a1)
call SetUnitMoveSpeed(a0,a1)
endfunction
function QEe takes unit QXe returns boolean
local integer i=GetHandleId(QXe)
if LoadInteger(ht,i,320)<=0 then
return true
endif
return false
endfunction
function QOe takes unit QXe returns nothing
local integer i=GetHandleId(QXe)
call SaveInteger(ht,i,320,LoadInteger(ht,i,320)+1)
endfunction
function QRe takes unit QXe returns nothing
local integer i=GetHandleId(QXe)
call SaveInteger(ht,i,320,LoadInteger(ht,i,320)-1)
endfunction
function QIe takes integer i,real QAe,boolean QNe,code Qbe returns nothing
local timer QBe=CreateTimer()
local integer id=GetHandleId(QBe)+WH
if QBe==null then
call Qoe("ExortKit_Warning: Overflow runtime blue")
return
endif
call SaveInteger(ht,id,0,i)
call SaveInteger(ht,id,2,0)
call SaveReal(ht,id,1,QAe)
call TimerStart(QBe,QAe,QNe,Qbe)
set QBe=null
endfunction
function Qce takes nothing returns integer
local integer id=GetHandleId(GetExpiredTimer())
local integer i=LoadInteger(ht,id,0)
call SaveInteger(ht,id,2,LoadInteger(ht,id,2)+1)
return i
endfunction
function QCe takes nothing returns real
local integer id=GetHandleId(GetExpiredTimer())
local real Qde=I2R(LoadInteger(ht,id,2))*LoadReal(ht,id,1)
return Qde
endfunction
function QDe takes nothing returns nothing
local timer QBe=GetExpiredTimer()
call PauseTimer(QBe)
call FlushChildHashtable(ht,GetHandleId(QBe))
call DestroyTimer(QBe)
set QBe=null
endfunction
function Qfe takes trigger QFe,playerunitevent Qge returns nothing
local integer QGe=0
local player p
loop
set p=Player(QGe)
if GetPlayerSlotState(p)==PLAYER_SLOT_STATE_PLAYING then
call TriggerRegisterPlayerUnitEvent(QFe,p,Qge,null)
endif
set QGe=QGe+1
exitwhen QGe==16
endloop
set p=null
endfunction
function Qhe takes playerunitevent p,code c returns nothing
local integer i=GetHandleId(p)
local integer k=$F
if Vv[i]==null then
set Vv[i]=CreateTrigger()
loop
call TriggerRegisterPlayerUnitEvent(Vv[i],Player(k),p,null)
exitwhen k==0
set k=k-1
endloop
endif
call TriggerAddCondition(Vv[i],Filter(c))
endfunction
function QHe takes player Qje,string QJe returns nothing
set QJe="

















|cffffcc00"+QJe+"|r"
if(GetLocalPlayer()==Qje)then
call ClearTextMessages()
call DisplayTimedTextToPlayer(Qje,.52,.96,2.,QJe)
call StartSound(o)
endif
endfunction
function Qke takes player p,string s,real d returns nothing
call DisplayTimedTextToPlayer(p,0,0,d,s)
endfunction
function QKe takes string s,real d returns nothing
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,d,s)
endfunction
function Qle takes string s,real x,real y returns nothing
local texttag QBe=null
if s!=" " then
set QBe=CreateTextTag()
call SetTextTagText(QBe,s,Iv*.023/ $A)
call SetTextTagPos(QBe,x,y,0)
set Iv=9.
call SetTextTagColor(QBe,$FF,$FF,$FF,$FF)
call SetTextTagVelocity(QBe,0,.072)
call SetTextTagPermanent(QBe,false)
call SetTextTagLifespan(QBe,1.)
call SetTextTagFadepoint(QBe,1.)
endif
set QBe=null
endfunction
function QLe takes string s,unit u returns nothing
local texttag QBe=null
if s!=" " then
set QBe=CreateTextTag()
call SetTextTagText(QBe,s,Iv*.023/ $A)
call SetTextTagPos(QBe,GetUnitX(u),GetUnitY(u),0)
set Iv=10.
call SetTextTagColor(QBe,$FF,$FF,$FF,$FF)
call SetTextTagVelocity(QBe,1.5*.0355*Cos(GetRandomReal(0,$B4)*bj_DEGTORAD),1.5*.0355*Sin(GetRandomReal(0,$B4)*bj_DEGTORAD))
call SetTextTagPermanent(QBe,false)
call SetTextTagLifespan(QBe,1.)
call SetTextTagFadepoint(QBe,1.)
endif
set QBe=null
endfunction
function Qme takes string s,real x,real y,real r returns nothing
local texttag QBe=null
if s!=" " then
set QBe=CreateTextTag()
call SetTextTagText(QBe,s,r*.023/ $A)
call SetTextTagPos(QBe,x,y,0)
call SetTextTagColor(QBe,$FF,$FF,$FF,$FF)
call SetTextTagVelocity(QBe,0,.072)
call SetTextTagPermanent(QBe,false)
call SetTextTagLifespan(QBe,1.)
call SetTextTagFadepoint(QBe,.75)
endif
set QBe=null
endfunction
function QMe takes unit u,real Qpe returns nothing
local real QPe=GetEventDamage()
if QPe<=0 then
return
endif
if Qpe>=QPe then
set QPe=GetWidgetLife(u)+QPe
else
set QPe=GetWidgetLife(u)+Qpe
endif
call SetWidgetLife(u,QPe)
if GetWidgetLife(u)<QPe then
call UnitAddAbility(u,'dprv')
call SetWidgetLife(u,QPe)
set vv=vv+1
set Z[vv]=u
call ResumeTimer(ev)
endif
endfunction
function IsDamagePhysical takes nothing returns boolean
return ov[xv]!=DAMAGE_TYPE_MAGIC and ov[xv]!=DAMAGE_TYPE_UNIVERSAL
endfunction
function IsDamageMagical takes nothing returns boolean
return ov[xv]==DAMAGE_TYPE_MAGIC
endfunction
function IsDamagePure takes nothing returns boolean
return ov[xv]==DAMAGE_TYPE_UNIVERSAL
endfunction
function QUe takes nothing returns nothing
local destructable d=GetEnumDestructable()
if(GetWidgetLife(d)>0)and not(IsDestructableInvulnerable(d))and((Pow(GetDestructableX(d)-ee,2)+Pow(GetDestructableY(d)-xe,2))<=oe)and(GetDestructableMaxLife(d)==50)then
call KillDestructable(d)
endif
set d=null
endfunction
function Qwe takes real x,real y,real QWe returns nothing
local rect r=Rect(x-QWe,y-QWe,x+QWe,y+QWe)
set ee=x
set xe=y
set oe=QWe*QWe
call EnumDestructablesInRect(r,null,function QUe)
call RemoveRect(r)
set r=null
endfunction
function Qye takes integer id returns nothing
local unit u=CreateUnit(Player($F),'nzin',0,0,270)
call UnitAddAbility(u,id)
call UnitRemoveAbility(u,id)
call RemoveUnit(u)
set u=null
endfunction
function QYe takes unit Qze returns boolean
local integer QGe=0
local integer QZe=0
local integer Q_e=UnitInventorySize(Qze)
loop
if UnitItemInSlot(Qze,QGe)==null then
return false
endif
set QGe=QGe+1
exitwhen QGe==Q_e
endloop
return true
endfunction
function Q0e takes unit Qze,integer Q1e returns item
local integer QGe=0
local item Q2e=null
set Sv=null
loop
set Q2e=UnitItemInSlot(Qze,QGe)
if(Q2e!=null)and(GetItemTypeId(Q2e)==Q1e)then
set Sv=Q2e
set QGe=6
endif
set QGe=QGe+1
exitwhen QGe>=6
endloop
set Q2e=null
return Sv
endfunction
function Q3e takes unit u,real r returns nothing
call TriggerSleepAction(.01)
call SetUnitState(u,UNIT_STATE_MANA,GetUnitState(u,UNIT_STATE_MANA)+r)
set u=null
endfunction
function Q4e takes unit u,real r returns nothing
call TriggerSleepAction(.01)
call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+r)
set u=null
endfunction
function Q5e takes effect a,real Q6e returns nothing
call TriggerSleepAction(Q6e)
call Qre(a)
set a=null
endfunction
function Q7e takes unit u,real Q6e returns nothing
call TriggerSleepAction(Q6e)
call RemoveUnit(u)
set u=null
endfunction
function Q8e takes unit u,real Q6e returns nothing
call TriggerSleepAction(Q6e)
call SetUnitTimeScale(u,0)
set u=null
endfunction
function Q9e takes unit u,real Q6e returns nothing
call TriggerSleepAction(Q6e)
call PauseUnit(u,true)
set u=null
endfunction
function sve takes unit u,real Q6e returns nothing
call q1e(3,u,Q6e)
set u=null
endfunction
function see takes real r returns boolean
return GetRandomReal(0,'d')<=r
endfunction
function GetElapsedGameTime takes nothing returns real
return TimerGetElapsed(rv)
endfunction
function IsGameDay takes nothing returns boolean
if(GetFloatGameState(GAME_STATE_TIME_OF_DAY)>6. and GetFloatGameState(GAME_STATE_TIME_OF_DAY)<18.)then
return true
else
return false
endif
endfunction
function sxe takes real x,real y returns real
call MoveLocation(V,x,y)
return GetLocationZ(V)
endfunction
function soe takes real x1,real y1,real x2,real y2 returns real
return bj_RADTODEG*Atan2(y2-y1,x2-x1)
endfunction
function sre takes real x1,real y1,real x2,real y2 returns real
local real dx=x2-x1
local real dy=y2-y1
return SquareRoot(dx*dx+dy*dy)
endfunction
function sie takes unit u returns real
call MoveLocation(V,GetUnitX(u),GetUnitY(u))
return GetLocationZ(V)+GetUnitFlyHeight(u)
endfunction
function sne takes string s,string sVe,integer sEe,integer sXe returns string
local integer i=StringLength(s)
local integer p=1
loop
exitwhen p*sEe+sXe>=i
set s=SubString(s,0,p*sEe+p+sXe-1)+sVe+SubString(s,p*sEe+p+sXe-1,StringLength(s))
set p=p+1
endloop
return s
endfunction
function sOe takes string s returns string
local integer i=StringLength(s)
local string rs=""
loop
set i=i-1
set rs=rs+SubString(s,i,i+1)
exitwhen i==0
endloop
return rs
endfunction
function sRe takes handle sIe,integer sAe,integer sNe returns nothing
call SaveInteger(ve,sAe,GetHandleId(sIe),sNe)
endfunction
function sbe takes handle sIe,integer sAe returns integer
return LoadInteger(ve,sAe,GetHandleId(sIe))
endfunction
function sBe takes player p returns boolean
return GetPlayerSlotState(p)==PLAYER_SLOT_STATE_PLAYING and GetPlayerController(p)==MAP_CONTROL_USER
endfunction
function sce takes player p returns boolean
return GetPlayerSlotState(p)==PLAYER_SLOT_STATE_LEFT and GetPlayerController(p)==MAP_CONTROL_USER
endfunction
function sCe takes nothing returns player
local integer i=0
loop
exitwhen i==$C
if GetPlayerSlotState(Player(i))==PLAYER_SLOT_STATE_PLAYING and GetPlayerController(Player(i))==MAP_CONTROL_USER then
return Player(i)
endif
set i=i+1
endloop
return null
endfunction
function sde takes player p returns integer
local integer a1=GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)
local integer a2=CJ[GetPlayerId(p)+1]
if a1!=a2 then
return 0
endif
return a1
endfunction
function sDe takes player p,integer r returns nothing
local integer i=GetPlayerId(p)+1
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,sde(p)+r)
call SetPlayerState(p,PLAYER_STATE_GOLD_GATHERED,GetPlayerState(p,PLAYER_STATE_GOLD_GATHERED)+r)
set CJ[i]=CJ[i]+r
endfunction
function sfe takes player p,integer r returns nothing
call SetPlayerState(p,PLAYER_STATE_RESOURCE_LUMBER,(GetPlayerState((p),PLAYER_STATE_RESOURCE_LUMBER))+r)
call SetPlayerState(p,PLAYER_STATE_LUMBER_GATHERED,GetPlayerState(p,PLAYER_STATE_LUMBER_GATHERED)+r)
endfunction
function sFe takes unit u,integer i returns nothing
call UnitAddAbility(u,i)
call UnitMakeAbilityPermanent(u,true,i)
endfunction
function sge takes unit sGe returns nothing
call PauseUnit(sGe,true)
call IssueImmediateOrderById(sGe,$D0004)
call PauseUnit(sGe,false)
endfunction
function she takes unit u returns nothing
call SetUnitPropWindow(u,GetUnitDefaultPropWindow(u)*bj_DEGTORAD)
endfunction
function sHe takes unit u returns nothing
local integer id=GetHandleId(u)
local real r=LoadReal(ht,id,$881)
if r==0 then
call SaveReal(ht,id,$881,GetUnitTurnSpeed(u))
endif
call SetUnitTurnSpeed(u,0)
endfunction
function sje takes unit u returns nothing
local integer id=GetHandleId(u)
local real r=LoadReal(ht,id,$881)
if r!=0 then
call SetUnitTurnSpeed(u,r)
else
call SetUnitTurnSpeed(u,GetUnitTurnSpeed(u))
endif
endfunction
function sJe takes nothing returns nothing
local integer CGe=Qce()
call FogModifierStop(iK[CGe])
call DestroyFogModifier(iK[CGe])
set iK[CGe]=null
call QDe()
call qZe(CGe)
endfunction
function spe takes unit u returns boolean
return GetUnitTypeId(u)<1 or IsUnitType(u,UNIT_TYPE_DEAD)
endfunction
function sPe takes nothing returns boolean
local integer CGe=Qce()
set EK[CGe]=EK[CGe]+AK[CGe]
set XK[CGe]=XK[CGe]+NK[CGe]
set OK[CGe]=OK[CGe]+bK[CGe]
set RK[CGe]=RK[CGe]+BK[CGe]
if QCe()>cK[CGe]then
call QDe()
set IK[CGe]=null
call qYe(CGe)
else
call SetUnitVertexColor(IK[CGe],R2I(EK[CGe]),R2I(XK[CGe]),R2I(OK[CGe]),R2I(RK[CGe]))
endif
return false
endfunction
function sqe takes unit u,integer r,integer g,integer b,integer a,integer nr,integer ng,integer nb,integer na,real sQe returns nothing
local integer CGe=qye()
local integer sse=R2I(sQe/ .03125)
call SetUnitVertexColor(u,r,g,b,a)
set EK[CGe]=I2R(r)
set XK[CGe]=I2R(g)
set OK[CGe]=I2R(b)
set RK[CGe]=I2R(a)
set AK[CGe]=(nr-r)/ I2R(sse)
set bK[CGe]=(ng-g)/ I2R(sse)
set NK[CGe]=(nb-b)/ I2R(sse)
set BK[CGe]=(na-a)/ I2R(sse)
set IK[CGe]=u
set cK[CGe]=sQe
call QIe(CGe,.03125,true,function sPe)
endfunction
function sSe takes nothing returns boolean
return IsUnitInRangeXY(GetFilterUnit(),ie,ae,Ve)
endfunction
function ste takes nothing returns nothing
if Ee then
call GroupClear(Xe)
set Ee=false
endif
call GroupAddUnit(Xe,GetEnumUnit())
endfunction
function sTe takes nothing returns nothing
set av=av+1
if(GetRandomInt(1,av)==1)then
set iv=GetEnumUnit()
endif
endfunction
function sue takes group g returns unit
set av=0
set iv=null
call ForGroup(g,function sTe)
return iv
endfunction
function sUe takes nothing returns nothing
local unit e=GetEnumUnit()
call GroupAddUnit(bj_groupAddGroupDest,e)
set e=null
endfunction
function swe takes nothing returns nothing
local integer CGe=Qce()
local integer sWe=R2I(GK[CGe]/ .03125)
local integer id=GetHandleId(fK[CGe])
set hK[CGe]=hK[CGe]+1
if ModuloInteger(hK[CGe],sWe)==0 then
call Qae(fK[CGe])
set fK[CGe]=null
call QDe()
call qWe(CGe)
return
endif
set gK[CGe]=gK[CGe]-FK[CGe]
if LoadReal(ht,id,5)>0 then
call Qie(fK[CGe],LoadReal(ht,id,1),LoadReal(ht,id,2),LoadReal(ht,id,3),gK[CGe])
else
call Qie(fK[CGe],1.,1.,1.,gK[CGe])
endif
endfunction
function sye takes lightning g,real e returns nothing
local integer CGe=qwe()
local integer id=GetHandleId(g)
set fK[CGe]=g
if LoadReal(ht,id,5)>0 then
set gK[CGe]=LoadReal(ht,id,4)
else
set gK[CGe]=1.
endif
set GK[CGe]=e
set FK[CGe]=gK[CGe]/(e/ .03125)
call QIe(CGe,.03125,true,function swe)
endfunction
function sYe takes nothing returns boolean
local integer CGe=Qce()
if QCe()>lK[CGe]or IsUnitType(kK[CGe],UNIT_TYPE_DEAD)or IsUnitType(KK[CGe],UNIT_TYPE_DEAD)then
call sye(mK[CGe],.1)
if LK[CGe]!=null then
set Dv=kK[CGe]
call ExecuteFunc(LK[CGe])
endif
set kK[CGe]=null
set KK[CGe]=null
call qUe(CGe)
call QDe()
else
call MoveLightningEx(mK[CGe],true,GetUnitX(kK[CGe]),GetUnitY(kK[CGe]),sie(kK[CGe])+56.,GetUnitX(KK[CGe]),GetUnitY(KK[CGe]),sie(KK[CGe])+56.)
endif
return false
endfunction
function sze takes nothing returns nothing
if IsItemVisible(GetEnumItem())then
set Ae[Ne]=GetEnumItem()
call SetItemVisible(Ae[Ne],false)
set Ne=Ne+1
endif
endfunction
function sZe takes real x2,real y2 returns boolean
local real s_e=0
local real s0e=0
call MoveRectTo(Ie,x2,y2)
call EnumItemsInRect(Ie,null,function sze)
call SetItemPosition(Re,x2,y2)
set s_e=GetItemX(Re)
set s0e=GetItemY(Re)
call SetItemVisible(Re,false)
loop
exitwhen Ne<=0
set Ne=Ne-1
call SetItemVisible(Ae[Ne],true)
set Ae[Ne]=null
endloop
return(s_e-x2)*(s_e-x2)+(s0e-y2)*(s0e-y2)<=10.*10. and not IsTerrainPathable(x2,y2,PATHING_TYPE_WALKABILITY)
endfunction
function s1e takes unit u,rect r returns boolean
return(GetUnitX(u)>GetRectMinX(r)-32 and GetUnitX(u)<GetRectMaxX(r)+32)and(GetUnitY(u)>GetRectMinY(r)-32 and GetUnitY(u)<GetRectMaxY(r)+32)
endfunction
function s2e takes nothing returns boolean
if GetDestructableLife(GetFilterDestructable())>0 and GetDestructableOccluderHeight(GetFilterDestructable())>ce then
set de=true
endif
return false
endfunction
function s3e takes nothing returns nothing
local integer CGe=Qce()
local real x
local unit un
local real y
local real z
local real fh
set x=GetUnitX(qK[CGe])+sK[CGe]
set y=GetUnitY(qK[CGe])+SK[CGe]
set z=sxe(x,y)-QK[CGe]
set tK[CGe]=tK[CGe]+TK[CGe]
set fh=UK[CGe]*tK[CGe]-uK[CGe]*tK[CGe]*tK[CGe]/ 2.-z+YK[CGe]
if tK[CGe]<wK[CGe]then
set de=false
if vl[CGe]>0 then
call SetRect(be,x-vl[CGe],y-vl[CGe],x+vl[CGe],y+vl[CGe])
call EnumDestructablesInRect(be,Condition(function s2e),null)
endif
if fh<ZK[CGe]and not de then
set ce=fh
call GroupEnumUnitsInRange(Be,x,y,197.,null)
call GroupRemoveUnit(Be,qK[CGe])
loop
set un=FirstOfGroup(Be)
exitwhen un==null or de
if IsUnitInRange(un,qK[CGe],zK[CGe]+1)and not IsUnitType(un,UNIT_TYPE_DEAD)and not IsUnitType(un,UNIT_TYPE_FLYING)then
set de=true
set un=null
set sK[CGe]=0
set SK[CGe]=0
set WK[CGe]=GetUnitX(qK[CGe])
set yK[CGe]=GetUnitY(qK[CGe])
call GroupClear(Be)
else
call GroupRemoveUnit(Be,un)
endif
endloop
if not de then
call SetUnitX(qK[CGe],x)
call SetUnitY(qK[CGe],y)
endif
elseif not de then
call SetUnitX(qK[CGe],x)
call SetUnitY(qK[CGe],y)
else
set sK[CGe]=0
set SK[CGe]=0
set WK[CGe]=GetUnitX(qK[CGe])
set yK[CGe]=GetUnitY(qK[CGe])
endif
call SetUnitFlyHeight(qK[CGe],fh,0)
else
if not xl[CGe]then
call SetUnitX(qK[CGe],WK[CGe])
call SetUnitY(qK[CGe],yK[CGe])
endif
call sje(qK[CGe])
call she(qK[CGe])
call SetUnitFlyHeight(qK[CGe],YK[CGe],0)
call QDe()
if el[CGe]!=null then
set Fv=qK[CGe]
set E=CGe
call ExecuteFunc(el[CGe])
endif
set qK[CGe]=null
call qTe(CGe)
return
endif
endfunction
function s4e takes nothing returns boolean
local integer CGe=Qce()
local trigger QBe=GetTriggeringTrigger()
local real x=GetUnitX(al[CGe])+Xl[CGe]*Cos(Rl[CGe])
local real y=GetUnitY(al[CGe])+Xl[CGe]*Sin(Rl[CGe])
local boolean w=sZe(x,y)
if Vl[CGe]then
call Qwe(x,y,$96)
endif
if QCe()>Ol[CGe]or not w or El[CGe]then
if w==false then
call Qre(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",x,y))
endif
if not nl[CGe]then
call SetUnitPathing(al[CGe],true)
endif
call QDe()
set Xl[CGe]=0
set Ol[CGe]=0
set al[CGe]=null
set El[CGe]=false
set Il[CGe]=null
set Vl[CGe]=false
set Al[CGe]=false
set nl[CGe]=false
call qSe(CGe)
else
if Il[CGe]!=null then
call Qre(AddSpecialEffect(Il[CGe],x,y))
endif
if nl[CGe]then
call SetUnitX(al[CGe],x)
call SetUnitY(al[CGe],y)
else
call SetUnitPosition(al[CGe],x,y)
endif
endif
set QBe=null
return false
endfunction
function s5e takes unit u,real s6e,real sQe,real fa,boolean s7e,boolean s8e returns nothing
local integer CGe=qse()
call SaveInteger(ht,GetHandleId(u),641,CGe)
if Bv then
set Al[CGe]=Bv
set Bv=false
endif
if bv!=null then
set Il[CGe]=bv
set bv=null
endif
set El[CGe]=false
set nl[CGe]=s7e
set Vl[CGe]=s8e
set Rl[CGe]=fa*bj_DEGTORAD
set Xl[CGe]=(s6e/(sQe/ .03125))
set al[CGe]=u
set Ol[CGe]=sQe
if not s7e then
call SetUnitPathing(al[CGe],false)
endif
call QIe(CGe,.03125,true,function s4e)
endfunction
function s9e takes nothing returns boolean
local unit u=GetFilterUnit()
if GetWidgetLife(u)>4.05 and GetUnitAbilityLevel(u,'Ablp')==0 then
if UnitAddAbility(u,'Ablp')and UnitMakeAbilityPermanent(u,true,'Ablp')then
set fe=fe+1
set iu[fe]=u
call SetUnitUserData(u,fe)
call TriggerExecute(Fe)
endif
if UnitAddAbility(u,'Amrf')and UnitRemoveAbility(u,'Amrf')then
endif
endif
set u=null
return true
endfunction
function Sve takes nothing returns boolean
local integer i=0
local region r=CreateRegion()
call RegionAddRect(r,kv)
call TriggerRegisterEnterRegion(CreateTrigger(),r,Filter(function s9e))
set bj_lastCreatedGameCache=InitGameCache("0X0092847A1.w3v")
if SaveGameCache(bj_lastCreatedGameCache)then
set Ov=false
else
set Ov=true
endif
call GroupEnumUnitsInRect(bj_lastCreatedGroup,kv,Filter(function s9e))
loop
call SetPlayerAbilityAvailable(Player(i),'Ablp',false)
set i=i+1
exitwhen i==16
endloop
set r=null
return false
endfunction
function See takes nothing returns nothing
local trigger QBe=CreateTrigger()
call TriggerRegisterTimerEvent(QBe,.01,false)
call TriggerAddCondition(QBe,Condition(function Sve))
call Qye('Ablp')
set QBe=null
endfunction
function Sxe takes unit u returns integer
if u==null then
call Qoe("ExortKit_Warning: getIndex: unit is wrong")
return 0
endif
return GetUnitUserData(u)
endfunction
function Soe takes nothing returns boolean
local string Sre
if Ev then
return true
endif
if(GetLocalizedString("DOWNLOADING_MAP")=="DOWNLOADING_MAP")then
return false
endif
set Sre=GetLocalizedString("ERROR_ID_CDKEY_INUSE")
if(SubString(Sre,StringLength(Sre)-1,StringLength(Sre))==")")then
return false
endif
set Sre=GetLocalizedString("WINDOW_MODE_WINDOWED")
if(Sre=="WINDOW_MODE_WINDOWED")then
return false
endif
if Ev==false then
set Ev=true
endif
return true
endfunction
function Sie takes nothing returns boolean
return LoadStr(ht,GetItemTypeId(GetManipulatedItem()),$5128)!=null
endfunction
function Sae takes nothing returns nothing
local unit u=GetManipulatingUnit()
local item it=GetManipulatedItem()
local string s=LoadStr(ht,GetItemTypeId(it),$5128)
local integer a=LoadInteger(ht,GetItemTypeId(it),$5129)
local integer i=1
local boolean Sne=false
loop
exitwhen i>6
if(s==LoadStr(ht,GetItemTypeId(UnitItemInSlot(u,i-1)),$5128))and it!=UnitItemInSlot(u,i-1)then
set Sne=true
endif
set mv=LoadInteger(ht,GetItemTypeId(UnitItemInSlot(u,i-1)),$5129)
if(mv>0)and(a!=0)and(a!=mv)then
set Sne=true
endif
set i=i+1
endloop
if Sne then
call QHe(GetOwningPlayer(u),"This item is limited.")
call UnitRemoveItem(u,it)
endif
set s=null
set it=null
set u=null
endfunction
function SVe takes nothing returns nothing
local trigger QBe=CreateTrigger()
call Qfe(QBe,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(QBe,Condition(function Sie))
call TriggerAddAction(QBe,function Sae)
endfunction
function SEe takes nothing returns nothing
local item QBe=GetManipulatedItem()
local real r=0
local boolean Sne=false
set D=GetItemTypeId(QBe)
set C=0
loop
exitwhen C>(F-1)
if(D==G[C])then
set Sne=true
set r=H[C]
set Sne=J[C]
endif
set C=C+1
endloop
if(Sne==false)then
return
endif
call SetItemDroppable(QBe,false)
call TriggerSleepAction(r)
if(Sne)then
call SetItemDroppable(QBe,true)
endif
set QBe=null
endfunction
function SXe takes nothing returns nothing
local trigger QBe=CreateTrigger()
call Qfe(QBe,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddAction(QBe,function SEe)
set QBe=null
endfunction
function SOe takes nothing returns nothing
local integer i=0
set N0e[0]="|c00ff0303"
set N0e[1]="|c000042ff"
set N0e[2]="|c001ce6b9"
set N0e[3]="|c00540081"
set N0e[4]="|c00fffc01"
set N0e[5]="|c00ff8000"
set N0e[6]="|c0020c000"
set N0e[7]="|c00e55bb0"
set N0e[8]="|c00959697"
set N0e[9]="|c007ebff1"
set N0e[$A]="|c00106246"
set N0e[$B]="|c004e2a04"
set N0e[$C]="|cffcfcfcf"
set N0e[$D]="|cffcfcfcf"
set N0e[$E]="|cffcfcfcf"
set N0e[$F]="|cffcfcfcf"
loop
exitwhen i>$F
set N1e[i]=GetPlayerName(Player(i))
set N2e[i]=N0e[i]+N1e[i]+"|r"
set i=i+1
endloop
endfunction
function LogClear takes nothing returns nothing
local integer i=0
loop
exitwhen i>N
set O[i]=""
set i=i+1
endloop
set N=0
endfunction
function SRe takes nothing returns nothing
local integer i=0
call PreloadGenClear()
call PreloadGenStart()
loop
exitwhen i>N
call Preload("\")
"+O[i]+"
(\"")
set i=i+1
endloop
call PreloadGenEnd("logs\\DebugLog.txt")
endfunction
function SIe takes string s returns nothing
local string SAe=I2S(jv)
if jv<$A then
set SAe="0"+SAe
endif
set O[N]="["+I2S(Jv)+":"+SAe+"] "+s+"
"
set N=N+1
set SAe=""
endfunction
function SNe takes effect Sbe,real SBe returns nothing
if Soe()then
call BlzSetSpecialEffectYaw(Sbe,SBe)
return
endif
endfunction
function Sce takes nothing returns boolean
local item SCe=GetManipulatedItem()
if GetWidgetLife(SCe)==0 then
call RemoveItem(SCe)
endif
set SCe=null
return false
endfunction
function Sde takes nothing returns nothing
local trigger QFe=CreateTrigger()
call Qfe(QFe,EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddCondition(QFe,Condition(function Sce))
set QFe=null
endfunction
function ExortKit___callback takes nothing returns nothing
if GetDestructableLife(GetFilterDestructable())<=0 then
call DestructableRestoreLife(GetEnumDestructable(),GetDestructableMaxLife(GetEnumDestructable()),false)
endif
endfunction
function SDe takes nothing returns nothing
local integer i=0
set jv=jv+1
if jv>59 then
set jv=0
set Jv=Jv+1
endif
endfunction
function Sfe takes nothing returns nothing
local real r=0
local unit u=null
loop
exitwhen vv==0
set u=Z[vv]
set r=GetWidgetLife(u)
call UnitRemoveAbility(u,'dprv')
if r>.405 then
call SetWidgetLife(u,r)
endif
set vv=vv-1
endloop
set u=null
endfunction
function SFe takes nothing returns boolean
return true
endfunction
function Sge takes nothing returns boolean
local unit u=GetTriggerUnit()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
if GetUnitTypeId(u)!='n00K' then
if(x>M)then
set x=M
elseif(x<L)then
set x=L
endif
if(y>Q)then
set y=Q
elseif(y<P)then
set y=P
endif
call SetUnitX(u,x)
call SetUnitY(u,y)
set u=null
endif
return false
endfunction
function SGe takes nothing returns nothing
local trigger QBe=CreateTrigger()
local region r=CreateRegion()
local rect rc=Rect(L,P,M,Q)
call RegionAddRect(r,rc)
call RemoveRect(rc)
call TriggerRegisterLeaveRegion(QBe,r,null)
call TriggerAddCondition(QBe,Condition(function Sge))
set rc=null
endfunction
function She takes nothing returns nothing
local integer id=GetHandleId(GetTriggerUnit())
call SaveBoolean(ht,$5514,id,not LoadBoolean(ht,$5514,id))
endfunction
function SHe takes nothing returns nothing
local unit u
local boolean Sje
set u=CreateUnit(Hv,'hfoo',0,0,0)
call SelectUnit(u,true)
set Sje=IsUnitSelected(u,Hv)
call RemoveUnit(u)
set u=null
if(Sje)then
if(ReloadGameCachesFromDisk())then
set Rv=false
else
set Rv=true
endif
else
set Rv=false
endif
endfunction
function SJe takes nothing returns nothing
call SetUnitColor(GetEnumUnit(),bj_setPlayerTargetColor)
endfunction
function Ske takes player SKe,playercolor Sle,boolean SLe returns nothing
local group g
call SetPlayerColor(SKe,Sle)
if SLe then
set bj_setPlayerTargetColor=Sle
set g=CreateGroup()
call GroupEnumUnitsOfPlayer(g,SKe,null)
call ForGroup(g,function SJe)
call Qne(g)
endif
endfunction
function Sme takes nothing returns nothing
set o=CreateSoundFromLabel("InterfaceError",false,false,false,$A,$A)
set L=GetRectMinX(bj_mapInitialPlayableArea)
set M=GetRectMaxX(bj_mapInitialPlayableArea)
set P=GetRectMinY(bj_mapInitialPlayableArea)
set Q=GetRectMaxY(bj_mapInitialPlayableArea)
set Ie=Rect(.0,.0,480.,480.)
set mv=BlzBitAnd(1,1)
set kv=GetWorldBounds()
set S=GetRectMaxX(kv)
set U=GetRectMinX(kv)
set T=GetRectMaxY(kv)
set W=GetRectMinY(kv)
call Preload("435983460.blp")
call SetAltMinimapIcon("435983460.blp")
call SOe()
call TimerStart(CreateTimer(),1.,true,function SDe)
call TimerStart(rv,$F4240,false,null)
call SGe()
call SXe()
call TimerStart(ev,.1,false,function Sfe)
call Sde()
call SVe()
set Re=CreateItem('wolg',1,1)
call SetItemVisible(Re,false)
set Hv=sCe()
set Xv=bj_isSinglePlayer
set Wv=Condition(function SFe)
set re=Condition(function sSe)
call See()
call SHe()
call Qhe(EVENT_PLAYER_UNIT_SPELL_CHANNEL,function She)
call Qhe(EVENT_PLAYER_UNIT_SPELL_ENDCAST,function She)
call Ske(Player(0),PLAYER_COLOR_MAROON,true)
call Ske(Player(1),PLAYER_COLOR_NAVY,true)
call Ske(Player(2),PLAYER_COLOR_TURQUOISE,true)
call Ske(Player(3),PLAYER_COLOR_VIOLET,true)
call Ske(Player(4),PLAYER_COLOR_WHEAT,true)
call Ske(Player(5),PLAYER_COLOR_PEACH,true)
endfunction
function SMe takes unit Spe returns nothing
call UnitDamageTarget(Spe,Spe,999999.,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_DIVINE,WEAPON_TYPE_WHOKNOWS)
if not IsUnitType(Spe,UNIT_TYPE_DEAD)then
endif
return
endfunction
function SPe takes effect Sbe returns nothing
if Sbe==null then
return
endif
endfunction
function Sqe takes lightning SQe,real r,real g,real Sne,real a returns nothing
local integer id=GetHandleId(SQe)
call SaveReal(ht,id,1,r)
call SaveReal(ht,id,2,g)
call SaveReal(ht,id,3,Sne)
call SaveReal(ht,id,4,a)
call SaveReal(ht,id,5,1)
endfunction
function Sse takes lightning l returns nothing
local integer id=GetHandleId(l)
if l==null then
return
endif
call FlushChildHashtable(ht,id)
endfunction
function SSe takes group g returns nothing
if(g==sv)then
call Qoe("ExortKit_Warning: TempGroup has been destroy!!!")
endif
endfunction
function Ste takes integer id,integer a1,integer a2,integer a3,integer a4 returns nothing
call SaveInteger(IT,id,6568,a1)
call SaveInteger(IT,id,89,a2)
call SaveInteger(IT,id,462,a3)
call SaveInteger(IT,id,544,a4)
endfunction
function STe takes nothing returns nothing
call Ste('I0A2',$3E8,1,0,'d')
call Ste('I0A4',$7D0,'d',0,300)
call Ste('I0A5',$E10,$C8,1,600)
call Ste('I0A6',6000,$C8,3,$4B0)
call Ste('I0A7',8800,$C8,5,$960)
call Ste('I0A3',$C8,1,0,'d')
call Ste('I0A8',400,'d',0,300)
call Ste('I0A9',700,$C8,1,600)
call Ste('I0AA',$44C,$C8,3,$4B0)
call Ste('I0AB',$7D0,$C8,5,$960)
endfunction
function Sue takes integer id,integer a1,integer a2,integer a3 returns nothing
call SaveInteger(UH,id,ke,a1)
call SaveInteger(UH,id,5510,a2)
call SaveInteger(UH,id,Ke,a3)
endfunction
function SUe takes nothing returns nothing
set cj[1]='I00E'
set cj[2]='I00F'
set cj[3]='I00G'
set cj[4]='I00H'
set cj[5]='I00I'
set cj[6]='I00J'
set cj[7]='I00K'
set cj[8]='I00L'
set cj[9]='I00M'
set cj[$A]='I00N'
set cj[$B]='I00O'
set cj[$C]='I00P'
set cj[$D]='I00Q'
set cj[$E]='I00R'
set cj[$F]='I00S'
set cj[16]='I00T'
set cj[17]='I01H'
set cj[18]='I00U'
set cj[19]='I00V'
set cj[20]='I00W'
set cj[21]='I00X'
set cj[22]='I00Y'
set cj[23]='I00Z'
set cj[24]='I010'
set cj[25]='I011'
set cj[26]='I012'
set cj[27]='I013'
set cj[28]='I014'
set cj[29]='I015'
set cj[30]='I016'
set cj[31]='I017'
set cj[32]='I018'
set cj[33]='I019'
set cj[34]='I01A'
set cj[35]='I01B'
set cj[36]='I01C'
set cj[37]='I01D'
set cj[38]='I01E'
set cj[39]='I01F'
set cj[40]='I01G'
set cj[41]='I01I'
set cj[42]='I01J'
set cj[43]='I01K'
set cj[44]='I01L'
set cj[45]='I01M'
set cj[46]='I01N'
set cj[47]='I01O'
set cj[48]='I01P'
set cj[49]='I01Q'
set cj[50]='I06J'
set cj[51]='I06K'
set cj[52]='I06L'
set cj[53]='I06M'
set cj[54]='I06N'
set cj[55]='I06O'
set cj[56]='I0IA'
set cj[57]='I0IB'
set cj[58]='I0IC'
set cj[59]='I0ID'
set cj[60]='I0IE'
call Sue('n000',cj[1],0,1)
call Sue('n001',cj[$B],0,1)
call Sue('n002',0,cj[21],1)
call Sue('n003',cj[2],0,2)
call Sue('n004',cj[$C],0,2)
call Sue('n005',0,cj[22],2)
call Sue('n009',cj[3],0,3)
call Sue('n00B',cj[$D],0,3)
call Sue('n00A',0,cj[23],3)
call Sue('n00C',cj[4],0,4)
call Sue('n00D',cj[$E],0,4)
call Sue('n00E',0,cj[24],4)
call Sue('n008',cj[$F],0,5)
call Sue('n007',cj[5],0,5)
call Sue('n006',0,cj[25],5)
call Sue('n00I',cj[6],0,6)
call Sue('n00J',cj[16],0,6)
call Sue('n00K',0,cj[26],6)
call Sue('n00H',cj[17],0,7)
call Sue('n00G',cj[7],0,7)
call Sue('n00F',0,cj[27],7)
call Sue('n00L',cj[8],0,7)
call Sue('n00M',cj[18],0,7)
call Sue('n00N',0,cj[27],7)
call Sue('n04Z',0,cj[41],8)
call Sue('n054',0,cj[42],8)
call Sue('n01P',cj[31],0,0)
call Sue('n01R',cj[32],0,0)
call Sue('n01S',cj[33],0,0)
call Sue('n01Q',cj[34],0,0)
call Sue('n01T',cj[35],0,0)
call Sue('n01U',cj[36],0,0)
call Sue('n01V',cj[37],0,0)
call Sue('n01W',cj[38],0,0)
endfunction
function Swe takes integer id,integer a1,integer a2,integer a3,integer a4 returns nothing
call SaveInteger(IT,id,544,a1)
call SaveInteger(IT,id,5789,a2)
call SaveInteger(IT,id,lo,a3)
call SaveInteger(IT,id,8105,a4)
endfunction
function SWe takes nothing returns nothing
call Swe('I01U',$7D0,2,0,0)
call Swe('I01V',$7D0,6,0,0)
call Swe('I01W',$7D0,7,0,0)
call Swe('I01X',$7D0,5,0,0)
call Swe('I01Y',$7D0,$A,0,0)
call Swe('I01Z',$FA0,1,0,0)
call Swe('I020',$FA0,9,0,0)
call Swe('I021',$FA0,3,0,0)
call Swe('I022',$FA0,$B,0,0)
call Swe('I023',8000,8,5,0)
call Swe('I024',8000,8,1,0)
call Swe('I025',8000,8,2,0)
call Swe('I028',8000,8,4,0)
call Swe('I026',8000,8,6,0)
call Swe('I027',8000,8,3,0)
call Swe('I02A',8000,8,7,0)
call Swe('I029',8000,8,8,0)
call Swe('I0GG',8000,8,9,0)
call Swe('I02B',0,0,0,1)
call Swe('I02C',0,0,0,2)
call Swe('I02D',0,0,0,3)
call Swe('I02E',0,0,0,4)
call Swe('I02F',0,0,0,5)
call Swe('I02G',0,0,0,6)
call Swe('I02H',0,0,0,7)
call Swe('I02I',0,0,0,8)
call Swe('I02J',0,0,0,9)
call Swe('I02K',0,0,0,$A)
call Swe('I02L',0,0,0,$B)
call Swe('I02M',0,0,0,$C)
call Swe('I02N',0,0,0,$D)
call Swe('I02O',0,0,0,$E)
call Swe('I02P',0,0,0,$F)
endfunction
function Sye takes integer id,integer SYe,integer Sze,integer SZe,integer S_e,integer QZe returns nothing
call SaveInteger(IT,id,He,SYe)
call SaveInteger(IT,id,je,Sze)
call SaveInteger(IT,id,Je,SZe)
call SaveInteger(IT,id,7882,S_e)
call SaveInteger(IT,id,6659,QZe)
endfunction
function S0e takes nothing returns nothing
call Sye($1ADB1,cj[1],0,0,0,4)
call Sye($1ADB2,cj[2],cj[1],0,0,5)
call Sye($1ADB3,cj[3],cj[2],0,0,5)
call Sye($1ADB4,cj[4],cj[3],0,0,5)
call Sye($1ADB5,cj[5],cj[4],0,0,5)
call Sye($1ADB6,cj[6],cj[5],0,0,5)
call Sye($1ADB7,cj[7],cj[6],cj[41],0,6)
call Sye($1ADB8,cj[8],cj[7],cj[41],0,6)
call Sye($1ADB9,cj[9],cj[8],cj[41],0,6)
call Sye($1ADBA,cj[$A],cj[9],cj[44],0,6)
call Sye($1ADBB,cj[44],bj[9],cj[41],0,6)
call Sye($1ADBC,cj[44],bj[$A],cj[41],0,6)
call Sye($1ADBD,cj[56],bj[$B],cj[44],0,6)
call Sye($1D4C1,cj[$B],cj[21],0,0,4)
call Sye($1D4C2,cj[$C],cj[$B],cj[22],0,5)
call Sye($1D4C3,cj[$D],cj[$C],cj[23],0,5)
call Sye($1D4C4,cj[$E],cj[$D],cj[24],0,5)
call Sye($1D4C5,cj[$F],cj[$E],cj[25],0,5)
call Sye($1D4C6,cj[16],cj[$F],cj[26],0,5)
call Sye($1D4C7,cj[17],cj[16],cj[27],cj[42],6)
call Sye($1D4C8,cj[18],cj[17],cj[28],cj[42],6)
call Sye($1D4C9,cj[19],cj[18],cj[29],cj[42],6)
call Sye($1D4CA,cj[20],cj[19],cj[30],cj[45],6)
call Sye($1D4CB,cj[45],bj[$A],cj[46],cj[42],6)
call Sye($1D4CC,cj[45],bj[$B],cj[47],cj[42],6)
call Sye($1D4CD,cj[57],bj[$B],cj[59],cj[47],6)
call Sye($1FBD1,cj[31],0,0,0,4)
call Sye($1FBD2,cj[32],cj[31],0,0,5)
call Sye($1FBD3,cj[33],cj[32],0,0,5)
call Sye($1FBD4,cj[34],cj[33],0,0,5)
call Sye($1FBD5,cj[35],cj[34],0,0,5)
call Sye($1FBD6,cj[36],cj[35],0,0,5)
call Sye($1FBD7,cj[37],cj[36],cj[43],0,6)
call Sye($1FBD8,cj[38],cj[37],cj[43],0,6)
call Sye($1FBD9,cj[39],cj[38],cj[43],0,6)
call Sye($1FBDA,cj[40],cj[39],cj[43],0,6)
call Sye($1FBDB,cj[48],bj[$B],cj[43],0,6)
call Sye($1FBDC,cj[49],bj[$C],cj[43],0,6)
call Sye($1FBDD,cj[58],bj[$C],cj[60],0,6)
endfunction
function S1e takes integer id,integer S2e,integer K2,integer K3,integer K4 returns nothing
call SaveInteger(UH,id,18,S2e)
call SaveInteger(UH,id,Ge,K2)
call SaveInteger(UH,id,552,K3)
call SaveInteger(UH,id,he,K4)
endfunction
function S3e takes nothing returns nothing
call S1e($F90C4,611,7896,Px,0)
call S1e($F9128,Nx,6491,Px,0)
call S1e($F918C,7185,6210,Px,0)
call S1e($F91F0,5034,572,Px,0)
call S1e($F9254,Ax,lx,Px,0)
call S1e($1005F4,5034,572,Lx,0)
call S1e($100658,611,7896,Lx,0)
call S1e($1006BC,Ax,lx,Lx,0)
call S1e($100720,7185,6210,Lx,0)
call S1e($100784,Nx,6491,Lx,0)
call S1e($102D04,Ax,lx,5267,0)
call S1e($102D68,7185,6210,5267,0)
call S1e($102DCC,611,7896,5267,0)
call S1e($102E30,Nx,6491,5267,0)
call S1e($102E94,5034,572,5267,0)
call S1e($105414,Nx,6491,6780,0)
call S1e($105478,Ax,lx,6780,0)
call S1e($1054DC,5034,572,6780,0)
call S1e($105540,611,7896,6780,0)
call S1e($1055A4,7185,6210,6780,0)
call S1e($10C944,7185,6210,5781,0)
call S1e($10C9A8,5034,572,5781,0)
call S1e($10CA0C,Nx,6491,5781,0)
call S1e($10CA70,Ax,lx,5781,0)
call S1e($10CAD4,611,7896,5781,0)
call S1e($F6950,5267,hx,6780,0)
call S1e($FB770,5267,hx,5762,0)
call S1e($10A1D0,5267,hx,4888,0)
call S1e($10EFF0,5267,hx,mx,0)
call S1e($107B25,px,7695,6851,4346)
call S1e($107B26,px,7695,6851,6780)
call S1e($107B27,px,7695,6851,ax)
call S1e($107B8C,px,5724,'o',4346)
call S1e($107B8D,px,5724,'o',Cx)
call S1e($107B8E,px,5724,'o',6780)
call S1e($107BF3,px,bx,Kx,4346)
call S1e($107BF4,px,bx,Kx,ax)
call S1e($107BF5,px,bx,Kx,6780)
call S1e($107C5A,px,Bx,7537,4346)
call S1e($107C5B,px,Bx,7537,ax)
call S1e($107C5C,px,Bx,7537,6780)
call S1e($107CC1,px,cx,4934,4346)
call S1e($107CC2,px,cx,4934,6780)
call S1e($107CC3,px,cx,4934,ax)
endfunction
function S4e takes nothing returns nothing
set aJ[1]='A01T'
set aJ[2]='A01U'
set aJ[3]='A01V'
set aJ[5]='A01W'
set aJ[6]='A01X'
set aJ[7]='A01S'
set aJ[9]='A01R'
set aJ[$A]='A01Q'
set aJ[$B]='A01P'
set nJ[1]='A00I'
set nJ[2]='A00J'
set nJ[3]='A00K'
set nJ[4]='A00L'
set nJ[5]='A00M'
set nJ[6]='A00N'
set nJ[7]='A00O'
set nJ[8]='A01Z'
set nJ[9]='A020'
endfunction
function S5e takes nothing returns nothing
call SaveInteger(UH,bj[1],5710,1)
call SaveInteger(UH,bj[2],5710,2)
call SaveInteger(UH,bj[3],5710,3)
call SaveInteger(UH,bj[4],5710,4)
call SaveInteger(UH,bj[5],5710,5)
call SaveInteger(UH,bj[6],5710,6)
call SaveInteger(UH,bj[7],5710,7)
call SaveInteger(UH,bj[8],5710,8)
call SaveInteger(UH,bj[9],5710,9)
call SaveInteger(UH,bj[$A],5710,$A)
call SaveInteger(UH,bj[$B],5710,$B)
call SaveInteger(UH,bj[$C],5710,$C)
endfunction
function S6e takes integer id,integer Cbe,integer S7e,real S8e,real hp,integer ms,boolean QQe returns nothing
call SaveInteger(ht,id,StringHash("petwalkid"),Cbe)
call SaveInteger(ht,id,StringHash("height"),S7e)
call SaveReal(ht,id,StringHash("scale"),S8e)
call SaveReal(ht,id,StringHash("hp"),hp)
call SaveInteger(ht,id,StringHash("ms"),ms)
call SaveBoolean(ht,id,StringHash("attack"),QQe)
endfunction
function S9e takes nothing returns nothing
call S6e('n07M',0,$A6,1.8,$3E8,30,true)
call S6e('n07N',0,$A6,1.8,$5DC,35,true)
call S6e('n07O',5,$A6,1.8,$7D0,40,true)
call S6e('n07P',5,$A6,1.8,$9C4,45,true)
call S6e('n07Q',9,$A6,1.8,$BB8,50,true)
call S6e('n07R',1,$82,1.8,$FA0,60,true)
call S6e('n07S',1,$8C,1.8,$7D0,45,false)
call S6e('n07T',1,$FA,1.8,6000,70,false)
call S6e('n07U',0,$A6,1.8,$DAC,55,true)
call S6e('n07V',0,'}',1.8,$FA0,65,false)
call S6e('n07W',1,$96,1.8,4500,65,true)
call S6e('n07X',$E,$A6,1.8,5000,70,true)
call S6e('n08L',1,$A0,1.8,5000,75,true)
call S6e('n07Y',9,$9C,1.8,$7D0,40,true)
call S6e('n07Z',1,$96,1.8,$BB8,50,true)
call S6e('n050',0,$94,1.8,$FA0,62,true)
call S6e('n01A',0,$9E,1.8,$FA0,67,true)
call S6e('n080',2,$9E,1.8,5000,72,true)
call S6e('n081',1,$A6,1.8,6000,77,true)
call S6e('n04Y',0,$94,1.8,6000,80,true)
call S6e('n082',1,$9B,1.8,$BB8,50,false)
call S6e('n083',1,$B4,1.8,$FA0,60,false)
call S6e('n084',1,$96,1.8,$FA0,60,true)
call S6e('n085',1,'z',1.8,$FA0,65,true)
call S6e('n086',2,$8C,1.8,5000,70,true)
call S6e('n087',5,$9B,1.8,6000,75,true)
call S6e('n088',2,'x',1.8,$7D0,40,true)
call S6e('n09D',2,$D2,1.8,$FA0,60,false)
call S6e('n09E',1,$EB,1.8,$FA0,60,false)
call S6e('n09F',1,$EB,1.8,$FA0,60,false)
call S6e('n09G',0,$A5,1.8,5000,75,true)
call S6e('n09H',0,$A5,1.8,6000,80,true)
call S6e('n0AT',2,$AA,1.8,6000,75,true)
call S6e('n0AU',1,$AA,1.8,6000,75,true)
call S6e('n0AV',0,$A5,1.8,7000,85,true)
call S6e('n0AW',2,$AA,1.8,7000,80,true)
endfunction
function tve takes nothing returns nothing
set yH[1]="3009976311668064529111215222211606045"
set yH[2]="3007976611768235556733939646466"
set yH[3]="310097681176829212419171830112430252828191129"
set yH[4]="30079764117687562252214351321"
set yH[5]="31009762117688129152815241174132528241535"
set yH[6]="1003100921368932915242915192419302825"
set yH[7]="1103976418393144719292961253128"
set yH[8]="100910081996899241825246467641330"
set yH[9]="10091105213588013181923212522252417242524"
set yH[$A]="100996251656824471123111522"
set yH[$B]="1008100321168866218112561312465706465"
set yH[$C]="1003976416568141415232524241534312922352434"
set yH[$D]="200397681856898611531491131561923"
set yH[$E]="2006100621368371613332528281925287069"
set yH[$F]="1103976118568373822311574481530301528"
set yH[16]="10055109199681255242533486666"
set yH[17]="3102976711968912532152864727266"
set yH[18]="20039768121689838191742113057172235"
set yH[19]="1008976314158194228151538192814"
set yH[20]="1009110821328032618112430112426181130322026"
set yH[21]="10009762185288149311130281524261863"
set yH[22]="11099763185680655307347192811"
set yH[23]="10093100211282456251219201924"
set yH[24]="1006962519383405531261528231124245850"
set yH[25]="20084108199689647507373735044"
set yH[26]="100810061996875431815501831391825"
set yH[27]="10041002213684433192426282514253021191318"
set yH[28]="10071002213687539181915244467315866"
set yH[29]="100411072135866241731351524742418313074241123"
set yH[30]="100410062116829492813636322126335"
set yH[31]="310997631216812481532191130181124"
set yH[32]="100710062136823552225332235"
set yH[33]="31099768121680323153225131815223124"
set yH[34]="1005100920768192131213123112231"
set yH[35]="10061000214682047312811192455112311"
set yH[36]="10021004211684130352918252424"
set yH[37]="100721122115875171128193434727264727265"
set yH[38]="10044427207176627311124211915316465666664"
set yH[39]="100411061994829182511241722112366707265"
set yH[40]="100010021996881182511131164"
set yH[41]="100910052136837182513291924181311267364"
set yH[42]="1007100621518231825333025262211352929"
set yH[43]="100564232022817501825347421317430157465636463"
set yH[44]="100611052132831636469726566686471687111"
set yH[45]="1009976518553401831352922117234"
set yH[46]="1005100521468424545744231132173511616744545"
set yH[47]="10011101210187756192418734811383119"
set yH[48]="100897621836876372119281147"
set yH[49]="310797661216894452323252830112239282533"
set yH[50]="200232212108877231924182118251964706370"
set yH[51]="10061005213684029181924151331302519"
set yH[52]="1101976116568774211222215243724171522"
set yH[53]="3102976112168772118111922266565"
set yH[54]="100210022116827381513113129157438151311312915"
set yH[55]="100443072108866303124173318113029183126"
set yH[56]="10074306210881021191524183124301528"
set yH[57]="100910032136806301811241813306564"
set yH[58]="10053106210880030281112312664716465"
set yH[59]="21026642199681532147317281135"
set yH[60]="310866421656874182524171825112417321124302513"
set yH[61]="20047736199432922191615142811172524"
set yH[62]="100710072076876561923463124735850"
set yH[63]="1003310621088162115242019647272642231132135"
set yH[64]="100810092136882296513286633"
set yH[65]="100944382076830242524112315"
set yH[66]="100232212115877561135743713744911"
set yH[67]="110797641856875453124152125"
set yH[68]="100611052134840145840731312667439181923"
set yH[69]="10091003213681258407348192524"
set yH[70]="10055529199481228111914153219226463"
set yH[71]="1006100021368201616171514292933151133"
set yH[72]="1003100821168982619242129151163636465"
set yH[73]="1000100021368812211241827311115237234"
set yH[74]="100710022116875351531241825132418191531221123"
set yH[75]="100844292076882112215341411241764716564"
set yH[76]="100850021996376393528113473472419171830"
set yH[77]="100930002114824372819152960193011"
set yH[78]="11029761172687739345613183511"
set yH[79]="1107873419858756074181528257424112315"
set yH[80]="210897691216882292524182511"
set yH[81]="1005100921548633230181124177267"
set yH[82]="10021007210689140281117512415"
set yH[83]="1105976514155423411133018312628253224"
set yH[84]="10021104214684142112823152874677363"
set yH[85]="210966481996803392522143822252514"
set yH[86]="100631062110837131125362418113068"
set yH[87]="100310022136869303111241118"
set yH[88]="1102976115888773231241725132411232313"
set yH[89]="1109442320768126031112427311124177268"
set yH[90]="100044222076881481148375136"
set yH[91]="1108976217568765618154011282173472419171830"
set yH[92]="11029762175681556181552111924"
set yH[93]="10091008214681732192613251425246464656872"
set yH[94]="10091003214681218252118252622156364"
set yH[95]="1008664820408965618112413181530241521676869"
set yH[96]="1008100621368752133252429181924657271"
set yH[97]="10031008207689837241854312530"
set yH[98]="200232222076827143113231924186765"
set yH[99]="100910052146840182125113219262825686465"
set yH['d']="10003104211283856181915243724"
set yH['e']="200933282039899584073131266744328151524"
set yH['f']="1002100221368152115242019223113213564727271"
set yH['g']="100521092136363141915312219241866646463"
set yH['h']="10021007211689121152414191819"
set yH['i']="100510092146819302831241711241865716565"
set yH['j']="10021001214689423192419252465706368"
set yH['k']="10011001213687738385373481517152414"
set yH['l']="10083303207601930183123192221"
set yH['m']="1009110521328401424306472726536"
set yH['n']="1007110621338105531301120196664637172"
set yH['o']="200976201996824492840251124174025112417"
set yH['p']="20063305207584012311934311124292524"
set yH['q']="1007100621468945331115825581124"
set yH['r']="110377391996893382211132139113060454545"
set yH['s']="200921102133324443273734832"
set yH['t']="2008976612168754935293025171124"
set yH['u']="10081003211681930112413252417142524141126"
set yH['v']="10091105214634048111356181124"
set yH['w']="100010082136829344011282129"
set yH['x']="1000100421168381222111321181522226364"
set yH['y']="10091108214639917111411191311646365"
set yH['z']="100210022136815331274296522253215732524"
set yH['{']="10065105197284036152421196764647266"
set yH['|']="2000873419933385521192222747465"
set yH['}']="100410082136872461924201164"
set yH[$7E]="2002442120768944047744719222247192417"
set yH[$7F]="1000430020767812551257373471825371973481150"
set yH[$80]="100910082146803541119302524"
set yH[$81]="3004100621468295919241729251630192315"
set yH[$82]="10005302199648138113815391819"
set yH[$83]="1009100021548243729183025244831"
set yH[$84]="100511092133812562526173124636463656364"
set yH[$85]="100010082146829302511241428151123"
set yH[$86]="100910032146806481929292929"
set yH[$87]="110297621852515222524172136"
set yH[$88]="10051009214681236663036663064"
set yH[$89]="11099765185582418112319242411"
set yH[$8A]="10082113213288639183130191919"
set yH[$8B]="1001210321362655631583163696463"
set yH[$8C]="3101976118418774819241850567264"
set yH[$8D]="20041007211686661152215241174381522253211"
set yH[$8E]="10041007213686656112455112417657269"
set yH[$8F]="10047306198482939221156312955"
set yH[$90]="10002112213568112111412253563657171"
set yH[$91]="11088522191637658192817252929"
set yH[$92]="100240022076815286334151864"
set yH[$93]="100630052116840303111241411302221656565"
set yH[$94]="1006110521108315819307355253931301915"
set yH[$95]="100821062134875122525233219283129"
set yH[$96]="10061009214689512252929132524646365"
set yH[$97]="1000410020758811428111725241730636465"
set yH[$98]="100910052146840352374172514161130181528"
set yH[$99]="1000100821468292219152311246366"
set yH[$9A]="10031002213686923172419171830"
set yH[$9B]="10093008211689922313419161528646663717268"
set yH[$9C]="10036636199581645362111241411"
set yH[$9D]="100510092151812561811241834191523"
set yH[$9E]="10091005215182412301528191311283129"
set yH[$9F]="100510062154800401517151129"
set yH[$A0]="100610002154820441431136464"
set yH[$A1]="1000410820658291866222212111235"
set yH[$A2]="10025102199681514111921115729"
set yH[$A3]="20035002194886918313518146465"
set yH[$A4]="10032001213643726343419256364"
set yH[$A5]="1002200121364772931363164676463"
set yH[$A6]="10092005213642430281927312513727272"
set yH[$A7]="100820032136486321124183124176566646432"
set yH[$A8]="100720072136476621824112511221411"
set yH[$A9]="10021101215059439515043563749"
set yH[$AA]="1002976418557415628192131302574291124"
set yH[$AB]="20038756197181630142412293124"
set yH[$AC]="21039762118686937242529582522141917251114"
set yH[$AD]="100830022116076281514292135727266"
set yH[$AE]="1003200121448372931261528301811256364"
set yH[$AF]="10078306199282364471915236031351524562223"
set yH[$B0]="1005200121448602418111124261819"
set yH[$B1]="100554032064017401911232524141211132129"
set yH[$B2]="1001643120518773819174011141435"
set yH[$B3]="100631152116840472519435248"
set yH[$B4]="200663272069826233124211765636364"
set yH[$B5]="100820032136419447329657356"
set yH[$B6]="310097681216829491118245831"
set yH[$B7]="1009543320528122731112417116472726965636363"
set yH[$B8]="1009422021058245618112418323164706370"
set yH[$B9]="100151002076257141132191432112463646566"
set yH[$BA]="3105976618218002463211911652170"
set yH[$BB]="100555352064842462518243713181528"
set yH[$BC]="100953232076806221113113572636364"
set yH[$BD]="110997601856824141128212415292973232524211535"
set yH[$BE]="1006300521328402119152326182524172563"
set yH[$BF]="10095105204882460344928735918353460"
set yH[$C0]="100155232061365143024686472"
set yH[$C1]="10054009210881934441128313011556534"
set yH[$C2]="10034008210889872252523252564"
set yH[$C3]="100450022060844481544251124173911234935"
set yH[$C4]="310397661216816453931315835442545"
set yH[$C5]="200697661855237624715243029181924"
set yH[$C6]="200097621832881491522193031"
set yH[$C7]="10094005210883730227373737317112315181135"
set yH[$C8]="100740062108823301119203130293164646764"
set yH[$C9]="100955282067817121915316363"
set yH[$CA]="10093003211241255302825235331151524"
set yH[$CB]="1005962619478004915223129192415"
set yH[$CC]="11025001204889444111349191531"
set yH[$CD]="100132212116877402559195531"
set yH[$CE]="10088523199631923192418262211262211"
set yH[$CF]="1003400621088161831352414636564637270"
set yH[$D0]="1104400720968663911307355181930512415"
set yH[$D1]="100330092132893481122192911"
set yH[$D2]="100030022114881333016252317"
set yH[$D3]="11025302206081552281516193429"
set yH[$D4]="100353222076869391831381135734311"
set yH[$D5]="1000852419873384911243028192165636465"
set yH[$D6]="2007642420548753811131874747461"
set yH[$D7]="1007200621448941431352618112465696433"
set yH[$D8]="110397621853869241731351524183131181131"
set yH[$D9]="100730062116894403135121221"
set yH[$DA]="100020042144838211831252417221930"
set yH[$DB]="100910052154437404465474965734831112426181125"
set yH[$DC]="1005300121168603739415225331528"
set yH[$DD]="10063005211683130312417221911287268"
set yH[$DE]="1001200321448653940734311562815"
set yH[$DF]="100610092146895471125141124171831352418646464"
set yH[$E0]="10073007211687645241128192125291825"
set yH[$E1]="100721062136894473525735518352436"
set yH[$E2]="31049767121686658192659192414"
set yH[$E3]="1108976216533763230241164686371"
set yH[$E4]="1009400321088062421252118253229"
set yH[$E5]="100955302075824564873451511323223152222"
set yH[$E6]="10053009213281247252918251924112819"
set yH[$E7]="1005100321508171825193028316465666768"
set yH[$E8]="100832032116886143113273135241865646465"
set yH[$E9]="10033004211601422152573147336152825"
set yH[$EA]="10032008214489820192323351825223564"
set yH[$EB]="10082003214481932202636202418"
set yH[$EC]="100951082076203232873132519737264"
set yH[$ED]="100851092075682556873501525481924211524"
set yH[$EE]="1004310621152295721192929671532152822253215"
set yH[$EF]="10093103211520655657356191531735331351530"
set yH[$F0]="10095100198882437141123733955"
set yH[$F1]="100530092132812241731351524241718191132247234"
set yH[$F2]="1008330921158823822311529734411282835"
set yH[$F3]="1000430421088385128112417153473552135"
set yH[$F4]="1007430421088755018113050191523"
set yH[$F5]="100932152131380475252745228192925243828151121"
set yH[$F6]="100931082132817291122111231"
set yH[$F7]="1006330521158314328153536734450"
set yH[$F8]="10043108213287213112313252417303149192418"
set yH[$F9]="10029762185682751211811352125"
set yH[$FA]="21019761118687743735159192414"
set yH[$FB]="1003310921328931367732015303035"
set yH[$FC]="11089769121688239283529301122221936152230"
set yH[$FD]="100943082114899292425636333"
set yH[$FE]="1002210121448775619143129183124301528"
set yH[$FF]="100996251656824405674621913621113"
set yH[256]="100997631656806562819153156192418"
set yH[257]="110966352019824412831291941222915"
set yH[258]="31089768121689648253215734711241744252524"
set yH[259]="1001530020762574425112417241123656864637167"
set yH[260]="1006210021364202325192211237268"
set yH[261]="100133012116077232873301915317314191531"
set yH[262]="10025302208482756181124185618191524"
set yH[263]="10093105213284012152521112111"
set yH[264]="2007552620748102311301924196463"
set yH[265]="10041107215446649253925196031252417"
set yH[266]="1004310621328295529172514295564"
set yH[267]="10002102213648156113522252864656468"
set yH[268]="10092105214488056281142112438115425"
set yH[269]="1009110821466173018111913311327313515247272"
set yH[270]="100831022132874491134491134"
set yH[271]="100531062132800372418471524"
set yH[272]="1009862819968991819153130231164"
set yH[273]="11026631203687755192232152847"
set yH[274]="1003330621160161628252930686769"
set yH[275]="100021082144829503511244725381917"
set yH[276]="10033202213236918152222291335301815"
set yH[277]="10038521199633752181130551936"
set yH[278]="10054309210886360154825243939393939"
set yH[279]="100821082144896112418301831646566322432"
set yH[280]="100333042116014231128292423113434"
set yH[281]="10034308210889846113514152473303027"
set yH[282]="100831032132819402556114725402550112417"
set yH[283]="110455072073666302825351330"
set yH[284]="3003442221038694715242919282564"
set yH[285]="30079624196887554253511487338151124"
set yH[286]="1009442521028241811231231281715286465"
set yH[287]="10055509207681223112825252412253564"
set yH[288]="1005330120768602526161373201924121519"
set yH[289]="1008210221443746019244825194415492513"
set yH[290]="100585061948800391828192922553028191615"
set yH[291]="1003320421318142225131811221165"
set yH[292]="10025521207689451253822111321613121192551"
set yH[293]="1001440120918775017251356281119401524"
set yH[294]="20086623204181956252417471831351530"
set yH[295]="100810022154874453759567357241947192417"
set yH[296]="2005850919968191411263225141131"
set yH[297]="10023204213084119282524231124"
set yH[298]="1007852219968754419211128317365646364"
set yH[299]="100433172116366261430192418"
set yH[300]="100010042150538541926261528"
set yH[301]="1009331521168803019243028112464716465"
set yH[302]="1103763119968374611132512656572"
set yH[303]="100544012104860112418211825241730181530181531"
set yH[304]="100832022131874581921302528391125"
set yH[305]="1005543620768002417251322351124"
set yH[306]="200932082130899131122192436302964"
set yH[307]="10023224213084138487439181926"
set yH[308]="1009552820758304735313112197355"
set yH[309]="1009320321314125631112414152630281119"
set yH[310]="10042118214337255213544266236"
set yH[311]="100232212129894511815222425"
set yH[312]="300085201976881306518232826181130"
set yH[313]="300485271976866362523121915111213343536"
set yH[314]="10015520207685750191723117349192811132215"
set yH[315]="11007734199533847352547312436"
set yH[316]="2109773519953376016151514152873642930"
set yH[317]="10055533206381744111415282164656371"
set yH[318]="100221172143891401915264431351524"
set yH[319]="1005322921298194911141125295011291519"
set yH[320]="100232212129894501731251940152656281119"
set yH[321]="100421122136544232323232323"
set yH[322]="100333262115816647474181930"
set yH[323]="10049766184682956183135561915247271"
set yH[324]="1005553920712125411241435222513"
set yH[325]="11095530207682456282524174036"
set yH[326]="1005332121163604773553152264128"
set yH[327]="100333292116893381924552525"
set yH[328]="100385211996337663918315625"
set yH[329]="10075526207532361112448252417"
set yH[330]="100544232116317583558355835"
set yH[331]="20083223212988644313524185218311364686463"
set yH[332]="100110032150065562831241744113165666464"
set yH[333]="10063229212289552111924225622"
set yH[334]="10003220212288132223019152429192418"
set yH[335]="10032116213651654192556281124"
set yH[336]="1008211921433824731222244115530"
set yH[337]="100332192126893241825132126282564696463"
set yH[338]="10098520199682424273125133018112418"
set yH[339]="100744262089323551819282524152125"
set yH[340]="200844292101882553757394457"
set yH[341]="20099763185680636152421312863"
set yH[342]="100221142136841413413113211282528"
set yH[343]="100797661856823483125241756313515304031"
set yH[344]="100855282076896563111243721192811"
set yH[345]="2103976114168375513252836756464657270"
set yH[346]="2101976014168574631221915756464666863"
set yH[347]="20075522207687528152429253122"
set yH[348]="100486271995866211924212519"
set yH[349]="1105976518568423849501811307266"
set yH[350]="10033321209583750181915264835"
set yH[351]="10094425210488047192374561119"
set yH[352]="1006552520758402131301929252311"
set yH[353]="10082112211657424171815256534"
set yH[354]="200966232040806112423252417"
set yH[355]="100855262076875372813181124171522"
set yH[356]="1005332121155604719143664676465"
set yH[357]="100644262076837491130381125"
set yH[358]="1005976618478005017313515243636"
set yH[359]="100933252115580291312211312"
set yH[360]="110977451996837561918112825"
set yH[361]="1009552820633172918192464727270"
set yH[362]="2002552720768914020443111246521"
set yH[363]="100132232129865381522191122"
set yH[364]="100255212075894401532192247192417"
set yH[365]="100255242076841303512152532192418"
set yH[366]="10038626199481674364711193674"
set yH[367]="10043326211552929253122231129301528666471"
set yH[368]="1008322921365823019153123113231252417727272"
set yH[369]="100055242075838371950155015"
set yH[370]="3106976716568264935301873501124112319"
set yH[371]="110297611656877481125345618113034"
set yH[372]="10068825199684030281924182424"
set yH[373]="10095523207581239252417562524551511281318"
set yH[374]="10043228213657224182521301825132835"
set yH[375]="100955232074506394738223115"
set yH[376]="10037739199589350171124501731351530"
set yH[377]="300355212066837471125231135"
set yH[378]="300755262075623391125231135"
set yH[379]="1008552220768743918316031112458191530"
set yH[380]="100533292116319142529192364"
set yH[381]="100933202116324491126491126"
set yH[382]="1002322221298272618112324183130"
set yH[383]="100721162143394561124561124"
set yH[384]="100755362073810372418501123"
set yH[385]="1009442321028064819241839182540191524"
set yH[386]="310297641216841551917231111"
set yH[387]="1005322921365121318192325283124"
set yH[388]="10033222212986924182534241114242565636463"
set yH[389]="100633272116826171124311929"
set yH[390]="10053329211586323282119213124"
set yH[391]="100332262136516491924113025737269"
set yH[392]="1004863719688665331112417301525"
set yH[393]="100455262062329301924183515312211301815"
set yH[394]="20083228213689639112222726464"
set yH[395]="10095525207682412252417292519"
set yH[396]="100932282129817622514191113"
set yH[397]="100386211994837181915261711646566"
set yH[398]="200676501996820551835241515"
set yH[399]="100955282073803563153313555"
set yH[400]="1008332821163964411242463726370"
set yH[401]="100855261994875412337241838112418"
set yH[402]="1007662620465104325145116591128"
set yH[403]="2001552120768775218312524174425112417"
set yH[404]="21099663185681258193415242929"
set yH[405]="10063226213083735441119433544111943"
set yH[406]="1001332021163574718112455112311"
set yH[407]="3002862219768155515252246191831"
set yH[408]="210997681851830382211242136"
set yH[409]="310497661853829561529312811"
set yH[410]="110297621856315402513303030303030"
set yH[411]="1003552220768693819192438191924"
set yH[412]="310997651656824564873471922221528"
set yH[413]="100533212116860292514152630281119"
set yH[414]="10083322212987452112819293319241435"
set yH[415]="1008332820768963928312911141528676563"
set yH[416]="10083226212987546152836657065"
set yH[417]="20055525207564215223219242115357234"
set yH[418]="100297621651827385615151515"
set yH[419]="100755262075394281924251219"
set yH[420]="1007322621298101225131825191325"
set yH[421]="100755362076694561811241848311124"
set yH[422]="100744262102810552523155618192417"
set yH[423]="1000553220768814031354015232524"
set yH[424]="1101874119558775555554411135831555555"
set yH[425]="100655252075840461113213548231125"
set yH[426]="300677371989326551131582514191318"
set yH[427]="1007662720488765819303925246011316019"
set yH[428]="1009442821028035017313515247267"
set yH[429]="1008552920758824311281124666664"
set yH[430]="100266212056894471524551954257269"
set yH[431]="200932202136824371219221930352419"
set yH[432]="10085523207688650313029312115"
set yH[433]="100555312063360303111241124181864656463"
set yH[434]="1104976812168722919153124181124"
set yH[435]="10096625202883745243219241319122215"
set yH[436]="11036642203586956487356113419"
set yH[437]="20033224212881456181913213911471911"
set yH[438]="100497661804829541135465043"
set yH[439]="100733242116375561819152450181124401125"
set yH[440]="100233212116377493136192425"
set yH[441]="10054421210286014353264727270"
set yH[442]="10003222212988139222531145850"
set yH[443]="11079767187587656293124112319"
set yH[444]="100332282129898391124184015"
set yH[445]="100355362073816273111247165643224"
set yH[446]="1002552420758415618112418583131"
set yH[447]="10003224212983844113136361528"
set yH[448]="2109976518568245215471524493123491923"
set yH[449]="10093220212982419294415242835"
set yH[450]="100932252129880222513251825"
set yH[451]="21098645197882424191318131811303224636370"
set yH[452]="10032112214336932141924186369"
set yH[453]="100732242136575491924192429"
set yH[454]="31079766185681016112930301528141911"
set yH[455]="1002322221365155556744825321550"
set yH[456]="10063227212982649393130151515"
set yH[457]="3007322721287766325404148482563"
set yH[458]="200733222116375133512152860"
set yH[459]="100832292136582331924143636"
set yH[460]="10003224213183814112821241529291313"
set yH[461]="1004553220518444011282162152825"
set yH[462]="1108664820638963922253114551922321528"
set yH[463]="1006322521365402918192465636369"
set yH[464]="100232272131891484156543750564437504450433750"
set yH[465]="1003663420468145025111843251118"
set yH[466]="1006322921298953031112423123027"
set yH[467]="100744272102876481515551132192528"
set yH[468]="300497671846366512819241325"
set yH[469]="100410062150029471119361528"
set yH[470]="100633262116237141124172622"
set yH[471]="1009662520488373918312530181113181113"
set yH[472]="10065525207684044152539252464686464"
set yH[473]="100955232076812431924646566676869"
set yH[474]="1008552820762965618112417381521"
set yH[475]="100333242116814441912191331221529"
set yH[476]="10025521207589460313419241834192418"
set yH[477]="100432222136544273111241318311164727269656363"
set yH[478]="110287611946894471922221528"
set yH[479]="10043327211636656283125241752181123403847"
set yH[480]="10092115214338050172513501123"
set yH[481]="200297611856877492819241411"
set yH[482]="10061005215384056183124141528657272"
set yH[483]="10049768199687237282122192115"
set yH[484]="200055222068881561915287318112219121522"
set yH[485]="100732262129810562831252417501123"
set yH[486]="1009332821163994318252930373839"
set yH[487]="11089762184487638152222192524"
set yH[488]="1005332121163604211222235647263"
set yH[489]="100855322049874646566646566646566"
set yH[490]="10053226212980012311411191311"
set yH[491]="100532252136542121164727267"
set yH[492]="1001211121443774025133925391131381119"
set yH[493]="10025522207582739111938112417391831252417"
set yH[494]="10083228213659648193030221540113036"
set yH[495]="1003322921298933713253129301913"
set yH[496]="1000211221433811129141129141114"
set yH[497]="10094425210283756181915244425112417"
set yH[498]="100755362076823241731351524182513"
set yH[499]="1002775719938914523423130312815"
set yH[500]="200932232129812622522112425"
set yH[501]="2109976514568243911281132152222"
set yH[502]="100321142143314241123131125211531"
set yH[503]="100676691996895561815372418756464676471"
set yH[504]="1002332421152412731112417273315286365"
set yH[505]="10078662197887537152522191124"
set yH[506]="100796661936894401128215525312229"
set yH[507]="100455272076866512419231944"
set yH[508]="10074436207681052112811231525"
set yH[509]="1009443320768065519153139112638112418381525"
set yH[510]="11044432207684437281915294529493522191615"
set yH[511]="100955382072899382219241729182526"
set yH[512]="100221122143827561811303911"
set yH[513]="110765361984810121121182519"
set yH[514]="1008322621288754935293015283564"
set yH[515]="100132212135877471119281519"
set yH[516]="110097641842838302815291924656966"
set yH[517]="1107773619968944825313918252115"
set yH[518]="1102976418288413811481156192418"
set yH[519]="100332262128816522231301911"
set yH[520]="2000443820768296215242561252918192425"
set yH[521]="11059765183684253313514367564726967"
set yH[522]="100932282136030382211141573401124131528"
set yH[523]="100321142145614471111111111"
set yH[524]="10063325211484023351124221915246464"
set yH[525]="110086641950838432512221924421128231528756464656770"
set yH[526]="11039661141683746312219112444117564716569"
set yH[527]="110796661416823522211352311211528756464726867"
set yH[528]="110976651996824482524174011417564726666"
set yH[529]="100421122149844161130636663717269"
set yH[530]="1002322121288773028173019153126181123"
set yH[531]="1106443720768263820213820217565697269"
set yH[532]="110776672006876563552282551"
set yH[533]="1005211621498002319341125122564686365"
set yH[534]="100621102149820561915313931252417"
set yH[535]="1100766819968295331112450154911353918117564726766"
set yH[536]="110044322076881603149113472667564716569"
set yH[537]="110377361996816521113657064"
set yH[538]="10083226212887544191531481123"
set yH[539]="10064436210083728252512152529"
set yH[540]="100032242128838223111243018112418"
set yH[541]="1009211821498991425132819303222"
set yH[542]="20054439207181247351925291835"
set yH[543]="10004432207438136152825132225332436"
set yH[544]="10083222213687624173135152464707070"
set yH[545]="11067666199683755111225756664716365"
set yH[546]="10013221212887758455048375044"
set yH[547]="100732272128876481924186921353031"
set yH[548]="110986651978640543124257234"
set yH[549]="100577311996860391825401524"
set yH[550]="110597661836800391819314815"
set yH[551]="100332212128837481924185519153150181124"
set yH[552]="10073226212881048192418401526621119"
set yH[553]="110197601645657481911234431352418"
set yH[554]="100276611996877492525244819171830756466686466"
set yH[555]="10057663199681750501825197564666870"
set yH[556]="10023227212889128111914153219226464"
set yH[557]="100555352076842402511244031"
set yH[558]="10033328212389848191524401124"
set yH[559]="1009976512168406113232437247564677272"
set yH[560]="100244222100827741222314174"
set yH[561]="310755462053810553131553131"
set yH[562]="1107776419968753831243825431925441525"
set yH[563]="10053321211486052252824443112"
set yH[564]="3102976214568275331151524295915192929"
set yH[565]="1004322821288725112194411302931141524"
set yH[566]="1006322021288204831132145295521192222"
set yH[567]="100044322076881471825401123"
set yH[568]="110744342076875535364716372"
set yH[569]="310755442053875501711243819"
set yH[570]="10047738199687247192417111213"
set yH[571]="100233222116815501529305511192430"
set yH[572]="1004332721148664831241748192418"
set yH[573]="100432262128829403130131848111435"
set yH[574]="10064435207683148192418441924"
set yH[575]="10033221212883758152835573357"
set yH[576]="10076654203487514112527312513323535"
set yH[577]="10023222213581547352562152825"
set yH[578]="1002100721168914911192473545243"
set yH[579]="100544392076819141616141616"
set yH[580]="100544352076842483113491113185618112447191523"
set yH[581]="30036656202681641223113281916"
set yH[582]="10088669197888223192119331166666363"
set yH[583]="10032119214289348192418501530"
set yH[584]="11049767145486621113524173135152464676368"
set yH[585]="110544332076817303124172429"
set yH[586]="10017660199285748192325312919241552221135"
set yH[587]="10052116214380030251118251124177269"
set yH[588]="100844362076875564873432514141915"
set yH[589]="100655472062826551819191919"
set yH[590]="1007322721288765011235113391825"
set yH[591]="10055533204881732311825112417292524"
set yH[592]="1007553620768103925232631301528"
set yH[593]="100933232114812501731351524"
set yH[594]="100044322076881561140195619234123"
set yH[595]="11095535205583736111231361164636967"
set yH[596]="1005443120768602212143135646566"
set yH[597]="10028667197889138313162312125"
set yH[598]="1109773319968125619152456191524"
set yH[599]="100632252128831401532192229"
set yH[600]="100132212128877461129252460454545"
set yH[601]="10063229213589538112411241155211924"
set yH[602]="1004553820768725019171830192923"
set yH[603]="100655302076820482524175618191524"
set yH[604]="100832222135876301831112464"
set yH[605]="10034434207681447111964727264"
set yH[606]="10052119214631256111424151956"
set yH[607]="10052113214631711231130153128646466"
set yH[608]="1109773519828804925241739181956191524"
set yH[609]="100132232128865461124175625255515"
set yH[610]="11097668199683049252421153540734831161635"
set yH[611]="100232222135827501130561815402513302528"
set yH[612]="100932252135840482522252225"
set yH[613]="11054439207686350475658646964"
set yH[614]="110944352076837301811241829112417"
set yH[615]="100277671996891132530181913182519676567"
set yH[616]="10054439207681239252522122535666330"
set yH[617]="10062117214282651241712111318113123"
set yH[618]="100421172142866391811196968"
set yH[619]="100444362076829551119172524242424"
set yH[620]="1101443120768775017312519491135491124"
set yH[621]="100933252116837564873392526"
set yH[622]="110944332076806401511301872"
set yH[623]="1107443620768105018113048112417"
set yH[624]="110286621996815441519582540191318"
set yH[625]="210877661986875522215112915"
set yH[626]="1109976518508241811252118112417"
set yH[627]="11097768199680346111321734331131319"
set yH[628]="100633262116837541924152235"
set yH[629]="100344322076869491533491533"
set yH[630]="10094438207689947192417511642151128"
set yH[631]="100244322076815375218312513"
set yH[632]="10063225213684046192323353931252417"
set yH[633]="10093223213681250181130403135"
set yH[634]="1002554120684944319254931114411"
set yH[635]="100897621856876241831305640"
set yH[636]="10062110214282015233025232319241817191125"
set yH[637]="10033228213689826181564727267"
set yH[638]="200777671991876561815392522221513301528"
set yH[639]="11024432207682755192439414141"
set yH[640]="11097768199680339181124241522"
set yH[641]="1008443920768821311253018191524"
set yH[642]="100755262075823131122192436302965"
set yH[643]="10020720768911311253018191524"
set yH[644]="11089762121687667656667656667"
set yH[645]="100844392076882381923381923393111"
set yH[646]="100233222116827471926313131"
set yH[647]="11094438207689955182525301528"
set yH[648]="110997601856824392867363539181913216624"
set yH[649]="100144302100857551522151435"
set yH[650]="110544392076863224819122811"
set yH[651]="100633252116831131119141929231523"
set yH[652]="100497681856872543511244056"
set yH[653]="11015540206285749285825144711"
set yH[654]="11034438207689852192411384956"
set yH[655]="10043227212886649352930152835"
set yH[656]="11074432207687555301528121524"
set yH[657]="100355492062893473548112449253055312417"
set yH[658]="100577691996812501731351524756464646565"
set yH[659]="10054339211686340151130182235"
set yH[660]="10073226213681049114019152356181130551130"
set yH[661]="100932282136899491124501819"
set yH[662]="10024431207687739112222491556"
set yH[663]="100644352076840542529181124"
set yH[664]="100244322076815443124301528293928113635"
set yH[665]="10083228213589644152553311135"
set yH[666]="100177631986865381515261528"
set yH[667]="10023221213689455252417182511241764631172"
set yH[668]="10027764199684156112539253811283819301318"
set yH[669]="11024432207682749192418443111"
set yH[670]="100921182142803381547252522"
set yH[671]="110344392076893553011282821"
set yH[672]="1003976219268692231252417726918"
set yH[673]="11084432207687641242025354015113018"
set yH[674]="100597691216863552211351554"
set yH[675]="100544362076800223124111111"
set yH[676]="10023224213584148415155624457"
set yH[677]="100632292128895551922321528"
set yH[678]="100032202128881381525657164"
set yH[679]="100777621996875433150345533632814"
set yH[680]="10014430206685749285918193015"
set yH[681]="1008332921148822412263065676463"
set yH[682]="100877621996876562819152440111944191526"
set yH[683]="100277621996815363911281123152229"
set yH[684]="100144302076857394445415056443750"
set yH[685]="1005776919968635628191531491124"
set yH[686]="10064435207683138153819383124173831"
set yH[687]="10033229212889315232417181525642165"
set yH[688]="100633292116895291834152523"
set yH[689]="100021102145681552524391831115615"
set yH[690]="100766522034875391825292524"
set yH[691]="1006322621288375519223215282211241315"
set yH[692]="100044342076838196259151514"
set yH[693]="110655452062831523949112829"
set yH[694]="1002322121288775619153148195631"
set yH[695]="1001322021368572418251324182464"
set yH[696]="100533292116863521831252417177266"
set yH[697]="100844382076896366236591519366236"
set yH[698]="1003322421288146019112522192417"
set yH[699]="100632292128895121522251215303035"
set yH[700]="1007322721288764425112417441119"
set yH[701]="100544392076863562524355530112821"
set yH[702]="100832292136882454825321557"
set yH[703]="1103443920768934528192955112211231124141528"
set yH[704]="1008976914568823825252240153219"
set yH[705]="1002322121368775218312524174062"
set yH[706]="100833222116876553025267344152815"
set yH[707]="110444372076866551924256372"
set yH[708]="110744342076875552225301834"
set yH[709]="10023221212887751282513181923112831"
set yH[710]="110644352076840493124283531"
set yH[711]="100532292134463552524292524676571"
set yH[712]="10062115214563139181125293918112529"
set yH[713]="1007332621168105218312417745525"
set yH[714]="10083329211688258191315243625"
set yH[715]="3100976412168384831133113112811131811"
set yH[716]="100477671996866301815112418"
set yH[717]="10093325211688060191125601924"
set yH[718]="110097641856838563111245640"
set yH[719]="100632252136831111213141516171813"
set yH[720]="10052111213286054152439182524734440"
set yH[721]="1009211521428405650434964666971"
set yH[722]="10003228213682944503873401532192231211536"
set yH[723]="100921132142806213525213124"
set yH[724]="100944302076824492838252523"
set yH[725]="100532292135812403124175831252417"
set yH[726]="1008443320768191415162425301817"
set yH[727]="1007443620768941831241729193124181124"
set yH[728]="10053326211680056283124174431352418"
set yH[729]="100532252128842171111111111111111"
set yH[730]="1006322721288263219153074231721"
set yH[731]="11034432205686939252439181923502524"
set yH[732]="11064437207682637495040565040"
set yH[733]="110877691996882232823112626"
set yH[734]="10042117214566636225218312524432236"
set yH[735]="1004443720768663822111321141524"
set yH[736]="100332292116893561831112456281124"
set yH[737]="100744322076875553015222211"
set yH[738]="10053229213681237293025244831"
set yH[739]="1005776319968175543554011304831252417"
set yH[740]="10063325211683154111924553124"
set yH[741]="100433282114872232530301130302825"
set yH[742]="10023222213681556281124121125676465"
set yH[743]="1104976218568445211241411381525"
set yH[744]="100932252136824392811363548252814"
set yH[745]="100810082126896405618112418"
set yH[746]="10014433207686558315811245611236364"
set yH[747]="1006443020768204411132164441930"
set yH[748]="10031008213689872561819152447191523"
set yH[749]="1000211021364812418111922311113183111"
set yH[750]="100844382076896381128192715"
set yH[751]="1108443220768761219122512191211"
set yH[752]="1009332521168374031354819171830"
set yH[753]="10037762199686938223115561828352911"
set yH[754]="100933202116824562811243711282524"
set yH[755]="11004434207683858271825112417637164632724"
set yH[756]="1109976018568245618191524123112112364"
set yH[757]="100633252116840403514353215283513313015"
set yH[758]="1109443320768121411121525222526636364"
set yH[759]="100021182142829522529292552"
set yH[760]="100332212136837172514161130181528"
set yH[761]="10093228213681747192417231124"
set yH[762]="100932252136824481525553128311130"
set yH[763]="10083328211689638151526756464646570"
set yH[764]="100332242135814551119222528"
set yH[765]="100844332076886292513143636"
set yH[766]="100933252116824471156116231"
set yH[767]="10063326211483712252929211922221528"
set yH[768]="10033229213689338191738112414"
set yH[769]="1000100221544815629312414152815"
set yH[770]="1004443620768293911353831116364"
set yH[771]="1007332621168233636373737373636"
endfunction
function tee takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,5.,false)
call TriggerAddAction(t,function tve)
set t=null
endfunction
function tae takes nothing returns nothing
call DialogDisplay(me,le,false)
endfunction
function tne takes nothing returns boolean
call DialogDisplay(me,le,true)
call TimerStart(Le,.0,false,function tae)
return false
endfunction
function tVe takes nothing returns nothing
local trigger t=CreateTrigger()
set me=GetLocalPlayer()
call TriggerRegisterGameEvent(t,EVENT_GAME_SAVE)
call TriggerAddCondition(t,Condition(function tne))
endfunction
function tEe takes nothing returns nothing
set Me=Me+1
call TriggerEvaluate(pe)
endfunction
function tXe takes nothing returns nothing
call TimerStart(CreateTimer(),.03125,true,function tEe)
endfunction
function QH takes nothing returns nothing
loop
call ExecuteFunc("QH")
endloop
endfunction
function tOe takes unit u returns boolean
return IsUnitType(u,UNIT_TYPE_ANCIENT)or(GetUnitAbilityLevel((u),('Aloc'))>0)
endfunction
function tRe takes unit u,integer tIe returns boolean
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
local integer tAe=(((Bue[(1)*(20)+i])-qH)/ 2)
local integer lv=GetHeroLevel(u)
local integer e=GetHeroXP(u)
if e>tAe then
call QKe("|cffff0000"+GetUnitName(u),99)
call QH()
return false
endif
if e<vk[lv-1]then
call QH()
return false
endif
if lv<$C8 and tIe>0 then
if e+tIe>vk[$C8]then
set tIe=vk[$C8]-e
endif
call AddHeroXP(u,tIe,false)
set Bue[(1)*(20)+i]=Bue[(1)*(20)+i]+tIe*2
endif
if lv>$C8 then
return false
endif
return true
endfunction
function tNe takes integer i returns integer
return BUe[(i)*(20)+1]+BUe[(i)*(20)+2]+BUe[(i)*(20)+3]+BUe[(i)*(20)+4]+BUe[(i)*(20)+5]+BUe[(i)*(20)+6]+BUe[(i)*(20)+7]+BUe[(i)*(20)+8]
endfunction
function tbe takes integer i,integer tIe,integer tBe returns boolean
local integer a1=tNe(i)*4
local integer a2=GetHeroLevel(XJ[i])
if bJ[i]>9 then
return false
endif
if bJ[i]>=1 then
set a2=$C8+20*bJ[i]
endif
if tBe==0 then
if a1+BJ[i]!=a2 then
call QH()
endif
if BJ[i]>=tIe then
return true
endif
else
set BJ[i]=BJ[i]+tIe*tBe
endif
if a1+BJ[i]!=a2 then
call QH()
endif
return false
endfunction
function tce takes integer i returns nothing
local integer a1=tNe(i)*4
local integer a2=GetHeroLevel(XJ[i])
if bJ[i]>=1 then
set a2=$C8+20*bJ[i]
endif
if a1+BJ[i]!=a2 then
call QH()
endif
endfunction
function tCe takes integer i,integer tIe,integer tBe returns boolean
local integer a1=(((Bue[(3)*(20)+i])-qH)/ 2)
local integer a2=cJ[i]
if tBe==0 then
if a1!=a2 then
call QH()
endif
if a2>=tIe then
return true
endif
else
set cJ[i]=cJ[i]+tIe*tBe
set a2=cJ[i]
call MultiboardSetItemValueBJ(mC,4,(i+1),I2S(a2))
endif
if a1!=a2 then
call QH()
endif
return false
endfunction
function tde takes integer i,integer tIe,integer tBe returns boolean
local integer a1=FJ[i]
local integer a2=cbe[(i)*(20)+1]+cbe[(i)*(20)+2]+cbe[(i)*(20)+3]+cbe[(i)*(20)+4]+cbe[(i)*(20)+5]+cbe[(i)*(20)+6]+cbe[(i)*(20)+7]+cbe[(i)*(20)+8]
local integer ts=bJ[i]
if a1+a2>(ts+1)*7 then
call QH()
return false
endif
if tBe==0 then
if a1>=tIe then
return true
endif
else
set FJ[i]=a1+tIe*tBe
endif
return false
endfunction
function tDe takes integer i,integer tIe,integer tBe returns boolean
local integer a1=(((Bue[(5)*(20)+i])-qH)/ 2)
local integer a2=dJ[i]
if a1!=a2 then
call QH()
endif
if tBe==0 then
if a2>=tIe then
return true
endif
else
if a2>=5*SH then
else
if tBe>0 and a2+tIe>5*SH then
set tIe=5*SH-a2
endif
set dJ[i]=dJ[i]+tIe*tBe
set a2=dJ[i]
set Bue[(5)*(20)+i]=Bue[(5)*(20)+i]+tIe*2*tBe
set a1=(((Bue[(5)*(20)+i])-qH)/ 2)
endif
endif
return false
endfunction
function tfe takes integer i,integer tIe,integer tBe returns boolean
local integer a1=(((Bue[(6)*(20)+i])-qH)/ 2)
local integer a2=DJ[i]
if a1!=a2 then
call QH()
endif
if tBe==0 then
if a2>=tIe then
return true
endif
else
if a2>=2*tH and tBe>0 then
else
if tBe>0 and a2+tIe>2*tH then
set tIe=2*tH-a2
endif
set DJ[i]=DJ[i]+tIe*tBe
set a2=DJ[i]
set Bue[(6)*(20)+i]=Bue[(6)*(20)+i]+tIe*2*tBe
set a1=(((Bue[(6)*(20)+i])-qH)/ 2)
endif
endif
return false
endfunction
function tFe takes integer i,integer tIe,integer tBe returns boolean
local integer a1=(((Bue[(7)*(20)+i])-qH)/ 2)
local integer a2=fJ[i]
if a1!=a2 then
call QH()
endif
if tBe==0 then
if a2>=tIe then
return true
endif
else
if a2>=8*tH and tBe>0 then
else
if tBe>0 and a2+tIe>8*tH then
set tIe=8*tH-a2
endif
if tBe>0 then
call QLe("|cff9370db"+yj[$A]+I2S(tIe)+"|r",XJ[i])
endif
set fJ[i]=fJ[i]+tIe*tBe
set a2=fJ[i]
set Bue[(7)*(20)+i]=Bue[(7)*(20)+i]+tIe*2*tBe
set a1=(((Bue[(7)*(20)+i])-qH)/ 2)
endif
endif
return false
endfunction
function tge takes integer i,integer tIe,integer tBe returns boolean
local integer a1=(((Bue[(8)*(20)+i])-qH)/ 2)
local integer a2=hJ[i]
if a1!=a2 then
call QH()
endif
if tBe==0 then
if a2>=tIe then
return true
endif
else
if a2>=18*sH and tBe>0 then
else
if tBe>0 and a2+tIe>18*sH then
set tIe=18*sH-a2
endif
if tBe>0 then
call QLe("|cffffcc00"+yj[9]+I2S(tIe)+"|r",XJ[i])
endif
set hJ[i]=hJ[i]+tIe*tBe
set a2=hJ[i]
set Bue[(8)*(20)+i]=Bue[(8)*(20)+i]+tIe*2*tBe
set a1=(((Bue[(8)*(20)+i])-qH)/ 2)
endif
endif
return false
endfunction
function tGe takes integer i,integer tIe,integer tBe returns boolean
local integer a1=(((cce[(i)*(20)+2])-qH)/ 2)
local integer a2=cce[(i)*(20)+1]
if a1!=a2 then
call QH()
endif
if tBe==0 then
if a2>=tIe then
return true
endif
else
set cce[(i)*(20)+1]=cce[(i)*(20)+1]+tIe*tBe
set a2=cce[(i)*(20)+1]
set cce[(i)*(20)+2]=cce[(i)*(20)+2]+tIe*2*tBe
set a1=(((cce[(i)*(20)+2])-qH)/ 2)
endif
return false
endfunction
function the takes integer i,integer tIe,integer tBe returns boolean
local integer a1=(((cCe[(i)*(20)+2])-qH)/ 2)
local integer a2=cCe[(i)*(20)+1]
if a1!=a2 then
call QH()
endif
if tBe==0 then
if a2>=tIe then
return true
endif
else
if tBe>0 then
set cCe[(i)*(20)+3]=cCe[(i)*(20)+3]+tIe*2*tBe
set cCe[(i)*(20)+1]=cCe[(i)*(20)+1]+tIe*tBe
set a2=cCe[(i)*(20)+1]
set cCe[(i)*(20)+2]=cCe[(i)*(20)+2]+tIe*2*tBe
set a1=(((cCe[(i)*(20)+2])-qH)/ 2)
else
set cCe[(i)*(20)+3]=cCe[(i)*(20)+3]+tIe*2*tBe
endif
endif
return false
endfunction
function tHe takes integer i,integer tIe,integer tBe returns boolean
local player p=Player(i-1)
local integer a1=(((Bue[(4)*(20)+i])-qH)/ 2)
local integer a2=sde(p)
if a1!=a2 then
call QH()
endif
if tBe==0 then
if a2>=tIe then
return true
endif
else
if a2==8*tH and tBe>0 then
else
if tBe>0 and a2+tIe>8*tH then
set tIe=8*tH-a2
endif
if tBe>0 then
call Qre(AddSpecialEffectTarget("UI\\Feedback\\GoldCredit\\GoldCredit.mdl",XJ[i],"origin"))
call QLe("|cffffff00"+yj[8]+I2S(tIe)+"|r",XJ[i])
endif
call sDe(p,tIe*tBe)
set a2=GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)
set Bue[(4)*(20)+i]=Bue[(4)*(20)+i]+tIe*2*tBe
set a1=(((Bue[(4)*(20)+i])-qH)/ 2)
endif
endif
set p=null
return false
endfunction
function tje takes integer i,integer tIe,integer tJe,integer tBe returns boolean
local integer a1=cBe[(i)*(20)+tJe]
local integer a2=cBe[(i)*(20)+1]+cBe[(i)*(20)+2]+cBe[(i)*(20)+3]+cBe[(i)*(20)+4]+cBe[(i)*(20)+5]+cBe[(i)*(20)+6]
local integer a3=cBe[(i)*(20)+7]
if a2!=a3 then
call QH()
endif
if tBe==0 then
if a1>=tIe*2 then
return true
endif
else
set cBe[(i)*(20)+tJe]=cBe[(i)*(20)+tJe]+tIe*tBe*2
set cBe[(i)*(20)+7]=cBe[(i)*(20)+7]+tIe*tBe*2
endif
return false
endfunction
function tke takes integer i,integer tJe,integer tIe,integer tBe returns boolean
local integer a1=cde[(i)*(20)+tJe]
local integer a2=(((cDe[(i)*(20)+tJe])-qH)/ 2)
if a1!=a2 then
call QH()
endif
if tBe==0 then
if a1>=tIe then
return true
endif
else
if a1==485*K1 and tBe>0 then
else
if tBe>0 and a1+tIe>485*K1 then
set tIe=485*K1-a1
endif
set cde[(i)*(20)+tJe]=cde[(i)*(20)+tJe]+tIe*tBe
set a1=cde[(i)*(20)+tJe]
set cDe[(i)*(20)+tJe]=cDe[(i)*(20)+tJe]+tIe*2*tBe
set a2=(((cDe[(i)*(20)+tJe])-qH)/ 2)
endif
endif
return false
endfunction
function tKe takes unit u,integer id returns nothing
local player p=GetOwningPlayer(u)
call UnitAddAbility(u,id)
call SetPlayerAbilityAvailable(p,id,false)
set p=null
endfunction
function tle takes unit u returns real
return GetUnitState(u,UNIT_STATE_LIFE)/ GetUnitState(u,UNIT_STATE_MAX_LIFE)*'d'
endfunction
function tLe takes integer i returns boolean
if Yk[i]>$948 then
call QH()
endif
if Yk[i]/ 2!=cNe[(i)*(20)+1]+cNe[(i)*(20)+2]+cNe[(i)*(20)+3]+cNe[(i)*(20)+4]+cNe[(i)*(20)+5]+cNe[(i)*(20)+6]+cNe[(i)*(20)+7]+cNe[(i)*(20)+8]+cNe[(i)*(20)+9]+cNe[(i)*(20)+$A]+cNe[(i)*(20)+$B]+cNe[(i)*(20)+$C]then
call QH()
endif
return true
endfunction
function tme takes nothing returns boolean
local integer CGe=Qce()
set cl[CGe]=cl[CGe]-1
if cl[CGe]<=0 then
call QDe()
call FlushChildHashtable(UH,GetHandleId(Cl[CGe]))
call FlushChildHashtable(ht,GetHandleId(Cl[CGe]))
call RemoveUnit(Cl[CGe])
set Cl[CGe]=null
call qQe(CGe)
endif
return false
endfunction
function tMe takes player p,integer tpe,real x,real y,real tPe,real sQe returns unit
local integer CGe=qqe()
set Cl[CGe]=CreateUnit(p,tpe,x,y,tPe)
set cl[CGe]=R2I(sQe/ .03125)
call SetUnitPathing(Cl[CGe],false)
call SetUnitX(Cl[CGe],x)
call SetUnitY(Cl[CGe],y)
call QIe(CGe,.03125,true,function tme)
return Cl[CGe]
endfunction
function tqe takes unit u,integer id,integer QZe returns nothing
local integer i=1
loop
exitwhen i>QZe
call UnitAddItemById(u,id)
set i=i+1
endloop
endfunction
function tQe takes integer i returns boolean
return(BMe[(i)*(20)+1]+BMe[(i)*(20)+2]+BMe[(i)*(20)+3]>=3)
endfunction
function tse takes rect r returns real
return GetRandomReal(GetRectMinX(r),GetRectMaxX(r))
endfunction
function tSe takes rect r returns real
return GetRandomReal(GetRectMinY(r),GetRectMaxY(r))
endfunction
function tte takes nothing returns boolean
local integer CGe=Qce()
set Fl[CGe]=Fl[CGe]-1
if Fl[CGe]<=0 then
call QDe()
call FlushChildHashtable(UH,GetHandleId(gl[CGe]))
call FlushChildHashtable(ht,GetHandleId(gl[CGe]))
call RemoveUnit(gl[CGe])
set gl[CGe]=null
call qPe(CGe)
endif
return false
endfunction
function tTe takes player p,integer tpe,real x,real y,real tPe,real sQe returns unit
local integer CGe=qpe()
set gl[CGe]=CreateUnit(p,tpe,x,y,tPe)
set Fl[CGe]=R2I(sQe/ .03125)
call QIe(CGe,.03125,true,function tte)
return gl[CGe]
endfunction
function tue takes unit u returns boolean
return( not(s1e(u,EG)))and( not(s1e(u,ug)or s1e(u,OF)or s1e(u,IF)))
endfunction
function tUe takes integer id,real x,real y,real twe returns nothing
if GetRandomReal(0,'d')<=twe then
call CreateItem(id,x,y)
endif
endfunction
function tWe takes integer id,real x,real y,integer QZe returns nothing
local integer i=1
if QZe==1 then
call CreateItem(id,x,y)
else
loop
exitwhen i>QZe
call CreateItem(id,x,y)
set i=i+1
endloop
endif
endfunction
function tye takes integer i,integer nd returns nothing
local player p=Player(i-1)
local integer tYe=JJ[i]/ 3
set XA[i]=XA[i]+nd*2
call Qke(p,"|cffff0000"+"Nhận điểm năng động|r "+"|cffffcc00"+I2S(nd),3)
set tYe=tYe+XA[i]/ 2
call MultiboardSetItemValueBJ(mC,6,(i+1),I2S(XA[i]/ 2)+" / "+I2S(tYe))
set p=null
endfunction
function tze takes integer i,integer a1,integer a2,integer tZe returns nothing
local real r=1.
if Wi[i]>0 then
set r=r+.1+.02*Wi[i]
endif
if Vk[a1]==a2 then
call the(i,R2I(I2R(tZe)*r),1)
if GetRandomReal(0,'d')<=(a1*5+8)then
call UnitAddItemById(OJ[i],iJ[3])
endif
endif
endfunction
function t_e takes integer i,integer t0e,integer t1e returns nothing
if t1e==2 then
call tfe(i,t0e,1)
set TH=t0e
elseif t1e==3 then
call tfe(i,t0e*2,1)
set TH=t0e*2
else
set TH=0
endif
endfunction
function t2e takes integer i,integer tIe returns nothing
call tje(i,tIe,1,1)
call tje(i,tIe,2,1)
call tje(i,tIe,3,1)
call tje(i,tIe,4,1)
call tje(i,tIe,5,1)
call tje(i,tIe,6,1)
endfunction
function t3e takes unit u,integer tIe,integer tBe returns boolean
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
if((GetPlayerState((p),PLAYER_STATE_RESOURCE_LUMBER))-Bne[(i)*(5)+4])!=Bne[(i)*(5)+3]/ 2 or Bne[(i)*(5)+2]!=(GetPlayerState((p),PLAYER_STATE_RESOURCE_LUMBER))then
call QH()
set p=null
return false
endif
if tBe!=0 then
set Bne[(i)*(5)+3]=Bne[(i)*(5)+3]+tBe*tIe*2
set Bne[(i)*(5)+4]=Bne[(i)*(5)+4]-tBe*tIe
else
if(Bne[(i)*(5)+2]-Bne[(i)*(5)+4])>=tIe then
set p=null
return false
endif
endif
set p=null
return true
endfunction
function t4e takes integer i returns integer
return cfe[(i)*(20)+1]+cfe[(i)*(20)+2]+cfe[(i)*(20)+3]+cfe[(i)*(20)+4]+cfe[(i)*(20)+5]+cfe[(i)*(20)+6]+cfe[(i)*(20)+7]+cfe[(i)*(20)+8]+cfe[(i)*(20)+9]+cfe[(i)*(20)+$A]+cfe[(i)*(20)+$B]+cfe[(i)*(20)+$C]+cfe[(i)*(20)+$D]+cfe[(i)*(20)+$E]+cfe[(i)*(20)+$F]+cfe[(i)*(20)+16]+cfe[(i)*(20)+17]+cfe[(i)*(20)+18]+cfe[(i)*(20)+19]
endfunction
function t5e takes integer i returns nothing
local string s="|cffffff00"+"Điểm lịch luyện: "+I2S(t4e(i))+"|r"
set s=s+"

- Đào Chu Công Mộ: "+"|cff7fff00"+I2S(cfe[(i)*(20)+1])+"/3|r"
set s=s+"
- Sát Thủ Đường: "+"|cff7fff00"+I2S(cfe[(i)*(20)+2])+"/3|r"
set s=s+"
- Vạn Hoa Cốc: "+"|cff7fff00"+I2S(cfe[(i)*(20)+3])+"/3|r"
set s=s+"
- Lâu Lan Tầm Bảo: "+"|cff7fff00"+I2S(cfe[(i)*(20)+4])+"/3|r"
set s=s+"
- Hoạt Tử Nhân Mộ: "+"|cff7fff00"+I2S(cfe[(i)*(20)+5])+"/3|r"
set s=s+"
- Long Môn Phi Kiếm: "+"|cff7fff00"+I2S(cfe[(i)*(20)+6])+"/3|r"
set s=s+"
- Bích Lạc Cốc: "+"|cff7fff00"+I2S(cfe[(i)*(20)+7])+"/3|r"
set s=s+"
- Bách Man Sơn: "+"|cff7fff00"+I2S(cfe[(i)*(20)+8])+"/3|r"
set s=s+"
- Minh Linh Đình Viện: "+"|cff7fff00"+I2S(cfe[(i)*(20)+9])+"/3|r"
set s=s+"
- Hoa Sơn Luận Kiếm: "+"|cff7fff00"+I2S(cfe[(i)*(20)+$A])+"/3|r"
set s=s+"
- Khiêu Chiến Bang Hội: "+"|cff7fff00"+I2S(cfe[(i)*(20)+$B])+"/4|r"
set s=s+"
- Boss Hoàng Kim: "+"|cff7fff00"+I2S(cfe[(i)*(20)+$C])+"/6|r"
set s=s+"
- Lương Sơn Bạc: "+"|cff7fff00"+I2S(cfe[(i)*(20)+$D])+"/3|r"
set s=s+"
- Thông Thiên Tháp: "+"|cff7fff00"+I2S(cfe[(i)*(20)+$E])+"/7|r"
set s=s+"
- Bá Đao Sơn Trang: "+"|cff7fff00"+I2S(cfe[(i)*(20)+$F])+"/1|r"
set s=s+"
- Tần Thủy Hoàng: "+"|cff7fff00"+I2S(cfe[(i)*(20)+16])+"/1|r"
set s=s+"
- Vạn Kiếm Trũng: "+"|cff7fff00"+I2S(cfe[(i)*(20)+17])+"/4|r"
set s=s+"
- Thiên Quỳnh Cung: "+"|cff7fff00"+I2S(cfe[(i)*(20)+18])+"/3|r"
set s=s+"
- Thái Thạch Cơ: "+"|cff7fff00"+I2S(cfe[(i)*(20)+19])+"/3|r"
set Bee[(i-1)*(16)+4]="
"+s
set s=null
endfunction
function t6e takes integer i,integer n,integer c returns nothing
if cfe[(i)*(20)+n]==c-1 then
set cfe[(i)*(20)+n]=c
call t5e(i)
endif
endfunction
function t7e takes string s returns string
local integer t8e=StringLength("ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghijklmnopqrstuvwxyz+/!@#_=%$-.^")
local integer n=StringLength(s)
local integer i=1
local integer c=1
local string t9e=""
local string a=""
if n<6 then
loop
call ExecuteFunc("EncodeStringName")
endloop
endif
loop
exitwhen i>n
set a=SubString(s,i-1,i)
set c=1
loop
exitwhen c>t8e
if a==SubString("ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghijklmnopqrstuvwxyz+/!@#_=%$-.^",c-1,c)then
set t9e=t9e+SubString(I2S(c+20),1,2)
endif
set c=c+1
endloop
set i=i+1
endloop
set a=null
return t9e
endfunction
function Tve takes string s returns string
local integer i=1
local integer l=StringLength(s)
local string x=""
local string n=""
local integer j=0
loop
exitwhen i>l
set n=SubString(s,i-1,i)
set j=$B
loop
exitwhen j>75
if n==tj[j]then
set x=x+I2S(j)
endif
set j=j+1
endloop
set i=i+1
endloop
set n=null
return x
endfunction
function Tee takes nothing returns nothing
local item t=GetEnumItem()
if GetItemTypeId(t)!='wolg' then
call FlushChildHashtable(IT,GetHandleId(t))
call FlushChildHashtable(UH,GetHandleId(t))
call RemoveItem(t)
endif
set t=null
endfunction
function Txe takes rect r returns nothing
call EnumItemsInRect(r,null,function Tee)
set r=null
endfunction
function Toe takes player p,integer Tre,integer dv,integer ck,integer t0e,integer Tie,integer Tae returns nothing
local string s="|cffffcc00"+"Bạn nhận được phần thưởng hoạt động "
if Tre>0 then
set s=s+I2S(Tre)+" bạc"
endif
if dv>0 then
set s=s+", "+I2S(dv)+" uy danh"
endif
if ck>0 then
set s=s+", "+I2S(ck)+" chân khí"
endif
if t0e>0 then
set s=s+", "+I2S(t0e)+" NHHT"
endif
if Tie>0 then
set s=s+", "+I2S(Tie)+" danh vọng trang bị "+Mj[Tae]
endif
call Qke(p,s,5)
set s=null
endfunction
function Tne takes integer c returns integer
if zi[Kk[pv]+mv]==Yi[pv]then
return c
endif
return 0
endfunction
function TVe takes nothing returns nothing
local integer CGe=Qce()
call QRe(jl[CGe])
if QEe(jl[CGe])then
call SetUnitVertexColor(jl[CGe],$FF,$FF,$FF,$FF)
endif
set jl[CGe]=null
call QDe()
call qMe(CGe)
endfunction
function TEe takes unit u returns nothing
local integer CGe=qme()
set jl[CGe]=GetTriggerUnit()
call SetUnitVertexColor(jl[CGe],$FF,70,0,$FF)
call QOe(jl[CGe])
call QIe(CGe,3,false,function TVe)
endfunction
function TXe takes nothing returns nothing
local integer CGe=Qce()
call QRe(ll[CGe])
if QEe(ll[CGe])then
call SetUnitVertexColor(ll[CGe],$FF,$FF,$FF,$FF)
endif
set ll[CGe]=null
call QDe()
call qLe(CGe)
endfunction
function TOe takes unit u returns nothing
local integer CGe=qle()
set ll[CGe]=GetTriggerUnit()
call SetUnitVertexColor(ll[CGe],25,$FF,25,$FF)
call QOe(ll[CGe])
call QIe(CGe,3,false,function TXe)
endfunction
function TRe takes nothing returns nothing
local integer CGe=Qce()
call QRe(Pl[CGe])
if QEe(Pl[CGe])then
call SetUnitVertexColor(Pl[CGe],$FF,$FF,$FF,$FF)
endif
set Pl[CGe]=null
call QDe()
call qKe(CGe)
endfunction
function TIe takes unit u returns nothing
local integer CGe=qke()
set Pl[CGe]=GetTriggerUnit()
call SetUnitVertexColor(Pl[CGe],25,'}',$FF,$FF)
call QOe(Pl[CGe])
call QIe(CGe,3,false,function TRe)
endfunction
function TAe takes unit u,player p,integer i,item t returns nothing
local real x=GetRectCenterX(IJ[i])
local real y=GetRectCenterY(IJ[i])
if se[i]==null then
set se[i]=CreateUnit(p,Qe,x,y,270)
call QKe(rj[i]+" đã mở |cffffff00Bách Bảo Rương|r",3)
call RemoveItem(t)
if p==GetLocalPlayer()then
call ClearSelection()
call PanCameraToTimed(x,y,0)
call SelectUnit(se[i],true)
endif
else
call Qke(p,"|cffffcc00"+"Bách Bảo Rương hiện tại đang mở !",3)
endif
endfunction
function TNe takes integer i,integer v returns nothing
local integer c=1
loop
exitwhen c>v
call tje(i,$A,GetRandomInt(1,6),1)
set c=c+1
endloop
endfunction
function Tbe takes integer i,integer n returns nothing
if n==1 then
call UnitAddItemById(OJ[i],bj[6])
elseif n==2 then
call tFe(i,$2710*(bJ[i]+3),1)
elseif n==3 then
call UnitAddItemById(OJ[i],bj[7])
elseif n==4 then
call tHe(i,$493E0,1)
elseif n==5 then
call UnitAddItemById(OJ[i],'I0BJ')
elseif n==6 then
call UnitAddItemById(OJ[i],bj[8])
elseif n==7 then
call UnitAddItemById(OJ[i],'I0BV')
elseif n==8 then
call tfe(i,900*(bJ[i]+1),1)
elseif n==9 then
call UnitAddItemById(OJ[i],bj[9])
set bGe[(i)*(20)+$C]=1
elseif n==$A then
call TNe(i,$A)
elseif n==$B then
call UnitAddItemById(OJ[i],'I0BK')
endif
endfunction
function TBe takes nothing returns boolean
local integer CGe=Qce()
local integer rd=GetRandomInt(1,$B)
if Sl[CGe]>20 then
call SetPlayerAbilityAvailable((ul[CGe]),(pj[Ul[CGe]]),(false))
if Ul[CGe]==rd then
set rd=GetRandomInt(1,$B)
endif
set Ul[CGe]=rd
call SetPlayerAbilityAvailable((ul[CGe]),(pj[Ul[CGe]]),(true))
endif
if Sl[CGe]==20 then
call SetPlayerAbilityAvailable((ul[CGe]),(pj[Ul[CGe]]),(false))
set Ul[CGe]=GetRandomInt(1,$B)
call SetPlayerAbilityAvailable((ul[CGe]),(pj[Ul[CGe]]),(true))
call QKe(rj[Tl[CGe]]+" mở |cffffff00Bách Bảo Rương|r nhận được phần thưởng "+"|cffffff00"+GetObjectName(pj[Ul[CGe]])+"|r, xin chúc mừng !",5)
call Qre(AddSpecialEffect("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl",GetRectCenterX(IJ[Tl[CGe]]),GetRectCenterY(IJ[Tl[CGe]])))
call Tbe(Tl[CGe],Ul[CGe])
call Qre(wl[CGe])
endif
set Sl[CGe]=Sl[CGe]-1
if Sl[CGe]<=0 then
call QDe()
call SetPlayerAbilityAvailable((ul[CGe]),(Se),(true))
call SetPlayerAbilityAvailable((ul[CGe]),(pj[1]),(true))
call SetPlayerAbilityAvailable((ul[CGe]),(pj[2]),(true))
call SetPlayerAbilityAvailable((ul[CGe]),(pj[3]),(true))
call SetPlayerAbilityAvailable((ul[CGe]),(pj[4]),(true))
call SetPlayerAbilityAvailable((ul[CGe]),(pj[5]),(true))
call SetPlayerAbilityAvailable((ul[CGe]),(pj[6]),(true))
call SetPlayerAbilityAvailable((ul[CGe]),(pj[7]),(true))
call SetPlayerAbilityAvailable((ul[CGe]),(pj[8]),(true))
call SetPlayerAbilityAvailable((ul[CGe]),(pj[9]),(true))
call SetPlayerAbilityAvailable((ul[CGe]),(pj[$A]),(true))
call SetPlayerAbilityAvailable((ul[CGe]),(pj[$B]),(true))
call RemoveUnit(se[Tl[CGe]])
set se[Tl[CGe]]=null
set wl[CGe]=null
set ul[CGe]=null
call qJe(CGe)
endif
return false
endfunction
function Tce takes player p,integer i returns nothing
local integer CGe=qje()
set Sl[CGe]=50
set Tl[CGe]=i
set ul[CGe]=p
set Ul[CGe]=0
set wl[CGe]=AddSpecialEffect("Abilities\\Spells\\Other\\Drain\\ManaDrainTarget.mdl",GetRectCenterX(IJ[i]),GetRectCenterY(IJ[i]))
call QIe(CGe,.3125,true,function TBe)
endfunction
function TCe takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
call Qke(p,"|cffffcc00"+"Bắt đầu mở Bách Bảo Rương, phần thưởng sẽ được chọn ngẫu nhiên sau 10 giây !",3)
call SetPlayerAbilityAvailable((p),(Se),(false))
call SetPlayerAbilityAvailable((p),(pj[1]),(false))
call SetPlayerAbilityAvailable((p),(pj[2]),(false))
call SetPlayerAbilityAvailable((p),(pj[3]),(false))
call SetPlayerAbilityAvailable((p),(pj[4]),(false))
call SetPlayerAbilityAvailable((p),(pj[5]),(false))
call SetPlayerAbilityAvailable((p),(pj[6]),(false))
call SetPlayerAbilityAvailable((p),(pj[7]),(false))
call SetPlayerAbilityAvailable((p),(pj[8]),(false))
call SetPlayerAbilityAvailable((p),(pj[9]),(false))
call SetPlayerAbilityAvailable((p),(pj[$A]),(false))
call SetPlayerAbilityAvailable((p),(pj[$B]),(false))
call Tce(p,i)
set u=null
set p=null
return false
endfunction
function Tde takes nothing returns boolean
return GetSpellAbilityId()==Se and TCe()
endfunction
function TDe takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function Tde))
set t=null
endfunction
function Tfe takes integer ch returns string
if ch>=$7A120 then
return "|cffffff00"+"Đồng Cừu"
elseif ch>=$493E0 then
return "|cffffff00"+"Chí Khí"
elseif ch>=$2BF20 then
return "|cffffa500"+"Hợp Mưu"
elseif ch>=$1D4C0 then
return "|cffffa500"+"Quần Hùng"
elseif ch>=80000 then
return "|cff9370db"+"Phó Hỏa"
elseif ch>=$EA60 then
return "|cff9370db"+"Đồng Hưởng"
elseif ch>=$9C40 then
return "|cff0078d7"+"Tề Tâm"
elseif ch>=$4E20 then
return "|cff0078d7"+"Kim Lan"
elseif ch>=$2710 then
return "|cff7fff00"+"Huề Thủ"
else
return "|cff7fff00"+"Kết Nghĩa"
endif
endfunction
function TFe takes integer ch returns integer
if ch>=$7A120 then
return $A
elseif ch>=$493E0 then
return 9
elseif ch>=$2BF20 then
return 8
elseif ch>=$1D4C0 then
return 7
elseif ch>=80000 then
return 6
elseif ch>=$EA60 then
return 5
elseif ch>=$9C40 then
return 4
elseif ch>=$4E20 then
return 3
elseif ch>=$2710 then
return 2
else
return 1
endif
endfunction
function Tge takes integer lv returns integer
if lv>=$A then
return 0
elseif lv>=9 then
return $7A120
elseif lv>=8 then
return $493E0
elseif lv>=7 then
return $2BF20
elseif lv>=6 then
return $1D4C0
elseif lv>=5 then
return 80000
elseif lv>=4 then
return $EA60
elseif lv>=3 then
return $9C40
elseif lv>=2 then
return $4E20
else
return $2710
endif
endfunction
function TGe takes player p,integer i returns nothing
local integer lv=TFe(cCe[(i)*(20)+1])
call Qke(p,"|cffff0000"+"------ Bang Hội ------",$A)
call Qke(p,"|cff7fff00"+"-------------------------------------------",$A)
call Qke(p,"|cffffcc00"+"- Tích lũy cống hiến bang hội: |r"+I2S(cCe[(i)*(20)+1])+"|cff7fff00"+" (cấp "+I2S(lv)+")",$A)
call Qke(p,"|cffffcc00"+"- Tích lũy cống hiến nâng cấp: |r"+I2S(Tge(lv)),$A)
call Qke(p,"|cffffcc00"+"- Cống hiến bang hội: |r"+I2S(cCe[(i)*(20)+3]/ 2),$A)
call Qke(p,"|cffffcc00"+"- Xưng hiệu: |r"+Tfe(cCe[(i)*(20)+1])+"|r",$A)
call Qke(p,"|cff7fff00"+"-------------------------------------------",$A)
endfunction
function The takes integer i returns nothing
local string s=""
set bBe[(i-1)*($C)+4]=3
set bce[(i-1)*($C)+4]="Nhiệm vụ bang hội"
set s="|cffadd8e6"+"
Khi tham gia các hoạt động trong danh sách nhiệm vụ bang hội sẽ nhận được điểm cống hiến|r"
set s=s+"

- "+cXe[(1)*(20)+Vk[1]]
set s=s+"
- "+cXe[(2)*(20)+Vk[2]]
set s=s+"
- "+cXe[(3)*(20)+Vk[3]]
set s=s+"
- "+cXe[(4)*(20)+Vk[4]]
set s=s+"
- "+cXe[(5)*(20)+Vk[5]]
set s=s+"
- "+cXe[(6)*(20)+Vk[6]]
set bCe[(i-1)*($C)+4]=s
set s=null
endfunction
function THe takes unit A returns integer
if(GetUnitAbilityLevel((A),('B006'))>0)then
return 'B006'
elseif(GetUnitAbilityLevel((A),('B007'))>0)then
return 'B007'
elseif(GetUnitAbilityLevel((A),('B008'))>0)then
return 'B008'
elseif(GetUnitAbilityLevel((A),('B009'))>0)then
return 'B009'
else
return 'B00A'
endif
endfunction
function IsDamaged takes nothing returns integer
return te[Te]
endfunction
function IsCritical takes nothing returns boolean
return We
endfunction
function IsDodge takes nothing returns boolean
return ye
endfunction
function Tje takes unit A,integer K,real R returns nothing
local integer id=GetHandleId(A)
call SaveReal(ue,id,K,LoadReal(ue,id,K)+R)
endfunction
function TJe takes unit A,integer K,real R returns nothing
local integer id=GetHandleId(A)
call SaveReal(ue,id,K,R)
endfunction
function Tke takes unit A,integer K,integer I returns nothing
local integer id=GetHandleId(A)
call SaveInteger(ue,id,K,I)
endfunction
function TKe takes unit A,integer K returns real
local integer id=GetHandleId(A)
return LoadReal(ue,id,K)
endfunction
function Tle takes unit A,integer K returns integer
local integer id=GetHandleId(A)
return LoadInteger(ue,id,K)
endfunction
function TLe takes unit u,real d returns nothing
call BlzSetUnitBaseDamage(u,BlzGetUnitBaseDamage(u,0)+R2I(d),0)
endfunction
function Tme takes unit u returns boolean
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
local integer TMe=Bue[(2)*(20)+i]
local integer st=(GetHeroLevel(u)-'d')*3+(bJ[i]+1)*300+JA[i]*$F+bEe[i]*300
if TMe!=GetHeroStr(u,true)+GetHeroAgi(u,true)+GetHeroInt(u,true)or boe[i]>st or JA[i]>20 then
call QH()
return false
endif
if bie[i]!=bae[i]+bne[i]+bVe[i]or bie[i]>st then
call QH()
return false
endif
return true
endfunction
function Tpe takes unit u returns real
local real as=BlzGetUnitAttackCooldown(u,0)
if as==0 then
return 1.
else
return(1./ as)
endif
endfunction
function TPe takes unit u,real as returns nothing
local real a=0
call Tje(u,4346,as)
set a=TKe(u,4346)
if a>$96 then
set a=$96
endif
call BlzSetUnitAttackCooldown(u,2.-a*.01,0)
endfunction
function Tqe takes unit u,real ar returns nothing
local real a=BlzGetUnitArmor(u)
call BlzSetUnitArmor(u,ar+a)
endfunction
function TQe takes unit u returns real
return(GetUnitState(u,UNIT_STATE_LIFE)/ GetUnitState(u,UNIT_STATE_MAX_LIFE))*'d'
endfunction
function Tse takes unit u,real TSe returns nothing
call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+TSe)
endfunction
function Tte takes unit u,real TTe returns nothing
call SetUnitState(u,UNIT_STATE_MANA,GetUnitState(u,UNIT_STATE_MANA)+TTe)
endfunction
function Tue takes unit u,real r returns nothing
call Tje(u,5034,r)
call Tje(u,611,r)
call Tje(u,Ax,r)
call Tje(u,7185,r)
call Tje(u,Nx,r)
endfunction
function TUe takes unit u,real r returns nothing
call Tje(u,jx,r)
call Tje(u,6282,r)
call Tje(u,Jx,r)
call Tje(u,kx,r)
call Tje(u,7255,r)
endfunction
function Twe takes unit u,real r returns nothing
call Tje(u,572,r)
call Tje(u,7896,r)
call Tje(u,6210,r)
call Tje(u,6491,r)
call Tje(u,lx,r)
endfunction
function TWe takes unit u,real r returns nothing
call Tje(u,7695,r)
call Tje(u,5724,r)
call Tje(u,bx,r)
call Tje(u,Bx,r)
call Tje(u,cx,r)
endfunction
function Tye takes unit u,real r returns nothing
call Tje(u,Fx,r)
call Tje(u,gx,r)
endfunction
function TYe takes unit u returns boolean
local real hp=TKe(u,5267)
local real Tze=TKe(u,Gx)
local integer id=GetHandleId(u)
if(LoadReal(UH,id,705)/ 2)!=GetUnitState(u,UNIT_STATE_MAX_LIFE)then
call QH()
endif
call BlzSetUnitMaxHP(u,R2I(hp*(1.+Tze)))
call SaveReal(UH,id,705,I2R(2*R2I(hp*(1.+Tze))))
return false
endfunction
function TZe takes unit u,real TSe returns nothing
call Tje(u,5267,TSe)
call TYe(u)
endfunction
function T_e takes unit u,real T0e returns nothing
call Tje(u,Gx,T0e)
call TYe(u)
endfunction
function T1e takes unit u returns boolean
local real mp=TKe(u,hx)
local real T2e=TKe(u,Hx)
local integer id=GetHandleId(u)
if(LoadReal(UH,id,6732)/ 2)!=GetUnitState(u,UNIT_STATE_MAX_MANA)then
call QH()
endif
call BlzSetUnitMaxMana(u,R2I(mp*(1.+T2e)))
call SaveReal(UH,id,6732,I2R(2*R2I(mp*(1.+T2e))))
return false
endfunction
function T3e takes unit u,real TTe returns nothing
call Tje(u,hx,TTe)
call T1e(u)
endfunction
function T4e takes unit u,real T0e returns nothing
call Tje(u,Hx,T0e)
call T1e(u)
endfunction
function T5e takes unit u,real d returns nothing
if LoadBoolean(UH,GetHandleId(u),ge)==false then
call BlzSetUnitBaseDamage(u,BlzGetUnitBaseDamage(u,0)+R2I(d),0)
endif
endfunction
function T6e takes unit u,real d returns nothing
if LoadBoolean(UH,GetHandleId(u),ge)==true then
call BlzSetUnitBaseDamage(u,BlzGetUnitBaseDamage(u,0)+R2I(d),0)
endif
endfunction
function T7e takes unit u returns nothing
local integer id=GetHandleId(u)
local real x=LoadReal(UH,id,6839)
local real y=LoadReal(UH,id,Qx)
if sre(GetUnitX(u),GetUnitY(u),x,y)>$FA0 then
call SetUnitX(u,x)
call SetUnitY(u,y)
call UnitRemoveAbility(u,'A0JP')
call sge(u)
call SetUnitLifePercentBJ(u,'d')
call QKe(GetUnitName(u)+" đã trở về vị trí ban đầu và hồi phục 100% sinh lực !",$A)
endif
endfunction
function T8e takes unit u,integer a,boolean b returns boolean
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
local integer id=GetHandleId(u)
local integer TMe=Bue[(2)*(20)+i]
local integer s=GetHeroStr(u,true)
if TMe!=GetHeroStr(u,true)+GetHeroAgi(u,true)+GetHeroInt(u,true)then
call QH()
return false
endif
if b then
if s>0 then
call Tje(u,5267,-$A*s)
call T5e(u,-1*s)
endif
call ModifyHeroStat(0,u,0,a)
set Bue[(2)*(20)+i]=Bue[(2)*(20)+i]+a
call SaveInteger(UH,id,oB,GetHeroStr(u,true))
call SaveReal(UH,id,705,LoadReal(UH,id,705)+a*20)
set s=GetHeroStr(u,true)
call Tje(u,5267,$A*s)
call T5e(u,1*s)
call TYe(u)
endif
return true
endfunction
function T9e takes unit u,integer a,boolean b returns boolean
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
local integer id=GetHandleId(u)
local integer TMe=Bue[(2)*(20)+i]
local integer s=GetHeroAgi(u,true)
if TMe!=GetHeroStr(u,true)+GetHeroAgi(u,true)+GetHeroInt(u,true)then
call QH()
return false
endif
if b then
if s>0 then
call Tje(u,6780,-1*s)
call Tje(u,5762,-.5*s)
call Tje(u,ax,-1*(s/ 40)*.01)
endif
call ModifyHeroStat(1,u,0,a)
set Bue[(2)*(20)+i]=Bue[(2)*(20)+i]+a
call SaveInteger(UH,id,rB,GetHeroAgi(u,true))
set s=GetHeroAgi(u,true)
call Tje(u,6780,1*s)
call Tje(u,5762,.5*s)
call Tje(u,ax,1*(s/ 40)*.01)
endif
return true
endfunction
function uve takes unit u,integer a,boolean b returns boolean
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
local integer id=GetHandleId(u)
local integer TMe=Bue[(2)*(20)+i]
local integer s=GetHeroInt(u,true)
if TMe!=GetHeroStr(u,true)+GetHeroAgi(u,true)+GetHeroInt(u,true)then
call QH()
return false
endif
if b then
if s>0 then
call Tje(u,hx,-5*s)
call T6e(u,-1*s)
endif
call ModifyHeroStat(2,u,0,a)
set Bue[(2)*(20)+i]=Bue[(2)*(20)+i]+a
call SaveInteger(UH,id,6842,GetHeroInt(u,true))
call SaveReal(UH,id,6732,LoadReal(UH,id,6732)+a*$A)
set s=GetHeroInt(u,true)
call Tje(u,hx,5*s)
call T6e(u,1*s)
call T1e(u)
endif
return true
endfunction
function uee takes unit A,unit B,boolean uxe,real uoe,real ure,integer uie returns boolean
local real uae=TKe(A,4888)-TKe(B,7614)
local real une=TKe(B,5762)-(TKe(A,6780)*(1.+TKe(A,Ze)))/ 2
local real uVe=TKe(B,4251)
local real uEe=TKe(A,8073)
local real TempZ=0
local real uXe=TKe(A,4141)
local real mp=0
local real hp=0
local boolean uOe=true
local real uRe=1.
local integer i=0
local integer k=0
local real uIe=TKe(A,ax)-TKe(B,Vx)
local real uAe=0
local real uNe=0
local real db=sre(GetUnitX(A),GetUnitY(A),GetUnitX(B),GetUnitY(B))
if db>$FA0 or spe(A)then
set uoe=0
set ure=0
set une='d'
endif
if uxe and GetRandomReal(0,'d')<=TKe(B,Ex)then
set uoe=0
set ure=0
set une='d'
elseif not uxe and GetRandomReal(0,'d')<=TKe(B,Xx)then
set uoe=0
set ure=0
set une='d'
endif
if uie!=999 and(uoe+ure)!=0 then
if uIe>4. then
set uIe=4.
elseif uIe<1.05 then
set uIe=1.05
endif
if uae<=0 then
set uae=5
else
set uae=((uae*.1)/(uae*.1+$B4))*'d'
if uae>35+uEe then
set uae=35+uEe
elseif uae<5 then
set uae=5
endif
endif
if une<=0 then
set une=5
else
set une=((une*.15)/(une*.15+500))*'d'
if une>35+uVe then
set une=35+uVe
elseif une<5 then
set une=5
endif
endif
if uie=='B007' and uoe==0 then
set uae=0
set une=0
set uNe=.25
endif
if uoe>0 then
set Kv=TKe(B,5034)*(1.-uXe)
set Kv=(Kv*.1)/(Kv*.1+$FA)
if Kv<0 then
set Kv=0
elseif Kv>.6 then
set Kv=.6
endif
set uoe=uoe*(1.-Kv)
endif
if uie=='B006' then
set Kv=TKe(B,5034)*(1.-uXe)
set Kv=(Kv*.1)/(Kv*.1+$FA)
if Kv<0 then
set Kv=0
elseif Kv>.75 then
set Kv=.75
endif
set ure=ure*(1.-Kv)
if(GetUnitAbilityLevel((B),('B007'))>0)then
set uRe=1.35+(.4*TKe(A,Ix)-.3*TKe(B,7557))
elseif(GetUnitAbilityLevel((B),('B009'))>0)then
set uRe=.65+(.4*TKe(A,7557)-.3*TKe(B,Ix))
endif
elseif uie=='B007' then
set Kv=TKe(B,611)*(1.-uXe)
set Kv=(Kv*.12)/(Kv*.12+$C8)
if Kv<0 then
set Kv=0
elseif Kv>.75 then
set Kv=.75
endif
set ure=ure*(1.-Kv)
if(GetUnitAbilityLevel((B),('B00A'))>0)then
set uRe=1.35+(.4*TKe(A,Ix)-.3*TKe(B,7557))
elseif(GetUnitAbilityLevel((B),('B006'))>0)then
set uRe=.65+(.4*TKe(A,7557)-.3*TKe(B,Ix))
endif
elseif uie=='B008' then
set Kv=TKe(B,Ax)*(1.-uXe)
set Kv=(Kv*.12)/(Kv*.12+$C8)
if Kv<0 then
set Kv=0
elseif Kv>.75 then
set Kv=.75
endif
set ure=ure*(1.-Kv)
if(GetUnitAbilityLevel((B),('B009'))>0)then
set uRe=1.35+(.4*TKe(A,Ix)-.3*TKe(B,7557))
elseif(GetUnitAbilityLevel((B),('B00A'))>0)then
set uRe=.65+(.4*TKe(A,7557)-.3*TKe(B,Ix))
endif
elseif uie=='B009' then
set Kv=TKe(B,7185)*(1.-uXe)
set Kv=(Kv*.12)/(Kv*.12+$C8)
if Kv<0 then
set Kv=0
elseif Kv>.75 then
set Kv=.75
endif
set ure=ure*(1.-Kv)
if(GetUnitAbilityLevel((B),('B006'))>0)then
set uRe=1.35+(.4*TKe(A,Ix)-.3*TKe(B,7557))
elseif(GetUnitAbilityLevel((B),('B008'))>0)then
set uRe=.65+(.4*TKe(A,7557)-.3*TKe(B,Ix))
endif
elseif uie=='B00A' then
set Kv=TKe(B,Nx)*(1.-uXe)
set Kv=(Kv*.12)/(Kv*.12+$C8)
if Kv<0 then
set Kv=0
elseif Kv>.75 then
set Kv=.75
endif
set ure=ure*(1.-Kv)
if(GetUnitAbilityLevel((B),('B008'))>0)then
set uRe=1.35+(.4*TKe(A,Ix)-.3*TKe(B,7557))
elseif(GetUnitAbilityLevel((B),('B007'))>0)then
set uRe=.65+(.4*TKe(A,7557)-.3*TKe(B,Ix))
endif
endif
set uAe=uoe+ure
set uAe=(uAe*uRe)
set Kv=TKe(A,xx)
if Kv>6. then
set Kv=6.
endif
if GetRandomReal(0,'d')<=TKe(A,ix)then
set uAe=uAe*1.2
endif
set uAe=uAe*(1.+Kv)
set uAe=uAe/(1.+TKe(B,ox))
set Kv=TKe(B,5740)
if Kv>.99 then
set Kv=.99
endif
set uAe=uAe*(1.-Kv)
if GetRandomReal(0,'d')<=TKe(B,4338)then
set uAe=uAe*.3
endif
if GetRandomReal(0,'d')<=TKe(B,5323)and db>=400 then
set uAe=1
endif
if spe(A)then
set uAe=0
endif
else
set uAe=uoe+ure
endif
if(IsUnitType((B),UNIT_TYPE_TAUREN))and(IsUnitType((A),UNIT_TYPE_HERO))then
set Kv=1.-(Tle(B,803)-GetUnitAbilityLevel(A,'A0YT'))*.08
if Kv>1. then
set Kv=1.
endif
set uAe=uAe*Kv
endif
set qv=0
set Te=Te+1
set te[Te]=1
if GetRandomReal(0,'d')<une and uie!=999 then
set uAe=0
set ye=true
else
set ye=false
if GetRandomReal(0,100.)<uae and uie!=999 then
set We=true
set uAe=uAe*uIe
else
set We=false
endif
endif
set Ye=uxe
set Ue=uie
if uAe>0 and uie!=999 then
if(GetUnitAbilityLevel((B),('B001'))>0)then
set uAe=uAe*1.5
endif
if(GetUnitAbilityLevel((B),('B00X'))>0)then
set uAe=uAe/ 1.5
endif
if(IsUnitType((B),UNIT_TYPE_TAUREN))and not spe(B)and GetRandomReal(0,'d')<=30. then
call T7e(B)
endif
if(GetUnitAbilityLevel((A),('A0RB'))>0)then
if GetUnitState(A,UNIT_STATE_LIFE)/ GetUnitState(A,UNIT_STATE_MAX_LIFE)<=.25 then
set uAe=uAe*.75
endif
endif
if(IsUnitType((B),UNIT_TYPE_HERO))then
set i=(GetPlayerId(GetOwningPlayer((B))))+1
set k=(GetPlayerId(GetOwningPlayer((A))))+1
if(GetUnitAbilityLevel((B),(jR))>0)and uAe>$A then
if kR[i]>0 then
set kR[i]=kR[i]-uAe
set uAe=1
endif
endif
if(GetUnitAbilityLevel((B),('A0RB'))>0)then
if GetUnitState(B,UNIT_STATE_LIFE)/ GetUnitState(B,UNIT_STATE_MAX_LIFE)<=.25 then
set uAe=uAe/ 1.8
endif
endif
if(GetUnitAbilityLevel((B),(uR))>0)and uAe>$A then
set Pv=.17+.03*GetUnitAbilityLevel(B,'A0A3')
set Pv=Pv*uAe
if(GetUnitState(B,UNIT_STATE_MANA)/ GetUnitState(B,UNIT_STATE_MAX_MANA))*'d'>=$F then
call SetUnitState(B,UNIT_STATE_MANA,GetUnitState(B,UNIT_STATE_MANA)-Pv/ 2)
set uAe=uAe-Pv
endif
endif
if(IsUnitType((A),UNIT_TYPE_HERO))then
set uAe=uAe*.03
set uAe=uAe*(1.-uNe)
endif
elseif(IsUnitType((A),UNIT_TYPE_HERO))then
set uAe=uAe*ej
endif
endif
if uie!=999 then
set uOe=UnitDamageTarget(A,B,uAe,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL,null)
else
set uOe=UnitDamageTarget(A,B,uAe,true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,null)
endif
if ze then
set ze=false
endif
set te[Te]=0
set Te=Te-1
return uOe
endfunction
function ube takes nothing returns boolean
local unit u=GetFilterUnit()
if not IsUnitType(u,UNIT_TYPE_DEAD)then
call Tje(u,6780,40)
call Tje(u,5762,40)
call Tje(u,4888,40)
call Tje(u,ax,1.5)
endif
set u=null
return false
endfunction
function uBe takes unit u,real d returns real
return d*BlzGetUnitBaseDamage(u,0)*(1+TKe(u,5319))*3.5
endfunction
function uce takes unit u,real d,integer uCe returns real
local real QPe=(d+TKe(u,Rx))*(TKe(u,7695)+TKe(u,5724)+TKe(u,bx)+TKe(u,Bx)+TKe(u,cx))
if GetRandomReal(0,'d')<=TKe(u,rx)then
set QPe=QPe*(1.+TKe(u,5392))
endif
if uCe=='B006' then
return QPe+(d+TKe(u,6302))*(1+TKe(u,7695))*(1+TKe(u,vx))
elseif uCe=='B007' then
return QPe+(d+TKe(u,6302))*(1+TKe(u,5724))*(1+TKe(u,vx))
elseif uCe=='B008' then
return QPe+(d+TKe(u,6302))*(1+TKe(u,bx))*(1+TKe(u,vx))
elseif uCe=='B009' then
return QPe+(d+TKe(u,6302))*(1+TKe(u,Bx))*(1+TKe(u,vx))
else
return QPe+(d+TKe(u,6302))*(1+TKe(u,cx))*(1+TKe(u,vx))
endif
endfunction
function ude takes unit u,real r1,real r2,integer uDe returns real
return((r1-r2)+r2*I2R(GetUnitAbilityLevel(u,uDe)))
endfunction
function ufe takes integer e,real r1,real r2,real r3,real r4,real r5,real r6,real r7,real r8,real r9,real uFe,real uge,real uGe,real uhe returns nothing
call SaveReal(f2,e,4888,r1)
call SaveReal(f2,e,ax,r2)
call SaveReal(f2,e,7614,r3)
call SaveReal(f2,e,Vx,r4)
call SaveReal(f2,e,6780,r5)
call SaveReal(f2,e,5762,r6)
call SaveReal(f2,e,4141,r7)
call SaveReal(f2,e,mx,r8)
call SaveReal(f2,e,7350,r9)
call SaveReal(f2,e,Mx,uFe)
call SaveReal(f2,e,6729,uge)
call SaveReal(f2,e,Ix,uGe)
call SaveReal(f2,e,7557,uhe)
endfunction
function uHe takes unit u,real hp,real uje,real QPe,integer t1e,real twe returns nothing
local integer a=0
local integer id=GetHandleId(u)
if t1e==2 then
call Tje(u,4888,400+TKe(u,4888)*.1)
call Tje(u,ax,1.2)
call Tje(u,6780,300+TKe(u,6780)*.1)
call Tje(u,Vx,.6)
call Tje(u,5762,400)
call Tje(u,5034,$C8+TKe(u,5034)*.2)
call Tje(u,611,$C8+TKe(u,611)*.2)
call Tje(u,Ax,$C8+TKe(u,Ax)*.2)
call Tje(u,7185,$C8+TKe(u,7185)*.2)
call Tje(u,Nx,$C8+TKe(u,Nx)*.2)
call Tje(u,4141,.16)
call Tje(u,6851,.36)
call Tje(u,'o',.36)
call Tje(u,7537,.36)
call Tje(u,4934,.36)
call Tje(u,Kx,.36)
call Tje(u,909,.36)
call Tje(u,5529,.36)
call Tje(u,6443,.36)
call Tje(u,7656,.36)
call Tje(u,4562,.36)
call Tje(u,6068,.6)
elseif t1e==1 then
call Tje(u,4888,$C8+TKe(u,4888)*.05)
call Tje(u,ax,.6)
call Tje(u,6780,$96+TKe(u,6780)*.05)
call Tje(u,Vx,.3)
call Tje(u,5762,$C8)
call Tje(u,5034,'d'+TKe(u,5034)*.1)
call Tje(u,611,'d'+TKe(u,611)*.1)
call Tje(u,Ax,'d'+TKe(u,Ax)*.1)
call Tje(u,7185,'d'+TKe(u,7185)*.1)
call Tje(u,Nx,'d'+TKe(u,Nx)*.1)
call Tje(u,4141,.08)
call Tje(u,6851,.18)
call Tje(u,'o',.18)
call Tje(u,7537,.18)
call Tje(u,4934,.18)
call Tje(u,Kx,.18)
call Tje(u,909,.18)
call Tje(u,5529,.18)
call Tje(u,6443,.18)
call Tje(u,7656,.18)
call Tje(u,4562,.18)
call Tje(u,6068,.3)
endif
if twe!=0 then
set a=R2I(BlzGetUnitMaxHP(u)*twe)
call BlzSetUnitMaxHP(u,a)
set a=R2I(BlzGetUnitArmor(u)*twe)
call BlzSetUnitArmor(u,a)
set a=R2I(BlzGetUnitBaseDamage(u,0)*twe)
call BlzSetUnitBaseDamage(u,a,0)
elseif t1e>=1 then
if hp>0 and uje>0 and QPe>0 then
call BlzSetUnitMaxHP(u,R2I(hp))
call BlzSetUnitArmor(u,R2I(uje))
call BlzSetUnitBaseDamage(u,R2I(QPe),0)
endif
endif
if Nk>3 then
call BlzSetUnitMaxHP(u,R2I(BlzGetUnitMaxHP(u)*1.5))
endif
call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_MAX_LIFE))
if(IsUnitType((u),UNIT_TYPE_TAUREN))then
call Tje(u,8073,$A)
call Tje(u,4251,$A)
call SaveReal(UH,id,6839,GetUnitX(u))
call SaveReal(UH,id,Qx,GetUnitY(u))
call UnitAddAbility(u,'A0HE')
call SaveReal(UH,id,705,BlzGetUnitMaxHP(u)/ 500)
endif
endfunction
function uJe takes unit u returns nothing
call Tje(u,4888,500)
call Tje(u,ax,1.)
call Tje(u,Vx,.3)
call Tje(u,5762,500)
call Tje(u,xx,.25)
call Tje(u,5740,.25)
call Tje(u,5034,500)
call Tje(u,611,500)
call Tje(u,Ax,500)
call Tje(u,7185,500)
call Tje(u,Nx,500)
endfunction
function uke takes unit u,real uKe,real ule,real uLe,real ume,real uMe,real upe,integer t1e,integer uPe,integer uqe,integer uQe returns nothing
if t1e==2 then
call Tje(u,ox,uqe*.08)
call Tje(u,xx,uqe*.03)
call uHe(u,uKe,ule,uLe,1,0)
call Tke(u,803,uqe)
if uqe>=8 then
call Tje(u,xx,.05*(uqe-7))
call Tje(u,5740,.05*(uqe-7))
endif
elseif t1e==3 then
call Tje(u,ox,uQe*.08)
call Tje(u,xx,uQe*.03)
call uHe(u,ume,uMe,upe,2,0)
call Tke(u,803,uQe)
if uQe>=8 then
call Tje(u,xx,.05*(uQe-7))
call Tje(u,5740,.05*(uQe-7))
endif
else
call Tje(u,ox,uPe*.08)
call Tje(u,xx,uPe*.03)
call uHe(u,0,0,0,0,0)
call Tke(u,803,uPe)
if uPe>=8 then
call Tje(u,xx,.05*(uPe-7))
call Tje(u,5740,.05*(uPe-7))
endif
endif
endfunction
function use takes nothing returns nothing
call TriggerAddAction(Fe,(function ube))
endfunction
function GetMovingUnit takes nothing returns unit
return Ux
endfunction
function uSe takes nothing returns nothing
local integer i=1
local real x
local real y
loop
exitwhen i>Wx
set Ux=wx[i]
if Ux!=null then
set x=GetUnitX(Ux)
set y=GetUnitY(Ux)
if(x==yx[i]and y==Yx[i])then
if Zx[i]then
set Zx[i]=false
call TriggerEvaluate(Tx)
endif
else
if not Zx[i]then
set Zx[i]=true
call TriggerEvaluate(tx)
endif
set yx[i]=x
set Yx[i]=y
endif
endif
set i=i+1
endloop
endfunction
function ute takes nothing returns nothing
local unit u=GetFilterUnit()
if IsUnitType(u,UNIT_TYPE_HERO)then
set Wx=Wx+1
set Zx[Wx]=false
set wx[Wx]=u
set yx[Wx]=GetUnitX(u)
set Yx[Wx]=GetUnitY(u)
call sRe(u,zx,Wx)
endif
set u=null
endfunction
function uTe takes nothing returns nothing
call TimerStart(CreateTimer(),.025,true,function uSe)
call TriggerAddAction(Fe,(function ute))
endfunction
function uue takes real A,real B returns boolean
return(A>=(B-.1))and(A<=(B+.1))
endfunction
function uUe takes integer CGe returns nothing
set Yl[yl[CGe]]=Yl[CGe]
set yl[Yl[CGe]]=yl[CGe]
set zl[CGe]=false
endfunction
function uwe takes nothing returns nothing
local integer CGe=yl[(0)]
local real nx
local real ny
local real dx
local real dy
local real d
local integer uWe
local unit u
loop
exitwhen CGe==0
set u=Zl[CGe]
set nx=GetUnitX(u)
set ny=GetUnitY(u)
if IsUnitType(u,UNIT_TYPE_DEAD)then
call uUe(CGe)
elseif not uue(nx,eL[CGe])or not uue(ny,xL[CGe])then
if(not IsUnitPaused(u))and not IsUnitType(u,UNIT_TYPE_STUNNED)then
set uWe=GetUnitCurrentOrder(u)
set dx=nx-eL[CGe]
set dy=ny-xL[CGe]
set d=SquareRoot(dx*dx+dy*dy)
set dx=dx/ d*vL[CGe]
set dy=dy/ d*vL[CGe]
if(uWe==$D0012 or uWe==$D0003)and(oL[CGe]-nx)*(oL[CGe]-nx)<(dx*dx)and(rL[CGe]-ny)*(rL[CGe]-ny)<(dy*dy)then
call SetUnitX(u,oL[CGe])
call SetUnitY(u,rL[CGe])
set eL[CGe]=oL[CGe]
set xL[CGe]=rL[CGe]
call IssueImmediateOrderById(u,$D0004)
else
set eL[CGe]=nx+dx
set xL[CGe]=ny+dy
call SetUnitX(u,eL[CGe])
call SetUnitY(u,xL[CGe])
endif
endif
endif
set CGe=yl[CGe]
endloop
set u=null
endfunction
function uye takes unit u,real s returns integer
local integer CGe=Sxe(u)
set yl[CGe]=yl[(0)]
set Yl[yl[(0)]]=CGe
set yl[(0)]=CGe
set Yl[CGe]=0
set Zl[CGe]=u
set vL[CGe]=(s-522)*.015625
set eL[CGe]=GetUnitX(u)
set xL[CGe]=GetUnitY(u)
set zl[CGe]=true
return CGe
endfunction
function uYe takes unit u,real s returns nothing
local integer CGe=Sxe(u)
if zl[CGe]then
if s>522 then
set vL[CGe]=(s-522)*.015625
else
call uUe(CGe)
endif
elseif s>522 then
call uye(u,s)
endif
endfunction
function uze takes nothing returns boolean
local integer CGe=Sxe(GetTriggerUnit())
set oL[CGe]=GetOrderPointX()
set rL[CGe]=GetOrderPointY()
return false
endfunction
function uZe takes nothing returns nothing
call TimerStart(CreateTimer(),.015625,true,function uwe)
call Qfe(Wl,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
call TriggerAddCondition(Wl,Condition(function uze))
endfunction
function u_e takes unit u,real ms returns nothing
local real a=0
call Tje(u,5781,ms*6)
set a=TKe(u,5781)
if a>840 then
set a=840
endif
if not bde[(GetPlayerId(GetOwningPlayer((u))))]and a>=522 then
call QVe(u,522)
call TJe(u,5363,522)
else
call QVe(u,a)
call TJe(u,5363,a)
endif
endfunction
function u0e takes unit u,real s returns nothing
call uYe(u,s)
call CCe(Sxe(u),s)
endfunction
function u1e takes nothing returns boolean
local integer CGe=Qce()
set VL[CGe]=VL[CGe]-1
if VL[CGe]<=0 then
call QDe()
set eo[EL[CGe]]=false
call qHe(CGe)
endif
return false
endfunction
function u2e takes integer i returns nothing
local integer CGe=qhe()
set EL[CGe]=i
set VL[CGe]=60
set eo[EL[CGe]]=true
call QIe(CGe,1.,true,function u1e)
endfunction
function u3e takes player p,integer i,boolean b returns boolean
local integer c=1
if eo[i]then
call Qke(p,"|cffff0000"+"Thời gian chuyển đổi PK phải cách nhau 1 phút !",5)
return false
endif
if b then
if tue(XJ[i])then
if vo[i]then
call Qke(p,"|cffff0000"+"Bạn đang ở trạng thái PK !",5)
return false
else
set vo[i]=true
call u2e(i)
call Qke(p,"|cffff0000"+"Bạn đã bật PK !",5)
call UnitAddAbility(XJ[i],'A0PA')
loop
exitwhen c>6
if XJ[c]!=null and c!=i then
if vo[c]then
set Uv=Player(c-1)
call SetPlayerAllianceStateBJ(Uv,p,0)
call SetPlayerAllianceStateBJ(p,Uv,0)
endif
endif
set c=c+1
endloop
endif
else
call Qke(p,"|cffffcc00"+"Không thể chuyển đổi PK trong khu vực hoạt động !",5)
endif
else
if tue(XJ[i])then
if not vo[i]then
call Qke(p,"|cffff0000"+"Bạn không ở trạng thái PK !",5)
return false
else
set vo[i]=false
call u2e(i)
call Qke(p,"|cffff0000"+"Bạn đã tắt PK !",5)
call UnitRemoveAbility(XJ[i],'A0PA')
loop
exitwhen c>6
if XJ[c]!=null and c!=i then
set Uv=Player(c-1)
call SetPlayerAllianceStateBJ(Uv,p,3)
call SetPlayerAllianceStateBJ(p,Uv,3)
endif
set c=c+1
endloop
endif
else
call Qke(p,"|cffffcc00"+"Không thể chuyển đổi PK trong khu vực hoạt động !",5)
endif
endif
return false
endfunction
function u4e takes integer s returns nothing
local integer c=1
local integer dv='d'
if s>=8 then
set dv=$E10
elseif s>=7 then
set dv=$AF0
elseif s>=6 then
set dv=$834
elseif s>=5 then
set dv=$5DC
elseif s>=4 then
set dv=$3E8
elseif s>=3 then
set dv=600
elseif s>=2 then
set dv=300
endif
set dv=R2I(dv*oj)
loop
exitwhen c>6
if XJ[c]!=null then
set Uv=Player(c-1)
call tze(c,2,4,s*$C8)
call tDe(c,R2I((70+30*s)*oj),1)
call tke(c,1,dv,1)
call tye(c,8)
call Toe(Uv,0,R2I((70+30*s)*oj),0,0,dv,1)
if Xo>=16 and xo then
set bGe[(c)*(20)+16]=1
endif
endif
set c=c+1
endloop
endfunction
function u5e takes unit u returns nothing
if u==io[1]or u==io[2]then
set ro[1]=ro[1]+1
call QKe("|cff7fff00"+"[ Tranh Đoạt Lãnh Thổ ]: Long Trụ ở Tây Tháp Lâm đã bị phá hủy !",5)
if ro[1]==2 then
call QKe("|cffffcc00"+"[ Tranh Đoạt Lãnh Thổ ]: Lãnh thổ Tây Tháp Lâm đã bị chiếm lĩnh !",5)
endif
elseif u==io[3]or u==io[4]then
set ro[2]=ro[2]+1
call QKe("|cff7fff00"+"[ Tranh Đoạt Lãnh Thổ ]: Long Trụ ở Hoài Thủy Sa Châu đã bị phá hủy !",5)
if ro[2]==2 then
call QKe("|cffffcc00"+"[ Tranh Đoạt Lãnh Thổ ]: Lãnh thổ Hoài Thủy Sa Châu đã bị chiếm lĩnh !",5)
endif
elseif u==io[5]or u==io[6]then
set ro[3]=ro[3]+1
call QKe("|cff7fff00"+"[ Tranh Đoạt Lãnh Thổ ]: Long Trụ ở Phong Lăng Độ đã bị phá hủy !",5)
if ro[3]==2 then
call QKe("|cffffcc00"+"[ Tranh Đoạt Lãnh Thổ ]: Lãnh thổ Phong Lăng Độ đã bị chiếm lĩnh !",5)
endif
elseif u==io[7]or u==io[8]then
set ro[4]=ro[4]+1
call QKe("|cff7fff00"+"[ Tranh Đoạt Lãnh Thổ ]: Long Trụ ở Hoa Sơn đã bị phá hủy !",5)
if ro[4]==2 then
call QKe("|cffffcc00"+"[ Tranh Đoạt Lãnh Thổ ]: Lãnh thổ Hoa Sơn đã bị chiếm lĩnh !",5)
endif
elseif u==io[9]or u==io[$A]then
set ro[5]=ro[5]+1
call QKe("|cff7fff00"+"[ Tranh Đoạt Lãnh Thổ ]: Long Trụ ở Mông Cổ Vương Đỉnh đã bị phá hủy !",5)
if ro[5]==2 then
call QKe("|cffffcc00"+"[ Tranh Đoạt Lãnh Thổ ]: Lãnh thổ Mông Cổ Vương Đỉnh đã bị chiếm lĩnh !",5)
endif
elseif u==io[$B]or u==io[$C]then
set ro[6]=ro[6]+1
call QKe("|cff7fff00"+"[ Tranh Đoạt Lãnh Thổ ]: Long Trụ ở Trường Bạch Sơn đã bị phá hủy !",5)
if ro[6]==2 then
call QKe("|cffffcc00"+"[ Tranh Đoạt Lãnh Thổ ]: Lãnh thổ Trường Bạch Sơn đã bị chiếm lĩnh !",5)
endif
elseif u==io[$D]or u==io[$E]then
set ro[7]=ro[7]+1
call QKe("|cff7fff00"+"[ Tranh Đoạt Lãnh Thổ ]: Long Trụ ở Đôn Hoàng Cổ Thành đã bị phá hủy !",5)
if ro[7]==2 then
call QKe("|cffffcc00"+"[ Tranh Đoạt Lãnh Thổ ]: Lãnh thổ Đôn Hoàng Cổ Thành đã bị chiếm lĩnh !",5)
endif
elseif u==io[$F]or u==io[16]then
set ro[8]=ro[8]+1
call QKe("|cff7fff00"+"[ Tranh Đoạt Lãnh Thổ ]: Long Trụ ở Tần Lăng đã bị phá hủy !",5)
if ro[8]==2 then
call QKe("|cffffcc00"+"[ Tranh Đoạt Lãnh Thổ ]: Lãnh thổ Tần Lăng đã bị chiếm lĩnh !",5)
endif
endif
set Xo=Xo+1
endfunction
function u6e takes integer b,rect r returns nothing
local real x=GetRectCenterX(r)
local real y=GetRectCenterY(r)
local integer i=1
loop
exitwhen i>8
set Qv=tTe(zv,'n05O',(((x)*1.)+(($FA)*1.)*Cos(((45*i)*1.)*bj_DEGTORAD)),(((y)*1.)+(($FA)*1.)*Sin(((45*i)*1.)*bj_DEGTORAD)),270,360)
call uHe(Qv,0,0,0,0,.4+.6*b)
set i=i+1
endloop
endfunction
function u7e takes nothing returns nothing
local integer i=1
set oo=0
loop
exitwhen i>8
if ro[i]==2 then
set oo=oo+1
endif
set i=i+1
endloop
endfunction
function u8e takes nothing returns boolean
local integer CGe=Qce()
set Eo=Eo-2
if AL[CGe]>=1 then
if IL[CGe]==1 then
set io[3]=CreateUnit(zv,'n05N',GetRectCenterX(UF),GetRectCenterY(UF),270)
set io[4]=CreateUnit(zv,'n05N',GetRectCenterX(wF),GetRectCenterY(wF),270)
call uHe(io[3],0,0,0,0,AL[CGe]+1)
call uHe(io[4],0,0,0,0,AL[CGe]+1)
call UnitAddAbility(io[3],Ej[GetRandomInt(1,5)])
call UnitAddAbility(io[4],Ej[GetRandomInt(1,5)])
set ao[2]=true
call QKe("|cffffcc00"+"[ Tranh Đoạt Lãnh Thổ ]: Hoài Thủy Sa Châu bước vào thời kỳ chinh chiến !",5)
elseif IL[CGe]==8 then
if GetRandomReal(0,'d')<=50 then
call u6e(AL[CGe],UF)
call QKe("|cffff0000"+"[ Tranh Đoạt Lãnh Thổ ]: Lãnh thổ Hoài Thủy Sa Châu bị Quân Sĩ Lưu Vong tấn công !",5)
endif
elseif IL[CGe]==9 then
if GetRandomReal(0,'d')<=50 then
call u6e(AL[CGe],wF)
call QKe("|cffff0000"+"[ Tranh Đoạt Lãnh Thổ ]: Lãnh thổ Hoài Thủy Sa Châu bị Quân Sĩ Lưu Vong tấn công !",5)
endif
endif
endif
if AL[CGe]>=2 then
if IL[CGe]==2 then
set io[5]=CreateUnit(zv,'n05N',GetRectCenterX(WF),GetRectCenterY(WF),270)
set io[6]=CreateUnit(zv,'n05N',GetRectCenterX(yF),GetRectCenterY(yF),270)
call uHe(io[5],0,0,0,0,AL[CGe]+2)
call uHe(io[6],0,0,0,0,AL[CGe]+2)
call UnitAddAbility(io[5],Ej[GetRandomInt(1,5)])
call UnitAddAbility(io[6],Ej[GetRandomInt(1,5)])
set ao[3]=true
call QKe("|cffffcc00"+"[ Tranh Đoạt Lãnh Thổ ]: Phong Lăng Độ bước vào thời kỳ chinh chiến !",5)
elseif IL[CGe]==$A then
if GetRandomReal(0,'d')<=50 then
call u6e(AL[CGe],WF)
call QKe("|cffff0000"+"[ Tranh Đoạt Lãnh Thổ ]: Lãnh thổ Phong Lăng Độ bị Quân Sĩ Lưu Vong tấn công !",5)
endif
elseif IL[CGe]==$B then
call u6e(AL[CGe],yF)
call QKe("|cffff0000"+"[ Tranh Đoạt Lãnh Thổ ]: Lãnh thổ Phong Lăng Độ bị Quân Sĩ Lưu Vong tấn công !",5)
endif
endif
if AL[CGe]>=3 then
if IL[CGe]==3 then
set io[7]=CreateUnit(zv,'n05N',GetRectCenterX(YF),GetRectCenterY(YF),270)
set io[8]=CreateUnit(zv,'n05N',GetRectCenterX(zF),GetRectCenterY(zF),270)
call uHe(io[7],0,0,0,0,AL[CGe]+3)
call uHe(io[8],0,0,0,0,AL[CGe]+3)
call UnitAddAbility(io[7],Ej[GetRandomInt(1,5)])
call UnitAddAbility(io[8],Ej[GetRandomInt(1,5)])
set ao[4]=true
call QKe("|cffffcc00"+"[ Tranh Đoạt Lãnh Thổ ]: Hoa Sơn bước vào thời kỳ chinh chiến !",5)
elseif IL[CGe]==$C then
if GetRandomReal(0,'d')<=50 then
call u6e(AL[CGe],YF)
call QKe("|cffff0000"+"[ Tranh Đoạt Lãnh Thổ ]: Lãnh thổ Hoa Sơn bị Quân Sĩ Lưu Vong tấn công !",5)
endif
elseif IL[CGe]==$D then
if GetRandomReal(0,'d')<=50 then
call u6e(AL[CGe],zF)
call QKe("|cffff0000"+"[ Tranh Đoạt Lãnh Thổ ]: Lãnh thổ Hoa Sơn bị Quân Sĩ Lưu Vong tấn công !",5)
endif
endif
endif
if AL[CGe]>=4 then
if IL[CGe]==4 then
set io[9]=CreateUnit(zv,'n05N',GetRectCenterX(ZF),GetRectCenterY(ZF),270)
set io[$A]=CreateUnit(zv,'n05N',GetRectCenterX(vg),GetRectCenterY(vg),270)
call uHe(io[9],0,0,0,0,AL[CGe]+4)
call uHe(io[$A],0,0,0,0,AL[CGe]+4)
call UnitAddAbility(io[9],Ej[GetRandomInt(1,5)])
call UnitAddAbility(io[$A],Ej[GetRandomInt(1,5)])
set ao[5]=true
call QKe("|cffffcc00"+"[ Tranh Đoạt Lãnh Thổ ]: Mông Cổ Vương Đỉnh bước vào thời kỳ chinh chiến !",5)
elseif IL[CGe]==$E then
call u6e(AL[CGe],ZF)
call QKe("|cffff0000"+"[ Tranh Đoạt Lãnh Thổ ]: Lãnh thổ Mông Cổ Vương Đỉnh bị Quân Sĩ Lưu Vong tấn công !",5)
elseif IL[CGe]==$F then
if GetRandomReal(0,'d')<=50 then
call u6e(AL[CGe],vg)
call QKe("|cffff0000"+"[ Tranh Đoạt Lãnh Thổ ]: Lãnh thổ Mông Cổ Vương Đỉnh bị Quân Sĩ Lưu Vong tấn công !",5)
endif
endif
endif
if AL[CGe]>=5 then
if IL[CGe]==5 then
set io[$B]=CreateUnit(zv,'n05N',GetRectCenterX(eg),GetRectCenterY(eg),270)
set io[$C]=CreateUnit(zv,'n05N',GetRectCenterX(xg),GetRectCenterY(xg),270)
call uHe(io[$B],0,0,0,0,AL[CGe]+6)
call uHe(io[$C],0,0,0,0,AL[CGe]+6)
call UnitAddAbility(io[$B],Ej[GetRandomInt(1,5)])
call UnitAddAbility(io[$C],Ej[GetRandomInt(1,5)])
set ao[6]=true
call QKe("|cffffcc00"+"[ Tranh Đoạt Lãnh Thổ ]: Trường Bạch Sơn bước vào thời kỳ chinh chiến !",5)
elseif IL[CGe]==16 then
if GetRandomReal(0,'d')<=50 then
call u6e(AL[CGe],eg)
call QKe("|cffff0000"+"[ Tranh Đoạt Lãnh Thổ ]: Lãnh thổ Trường Bạch Sơn bị Quân Sĩ Lưu Vong tấn công !",5)
endif
elseif IL[CGe]==17 then
if GetRandomReal(0,'d')<=50 then
call u6e(AL[CGe],xg)
call QKe("|cffff0000"+"[ Tranh Đoạt Lãnh Thổ ]: Lãnh thổ Trường Bạch Sơn bị Quân Sĩ Lưu Vong tấn công !",5)
endif
endif
endif
if AL[CGe]>=6 then
if IL[CGe]==6 then
set io[$D]=CreateUnit(zv,'n05N',GetRectCenterX(og),GetRectCenterY(og),270)
set io[$E]=CreateUnit(zv,'n05N',GetRectCenterX(rg),GetRectCenterY(rg),270)
call uHe(io[$D],0,0,0,0,AL[CGe]+8)
call uHe(io[$E],0,0,0,0,AL[CGe]+8)
call UnitAddAbility(io[$D],Ej[GetRandomInt(1,5)])
call UnitAddAbility(io[$E],Ej[GetRandomInt(1,5)])
set ao[7]=true
call QKe("|cffffcc00"+"[ Tranh Đoạt Lãnh Thổ ]: Đôn Hoàng Cổ Thành bước vào thời kỳ chinh chiến !",5)
elseif IL[CGe]==18 then
call u6e(AL[CGe],og)
call QKe("|cffff0000"+"[ Tranh Đoạt Lãnh Thổ ]: Lãnh thổ Đôn Hoàng Cổ Thành bị Tướng Quân Lưu Vong tấn công !",5)
set Qv=tTe(zv,'n05P',GetRectCenterX(og),GetRectCenterY(og),270,360)
call uHe(Qv,0,0,0,0,0)
elseif IL[CGe]==19 then
if GetRandomReal(0,'d')<=50 then
call u6e(AL[CGe],rg)
call QKe("|cffff0000"+"[ Tranh Đoạt Lãnh Thổ ]: Lãnh thổ Đôn Hoàng Cổ Thành bị Quân Sĩ Lưu Vong tấn công !",5)
endif
endif
endif
if AL[CGe]>=7 then
if IL[CGe]==7 then
set io[$F]=CreateUnit(zv,'n05N',GetRectCenterX(zg),GetRectCenterY(zg),270)
set io[16]=CreateUnit(zv,'n05N',GetRectCenterX(Zg),GetRectCenterY(Zg),270)
call uHe(io[$F],0,0,0,0,AL[CGe]+$A)
call uHe(io[16],0,0,0,0,AL[CGe]+$A)
call UnitAddAbility(io[$F],Ej[GetRandomInt(1,5)])
call UnitAddAbility(io[16],Ej[GetRandomInt(1,5)])
set ao[8]=true
call QKe("|cffffcc00"+"[ Tranh Đoạt Lãnh Thổ ]: Tần Lăng bước vào thời kỳ chinh chiến !",5)
elseif IL[CGe]==20 then
call u6e(AL[CGe],zg)
call QKe("|cffff0000"+"[ Tranh Đoạt Lãnh Thổ ]: Lãnh thổ Tần Lăng bị Tướng Quân Lưu Vong tấn công !",5)
set Qv=tTe(zv,'n05P',GetRectCenterX(zg),GetRectCenterY(zg),270,360)
call uHe(Qv,0,0,0,0,0)
elseif IL[CGe]==21 then
if GetRandomReal(0,'d')<=60 then
call u6e(AL[CGe],Zg)
call QKe("|cffff0000"+"[ Tranh Đoạt Lãnh Thổ ]: Lãnh thổ Tần Lăng bị Quân Sĩ Lưu Vong tấn công !",5)
endif
endif
endif
if IL[CGe]==$96 and Xo>=16 then
set xo=true
endif
set IL[CGe]=IL[CGe]+1
if IL[CGe]==$F0 then
call QDe()
call u7e()
call QKe("|cffff0000"+"[ Hoạt Động ]: Tranh Đoạt Lãnh Thổ đã kết thúc !",5)
call QKe("|cff7fff00"+"Tổng số lãnh thổ chiếm được: "+I2S(oo),5)
if oo>0 then
call u4e(oo)
endif
set no=false
set ao[1]=false
set ao[2]=false
set ao[3]=false
set ao[4]=false
set ao[5]=false
set ao[6]=false
set ao[7]=false
set ao[8]=false
set mv=1
loop
exitwhen mv>=16
call RemoveUnit(io[mv])
set io[mv]=null
set mv=mv+1
endloop
set Vo=720
call qGe(CGe)
endif
return false
endfunction
function u9e takes nothing returns boolean
local integer CGe=qge()
set IL[CGe]=0
set AL[CGe]=oo
set Xo=0
set io[1]=CreateUnit(zv,'n05N',GetRectCenterX(TF),GetRectCenterY(TF),270)
set io[2]=CreateUnit(zv,'n05N',GetRectCenterX(uF),GetRectCenterY(uF),270)
call uHe(io[1],0,0,0,0,AL[CGe]+1)
call uHe(io[2],0,0,0,0,AL[CGe]+1)
call UnitAddAbility(io[1],Ej[GetRandomInt(1,5)])
call UnitAddAbility(io[2],Ej[GetRandomInt(1,5)])
set ao[1]=true
set Eo=480
set Vo=480
call QKe("|cffffcc00"+"[ Tranh Đoạt Lãnh Thổ ]: Tây Tháp Lâm bước vào thời kỳ chinh chiến !",5)
set ro[1]=0
set ro[2]=0
set ro[3]=0
set ro[4]=0
set ro[5]=0
set ro[6]=0
set ro[7]=0
set ro[8]=0
set oo=0
set no=true
call QIe(CGe,2.,true,function u8e)
return false
endfunction
function Uve takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$4B0,true)
call TriggerAddCondition(t,Filter(function u9e))
set t=null
endfunction
function resetSC takes nothing returns nothing
set Ao=0
endfunction
function Uee takes nothing returns integer
set Ao=Ao+1
return Ao
endfunction
function DecodeInteger takes nothing returns integer
return Cde(Ao)
endfunction
function DecodeUnit takes nothing returns integer
return 0
endfunction
function DecodeItem takes nothing returns integer
return LoadInteger(ht,338,Cde(Ao))
endfunction
function DecodeAbility takes nothing returns integer
return LoadInteger(ht,340,Cde(Ao))
endfunction
function Uxe takes string s returns string
local integer i=StringLength(s)
local string c
local string r=""
loop
set i=i-1
set c=SubString(s,i,i+1)
if c!="-" then
set r=c+r
endif
exitwhen i<=0
endloop
return r
endfunction
function Uoe takes string n returns integer
local integer i=0
local string s1="ABCDEFGHIJKLMNOPQRSTUVWXYZ"
local string s2="abcdefghijklmnopqrstuvwxyz"
local string s3="0123456789"
loop
if SubString(s1,i,i+1)==n then
return i
endif
if SubString(s2,i,i+1)==n then
return i
endif
set i=i+1
exitwhen i>=26
endloop
set i=0
loop
if SubString(s3,i,i+1)==n then
return i
endif
set i=i+1
exitwhen i>=$A
endloop
return 0
endfunction
function Ure takes player p,string Uie returns integer
local integer i=0
local integer j=0
local string Uae=GetPlayerName(p)
if Io then
loop
set j=j+Uoe(SubString(Uae,i,i+1))
set i=i+1
exitwhen i>=StringLength(Uae)
endloop
endif
set i=0
loop
set j=j+Uoe(SubString(Uie,i,i+1))
set i=i+1
exitwhen i>=StringLength(Uie)
endloop
return j
endfunction
function Une takes player p returns string
local integer i
local integer j
local integer k
local integer l
local integer m
local integer UVe=StringLength(No)
local integer array a
local string Uie=""
local string c=""
local integer UEe=0
local integer UXe=$F4240
local string UOe="0123456789"
set i=0
loop
set i=i+1
exitwhen i>Ao
set Uie=Uie+I2S(Cde(i))+"-"
endloop
set Uie=Uie+I2S(Ure(p,Uie))
if Cde(1)==0 then
set Uie="-"+Uie
endif
set i=0
loop
set a[i]=0
set i=i+1
exitwhen i>='d'
endloop
set m=0
set i=0
loop
set j=0
loop
set a[j]=a[j]*$B
set j=j+1
exitwhen j>m
endloop
set l=0
set c=SubString(Uie,i,i+1)
loop
exitwhen SubString(UOe,l,l+1)==c
set l=l+1
exitwhen l>9
endloop
set a[0]=a[0]+l
set j=0
loop
set k=a[j]/ UXe
set a[j]=a[j]-k*UXe
set a[j+1]=a[j+1]+k
set j=j+1
exitwhen j>m
endloop
if k>0 then
set m=m+1
endif
set i=i+1
exitwhen i>=StringLength(Uie)
endloop
set Uie=""
loop
exitwhen m<0
set j=m
loop
exitwhen j<=0
set k=a[j]/ UVe
set a[j-1]=a[j-1]+(a[j]-k*UVe)*UXe
set a[j]=k
set j=j-1
endloop
set k=a[j]/ UVe
set i=a[j]-k*UVe
set Uie=Uie+SubString(No,i,i+1)
set a[j]=k
if a[m]==0 then
set m=m-1
endif
endloop
set i=StringLength(Uie)
set UEe=0
set c=""
loop
set i=i-1
set c=c+SubString(Uie,i,i+1)+bo
set UEe=UEe+1
if UEe==4 and i>0 then
set c=c+"-"
set UEe=0
endif
exitwhen i<=0
endloop
return c
endfunction
function URe takes player p,string s returns boolean
local integer i
local integer j
local integer k
local integer l
local integer UIe=0
local integer m
local integer array a
local string Uie=""
local integer UVe=StringLength(No)
local integer UEe=-1
local integer UXe=$F4240
local string UOe="0123456789-"
local string c
set i=0
loop
set a[i]=0
set i=i+1
exitwhen i>='d'
endloop
set m=0
set i=0
loop
set j=0
loop
set a[j]=a[j]*UVe
set j=j+1
exitwhen j>m
endloop
set UEe=UEe+1
if UEe==4 then
set UEe=0
set i=i+1
endif
set l=UVe
set c=SubString(s,i,i+1)
loop
set l=l-1
exitwhen l<1
exitwhen SubString(No,l,l+1)==c
endloop
set a[0]=a[0]+l
set j=0
loop
set k=a[j]/ UXe
set a[j]=a[j]-k*UXe
set a[j+1]=a[j+1]+k
set j=j+1
exitwhen j>m
endloop
if k>0 then
set m=m+1
endif
set i=i+1
exitwhen i>=StringLength(s)
endloop
loop
exitwhen m<0
set j=m
loop
exitwhen j<=0
set k=a[j]/ $B
set a[j-1]=a[j-1]+(a[j]-k*$B)*UXe
set a[j]=k
set j=j-1
endloop
set k=a[j]/ $B
set i=a[j]-k*$B
set Uie=SubString(UOe,i,i+1)+Uie
set a[j]=k
if a[m]==0 then
set m=m-1
endif
endloop
set i=0
set j=0
loop
loop
exitwhen i>=StringLength(Uie)
exitwhen i>0 and SubString(Uie,i,i+1)=="-" and SubString(Uie,i-1,i)!="-"
set i=i+1
endloop
if i<StringLength(Uie)then
set k=i
endif
set UIe=UIe+1
call CDe(UIe,S2I(SubString(Uie,j,i)))
set j=i+1
set i=i+1
exitwhen i>=StringLength(Uie)
endloop
set j=Ure(p,SubString(Uie,0,k))
set Ao=UIe-1
if j==Cde(UIe)then
return true
endif
return false
endfunction
function UAe takes player p returns string
local string UNe=Une(p)
if Ro==false then
set No=StringCase(No,true)
endif
return UNe
endfunction
function Ube takes string s returns string
local integer i=StringLength(s)
local string c
local string r=""
local integer j=4
local integer k=0
loop
exitwhen k>=i
set c=SubString(s,k,k+1)
set r=r+c
set j=j-1
if j<=0 then
if k<i-1 then
set j=4
set r=r+"-"
endif
endif
set k=k+1
endloop
return r
endfunction
function UBe takes player p,string s returns boolean
set s=Ube(s)
if Ro==false then
set No=StringCase(No,true)
set s=StringCase(s,true)
endif
if URe(p,s)then
call Qke(p,"|cffffcc00"+"Kích hoạt mã Load . . .",5)
return true
endif
call Qke(p,"|cffffcc00"+"Sai mã Load . . .",5)
return false
endfunction
function Uce takes nothing returns nothing
if Ro then
set No="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"
else
set No="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"
endif
if Oo then
set No="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()"
set Ro=true
endif
set Ao=0
endfunction
function UCe takes unit u,string s,string n returns effect
return AddSpecialEffectTarget(s,u,n)
endfunction
function px2dpi takes nothing returns real
return .6/ 1080.
endfunction
function Ude takes framehandle UDe,real Ufe,real x,real y returns nothing
call BlzFrameSetAbsPoint(UDe,FRAMEPOINT_TOPRIGHT,x+Ufe*(.6/ 1080.),y+Ufe*(.6/ 1080.))
call BlzFrameSetAbsPoint(UDe,FRAMEPOINT_BOTTOMLEFT,x,y)
endfunction
function UFe takes framehandle UDe,real X,real Y,real x,real y returns nothing
call BlzFrameSetAbsPoint(UDe,FRAMEPOINT_TOPRIGHT,x+X*(.6/ 1080.),y+Y*(.6/ 1080.))
call BlzFrameSetAbsPoint(UDe,FRAMEPOINT_BOTTOMLEFT,x,y)
endfunction
function Uge takes framehandle UDe,string UGe returns nothing
call BlzFrameSetTexture(LoadFrameHandle(ht,Bo,GetHandleId(UDe)),UGe,0,true)
endfunction
function Uhe takes string UHe returns framehandle
local framehandle ff
local framehandle Uje
set Uje=BlzCreateFrameByType("GLUEBUTTON","FaceButton",BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI,0),"ScoreScreenTabButtonTemplate",0)
set ff=BlzCreateFrameByType("BACKDROP","FaceButtonIcon",Uje,"",0)
call BlzFrameSetAllPoints(ff,Uje)
call BlzFrameSetTexture(ff,UHe,0,true)
call SaveFrameHandle(ht,Bo,GetHandleId(Uje),ff)
set ff=null
return Uje
endfunction
function UJe takes string UHe returns framehandle
local framehandle ff
local framehandle Uje
set Uje=BlzCreateFrameByType("GLUECHECKBOX","FaceButton",BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI,0),"ScoreScreenTabButtonTemplate",0)
set ff=BlzCreateFrameByType("BACKDROP","FaceButtonIcon",Uje,"",0)
call BlzFrameSetAllPoints(ff,Uje)
call BlzFrameSetTexture(ff,UHe,0,true)
call SaveFrameHandle(ht,Bo,GetHandleId(Uje),ff)
set ff=null
return Uje
endfunction
function Uke takes framehandle ff,code UKe returns trigger
local trigger t=CreateTrigger()
call BlzTriggerRegisterFrameEvent(t,ff,FRAMEEVENT_CONTROL_CLICK)
call TriggerAddCondition(t,Condition(UKe))
return t
endfunction
function Ule takes framehandle ff,code UKe returns trigger
local trigger t=CreateTrigger()
call BlzTriggerRegisterFrameEvent(t,ff,FRAMEEVENT_MOUSE_ENTER)
call TriggerAddCondition(t,Condition(UKe))
return t
endfunction
function ULe takes framehandle ff,code UKe returns trigger
local trigger t=CreateTrigger()
call BlzTriggerRegisterFrameEvent(t,ff,FRAMEEVENT_MOUSE_LEAVE)
call TriggerAddCondition(t,Condition(UKe))
return t
endfunction
function Ume takes nothing returns boolean
local integer CGe=Qce()
set cL[CGe]=cL[CGe]-1
if cL[CGe]<=0 then
call QDe()
set ti[CL[CGe]]=false
call qFe(CGe)
endif
return false
endfunction
function UMe takes integer id,real Upe returns nothing
local integer CGe=qfe()
set cL[CGe]=R2I(Upe/ .03125)
set CL[CGe]=id
set ti[CL[CGe]]=true
call QIe(CGe,.03125,true,function Ume)
endfunction
function sss_resetSC takes nothing returns nothing
set co=0
endfunction
function UPe takes nothing returns integer
set co=co+1
return co
endfunction
function sss_DecodeInteger takes nothing returns integer
return Cfe(co)
endfunction
function Uqe takes string n returns integer
local integer i=0
local string s1="ABCDEFGHIJKLMNOPQRSTUVWXYZ"
local string s2="abcdefghijklmnopqrstuvwxyz"
local string s3="0123456789"
loop
if SubString(s1,i,i+1)==n then
return i
endif
if SubString(s2,i,i+1)==n then
return i
endif
set i=i+1
exitwhen i>=26
endloop
set i=0
loop
if SubString(s3,i,i+1)==n then
return i
endif
set i=i+1
exitwhen i>=$A
endloop
return 0
endfunction
function UQe takes string Uie returns integer
local integer i=0
local integer j=0
local string Uae=GetPlayerName(GetTriggerPlayer())
set i=0
loop
set j=j+Uqe(SubString(Uie,i,i+1))
set i=i+1
exitwhen i>=StringLength(Uie)
endloop
return j
endfunction
function Use takes nothing returns string
local integer i
local integer j
local integer k
local integer l
local integer m
local string c=""
local integer UVe=StringLength(Co)
local integer array a
local string Uie=""
local integer UEe=0
local integer UXe=$F4240
local string UOe="0123456789"
set i=0
loop
set i=i+1
exitwhen i>co
set Uie=Uie+I2S(Cfe(i))+"-"
endloop
set Uie=Uie+I2S(UQe(Uie))
if Cfe(1)==0 then
set Uie="-"+Uie
endif
set i=0
loop
set a[i]=0
set i=i+1
exitwhen i>='d'
endloop
set m=0
set i=0
loop
set j=0
loop
set a[j]=a[j]*$B
set j=j+1
exitwhen j>m
endloop
set l=0
set c=SubString(Uie,i,i+1)
loop
exitwhen SubString(UOe,l,l+1)==c
set l=l+1
exitwhen l>9
endloop
set a[0]=a[0]+l
set j=0
loop
set k=a[j]/ UXe
set a[j]=a[j]-k*UXe
set a[j+1]=a[j+1]+k
set j=j+1
exitwhen j>m
endloop
if k>0 then
set m=m+1
endif
set i=i+1
exitwhen i>=StringLength(Uie)
endloop
set Uie=""
loop
exitwhen m<0
set j=m
loop
exitwhen j<=0
set k=a[j]/ UVe
set a[j-1]=a[j-1]+(a[j]-k*UVe)*UXe
set a[j]=k
set j=j-1
endloop
set k=a[j]/ UVe
set i=a[j]-k*UVe
set Uie=Uie+SubString(Co,i,i+1)
set a[j]=k
if a[m]==0 then
set m=m-1
endif
endloop
set i=StringLength(Uie)
set UEe=0
set c=""
loop
set i=i-1
set c=c+SubString(Uie,i,i+1)
set UEe=UEe+1
if UEe==4 and i>0 then
set c=c+"-"
set UEe=0
endif
exitwhen i<=0
endloop
return c
endfunction
function USe takes string s returns boolean
local integer i
local integer j
local integer k
local integer l
local integer UIe=0
local integer m
local integer array a
local string Uie=""
local integer UVe=StringLength(Co)
local integer UEe=-1
local integer UXe=$F4240
local string UOe="0123456789-"
local string c
set i=0
loop
set a[i]=0
set i=i+1
exitwhen i>='d'
endloop
set m=0
set i=0
loop
set j=0
loop
set a[j]=a[j]*UVe
set j=j+1
exitwhen j>m
endloop
set UEe=UEe+1
if UEe==4 then
set UEe=0
set i=i+1
endif
set l=UVe
set c=SubString(s,i,i+1)
loop
set l=l-1
exitwhen l<1
exitwhen SubString(Co,l,l+1)==c
endloop
set a[0]=a[0]+l
set j=0
loop
set k=a[j]/ UXe
set a[j]=a[j]-k*UXe
set a[j+1]=a[j+1]+k
set j=j+1
exitwhen j>m
endloop
if k>0 then
set m=m+1
endif
set i=i+1
exitwhen i>=StringLength(s)
endloop
loop
exitwhen m<0
set j=m
loop
exitwhen j<=0
set k=a[j]/ $B
set a[j-1]=a[j-1]+(a[j]-k*$B)*UXe
set a[j]=k
set j=j-1
endloop
set k=a[j]/ $B
set i=a[j]-k*$B
set Uie=SubString(UOe,i,i+1)+Uie
set a[j]=k
if a[m]==0 then
set m=m-1
endif
endloop
set i=0
set j=0
loop
loop
exitwhen i>=StringLength(Uie)
exitwhen i>0 and SubString(Uie,i,i+1)=="-" and SubString(Uie,i-1,i)!="-"
set i=i+1
endloop
if i<StringLength(Uie)then
set k=i
endif
set UIe=UIe+1
call CFe(UIe,S2I(SubString(Uie,j,i)))
set j=i+1
set i=i+1
exitwhen i>=StringLength(Uie)
endloop
set j=UQe(SubString(Uie,0,k))
set co=UIe-1
if j==Cfe(UIe)then
return true
endif
return false
endfunction
function Ute takes integer i returns boolean
if Yi[i]==SubString(yH[N9e[(2)*(6)+i]],$F,StringLength(yH[N9e[(2)*(6)+i]]))then
set cle[(i)*($A)+3]=800
return true
endif
return false
endfunction
function UTe takes integer i returns boolean
set mv=0
if Yi[i]==SubString(yH[N9e[(2)*(6)+i]],$F,StringLength(yH[N9e[(2)*(6)+i]]))then
set mv=1
return false
endif
return true
endfunction
function Uue takes integer i returns nothing
set cle[(i+1)*($A)+2]=R2I(($3E8/(5*I2R(cle[(i+1)*($A)+3])))*'d')
endfunction
function sss_getEncode takes nothing returns string
local string UNe=Use()
call PreloadGenStart()
call PreloadGenClear()
call PreloadGenEnd(UNe)
return UNe
endfunction
function UUe takes string s returns boolean
return(USe(s))
endfunction
function Uwe takes nothing returns nothing
set Co="A1B2C3D45E6F7G809"
endfunction
function UWe takes nothing returns nothing
local integer i=0
loop
exitwhen i==do
set i=i+1
set DL[(i)]=(i-1)
set dL[(i)]=(i+1)
set fL[(i)]=(i-.5)*(360./ do)
endloop
set DL[(1)]=(i)
set dL[(i)]=(1)
endfunction
function Uye takes integer CGe,integer q returns nothing
call SetUnitFacing(kL[CGe],fL[q])
if FL[q]==0 then
set gL[q]=CGe
else
set KL[GL[q]]=CGe
endif
set GL[q]=CGe
set KL[CGe]=0
if FL[q]>FL[dL[q]]then
set CGe=gL[q]
set gL[q]=KL[CGe]
call Uye(CGe,dL[q])
elseif FL[q]>FL[DL[q]]then
set CGe=gL[q]
set gL[q]=KL[CGe]
call Uye(CGe,DL[q])
else
set FL[q]=FL[q]+1
endif
endfunction
function UYe takes integer q returns integer
local integer CGe
if FL[q]<FL[dL[q]]then
set CGe=GL[q]
set GL[q]=UYe(dL[q])
set KL[CGe]=GL[q]
call SetUnitFacing(kL[GL[q]],fL[q])
elseif FL[q]<FL[DL[q]]then
set CGe=GL[q]
set GL[q]=UYe(DL[q])
set KL[CGe]=GL[q]
call SetUnitFacing(kL[GL[q]],fL[q])
else
set FL[q]=FL[q]-1
if FL[q]==0 then
set GL[q]=0
endif
endif
set CGe=gL[q]
set gL[q]=KL[CGe]
set KL[CGe]=0
return CGe
endfunction
function Uze takes unit u returns integer
local integer CGe
if GetUnitTypeId(u)!='e001' then
elseif IsUnitInGroup(u,JL)then
else
set CGe=qde()
if(CGe)>Do then
call RemoveUnit(u)
call qDe(CGe)
return 0
endif
set kL[CGe]=u
call GroupAddUnit(JL,u)
call Uye(CGe,(R2I(((GetUnitFacing(u))*1.)/ 360.*do)+1))
call SetUnitAnimationByIndex(u,90)
call SetUnitScale(u,1,0,0)
call SetUnitVertexColor(u,$FF,$FF,$FF,$FF)
return CGe
endif
return 0
endfunction
function UZe takes integer CGe returns nothing
call GroupRemoveUnit(JL,kL[CGe])
call ShowUnit(kL[CGe],true)
set kL[CGe]=null
call qDe(CGe)
endfunction
function U_e takes nothing returns nothing
local integer i=36
local integer q=(1)
if i>Do then
set i=Do
endif
loop
exitwhen i==0
set lL=CreateUnit(Zv,'e001',.0,.0,fL[q])
call UnitAddAbility(lL,'A029')
call UnitAddAbility(lL,'A026')
call UnitAddAbility(lL,'A02A')
call UnitAddAbility(lL,'A027')
call UnitAddAbility(lL,'A028')
call UnitRemoveAbility(lL,'A029')
call UnitRemoveAbility(lL,'A026')
call UnitRemoveAbility(lL,'A02A')
call UnitRemoveAbility(lL,'A027')
call UnitRemoveAbility(lL,'A028')
call UnitAddAbility(lL,'Amrf')
call UnitAddAbility(lL,'Aloc')
call UnitRemoveAbility(lL,'Amrf')
call Uze(lL)
set i=i-1
set q=dL[q]
endloop
endfunction
function U0e takes player p,real x,real y,real tPe returns unit
local integer q
local integer CGe
loop
exitwhen tPe>.0
set tPe=tPe+360.
endloop
loop
exitwhen tPe<360.
set tPe=tPe-360.
endloop
set q=(R2I(((tPe)*1.)/ 360.*do)+1)
if FL[q]==0 then
set lL=CreateUnit(p,'e001',x,y,tPe)
call UnitAddAbility(lL,'Amrf')
call UnitAddAbility(lL,'Aloc')
call UnitRemoveAbility(lL,'Amrf')
call SetUnitX(lL,x)
call SetUnitY(lL,y)
else
set CGe=UYe(q)
set lL=kL[CGe]
call UZe(CGe)
call SetUnitX(lL,x)
call SetUnitY(lL,y)
call SetUnitFacing(lL,tPe)
call SetUnitOwner(lL,p,true)
endif
return lL
endfunction
function U1e takes nothing returns boolean
local integer CGe=Qce()
set PL[CGe]=PL[CGe]-1
if PL[CGe]<=0 then
call QDe()
call UnitRemoveAbility(pL[CGe],qL[CGe])
call Uze((pL[CGe]))
set pL[CGe]=null
call qCe(CGe)
endif
return false
endfunction
function U2e takes player p,real x,real y,real Upe,integer uDe,integer U3e returns unit
local integer CGe=qce()
set pL[CGe]=U0e(p,x,y,270)
set qL[CGe]=uDe
call UnitAddAbility(pL[CGe],uDe)
call SetUnitAbilityLevel(pL[CGe],uDe,U3e)
set PL[CGe]=R2I(Upe/ .03125)
call QIe(CGe,.03125,true,function U1e)
set p=null
return pL[CGe]
endfunction
function U4e takes integer lv returns integer
if lv==1 then
return 1
elseif lv==2 then
return 2
elseif lv==3 then
return 4
elseif lv==4 then
return 7
elseif lv==5 then
return $B
else
return 16
endif
endfunction
function U5e takes integer tJe,integer lv returns string
if tJe==1 then
return"- Công kích ngoại công + "+I2S(lv*65)
elseif tJe==2 then
return"- Công kích nội công + "+I2S(lv*65)
elseif tJe==3 then
return"- Phát huy lực tấn công kỹ năng "+I2S(lv*$A)+"%"
elseif tJe==4 then
return"- Phát huy lực tấn công cơ bản "+I2S(lv*$A)+"%"
elseif tJe==5 then
return"- Sinh lực tối đa + "+I2S(lv*$7D0)
elseif tJe==6 then
return"- Nội lực tối đa + "+I2S(lv*800)
elseif tJe==7 then
return"- Kháng chí mạng + "+I2S(lv*50)
elseif tJe==8 then
return"- Sát thương nhận vào, thu nhỏ "+I2S(lv*5)+"%"
elseif tJe==9 then
return"- Kháng thời gian trạng thái ngũ hành + "+I2S(lv*5)+"%"
elseif tJe==$A then
return"- Sát thương ngũ hành + "+I2S(lv*40)+"%"
else
return"- Sát thương chí mạng + "+I2S(lv*5)+"%"
endif
endfunction
function U6e takes integer lv returns string
if lv==1 then
return "|cff0078d7"
elseif lv==2 then
return "|cff9370db"
elseif lv>=3 and lv<=4 then
return "|cffffa500"
else
return "|cffffff00"
endif
endfunction
function U7e takes integer lv returns string
if lv==1 then
return"***"
elseif lv==2 then
return"****"
elseif lv==3 then
return"*****"
elseif lv==4 then
return"*******"
elseif lv==9 then
return"*********"
else
return"**********"
endif
endfunction
function U8e takes integer tJe returns string
if tJe==1 then
return"Thanh Long"
elseif tJe==2 then
return"Bạch Hổ"
elseif tJe==3 then
return"Chu Tước"
elseif tJe==4 then
return"Huyền Vũ"
elseif tJe==5 then
return"Quỳ Ngưu"
elseif tJe==6 then
return"Tì Hưu"
elseif tJe==7 then
return"Côn Bằng"
elseif tJe==8 then
return"Kỳ Lân"
elseif tJe==9 then
return"Kim Kê"
elseif tJe==$A then
return"Long Quy"
else
return"Thiềm Thừ"
endif
endfunction
function U9e takes integer lv,integer tJe,real x,real y returns item
local item t=CreateItem('I06G',x,y)
local integer id=GetHandleId(t)
local string s="Loại: bí bảo"
call SaveInteger(IT,id,4815,lv)
call SaveInteger(IT,id,7708,tJe)
set s=s+"
Cấp độ: "+"|cffffcc00"+I2S(lv)+"/6|r"
set s=s+"
Tài phú: "+"|cffffcc00"+I2S(U4e(lv)*$3E8)+"|r"
set s=s+"

|cff0078d7Thuộc tính trang bị|r
"
set s=s+"|cff7fff00"+U5e(tJe,lv)+"|r"
set s=s+"

Yêu cầu nhân vật trùng sinh "+I2S(lv)
call BlzSetItemExtendedTooltip(t,s)
call BlzSetItemDescription(t,s)
call BlzSetItemName(t,U6e(lv)+"Bí Bảo "+U8e(tJe)+"
"+U7e(lv)+"|r")
call BlzSetItemIconPath(t,"war3mapImported\\BTNBibao_"+I2S(tJe)+"_"+I2S(lv)+".blp")
call SetItemInvulnerable(t,true)
set s=null
set Sv=t
set t=null
return Sv
endfunction
function wve takes unit u,integer z,integer lv,real r returns nothing
if z==1 then
call T5e(u,65*lv*r)
elseif z==2 then
call T6e(u,65*lv*r)
elseif z==3 then
call Tje(u,vx,.1*lv*r)
elseif z==4 then
call Tje(u,5319,.1*lv*r)
elseif z==5 then
call TZe(u,$7D0*lv*r)
elseif z==6 then
call T3e(u,800*lv*r)
elseif z==7 then
call Tje(u,7614,50*lv*r)
elseif z==8 then
call Tje(u,ox,.05*lv*r)
elseif z==9 then
call Twe(u,.05*lv*r)
elseif z==$A then
call TWe(u,.4*lv*r)
elseif z==$B then
call Tje(u,ax,.05*lv*r)
endif
endfunction
function wee takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local item t=GetManipulatedItem()
local integer c=1
local integer wxe=0
local integer id=GetHandleId(t)
local integer woe=LoadInteger(IT,id,4815)
local integer tJe=LoadInteger(IT,id,7708)
local integer wre=U4e(woe)*$3E8
local boolean b=false
if bJ[i]<woe then
call Qke(p,"|cffffcc00"+"Cấp độ trùng sinh không đủ để mang Bí Bảo !",5)
set u=null
set p=null
set t=null
return false
endif
loop
exitwhen c>6
if bve[(i)*(6)+c]==null then
set wxe=c
set c=6
endif
set c=c+1
endloop
if wxe==0 then
call Qke(p,"|cffffcc00"+"Không còn chỗ trống trang bị Bí Bảo !",5)
set u=null
set p=null
set t=null
return false
endif
set c=1
loop
exitwhen c>6
if bve[(i)*(6)+c]!=null and c!=wxe then
if tJe==LoadInteger(IT,GetHandleId(bve[(i)*(6)+c]),7708)then
set b=true
set c=6
endif
endif
set c=c+1
endloop
if b then
call Qke(p,"|cffffcc00"+"Không thể mang 2 Bí Bảo cùng loại !",5)
set u=null
set p=null
set t=null
return false
endif
set bve[(i)*(6)+wxe]=t
call SetItemPosition(t,GetRectCenterX(bd),GetRectCenterY(bd))
set bMe[(i-1)*(6)+wxe]=wxe
set bpe[(i-1)*(6)+wxe]=GetItemName(t)
set bPe[(i-1)*(6)+wxe]="
"+BlzGetItemExtendedTooltip(t)
set bqe[(i-1)*(6)+wxe]=BlzGetItemIconPath(t)
if GetLocalPlayer()==p then
call Uge(bme[wxe],bqe[(i-1)*(6)+wxe])
endif
set bUe[(i)*(20)+4]=bUe[(i)*(20)+4]+woe
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+wre*2
call tCe(i,wre,1)
call wve(XJ[i],tJe,woe,1)
set u=null
set p=null
set t=null
return false
endfunction
function wie takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())!='H00K' and GetItemTypeId(GetManipulatedItem())=='I06G' and wee()
endfunction
function wae takes unit u,player p,integer i,item t,integer wxe returns nothing
local integer id=GetHandleId(t)
local integer woe=LoadInteger(IT,id,4815)
local integer tJe=LoadInteger(IT,id,7708)
local integer wre=U4e(woe)*$3E8
if not QYe(u)then
call SetItemPosition(t,GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,t)
else
call SetItemPosition(t,GetUnitX(OJ[i]),GetUnitY(OJ[i]))
call UnitAddItem(OJ[i],t)
call Qke(p,"|cffffcc00"+"Hành trang đầy, vật phẩm được chuyển về rương !",3)
endif
set bve[(i)*(6)+wxe]=null
set bUe[(i)*(20)+4]=bUe[(i)*(20)+4]-woe
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]-wre*2
call tCe(i,wre,De)
call wve(XJ[i],tJe,woe,De)
endfunction
function wne takes integer i,integer wxe,integer s returns nothing
local integer woe=S2I(SubString(I2S(s),0,1))
local integer tJe=S2I(SubString(I2S(s),1,3))
local integer wre=U4e(woe)*$3E8
set bve[(i)*(6)+wxe]=U9e(woe,tJe,GetRectCenterX(bd),GetRectCenterY(bd))
set bMe[(i-1)*(6)+wxe]=wxe
set bpe[(i-1)*(6)+wxe]=GetItemName(bve[(i)*(6)+wxe])
set bPe[(i-1)*(6)+wxe]="
"+BlzGetItemExtendedTooltip(bve[(i)*(6)+wxe])
set bqe[(i-1)*(6)+wxe]=BlzGetItemIconPath(bve[(i)*(6)+wxe])
set bUe[(i)*(20)+4]=bUe[(i)*(20)+4]+woe
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+wre*2
call tCe(i,wre,1)
call wve(XJ[i],tJe,woe,1)
endfunction
function wVe takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddCondition(t,Filter(function wie))
set t=null
endfunction
function wEe takes integer z returns integer
if z>62 then
return 8
elseif z>53 then
return 7
elseif z>44 then
return 6
elseif z>35 then
return 5
elseif z>26 then
return 4
elseif z>17 then
return 3
elseif z>8 then
return 2
else
return 1
endif
endfunction
function wXe takes integer i returns integer
local integer c=0
local integer rd=0
loop
exitwhen c>'d'
set rd=GetRandomInt(1,8)
if bee[(i)*(8)+rd]<9 then
set c='d'
else
set rd=0
endif
set c=c+1
endloop
return rd
endfunction
function wOe takes unit u,integer z,integer r returns nothing
if z==1 then
call TZe(u,$3E8*r)
elseif z==2 then
call Tje(u,4888,25*r)
elseif z==3 then
call Tje(u,Vx,.04*r)
elseif z==4 then
call Tje(u,ox,.04*r)
elseif z==5 then
call TLe(u,40*r)
elseif z==6 then
call Tje(u,5319,.04*r)
elseif z==7 then
call Tje(u,vx,.04*r)
else
call Tje(u,xx,.04*r)
endif
endfunction
function wRe takes integer z returns string
if z>0 and z<=$C then
return "|cff7fff00"
elseif z>=$D and z<=18 then
return "|cff0078d7"
elseif z>=19 and z<=24 then
return "|cff9370db"
elseif z>=25 and z<=48 then
return "|cffffa500"
else
return "|cffffff00"
endif
endfunction
function wIe takes integer z returns string
if z>=67 then
return"************"
elseif z>=61 then
return"***********"
elseif z>=55 then
return"**********"
elseif z>=49 then
return"*********"
elseif z>=43 then
return"********"
elseif z>=37 then
return"*******"
elseif z>=31 then
return"******"
elseif z>=25 then
return"*****"
elseif z>=19 then
return"****"
elseif z>=$D then
return"***"
elseif z>=7 then
return"**"
else
return"*"
endif
endfunction
function wAe takes integer z returns integer
if z>0 and z<=$C then
return 2
elseif z>=$D and z<=18 then
return 3
elseif z>=19 and z<=24 then
return 4
elseif z>=25 and z<=36 then
return 5
elseif z>=37 and z<=48 then
return 6
elseif z>=49 and z<=54 then
return 7
else
return 8
endif
endfunction
function wNe takes integer i returns nothing
local integer lv=bee[(i)*(8)+1]+bee[(i)*(8)+2]+bee[(i)*(8)+3]+bee[(i)*(8)+4]+bee[(i)*(8)+5]+bee[(i)*(8)+6]+bee[(i)*(8)+7]+bee[(i)*(8)+8]
local string s="Loại: chân linh
"
local string Sle=wRe(lv)
set s=s+"Cấp độ: "+I2S(lv)+"/72
"
set s=s+"Tài phú: "+"|cff7fff00"+I2S(800*lv)+"|r

"
set s=s+"|cffadd8e6Thuộc tính chân linh|r
"
set s=s+Sle+"["+I2S(bee[(i)*(8)+1])+"/9] "+zj[1]+"|r
- Sinh lực tối đa + "+I2S($3E8*bee[(i)*(8)+1])+"
"
set s=s+Sle+"["+I2S(bee[(i)*(8)+2])+"/9] "+zj[2]+"|r
- Chí mạng + "+I2S(25*bee[(i)*(8)+2])+"
"
set s=s+Sle+"["+I2S(bee[(i)*(8)+3])+"/9] "+zj[3]+"|r
- Chịu sát thương chí mạng - "+I2S(4*bee[(i)*(8)+3])+"%
"
set s=s+Sle+"["+I2S(bee[(i)*(8)+4])+"/9] "+zj[4]+"|r
- Sát thương hứng chịu, thu nhỏ "+I2S(4*bee[(i)*(8)+4])+"%
"
set s=s+Sle+"["+I2S(bee[(i)*(8)+5])+"/9] "+zj[5]+"|r
- Công kích nội ngoại công + "+I2S(40*bee[(i)*(8)+5])+"
"
set s=s+Sle+"["+I2S(bee[(i)*(8)+6])+"/9] "+zj[6]+"|r
- Phát huy lực tấn công cơ bản "+I2S(4*bee[(i)*(8)+6])+"%
"
set s=s+Sle+"["+I2S(bee[(i)*(8)+7])+"/9] "+zj[7]+"|r
- Phát huy lực tấn công kỹ năng "+I2S(4*bee[(i)*(8)+7])+"%
"
set s=s+Sle+"["+I2S(bee[(i)*(8)+8])+"/9] "+zj[8]+"|r
- Sát thương gây ra, khuếch đại "+I2S(4*bee[(i)*(8)+8])+"%"
set eC=Sle+"[ Chân Linh ]
"+wIe(lv)
set oC="war3mapImported\\BTNchanlinh_"+I2S(wAe(lv))+".blp"
set xC=s
set fo[i]=oC
set s=null
set Sle=null
endfunction
function wbe takes integer lv,integer id returns boolean
if lv>=0 and lv<=8 then
if id==Zj[1]then
return true
else
return false
endif
endif
if lv>=9 and lv<=17 then
if id==Zj[2]then
return true
else
return false
endif
endif
if lv>=18 and lv<=26 then
if id==Zj[3]then
return true
else
return false
endif
endif
if lv>=27 and lv<=35 then
if id==Zj[4]then
return true
else
return false
endif
endif
if lv>=36 and lv<=44 then
if id==Zj[5]then
return true
else
return false
endif
endif
if lv>=45 and lv<=53 then
if id==Zj[6]then
return true
else
return false
endif
endif
if lv>=54 and lv<=62 then
if id==Zj[7]then
return true
else
return false
endif
endif
if lv>=63 and lv<=71 then
if id==Zj[8]then
return true
else
return false
endif
endif
return false
endfunction
function wBe takes unit u,integer i,item t returns boolean
local player p=GetOwningPlayer(u)
local integer z=GetItemTypeId(t)
local integer lv=bee[(i)*(8)+1]+bee[(i)*(8)+2]+bee[(i)*(8)+3]+bee[(i)*(8)+4]+bee[(i)*(8)+5]+bee[(i)*(8)+6]+bee[(i)*(8)+7]+bee[(i)*(8)+8]
local integer ts=wEe(lv)
local integer TMe=0
if not tFe(i,5000*(lv+1),0)then
call Qke(p,"|cffffcc00"+"Yêu cầu chân khí: "+I2S(5000*(lv+1)),5)
set p=null
return false
endif
if not wbe(lv,z)then
call Qke(p,"|cffffcc00"+"Sách Kỹ Năng Chân Linh bạn đang sử dụng không đúng cấp độ !",5)
set p=null
return false
endif
if bJ[i]<ts then
call Qke(p,"|cffffcc00"+"Cấp độ trùng sinh không đủ !",5)
set p=null
return false
endif
if lv>=72 then
call Qke(p,"|cffffcc00"+"Chân linh đã đạt cấp độ tối đa, không thể tiếp tục nâng cấp !",5)
set p=null
return false
endif
call tFe(i,$FA0*(lv+1),De)
call RemoveItem(t)
set TMe=wXe(i)
if TMe==0 then
call Qke(p,"|cffffcc00"+"Nâng cấp Chân Linh thất bại, thật đáng tiếc !",5)
set p=null
return false
endif
set bee[(i)*(8)+TMe]=bee[(i)*(8)+TMe]+1
call wOe(XJ[i],TMe,1)
call Qke(p,"|cffffcc00"+"Nâng cấp Chân Linh thành công, thuộc tính "+zj[TMe]+" đã đạt cấp "+I2S(bee[(i)*(8)+TMe])+" !",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),(u),"origin"))
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+$640
call tCe(i,800,1)
call wNe(i)
set B4e[(i-1)*(23)+16]=16
set B5e[(i-1)*(23)+16]=eC
set B6e[(i-1)*(23)+16]="
"+xC
if GetLocalPlayer()==p then
call Uge(B3e[16],oC)
set zc=eC
set Zc="
"+xC
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextTitle",0),zc)
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
set p=null
return false
endfunction
function wce takes integer i returns nothing
local integer lv=0
set bee[(i)*(8)+1]=S2I(SubString(I2S(che[($D4)*(6)+i]),1,2))
set bee[(i)*(8)+2]=S2I(SubString(I2S(che[($D4)*(6)+i]),2,3))
set bee[(i)*(8)+3]=S2I(SubString(I2S(che[($D4)*(6)+i]),3,4))
set bee[(i)*(8)+4]=S2I(SubString(I2S(che[($D4)*(6)+i]),4,5))
set bee[(i)*(8)+5]=S2I(SubString(I2S(che[($D5)*(6)+i]),1,2))
set bee[(i)*(8)+6]=S2I(SubString(I2S(che[($D5)*(6)+i]),2,3))
set bee[(i)*(8)+7]=S2I(SubString(I2S(che[($D5)*(6)+i]),3,4))
set bee[(i)*(8)+8]=S2I(SubString(I2S(che[($D5)*(6)+i]),4,5))
set lv=bee[(i)*(8)+1]+bee[(i)*(8)+2]+bee[(i)*(8)+3]+bee[(i)*(8)+4]+bee[(i)*(8)+5]+bee[(i)*(8)+6]+bee[(i)*(8)+7]+bee[(i)*(8)+8]
if lv>0 and lv<=72 then
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+$640*lv
call tCe(i,800*lv,1)
call wNe(i)
if bee[(i)*(8)+1]>0 then
call wOe(XJ[i],1,bee[(i)*(8)+1])
endif
if bee[(i)*(8)+2]>0 then
call wOe(XJ[i],2,bee[(i)*(8)+2])
endif
if bee[(i)*(8)+3]>0 then
call wOe(XJ[i],3,bee[(i)*(8)+3])
endif
if bee[(i)*(8)+4]>0 then
call wOe(XJ[i],4,bee[(i)*(8)+4])
endif
if bee[(i)*(8)+5]>0 then
call wOe(XJ[i],5,bee[(i)*(8)+5])
endif
if bee[(i)*(8)+6]>0 then
call wOe(XJ[i],6,bee[(i)*(8)+6])
endif
if bee[(i)*(8)+7]>0 then
call wOe(XJ[i],7,bee[(i)*(8)+7])
endif
if bee[(i)*(8)+8]>0 then
call wOe(XJ[i],8,bee[(i)*(8)+8])
endif
set B4e[(i-1)*(23)+16]=16
set B5e[(i-1)*(23)+16]=eC
set B6e[(i-1)*(23)+16]="
"+xC
endif
endfunction
function wCe takes unit u returns nothing
call BlzSetUnitBaseDamage(u,BlzGetUnitBaseDamage(u,0)*5,0)
call BlzSetUnitArmor(u,BlzGetUnitArmor(u)*2)
call BlzSetUnitMaxHP(u,BlzGetUnitMaxHP(u)*5)
call SetUnitLifePercentBJ(u,100.)
call BlzSetUnitName(u,"|cff0078d7"+"[ Tinh Anh ] "+GetUnitName(u))
call UnitAddAbility(u,'A0H4')
endfunction
function wde takes unit u returns nothing
call BlzSetUnitBaseDamage(u,BlzGetUnitBaseDamage(u,0)*$A,0)
call BlzSetUnitArmor(u,BlzGetUnitArmor(u)*3)
call BlzSetUnitMaxHP(u,BlzGetUnitMaxHP(u)*$A)
call SetUnitLifePercentBJ(u,100.)
call BlzSetUnitName(u,"|cff9370db"+"[ Thủ Lĩnh ] "+GetUnitName(u))
call UnitAddAbility(u,'A0H5')
endfunction
function wDe takes nothing returns boolean
local integer CGe=Qce()
local integer i=0
set TL[CGe]=TL[CGe]-1
if TL[CGe]<=0 then
call QDe()
set Qv=CreateUnit(zv,tL[CGe],uL[CGe],UL[CGe],270)
set i=GetHandleId(Qv)
if not(IsUnitType((Qv),UNIT_TYPE_TAUREN))then
if see(.6+WL[CGe])then
call wCe(Qv)
elseif see(.2+WL[CGe])then
call wde(Qv)
endif
else
call uHe(Qv,0,0,0,0,0)
endif
if wL[CGe]!=0 then
call UnitAddAbility(Qv,Ej[wL[CGe]])
endif
call SaveReal(ht,i,Ek,uL[CGe])
call SaveReal(ht,i,Xk,UL[CGe])
call qBe(CGe)
endif
return false
endfunction
function wfe takes integer id,real sQe,real x,real y,integer nh,real T0e returns nothing
local integer CGe=qbe()
set tL[CGe]=id
set TL[CGe]=R2I((sQe)/ .03125)
set uL[CGe]=x
set UL[CGe]=y
set wL[CGe]=nh
set WL[CGe]=T0e
call QIe(CGe,.03125,true,function wDe)
endfunction
function wFe takes unit u,integer i,real x,real y,real T0e returns boolean
local integer id=GetUnitTypeId(u)
local real r=6
local integer nh=0
if IsUnitType(u,UNIT_TYPE_TAUREN)then
set r=r+90
endif
if id=='n09B' then
set nh=LoadInteger(UH,i,7237)
endif
if x!=0 and y!=0 then
call wfe(id,r,x,y,nh,T0e)
endif
call FlushChildHashtable(ht,i)
call FlushChildHashtable(UH,i)
return false
endfunction
function wge takes integer dv,integer b returns nothing
local integer c=1
set dv=R2I(dv*oj)
loop
exitwhen c>6
if XJ[c]!=null then
set Uv=Player(c-1)
call tfe(c,'d'+b*3,1)
call tDe(c,R2I(b*3*oj),1)
call tke(c,5,dv,1)
call tHe(c,b*K1,1)
call tye(c,$A)
call UnitAddItemById(OJ[c],'I0G9')
call Toe(Uv,b*K1,R2I(b*3*oj),0,'d'+b*3,dv,5)
call UnitAddItemById(OJ[c],'I06A')
if dv>=500 then
if GetRandomReal(0,'d')<=40 then
call UnitAddItemById(OJ[c],'I0HO')
endif
endif
endif
set c=c+1
endloop
endfunction
function wGe takes nothing returns boolean
local integer CGe=Qce()
local real r=0
if ZL[CGe]<=16 then
call IssuePointOrderById(vm[CGe],$D0012,GetRectCenterX(pF),GetRectCenterY(pF))
elseif ZL[CGe]>16 and ZL[CGe]<34 then
call IssuePointOrderById(vm[CGe],$D0012,GetRectCenterX(qF),GetRectCenterY(qF))
elseif ZL[CGe]==34 then
call SetUnitX(vm[CGe],GetRectCenterX(PF))
call SetUnitY(vm[CGe],GetRectCenterY(PF))
elseif ZL[CGe]>34 and ZL[CGe]<58 then
call IssuePointOrderById(vm[CGe],$D0012,GetRectCenterX(KF),GetRectCenterY(KF))
elseif ZL[CGe]==58 then
call SetUnitX(vm[CGe],GetRectCenterX(SF))
call SetUnitY(vm[CGe],GetRectCenterY(SF))
elseif ZL[CGe]>58 and ZL[CGe]<80 then
call IssuePointOrderById(vm[CGe],$D0012,GetRectCenterX(tF),GetRectCenterY(tF))
elseif ZL[CGe]==80 then
call SetUnitX(vm[CGe],GetRectCenterX(sF))
call SetUnitY(vm[CGe],GetRectCenterY(sF))
else
call IssuePointOrderById(vm[CGe],$D0012,GetRectCenterX(QF),GetRectCenterY(QF))
endif
set ZL[CGe]=ZL[CGe]+1
if ZL[CGe]>='i' or spe(vm[CGe])then
call QDe()
if spe(vm[CGe])then
call wge($7D0,$96)
call QKe("|cffffcc00"+"Tiêu Xa Quân Kim đã phị phá hủy, toàn bộ người chơi nhận được phần thưởng !",3)
else
if GetUnitLifePercent(vm[CGe])<=90 then
call wge($A*R2I('d'-GetUnitLifePercent(vm[CGe])),R2I('d'-GetUnitLifePercent(vm[CGe])))
endif
call QKe("|cffffcc00"+"Tiêu Xa Quân Kim đã biến mất !",3)
call RemoveUnit(vm[CGe])
endif
set vm[CGe]=null
call qNe(CGe)
endif
return false
endfunction
function whe takes nothing returns boolean
local integer CGe=qAe()
set ZL[CGe]=0
call QKe("|cffffff00Tiêu Xa Quân Kim|r bắt đầu vận chuyển !",3)
set vm[CGe]=CreateUnit(zv,'n05M',GetRectCenterX(MF),GetRectCenterY(MF),270)
call UnitAddAbility(vm[CGe],Ej[GetRandomInt(1,5)])
call uHe(vm[CGe],0,0,0,0,0)
call QIe(CGe,5.,true,function wGe)
return false
endfunction
function wHe takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$A8C,true)
call TriggerAddCondition(t,Filter(function whe))
set t=null
endfunction
function wje takes nothing returns nothing
local integer c=1
loop
exitwhen c>6
if XJ[c]!=null then
if s1e(XJ[c],Jg)then
set Uv=Player(c-1)
call tfe(c,500,1)
call UnitAddItemById(OJ[c],'I0G9')
call UnitAddItemById(OJ[c],'I0G9')
call UnitAddItemById(OJ[c],'I0G9')
call Toe(Uv,0,0,0,500,0,0)
endif
endif
set c=c+1
endloop
endfunction
function wJe takes unit u,integer i,unit v,integer id,real x,real y returns nothing
if id=='n05U' then
call tfe(i,$A,1)
call CreateItem(bj[3],x,y)
set Go=Go-1
if Go<=0 then
set Qv=CreateUnit(zv,'n05T',GetRectCenterX(mg),GetRectCenterY(mg),270)
call uHe(Qv,0,0,0,0,0)
call QKe("|cffff0000"+"[ Động Thần Bí ]: Đoạt Bảo Tặc Thủ Lĩnh xuất hiện !",5)
endif
elseif id=='n05T' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call RemoveUnit(ho)
set ho=null
call wje()
call tWe(bj[4],x,y,GetRandomInt(3,6))
call tWe(bj[5],x,y,GetRandomInt(2,5))
call tWe(bj[6],x,y,GetRandomInt(1,2))
endif
endfunction
function wke takes integer id,rect r,integer wKe returns nothing
local integer i=1
loop
exitwhen i>wKe
set Qv=CreateUnit(zv,id,tse(r),tSe(r),270)
call uHe(Qv,0,0,0,0,1)
set i=i+1
endloop
endfunction
function wle takes real x,real y returns nothing
set Fo=x
set go=y
set ho=CreateUnit(Zv,'n05S',x,y,270)
call wke('n05U',lg,$A)
call wke('n05U',Lg,$F)
endfunction
function wLe takes nothing returns boolean
local unit u=GetTriggerUnit()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
local integer lv=GetHeroLevel(u)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Other\\Levelup\\LevelupCaster.mdl"),(u),"origin"))
if lv>bxe[i]then
if bJ[i]<1 then
call tbe(i,lv-bxe[i],1)
set rk[i]=lv
else
set rk[i]=$C8
endif
set boe[i]=boe[i]+3*(lv-bxe[i])
set bre[i]=bre[i]+(2*(lv-bxe[i]))
set bxe[i]=lv
endif
call MultiboardSetItemValueBJ(mC,3,(i+1),ij[bJ[i]+bEe[i]]+I2S(lv)+" ("+I2S(bJ[i]+bEe[i])+")")
set u=null
return false
endfunction
function wme takes nothing returns boolean
return((IsUnitType((GetTriggerUnit()),UNIT_TYPE_HERO))and GetUnitTypeId(GetTriggerUnit())!='H00K' and wLe())!=null
endfunction
function wMe takes integer i,integer t,player p returns nothing
set boe[i]=boe[i]-t
call Qke(p,"|cffffcc00"+"Tiềm Năng: "+"|r "+I2S(boe[i]),3)
set bie[i]=bie[i]+t
endfunction
function wpe takes player p,integer i,string s returns boolean
local unit u=XJ[i]
local integer t=S2I(SubString(s,4,$A))
local integer c=0
local integer st=0
if t>0 and Tme(u)and boe[i]>=t then
if SubString(s,1,3)=="sm" then
set st=bae[i]
if(bre[i]-st)>t then
call wMe(i,t,p)
call T8e(u,t,yv)
set bae[i]=bae[i]+t
else
set c=bre[i]-st
call wMe(i,c,p)
call T8e(u,c,yv)
set bae[i]=bae[i]+c
endif
endif
if SubString(s,1,3)=="tp" then
set st=bne[i]
if(bre[i]-st)>t then
call wMe(i,t,p)
call T9e(u,t,yv)
set bne[i]=bne[i]+t
else
set c=bre[i]-st
call wMe(i,c,p)
call T9e(u,c,yv)
set bne[i]=bne[i]+c
endif
endif
if SubString(s,1,3)=="nc" then
set st=bVe[i]
if(bre[i]-st)>t then
call wMe(i,t,p)
call uve(u,t,yv)
set bVe[i]=bVe[i]+t
else
set c=bre[i]-st
call wMe(i,c,p)
call uve(u,c,yv)
set bVe[i]=bVe[i]+c
endif
endif
endif
set u=null
return false
endfunction
function wPe takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_HERO_LEVEL)
call TriggerAddCondition(t,Filter(function wme))
set t=null
endfunction
function wqe takes integer i returns string
if bEe[i]==1 then
return"Thoát Thai Hoán Cốt"
elseif bEe[i]==2 then
return"Phạt Thế Tẩy Tủy"
else
return"Thần Lực Quán Thế"
endif
endfunction
function wQe takes integer i returns nothing
local string s=""
local integer TMe=bXe[(i)*(8)+1]+bXe[(i)*(8)+2]+bXe[(i)*(8)+3]+bXe[(i)*(8)+4]+bXe[(i)*(8)+5]+bXe[(i)*(8)+6]+bXe[(i)*(8)+7]+bXe[(i)*(8)+8]
if bEe[i]==3 then
set TMe=0
endif
if bEe[i]==0 then
set s="|cff6d6d6d"+"(Bấm chuột trái để tiến hành hóa cảnh)

"
set s=s+"|cffadd8e6"+"Thuộc tính hóa cảnh:|r"
set s=s+"
- Tất cả thuộc tính + "+I2S(TMe*$A)
set s=s+"|cffadd8e6"+"

Yêu cầu hóa cảnh:
"
set s=s+"- Nhân vật trùng sinh 9 và đạt cấp độ 200
"
set s=s+"- Kích hoạt 8 phương vị bát quái hóa cảnh
"
set s=s+"- Tiêu hao 6000000 chân khí
"
set s=s+"- Vật phẩm: Thoát Thai Hoán Cốt Hoàn [cấp "+I2S(bEe[i]+1)+"]"
else
set s="|cff6d6d6d"+"(Bấm chuột trái để tiến hành hóa cảnh)

"
set s="Hóa cảnh cấp: "+"|cff7fff00"+I2S(bEe[i])+"|r"
set s=s+"
Xưng hiệu:"+"|cffffcc00"+wqe(i)
set s=s+"|cffadd8e6"+"

Thuộc tính hóa cảnh:|r"
set s=s+"
- Tất cả thuộc tính + "+I2S($B4*bEe[i]+TMe*$A)
set s=s+"
- Sát thương ngũ hành + "+I2S($9C4*bEe[i])
set s=s+"
- Sát thương nhận vào, thu nhỏ "+I2S($F*bEe[i])+"%"
set s=s+"
- Sát thương gây ra, khuếch đại + "+I2S(20*bEe[i])+"%"
if bEe[i]<3 then
set s=s+"|cffadd8e6"+"

Yêu cầu hóa cảnh:
"
set s=s+"- Nhân vật trùng sinh 9 và đạt cấp độ 200
"
set s=s+"- Kích hoạt 8 phương vị bát quái hóa cảnh
"
set s=s+"- Tiêu hao 6000000 chân khí
"
set s=s+"- Vật phẩm: Thoát Thai Hoán Cốt Hoàn [cấp "+I2S(bEe[i]+1)+"]"
else
set s=s+"|cffadd8e6"+"

(Hóa cảnh đã đạt cấp tối đa)"
endif
endif
set bte[(i-1)*(9)+9]="
"+s
set s=null
endfunction
function wse takes unit u,integer i,integer s returns boolean
local player p=GetOwningPlayer(u)
local item t=Q0e(u,xJ[s])
if not tFe(i,5*SH,0)then
call Qke(p,"|cffffcc00"+"Lượng chân khí hiện tại không đủ !",5)
set t=null
set p=null
return false
endif
if bJ[i]!=9 then
call Qke(p,"|cffffcc00"+"Yêu cầu đạt cấp trùng sinh 9 !",5)
set t=null
set p=null
return false
endif
if t!=null then
call RemoveItem(t)
call tFe(i,5*SH,De)
set bXe[(i)*(8)+s]=1
set bte[(i-1)*(9)+s]="|cffffcc00"+"
Phương vị đã kích hoạt|r

"+"|cffadd8e6"+"- Tất cả thuộc tính tăng 10"
set Ho="war3mapImported\\FrameUI_HCButton2.tga"
if GetLocalPlayer()==p then
call Uge(bse[s],Ho)
endif
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),(u),"origin"))
call Qke(p,"|cffffcc00"+"Bạn đã kích hoạt Bát Quái Phương Vị để hóa cảnh !",5)
call T8e(u,$A,true)
call T9e(u,$A,true)
call uve(u,$A,true)
call wQe(i)
else
call Qke(p,"|cffffcc00"+"Không tìm thấy "+GetObjectName(xJ[s])+" trong hành trang !",5)
endif
set t=null
set p=null
return false
endfunction
function wSe takes unit u,integer i returns nothing
local integer id=GetHandleId(u)
call SetHeroLevelBJ(u,'d',false)
set Bue[(1)*(20)+i]=GetHeroXP(u)*2+qH
set bxe[i]='d'
set zo[i]=zo[i]+9
call SetUnitAbilityLevel(u,'A0YT',bJ[i]+bEe[i]+1)
call MultiboardSetItemValueBJ(mC,3,(i+1),ij[bJ[i]+bEe[i]]+I2S(GetHeroLevel(u))+" ("+I2S(bJ[i]+bEe[i])+")")
endfunction
function wte takes unit u,integer i returns item
local integer id='I0II'
local integer c=0
local item t=null
if bEe[i]==1 then
set id='I0IJ'
elseif bEe[i]==2 then
set id='I0IK'
endif
set Sv=null
loop
exitwhen c>5
set t=UnitItemInSlot(u,c)
if GetItemTypeId(t)==id then
set c=5
set Sv=t
endif
set c=c+1
endloop
set t=null
return Sv
endfunction
function wTe takes unit u,integer i returns boolean
local player p=GetOwningPlayer(u)
local item t=wte(u,i)
if not tFe(i,6*tH,0)then
call Qke(p,"|cffffcc00"+"Lượng chân khí hiện tại không đủ !",5)
set t=null
set p=null
return false
endif
if bJ[i]!=9 or GetHeroLevel(u)<$C8 then
call Qke(p,"|cffffcc00"+"Yêu cầu đạt cấp trùng sinh 9 cấp độ 200 !",5)
set t=null
set p=null
return false
endif
if bXe[(i)*(8)+1]==0 or bXe[(i)*(8)+2]==0 or bXe[(i)*(8)+3]==0 or bXe[(i)*(8)+4]==0 or bXe[(i)*(8)+5]==0 or bXe[(i)*(8)+6]==0 or bXe[(i)*(8)+7]==0 or bXe[(i)*(8)+8]==0 then
call Qke(p,"|cffffcc00"+"Cần phải kích hoạt 8 phương vị mới có thể hóa cảnh !",5)
set t=null
set p=null
return false
endif
if t!=null then
call RemoveItem(t)
call tFe(i,6*tH,De)
set bEe[i]=bEe[i]+1
call T8e(u,'d',true)
call T9e(u,'d',true)
call uve(u,'d',true)
call Tje(u,ox,.15)
call Tje(u,xx,.2)
call Tje(u,6302,$9C4)
call QKe(rj[i]+"|cffffcc00"+" đã tiến hành hóa cảnh đạt cấp "+I2S(bEe[i])+", thật bá đạo !",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl"),(u),"origin"))
if bEe[i]<3 then
set bXe[(i)*(8)+1]=0
set bXe[(i)*(8)+2]=0
set bXe[(i)*(8)+3]=0
set bXe[(i)*(8)+4]=0
set bXe[(i)*(8)+5]=0
set bXe[(i)*(8)+6]=0
set bXe[(i)*(8)+7]=0
set bXe[(i)*(8)+8]=0
set Ho="war3mapImported\\FrameUI_EMPTYBUTTON.tga"
if GetLocalPlayer()==p then
call Uge(bse[1],Ho)
call Uge(bse[2],Ho)
endif
if GetLocalPlayer()==p then
call Uge(bse[3],Ho)
call Uge(bse[4],Ho)
endif
if GetLocalPlayer()==p then
call Uge(bse[5],Ho)
call Uge(bse[6],Ho)
endif
if GetLocalPlayer()==p then
call Uge(bse[7],Ho)
call Uge(bse[8],Ho)
endif
endif
call wQe(i)
call wSe(u,i)
else
call Qke(p,"|cffffcc00"+"Không tìm thấy Thoát Thai Hoán Cốt Hoàn [ cấp "+I2S(bEe[i]+1)+" ] trong hành trang !",5)
endif
set t=null
set p=null
return false
endfunction
function wue takes unit u,integer i returns nothing
local integer TMe=0
local player p=GetOwningPlayer(u)
set bXe[(i)*(8)+1]=S2I(SubString(I2S(che[($DF)*(6)+i]),1,2))
set bXe[(i)*(8)+2]=S2I(SubString(I2S(che[($DF)*(6)+i]),2,3))
set bXe[(i)*(8)+3]=S2I(SubString(I2S(che[($DF)*(6)+i]),3,4))
set bXe[(i)*(8)+4]=S2I(SubString(I2S(che[($DF)*(6)+i]),4,5))
set bXe[(i)*(8)+5]=S2I(SubString(I2S(che[($E0)*(6)+i]),1,2))
set bXe[(i)*(8)+6]=S2I(SubString(I2S(che[($E0)*(6)+i]),2,3))
set bXe[(i)*(8)+7]=S2I(SubString(I2S(che[($E0)*(6)+i]),3,4))
set bXe[(i)*(8)+8]=S2I(SubString(I2S(che[($E0)*(6)+i]),4,5))
set TMe=bXe[(i)*(8)+1]+bXe[(i)*(8)+2]+bXe[(i)*(8)+3]+bXe[(i)*(8)+4]+bXe[(i)*(8)+5]+bXe[(i)*(8)+6]+bXe[(i)*(8)+7]+bXe[(i)*(8)+8]
if bEe[i]>0 then
call T8e(u,$B4*bEe[i]+TMe*$A,true)
call T9e(u,$B4*bEe[i]+TMe*$A,true)
call uve(u,$B4*bEe[i]+TMe*$A,true)
call Tje(u,ox,.15*bEe[i])
call Tje(u,xx,.2*bEe[i])
call Tje(u,6302,$9C4*bEe[i])
if bXe[(i)*(8)+1]>0 then
set bTe[(i-1)*(9)+1]="war3mapImported\\FrameUI_HCButton2.tga"
if GetLocalPlayer()==p then
call Uge(bse[1],bTe[(i-1)*(9)+1])
endif
endif
if bXe[(i)*(8)+2]>0 then
set bTe[(i-1)*(9)+2]="war3mapImported\\FrameUI_HCButton2.tga"
if GetLocalPlayer()==p then
call Uge(bse[2],bTe[(i-1)*(9)+2])
endif
endif
if bXe[(i)*(8)+3]>0 then
set bTe[(i-1)*(9)+3]="war3mapImported\\FrameUI_HCButton2.tga"
if GetLocalPlayer()==p then
call Uge(bse[3],bTe[(i-1)*(9)+3])
endif
endif
if bXe[(i)*(8)+4]>0 then
set bTe[(i-1)*(9)+4]="war3mapImported\\FrameUI_HCButton2.tga"
if GetLocalPlayer()==p then
call Uge(bse[4],bTe[(i-1)*(9)+4])
endif
endif
if bXe[(i)*(8)+5]>0 then
set bTe[(i-1)*(9)+5]="war3mapImported\\FrameUI_HCButton2.tga"
if GetLocalPlayer()==p then
call Uge(bse[5],bTe[(i-1)*(9)+5])
endif
endif
if bXe[(i)*(8)+6]>0 then
set bTe[(i-1)*(9)+6]="war3mapImported\\FrameUI_HCButton2.tga"
if GetLocalPlayer()==p then
call Uge(bse[6],bTe[(i-1)*(9)+6])
endif
endif
if bXe[(i)*(8)+7]>0 then
set bTe[(i-1)*(9)+7]="war3mapImported\\FrameUI_HCButton2.tga"
if GetLocalPlayer()==p then
call Uge(bse[7],bTe[(i-1)*(9)+7])
endif
endif
if bXe[(i)*(8)+8]>0 then
set bTe[(i-1)*(9)+8]="war3mapImported\\FrameUI_HCButton2.tga"
if GetLocalPlayer()==p then
call Uge(bse[8],bTe[(i-1)*(9)+8])
endif
endif
call wQe(i)
endif
set p=null
endfunction
function wUe takes integer i returns integer
local integer tp=$BB8
if jo[i]==2 then
set tp=6000
elseif jo[i]==3 then
set tp=$2EE0
elseif jo[i]==4 then
set tp=$5DC0
elseif jo[i]==5 then
set tp=$BB80
endif
set tp=tp+(bOe[(i)*(20)+1]+bOe[(i)*(20)+2]+bOe[(i)*(20)+3])*'i'
set tp=tp+bOe[(i)*(20)+4]*$D7
set tp=tp+bOe[(i)*(20)+5]*385
set tp=tp+bOe[(i)*(20)+6]*695
return tp
endfunction
function wwe takes integer lv returns string
if lv==1 then
return "|cff9370db"
elseif lv>=2 and lv<=3 then
return "|cffffa500"
else
return "|cffffff00"
endif
endfunction
function wWe takes integer lv returns string
if lv==1 then
return"Hắc Thiết
****"
elseif lv==2 then
return"Thanh Đồng
*****"
elseif lv==3 then
return"Bạch Ngân
*******"
elseif lv==4 then
return"Hoàng Kim
*********"
else
return"Kim Long
**********"
endif
endfunction
function wye takes integer i returns nothing
local integer lv=jo[i]
local string s="Loại: huy chương
"
local integer tp=wUe(i)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+(tp-ko[i])*2
call tCe(i,(tp-ko[i]),1)
set ko[i]=tp
if lv==5 then
set lv=4
endif
set s=s+"Cấp: "+"|cff7fff00"+I2S(jo[i])+"|r
"
set s=s+"Tài phú: "+"|cff7fff00"+I2S(tp)+"|r

"
set s=s+"|cff0078d7Thuộc tính trang bị|r"
set s=s+wwe(jo[i])
set s=s+"
[ "+I2S(bOe[(i)*(20)+1])+"/"+I2S($F*lv)+" ] Né tránh + "+I2S(5*bOe[(i)*(20)+1])
set s=s+"
[ "+I2S(bOe[(i)*(20)+2])+"/"+I2S($F*lv)+" ] Hiệu suất hồi phục sinh nội lực + "+I2S(2*bOe[(i)*(20)+2])+"%"
set s=s+"
[ "+I2S(bOe[(i)*(20)+3])+"/"+I2S($F*lv)+" ] Kháng tất cả + "+I2S(4*bOe[(i)*(20)+3])
if jo[i]>=2 then
set s=s+"
[ "+I2S(bOe[(i)*(20)+4])+"/"+I2S($A*(lv-1))+" ] Sinh, nội lực tối đa + "+I2S(1*bOe[(i)*(20)+4])+"%"
endif
if jo[i]>=3 then
set s=s+"
[ "+I2S(bOe[(i)*(20)+5])+"/"+I2S(8*(lv-2))+" ] Sát thương ngũ hành + "+I2S(20*bOe[(i)*(20)+5])+"%"
endif
if jo[i]>=4 then
set s=s+"
[ "+I2S(bOe[(i)*(20)+6])+"/6 ] Nội, ngoại công kích + "+I2S(60*bOe[(i)*(20)+6])
endif
if jo[i]==5 then
set s=s+"
[ 1/1 ] Sát thương gây ra, khuếch đại 30%"
endif
set eC=wwe(jo[i])+"Huy Chương - "+wWe(jo[i])+"|r"
set oC="war3mapImported\\BTNHuychuong_"+I2S(jo[i])+".blp"
set xC=s
set Ko[i]=oC
set s=null
endfunction
function wYe takes unit u,integer s,integer lv,real r returns boolean
if r==0 then
return false
endif
if s==1 then
call Tje(u,5762,5*lv*r)
elseif s==2 then
call Tje(u,Fx,.02*lv*r)
call Tje(u,gx,.02*lv*r)
elseif s==3 then
call Tue(u,4*lv*r)
elseif s==4 then
call T_e(u,.01*lv*r)
call T_e(u,.01*lv*r)
elseif s==5 then
call TWe(u,.2*lv*r)
elseif s==6 then
call TLe(u,60*lv*r)
elseif s==7 then
call Tje(u,xx,.3)
endif
return false
endfunction
function wze takes integer i returns integer
return bOe[(i)*(20)+1]+bOe[(i)*(20)+2]+bOe[(i)*(20)+3]+bOe[(i)*(20)+4]+bOe[(i)*(20)+5]+bOe[(i)*(20)+6]
endfunction
function wZe takes unit u,integer lv returns item
local integer id='I06B'
local integer i=0
local item t=null
if lv==2 then
set id='I068'
elseif lv==3 then
set id='I069'
elseif lv==4 then
set id='I06A'
endif
set Sv=null
loop
exitwhen i>5
set t=UnitItemInSlot(u,i)
if GetItemTypeId(t)==id then
set i=5
set Sv=t
endif
set i=i+1
endloop
set t=null
return Sv
endfunction
function w_e takes unit u,integer i,item t returns nothing
local player p=GetOwningPlayer(u)
local string s=BlzGetItemDescription(t)
local integer lv=S2I(SubString(s,0,1))
local integer w0e=S2I(SubString(s,2,4))+1
local integer ct=S2I(SubString(s,5,8))*$3E8
local integer w1e=S2I(SubString(s,9,$C))
local integer ts=S2I(SubString(s,$D,$E))
local item t1=null
local item t2=null
local boolean b=true
if jo[i]==lv-1 then
if tge(i,ct,0)then
set t1=Q0e(u,bj[w0e])
set t2=wZe(u,lv)
if t1!=null and t2!=null then
if tHe(i,5*SH*(lv-1),0)then
if bJ[i]>=ts then
if wze(i)==w1e then
if jo[i]==4 then
if GetRandomReal(0,'d')>30 then
set b=false
endif
endif
if b then
call tHe(i,5*SH*(lv-1),De)
call RemoveItem(t1)
call RemoveItem(t2)
set jo[i]=jo[i]+1
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
if lv==2 then
set bOe[(i)*(20)+4]=1
call wYe(u,4,1,1)
call QKe(rj[i]+"|cffffcc00"+" đã chế tạo Huy Chương - Thanh Đồng, thật bá đạo !",5)
elseif lv==3 then
set bOe[(i)*(20)+5]=1
call wYe(u,5,1,1)
call QKe(rj[i]+"|cffffcc00"+" đã chế tạo Huy Chương - Bạch Ngân, thật bá đạo !",5)
elseif lv==4 then
set bOe[(i)*(20)+6]=1
call wYe(u,6,1,1)
call QKe(rj[i]+"|cffffcc00"+" đã chế tạo Huy Chương - Hoàng Kim, thật bá đạo !",5)
elseif lv==5 then
call wYe(u,7,1,1)
call QKe(rj[i]+"|cffffcc00"+" đã chế tạo Huy Chương - Kim Long, thật bá đạo !",5)
endif
call wye(i)
set B4e[(i-1)*(23)+22]=22
set B5e[(i-1)*(23)+22]=eC
set B6e[(i-1)*(23)+22]="
"+xC
if GetLocalPlayer()==p then
call Uge(B3e[22],oC)
endif
else
call tHe(i,5*SH*(lv-1),De)
call RemoveItem(t2)
call QKe(rj[i]+"|cffffcc00"+" chế tạo Huy Chương - Kim Long thất bại, thật đáng tiếc !",5)
endif
else
call Qke(p,"|cffffcc00"+"Thuộc tính Huy Chương vẫn chưa được tẩy luyện đến mức tối đa !",5)
endif
else
call Qke(p,"|cffffcc00"+"Không đủ cấp độ trùng sinh !",5)
endif
else
call Qke(p,"|cffffcc00"+"Ngân lượng không đủ để chế tạo !",5)
endif
else
call Qke(p,"|cffffcc00"+"Vật phẩm yêu cầu không đủ !",5)
endif
else
call Qke(p,"|cffffcc00"+"Không đủ mức công trạng yêu cầu !",5)
endif
else
call Qke(p,"|cffffcc00"+"Cấp độ Huy Chương không đúng !",5)
endif
set s=null
set t1=null
set t2=null
set p=null
endfunction
function w2e takes unit u,integer i returns nothing
local player p=GetOwningPlayer(u)
local item t1=Q0e(u,bj[7])
local item t2=Q0e(u,'I067')
if jo[i]==0 then
if tHe(i,$493E0,0)then
if t1!=null and t2!=null then
if tge(i,$3E8,0)then
call RemoveItem(t1)
call RemoveItem(t2)
call tHe(i,$493E0,De)
set jo[i]=1
set bOe[(i)*(20)+1]=1
set bOe[(i)*(20)+2]=1
set bOe[(i)*(20)+3]=1
call wYe(u,1,1,1)
call wYe(u,2,1,1)
call wYe(u,3,1,1)
call wye(i)
set B4e[(i-1)*(23)+22]=22
set B5e[(i-1)*(23)+22]=eC
set B6e[(i-1)*(23)+22]="
"+xC
if GetLocalPlayer()==p then
call Uge(B3e[22],oC)
endif
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã chế tạo Huy Chương - Hắc Thiết !",5)
else
call Qke(p,"|cffffcc00"+"Không đủ mức công trạng yêu cầu !",5)
endif
else
call Qke(p,"|cffffcc00"+"Vật phẩm yêu cầu không đủ !",5)
endif
else
call Qke(p,"|cffffcc00"+"Ngân lượng không đủ để chế tạo !",5)
endif
else
call Qke(p,"|cffffcc00"+"Bạn đã kích hoạt Huy Chương trước đó !",5)
endif
set t1=null
set t2=null
set p=null
endfunction
function w3e takes integer i,integer TMe,integer w1e returns nothing
local integer rd=GetRandomInt(0,1)
if bOe[(i)*(20)+TMe]<w1e and rd!=0 and Jo<2 then
set bOe[(i)*(20)+TMe]=bOe[(i)*(20)+TMe]+rd
call wYe(XJ[i],TMe,rd,1)
set Jo=Jo+rd
endif
endfunction
function w4e takes unit u,integer i,item t,integer w5e returns nothing
local player p=GetOwningPlayer(u)
local integer rd=0
set Jo=0
if w5e=='I067' then
if jo[i]==1 then
if wze(i)<45 then
call w3e(i,1,$F)
call w3e(i,2,$F)
call w3e(i,3,$F)
call wye(i)
set B4e[(i-1)*(23)+22]=22
set B5e[(i-1)*(23)+22]=eC
set B6e[(i-1)*(23)+22]="
"+xC
if GetLocalPlayer()==p then
call Uge(B3e[22],oC)
set zc=eC
set Zc="
"+xC
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextTitle",0),zc)
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
call Qke(p,"|cffffcc00"+"Bạn đã tẩy luyện thuộc tính Huy Chương Hắc Thiết !",5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call RemoveItem(t)
else
call Qke(p,"|cffffcc00"+"Thuộc tính của Huy Chương Hắc Thiết đã đạt cấp tối đa !",5)
endif
else
call Qke(p,"|cffffcc00"+"Cấp độ vật phẩm sử dụng để nâng cấp không đúng !",5)
endif
elseif w5e=='I068' then
if jo[i]==2 then
if wze(i)<'d' then
call w3e(i,1,30)
call w3e(i,2,30)
call w3e(i,3,30)
call w3e(i,4,$A)
call wye(i)
set B4e[(i-1)*(23)+22]=22
set B5e[(i-1)*(23)+22]=eC
set B6e[(i-1)*(23)+22]="
"+xC
if GetLocalPlayer()==p then
call Uge(B3e[22],oC)
set zc=eC
set Zc="
"+xC
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextTitle",0),zc)
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
call Qke(p,"|cffffcc00"+"Bạn đã tẩy luyện thuộc tính Huy Chương Thanh Đồng !",5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call RemoveItem(t)
else
call Qke(p,"|cffffcc00"+"Thuộc tính của Huy Chương Thanh Đồng đã đạt cấp tối đa !",5)
endif
else
call Qke(p,"|cffffcc00"+"Cấp độ vật phẩm sử dụng để nâng cấp không đúng !",5)
endif
elseif w5e=='I069' then
if jo[i]==3 then
if wze(i)<$A3 then
call w3e(i,1,45)
call w3e(i,2,45)
call w3e(i,3,45)
call w3e(i,4,20)
call w3e(i,5,8)
call wye(i)
set B4e[(i-1)*(23)+22]=22
set B5e[(i-1)*(23)+22]=eC
set B6e[(i-1)*(23)+22]="
"+xC
if GetLocalPlayer()==p then
call Uge(B3e[22],oC)
set zc=eC
set Zc="
"+xC
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextTitle",0),zc)
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
call Qke(p,"|cffffcc00"+"Bạn đã tẩy luyện thuộc tính Huy Chương Bạch Ngân !",5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call RemoveItem(t)
else
call Qke(p,"|cffffcc00"+"Thuộc tính của Huy Chương Bạch Ngân đã đạt cấp tối đa !",5)
endif
else
call Qke(p,"|cffffcc00"+"Cấp độ vật phẩm sử dụng để nâng cấp không đúng !",5)
endif
elseif w5e=='I06A' then
if jo[i]==4 then
if wze(i)<$E8 then
call w3e(i,1,60)
call w3e(i,2,60)
call w3e(i,3,60)
call w3e(i,4,30)
call w3e(i,5,16)
call w3e(i,6,6)
call wye(i)
set B4e[(i-1)*(23)+22]=22
set B5e[(i-1)*(23)+22]=eC
set B6e[(i-1)*(23)+22]="
"+xC
if GetLocalPlayer()==p then
call Uge(B3e[22],oC)
set zc=eC
set Zc="
"+xC
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextTitle",0),zc)
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
call Qke(p,"|cffffcc00"+"Bạn đã tẩy luyện thuộc tính Huy Chương Hoàng Kim !",5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call RemoveItem(t)
else
call Qke(p,"|cffffcc00"+"Thuộc tính của Huy Chương Hoàng Kim đã đạt cấp tối đa !",5)
endif
else
call Qke(p,"|cffffcc00"+"Cấp độ vật phẩm sử dụng để nâng cấp không đúng !",5)
endif
endif
set p=null
endfunction
function w6e takes integer i returns nothing
if wze(i)<=$E8 then
call wYe(XJ[i],1,bOe[(i)*(20)+1],1)
call wYe(XJ[i],2,bOe[(i)*(20)+2],1)
call wYe(XJ[i],3,bOe[(i)*(20)+3],1)
if jo[i]>=2 then
call wYe(XJ[i],4,bOe[(i)*(20)+4],1)
endif
if jo[i]>=3 then
call wYe(XJ[i],5,bOe[(i)*(20)+5],1)
endif
if jo[i]>=4 then
call wYe(XJ[i],6,bOe[(i)*(20)+6],1)
endif
if jo[i]>=5 then
call wYe(XJ[i],7,1,1)
endif
call wye(i)
set B4e[(i-1)*(23)+22]=22
set B5e[(i-1)*(23)+22]=eC
set B6e[(i-1)*(23)+22]="
"+xC
endif
endfunction
function w7e takes integer U3e,integer tJe,real x,real y returns item
local item t=CreateItem('I0AO',x,y)
local integer id=GetHandleId(t)
local string s="Loại: tinh chú

"
set s=s+"|cff0078d7"+"Tài phú: "+I2S(cEe[(tJe)*(20)+U3e])+"|r

"
call SaveInteger(IT,id,4386,U3e)
call SaveInteger(IT,id,5789,tJe)
if tJe==1 then
set s=s+"|cffadd8e6"+"Vật phẩm sử dụng để nâng cấp tinh chú tăng thuộc tính cường hóa dòng "+I2S(U3e)+" cho phòng cụ|r"
call BlzSetItemName(t,"|cffffff00"+"Tinh Chú Thạch - Phòng Cụ (Cấp "+I2S(U3e)+")|r")
call BlzSetItemIconPath(t,"war3mapImported\\BTNtinhchuthach_phongcu"+I2S(U3e)+".blp")
elseif tJe==2 then
set s=s+"|cffadd8e6"+"Vật phẩm sử dụng để nâng cấp tinh chú tăng thuộc tính cường hóa dòng "+I2S(U3e)+" cho trang sức|r"
call BlzSetItemName(t,"|cffffff00"+"Tinh Chú Thạch - Trang Sức (Cấp "+I2S(U3e)+")|r")
call BlzSetItemIconPath(t,"war3mapImported\\BTNtinhchuthach_trangsuc"+I2S(U3e)+".blp")
else
set s=s+"|cffadd8e6"+"Vật phẩm sử dụng để nâng cấp tinh chú tăng thuộc tính cường hóa dòng "+I2S(U3e)+" cho vũ khí|r"
call BlzSetItemName(t,"|cffffff00"+"Tinh Chú Thạch - Vũ Khí (Cấp "+I2S(U3e)+")|r")
call BlzSetItemIconPath(t,"war3mapImported\\BTNtinhchuthach_vukhi"+I2S(U3e)+".blp")
endif
set s=s+"|cffffcc00"+"

(Dã Luyện Đại Sư ở Dương Châu biết cách tinh chú trang bị)|r"
call BlzSetItemDescription(t,s)
call BlzSetItemExtendedTooltip(t,s)
call SetItemInvulnerable(t,true)
set Sv=t
set t=null
set s=null
return Sv
endfunction
function w8e takes integer U3e,integer uCe,real x,real y returns item
local item t=CreateItem('I01R',x,y)
local integer id=GetHandleId(t)
local string s="Loại: nguyên liệu

"
call SaveInteger(IT,id,4386,U3e)
call SaveInteger(IT,id,5563,uCe)
set s=s+"Vật phẩm dùng để chế tạo phòng cụ cấp "+I2S(U3e)
set s=s+"|cffffcc00"+"
Phòng cụ được tạo thành mang ngũ hành "+cie[(0)*(20)+uCe]
call BlzSetItemDescription(t,s)
set s=s+"

|cff0078d7Thuộc tính ngũ hành từng loại trang bị|r"
set s=s+"
|cff7fff00- Nón: kháng "+cie[(1)*(20)+S2I(SubString(Cj[uCe],0,1))]
set s=s+"
- áo: kháng "+cie[(1)*(20)+S2I(SubString(Cj[uCe],1,2))]
set s=s+"
- Giày: kháng "+cie[(1)*(20)+S2I(SubString(Cj[uCe],2,3))]
set s=s+"
- Tay: kháng "+cie[(1)*(20)+S2I(SubString(Cj[uCe],3,4))]
set s=s+"
- Lưng: kháng "+cie[(1)*(20)+S2I(SubString(Cj[uCe],4,5))]+"|r"
call BlzSetItemExtendedTooltip(t,s)
if U3e==1 then
call BlzSetItemName(t,"Ngũ Hành Trục Quyển - "+cie[(0)*(20)+uCe]+" (Cấp 1)")
else
call BlzSetItemName(t,Xj[U3e]+"Ngũ Hành Trục Quyển - "+cie[(0)*(20)+uCe]+" (Cấp "+I2S(U3e)+")|r")
endif
if uCe==2 then
call BlzSetItemIconPath(t,"war3mapImported\\BTNnguhanhtrucquyen_moc.blp")
elseif uCe==3 then
call BlzSetItemIconPath(t,"war3mapImported\\BTNnguhanhtrucquyen_thuy.blp")
elseif uCe==4 then
call BlzSetItemIconPath(t,"war3mapImported\\BTNnguhanhtrucquyen_hoa.blp")
elseif uCe==5 then
call BlzSetItemIconPath(t,"war3mapImported\\BTNnguhanhtrucquyen_tho.blp")
endif
call SetItemInvulnerable(t,true)
set Sv=t
set t=null
set s=null
return Sv
endfunction
function w9e takes integer Wve returns integer
if Wve>=1 and Wve<=3 then
return 1
endif
if Wve>=4 and Wve<=6 then
return 2
endif
if Wve>=7 and Wve<=9 then
return 3
endif
if Wve>=$A and Wve<=$C then
return 4
endif
if Wve>=$D and Wve<=$F then
return 5
endif
return 0
endfunction
function Wee takes integer woe,integer Wxe,real x,real y returns item
local item t=CreateItem('I01S',x,y)
local integer id=GetHandleId(t)
local string s="Loại: nguyên liệu

"
local string n="Sơ Cấp"
local string p="war3mapImported\\BTNkhihonsocap_"
if woe==2 then
set n="Cao Cấp"
set p="war3mapImported\\BTNkhihoncaocap_"
endif
call SaveInteger(IT,id,4386,woe)
call SaveInteger(IT,id,8105,Wxe)
set s=s+"Vật phẩm dùng để dưỡng thành thuộc tính cho vũ khí"
set s=s+"|cffffcc00"+"
Vũ khí được tạo thành mang ngũ hành "+cie[(0)*(20)+w9e(Wxe)]
call BlzSetItemDescription(t,s)
set s=s+"

|cff0078d7Thuộc tính trang bị|r
"
if Wxe==1 then
set s=s+"- Công kích
"
set s=s+"- Vật công
"
set s=s+"- Thời gian gây thọ thương
"
set s=s+"- Tốc độ tấn công
"
call BlzSetItemName(t,"|cff7fff00"+"Khí Hồn "+n+" [ Thương Lang ]")
call BlzSetItemIconPath(t,p+"kim.blp")
elseif Wxe==2 then
set s=s+"- Công kích
"
set s=s+"- Vật công
"
set s=s+"- Thời gian gây thọ thương
"
set s=s+"- Chính xác
"
call BlzSetItemName(t,"|cff7fff00"+"Khí Hồn "+n+" [ Hoàng Quang ]")
call BlzSetItemIconPath(t,p+"kim.blp")
elseif Wxe==3 then
set s=s+"- Công kích
"
set s=s+"- Vật công
"
set s=s+"- Thời gian gây thọ thương
"
set s=s+"- Sát thương chí mạng
"
call BlzSetItemName(t,"|cff7fff00"+"Khí Hồn "+n+" [ Phi Yến ]")
call BlzSetItemIconPath(t,p+"kim.blp")
elseif Wxe==4 then
set s=s+"- Công kích
"
set s=s+"- Độc công
"
set s=s+"- Thời gian gây bất động
"
set s=s+"- Tốc độ tấn công
"
call BlzSetItemName(t,"|cff7fff00"+"Khí Hồn "+n+" [ Ô Sương ]")
call BlzSetItemIconPath(t,p+"moc.blp")
elseif Wxe==5 then
set s=s+"- Công kích
"
set s=s+"- Độc công
"
set s=s+"- Thời gian gây bất động
"
set s=s+"- Độc sát duy trì
"
call BlzSetItemName(t,"|cff7fff00"+"Khí Hồn "+n+" [ Thực Cốt ]")
call BlzSetItemIconPath(t,p+"moc.blp")
elseif Wxe==6 then
set s=s+"- Công kích
"
set s=s+"- Độc công
"
set s=s+"- Thời gian gây bất động
"
set s=s+"- Chính xác
"
call BlzSetItemName(t,"|cff7fff00"+"Khí Hồn "+n+" [ Toái Trần ]")
call BlzSetItemIconPath(t,p+"moc.blp")
elseif Wxe==7 then
set s=s+"- Công kích
"
set s=s+"- Băng công
"
set s=s+"- Thời gian làm chậm
"
set s=s+"- Tốc độ tấn công
"
call BlzSetItemName(t,"|cff7fff00"+"Khí Hồn "+n+" [ Băng Phách ]")
call BlzSetItemIconPath(t,p+"thuy.blp")
elseif Wxe==8 then
set s=s+"- Công kích
"
set s=s+"- Băng công
"
set s=s+"- Thời gian làm chậm
"
set s=s+"- Sát thương chí mạng
"
call BlzSetItemName(t,"|cff7fff00"+"Khí Hồn "+n+" [ Hàn Sương ]")
call BlzSetItemIconPath(t,p+"thuy.blp")
elseif Wxe==9 then
set s=s+"- Công kích
"
set s=s+"- Băng công
"
set s=s+"- Thời gian làm chậm
"
set s=s+"- Chính xác
"
call BlzSetItemName(t,"|cff7fff00"+"Khí Hồn "+n+" [ Hàn Băng ]")
call BlzSetItemIconPath(t,p+"thuy.blp")
elseif Wxe==$A then
set s=s+"- Công kích
"
set s=s+"- Hỏa công
"
set s=s+"- Thời gian gây bỏng
"
set s=s+"- Tốc độ tấn công
"
call BlzSetItemName(t,"|cff7fff00"+"Khí Hồn "+n+" [ Nghiệp Hỏa ]")
call BlzSetItemIconPath(t,p+"hoa.blp")
elseif Wxe==$B then
set s=s+"- Công kích
"
set s=s+"- Hỏa công
"
set s=s+"- Thời gian gây bỏng
"
set s=s+"- Sát thương chí mạng
"
call BlzSetItemName(t,"|cff7fff00"+"Khí Hồn "+n+" [ Chích Viêm ]")
call BlzSetItemIconPath(t,p+"hoa.blp")
elseif Wxe==$C then
set s=s+"- Công kích
"
set s=s+"- Hỏa công
"
set s=s+"- Thời gian gây bỏng
"
set s=s+"- Chính xác
"
call BlzSetItemName(t,"|cff7fff00"+"Khí Hồn "+n+" [ Phá Quân ]")
call BlzSetItemIconPath(t,p+"hoa.blp")
elseif Wxe==$D then
set s=s+"- Công kích
"
set s=s+"- Lôi công
"
set s=s+"- Thời gian gây choáng
"
set s=s+"- Tốc độ tấn công
"
call BlzSetItemName(t,"|cff7fff00"+"Khí Hồn "+n+" [ Lạc Lôi ]")
call BlzSetItemIconPath(t,p+"tho.blp")
elseif Wxe==$E then
set s=s+"- Công kích
"
set s=s+"- Lôi công
"
set s=s+"- Thời gian gây choáng
"
set s=s+"- Chính xác
"
call BlzSetItemName(t,"|cff7fff00"+"Khí Hồn "+n+" [ Vân Phách ]")
call BlzSetItemIconPath(t,p+"tho.blp")
elseif Wxe==$F then
set s=s+"- Công kích
"
set s=s+"- Lôi công
"
set s=s+"- Thời gian gây choáng
"
set s=s+"- Sát thương chí mạng
"
call BlzSetItemName(t,"|cff7fff00"+"Khí Hồn "+n+" [ Linh Vũ ]")
call BlzSetItemIconPath(t,p+"tho.blp")
endif
call BlzSetItemExtendedTooltip(t,s)
call SetItemInvulnerable(t,true)
set Sv=t
set t=null
set s=null
set p=null
set n=null
return Sv
endfunction
function Woe takes item i,integer woe,integer tJe,real x,real y returns item
local item t=CreateItem('I01T',x,y)
local integer id=GetHandleId(t)
local string s=BlzGetItemExtendedTooltip(i)
call BlzSetItemDescription(t,s)
call BlzSetItemExtendedTooltip(t,s)
set s=BlzGetItemTooltip(i)
call BlzSetItemName(t,SubString(s,4,StringLength(s)))
call BlzSetItemIconPath(t,"war3mapImported\\BTNsachchetao_"+I2S(woe)+".blp")
call SaveInteger(IT,id,4386,woe)
call SaveInteger(IT,id,5789,tJe)
call SetItemInvulnerable(t,true)
set Sv=t
set t=null
set s=null
return Sv
endfunction
function Wre takes unit u,integer Wie,real r returns nothing
local integer z=S2I(SubString(I2S(Wie),1,3))
local real v=I2R(S2I(SubString(I2S(Wie),0,1))-1)*.5+1.
if z==1 then
call Tje(u,7695,r*v*.6)
endif
if z==2 then
call Tje(u,5724,r*v*.6)
endif
if z==3 then
call Tje(u,bx,r*v*.6)
endif
if z==4 then
call Tje(u,Bx,r*v*.6)
endif
if z==5 then
call Tje(u,cx,r*v*.6)
endif
if z==6 then
call Tje(u,5034,r*v*80)
endif
if z==7 then
call Tje(u,611,r*v*80)
endif
if z==8 then
call Tje(u,Ax,r*v*80)
endif
if z==9 then
call Tje(u,7185,r*v*80)
endif
if z==$A then
call Tje(u,Nx,r*v*80)
endif
if z==$B then
call TZe(u,r*v*$7D0)
endif
if z==$C then
call T3e(u,r*v*$3E8)
endif
if z==$D then
call Tje(u,4888,r*v*60)
endif
if z==$E then
call Tje(u,7614,r*v*60)
endif
if z==$F then
call Tje(u,5762,r*v*'d')
endif
if z==16 then
call Tje(u,6780,r*v*$DC)
endif
if z==17 then
call Tje(u,ax,r*v*.08)
endif
if z==18 then
call Tje(u,Vx,r*v*.08)
endif
if z==19 then
call Tje(u,Fx,r*v*.24)
call Tje(u,gx,r*v*.24)
endif
if z==20 then
call Tje(u,572,r*v*.18)
endif
if z==21 then
call Tje(u,7896,r*v*.18)
endif
if z==22 then
call Tje(u,lx,r*v*.18)
endif
if z==23 then
call Tje(u,6210,r*v*.18)
endif
if z==24 then
call Tje(u,6491,r*v*.18)
endif
if z==25 then
call Tje(u,jx,r*v*.18)
endif
if z==26 then
call Tje(u,6282,r*v*.18)
endif
if z==27 then
call Tje(u,7255,r*v*.18)
endif
if z==28 then
call Tje(u,Jx,r*v*.18)
endif
if z==29 then
call Tje(u,kx,r*v*.18)
endif
if z==30 then
call Tje(u,5034,r*v*$96)
endif
if z==31 then
call Tje(u,611,r*v*$96)
endif
if z==32 then
call Tje(u,Ax,r*v*$96)
endif
if z==33 then
call Tje(u,7185,r*v*$96)
endif
if z==34 then
call Tje(u,Nx,r*v*$96)
endif
if z==35 then
call Tje(u,7695,r*v*1.2)
endif
if z==36 then
call Tje(u,5724,r*v*1.2)
endif
if z==37 then
call Tje(u,bx,r*v*1.2)
endif
if z==38 then
call Tje(u,Bx,r*v*1.2)
endif
if z==39 then
call Tje(u,cx,r*v*1.2)
endif
if z==40 then
call T5e(u,r*v*$DC)
endif
if z==41 then
call T6e(u,r*v*$DC)
endif
if z==42 then
call Tje(u,Cx,r*v*.3)
endif
if z==43 then
call Tje(u,690,r*v*.2)
endif
if z==44 then
call Tje(u,7695,r*v*2.4)
endif
if z==45 then
call Tje(u,5724,r*v*2.4)
endif
if z==46 then
call Tje(u,bx,r*v*2.4)
endif
if z==47 then
call Tje(u,Bx,r*v*2.4)
endif
if z==48 then
call Tje(u,cx,r*v*2.4)
endif
if z==49 then
call Tqe(u,r*v*30)
endif
if z==50 then
call T_e(u,r*v*.2)
endif
if z==51 then
call T4e(u,r*v*.2)
endif
if z==52 then
call Tue(u,r*v*$8C)
endif
if z==53 then
call Twe(u,r*v*.2)
endif
if z==54 then
call Tje(u,ox,r*v*.2)
endif
if z==55 then
call Tje(u,5319,r*v*.5)
endif
if z==56 then
call Tje(u,vx,r*v*.5)
endif
if z==57 then
call T_e(u,r*v*.2)
call T4e(u,r*v*.2)
endif
if z==58 then
call Tje(u,xx,r*v*.2)
endif
if z==59 then
call Tje(u,qx,r*v*.2)
endif
if z==60 then
call Tje(u,5034,-1*r*50)
call Tje(u,7695,r*v*2.2)
endif
if z==61 then
call Tje(u,611,-1*r*50)
call Tje(u,5724,r*v*2.2)
endif
if z==62 then
call Tje(u,Ax,-1*r*50)
call Tje(u,bx,r*v*2.2)
endif
if z==63 then
call Tje(u,7185,-1*r*50)
call Tje(u,Bx,r*v*2.2)
endif
if z==64 then
call Tje(u,Nx,-1*r*50)
call Tje(u,cx,r*v*2.2)
endif
if z==65 then
call Tje(u,5034,r*v*$FA)
endif
if z==66 then
call Tje(u,611,r*v*$FA)
endif
if z==67 then
call Tje(u,Ax,r*v*$FA)
endif
if z==68 then
call Tje(u,7185,r*v*$FA)
endif
if z==69 then
call Tje(u,Nx,r*v*$FA)
endif
if z==70 then
call Tje(u,5034,-1*r*90)
call Tje(u,611,-1*r*90)
call Tje(u,Ax,-1*r*90)
call Tje(u,7185,-1*r*90)
call Tje(u,Nx,-1*r*90)
call Tje(u,xx,r*v*.2)
endif
if z==71 then
call Twe(u,r*v*.2)
endif
if z==72 then
call Tje(u,7695,r*v*2.)
call Tje(u,5724,r*v*2.)
call Tje(u,bx,r*v*2.)
call Tje(u,Bx,r*v*2.)
call Tje(u,cx,r*v*2.)
endif
if z==73 then
call TZe(u,r*v*$2710)
endif
if z==74 then
call Tje(u,7695,r*v*4.)
endif
if z==75 then
call Tje(u,5724,r*v*4.)
endif
if z==76 then
call Tje(u,bx,r*v*4.)
endif
if z==77 then
call Tje(u,Bx,r*v*4.)
endif
if z==78 then
call Tje(u,cx,r*v*4.)
endif
if z==79 then
call Tje(u,6302,r*v*$7D0)
endif
if z==80 then
call Tje(u,8073,r*v*4)
endif
if z==81 then
call Tje(u,4251,r*v*4)
endif
if z==82 then
call Tje(u,Ox,r*v*$A)
endif
if z==83 then
call Tje(u,5034,r*$C8)
call Tje(u,572,r*v*.2)
endif
if z==84 then
call Tje(u,611,r*$C8)
call Tje(u,7896,r*v*.2)
endif
if z==85 then
call Tje(u,Ax,r*$C8)
call Tje(u,lx,r*v*.2)
endif
if z==86 then
call Tje(u,7185,r*$C8)
call Tje(u,6210,r*v*.2)
endif
if z==87 then
call Tje(u,Nx,r*$C8)
call Tje(u,6491,r*v*.2)
endif
if z==89 then
call Tje(u,968,r*v*.2)
endif
if z==90 then
call Tje(u,4857,r*v*.2)
endif
endfunction
function Wae takes integer z returns string
if z>=1 and z<=5 then
return"%"
elseif z>=17 and z<=29 then
return"%"
elseif z>=35 and z<=39 then
return"%"
elseif z>=42 and z<=48 then
return"%"
elseif z>=50 and z<=51 then
return"%"
elseif z>=53 and z<=64 then
return"%"
elseif z>=70 and z<=72 then
return"%"
elseif z>=74 and z<=78 then
return"%"
elseif z>=80 and z<=89 then
return"%"
endif
return""
endfunction
function Wne takes integer z returns integer
if z>=1 and z<=5 then
return 60
elseif z>=6 and z<=$A then
return 80
elseif z==$B or z==79 then
return $7D0
elseif z==$C then
return $3E8
elseif z>=$D and z<=$E then
return 60
elseif z==$F then
return 'd'
elseif z>=35 and z<=39 then
return 'x'
elseif z==16 or z==40 or z==41 then
return $DC
elseif z==17 or z==18 then
return 8
elseif z>=19 and z<=29 then
return 24
elseif z==54 or z==58 or z==59 or z==70 or z==71 then
return 20
elseif z>=30 and z<=34 then
return $96
elseif z==43 or z==53 or z==57 then
return 20
elseif z>=44 and z<=48 then
return $F0
elseif z==49 or z==42 then
return 30
elseif z==52 then
return $8C
elseif z>=60 and z<=64 then
return $DC
elseif z>=65 and z<=69 then
return $FA
elseif z==72 then
return $C8
elseif z>=74 and z<=78 then
return 400
elseif z==80 or z==81 then
return 4
elseif z==82 then
return $A
elseif z==73 then
return $2710
elseif z>=83 and z<=89 then
return 20
else
return 40
endif
endfunction
function WVe takes integer z,integer i returns string
if z==1 then
return"Vật công + "
endif
if z==2 then
return"Độc công + "
endif
if z==3 then
return"Băng công + "
endif
if z==4 then
return"Hỏa công + "
endif
if z==5 then
return"Lôi công + "
endif
if z==6 then
return"Kháng vật + "
endif
if z==7 then
return"Kháng độc + "
endif
if z==8 then
return"Kháng băng + "
endif
if z==9 then
return"Kháng hỏa + "
endif
if z==$A then
return"Kháng lôi + "
endif
if z==$B then
return"Sinh lực + "
endif
if z==$C then
return"Nội lực + "
endif
if z==$D then
return"Chí mạng + "
endif
if z==$E then
return"Kháng chí mạng + "
endif
if z==$F then
return"Né tránh + "
endif
if z==16 then
return"Chính xác + "
endif
if z==17 then
return"Sát thương chí mạng + "
endif
if z==18 then
return"Chịu sát thương chí mạng - "
endif
if z==19 then
return"Hiệu suất hồi phục sinh nội lực + "
endif
if z==20 then
return"Kháng thời gian thọ thương "
endif
if z==21 then
return"Kháng thời gian bất động "
endif
if z==22 then
return"Kháng thời gian chậm "
endif
if z==23 then
return"Kháng thời gian bỏng "
endif
if z==24 then
return"Kháng thời gian choáng "
endif
if z==25 then
return"Kháng tỉ lệ thọ thương "
endif
if z==26 then
return"Kháng tỉ lệ bất động "
endif
if z==27 then
return"Kháng tỉ lệ chậm "
endif
if z==28 then
return"Kháng tỉ lệ bỏng "
endif
if z==29 then
return"Kháng tỉ lệ choáng "
endif
if z==30 then
return"Kháng vật + "
endif
if z==31 then
return"Kháng độc + "
endif
if z==32 then
return"Kháng băng + "
endif
if z==33 then
return"Kháng hỏa + "
endif
if z==34 then
return"Kháng lôi + "
endif
if z==35 then
return"Vật công + "
endif
if z==36 then
return"Độc công + "
endif
if z==37 then
return"Băng công + "
endif
if z==38 then
return"Hỏa công + "
endif
if z==39 then
return"Lôi công + "
endif
if z==40 then
return"Công kích ngoại + "
endif
if z==41 then
return"Công kích nội + "
endif
if z==42 then
return"Độc sát duy trì + "
endif
if z==43 then
return BlzGetAbilityResearchTooltip(Bwe[(i)*(20)+7],0)+" sát thương + "
endif
if z==44 then
return"Vật công + "
endif
if z==45 then
return"Độc công + "
endif
if z==46 then
return"Băng công + "
endif
if z==47 then
return"Hỏa công + "
endif
if z==48 then
return"Lôi công + "
endif
if z==49 then
return"Phòng thủ + "
endif
if z==50 then
return"Sinh lực tối đa + "
endif
if z==51 then
return"Nội lực tối đa + "
endif
if z==52 then
return"Kháng tất cả + "
endif
if z==53 then
return"Thời gian trúng trạng thái bất lợi - "
endif
if z==54 then
return"Sát thương hứng chịu, thu nhỏ "
endif
if z==55 then
return"Phát huy lực tấn công cơ bản "
endif
if z==56 then
return"Phát huy lực tấn công kỹ năng "
endif
if z==57 then
return"Sinh nội lực tối đa + "
endif
if z==58 then
return"Sát thương gây ra, khuếch đại "
endif
if z==59 then
return BlzGetAbilityResearchTooltip(Bwe[(i)*(20)+$B],0)+" sát thương + "
endif
if z==60 then
return"Kháng vật - 50
Vật công + "
endif
if z==61 then
return"Kháng độc - 50
Độc công + "
endif
if z==62 then
return"Kháng băng - 50
Băng công + "
endif
if z==63 then
return"Kháng hỏa - 50
Hỏa công + "
endif
if z==64 then
return"Kháng lôi - 50
Lôi công + "
endif
if z==65 then
return"Kháng vật + "
endif
if z==66 then
return"Kháng độc + "
endif
if z==67 then
return"Kháng băng + "
endif
if z==68 then
return"Kháng hỏa + "
endif
if z==69 then
return"Kháng lôi + "
endif
if z==70 then
return"Kháng tất cả - 90
Sát thương gây ra, khuếch đại "
endif
if z==71 then
return"Thời gian trúng trạng thái bất lợi - "
endif
if z==72 then
return"Sát thương ngũ hành + "
endif
if z==73 then
return"Sinh lực tối đa + "
endif
if z==74 then
return"Vật công + "
endif
if z==75 then
return"Độc công + "
endif
if z==76 then
return"Băng công + "
endif
if z==77 then
return"Hỏa công + "
endif
if z==78 then
return"Lôi công + "
endif
if z==79 then
return"Sát thương ngũ hành + "
endif
if z==80 then
return"Tỉ lệ chí mạng tối đa + "
endif
if z==81 then
return"Tỉ lệ né tránh tối đa + "
endif
if z==82 then
return"Xác suất bỏ qua một trạng thái ngũ hành trúng phải "
endif
if z==83 then
return"Kháng vật 200
Kháng thời gian thọ thương "
endif
if z==84 then
return"Kháng độc 200
Kháng thời gian bất động "
endif
if z==85 then
return"Kháng băng 200
Kháng thời gian làm chậm "
endif
if z==86 then
return"Kháng hỏa 200
Kháng thời gian bỏng "
endif
if z==87 then
return"Kháng lôi 200
Kháng thời gian choáng "
endif
if z==88 then
return BlzGetAbilityResearchTooltip(Bwe[(i)*(20)+$A],0)+" sát thương + "
endif
if z==89 then
return BlzGetAbilityResearchTooltip(Bwe[(i)*(20)+8],0)+" sát thương + "
endif
return""
endfunction
function WEe takes integer z returns integer
if z<=$A then
return 1
endif
if z>$A and z<=19 then
return 2
endif
if z>19 and z<=29 then
return 3
endif
if z>29 and z<=39 then
return 4
endif
if z>39 and z<=48 then
return 5
endif
if z>48 and z<=58 then
return 6
endif
if z>58 and z<=73 then
return 7
endif
if z>73 and z<=89 then
return 8
endif
return 0
endfunction
function WXe takes integer i,integer Cbe,integer tJe returns string
local integer lv=WEe(Cbe)
local string s=""
set s="Loại: bảo thạch
"
if tJe==1 then
set s=s+"Cấp: "+"|cffffcc00"+I2S(lv)+"|r

"
set s=s+"|cff0078d7Thuộc tính khảm nạm|r
"
set s=s+"|cff7fff00"+"- "+WVe(Cbe,i)+I2S(Wne(Cbe))+Wae(Cbe)+"|r

"
set fi=BlzGetAbilityTooltip('A01Y',Cbe-1)
else
set s=s+"Cấp: "+"|cffffcc00"+I2S(lv)+" (+1)|r

"
set s=s+"|cff0078d7Thuộc tính khảm nạm|r
"
set s=s+"|cffffcc00"+"- "+WVe(Cbe,i)+I2S(R2I(I2R(Wne(Cbe))*1.5))+Wae(Cbe)+"|r

"
set fi="[ Hoàn Mỹ ] "+BlzGetAbilityTooltip('A01Y',Cbe-1)
endif
set Di="war3mapImported\\BTNItem_baothach"+I2S(lv)+".blp"
set uv=s
set s=null
return uv
endfunction
function WOe takes integer i,integer tJe,integer woe,integer WRe returns integer
if tJe==2 or tJe==5 or tJe==6 or tJe==7 or tJe==$A then
set mv=Ij[woe]+cEe[(1)*(20)+bRe[(i)*(20)+tJe]]
if WRe>0 then
set mv=mv+R2I($A+6*Pow(1.8,WRe-1))
endif
elseif tJe==1 or tJe==3 or tJe==9 or tJe==$B then
set mv=R2I(Ij[woe]*1.5)+cEe[(2)*(20)+bRe[(i)*(20)+tJe]]
if WRe>0 then
set mv=mv+R2I($F+9*Pow(1.8,WRe-1))
endif
else
set mv=Ij[woe]*4+cEe[(3)*(20)+bRe[(i)*(20)+tJe]]
if WRe>0 then
set mv=mv+R2I(40+24*Pow(1.8,WRe-1))
endif
endif
return mv
endfunction
function WIe takes item t,integer tJe,integer woe,integer WAe,integer Wxe,integer WNe,integer WRe returns string
local integer id=GetHandleId(t)
local string s=""
local integer a=0
set a=LoadInteger(IT,id,5034)
if a==1 then
set s=s+"
- Kháng vật công + "+I2S(R2I(I2R(20+$A*woe)*(1.+.1*WRe)))
endif
set a=LoadInteger(IT,id,611)
if a==1 then
set s=s+"
- Kháng độc công + "+I2S(R2I(I2R(20+$A*woe)*(1.+.1*WRe)))
endif
set a=LoadInteger(IT,id,Ax)
if a==1 then
set s=s+"
- Kháng băng công + "+I2S(R2I(I2R(20+$A*woe)*(1.+.1*WRe)))
endif
set a=LoadInteger(IT,id,7185)
if a==1 then
set s=s+"
- Kháng hỏa công + "+I2S(R2I(I2R(20+$A*woe)*(1.+.1*WRe)))
endif
set a=LoadInteger(IT,id,Nx)
if a==1 then
set s=s+"
- Kháng lôi công + "+I2S(R2I(I2R(20+$A*woe)*(1.+.1*WRe)))
endif
set a=LoadInteger(IT,id,572)
if a==1 then
set s=s+"
- Thời gian bị thọ thương - "+I2S(4+1*woe+1*WRe)+"%"
endif
set a=LoadInteger(IT,id,7896)
if a==1 then
set s=s+"
- Thời gian bị bất động - "+I2S(4+1*woe+1*WRe)+"%"
endif
set a=LoadInteger(IT,id,lx)
if a==1 then
set s=s+"
- Thời gian bị chậm - "+I2S(4+1*woe+1*WRe)+"%"
endif
set a=LoadInteger(IT,id,6210)
if a==1 then
set s=s+"
- Thời gian bị bỏng - "+I2S(4+1*woe+1*WRe)+"%"
endif
set a=LoadInteger(IT,id,6491)
if a==1 then
set s=s+"
- Thời gian bị choáng - "+I2S(4+1*woe+1*WRe)+"%"
endif
set a=LoadInteger(IT,id,5267)
if a==1 then
set s=s+"
- Sinh lực + "+I2S(R2I(I2R($3E8*woe)*(1.+.05*WRe)))
endif
set a=LoadInteger(IT,id,Px)
if a==1 then
set s=s+"
- Hiệu suất hồi phục sinh nội lực + "+I2S(2+4*woe+3*WRe)+"%"
endif
set a=LoadInteger(IT,id,5781)
if a==1 then
set s=s+"
- Tốc độ di chuyển + "+I2S(6+1*woe+1*WRe)
endif
set a=LoadInteger(IT,id,6780)
if a==1 then
set s=s+"
- Chính xác + "+I2S(R2I(I2R(20+30*woe)*(1.+.1*WRe)))
endif
set a=LoadInteger(IT,id,Lx)
if a==1 then
set s=s+"
- Phòng thủ + "+I2S(6+4*woe+3*WRe)
endif
if woe>=$A then
set s=s+"
- Sát thương hứng chịu, thu nhỏ "+I2S(5*(woe-9))+"%"
endif
if woe>=$D then
set s=s+"
- Sinh lực tối đa + 8%"
endif
set uv=s
set s=null
return uv
endfunction
function Wbe takes item t,integer tJe,integer woe,integer WAe,integer Wxe,integer WNe,integer WRe returns string
local integer id=GetHandleId(t)
local string s=""
local integer a=0
set a=LoadInteger(IT,id,5267)
if a==1 then
set s=s+"
- Sinh lực + "+I2S(R2I(I2R(500*woe)*(1.+.05*WRe)))
endif
set a=LoadInteger(IT,id,hx)
if a==1 then
set s=s+"
- Nội lực + "+I2S(R2I(I2R(300*woe)*(1.+.05*WRe)))
endif
set a=LoadInteger(IT,id,6780)
if a==1 then
set s=s+"
- Chính xác + "+I2S(R2I(I2R(20+30*woe)*(1.+.1*WRe)))
endif
set a=LoadInteger(IT,id,5762)
if a==1 then
set s=s+"
- Né tránh + "+I2S(R2I(I2R(30+20*woe)*(1.+.05*WRe)))
endif
set a=LoadInteger(IT,id,4888)
if a==1 then
set s=s+"
- Chí mạng + "+I2S(R2I(I2R(20+20*woe)*(1.+.05*WRe)))
endif
set a=LoadInteger(IT,id,mx)
if a==1 then
set s=s+"
- Kháng tất cả + "+I2S(R2I(I2R(40+$A*woe)*(1.+.05*WRe)))
endif
if woe>=$A then
set s=s+"
- Sát thương ngũ hành + "+I2S(50*(woe-9))+"%"
endif
if woe>=$D then
set s=s+"
- Kháng thời gian trạng thái ngũ hành + 8%"
endif
set uv=s
set s=null
return uv
endfunction
function WBe takes item t,integer tJe,integer woe,integer WAe,integer Wxe,integer WNe,integer WRe returns string
local integer id=GetHandleId(t)
local string s=""
local integer a=0
set a=LoadInteger(IT,id,px)
if a==1 then
set s=s+"
- Công kích nội ngoại công + "+I2S(R2I(I2R(50+50*woe)*(1.+.1*WRe)))
endif
set a=LoadInteger(IT,id,7695)
if a==1 then
set s=s+"
- Vật công + "+I2S(R2I(I2R(50*woe)*(1.+.1*WRe)))+"%"
endif
set a=LoadInteger(IT,id,5724)
if a==1 then
set s=s+"
- Độc công + "+I2S(R2I(I2R(50*woe)*(1.+.1*WRe)))+"%"
endif
set a=LoadInteger(IT,id,bx)
if a==1 then
set s=s+"
- Băng công + "+I2S(R2I(I2R(50*woe)*(1.+.1*WRe)))+"%"
endif
set a=LoadInteger(IT,id,Bx)
if a==1 then
set s=s+"
- Hỏa công + "+I2S(R2I(I2R(50*woe)*(1.+.1*WRe)))+"%"
endif
set a=LoadInteger(IT,id,cx)
if a==1 then
set s=s+"
- Lôi công + "+I2S(R2I(I2R(50*woe)*(1.+.1*WRe)))+"%"
endif
set a=LoadInteger(IT,id,6851)
if a==1 then
set s=s+"
- Thời gian gây thọ thương + "+I2S(8+2*woe+2*WRe)+"%"
endif
set a=LoadInteger(IT,id,'o')
if a==1 then
set s=s+"
- Thời gian gây bất động + "+I2S(8+2*woe+2*WRe)+"%"
endif
set a=LoadInteger(IT,id,Kx)
if a==1 then
set s=s+"
- Thời gian làm chậm + "+I2S(8+2*woe+2*WRe)+"%"
endif
set a=LoadInteger(IT,id,7537)
if a==1 then
set s=s+"
- Thời gian gây bỏng + "+I2S(8+2*woe+2*WRe)+"%"
endif
set a=LoadInteger(IT,id,4934)
if a==1 then
set s=s+"
- Thời gian gây choáng + "+I2S(8+2*woe+2*WRe)+"%"
endif
set a=LoadInteger(IT,id,4346)
if a==1 then
set s=s+"
- Tốc độ tấn công + "+I2S(7+3*woe+2*WRe)
endif
set a=LoadInteger(IT,id,Cx)
if a==1 then
set s=s+"
- Độc sát duy trì + "+I2S($C+3*woe+3*WRe)+"%"
endif
set a=LoadInteger(IT,id,ax)
if a==1 then
set s=s+"
- Sát thương chí mạng + "+I2S(8+2*woe+2*WRe)+"%"
endif
set a=LoadInteger(IT,id,6780)
if a==1 then
set s=s+"
- Chính xác + "+I2S(R2I(I2R(50+50*woe)*(1.+.05*WRe)))
endif
if woe>=$A then
set s=s+"
- Sát thương gây ra, khuếch đại "+I2S($F*(woe-9))+"%"
endif
if woe>=$D then
set s=s+"
- Tỉ lệ 10% gây ra trọng kích tăng tổng sát thương 20%"
endif
set uv=s
set s=null
return uv
endfunction
function Wce takes integer i,integer tJe,integer WRe,integer WCe returns string
local string s=""
local integer Wde=bRe[(i)*(20)+tJe]
local integer a=16
local integer b=0
if Wde>=1 then
set a=24
endif
if WRe>=4 then
set s=s+"|cff7fff00"+"
(+ 4)   Hiệu suất hồi phục sinh lực + "+I2S(a)+"%|r"
else
set s=s+"|cff6d6d6d"+"
(+ 4)   Hiệu suất hồi phục sinh lực + "+I2S(a)+"%|r"
endif
if Wde>=2 then
set a=$C
else
set a=8
endif
if WRe>=8 and WCe>=8 then
set s=s+"|cff7fff00"+"
(+ 8)   Sinh lực tối đa + "+I2S(a)+"%|r"
elseif WCe>=8 then
set s=s+"|cff6d6d6d"+"
(+ 8)   Sinh lực tối đa + "+I2S(a)+"%|r"
endif
set a=24
set b=$C8
if Wde>=3 then
set a=36
endif
if Wde>=4 then
set b=300
endif
if tJe==2 then
if WRe>=$C and WCe>=$C then
set s=s+"|cff7fff00"+"
(+ 12) Kháng thời gian bất động "+I2S(a)+"%|r"
elseif WCe>=$C then
set s=s+"|cff6d6d6d"+"
(+ 12) Kháng thời gian bất động "+I2S(a)+"%|r"
endif
if WRe>=16 and WCe>=16 then
set s=s+"|cff7fff00"+"
(+ 16) Kháng độc công + "+I2S(b)+"|r"
elseif WCe>=16 then
set s=s+"|cff6d6d6d"+"
(+ 16) Kháng độc công + "+I2S(b)+"|r"
endif
elseif tJe==6 then
if WRe>=$C and WCe>=$C then
set s=s+"|cff7fff00"+"
(+ 12) Kháng thời gian thọ thương "+I2S(a)+"%|r"
elseif WCe>=$C then
set s=s+"|cff6d6d6d"+"
(+ 12) Kháng thời gian thọ thương "+I2S(a)+"%|r"
endif
if WRe>=16 and WCe>=16 then
set s=s+"|cff7fff00"+"
(+ 16) Kháng vật công + "+I2S(b)+"|r"
elseif WCe>=16 then
set s=s+"|cff6d6d6d"+"
(+ 16) Kháng vật công + "+I2S(b)+"|r"
endif
elseif tJe==$A then
if WRe>=$C and WCe>=$C then
set s=s+"|cff7fff00"+"
(+ 12) Kháng thời gian chậm "+I2S(a)+"%|r"
elseif WCe>=$C then
set s=s+"|cff6d6d6d"+"
(+ 12) Kháng thời gian chậm "+I2S(a)+"%|r"
endif
if WRe>=16 and WCe>=16 then
set s=s+"|cff7fff00"+"
(+ 16) Kháng băng công + "+I2S(b)+"|r"
elseif WCe>=16 then
set s=s+"|cff6d6d6d"+"
(+ 16) Kháng băng công + "+I2S(b)+"|r"
endif
elseif tJe==7 then
if WRe>=$C and WCe>=$C then
set s=s+"|cff7fff00"+"
(+ 12) Kháng thời gian choáng "+I2S(a)+"%|r"
elseif WCe>=$C then
set s=s+"|cff6d6d6d"+"
(+ 12) Kháng thời gian choáng "+I2S(a)+"%|r"
endif
if WRe>=16 and WCe>=16 then
set s=s+"|cff7fff00"+"
(+ 16) Kháng lôi công + "+I2S(b)+"|r"
elseif WCe>=16 then
set s=s+"|cff6d6d6d"+"
(+ 16) Kháng lôi công + "+I2S(b)+"|r"
endif
elseif tJe==5 then
if WRe>=$C and WCe>=$C then
set s=s+"|cff7fff00"+"
(+ 12) Kháng thời gian bỏng "+I2S(a)+"%|r"
elseif WCe>=$C then
set s=s+"|cff6d6d6d"+"
(+ 12) Kháng thời gian bỏng "+I2S(a)+"%|r"
endif
if WRe>=16 and WCe>=16 then
set s=s+"|cff7fff00"+"
(+ 16) Kháng hỏa công + "+I2S(b)+"|r"
elseif WCe>=16 then
set s=s+"|cff6d6d6d"+"
(+ 16) Kháng hỏa công + "+I2S(b)+"|r"
endif
endif
set uv=s
set s=null
return uv
endfunction
function WDe takes integer i,integer tJe,integer WRe,integer WCe returns string
local string s=""
local integer Wde=bRe[(i)*(20)+tJe]
local integer a=20
if Wde>=1 then
set a=30
endif
if WRe>=4 then
set s=s+"|cff7fff00"+"
(+ 4)   Hiệu suất hồi phục nội lực + "+I2S(a)+"%|r"
else
set s=s+"|cff6d6d6d"+"
(+ 4)   Hiệu suất hồi phục nội lực + "+I2S(a)+"%|r"
endif
set a=$A
if Wde>=2 then
set a=$F
endif
if WRe>=8 and WCe>=8 then
set s=s+"|cff7fff00"+"
(+ 8)   Nội lực tối đa + "+I2S(a)+"%|r"
elseif WCe>=8 then
set s=s+"|cff6d6d6d"+"
(+ 8)   Nội lực tối đa + "+I2S(a)+"%|r"
endif
set a=16
if Wde>=3 then
set a=24
endif
if WRe>=$C and WCe>=$C then
set s=s+"|cff7fff00"+"
(+ 12) Chịu sát thương chí mạng - "+I2S(a)+"%|r"
elseif WCe>=$C then
set s=s+"|cff6d6d6d"+"
(+ 12) Chịu sát thương chí mạng - "+I2S(a)+"%|r"
endif
set a=90
if Wde>=4 then
set a=$91
endif
if WRe>=16 and WCe>=16 then
set s=s+"|cff7fff00"+"
(+ 16) Kháng tất cả + "+I2S(a)+"|r"
elseif WCe>=16 then
set s=s+"|cff6d6d6d"+"
(+ 16) Kháng tất cả + "+I2S(a)+"|r"
endif
set uv=s
set s=null
return uv
endfunction
function Wfe takes integer i,integer tJe,integer WRe,integer WCe returns string
local string s=""
local integer Wde=bRe[(i)*(20)+tJe]
local integer a=50
if Wde>=1 then
set a=75
endif
if WRe>=4 then
set s=s+"|cff7fff00"+"
(+ 4)   Phát huy lực tấn công kỹ năng "+I2S(a)+"%|r"
else
set s=s+"|cff6d6d6d"+"
(+ 4)   Phát huy lực tấn công kỹ năng "+I2S(a)+"%|r"
endif
set a=50
if Wde>=2 then
set a=75
endif
if WRe>=8 and WCe>=8 then
set s=s+"|cff7fff00"+"
(+ 8)   Phát huy lực tấn công cơ bản "+I2S(a)+"%|r"
elseif WCe>=8 then
set s=s+"|cff6d6d6d"+"
(+ 8)   Phát huy lực tấn công cơ bản "+I2S(a)+"%|r"
endif
set a=16
if Wde>=3 then
set a=24
endif
if WRe>=$C and WCe>=$C then
set s=s+"|cff7fff00"+"
(+ 12) Bỏ qua kháng tính kẻ địch "+I2S(a)+"%|r"
elseif WCe>=$C then
set s=s+"|cff6d6d6d"+"
(+ 12) Bỏ qua kháng tính kẻ địch "+I2S(a)+"%|r"
endif
set a=30
if Wde>=4 then
set a=45
endif
if WRe>=16 and WCe>=16 then
set s=s+"|cff7fff00"+"
(+ 16) Sát thương gây ra, khuếch đại "+I2S(a)+"%|r"
elseif WCe>=16 then
set s=s+"|cff6d6d6d"+"
(+ 16) Sát thương gây ra, khuếch đại "+I2S(a)+"%|r"
endif
set uv=s
set s=null
return uv
endfunction
function WFe takes integer i,item t,integer tJe,integer woe,integer WAe,integer Wxe,integer WNe,integer WRe,integer Wge,integer WGe,integer Whe returns nothing
local string s="Loại: "+cre[(WAe)*(20)+tJe]
local integer WHe=0
local integer Wje=S2I(SubString(I2S(Wge),1,3))
local integer WJe=S2I(SubString(I2S(WGe),1,3))
local integer Wke=S2I(SubString(I2S(Whe),1,3))
local integer WKe=S2I(SubString(I2S(Wge),0,1))-1
local integer Wle=S2I(SubString(I2S(WGe),0,1))-1
local integer WLe=S2I(SubString(I2S(Whe),0,1))-1
set s=s+"
Cấp: "+Rj[woe]+"|cffffcc00"+" ("+I2S(woe)+")|r"
if woe>0 then
set s=s+"
Ngũ hành: "+cie[(0)*(20)+Wxe]
set WHe=WOe(i,tJe,woe,WRe)
set s=s+"
Tài phú: "+I2S(WHe)
set s=s+"

"
call SaveInteger(IT,GetHandleId(t),Lo,WHe)
if Wje==0 then
set s=s+"|cff6d6d6d"+"$ Chưa khảm (0/8)|r"
else
set s=s+"|cffffcc00"+"$ "+WVe(Wje,i)+I2S(R2I(I2R(Wne(Wje))*(1.+.5*WKe)))+Wae(Wje)+" ("+I2S(WEe(Wje)+WKe)+"/"+I2S(8+WKe)+")|r"
endif
set s=s+"
"
if WJe==0 then
set s=s+"|cff6d6d6d"+"$ Chưa khảm (0/8)|r"
else
set s=s+"|cffffcc00"+"$ "+WVe(WJe,i)+I2S(R2I(I2R(Wne(WJe))*(1.+.5*Wle)))+Wae(WJe)+" ("+I2S(WEe(WJe)+Wle)+"/"+I2S(8+Wle)+")|r"
endif
set s=s+"
"
if Wke==0 then
set s=s+"|cff6d6d6d"+"$ Chưa khảm (0/8)|r"
else
set s=s+"|cffffcc00"+"$ "+WVe(Wke,i)+I2S(R2I(I2R(Wne(Wke))*(1.+.5*WLe)))+Wae(Wke)+" ("+I2S(WEe(Wke)+WLe)+"/"+I2S(8+WLe)+")|r"
endif
set s=s+"

|cff0078d7Thuộc tính trang bị|r"
if tJe==2 or tJe==5 or tJe==6 or tJe==7 or tJe==$A then
set s=s+"|cff7fff00"+WIe(t,tJe,woe,WAe,Wxe,WNe,WRe)+"|r"
if bRe[(i)*(20)+tJe]<1 then
set s=s+"

|cff0078d7Cường hóa ("+I2S(WRe)+"/"+I2S(Aj[woe])+")|r"
else
set s=s+"

|cff0078d7Cường hóa ("+I2S(WRe)+"/"+I2S(Aj[woe])+") (Tinh chú "+Kj[bRe[(i)*(20)+tJe]]+")|r"
endif
set s=s+Wce(i,tJe,WRe,Aj[woe])
elseif tJe==1 or tJe==3 or tJe==9 or tJe==$B then
set s=s+"|cff7fff00"+Wbe(t,tJe,woe,WAe,Wxe,WNe,WRe)+"|r"
if bRe[(i)*(20)+tJe]<1 then
set s=s+"

|cff0078d7Cường hóa ("+I2S(WRe)+"/"+I2S(Aj[woe])+")|r"
else
set s=s+"

|cff0078d7Cường hóa ("+I2S(WRe)+"/"+I2S(Aj[woe])+") (Tinh chú "+Kj[bRe[(i)*(20)+tJe]]+")|r"
endif
set s=s+WDe(i,tJe,WRe,Aj[woe])
elseif tJe==8 then
set s=s+"|cff7fff00"+WBe(t,tJe,woe,WAe,Wxe,WNe,WRe)+"|r"
if bRe[(i)*(20)+tJe]<1 then
set s=s+"

|cff0078d7Cường hóa ("+I2S(WRe)+"/"+I2S(Aj[woe])+")|r"
else
set s=s+"

|cff0078d7Cường hóa ("+I2S(WRe)+"/"+I2S(Aj[woe])+") (Tinh chú "+Kj[bRe[(i)*(20)+tJe]]+")|r"
endif
set s=s+Wfe(i,tJe,WRe,Aj[woe])
endif
else
set s=s+"

|cff0078d7Trang bị thô không có thuộc tính, chỉ dùng để chế tạo|r"
endif
call BlzSetItemExtendedTooltip(t,s)
call BlzSetItemDescription(t,s)
set s=null
endfunction
function Wme takes integer i,item t returns nothing
local integer id=GetHandleId(t)
local integer tJe=LoadInteger(IT,id,5789)
local integer woe=LoadInteger(IT,id,4386)
local integer Wxe=LoadInteger(IT,id,5563)
local integer WAe=LoadInteger(IT,id,lo)
local integer WNe=LoadInteger(IT,id,8105)
local integer WRe=LoadInteger(IT,id,7774)
local integer Wje=LoadInteger(IT,id,6119)
local integer WJe=LoadInteger(IT,id,6036)
local integer Wke=LoadInteger(IT,id,5621)
local string Uae=""
if WRe>0 then
if WAe==0 then
set Uae=Xj[woe]+BlzGetAbilityTooltip(aJ[tJe],woe-1)+" +"+I2S(WRe)+"
"+Oj[woe]+"|r"
else
set Uae=Xj[woe]+BlzGetAbilityTooltip(nJ[WAe],woe-1)+" +"+I2S(WRe)+"
"+Oj[woe]+"|r"
endif
else
if WAe==0 then
set Uae=Xj[woe]+BlzGetAbilityTooltip(aJ[tJe],woe-1)+"
"+Oj[woe]+"|r"
else
set Uae=Xj[woe]+BlzGetAbilityTooltip(nJ[WAe],woe-1)+"
"+Oj[woe]+"|r"
endif
endif
call BlzSetItemName(t,Uae)
call BlzSetItemIconPath(t,"war3mapImported\\BTN"+coe[(WAe)*(20)+tJe]+I2S(woe)+".blp")
call WFe(i,t,tJe,woe,WAe,Wxe,WNe,WRe,Wje,WJe,Wke)
endfunction
function WMe takes integer i,integer tJe,integer WAe,real x,real y returns item
local item t=CreateItem('I000',x,y)
local integer id=GetHandleId(t)
local string Uae=BlzGetAbilityTooltip(aJ[tJe],0)+" - Thô"
call SaveInteger(IT,id,5789,tJe)
call SaveInteger(IT,id,4386,0)
call SaveInteger(IT,id,lo,WAe)
if WAe!=0 then
set Uae=BlzGetAbilityTooltip(nJ[WAe],0)+" - Thô"
endif
call BlzSetItemName(t,Uae)
call BlzSetItemIconPath(t,"war3mapImported\\BTN"+coe[(WAe)*(20)+tJe]+I2S(1)+".blp")
call WFe(i,t,tJe,0,WAe,0,0,0,0,0,0)
call SetItemInvulnerable(t,true)
set Sv=t
set t=null
return Sv
endfunction
function Wpe takes integer i,integer tJe,integer woe,integer WAe,integer Wxe,integer WNe,integer WRe,integer Wje,integer WJe,integer Wke,real x,real y returns item
local item t=CreateItem('I000',x,y)
local integer id=GetHandleId(t)
local string Uae=""
local integer k=$F4240+tJe*$2710+Wxe*'d'+WNe
local integer a=0
call SaveInteger(IT,id,5789,tJe)
call SaveInteger(IT,id,4386,woe)
call SaveInteger(IT,id,5563,Wxe)
call SaveInteger(IT,id,lo,WAe)
call SaveInteger(IT,id,8105,WNe)
call SaveInteger(IT,id,7774,WRe)
call SaveInteger(IT,id,6119,Wje)
call SaveInteger(IT,id,6036,WJe)
call SaveInteger(IT,id,5621,Wke)
set a=LoadInteger(UH,k,18)
if a!=0 then
call SaveInteger(IT,id,a,1)
endif
set a=LoadInteger(UH,k,Ge)
if a!=0 then
call SaveInteger(IT,id,a,1)
endif
set a=LoadInteger(UH,k,552)
if a!=0 then
call SaveInteger(IT,id,a,1)
endif
set a=LoadInteger(UH,k,he)
if a!=0 then
call SaveInteger(IT,id,a,1)
endif
if WRe>0 then
if WAe==0 then
set Uae=Xj[woe]+BlzGetAbilityTooltip(aJ[tJe],woe-1)+" +"+I2S(WRe)+"
"+Oj[woe]+"|r"
else
set Uae=Xj[woe]+BlzGetAbilityTooltip(nJ[WAe],woe-1)+" +"+I2S(WRe)+"
"+Oj[woe]+"|r"
endif
else
if WAe==0 then
set Uae=Xj[woe]+BlzGetAbilityTooltip(aJ[tJe],woe-1)+"
"+Oj[woe]+"|r"
else
set Uae=Xj[woe]+BlzGetAbilityTooltip(nJ[WAe],woe-1)+"
"+Oj[woe]+"|r"
endif
endif
call BlzSetItemName(t,Uae)
call BlzSetItemIconPath(t,"war3mapImported\\BTN"+coe[(WAe)*(20)+tJe]+I2S(woe)+".blp")
call WFe(i,t,tJe,woe,WAe,Wxe,WNe,WRe,Wje,WJe,Wke)
call SetItemInvulnerable(t,true)
set Sv=t
set t=null
set Uae=null
return Sv
endfunction
function WPe takes integer a,integer b returns string
if a>=b then
return "|cff7fff00"
else
return "|cff6d6d6d"
endif
endfunction
function Wqe takes integer i,integer k returns nothing
local string s=""
if k==1 then
set s=s+"|cffffcc00"+"[ Thuộc Tính Nhâm Mạch ]|r
"
set s=s+"- Sinh lực tối đa + "+I2S(cbe[(i)*(20)+1]*$3E8)+"

"
set s=s+"|cffffcc00"+"[ Kinh Mạch Đả Thông ]|r
"
set s=s+WPe(cbe[(i)*(20)+1],1)+"1. Ngọc Đường [1000]|r
"
set s=s+WPe(cbe[(i)*(20)+1],2)+"2. Tử Cấm [1000]|r
"
set s=s+WPe(cbe[(i)*(20)+1],3)+"3. Ngân Giao [1000]|r
"
set s=s+WPe(cbe[(i)*(20)+1],4)+"4. Đoái Thụy [1000]|r
"
set s=s+WPe(cbe[(i)*(20)+1],5)+"5. Thủy Câu [1000]|r
"
set s=s+WPe(cbe[(i)*(20)+1],6)+"6. Thần Đinh [1000]|r
"
set s=s+WPe(cbe[(i)*(20)+1],7)+"7. Thượng Tinh [1000]|r
"
set s=s+WPe(cbe[(i)*(20)+1],8)+"8. Tiền Hạng [1000]|r

"
set s=s+"|cffadd8e6Tăng cấp yêu cầu:
- 1 điểm kinh mạch
- [ tổng số tầng kinh mạch đã tăng ] x 10000 chân khí"
set Mo=s
set po="|cff7fff00"+"Nhâm Mạch [ Tầng "+I2S(cbe[(i)*(20)+1])+" ]|r"
endif
if k==2 then
set s="|cffffcc00"+"[ Thuộc Tính Đốc Mạch ]|r
"
set s=s+"- Nội lực tối đa + "+I2S(cbe[(i)*(20)+2]*500)+"

"
set s=s+"|cffffcc00"+"[ Kinh Mạch Đả Thông ]|r
"
set s=s+WPe(cbe[(i)*(20)+2],1)+"1. Bách Hội [500]|r
"
set s=s+WPe(cbe[(i)*(20)+2],2)+"2. Thần Đạo [500]|r
"
set s=s+WPe(cbe[(i)*(20)+2],3)+"3. Đại Chùy [500]|r
"
set s=s+WPe(cbe[(i)*(20)+2],4)+"4. Linh Đài [500]|r
"
set s=s+WPe(cbe[(i)*(20)+2],5)+"5. Trung Xu [500]|r
"
set s=s+WPe(cbe[(i)*(20)+2],6)+"6. Tích Trung [500]|r
"
set s=s+WPe(cbe[(i)*(20)+2],7)+"7. Huyền Xu [500]|r
"
set s=s+WPe(cbe[(i)*(20)+2],8)+"8. Mệnh Môn [500]|r

"
set s=s+"|cffadd8e6Tăng cấp yêu cầu:
- 1 điểm kinh mạch
- [ tổng số tầng kinh mạch đã tăng ] x 10000 chân khí"
set Mo=s
set po="|cff7fff00"+"Đốc Mạch [ Tầng "+I2S(cbe[(i)*(20)+2])+" ]|r"
endif
if k==3 then
set s="|cffffcc00"+"[ Thuộc Tính Đới Mạch ]|r
"
set s=s+"- Phát huy lực tấn công cơ bản "+I2S(cbe[(i)*(20)+3]*8)+"%

"
set s=s+"|cffffcc00"+"[ Kinh Mạch Đả Thông ]|r
"
set s=s+WPe(cbe[(i)*(20)+3],1)+"1. Ngũ Xu [8%]|r
"
set s=s+WPe(cbe[(i)*(20)+3],2)+"2. Thiên Xung [8%]|r
"
set s=s+WPe(cbe[(i)*(20)+3],3)+"3. Phù Bạch [8%]|r
"
set s=s+WPe(cbe[(i)*(20)+3],4)+"4. Bổn Thần [8%]|r
"
set s=s+WPe(cbe[(i)*(20)+3],5)+"5. Mục Song [8%]|r
"
set s=s+WPe(cbe[(i)*(20)+3],6)+"6. Ngoại Khưu [8%]|r
"
set s=s+WPe(cbe[(i)*(20)+3],7)+"7. Huyền Chung [8%]|r
"
set s=s+WPe(cbe[(i)*(20)+3],8)+"8. Khưu Khư [8%]|r

"
set s=s+"|cffadd8e6Tăng cấp yêu cầu:
- 1 điểm kinh mạch
- [ tổng số tầng kinh mạch đã tăng ] x 10000 chân khí"
set Mo=s
set po="|cff7fff00"+"Đới Mạch [ Tầng "+I2S(cbe[(i)*(20)+3])+" ]|r"
endif
if k==4 then
set s="|cffffcc00"+"[ Thuộc Tính Xung Mạch ]|r
"
set s=s+"- Phát huy lực tấn công kỹ năng "+I2S(cbe[(i)*(20)+4]*8)+"%

"
set s=s+"|cffffcc00"+"[ Kinh Mạch Đả Thông ]|r
"
set s=s+WPe(cbe[(i)*(20)+4],1)+"1. U Môn [8%]|r
"
set s=s+WPe(cbe[(i)*(20)+4],2)+"2. Âm Đô [8%]|r
"
set s=s+WPe(cbe[(i)*(20)+4],3)+"3. Thạch Quan [8%]|r
"
set s=s+WPe(cbe[(i)*(20)+4],4)+"4. Thương Khúc [8%]|r
"
set s=s+WPe(cbe[(i)*(20)+4],5)+"5. Trung Chú [8%]|r
"
set s=s+WPe(cbe[(i)*(20)+4],6)+"6. Tứ Mãn [8%]|r
"
set s=s+WPe(cbe[(i)*(20)+4],7)+"7. Khí Huyệt [8%]|r
"
set s=s+WPe(cbe[(i)*(20)+4],8)+"8. Đại Hách [8%]|r

"
set s=s+"|cffadd8e6Tăng cấp yêu cầu:
- 1 điểm kinh mạch
- [ tổng số tầng kinh mạch đã tăng ] x 10000 chân khí"
set Mo=s
set po="|cff7fff00"+"Xung Mạch [ Tầng "+I2S(cbe[(i)*(20)+4])+" ]|r"
endif
if k==5 then
set s="|cffffcc00"+"[ Thuộc Tính Âm Duy ]|r
"
set s=s+"- Sát thương ngũ hành + "+I2S(cbe[(i)*(20)+5]*30)+"%

"
set s=s+"|cffffcc00"+"[ Kinh Mạch Đả Thông ]|r
"
set s=s+WPe(cbe[(i)*(20)+5],1)+"1. Liêm Tuyền [30%]|r
"
set s=s+WPe(cbe[(i)*(20)+5],2)+"2. Thiên Đột [30%]|r
"
set s=s+WPe(cbe[(i)*(20)+5],3)+"3. Kỳ Môn [30%]|r
"
set s=s+WPe(cbe[(i)*(20)+5],4)+"4. Phúc Ai [30%]|r
"
set s=s+WPe(cbe[(i)*(20)+5],5)+"5. Đại Hoành [30%]|r
"
set s=s+WPe(cbe[(i)*(20)+5],6)+"6. Phủ Xá [30%]|r
"
set s=s+WPe(cbe[(i)*(20)+5],7)+"7. Xung Môn [30%]|r
"
set s=s+WPe(cbe[(i)*(20)+5],8)+"8. Trúc Tân [30%]|r

"
set s=s+"|cffadd8e6Tăng cấp yêu cầu:
- 1 điểm kinh mạch
- [ tổng số tầng kinh mạch đã tăng ] x 10000 chân khí"
set Mo=s
set po="|cff7fff00"+"Âm Duy [ Tầng "+I2S(cbe[(i)*(20)+5])+" ]|r"
endif
if k==6 then
set s="|cffffcc00"+"[ Thuộc Tính Dương Duy ]|r
"
set s=s+"- Sát thương chí mạng + "+I2S(cbe[(i)*(20)+6]*4)+"%

"
set s=s+"|cffffcc00"+"[ Kinh Mạch Đả Thông ]|r
"
set s=s+WPe(cbe[(i)*(20)+6],1)+"1. Phong Tri [4%]|r
"
set s=s+WPe(cbe[(i)*(20)+6],2)+"2. Tinh Minh [4%]|r
"
set s=s+WPe(cbe[(i)*(20)+6],3)+"3. Địa Thương [4%]|r
"
set s=s+WPe(cbe[(i)*(20)+6],4)+"4. Cự Cốt [4%]|r
"
set s=s+WPe(cbe[(i)*(20)+6],5)+"5. Trung Mạch [4%]|r
"
set s=s+WPe(cbe[(i)*(20)+6],6)+"6. Bộc Tham [4%]|r
"
set s=s+WPe(cbe[(i)*(20)+6],7)+"7. Ngũ Xứ [4%]|r
"
set s=s+WPe(cbe[(i)*(20)+6],8)+"8. Thừa Quang [4%]|r

"
set s=s+"|cffadd8e6Tăng cấp yêu cầu:
- 1 điểm kinh mạch
- [ tổng số tầng kinh mạch đã tăng ] x 10000 chân khí"
set Mo=s
set po="|cff7fff00"+"Dương Duy [ Tầng "+I2S(cbe[(i)*(20)+6])+" ]|r"
endif
if k==7 then
set s="|cffffcc00"+"[ Thuộc Tính Âm Nghiêu ]|r
"
set s=s+"- Chịu sát thương chí mạng - "+I2S(cbe[(i)*(20)+7]*4)+"%

"
set s=s+"|cffffcc00"+"[ Kinh Mạch Đả Thông ]|r
"
set s=s+WPe(cbe[(i)*(20)+7],1)+"1. Nội Quan [4%]|r
"
set s=s+WPe(cbe[(i)*(20)+7],2)+"2. Thiên Đột [4%]|r
"
set s=s+WPe(cbe[(i)*(20)+7],3)+"3. Phụ Xá [4%]|r
"
set s=s+WPe(cbe[(i)*(20)+7],4)+"4. Trúc Tân [4%]|r
"
set s=s+WPe(cbe[(i)*(20)+7],5)+"5. Thiếu Phủ [4%]|r
"
set s=s+WPe(cbe[(i)*(20)+7],6)+"6. Thủy Phân [4%]|r
"
set s=s+WPe(cbe[(i)*(20)+7],7)+"7. Trung Cấp [4%]|r
"
set s=s+WPe(cbe[(i)*(20)+7],8)+"8. Khúc Cốt [4%]|r

"
set s=s+"|cffadd8e6Tăng cấp yêu cầu:
- 1 điểm kinh mạch
- [ tổng số tầng kinh mạch đã tăng ] x 10000 chân khí"
set Mo=s
set po="|cff7fff00"+"Âm Nghiêu [ Tầng "+I2S(cbe[(i)*(20)+7])+" ]|r"
endif
if k==8 then
set s="|cffffcc00"+"[ Thuộc Tính Dương Nghiêu ]|r
"
set s=s+"- Kháng tất cả + "+I2S(cbe[(i)*(20)+8]*20)+"

"
set s=s+"|cffffcc00"+"[ Kinh Mạch Đả Thông ]|r
"
set s=s+WPe(cbe[(i)*(20)+8],1)+"1. ách Môn [20]|r
"
set s=s+WPe(cbe[(i)*(20)+8],2)+"2. Phong Tri [20]|r
"
set s=s+WPe(cbe[(i)*(20)+8],3)+"3. Chính Doanh [20]|r
"
set s=s+WPe(cbe[(i)*(20)+8],4)+"4. Mục Song [20]|r
"
set s=s+WPe(cbe[(i)*(20)+8],5)+"5. Dương Bạch [20]|r
"
set s=s+WPe(cbe[(i)*(20)+8],6)+"6. Đầu Duy [20]|r
"
set s=s+WPe(cbe[(i)*(20)+8],7)+"7. Thiên Liêu [20]|r
"
set s=s+WPe(cbe[(i)*(20)+8],8)+"8. Dương Giao [20]|r

"
set s=s+"|cffadd8e6Tăng cấp yêu cầu:
- 1 điểm kinh mạch
- [ tổng số tầng kinh mạch đã tăng ] x 10000 chân khí"
set Mo=s
set po="|cff7fff00"+"Dương Nghiêu [ Tầng "+I2S(cbe[(i)*(20)+8])+" ]|r"
endif
set s=null
if cbe[(i)*(20)+k]==8 then
set Po="war3mapImported\\FrameUI_KMButton2.tga"
else
set Po="war3mapImported\\FrameUI_KMButton1.tga"
endif
endfunction
function WQe takes unit u,integer lv,real s returns nothing
if lv==1 then
call TZe(u,$3E8*s)
elseif lv==2 then
call T3e(u,500*s)
elseif lv==3 then
call Tje(u,5319,.08*s)
elseif lv==4 then
call Tje(u,vx,.08*s)
elseif lv==5 then
call Tje(u,5724,.3*s)
call Tje(u,bx,.3*s)
call Tje(u,Bx,.3*s)
call Tje(u,cx,.3*s)
call Tje(u,7695,.3*s)
elseif lv==6 then
call Tje(u,ax,.04*s)
elseif lv==7 then
call Tje(u,Vx,.04*s)
elseif lv==8 then
call Tue(u,20*s)
endif
endfunction
function Wse takes unit u,integer i,integer s returns nothing
local player p=GetOwningPlayer(u)
local integer km=cbe[(i)*(20)+1]+cbe[(i)*(20)+2]+cbe[(i)*(20)+3]+cbe[(i)*(20)+4]+cbe[(i)*(20)+5]+cbe[(i)*(20)+6]+cbe[(i)*(20)+7]+cbe[(i)*(20)+8]
if km<64 then
if cbe[(i)*(20)+s]<8 then
if tFe(i,(km+1)*sH,0)then
if tde(i,1,0)then
call tFe(i,(km+1)*sH,De)
call tde(i,1,De)
set cbe[(i)*(20)+s]=cbe[(i)*(20)+s]+1
call WQe(u,s,1)
call Wqe(i,s)
set hi=true
set bZe[(i-1)*(8)+s]=po
set b_e[(i-1)*(8)+s]="
"+Mo
set b0e[(i-1)*(8)+s]=Po
call Qke(p,"|cffffcc00"+"Tu luyện kinh mạch thành công !",5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIam\\AIamTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
else
call Qke(p,"|cffffcc00"+"Điểm kinh mạch không đủ để xung huyệt vị !",5)
endif
else
call Qke(p,"|cffffcc00"+"Chân khí không đủ để xung huyệt vị: "+I2S((km+1)*sH),5)
endif
else
call Qke(p,"|cffffcc00"+"Đại mạch này đã đạt cấp tối đa !",5)
endif
else
call Qke(p,"|cffffcc00"+"Toàn bộ huyệt mạch đã được đả thông",5)
endif
set p=null
endfunction
function WSe takes unit u,integer i returns nothing
local player p=GetOwningPlayer(u)
if cbe[(i)*(20)+1]>0 and cbe[(i)*(20)+1]<=8 then
call WQe(XJ[i],1,cbe[(i)*(20)+1])
call Wqe(i,1)
set bZe[(i-1)*(8)+1]=po
set b_e[(i-1)*(8)+1]="
"+Mo
set b0e[(i-1)*(8)+1]=Po
if GetLocalPlayer()==p then
call Uge(bYe[1],Po)
endif
endif
if cbe[(i)*(20)+2]>0 and cbe[(i)*(20)+2]<=8 then
call WQe(XJ[i],2,cbe[(i)*(20)+2])
call Wqe(i,2)
set bZe[(i-1)*(8)+2]=po
set b_e[(i-1)*(8)+2]="
"+Mo
set b0e[(i-1)*(8)+2]=Po
if GetLocalPlayer()==p then
call Uge(bYe[2],Po)
endif
endif
if cbe[(i)*(20)+3]>0 and cbe[(i)*(20)+3]<=8 then
call WQe(XJ[i],3,cbe[(i)*(20)+3])
call Wqe(i,3)
set bZe[(i-1)*(8)+3]=po
set b_e[(i-1)*(8)+3]="
"+Mo
set b0e[(i-1)*(8)+3]=Po
if GetLocalPlayer()==p then
call Uge(bYe[3],Po)
endif
endif
if cbe[(i)*(20)+4]>0 and cbe[(i)*(20)+4]<=8 then
call WQe(XJ[i],4,cbe[(i)*(20)+4])
call Wqe(i,4)
set bZe[(i-1)*(8)+4]=po
set b_e[(i-1)*(8)+4]="
"+Mo
set b0e[(i-1)*(8)+4]=Po
if GetLocalPlayer()==p then
call Uge(bYe[4],Po)
endif
endif
if cbe[(i)*(20)+5]>0 and cbe[(i)*(20)+5]<=8 then
call WQe(XJ[i],5,cbe[(i)*(20)+5])
call Wqe(i,5)
set bZe[(i-1)*(8)+5]=po
set b_e[(i-1)*(8)+5]="
"+Mo
set b0e[(i-1)*(8)+5]=Po
if GetLocalPlayer()==p then
call Uge(bYe[5],Po)
endif
endif
if cbe[(i)*(20)+6]>0 and cbe[(i)*(20)+6]<=8 then
call WQe(XJ[i],6,cbe[(i)*(20)+6])
call Wqe(i,6)
set bZe[(i-1)*(8)+6]=po
set b_e[(i-1)*(8)+6]="
"+Mo
set b0e[(i-1)*(8)+6]=Po
if GetLocalPlayer()==p then
call Uge(bYe[6],Po)
endif
endif
if cbe[(i)*(20)+7]>0 and cbe[(i)*(20)+7]<=8 then
call WQe(XJ[i],7,cbe[(i)*(20)+7])
call Wqe(i,7)
set bZe[(i-1)*(8)+7]=po
set b_e[(i-1)*(8)+7]="
"+Mo
set b0e[(i-1)*(8)+7]=Po
if GetLocalPlayer()==p then
call Uge(bYe[7],Po)
endif
endif
if cbe[(i)*(20)+8]>0 and cbe[(i)*(20)+8]<=8 then
call WQe(XJ[i],8,cbe[(i)*(20)+8])
call Wqe(i,8)
set bZe[(i-1)*(8)+8]=po
set b_e[(i-1)*(8)+8]="
"+Mo
set b0e[(i-1)*(8)+8]=Po
if GetLocalPlayer()==p then
call Uge(bYe[8],Po)
endif
endif
set p=null
endfunction
function Wte takes integer tJe returns string
if tJe==1 then
return "|cff7fff00"+"Cam Lộ Quyết"
elseif tJe==2 then
return "|cff7fff00"+"Ngũ Hành Quyết"
elseif tJe==3 then
return "|cff7fff00"+"Quy Tức"
elseif tJe==4 then
return "|cff7fff00"+"Lợi Nhẫn"
elseif tJe==5 then
return "|cff7fff00"+"Trường Sinh"
elseif tJe==6 then
return "|cff7fff00"+"Hàng Long Thức"
elseif tJe==7 then
return "|cff7fff00"+"Phục Hổ Thức"
elseif tJe==8 then
return "|cff7fff00"+"Cản Thiền"
elseif tJe==9 then
return "|cff7fff00"+"Thiết Giáp"
elseif tJe==$A then
return "|cff7fff00"+"Dưỡng Khí"
else
return "|cff7fff00"+"Ngự Mã Quyết"
endif
endfunction
function WTe takes integer tJe,integer lv returns string
if tJe==1 then
return"Khi sinh lực giảm còn |cffadd8e650%|r phát động mỗi nửa giây hồi phục |cffadd8e6"+I2S(3+2*lv)+"%|r sinh lực, duy trì |cffadd8e610|r giây, giãn cách |cffadd8e6180|r giây"
elseif tJe==2 then
return"Khi sinh lực giảm còn |cffadd8e650%|r phát động thu nhỏ sát thương nhận vào |cffadd8e6"+I2S(25*lv)+"%|r trong |cffadd8e65|r giây, giãn cách |cffadd8e6180|r giây"
elseif tJe==3 then
return"Công kích ngoại công của chủ nhân tăng |cffadd8e6"+I2S($8C*lv)+"|r"
elseif tJe==4 then
return"Công kích nội công của chủ nhân tăng |cffadd8e6"+I2S($8C*lv)+"|r"
elseif tJe==5 then
return"Sinh lực tối đa của chủ nhân tăng |cffadd8e6"+I2S($7D0*lv)+"|r"
elseif tJe==6 then
return"Khi tấn công có xác suất |cffadd8e610%|r phát động khuếch đại sát thương gây ra |cffadd8e6"+I2S($F*lv)+"%|r trong |cffadd8e65|r giây"
elseif tJe==7 then
return"Khi tấn công có xác suất |cffadd8e610%|r phát động tăng chí mạng |cffadd8e6"+I2S('d'*lv)+"|r trong |cffadd8e65|r giây"
elseif tJe==8 then
return"Né tránh của chủ nhân tăng |cffadd8e6"+I2S(50+50*lv)+"|r"
elseif tJe==9 then
return"Tất cả kháng tính của chủ nhân tăng |cffadd8e6"+I2S(50+50*lv)+"|r"
elseif tJe==$A then
return"Nội lực tối đa của chủ nhân tăng |cffadd8e6"+I2S($3E8*lv)+"|r"
else
return"Khi cưỡi ngựa gia tăng cho chủ nhân khuếch đại sát thương gây ra |cffadd8e6"+I2S(7*lv)+"%|r"
endif
endfunction
function Wue takes integer woe,integer tJe,real x,real y returns item
local item t=CreateItem('I0AJ',x,y)
local integer id=GetHandleId(t)
local string s="Loại: kỹ năng quyển thú cưỡi
"
set s=s+"Cấp: "+I2S(woe)+"/3

"
call SaveInteger(IT,id,qo,tJe)
call SaveInteger(IT,id,6832,woe)
set s=s+"|cffadd8e6"+"Chuột trái sử dụng để học kỹ năng cho thú cưỡi gia tăng thuộc tính cho chủ nhân. Mỗi thú cưỡi chỉ có thể học tối đa 4 kỹ năng và không thể trùng nhau|r
"
set s=s+"|cffffcc00"+"(Số lượng kỹ năng có thể học tối đa dựa vào căn cốt của thú cưỡi ở các mốc 100,200,300,400)|r

"
call BlzSetItemDescription(t,s)
set s=s+"|cff0078d7"+"Kỹ năng |r"+Wte(tJe)+" (cấp "+I2S(woe)+")|r
- "+WTe(tJe,woe)+"

"
set s=s+"|cffffcc00"+"(Để tăng cấp độ kỹ năng cho thú cưỡi cần tìm kỹ năng quyển tương ứng có cấp độ cao hơn, tiến cấp tối đa cấp 3)|r"
call BlzSetItemExtendedTooltip(t,s)
call BlzSetItemName(t,Wte(tJe)+" (cấp "+I2S(woe)+")|r")
call SetItemInvulnerable(t,true)
set Sv=t
set t=null
set s=null
return Sv
endfunction
function WUe takes unit u,integer tJe,integer lv,real r,boolean b returns nothing
if tJe==1 then
if b then
call Tje(u,Qo,r*(.03+.02*lv))
else
call Tje(u,Qo,r*.02*lv)
endif
elseif tJe==2 then
call Tje(u,7062,r*.25*lv)
elseif tJe==3 then
call T5e(u,r*$8C*lv)
elseif tJe==4 then
call T6e(u,r*$8C*lv)
elseif tJe==5 then
call TZe(u,r*$7D0*lv)
elseif tJe==6 then
call Tje(u,so,r*.15*lv)
elseif tJe==7 then
call Tje(u,4620,r*'d'*lv)
elseif tJe==8 then
if b then
call Tje(u,5762,r*(50+50*lv))
else
call Tje(u,5762,r*50*lv)
endif
elseif tJe==9 then
if b then
call Tue(u,r*(50+50*lv))
else
call Tue(u,r*50*lv)
endif
elseif tJe==$A then
call T3e(u,r*$3E8*lv)
else
call Tje(u,6733,r*.07*lv)
endif
endfunction
function Wwe takes integer i,integer n,integer tJe,integer woe returns nothing
local string s="- "+WTe(tJe,woe)
set eC=Wte(tJe)+" (cấp "+I2S(woe)+")|r"
set xC=s
set oC="war3mapImported\\BTNSkillTC_"+I2S(tJe)+".blp"
set s=null
endfunction
function WWe takes unit u,integer i,integer w5e returns boolean
local player p=GetOwningPlayer(u)
local integer Wye=4
if w5e=='I0AK' then
set Wye=1
elseif w5e=='I0AL' then
set Wye=2
elseif w5e=='I0AM' then
set Wye=3
endif
if bIe[(i)*(20)+Wye]==0 then
call Qke(p,"|cffffcc00"+"Tại ô này vẫn chưa học kỹ năng thú cưỡi !",5)
set p=null
return false
endif
if tHe(i,$C350*bAe[(i)*(20)+Wye],0)and tFe(i,$7530*bAe[(i)*(20)+Wye],0)then
call tHe(i,$C350*bAe[(i)*(20)+Wye],De)
call tFe(i,$7530*bAe[(i)*(20)+Wye],De)
call WUe(u,bIe[(i)*(20)+Wye],bAe[(i)*(20)+Wye],De,true)
set BSe[(i-1)*(16)+Wye+$C]=0
set Bte[(i-1)*(16)+Wye+$C]=null
set BTe[(i-1)*(16)+Wye+$C]=null
set oC="war3mapImported\\BTNFrameUI_item_tuyethoc.blp"
if GetLocalPlayer()==p then
call Uge(Bse[Wye+$C],oC)
call BlzFrameSetVisible(yc,true)
call BlzFrameSetVisible(yc,false)
endif
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã xóa bỏ kỹ năng thú cưỡi ở ô thứ "+I2S(Wye),5)
set bIe[(i)*(20)+Wye]=0
set bAe[(i)*(20)+Wye]=0
else
call Qke(p,"|cffffcc00"+"Không đủ bạc hoặc chân khí !",5)
endif
set p=null
return false
endfunction
function WYe takes unit u,integer i,item t returns boolean
local player p=GetOwningPlayer(u)
local integer Wye=0
local integer Wze=BMe[(i)*(20)+1]+BMe[(i)*(20)+2]+BMe[(i)*(20)+3]
local integer id=GetHandleId(t)
local integer woe=LoadInteger(IT,id,6832)
local integer tJe=LoadInteger(IT,id,qo)
local integer c=1
if woe==1 then
if bIe[(i)*(20)+1]==0 then
set Wye=1
if Wze<'d' then
call Qke(p,"|cffffcc00"+"Yêu cầu thú cưỡi đạt 100 căn cốt để học kỹ năng ở ô thứ 1 !",5)
set p=null
return false
endif
if bIe[(i)*(20)+2]==tJe or bIe[(i)*(20)+3]==tJe or bIe[(i)*(20)+4]==tJe then
call Qke(p,"|cffffcc00"+"Thú cưỡi đã học kỹ năng này trước đó !",5)
set p=null
return false
endif
set bIe[(i)*(20)+Wye]=tJe
set bAe[(i)*(20)+Wye]=1
call WUe(XJ[i],tJe,1,1,true)
call Wwe(i,Wye,tJe,1)
set BSe[(i-1)*(16)+Wye+$C]=Wye+$C
set Bte[(i-1)*(16)+Wye+$C]=eC
set BTe[(i-1)*(16)+Wye+$C]="
"+xC
if GetLocalPlayer()==p then
call Uge(Bse[Wye+$C],oC)
endif
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call QKe(rj[i]+" đã học kỹ năng thú cưỡi "+Wte(tJe),5)
call FlushChildHashtable(IT,id)
call RemoveItem(t)
elseif bIe[(i)*(20)+2]==0 then
set Wye=2
if Wze<$C8 then
call Qke(p,"|cffffcc00"+"Yêu cầu thú cưỡi đạt 200 căn cốt để học kỹ năng ở ô thứ 2 !",5)
set p=null
return false
endif
if bIe[(i)*(20)+1]==tJe or bIe[(i)*(20)+3]==tJe or bIe[(i)*(20)+4]==tJe then
call Qke(p,"|cffffcc00"+"Thú cưỡi đã học kỹ năng này trước đó !",5)
set p=null
return false
endif
set bIe[(i)*(20)+Wye]=tJe
set bAe[(i)*(20)+Wye]=1
call WUe(XJ[i],tJe,1,1,true)
call Wwe(i,Wye,tJe,1)
set BSe[(i-1)*(16)+Wye+$C]=Wye+$C
set Bte[(i-1)*(16)+Wye+$C]=eC
set BTe[(i-1)*(16)+Wye+$C]="
"+xC
if GetLocalPlayer()==p then
call Uge(Bse[Wye+$C],oC)
endif
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call QKe(rj[i]+" đã học kỹ năng thú cưỡi "+Wte(tJe),5)
call FlushChildHashtable(IT,id)
call RemoveItem(t)
elseif bIe[(i)*(20)+3]==0 then
set Wye=3
if Wze<300 then
call Qke(p,"|cffffcc00"+"Yêu cầu thú cưỡi đạt 300 căn cốt để học kỹ năng ở ô thứ 3 !",5)
set p=null
return false
endif
if bIe[(i)*(20)+2]==tJe or bIe[(i)*(20)+1]==tJe or bIe[(i)*(20)+4]==tJe then
call Qke(p,"|cffffcc00"+"Thú cưỡi đã học kỹ năng này trước đó !",5)
set p=null
return false
endif
set bIe[(i)*(20)+Wye]=tJe
set bAe[(i)*(20)+Wye]=1
call WUe(XJ[i],tJe,1,1,true)
call Wwe(i,Wye,tJe,1)
set BSe[(i-1)*(16)+Wye+$C]=Wye+$C
set Bte[(i-1)*(16)+Wye+$C]=eC
set BTe[(i-1)*(16)+Wye+$C]="
"+xC
if GetLocalPlayer()==p then
call Uge(Bse[Wye+$C],oC)
endif
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call QKe(rj[i]+" đã học kỹ năng thú cưỡi "+Wte(tJe),5)
call FlushChildHashtable(IT,id)
call RemoveItem(t)
elseif bIe[(i)*(20)+4]==0 then
set Wye=4
if Wze<400 then
call Qke(p,"|cffffcc00"+"Yêu cầu thú cưỡi đạt 400 căn cốt để học kỹ năng ở ô thứ 4 !",5)
set p=null
return false
endif
if bIe[(i)*(20)+2]==tJe or bIe[(i)*(20)+3]==tJe or bIe[(i)*(20)+1]==tJe then
call Qke(p,"|cffffcc00"+"Thú cưỡi đã học kỹ năng này trước đó !",5)
set p=null
return false
endif
set bIe[(i)*(20)+Wye]=tJe
set bAe[(i)*(20)+Wye]=1
call WUe(XJ[i],tJe,1,1,true)
call Wwe(i,Wye,tJe,1)
set BSe[(i-1)*(16)+Wye+$C]=Wye+$C
set Bte[(i-1)*(16)+Wye+$C]=eC
set BTe[(i-1)*(16)+Wye+$C]="
"+xC
if GetLocalPlayer()==p then
call Uge(Bse[Wye+$C],oC)
endif
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call QKe(rj[i]+" đã học kỹ năng thú cưỡi "+Wte(tJe),5)
call FlushChildHashtable(IT,id)
call RemoveItem(t)
else
call Qke(p,"|cffffcc00"+"Thú cưỡi đã học tối đa số kỹ năng !",5)
set p=null
return false
endif
else
loop
exitwhen c>4
if bIe[(i)*(20)+c]==tJe and bAe[(i)*(20)+c]==woe-1 then
set Wye=c
endif
set c=c+1
endloop
if Wye!=0 then
set bAe[(i)*(20)+Wye]=woe
call WUe(XJ[i],tJe,1,1,false)
call Wwe(i,Wye,tJe,woe)
set BSe[(i-1)*(16)+Wye+$C]=Wye+$C
set Bte[(i-1)*(16)+Wye+$C]=eC
set BTe[(i-1)*(16)+Wye+$C]="
"+xC
if GetLocalPlayer()==p then
call Uge(Bse[Wye+$C],oC)
endif
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call QKe(rj[i]+" đã tăng cấp kỹ năng thú cưỡi "+Wte(tJe)+" (cấp "+I2S(woe)+")|r",5)
call FlushChildHashtable(IT,id)
call RemoveItem(t)
endif
endif
set p=null
return false
endfunction
function WZe takes unit u,integer i,integer Wye returns nothing
local player p=GetOwningPlayer(u)
call WUe(XJ[i],bIe[(i)*(20)+Wye],bAe[(i)*(20)+Wye],1,true)
call Wwe(i,Wye,bIe[(i)*(20)+Wye],bAe[(i)*(20)+Wye])
set BSe[(i-1)*(16)+Wye+$C]=Wye+$C
set Bte[(i-1)*(16)+Wye+$C]=eC
set BTe[(i-1)*(16)+Wye+$C]="
"+xC
if GetLocalPlayer()==p then
call Uge(Bse[Wye+$C],oC)
endif
set p=null
endfunction
function W_e takes integer i,integer r returns nothing
local unit u=XJ[i]
if BWe[(i)*(20)+1]>0 then
call T8e(u,7*BWe[(i)*(20)+1]*r,true)
endif
if BWe[(i)*(20)+2]>0 then
call T9e(u,7*BWe[(i)*(20)+2]*r,true)
endif
if BWe[(i)*(20)+3]>0 then
call uve(u,7*BWe[(i)*(20)+3]*r,true)
endif
set u=null
endfunction
function W0e takes integer i returns nothing
local string s="Loại: bí kíp
"
if So[i]<=$A then
set s=s+"Cấp: "+"|cff7fff00"+I2S(So[i])+"|r

"
set uo="|cff9370dbMật Tịch Trung Cấp|r"
set Uo="war3mapImported\\BTNMattichtrungcap.blp"
elseif So[i]<=20 then
set s=s+"Cấp: "+"|cff7fff00"+I2S(So[i]-$A)+"|r

"
set uo="|cffffa500Mật Tịch Cao Cấp|r"
set Uo="war3mapImported\\BTNMattichcaocap.blp"
elseif So[i]<=30 then
set s=s+"Cấp: "+"|cff7fff00"+I2S(So[i]-20)+"|r

"
set uo="|cffffff00Mật Tịch Trấn Phái|r"
set Uo="war3mapImported\\BTNMattichtranphai-item.blp"
else
set s=s+"Cấp: "+"|cff7fff00"+I2S(So[i]-30)+"|r

"
set uo="|cffffff00Già Lam Kinh|r"
set Uo="war3mapImported\\BTNMattichgialam-item.blp"
endif
set s=s+"|cff0078d7Thuộc tính bổ trợ|r
"
set s=s+"|cffffcc00"+"- Sức mạnh + "+I2S(7*BWe[(i)*(20)+1]*So[i])
set s=s+"
- Thân pháp + "+I2S(7*BWe[(i)*(20)+2]*So[i])
set s=s+"
- Nội công + "+I2S(7*BWe[(i)*(20)+3]*So[i])+"|r"
set s=s+"

|cff0078d7Kỹ năng mật tịch|r
"
set s=s+"|cff7fff00"+"[ Trung cấp ] "+BlzGetAbilityResearchTooltip(Bwe[(i)*(20)+9],0)
set to[i]=So[i]
if So[i]>=$B then
set s=s+"|cff7fff00"+"
[ Cao cấp ] "+BlzGetAbilityResearchTooltip(Bwe[(i)*(20)+$A],0)
set to[i]=So[i]-$A
endif
if So[i]>=21 then
set s=s+"|cff7fff00"+"
[ Trấn phái ] "+BlzGetAbilityResearchTooltip(Bwe[(i)*(20)+$B],0)
set to[i]=So[i]-20
endif
if So[i]>=31 then
set s=s+"|cffffcc00"+"

[ Tâm Hải Già Lam cấp "+I2S(So[i]-30)+" ]|r: 
- Sát thương tuyệt học + "+I2S($5DC*(So[i]-30))+"|r
"+"|cff6d6d6d"+"(Chỉ số sát thương tuyệt học sẽ tăng thêm một lượng sát thương cho tất cả kỹ năng của nhân vật)"
set to[i]=So[i]-30
endif
set To=s
set wo[i]=Uo
set s=null
endfunction
function W1e takes integer i returns nothing
set B4e[(i-1)*(23)+4]=4
set B5e[(i-1)*(23)+4]=uo
set B6e[(i-1)*(23)+4]="
"+To
endfunction
function W2e takes unit u,integer i returns boolean
local player p=GetOwningPlayer(u)
if So[i]>=1 then
call Qke(p,"|cffffcc00"+"Bạn đã sở hữu mật tịch trung cấp !",5)
set p=null
return false
endif
if bJ[i]<2 then
call Qke(p,"|cffffcc00"+"Yêu cầu trùng sinh 2 để nhận mật tịch trung cấp !",5)
set p=null
return false
endif
set Sv=Q0e(u,'I09V')
if Sv!=null then
if tFe(i,2*SH,0)and tHe(i,4*SH,0)then
call RemoveItem(Sv)
set Bme[(i)*(20)+3]=0
call tFe(i,2*SH,De)
call tHe(i,4*SH,De)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã nhận được mật tịch trung cấp !",5)
set So[i]=1
call W_e(i,1)
call W0e(i)
set B4e[(i-1)*(23)+4]=4
set B5e[(i-1)*(23)+4]=uo
set B6e[(i-1)*(23)+4]="
"+To
if GetLocalPlayer()==p then
call Uge(B3e[4],Uo)
endif
else
call Qke(p,"|cffffcc00"+"Ngân lượng hoặc chân khí không đủ !",5)
endif
else
call Qke(p,"|cffffcc00"+"Cần mang theo Võ Lâm Mật Tịch để nhận Mật Tịch Trung Cấp !",5)
endif
set p=null
return false
endfunction
function W3e takes unit u,integer i returns boolean
local player p=GetOwningPlayer(u)
local item t1=null
local item t2=null
if So[i]>=$B then
call Qke(p,"|cffffcc00"+"Bạn đã sở hữu mật tịch cao cấp !",5)
set p=null
return false
endif
if So[i]<$A then
call Qke(p,"|cffffcc00"+"Yêu cầu mật tịch trung cấp đã đạt cấp độ cao nhất !",5)
set p=null
return false
endif
if bJ[i]<3 then
call Qke(p,"|cffffcc00"+"Yêu cầu trùng sinh 3 để nhận mật tịch trung cấp !",5)
set p=null
return false
endif
set t1=Q0e(u,'I09V')
set t2=Q0e(u,'I09W')
if t1!=null and t2!=null then
if tFe(i,4*SH,0)and tHe(i,8*SH,0)then
call RemoveItem(t1)
call RemoveItem(t2)
set Bme[(i)*(20)+3]=0
call tFe(i,4*SH,De)
call tHe(i,8*SH,De)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã nhận được mật tịch cao cấp !",5)
set So[i]=$B
call W_e(i,1)
call W0e(i)
set B4e[(i-1)*(23)+4]=4
set B5e[(i-1)*(23)+4]=uo
set B6e[(i-1)*(23)+4]="
"+To
if GetLocalPlayer()==p then
call Uge(B3e[4],Uo)
endif
else
call Qke(p,"|cffffcc00"+"Ngân lượng hoặc chân khí không đủ !",5)
endif
else
call Qke(p,"|cffffcc00"+"Cần mang theo Võ Lâm Mật Tịch và Vô Tự Thiên Thư để nhận Mật Tịch Cao Cấp !",5)
endif
set t1=null
set t2=null
set p=null
return false
endfunction
function W4e takes unit u,integer i returns boolean
local item t1=null
local item t2=null
local player p=GetOwningPlayer(u)
if So[i]>=21 then
call Qke(p,"|cffffcc00"+"Bạn đã sở hữu mật tịch trấn phái !",5)
set p=null
return false
endif
if So[i]<20 then
call Qke(p,"|cffffcc00"+"Yêu cầu mật tịch cao cấp đã đạt cấp độ cao nhất !",5)
set p=null
return false
endif
if bJ[i]<5 then
call Qke(p,"|cffffcc00"+"Yêu cầu trùng sinh 5 để nhận mật tịch trấn phái !",5)
set p=null
return false
endif
set t1=Q0e(u,'I0HL')
set t2=Q0e(u,'I09W')
if t1!=null and t2!=null then
if tFe(i,8*SH,0)and tHe(i,16*SH,0)then
call RemoveItem(t1)
call RemoveItem(t2)
set Bme[(i)*(20)+3]=0
call tFe(i,8*SH,De)
call tHe(i,16*SH,De)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã nhận được mật tịch trấn phái !",5)
set So[i]=21
call W_e(i,1)
call W0e(i)
set B4e[(i-1)*(23)+4]=4
set B5e[(i-1)*(23)+4]=uo
set B6e[(i-1)*(23)+4]="
"+To
if GetLocalPlayer()==p then
call Uge(B3e[4],Uo)
endif
else
call Qke(p,"|cffffcc00"+"Ngân lượng hoặc chân khí không đủ !",5)
endif
else
call Qke(p,"|cffffcc00"+"Cần mang theo Võ Lâm Bí Phổ và Vô Tự Thiên Thư để nhận Mật Tịch Trấn Phái !",5)
endif
set t1=null
set t2=null
set p=null
return false
endfunction
function W5e takes unit u,integer i returns boolean
local item t1=null
local item t2=null
local player p=GetOwningPlayer(u)
if So[i]>=31 then
call Qke(p,"|cffffcc00"+"Bạn đã sở hữu Già Lam Kinh !",5)
set p=null
return false
endif
if So[i]<30 then
call Qke(p,"|cffffcc00"+"Yêu cầu mật tịch trấn phái đã đạt cấp độ cao nhất !",5)
set p=null
return false
endif
if bJ[i]<7 then
call Qke(p,"|cffffcc00"+"Yêu cầu trùng sinh 7 để nhận Già Lam Kinh !",5)
set p=null
return false
endif
set t1=Q0e(u,'I0HL')
set t2=Q0e(u,'I0IT')
if t1!=null and t2!=null then
if tFe(i,$C*SH,0)and tHe(i,24*SH,0)then
call RemoveItem(t1)
call RemoveItem(t2)
set Bme[(i)*(20)+3]=0
call tFe(i,$C*SH,De)
call tHe(i,24*SH,De)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã nhận được Già Lam Kinh !",5)
set So[i]=31
call W_e(i,1)
call Tje(XJ[i],Rx,$5DC)
call W0e(i)
set B4e[(i-1)*(23)+4]=4
set B5e[(i-1)*(23)+4]=uo
set B6e[(i-1)*(23)+4]="
"+To
if GetLocalPlayer()==p then
call Uge(B3e[4],Uo)
endif
else
call Qke(p,"|cffffcc00"+"Ngân lượng hoặc chân khí không đủ !",5)
endif
else
call Qke(p,"|cffffcc00"+"Cần mang theo Võ Lâm Bí Phổ và Già Lam Tâm Pháp để nhận Già Lam Kinh !",5)
endif
set t1=null
set t2=null
set p=null
return false
endfunction
function W6e takes unit u,integer i returns boolean
local player p=GetOwningPlayer(u)
if So[i]<1 then
call Qke(p,"|cffffcc00"+"Bạn vẫn chưa sở hữu mật tịch trung cấp !",5)
set p=null
return false
endif
if So[i]>=$A then
call Qke(p,"|cffffcc00"+"Mật tịch trung cấp đã đạt cấp độ tối đa !",5)
set p=null
return false
endif
if Bme[(i)*(20)+3]>=nj[So[i]]*2 then
if tFe(i,2*sH,0)and tHe(i,1*SH,0)then
call tFe(i,2*sH,De)
call tHe(i,1*SH,De)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Mật tịch trung cấp đã tăng một cấp độ !",5)
set So[i]=So[i]+1
call W_e(i,1)
call W0e(i)
set B4e[(i-1)*(23)+4]=4
set B5e[(i-1)*(23)+4]=uo
set B6e[(i-1)*(23)+4]="
"+To
if GetLocalPlayer()==p then
call Uge(B3e[4],Uo)
endif
else
call Qke(p,"|cffffcc00"+"Ngân lượng hoặc chân khí không đủ !",5)
endif
else
call Qke(p,"|cffffcc00"+"Độ luyện mật tịch vẫn chưa đạt yêu cầu: "+I2S(Bme[(i)*(20)+3]/ 2)+"/"+I2S(nj[So[i]]),5)
endif
set p=null
return false
endfunction
function W7e takes unit u,integer i returns boolean
local player p=GetOwningPlayer(u)
local boolean b=false
local integer Tre=2*SH
local integer ck=5*sH
if So[i]<$B then
call Qke(p,"|cffffcc00"+"Bạn vẫn chưa sở hữu mật tịch cao cấp !",5)
set p=null
return false
endif
if So[i]>=20 then
call Qke(p,"|cffffcc00"+"Mật tịch cao cấp đã đạt cấp độ tối đa !",5)
set p=null
return false
endif
if GetRandomReal(0,'d')<=77-(So[i]-$A)*7 then
set b=true
endif
if Bme[(i)*(20)+3]>=nj[So[i]-$A]*2 then
set Sv=Q0e(u,'I09X')
if Sv!=null then
if tFe(i,ck,0)and tHe(i,Tre,0)then
call RemoveItem(Sv)
call tFe(i,ck,De)
call tHe(i,Tre,De)
if b then
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call QKe(rj[i]+"|cffffcc00"+" đã nâng cấp mật tịch cao cấp thành công, xin chúc mừng !",5)
set So[i]=So[i]+1
call W_e(i,1)
call W0e(i)
set B4e[(i-1)*(23)+4]=4
set B5e[(i-1)*(23)+4]=uo
set B6e[(i-1)*(23)+4]="
"+To
if GetLocalPlayer()==p then
call Uge(B3e[4],Uo)
endif
else
call QKe(rj[i]+"|cffffcc00"+" đã nâng cấp mật tịch cao cấp thất bại, thật đáng tiếc !",5)
endif
endif
else
call Qke(p,"|cffffcc00"+"Cần mang theo Chân Quyển Tinh Hoa để nâng cấp Mật Tịch Cao Cấp !",5)
endif
else
call Qke(p,"|cffffcc00"+"Độ luyện mật tịch vẫn chưa đạt yêu cầu: "+I2S(Bme[(i)*(20)+3]/ 2)+"/"+I2S(nj[So[i]-$A]),5)
endif
set p=null
return false
endfunction
function W8e takes unit u,integer i returns boolean
local player p=GetOwningPlayer(u)
if So[i]<21 then
call Qke(p,"|cffffcc00"+"Bạn vẫn chưa sở hữu mật tịch trấn phái !",5)
set p=null
return false
endif
if So[i]>=30 then
call Qke(p,"|cffffcc00"+"Mật tịch trấn phái đã đạt cấp độ tối đa !",5)
set p=null
return false
endif
if Bme[(i)*(20)+3]>=nj[So[i]-20]*2 then
if tFe(i,2*SH,0)and tHe(i,4*SH,0)then
call tFe(i,2*SH,De)
call tHe(i,4*SH,De)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Mật tịch trấn phái đã tăng một cấp độ !",5)
set So[i]=So[i]+1
call W_e(i,1)
call W0e(i)
set B4e[(i-1)*(23)+4]=4
set B5e[(i-1)*(23)+4]=uo
set B6e[(i-1)*(23)+4]="
"+To
if GetLocalPlayer()==p then
call Uge(B3e[4],Uo)
endif
else
call Qke(p,"|cffffcc00"+"Ngân lượng hoặc chân khí không đủ !",5)
endif
else
call Qke(p,"|cffffcc00"+"Độ luyện mật tịch vẫn chưa đạt yêu cầu: "+I2S(Bme[(i)*(20)+3]/ 2)+"/"+I2S(nj[So[i]-20]),5)
endif
set p=null
return false
endfunction
function W9e takes unit u,integer i returns boolean
local player p=GetOwningPlayer(u)
if So[i]<31 then
call Qke(p,"|cffffcc00"+"Bạn vẫn chưa sở hữu Già Lam Kinh !",5)
set p=null
return false
endif
if So[i]>=40 then
call Qke(p,"|cffffcc00"+"Già Lam Kinh đã đạt cấp độ tối đa !",5)
set p=null
return false
endif
if Bme[(i)*(20)+3]>=nj[So[i]-30]*2 then
if tFe(i,3*SH,0)and tHe(i,6*SH,0)then
set Sv=Q0e(u,'I0IW')
if Sv!=null then
call RemoveItem(Sv)
call tFe(i,3*SH,De)
call tHe(i,6*SH,De)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Già Lam Kinh đã tăng một cấp độ !",5)
set So[i]=So[i]+1
call W_e(i,1)
call W0e(i)
call Tje(XJ[i],Rx,$5DC)
set B4e[(i-1)*(23)+4]=4
set B5e[(i-1)*(23)+4]=uo
set B6e[(i-1)*(23)+4]="
"+To
if GetLocalPlayer()==p then
call Uge(B3e[4],Uo)
endif
else
call Qke(p,"|cffffcc00"+"Không tìm thấy Bạch Không Tâm Thư trong hành trang !",5)
endif
else
call Qke(p,"|cffffcc00"+"Ngân lượng hoặc chân khí không đủ !",5)
endif
else
call Qke(p,"|cffffcc00"+"Độ luyện mật tịch vẫn chưa đạt yêu cầu: "+I2S(Bme[(i)*(20)+3]/ 2)+"/"+I2S(nj[So[i]-30]),5)
endif
set p=null
return false
endfunction
function yve takes unit u,integer i,integer w5e returns nothing
if w5e=='I09Y' then
call W2e(u,i)
elseif w5e=='I09Z' then
call W3e(u,i)
elseif w5e=='I0A0' then
call W6e(u,i)
elseif w5e=='I0A1' then
call W7e(u,i)
elseif w5e=='I0HM' then
call W4e(u,i)
elseif w5e=='I0HN' then
call W8e(u,i)
elseif w5e=='I0IU' then
call W5e(u,i)
elseif w5e=='I0IV' then
call W9e(u,i)
endif
endfunction
function yee takes integer id returns string
if id==4 then
return"war3mapImported\\BTNFrameUI_QuestButtons2.blp"
endif
return"war3mapImported\\BTNFrameUI_QuestButtons1.blp"
endfunction
function yxe takes integer id returns string
if id==5 then
return"Mãn Giang Hồng"
elseif id==6 then
return"Hoa Cốc Lai Khách"
elseif id==7 then
return"Đại Mạc Thương Lang"
elseif id==8 then
return"Mật Thám Kim Quốc"
elseif id==9 then
return"Nhân Sinh Vô Thường"
elseif id==$A then
return"Chiêu An"
elseif id==$B then
return"Đại án Tử Mẫu Hoàn"
else
return"Cừu Hận"
endif
endfunction
function yoe takes integer id returns string
if id==5 then
return"
"+"|cff6d6d6d"+"[ Nhiệm vụ giang hồ ]|r

"+"|cffadd8e6"+"- Tiếp nhận nhiệm vụ tại Nhạc Khả Sơn ở Hoa Sơn
- Yêu cầu trùng sinh 1"
elseif id==6 then
return"
"+"|cff6d6d6d"+"[ Nhiệm vụ giang hồ ]|r

"+"|cffadd8e6"+"- Tiếp nhận nhiệm vụ tại Vũ Nương ở Hoài Thủy Sa Châu
- Yêu cầu trùng sinh 2"
elseif id==7 then
return"
"+"|cff6d6d6d"+"[ Nhiệm vụ giang hồ ]|r

"+"|cffadd8e6"+"- Tiếp nhận nhiệm vụ tại Yến Tiểu Lâu ở Đôn Hoàng Cổ Thành
- Yêu cầu trùng sinh 3"
elseif id==8 then
return"
"+"|cff6d6d6d"+"[ Nhiệm vụ giang hồ ]|r

"+"|cffadd8e6"+"- Tiếp nhận nhiệm vụ tại Long Ngũ Thái Gia ở Ba Lăng Huyện
- Yêu cầu trùng sinh 4"
elseif id==9 then
return"
"+"|cff6d6d6d"+"[ Nhiệm vụ giang hồ ]|r

"+"|cffadd8e6"+"- Tiếp nhận nhiệm vụ tại Lâm Yên Khanh ở Ba Lăng Huyện
- Yêu cầu trùng sinh 5"
elseif id==$A then
return"
"+"|cff6d6d6d"+"[ Nhiệm vụ giang hồ ]|r

"+"|cffadd8e6"+"- Tiếp nhận nhiệm vụ tại Nguyên Soái Tần Khuê ở Dương Châu
- Yêu cầu trùng sinh 6"
elseif id==$B then
return"
"+"|cff6d6d6d"+"[ Nhiệm vụ giang hồ ]|r

"+"|cffadd8e6"+"- Tiếp nhận nhiệm vụ tại Cốc Nam ở Dương Châu
- Yêu cầu trùng sinh 6"
else
return"
"+"|cff6d6d6d"+"[ Nhiệm vụ giang hồ ]|r

"+"|cffadd8e6"+"- Tiếp nhận nhiệm vụ tại Giác Sinh ở Trường Bạch Sơn
- Yêu cầu trùng sinh 7"
endif
endfunction
function yre takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local framehandle f=BlzGetTriggerFrame()
if f!=null then
call BlzFrameSetVisible(f,false)
call BlzFrameSetVisible(f,true)
endif
if not EC then
set f=null
set p=null
return false
endif
if ti[id]then
call Qke(p,"|cffff0000"+"Xin đừng thao tác quá nhanh !",5)
set f=null
set p=null
return false
endif
call UMe(id,1.)
if not Ub[id+1]or B2e[id]or BQe[id]or bye[id]or bLe[id]or b5e[id]or bQe[id]or b1e[id]or BHe[id]or b9e[id]then
set f=null
set p=null
return false
endif
if bNe[id]==false then
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yo,true)
endif
set bNe[id]=true
else
set bNe[id]=false
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yo,false)
endif
endif
set f=null
set p=null
return false
endfunction
function yie takes nothing returns nothing
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local integer yae=LoadInteger(ht,914,GetHandleId(f))
if bBe[(id)*($C)+yae]!=0 then
if GetLocalPlayer()==p then
set zc=bce[(id)*($C)+yae]
set Zc=bCe[(id)*($C)+yae]
set rC=.23
set iC=.252
set aC=.23
set nC=.265
endif
if GetLocalPlayer()==p then
call BlzFrameSetAbsPoint(yc,FRAMEPOINT_BOTTOMLEFT,rC,iC)
call BlzFrameSetSize(yc,aC,nC)
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextTitle",0),zc)
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,true)
endif
elseif yae>=5 and yae<=$C then
if GetLocalPlayer()==p then
set zc=yxe(yae)
set Zc=yoe(yae)
set rC=.23
set iC=.35
set aC=.2
set nC=.1
endif
if GetLocalPlayer()==p then
call BlzFrameSetAbsPoint(yc,FRAMEPOINT_BOTTOMLEFT,rC,iC)
call BlzFrameSetSize(yc,aC,nC)
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextTitle",0),zc)
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,true)
endif
endif
set f=null
set p=null
endfunction
function yne takes nothing returns nothing
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,false)
call BlzFrameSetVisible(Yo,false)
endif
set f=null
set p=null
endfunction
function yVe takes nothing returns nothing
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
if GetLocalPlayer()==p then
call BlzFrameSetVisible(f,false)
call BlzFrameSetVisible(f,true)
endif
set f=null
set p=null
endfunction
function yEe takes integer i,real x,real y returns nothing
set bbe[i]=Uhe(yee(i))
call Ude(bbe[i],52,x,y)
call Uke(bbe[i],function yVe)
call Ule(bbe[i],function yie)
call ULe(bbe[i],function yne)
call SaveInteger(ht,914,GetHandleId(bbe[i]),i)
call BlzFrameSetParent(bbe[i],yo)
endfunction
function yXe takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
if bNe[id] then
set bNe[id]=false
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yo,false)
endif
endif
set p=null
return false
endfunction
function yOe takes nothing returns nothing
local real z=.01
local real y=.02
set yo=UJe("war3mapImported\\FrameUI_QuestBackground.tga")
call UFe(yo,408,505,.005,.275)
call yEe(1,z+.0185,y+.43)
call yEe(2,z+.0685,y+.43)
call yEe(3,z+.1185,y+.43)
call yEe(4,z+.1685,y+.43)
call yEe(5,z+.0185,y+.38)
call yEe(6,z+.0685,y+.38)
call yEe(7,z+.1185,y+.38)
call yEe(8,z+.1685,y+.38)
call yEe(9,z+.0185,y+.33)
call yEe($A,z+.0685,y+.33)
call yEe($B,z+.1185,y+.33)
call yEe($C,z+.1685,y+.33)
set yc=BlzCreateFrame("BoxedText",BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI,0),0,0)
call BlzFrameSetVisible(yo,false)
call BlzFrameSetVisible(yc,false)
endfunction
function yRe takes nothing returns nothing
local trigger t=CreateTrigger()
call BlzTriggerRegisterPlayerKeyEvent(t,Player(0),OSKEY_L,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(1),OSKEY_L,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(2),OSKEY_L,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(3),OSKEY_L,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(4),OSKEY_L,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(5),OSKEY_L,0,true)
call TriggerAddAction(t,function yre)
set Wo=Uhe("war3mapImported\\bt7.tga")
call UFe(Wo,58,58,.16,.09)
call Uke(Wo,function yre)
set t=CreateTrigger()
call TriggerRegisterPlayerEvent(t,Player(0),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(1),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(2),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(3),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(4),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(5),EVENT_PLAYER_END_CINEMATIC)
call TriggerAddAction(t,function yXe)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,11.,false)
call TriggerAddAction(t,function yOe)
set t=null
endfunction
function yIe takes unit u,player p,integer i,boolean b,integer id returns nothing
local boolean QQe=LoadBoolean(ht,id,StringHash("attack"))
if b then
call SetPlayerAbilityAvailable((p),('A003'),false)
if not QQe or not wb[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+2]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+3]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+4]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+5]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+6]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+7]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+8]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+9]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$A]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),false)
endif
else
if not wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),true)
endif
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+2]),true)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+3]),true)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+4]),true)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+5]),true)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+6]),true)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+7]),true)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+8]),true)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+9]),true)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$A]),true)
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetPlayerAbilityAvailable((p),('A003'),true)
endif
endfunction
function yAe takes integer s returns string
if s==1 then
return "|cff0078d7"
elseif s==2 then
return "|cff9370db"
elseif s==3 or s==4 then
return "|cffffa500"
endif
return "|cffffff00"
endfunction
function yNe takes integer s returns string
if s==1 then
return"***"
elseif s==2 then
return"****"
elseif s==3 then
return"*****"
elseif s==4 then
return"*******"
elseif s==5 then
return"*********"
endif
return"**********"
endfunction
function ybe takes integer i returns nothing
local integer s1=BMe[(i)*(20)+1]
local integer s2=BMe[(i)*(20)+2]
local integer s3=BMe[(i)*(20)+3]
local integer Wze=s1+s2+s3
local string s="Loại: mã bài
"
local integer lv=R2I(Wze/ 'd')+1
if lv>6 then
set lv=6
endif
set s=s+"Thú cưỡi: "+"|cffffff00"+GetObjectName(fj[(GJ[i]-$96)/ 2])+"|r
"
set s=s+"Căn cốt: "+"|cffffcc00"+I2S(Wze)+"/600|r
"
if Wze<300 then
set s=s+"Kỹ năng có thể học: "+"|cffffcc00"+I2S(0)+"/4|r

"
else
set s=s+"Kỹ năng có thể học: "+"|cffffcc00"+I2S(lv-2)+"/4|r

"
endif
set s=s+"|cff0078d7Thuộc tính trang bị|r
"
set s=s+"- Sức mạnh: "+I2S(s1)+"/200
"
set s=s+"- Thân pháp: "+I2S(s2)+"/200
"
set s=s+"- Nội công: "+I2S(s3)+"/200

"
set s=s+"|cff0078d7Thuộc tính kích hoạt căn cốt|r
"
if Wze>='d' then
set s=s+"|cff7fff00"+"[ 100 ]: Sinh lực tối đa + 5000|r
"
else
set s=s+"|cff6d6d6d"+"[ 100 ]: Sinh lực tối đa + 5000|r
"
endif
if Wze>=$C8 then
set s=s+"|cff7fff00"+"[ 200 ]: Chịu sát thương chí mạng - 20%|r
"
else
set s=s+"|cff6d6d6d"+"[ 200 ]: Chịu sát thương chí mạng - 20%|r
"
endif
if Wze>=300 then
set s=s+"|cff7fff00"+"[ 300 ]: Né tránh + 200|r
"
else
set s=s+"|cff6d6d6d"+"[ 300 ]: Né tránh + 200|r
"
endif
if Wze>=400 then
set s=s+"|cff7fff00"+"[ 400 ]: Kháng tất cả + 100|r
"
else
set s=s+"|cff6d6d6d"+"[ 400 ]: Kháng tất cả + 100|r
"
endif
if Wze>=500 then
set s=s+"|cff7fff00"+"[ 500 ]: Sát thương hứng chịu, thu nhỏ 30%|r
"
else
set s=s+"|cff6d6d6d"+"[ 500 ]: Sát thương hứng chịu, thu nhỏ 30%|r
"
endif
if Wze>=600 then
set s=s+"|cff7fff00"+"[ 600 ]: Sát thương gây ra, khuếch đại 30%|r
"
else
set s=s+"|cff6d6d6d"+"[ 600 ]: Sát thương gây ra, khuếch đại 30%|r
"
endif
set rA=yAe(lv)+"Mã Bài ["+I2S(Wze)+"]
"+yNe(lv)+"|r"
set iA="war3mapImported\\BTNmabai_"+I2S(lv)+".blp"
set oA=s
set aA[i]=iA
set s=null
endfunction
function yBe takes unit u returns nothing
local integer id=(GetPlayerId(GetOwningPlayer((u))))
if bde[id]then
set bde[id]=false
endif
endfunction
function yce takes integer id returns unit
if bde[id-1]then
return bDe[id]
endif
return null
endfunction
function yCe takes nothing returns nothing
local integer CGe=Qce()
local integer id=(GetPlayerId((am[CGe])))
local real c=GetUnitFlyHeight(rm[CGe])
if spe(rm[CGe])or sce(am[CGe])or(not bde[id])then
if spe(rm[CGe])then
call yIe(rm[CGe],am[CGe],Im[CGe],false,GetHandleId(rm[CGe]))
endif
call AddUnitAnimationProperties(rm[CGe],"gold",false)
call UnitRemoveAbility(im[CGe],'Apiv')
call SetUnitAnimation(im[CGe],"stand")
call sqe(im[CGe],$FF,$FF,$FF,$FF,$FF,$FF,$FF,0,.5)
call UnitApplyTimedLife(im[CGe],'BTLF',.6)
call sve(im[CGe],.6)
call SetUnitTimeScale(im[CGe],0)
call SetUnitBlendTime(rm[CGe],.15)
set bde[id]=false
call SetUnitFlyHeight((rm[CGe]),((0)*1.),.0)
call SetUnitFlyHeight((im[CGe]),((0)*1.),.0)
if Am[CGe]>0 then
call Tje(rm[CGe],xx,-Am[CGe])
endif
if not yJ[Im[CGe]]then
call TZe(rm[CGe],-Om[CGe])
call u_e(rm[CGe],-Xm[CGe])
call UnitRemoveAbility(rm[CGe],'Abun')
endif
if yb[Im[CGe]]!=null then
call Qre(yb[Im[CGe]])
set yb[Im[CGe]]=UCe(rm[CGe],Yb[Im[CGe]],"origin")
endif
if Na[Im[CGe]]!=null then
call Qre(Na[Im[CGe]])
set Na[Im[CGe]]=AddSpecialEffectTarget("war3mapImported\\Effect_aura6.mdx",rm[CGe],"origin")
endif
set im[CGe]=null
set am[CGe]=null
set rm[CGe]=null
call QDe()
call qIe(CGe)
return
endif
if c<Em[CGe]then
call SetUnitFlyHeight((rm[CGe]),((Em[CGe])*1.),.0)
call SetUnitFlyHeight((im[CGe]),((0)*1.),.0)
elseif c>Em[CGe]then
call SetUnitFlyHeight((im[CGe]),(((c-Em[CGe]))*1.),.0)
endif
if IsUnitVisible(rm[CGe],zv)then
if Rm[CGe]then
set Rm[CGe]=false
call UnitRemoveAbility(im[CGe],'Apiv')
endif
else
if not(Rm[CGe])then
set Rm[CGe]=true
call sFe(im[CGe],'Apiv')
endif
endif
if(Zx[sbe((rm[CGe]),zx)])then
call SetUnitAnimationByIndex(im[CGe],Vm[CGe])
endif
call SetUnitFlyHeight(rm[CGe],Em[CGe],20.)
call SetUnitX(im[CGe],GetUnitX(rm[CGe]))
call SetUnitY(im[CGe],GetUnitY(rm[CGe]))
call SetUnitFacing(im[CGe],GetUnitFacing(rm[CGe]))
endfunction
function yde takes unit yDe,integer yfe returns nothing
local integer CGe=qRe()
local real x=GetUnitX(yDe)
local real y=GetUnitY(yDe)
local integer id=(GetPlayerId(GetOwningPlayer((yDe))))
local integer yFe=LoadInteger(ht,yfe,StringHash("petwalkid"))
local integer S7e=LoadInteger(ht,yfe,StringHash("height"))
local real S8e=LoadReal(ht,yfe,StringHash("scale"))
local real hp=LoadReal(ht,yfe,StringHash("hp"))
local integer ms=LoadInteger(ht,yfe,StringHash("ms"))
local boolean QQe=LoadBoolean(ht,yfe,StringHash("attack"))
if bde[id]then
call qIe(CGe)
return
else
set bde[id]=true
endif
set rm[CGe]=yDe
set Rm[CGe]=false
set am[CGe]=GetOwningPlayer(rm[CGe])
set Im[CGe]=GetPlayerId(am[CGe])+1
set im[CGe]=CreateUnit(am[CGe],yfe,x,y,GetUnitFacing(yDe))
set Em[CGe]=S7e+Wb[Im[CGe]]
set bDe[Im[CGe]]=im[CGe]
set Vm[CGe]=yFe
set Om[CGe]=hp
set Xm[CGe]=ms
call SetUnitFlyHeight((yDe),((Em[CGe])*1.),.0)
set Am[CGe]=TKe(yDe,6733)
if Am[CGe]>0 then
call Tje(rm[CGe],xx,Am[CGe])
endif
call TZe(rm[CGe],Om[CGe])
call u_e(rm[CGe],Xm[CGe])
if not QQe or not wb[Im[CGe]]then
call UnitAddAbility(rm[CGe],'Abun')
endif
if yb[Im[CGe]]!=null then
call Qre(yb[Im[CGe]])
set yb[Im[CGe]]=UCe(im[CGe],Yb[Im[CGe]],"origin")
endif
if Na[Im[CGe]]!=null then
call Qre(Na[Im[CGe]])
set Na[Im[CGe]]=AddSpecialEffectTarget("war3mapImported\\Effect_aura6.mdx",im[CGe],"origin")
endif
call SetUnitPathing(im[CGe],false)
call SetUnitX(im[CGe],x)
call SetUnitY(im[CGe],y)
call SetUnitTimeScale(im[CGe],S8e)
call SetUnitInvulnerable(im[CGe],true)
call UnitRemoveAbility(im[CGe],'Aatk')
call UnitAddType(im[CGe],UNIT_TYPE_DEAD)
call sFe(im[CGe],'Aloc')
call sHe(im[CGe])
call QIe(CGe,.03125,true,function yCe)
endfunction
function yge takes nothing returns nothing
local integer CGe=Qce()
local integer id=(GetPlayerId((Cm[CGe])))
if spe(cm[CGe])or sce(Cm[CGe])or(not bde[id])then
if(GetUnitAbilityLevel((cm[CGe]),('A0YX'))>0)then
call AddUnitAnimationProperties(cm[CGe],"gold",false)
endif
if spe(cm[CGe])then
call yIe(cm[CGe],Cm[CGe],fm[CGe],false,GetHandleId(cm[CGe]))
endif
set bde[id]=false
call UnitRemoveAbility(cm[CGe],'A0YW')
if Fm[CGe]>0 then
call Tje(cm[CGe],xx,-Fm[CGe])
endif
if not yJ[fm[CGe]]then
call TZe(cm[CGe],-Dm[CGe])
call u_e(cm[CGe],-dm[CGe])
call UnitRemoveAbility(cm[CGe],'Abun')
endif
set Cm[CGe]=null
set cm[CGe]=null
call QDe()
call qOe(CGe)
return
endif
endfunction
function yGe takes unit yDe,integer yfe returns nothing
local integer CGe=qXe()
local integer id=(GetPlayerId(GetOwningPlayer((yDe))))
local real hp=LoadReal(ht,yfe,StringHash("hp"))
local integer ms=LoadInteger(ht,yfe,StringHash("ms"))
local boolean QQe=LoadBoolean(ht,yfe,StringHash("attack"))
if bde[id]then
call qOe(CGe)
return
else
set bde[id]=true
endif
set cm[CGe]=yDe
set Cm[CGe]=GetOwningPlayer(cm[CGe])
set fm[CGe]=GetPlayerId(Cm[CGe])+1
set Dm[CGe]=hp
set dm[CGe]=ms
if(GetUnitAbilityLevel((cm[CGe]),('A0YX'))>0)then
call AddUnitAnimationProperties(cm[CGe],"gold",true)
endif
call UnitAddAbility(cm[CGe],'A0YW')
set Fm[CGe]=TKe(yDe,6733)
if Fm[CGe]>0 then
call Tje(cm[CGe],xx,Fm[CGe])
endif
call TZe(cm[CGe],Dm[CGe])
call u_e(cm[CGe],dm[CGe])
if not QQe or not wb[fm[CGe]]then
call UnitAddAbility(cm[CGe],'Abun')
endif
call QIe(CGe,.03125,true,function yge)
endfunction
function yhe takes nothing returns nothing
local integer i=0
loop
exitwhen i==7
set bde[i]=false
set bDe[i+1]=null
set i=i+1
endloop
endfunction
function yHe takes unit u,unit v,real twe,real Upe returns boolean
local player p=GetOwningPlayer(u)
local real yje=(Upe*$A)*(1+TKe(u,6851))/(1+TKe(v,572))
local real yJe=twe*(1+TKe(u,909))/(1+TKe(v,jx))
local real x=GetUnitX(v)
local real y=GetUnitY(v)
if(GetUnitAbilityLevel((v),('A03Z'))>0)or(GetUnitAbilityLevel((v),('A04A'))>0)or(GetUnitAbilityLevel((v),('A04G'))>0)or(GetUnitAbilityLevel((v),('A09Z'))>0)or(GetUnitAbilityLevel((v),('A0AE'))>0)or(GetUnitAbilityLevel((v),('A0AH'))>0)or(GetUnitAbilityLevel((v),('A089'))>0)or(GetUnitAbilityLevel((v),('A0RT'))>0)or(GetUnitAbilityLevel((v),('A0UR'))>0)then
set p=null
return false
endif
if(IsUnitType((v),UNIT_TYPE_TAUREN))or(GetUnitAbilityLevel((v),('A0NA'))>0)or(GetUnitAbilityLevel((v),('A0WF'))>0)or GetRandomReal(0,'d')<TKe(v,Ox)then
set p=null
return false
endif
if yje<1 then
set yje=1
elseif yje>50 then
set yje=50
endif
if not(GetUnitAbilityLevel((v),('B005'))>0)then
call SetPlayerAbilityAvailable(p,'A029',true)
if GetRandomReal(0,100.)<=yJe and not spe(v)then
set Qv=U2e(p,x,y,.25,'A029',R2I(yje))
call IssuePointOrder(Qv,"silence",x,y)
endif
call SetPlayerAbilityAvailable(p,'A029',false)
endif
set p=null
return false
endfunction
function yke takes unit u,unit v,real twe,real Upe returns boolean
local player p=GetOwningPlayer(u)
local real yje=(Upe*$A)*(1+TKe(u,Kx))/(1+TKe(v,lx))
local real yJe=twe*(1+TKe(u,4562))/(1+TKe(v,7255))
local real x=GetUnitX(v)
local real y=GetUnitY(v)
if(GetUnitAbilityLevel((v),('A03Z'))>0)or(GetUnitAbilityLevel((v),('A04A'))>0)or(GetUnitAbilityLevel((v),('A04G'))>0)or(GetUnitAbilityLevel((v),('A09Z'))>0)or(GetUnitAbilityLevel((v),('A0AE'))>0)or(GetUnitAbilityLevel((v),('A0AH'))>0)or(GetUnitAbilityLevel((v),('A089'))>0)or(GetUnitAbilityLevel((v),('A0RT'))>0)or(GetUnitAbilityLevel((v),('A0UR'))>0)then
set p=null
return false
endif
if(IsUnitType((v),UNIT_TYPE_TAUREN))or(GetUnitAbilityLevel((v),('A0NA'))>0)or(GetUnitAbilityLevel((v),('A0W2'))>0)or(GetUnitAbilityLevel((v),('A0WF'))>0)or GetRandomReal(0,'d')<TKe(v,Ox)then
set p=null
return false
endif
if yje<1 then
set yje=1
elseif yje>50 then
set yje=50
endif
if not(GetUnitAbilityLevel((v),('B002'))>0)then
call SetPlayerAbilityAvailable(p,'A026',true)
if GetRandomReal(0,100.)<=yJe and not spe(v)then
set Qv=U2e(p,x,y,.25,'A026',R2I(yje))
call IssueTargetOrder(Qv,"slow",v)
endif
call SetPlayerAbilityAvailable(p,'A026',false)
endif
set p=null
return false
endfunction
function yKe takes unit u,unit v,real twe,real Upe returns boolean
local player p=GetOwningPlayer(u)
local real yje=(Upe*$A)*(1+TKe(u,7537))/(1+TKe(v,6210))
local real yJe=twe*(1+TKe(u,6443))/(1+TKe(v,Jx))
local real x=GetUnitX(v)
local real y=GetUnitY(v)
if(GetUnitAbilityLevel((v),('A03Z'))>0)or(GetUnitAbilityLevel((v),('A04A'))>0)or(GetUnitAbilityLevel((v),('A04G'))>0)or(GetUnitAbilityLevel((v),('A09Z'))>0)or(GetUnitAbilityLevel((v),('A0AE'))>0)or(GetUnitAbilityLevel((v),('A0AH'))>0)or(GetUnitAbilityLevel((v),('A089'))>0)or(GetUnitAbilityLevel((v),('A0RT'))>0)or(GetUnitAbilityLevel((v),('A0UR'))>0)then
set p=null
return false
endif
if(IsUnitType((v),UNIT_TYPE_TAUREN))or(GetUnitAbilityLevel((v),('A0NA'))>0)or(GetUnitAbilityLevel((v),('A0W2'))>0)or GetRandomReal(0,'d')<TKe(v,Ox)then
set p=null
return false
endif
if yje<1 then
set yje=1
elseif yje>50 then
set yje=50
endif
if not(GetUnitAbilityLevel((v),('B001'))>0)then
call SetPlayerAbilityAvailable(p,'A02A',true)
if GetRandomReal(0,100.)<=yJe and not spe(v)then
set Qv=U2e(p,x,y,.25,'A02A',R2I(yje))
call IssueTargetOrder(Qv,"drunkenhaze",v)
endif
call SetPlayerAbilityAvailable(p,'A02A',false)
endif
set p=null
return false
endfunction
function yle takes unit u,unit v,real twe,real Upe returns boolean
local player p=GetOwningPlayer(u)
local real yje=(Upe*$A)*(1+TKe(u,4934))/(1+TKe(v,6491))
local real yJe=twe*(1+TKe(u,7656))/(1+TKe(v,kx))
local real x=GetUnitX(v)
local real y=GetUnitY(v)
if(GetUnitAbilityLevel((v),('A03Z'))>0)or(GetUnitAbilityLevel((v),('A04A'))>0)or(GetUnitAbilityLevel((v),('A04G'))>0)or(GetUnitAbilityLevel((v),('A09Z'))>0)or(GetUnitAbilityLevel((v),('A0AE'))>0)or(GetUnitAbilityLevel((v),('A0AH'))>0)or(GetUnitAbilityLevel((v),('A089'))>0)or(GetUnitAbilityLevel((v),('A0UR'))>0)then
set p=null
return false
endif
if(IsUnitType((v),UNIT_TYPE_TAUREN))or(GetUnitAbilityLevel((v),('A0NA'))>0)or(GetUnitAbilityLevel((v),('A0VL'))>0)or(GetUnitAbilityLevel((v),('A0W2'))>0)or(GetUnitAbilityLevel((v),('A0WF'))>0)or GetRandomReal(0,'d')<TKe(v,Ox)then
set p=null
return false
endif
if yje<1 then
set yje=1
elseif yje>50 then
set yje=50
endif
if not(GetUnitAbilityLevel((v),('B003'))>0)then
call SetPlayerAbilityAvailable(p,'A027',true)
if GetRandomReal(0,100.)<=yJe and not spe(v)then
set Qv=U2e(p,x,y,.25,'A027',R2I(yje))
call IssueTargetOrder(Qv,"thunderbolt",v)
endif
call SetPlayerAbilityAvailable(p,'A027',false)
endif
set p=null
return false
endfunction
function yLe takes unit u,unit v,real twe,real Upe returns boolean
local player p=GetOwningPlayer(u)
local real yje=(Upe*$A)*(1+TKe(u,'o'))/(1+TKe(v,7896))
local real yJe=twe*(1+TKe(u,5529))/(1+TKe(v,6282))
local real x=GetUnitX(v)
local real y=GetUnitY(v)
if(GetUnitAbilityLevel((v),('A03Z'))>0)or(GetUnitAbilityLevel((v),('A04A'))>0)or(GetUnitAbilityLevel((v),('A04G'))>0)or(GetUnitAbilityLevel((v),('A09Z'))>0)or(GetUnitAbilityLevel((v),('A0AE'))>0)or(GetUnitAbilityLevel((v),('A0AH'))>0)or(GetUnitAbilityLevel((v),('A089'))>0)or(GetUnitAbilityLevel((v),('A0RT'))>0)or(GetUnitAbilityLevel((v),('A0UR'))>0)then
set p=null
return false
endif
if(IsUnitType((v),UNIT_TYPE_TAUREN))or(GetUnitAbilityLevel((v),('A0NA'))>0)or(GetUnitAbilityLevel((v),('A0VL'))>0)or(GetUnitAbilityLevel((v),('A0W2'))>0)or(GetUnitAbilityLevel((v),('A0WF'))>0)or GetRandomReal(0,'d')<TKe(v,Ox)then
set p=null
return false
endif
if yje<1 then
set yje=1
elseif yje>50 then
set yje=50
endif
if not(GetUnitAbilityLevel((v),('B004'))>0)then
call SetPlayerAbilityAvailable(p,'A028',true)
if GetRandomReal(0,100.)<=yJe and not spe(v)then
set Qv=U2e(p,x,y,.25,'A028',R2I(yje))
call IssueTargetOrder(Qv,"ensnare",v)
endif
call SetPlayerAbilityAvailable(p,'A028',false)
endif
set p=null
return false
endfunction
function yme takes integer id returns nothing
set b3e[(id)*($B)+1]="|cff7fff00"+"Thiên Thương [ chưa tăng cấp ]"
set b3e[(id)*($B)+2]="|cff7fff00"+"Thiên Dũng [ chưa tăng cấp ]"
set b3e[(id)*($B)+3]="|cff7fff00"+"Thiên Hùng [ chưa tăng cấp ]"
set b3e[(id)*($B)+4]="|cff7fff00"+"Thiên Mãnh [ chưa tăng cấp ]"
set b3e[(id)*($B)+5]="|cff7fff00"+"Thiên Sát [ chưa tăng cấp ]"
set b3e[(id)*($B)+6]="|cff7fff00"+"Địa Xích [ chưa tăng cấp ]"
set b3e[(id)*($B)+7]="|cff7fff00"+"Địa Nguy [ chưa tăng cấp ]"
set b3e[(id)*($B)+8]="|cff7fff00"+"Địa Băng [ chưa tăng cấp ]"
set b3e[(id)*($B)+9]="|cff7fff00"+"Địa Bích [ chưa tăng cấp ]"
set b3e[(id)*($B)+$A]="|cff7fff00"+"Địa Linh [ chưa tăng cấp ]"
set b3e[(id)*($B)+$B]="|cffffcc00"+"Tâm Pháp"
endfunction
function yMe takes integer id returns nothing
set b4e[(id)*($B)+1]="
Công kích ngoại công + 180"+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
set b4e[(id)*($B)+2]="
Chí mạng + 100"+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
set b4e[(id)*($B)+3]="
Công kích nội công + 180"+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
set b4e[(id)*($B)+4]="
Sát thương chí mạng + 12%"+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
set b4e[(id)*($B)+5]="
Chính xác + 200"+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
set b4e[(id)*($B)+6]="
Sinh lực + 5000"+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
set b4e[(id)*($B)+7]="
Nội lực + 2500"+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
set b4e[(id)*($B)+8]="
Chịu sát thương chí mạng - 12%"+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
set b4e[(id)*($B)+9]="
Kháng phản đòn + 18%"+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
set b4e[(id)*($B)+$A]="
Thời gian bị trạng thái ngũ hành - 12%"+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
endfunction
function ype takes integer i,integer z returns string
if z==1 then
return "|cffadd8e6"+"
Công kích ngoại công + "+I2S($B4*bfe[(i)*($C)+z])+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
elseif z==2 then
return "|cffadd8e6"+"
Chí mạng + "+I2S('d'*bfe[(i)*($C)+z])+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
elseif z==3 then
return "|cffadd8e6"+"
Công kích nội công + "+I2S($B4*bfe[(i)*($C)+z])+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
elseif z==4 then
return "|cffadd8e6"+"
Sát thương chí mạng + "+I2S($C*bfe[(i)*($C)+z])+"%"+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
elseif z==5 then
return "|cffadd8e6"+"
Chính xác + "+I2S($C8*bfe[(i)*($C)+z])+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
elseif z==6 then
return "|cffadd8e6"+"
Sinh lực + "+I2S(5000*bfe[(i)*($C)+z])+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
elseif z==7 then
return "|cffadd8e6"+"
Nội lực + "+I2S($9C4*bfe[(i)*($C)+z])+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
elseif z==8 then
return "|cffadd8e6"+"
Chịu sát thương chí mạng - "+I2S($C*bfe[(i)*($C)+z])+"%"+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
elseif z==9 then
return "|cffadd8e6"+"
Kháng phản đòn + "+I2S(18*bfe[(i)*($C)+z])+"%"+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
else
return "|cffadd8e6"+"
Thời gian bị trạng thái ngũ hành - "+I2S($C*bfe[(i)*($C)+z])+"%"+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
endif
endfunction
function yPe takes integer i,integer z returns string
if z==1 then
return "|cffffcc00"+"Thiên Thương [ cấp "+I2S(bfe[(i)*($C)+z])+" ]"
elseif z==2 then
return "|cffffcc00"+"Thiên Dũng [ cấp "+I2S(bfe[(i)*($C)+z])+" ]"
elseif z==3 then
return "|cffffcc00"+"Thiên Hùng [ cấp "+I2S(bfe[(i)*($C)+z])+" ]"
elseif z==4 then
return "|cffffcc00"+"Thiên Mãnh [ cấp "+I2S(bfe[(i)*($C)+z])+" ]"
elseif z==5 then
return "|cffffcc00"+"Thiên Sát [ cấp "+I2S(bfe[(i)*($C)+z])+" ]"
elseif z==6 then
return "|cffffcc00"+"Địa Xích [ cấp "+I2S(bfe[(i)*($C)+z])+" ]"
elseif z==7 then
return "|cffffcc00"+"Địa Nguy [ cấp "+I2S(bfe[(i)*($C)+z])+" ]"
elseif z==8 then
return "|cffffcc00"+"Địa Băng [ cấp "+I2S(bfe[(i)*($C)+z])+" ]"
elseif z==9 then
return "|cffffcc00"+"Địa Bích [ cấp "+I2S(bfe[(i)*($C)+z])+" ]"
else
return "|cffffcc00"+"Địa Linh [ cấp "+I2S(bfe[(i)*($C)+z])+" ]"
endif
endfunction
function yqe takes unit u,integer z,integer r returns nothing
if z==1 then
call T5e(u,$B4*r)
elseif z==2 then
call Tje(u,4888,'d'*r)
elseif z==3 then
call T6e(u,$B4*r)
elseif z==4 then
call Tje(u,ax,.12*r)
elseif z==5 then
call Tje(u,6780,$C8*r)
elseif z==6 then
call TZe(u,5000*r)
elseif z==7 then
call T3e(u,$9C4*r)
elseif z==8 then
call Tje(u,Vx,.12*r)
elseif z==9 then
call Tje(u,894,.18*r)
elseif z==$A then
call Twe(u,.12*r)
endif
endfunction
function yQe takes unit u,player p,integer i,integer z returns boolean
local integer n=bfe[(i)*($C)+1]+bfe[(i)*($C)+2]+bfe[(i)*($C)+3]+bfe[(i)*($C)+4]+bfe[(i)*($C)+5]+bfe[(i)*($C)+6]
set n=n+bfe[(i)*($C)+7]+bfe[(i)*($C)+8]+bfe[(i)*($C)+9]+bfe[(i)*($C)+$A]
if bfe[(i)*($C)+z]>=3 then
call Qke(p,"|cffffcc00"+"Mỗi tâm pháp chỉ có thể tăng tối đa 3 tầng !",5)
return false
endif
if zo[i]<3 then
call Qke(p,"|cffffcc00"+"Không đủ điểm tu vi để học tâm pháp !",5)
return false
endif
if(n+zo[i]/ 3)>((bJ[i]-1)*2+bEe[i]*3)then
call QH()
endif
set bfe[(i)*($C)+z]=bfe[(i)*($C)+z]+1
set zo[i]=zo[i]-3
call Qke(p,"|cffffcc00"+"Bạn đã tăng cấp tâm pháp !",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),(u),"origin"))
call yqe(u,z,1)
set b3e[(i-1)*($B)+z]=yPe(i,z)
set b4e[(i-1)*($B)+z]=ype(i,z)
return false
endfunction
function yse takes integer i returns nothing
local integer n=0
set bfe[(i)*($C)+1]=S2I(SubString(I2S(che[($D6)*(6)+i]),1,2))
set bfe[(i)*($C)+2]=S2I(SubString(I2S(che[($D6)*(6)+i]),2,3))
set bfe[(i)*($C)+3]=S2I(SubString(I2S(che[($D6)*(6)+i]),3,4))
set bfe[(i)*($C)+4]=S2I(SubString(I2S(che[($D6)*(6)+i]),4,5))
set bfe[(i)*($C)+5]=S2I(SubString(I2S(che[($D6)*(6)+i]),5,6))
set bfe[(i)*($C)+6]=S2I(SubString(I2S(che[($D7)*(6)+i]),1,2))
set bfe[(i)*($C)+7]=S2I(SubString(I2S(che[($D7)*(6)+i]),2,3))
set bfe[(i)*($C)+8]=S2I(SubString(I2S(che[($D7)*(6)+i]),3,4))
set bfe[(i)*($C)+9]=S2I(SubString(I2S(che[($D7)*(6)+i]),4,5))
set bfe[(i)*($C)+$A]=S2I(SubString(I2S(che[($D7)*(6)+i]),5,6))
if bJ[i]>=2 then
set n=bfe[(i)*($C)+1]+bfe[(i)*($C)+2]+bfe[(i)*($C)+3]+bfe[(i)*($C)+4]+bfe[(i)*($C)+5]+bfe[(i)*($C)+6]
set n=n+bfe[(i)*($C)+7]+bfe[(i)*($C)+8]+bfe[(i)*($C)+9]+bfe[(i)*($C)+$A]
if n>((bJ[i]-1)*2+bEe[i]*3)then
call QH()
endif
set zo[i]=((bJ[i]-1)*2+bEe[i]*3-n)*3
if bfe[(i)*($C)+1]>0 then
call T5e(XJ[i],$B4*bfe[(i)*($C)+1])
set b3e[(i-1)*($B)+1]="|cffffcc00"+"Thiên Thương [ cấp "+I2S(bfe[(i)*($C)+1])+" ]"
set b4e[(i-1)*($B)+1]="|cffadd8e6"+"
Công kích ngoại công + "+I2S($B4*bfe[(i)*($C)+1])+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
endif
if bfe[(i)*($C)+2]>0 then
call Tje(XJ[i],4888,'d'*bfe[(i)*($C)+2])
set b3e[(i-1)*($B)+2]="|cffffcc00"+"Thiên Dũng [ cấp "+I2S(bfe[(i)*($C)+2])+" ]"
set b4e[(i-1)*($B)+2]="|cffadd8e6"+"
Chí mạng + "+I2S('d'*bfe[(i)*($C)+2])+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
endif
if bfe[(i)*($C)+3]>0 then
call T6e(XJ[i],$B4*bfe[(i)*($C)+3])
set b3e[(i-1)*($B)+3]="|cffffcc00"+"Thiên Hùng [ cấp "+I2S(bfe[(i)*($C)+3])+" ]"
set b4e[(i-1)*($B)+3]="|cffadd8e6"+"
Công kích nội công + "+I2S($B4*bfe[(i)*($C)+3])+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
endif
if bfe[(i)*($C)+4]>0 then
call Tje(XJ[i],ax,.12*bfe[(i)*($C)+4])
set b3e[(i-1)*($B)+4]="|cffffcc00"+"Thiên Mãnh [ cấp "+I2S(bfe[(i)*($C)+4])+" ]"
set b4e[(i-1)*($B)+4]="|cffadd8e6"+"
Sát thương chí mạng + "+I2S($C*bfe[(i)*($C)+4])+"%"+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
endif
if bfe[(i)*($C)+5]>0 then
call Tje(XJ[i],6780,$C8*bfe[(i)*($C)+5])
set b3e[(i-1)*($B)+5]="|cffffcc00"+"Thiên Sát [ cấp "+I2S(bfe[(i)*($C)+5])+" ]"
set b4e[(i-1)*($B)+5]="|cffadd8e6"+"
Chính xác + "+I2S($C8*bfe[(i)*($C)+5])+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
endif
if bfe[(i)*($C)+6]>0 then
call TZe(XJ[i],5000*bfe[(i)*($C)+6])
set b3e[(i-1)*($B)+6]="|cffffcc00"+"Địa Xích [ cấp "+I2S(bfe[(i)*($C)+6])+" ]"
set b4e[(i-1)*($B)+6]="|cffadd8e6"+"
Sinh lực + "+I2S(5000*bfe[(i)*($C)+6])+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
endif
if bfe[(i)*($C)+7]>0 then
call T3e(XJ[i],$9C4*bfe[(i)*($C)+7])
set b3e[(i-1)*($B)+7]="|cffffcc00"+"Địa Nguy [ cấp "+I2S(bfe[(i)*($C)+7])+" ]"
set b4e[(i-1)*($B)+7]="|cffadd8e6"+"
Nội lực + "+I2S($9C4*bfe[(i)*($C)+7])+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
endif
if bfe[(i)*($C)+8]>0 then
call Tje(XJ[i],Vx,.12*bfe[(i)*($C)+8])
set b3e[(i-1)*($B)+8]="|cffffcc00"+"Địa Băng [ cấp "+I2S(bfe[(i)*($C)+8])+" ]"
set b4e[(i-1)*($B)+8]="|cffadd8e6"+"
Chịu sát thương chí mạng - "+I2S($C*bfe[(i)*($C)+8])+"%"+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
endif
if bfe[(i)*($C)+9]>0 then
call Tje(XJ[i],894,.2*bfe[(i)*($C)+9])
set b3e[(i-1)*($B)+9]="|cffffcc00"+"Địa Bích [ cấp "+I2S(bfe[(i)*($C)+9])+" ]"
set b4e[(i-1)*($B)+9]="|cffadd8e6"+"
Kháng phản đòn + "+I2S(20*bfe[(i)*($C)+9])+"%"+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
endif
if bfe[(i)*($C)+$A]>0 then
call Twe(XJ[i],.12*bfe[(i)*($C)+$A])
set b3e[(i-1)*($B)+$A]="|cffffcc00"+"Địa Linh [ cấp "+I2S(bfe[(i)*($C)+$A])+" ]"
set b4e[(i-1)*($B)+$A]="|cffadd8e6"+"
Thời gian bị trạng thái ngũ hành - "+I2S($C*bfe[(i)*($C)+$A])+"%"+"|cff6d6d6d"+"

- Tiêu hao 1 điểm tu vi để tăng cấp
- Tối đa tăng đến cấp 3"
endif
endif
endfunction
function ySe takes player p,integer i returns boolean
local integer n=bfe[(i)*($C)+1]+bfe[(i)*($C)+2]+bfe[(i)*($C)+3]+bfe[(i)*($C)+4]+bfe[(i)*($C)+5]
set n=n+bfe[(i)*($C)+6]+bfe[(i)*($C)+7]+bfe[(i)*($C)+8]+bfe[(i)*($C)+9]+bfe[(i)*($C)+$A]
if n==0 then
call Qke(p,"|cffffcc00"+"Bạn vẫn chưa nâng cấp Tâm Pháp !",5)
return false
endif
if not tHe(i,tH,0)then
call Qke(p,"|cffffcc00"+"Không đủ ngân lượng để tẩy tủy !",5)
return false
endif
if n>((bJ[i]-1)*2+bEe[i]*3)then
call QH()
endif
if bfe[(i)*($C)+1]>0 then
call T5e(XJ[i],-$B4*bfe[(i)*($C)+1])
endif
if bfe[(i)*($C)+2]>0 then
call Tje(XJ[i],4888,-'d'*bfe[(i)*($C)+2])
endif
if bfe[(i)*($C)+3]>0 then
call T6e(XJ[i],-$B4*bfe[(i)*($C)+3])
endif
if bfe[(i)*($C)+4]>0 then
call Tje(XJ[i],ax,-.12*bfe[(i)*($C)+4])
endif
if bfe[(i)*($C)+5]>0 then
call Tje(XJ[i],6780,-$C8*bfe[(i)*($C)+5])
endif
if bfe[(i)*($C)+6]>0 then
call TZe(XJ[i],-5000*bfe[(i)*($C)+6])
endif
if bfe[(i)*($C)+7]>0 then
call T3e(XJ[i],-$9C4*bfe[(i)*($C)+7])
endif
if bfe[(i)*($C)+8]>0 then
call Tje(XJ[i],Vx,-.12*bfe[(i)*($C)+8])
endif
if bfe[(i)*($C)+9]>0 then
call Tje(XJ[i],894,-.2*bfe[(i)*($C)+9])
endif
if bfe[(i)*($C)+$A]>0 then
call Twe(XJ[i],-.12*bfe[(i)*($C)+$A])
endif
set zo[i]=((bJ[i]-1)*2+bEe[i]*3)*3
call tHe(i,tH,De)
set bfe[(i)*($C)+1]=0
set bfe[(i)*($C)+2]=0
set bfe[(i)*($C)+3]=0
set bfe[(i)*($C)+4]=0
set bfe[(i)*($C)+5]=0
set bfe[(i)*($C)+6]=0
set bfe[(i)*($C)+7]=0
set bfe[(i)*($C)+8]=0
set bfe[(i)*($C)+9]=0
set bfe[(i)*($C)+$A]=0
call Qke(p,"|cffffcc00"+"Bạn đã tẩy tâm pháp, toàn bộ được đưa về cấp độ 0 và trả lại điểm tu vi đã tăng !",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),(XJ[i]),"origin"))
call yMe(i-1)
call yme(i-1)
return false
endfunction
function yte takes unit u,integer s,integer lv returns nothing
if s==1 then
call Tje(u,4888,50*lv)
elseif s==2 then
call Tje(u,7614,50*lv)
elseif s==3 then
call Tje(u,5762,50*lv)
elseif s==4 then
call Tje(u,5034,50*lv)
elseif s==5 then
call Tje(u,611,50*lv)
elseif s==6 then
call Tje(u,Ax,50*lv)
elseif s==7 then
call Tje(u,7185,50*lv)
elseif s==8 then
call Tje(u,Nx,50*lv)
elseif s==9 then
call Tje(u,6780,'d'*lv)
elseif s==$A then
call Tje(u,7695,1.*lv)
elseif s==$B then
call Tje(u,5724,1.*lv)
elseif s==$C then
call Tje(u,bx,1.*lv)
elseif s==$D then
call Tje(u,Bx,1.*lv)
elseif s==$E then
call Tje(u,cx,1.*lv)
elseif s==$F then
call Tje(u,ax,.06*lv)
elseif s==16 then
call Tje(u,Vx,.06*lv)
elseif s==17 then
call Tje(u,Cx,.06*lv)
elseif s==18 then
call T_e(u,.06*lv)
elseif s==19 then
call T4e(u,.06*lv)
elseif s==20 then
call Tje(u,vx,.1*lv)
elseif s==21 then
call Tje(u,5319,.1*lv)
elseif s==22 then
call TZe(u,$FA0*lv)
elseif s==23 then
call T3e(u,$7D0*lv)
elseif s==24 then
call Tje(u,5034,30*lv)
call Tje(u,611,30*lv)
call Tje(u,Ax,30*lv)
call Tje(u,7185,30*lv)
call Tje(u,Nx,30*lv)
elseif s==25 then
call TPe(u,2*lv)
elseif s==26 then
call Tje(u,xx,.05*lv)
else
call Tje(u,4141,.02*lv)
endif
endfunction
function yTe takes integer s,integer r returns string
if s==1 then
return"- Chí mạng + "+I2S(50*r)
elseif s==2 then
return"- Kháng chí mạng + "+I2S(50*r)
elseif s==3 then
return"- Né tránh + "+I2S(50*r)
elseif s==4 then
return"- Kháng vật công + "+I2S(50*r)
elseif s==5 then
return"- Kháng độc công + "+I2S(50*r)
elseif s==6 then
return"- Kháng băng công + "+I2S(50*r)
elseif s==7 then
return"- Kháng hỏa công + "+I2S(50*r)
elseif s==8 then
return"- Kháng lôi công + "+I2S(50*r)
elseif s==9 then
return"- Chính xác + "+I2S('d'*r)
elseif s==$A then
return"- Vật công + "+I2S('d'*r)+"%"
elseif s==$B then
return"- Độc công + "+I2S('d'*r)+"%"
elseif s==$C then
return"- Băng công + "+I2S('d'*r)+"%"
elseif s==$D then
return"- Hỏa công + "+I2S('d'*r)+"%"
elseif s==$E then
return"- Lôi công + "+I2S('d'*r)+"%"
elseif s==$F then
return"- Sát thương chí mạng + "+I2S(6*r)+"%"
elseif s==16 then
return"- Chịu sát thương chí mạng - "+I2S(6*r)+"%"
elseif s==17 then
return"- Độc sát duy trì + "+I2S(6*r)+"%"
elseif s==18 then
return"- Sinh lực tối đa + "+I2S(6*r)+"%"
elseif s==19 then
return"- Nội lực tối đa + "+I2S(6*r)+"%"
elseif s==20 then
return"- Phát huy lực tấn công kỹ năng "+I2S($A*r)+"%"
elseif s==21 then
return"- Phát huy lực tấn công cơ bản "+I2S($A*r)+"%"
elseif s==22 then
return"- Sinh lực + "+I2S($FA0*r)
elseif s==23 then
return"- Nội lực + "+I2S($7D0*r)
elseif s==24 then
return"- Kháng tất cả + "+I2S(30*r)
elseif s==25 then
return"- Tốc độ tấn công + "+I2S(2*r)
elseif s==26 then
return"- Sát thương gây ra, khuếch đại "+I2S(5*r)+"%"
else
return"- Bỏ qua kháng tính kẻ địch + "+I2S(2*r)+"%"
endif
endfunction
function yue takes integer lv returns string
if lv==1 then
return "|cff9370db"+"[ Vô Hạ ] "
elseif lv==2 then
return "|cffffa500"+"[ Phồn Hoa ] "
elseif lv==3 then
return "|cffffa500"+"[ Phong Vân ] "
elseif lv==4 then
return "|cffffff00"+"[ Kình Tiếu ] "
elseif lv==5 then
return "|cffffff00"+"[ Thiên Địa ] "
else
return "|cffffff00"+"[ Vô Cực ] "
endif
endfunction
function yUe takes integer lv returns string
if lv==1 then
return"****"
elseif lv==2 then
return"*****"
elseif lv==3 then
return"*******"
elseif lv==4 then
return"*********"
elseif lv==5 then
return"**********"
else
return"***********"
endif
endfunction
function ywe takes integer lv,integer tre returns string
if tre==7 then
set tre=6
endif
if lv==1 then
return "|cff7fff00"+"["+I2S(lv)+"/"+I2S(tre)+"] *
"
elseif lv==2 then
return "|cff0078d7"+"["+I2S(lv)+"/"+I2S(tre)+"] **
"
elseif lv==3 then
return "|cff9370db"+"["+I2S(lv)+"/"+I2S(tre)+"] ***
"
elseif lv==4 then
return "|cffffa500"+"["+I2S(lv)+"/"+I2S(tre)+"] ****
"
elseif lv==5 then
return "|cffffff00"+"["+I2S(lv)+"/"+I2S(tre)+"] *****
"
else
return "|cffffff00"+"["+I2S(lv)+"/"+I2S(tre)+"] ******
"
endif
endfunction
function yWe takes integer i returns nothing
local integer TMe=bge[(i)*(8)+1]+bge[(i)*(8)+2]+bge[(i)*(8)+3]+bge[(i)*(8)+4]+bge[(i)*(8)+5]+bge[(i)*(8)+6]+bge[(i)*(8)+7]+bge[(i)*(8)+8]
local string s="Loại: thần binh
"
local string Uae=""
local integer yye=0
set s=s+"Tài phú: "+"|cff7fff00"+I2S(Zo[i]*8000+TMe*$5DC)+"

"
set s=s+"|cffadd8e6Thuộc tính cố định|r
"
set s=s+"- Công kích + "+I2S(Zo[i]*$C8)+"

"
set s=s+"|cffadd8e6Thuộc tính thần binh|r
"
set s=s+ywe(bge[(i)*(8)+1],Zo[i]+1)+yTe(bFe[(i)*(8)+1],bge[(i)*(8)+1])+"|r
"
set s=s+ywe(bge[(i)*(8)+2],Zo[i]+1)+yTe(bFe[(i)*(8)+2],bge[(i)*(8)+2])+"|r
"
set s=s+ywe(bge[(i)*(8)+3],Zo[i]+1)+yTe(bFe[(i)*(8)+3],bge[(i)*(8)+3])+"|r
"
if Zo[i]>=2 then
set s=s+ywe(bge[(i)*(8)+4],Zo[i]+1)+yTe(bFe[(i)*(8)+4],bge[(i)*(8)+4])+"|r
"
endif
if Zo[i]>=3 then
set s=s+ywe(bge[(i)*(8)+5],Zo[i]+1)+yTe(bFe[(i)*(8)+5],bge[(i)*(8)+5])+"|r
"
endif
if Zo[i]>=4 then
set s=s+ywe(bge[(i)*(8)+6],Zo[i]+1)+yTe(bFe[(i)*(8)+6],bge[(i)*(8)+6])+"|r
"
endif
if Zo[i]>=5 then
set s=s+ywe(bge[(i)*(8)+7],Zo[i]+1)+yTe(bFe[(i)*(8)+7],bge[(i)*(8)+7])+"|r
"
endif
if Zo[i]>=6 then
set s=s+ywe(bge[(i)*(8)+8],Zo[i])+yTe(bFe[(i)*(8)+8],bge[(i)*(8)+8])+"|r"
endif
if Qb[i]==1 then
set Uae="Trường Sinh Kiếm"
elseif Qb[i]==2 then
set Uae="Tu La Đao"
elseif Qb[i]==3 then
set Uae="Bá Vương Thương"
elseif Qb[i]==4 then
set Uae="Lưu Tinh Chùy"
elseif Qb[i]==5 then
set Uae="Thanh Ma Thủ"
elseif Qb[i]==6 then
set Uae="Thiên Cơ Côn"
elseif Qb[i]==7 then
set Uae="Khổng Tước Linh"
elseif Qb[i]==8 then
set Uae="Liên Hoa Tiêu"
else
set Uae="Tử Lân Nhẫn"
endif
if Zo[i]==6 then
set yye=5
else
set yye=Zo[i]
endif
set eC=yue(Zo[i])+Uae+"
"+yUe(Zo[i])+"|r"
set oC="war3mapImported\\BTNthanbinh_"+I2S(Qb[i])+I2S(yye)+".blp"
set xC=s
set s=null
set Uae=null
endfunction
function yYe takes integer i returns integer
local integer c=0
local integer b=0
local integer rd=0
loop
exitwhen b!=0
set rd=GetRandomInt(1,27)
if bFe[(i)*(8)+1]!=rd and bFe[(i)*(8)+2]!=rd and bFe[(i)*(8)+3]!=rd and bFe[(i)*(8)+4]!=rd and bFe[(i)*(8)+5]!=rd and bFe[(i)*(8)+6]!=rd then
set b=rd
endif
endloop
return b
endfunction
function yze takes unit u,integer i returns boolean
local player p=GetOwningPlayer(u)
local item t1=Q0e(u,'I0HI')
local item t2=Q0e(u,'I01I')
local item t3=Q0e(u,'I01J')
local item t4=Q0e(u,'I01K')
local item t5=Q0e(u,bj[8])
if t1!=null and t2!=null and t3!=null and t4!=null and t5!=null then
if Zo[i]!=0 then
call Qke(p,"|cffffcc00"+"Bạn đã chế tạo Thần Binh trước đó !",5)
set p=null
return false
endif
if not tHe(i,1*tH,0)then
call Qke(p,"|cffffcc00"+"Ngân lượng không đủ !",5)
set p=null
return false
endif
if bJ[i]<3 then
call Qke(p,"|cffffcc00"+"Cấp độ trùng sinh chưa đạt !",5)
set p=null
return false
endif
call RemoveItem(t1)
call RemoveItem(t2)
call RemoveItem(t3)
call RemoveItem(t4)
call RemoveItem(t5)
call tHe(i,1*tH,De)
set Zo[i]=1
set bFe[(i)*(8)+1]=GetRandomInt(1,27)
set bFe[(i)*(8)+2]=yYe(i)
set bFe[(i)*(8)+3]=yYe(i)
set bge[(i)*(8)+1]=1
set bge[(i)*(8)+2]=1
set bge[(i)*(8)+3]=1
call TLe(XJ[i],$C8)
call yte(u,bFe[(i)*(8)+1],1)
call yte(u,bFe[(i)*(8)+2],1)
call yte(u,bFe[(i)*(8)+3],1)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+$61A8
call tCe(i,$30D4,1)
call yWe(i)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
call QKe(rj[i]+"Đã chế tạo Thần Binh !",5)
set b6e[i-1]=1
set b7e[i-1]=eC
set b8e[i-1]="
"+xC
if GetLocalPlayer()==p then
call Uge(qi,oC)
endif
else
call Qke(p,"|cffffcc00"+"Nguyên liệu không đủ để chế tạo thần binh !",5)
endif
set p=null
set t1=null
set t2=null
set t3=null
set t4=null
set t5=null
return false
endfunction
function yZe takes integer i,integer a,integer tre returns integer
local integer c=0
local integer b=0
local integer rd=0
loop
exitwhen b!=0
set rd=GetRandomInt(1,a)
if bge[(i)*(8)+rd]<tre then
set b=rd
endif
endloop
return b
endfunction
function y_e takes integer lv returns integer
if lv==1 then
return bj[8]
elseif lv==2 or lv==3 then
return bj[9]
else
return bj[$A]
endif
endfunction
function y0e takes unit u,integer i returns boolean
local player p=GetOwningPlayer(u)
local integer rd=0
local integer tre=0
local item t1=null
local item t2=null
if Zo[i]==0 then
call Qke(p,"|cffffcc00"+"Bạn vẫn chưa chế tạo Thần Binh !",5)
else
if not tHe(i,2*SH*Zo[i],0)then
call Qke(p,"|cffffcc00"+"Ngân lượng không đủ !",5)
set t1=null
set t2=null
set p=null
return false
endif
set t1=Q0e(u,vJ[Zo[i]])
set t2=Q0e(u,y_e(Zo[i]))
if Zo[i]>=6 then
call Qke(p,"|cffffcc00"+"Thần binh đã được nâng cấp tối đa, không thể tiếp tục dưỡng thành !",5)
set t1=null
set t2=null
set p=null
return false
endif
set tre=bge[(i)*(8)+1]+bge[(i)*(8)+2]+bge[(i)*(8)+3]+bge[(i)*(8)+4]+bge[(i)*(8)+5]+bge[(i)*(8)+6]+bge[(i)*(8)+7]+bge[(i)*(8)+8]
if tre>=(Zo[i]+1)*(Zo[i]+2)then
call Qke(p,"|cffffcc00"+"Tất cả các dòng thuộc tính đã đạt cấp tối đa, bạn cần nâng cấp để tiếp tục dưỡng thành !",5)
set t1=null
set t2=null
set p=null
return false
endif
if t1!=null and t2!=null then
call RemoveItem(t1)
call RemoveItem(t2)
call tHe(i,2*SH*Zo[i],De)
set rd=yZe(i,2+Zo[i],Zo[i]+1)
set bge[(i)*(8)+rd]=bge[(i)*(8)+rd]+1
call yte(u,bFe[(i)*(8)+rd],1)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+$BB8
call tCe(i,$5DC,1)
call yWe(i)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
call Qke(p,"Bạn đã dưỡng thành thuộc tính Thần Binh dòng "+I2S(rd)+" !",5)
set b6e[i-1]=1
set b7e[i-1]=eC
set b8e[i-1]="
"+xC
if GetLocalPlayer()==p then
call Uge(qi,oC)
endif
else
call Qke(p,"|cffffcc00"+"Số lượng vật phẩm trong hành trang không đúng !",5)
endif
endif
set t1=null
set t2=null
set p=null
return false
endfunction
function y1e takes unit u,integer i,item t returns boolean
local player p=GetOwningPlayer(u)
local integer s=S2I(BlzGetItemDescription(t))
local integer rd=0
local item t2=null
if Zo[i]==0 then
call Qke(p,"|cffffcc00"+"Bạn vẫn chưa chế tạo Thần Binh !",5)
else
if not tHe(i,3*SH,0)then
call Qke(p,"|cffffcc00"+"Ngân lượng không đủ !",5)
call RemoveItem(t)
set t2=null
set p=null
return false
endif
if bFe[(i)*(8)+s]==0 then
call Qke(p,"|cffffcc00"+"Bạn vẫn chưa kích hoạt dòng thuộc tính này !",5)
call RemoveItem(t)
set t2=null
set p=null
return false
endif
if s<=3 then
set t2=Q0e(u,'I0GL')
if t2!=null then
call Qke(p,"|cffffcc00"+"Sử dụng Tử Thủy Tinh để tẩy luyện !",5)
else
set t2=Q0e(u,vJ[Zo[i]])
endif
else
set t2=Q0e(u,vJ[Zo[i]])
endif
if t2!=null then
call RemoveItem(t2)
call tHe(i,3*SH,De)
call yte(u,bFe[(i)*(8)+s],-1*bge[(i)*(8)+s])
set rd=yYe(i)
set bFe[(i)*(8)+s]=rd
call yte(u,bFe[(i)*(8)+s],bge[(i)*(8)+s])
call yWe(i)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
call Qke(p,"Bạn đã tẩy luyện thuốc tính thần binh dòng "+I2S(s)+" thành thuộc tính mới !",5)
set b6e[i-1]=1
set b7e[i-1]=eC
set b8e[i-1]="
"+xC
if GetLocalPlayer()==p then
call Uge(qi,oC)
endif
endif
endif
call RemoveItem(t)
set t2=null
set p=null
return false
endfunction
function y2e takes unit u,integer i returns boolean
local player p=GetOwningPlayer(u)
local integer rd=0
local integer s=0
local item t2=null
local item t1=null
if Zo[i]==0 then
call Qke(p,"|cffffcc00"+"Bạn vẫn chưa chế tạo Thần Binh !",5)
else
if not tHe(i,2*tH,0)then
call Qke(p,"|cffffcc00"+"Ngân lượng không đủ !",5)
set t2=null
set t1=null
set p=null
return false
endif
if Zo[i]>=6 then
call Qke(p,"|cffffcc00"+"Thần binh đã đạt cấp độ tối đa, không thể tiếp tục nâng cấp !",5)
set t2=null
set t1=null
set p=null
return false
endif
if bge[(i)*(8)+1]!=Zo[i]+1 then
call Qke(p,"|cffffcc00"+"Bạn cần dưỡng thành tối đa các thuộc tính để nâng cấp !",5)
set t2=null
set t1=null
set p=null
return false
endif
if bge[(i)*(8)+2]!=Zo[i]+1 then
call Qke(p,"|cffffcc00"+"Bạn cần dưỡng thành tối đa các thuộc tính để nâng cấp !",5)
set t2=null
set t1=null
set p=null
return false
endif
if bge[(i)*(8)+3]!=Zo[i]+1 then
call Qke(p,"|cffffcc00"+"Bạn cần dưỡng thành tối đa các thuộc tính để nâng cấp !",5)
set t2=null
set t1=null
set p=null
return false
endif
if bge[(i)*(8)+4]!=Zo[i]+1 and bFe[(i)*(8)+4]!=0 then
call Qke(p,"|cffffcc00"+"Bạn cần dưỡng thành tối đa các thuộc tính để nâng cấp !",5)
set t2=null
set t1=null
set p=null
return false
endif
if bge[(i)*(8)+5]!=Zo[i]+1 and bFe[(i)*(8)+5]!=0 then
call Qke(p,"|cffffcc00"+"Bạn cần dưỡng thành tối đa các thuộc tính để nâng cấp !",5)
set t2=null
set t1=null
set p=null
return false
endif
if bge[(i)*(8)+6]!=Zo[i]+1 and bFe[(i)*(8)+6]!=0 then
call Qke(p,"|cffffcc00"+"Bạn cần dưỡng thành tối đa các thuộc tính để nâng cấp !",5)
set t2=null
set t1=null
set p=null
return false
endif
if bge[(i)*(8)+7]!=Zo[i]+1 and bFe[(i)*(8)+7]!=0 then
call Qke(p,"|cffffcc00"+"Bạn cần dưỡng thành tối đa các thuộc tính để nâng cấp !",5)
set t2=null
set t1=null
set p=null
return false
endif
set t2=Q0e(u,vJ[Zo[i]+1])
set t1=Q0e(u,bj[9])
if t2!=null and t1!=null then
call RemoveItem(t1)
call RemoveItem(t2)
call tHe(i,2*tH,De)
set Zo[i]=Zo[i]+1
call TLe(XJ[i],$C8)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+(8000+Zo[i]*$5DC)*2
call tCe(i,8000+Zo[i]*$5DC,1)
set s=Zo[i]+2
set rd=yYe(i)
set bFe[(i)*(8)+s]=rd
set bge[(i)*(8)+s]=Zo[i]
call yte(u,bFe[(i)*(8)+s],bge[(i)*(8)+s])
call yWe(i)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
call Qke(p,"Bạn đã nâng cấp Thần Binh, thật bá đạo !",5)
set b6e[i-1]=1
set b7e[i-1]=eC
set b8e[i-1]="
"+xC
if GetLocalPlayer()==p then
call Uge(qi,oC)
endif
endif
endif
set t1=null
set t2=null
set p=null
return false
endfunction
function y3e takes unit u,integer i returns nothing
local string s=""
local player p=GetOwningPlayer(u)
local integer TMe=0
set Zo[i]=che[($DC)*(6)+i]
set s=I2S(che[($CF)*(6)+i])
set bFe[(i)*(8)+1]=S2I(SubString(s,1,3))
set bge[(i)*(8)+1]=S2I(SubString(s,3,4))
set s=I2S(che[($D0)*(6)+i])
set bFe[(i)*(8)+2]=S2I(SubString(s,1,3))
set bge[(i)*(8)+2]=S2I(SubString(s,3,4))
set s=I2S(che[($D1)*(6)+i])
set bFe[(i)*(8)+3]=S2I(SubString(s,1,3))
set bge[(i)*(8)+3]=S2I(SubString(s,3,4))
set s=I2S(che[($D2)*(6)+i])
set bFe[(i)*(8)+4]=S2I(SubString(s,1,3))
set bge[(i)*(8)+4]=S2I(SubString(s,3,4))
set s=I2S(che[($D3)*(6)+i])
set bFe[(i)*(8)+5]=S2I(SubString(s,1,3))
set bge[(i)*(8)+5]=S2I(SubString(s,3,4))
set s=I2S(che[($D9)*(6)+i])
set bFe[(i)*(8)+6]=S2I(SubString(s,1,3))
set bge[(i)*(8)+6]=S2I(SubString(s,3,4))
set s=I2S(che[($DA)*(6)+i])
set bFe[(i)*(8)+7]=S2I(SubString(s,1,3))
set bge[(i)*(8)+7]=S2I(SubString(s,3,4))
set s=I2S(che[($DB)*(6)+i])
set bFe[(i)*(8)+8]=S2I(SubString(s,1,3))
set bge[(i)*(8)+8]=S2I(SubString(s,3,4))
set TMe=bge[(i)*(8)+1]+bge[(i)*(8)+2]+bge[(i)*(8)+3]+bge[(i)*(8)+4]+bge[(i)*(8)+5]+bge[(i)*(8)+6]+bge[(i)*(8)+7]+bge[(i)*(8)+8]
call yte(XJ[i],bFe[(i)*(8)+1],bge[(i)*(8)+1])
call yte(XJ[i],bFe[(i)*(8)+2],bge[(i)*(8)+2])
call yte(XJ[i],bFe[(i)*(8)+3],bge[(i)*(8)+3])
if bFe[(i)*(8)+4]>0 then
call yte(XJ[i],bFe[(i)*(8)+4],bge[(i)*(8)+4])
endif
if bFe[(i)*(8)+5]>0 then
call yte(XJ[i],bFe[(i)*(8)+5],bge[(i)*(8)+5])
endif
if bFe[(i)*(8)+6]>0 then
call yte(XJ[i],bFe[(i)*(8)+6],bge[(i)*(8)+6])
endif
if bFe[(i)*(8)+7]>0 then
call yte(XJ[i],bFe[(i)*(8)+7],bge[(i)*(8)+7])
endif
if bFe[(i)*(8)+8]>0 then
call yte(XJ[i],bFe[(i)*(8)+8],bge[(i)*(8)+8])
endif
call TLe(XJ[i],$C8*Zo[i])
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+(Zo[i]*8000+TMe*$5DC)*2
call tCe(i,(Zo[i]*8000+TMe*$5DC),1)
call yWe(i)
set b6e[i-1]=1
set b7e[i-1]=eC
set b8e[i-1]="
"+xC
if GetLocalPlayer()==p then
call Uge(qi,oC)
endif
set s=null
set p=null
endfunction
function y4e takes integer i returns nothing
local integer a=bJ[i]*$F
local integer b=0
set a=a+bEe[i]*$F
set b=cbe[(i)*(20)+1]+cbe[(i)*(20)+2]+cbe[(i)*(20)+3]+cbe[(i)*(20)+4]+cbe[(i)*(20)+5]+cbe[(i)*(20)+6]+cbe[(i)*(20)+7]+cbe[(i)*(20)+8]
set a=a+b
set a=a+JA[i]/ 2*5
set a=a+So[i]*2
set b=bfe[(i)*($C)+1]+bfe[(i)*($C)+2]+bfe[(i)*($C)+3]+bfe[(i)*($C)+4]+bfe[(i)*($C)+5]+bfe[(i)*($C)+6]
set b=b+bfe[(i)*($C)+7]+bfe[(i)*($C)+8]+bfe[(i)*($C)+9]+bfe[(i)*($C)+$A]
set a=a+b*2
set a=a+bUe[(i)*(20)+1]
set a=a+bUe[(i)*(20)+2]
set b=bRe[(i)*(20)+1]+bRe[(i)*(20)+2]+bRe[(i)*(20)+3]+bRe[(i)*(20)+5]+bRe[(i)*(20)+6]+bRe[(i)*(20)+7]+bRe[(i)*(20)+8]+bRe[(i)*(20)+9]+bRe[(i)*(20)+$A]+bRe[(i)*(20)+$B]
set a=a+b*2
set a=a+bUe[(i)*(20)+3]*2
set a=a+NJ[i]*$F
set a=a+gJ[i]*$A
set b=R2I(I2R(yr[i]+Yr[i])/ 2)
set a=a+b
set b=cxe[(i)*(20)+1]+cxe[(i)*(20)+2]+cxe[(i)*(20)+3]+cxe[(i)*(20)+4]
if b>=4 then
set b=b-3
endif
set a=a+b*3
set a=a+jo[i]*$F
set a=a+bUe[(i)*(20)+4]*2
set a=a+ir[i]*4
set b=bHe[(i)*(20)+1]+bHe[(i)*(20)+2]
set a=a+b*6
set b=bee[(i)*(8)+1]+bee[(i)*(8)+2]+bee[(i)*(8)+3]+bee[(i)*(8)+4]+bee[(i)*(8)+5]+bee[(i)*(8)+6]+bee[(i)*(8)+7]+bee[(i)*(8)+8]
set a=a+b
set a=a+Zo[i]*$A
set a=a+SI[i]*2
set b=bKe[(i)*(20)+1]+bKe[(i)*(20)+2]+bKe[(i)*(20)+3]+bKe[(i)*(20)+4]+bKe[(i)*(20)+5]+bKe[(i)*(20)+6]
set a=a+b*3
set b=R2I(I2R(BMe[(i)*(20)+1]+BMe[(i)*(20)+2]+BMe[(i)*(20)+3])/ 'd')
set a=a+b*$A
set b=bAe[(i)*(20)+1]+bAe[(i)*(20)+2]+bAe[(i)*(20)+3]+bAe[(i)*(20)+4]
set a=a+b*5
set bGe[(i)*(20)+1]=a
set bGe[(i)*(20)+2]=a*2
endfunction
function y5e takes player p,integer id returns nothing
local integer i=id+1
local string s=""
local integer a=0
local integer b=0
call y4e(i)
set s="|cffffff00"+"Điểm thành tựu: "+I2S(bGe[(i)*(20)+1])+"|r"
set a=bJ[i]*$F
set s=s+"

- Trùng sinh: "+I2S(bJ[i])+"/9"+"|cff7fff00"+" ["+I2S(a)+"]
|r"
set a=bEe[i]*$F
set s=s+"- Hóa cảnh: "+I2S(bEe[i])+"/3"+"|cff7fff00"+" ["+I2S(a)+"]
|r"
set a=cbe[(i)*(20)+1]+cbe[(i)*(20)+2]+cbe[(i)*(20)+3]+cbe[(i)*(20)+4]+cbe[(i)*(20)+5]+cbe[(i)*(20)+6]+cbe[(i)*(20)+7]+cbe[(i)*(20)+8]
set s=s+"- Kinh mạch: "+I2S(a)+"/64"+"|cff7fff00"+" ["+I2S(a)+"]
|r"
set a=JA[i]/ 2*5
set s=s+"- Tẩy tủy kinh: "+I2S(JA[i]/ 2)+"/10"+"|cff7fff00"+" ["+I2S(a)+"]
|r"
set a=So[i]*2
set s=s+"- Mật tịch: "+I2S(So[i])+"/40"+"|cff7fff00"+" ["+I2S(a)+"]
|r"
set b=bfe[(i)*($C)+1]+bfe[(i)*($C)+2]+bfe[(i)*($C)+3]+bfe[(i)*($C)+4]+bfe[(i)*($C)+5]+bfe[(i)*($C)+6]
set b=b+bfe[(i)*($C)+7]+bfe[(i)*($C)+8]+bfe[(i)*($C)+9]+bfe[(i)*($C)+$A]
set a=b*2
set s=s+"- Tâm pháp: "+I2S(b)+"/25"+"|cff7fff00"+" ["+I2S(a)+"]|r"
set Bee[(id)*(16)+1]="
"+s
set s="|cffffff00"+"Điểm thành tựu: "+I2S(bGe[(i)*(20)+1])+"|r"
set a=bUe[(i)*(20)+1]
set s=s+"

- Tổng cấp độ trang bị: "+I2S(bUe[(i)*(20)+1])+"/130"+"|cff7fff00"+" ["+I2S(a)+"]
|r"
set a=bUe[(i)*(20)+2]
set s=s+"- Tổng cấp độ cường hóa trang bị: "+I2S(bUe[(i)*(20)+2])+"/160"+"|cff7fff00"+" ["+I2S(a)+"]
|r"
set b=bRe[(i)*(20)+1]+bRe[(i)*(20)+2]+bRe[(i)*(20)+3]+bRe[(i)*(20)+5]+bRe[(i)*(20)+6]+bRe[(i)*(20)+7]+bRe[(i)*(20)+8]+bRe[(i)*(20)+9]+bRe[(i)*(20)+$A]+bRe[(i)*(20)+$B]
set a=b*2
set s=s+"- Tổng cấp độ tinh chú trang bị: "+I2S(b)+"/40"+"|cff7fff00"+" ["+I2S(a)+"]
|r"
set a=bUe[(i)*(20)+3]*2
set s=s+"- Tổng số bảo thạch đã khảm: "+I2S(bUe[(i)*(20)+3])+"/30"+"|cff7fff00"+" ["+I2S(a)+"]
|r"
set a=NJ[i]*$F
set s=s+"- Phi phong: "+I2S(NJ[i])+"/14"+"|cff7fff00"+" ["+I2S(a)+"]
|r"
set a=gJ[i]*$A
set s=s+"- Quan ấn: "+I2S(gJ[i])+"/8"+"|cff7fff00"+" ["+I2S(a)+"]
|r"
set a=R2I(I2R(yr[i]+Yr[i])/ 2)
set s=s+"- Luyện hóa ngũ hành ấn: "+I2S(yr[i]+Yr[i])+"/160"+"|cff7fff00"+" ["+I2S(a)+"]
|r"
set b=cxe[(i)*(20)+1]+cxe[(i)*(20)+2]+cxe[(i)*(20)+3]+cxe[(i)*(20)+4]
if b>=4 then
set b=b-3
endif
set a=b*3
set s=s+"- Cấp độ chân nguyên: "+I2S(b)+"/30"+"|cff7fff00"+" ["+I2S(a)+"]
|r"
set a=jo[i]*$F
set s=s+"- Huy chương: "+I2S(jo[i])+"/5"+"|cff7fff00"+" ["+I2S(a)+"]
|r"
set a=bUe[(i)*(20)+4]*2
set s=s+"- Tổng cấp độ bí bảo: "+I2S(bUe[(i)*(20)+4])+"/36"+"|cff7fff00"+" ["+I2S(a)+"]
|r"
set a=ir[i]*4
set s=s+"- Tín vật bang hội: "+I2S(ir[i])+"/20"+"|cff7fff00"+" ["+I2S(a)+"]
|r"
set b=bHe[(i)*(20)+1]+bHe[(i)*(20)+2]
set a=b*6
set s=s+"- Tổng cấp độ trang bị anh hùng: "+I2S(b)+"/18"+"|cff7fff00"+" ["+I2S(a)+"]
|r"
set a=bee[(i)*(8)+1]+bee[(i)*(8)+2]+bee[(i)*(8)+3]+bee[(i)*(8)+4]+bee[(i)*(8)+5]+bee[(i)*(8)+6]+bee[(i)*(8)+7]+bee[(i)*(8)+8]
set s=s+"- Tổng cấp độ chân linh: "+I2S(a)+"/72"+"|cff7fff00"+" ["+I2S(a)+"]
|r"
set a=Zo[i]*$A
set s=s+"- Cấp độ thần binh: "+I2S(Zo[i])+"/6"+"|cff7fff00"+" ["+I2S(a)+"]|r"
set Bee[(id)*(16)+2]="
"+s
set s="|cffffff00"+"Điểm thành tựu: "+I2S(bGe[(i)*(20)+1])+"|r"
set a=SI[i]*2
set s=s+"

- Cấp độ đồng hành: "+I2S(SI[i])+"/30"+"|cff7fff00"+" ["+I2S(a)+"]
|r"
set b=bKe[(i)*(20)+1]+bKe[(i)*(20)+2]+bKe[(i)*(20)+3]+bKe[(i)*(20)+4]+bKe[(i)*(20)+5]+bKe[(i)*(20)+6]
set a=b*3
set s=s+"- Tổng cấp độ trang bị đồng hành: "+I2S(b)+"/24"+"|cff7fff00"+" ["+I2S(a)+"]
|r"
set b=BMe[(i)*(20)+1]+BMe[(i)*(20)+2]+BMe[(i)*(20)+3]
set a=R2I(I2R(b)/ 'd')*$A
set s=s+"- Căn cốt thú cưỡi: "+I2S(b)+"/600"+"|cff7fff00"+" ["+I2S(a)+"]
|r"
set b=bAe[(i)*(20)+1]+bAe[(i)*(20)+2]+bAe[(i)*(20)+3]+bAe[(i)*(20)+4]
set a=b*5
set s=s+"- Tổng cấp độ kỹ năng thú cưỡi: "+I2S(b)+"/12"+"|cff7fff00"+" ["+I2S(a)+"]|r"
set Bee[(id)*(16)+3]="
"+s
if bGe[(i)*(20)+5]==1 then
set Bee[(id)*(16)+5]="
"+"|cff6d6d6d"+"[ Đã hoàn thành ]

"+"|cffadd8e6"+"Đạt 1200 điểm năng động trong 120 phút

Danh hiệu: "+"|cff7fff00"+"Lãng Tử Tiêu Dao"
else
set Bee[(id)*(16)+5]="
"+"|cffadd8e6"+"Đạt 1200 điểm năng động trong 120 phút

Danh hiệu: "+"|cff6d6d6d"+"Lãng Tử Tiêu Dao"
endif
if bhe[(i)*($A)+1]/ 2>=99000 then
set Bee[(id)*(16)+6]="
"+"|cff6d6d6d"+"[ Đã hoàn thành ]

"+"|cffadd8e6"+"Tổng số quái vật đã tiêu diệt được "+I2S(bhe[(i)*($A)+1]/ 2)+"/99000

Danh hiệu: "+"|cff7fff00"+"Giương Đao Ngạo Nghễ"
else
set Bee[(id)*(16)+6]="
"+"|cffadd8e6"+"Tổng số quái vật đã tiêu diệt được "+I2S(bhe[(i)*($A)+1]/ 2)+"/99000

Danh hiệu: "+"|cff6d6d6d"+"Giương Đao Ngạo Nghễ"
endif
if bhe[(i)*($A)+2]/ 2>=$C8 then
set Bee[(id)*(16)+7]="
"+"|cff6d6d6d"+"[ Đã hoàn thành ]

"+"|cffadd8e6"+"Vận tiêu đạt "+I2S(bhe[(i)*($A)+2]/ 2)+"/200 lần

Danh hiệu: "+"|cff7fff00"+"Ngược Xuôi Nam Bắc"
else
set Bee[(id)*(16)+7]="
"+"|cffadd8e6"+"Vận tiêu đạt "+I2S(bhe[(i)*($A)+2]/ 2)+"/200 lần

Danh hiệu: "+"|cff6d6d6d"+"Ngược Xuôi Nam Bắc"
endif
set a=(GetPlayerState((p),PLAYER_STATE_RESOURCE_LUMBER))-Bne[(i)*(5)+3]/ 2
if a>=$2710 then
set Bee[(id)*(16)+8]="
"+"|cff6d6d6d"+"[ Đã hoàn thành ]

"+"|cffadd8e6"+"Sử dụng "+I2S(a)+"/10000 đồng (nhận được khi nâng cấp VIP)

Danh hiệu: "+"|cff7fff00"+"Tiền Khắp Bốn Bể"
else
set Bee[(id)*(16)+8]="
"+"|cffadd8e6"+"Sử dụng "+I2S(a)+"/10000 đồng (nhận được khi nâng cấp VIP)

Danh hiệu: "+"|cff6d6d6d"+"Tiền Khắp Bốn Bể"
endif
if bhe[(i)*($A)+3]/ 2>='d' then
set Bee[(id)*(16)+9]="
"+"|cff6d6d6d"+"[ Đã hoàn thành ]

"+"|cffadd8e6"+"Số lượng cây bát nhã đã trồng đạt "+I2S(bhe[(i)*($A)+3]/ 2)+"/100

Danh hiệu: "+"|cff7fff00"+"Bốn Mùa Vui Ca"
else
set Bee[(id)*(16)+9]="
"+"|cffadd8e6"+"Số lượng cây bát nhã đã trồng đạt "+I2S(bhe[(i)*($A)+3]/ 2)+"/100

Danh hiệu: "+"|cff6d6d6d"+"Bốn Mùa Vui Ca"
endif
if bhe[(i)*($A)+4]/ 2>=500 then
set Bee[(id)*(16)+$A]="
"+"|cff6d6d6d"+"[ Đã hoàn thành ]

"+"|cffadd8e6"+"Hoàn thành nhiệm vụ hải tặc đạt "+I2S(bhe[(i)*($A)+4]/ 2)+"/500

Danh hiệu: "+"|cff7fff00"+"Say Trọn Đêm Nay"
else
set Bee[(id)*(16)+$A]="
"+"|cffadd8e6"+"Hoàn thành nhiệm vụ hải tặc đạt "+I2S(bhe[(i)*($A)+4]/ 2)+"/500

Danh hiệu: "+"|cff6d6d6d"+"Say Trọn Đêm Nay"
endif
if bhe[(i)*($A)+5]/ 2>=500 then
set Bee[(id)*(16)+$B]="
"+"|cff6d6d6d"+"[ Đã hoàn thành ]

"+"|cffadd8e6"+"Đào "+I2S(bhe[(i)*($A)+5]/ 2)+"/500 tàng bảo đồ

Danh hiệu: "+"|cff7fff00"+"Ngọc Thụ Lâm Phong"
else
set Bee[(id)*(16)+$B]="
"+"|cffadd8e6"+"Đào "+I2S(bhe[(i)*($A)+5]/ 2)+"/500 tàng bảo đồ

Danh hiệu: "+"|cff6d6d6d"+"Ngọc Thụ Lâm Phong"
endif
if bGe[(i)*(20)+$C]==1 then
set Bee[(id)*(16)+$C]="
"+"|cff6d6d6d"+"[ Đã hoàn thành ]

"+"|cffadd8e6"+"Mở Bách Bảo Rương nhận được Huyền Tinh Vô Hạ (cấp 9)

Danh hiệu: "+"|cff7fff00"+"Kim Ngọc Mãn Đường"
else
set Bee[(id)*(16)+$C]="
"+"|cffadd8e6"+"Mở Bách Bảo Rương nhận được Huyền Tinh Vô Hạ (cấp 9)

Danh hiệu: "+"|cff6d6d6d"+"Kim Ngọc Mãn Đường"
endif
if bGe[(i)*(20)+$D]==1 then
set Bee[(id)*(16)+$D]="
"+"|cff6d6d6d"+"[ Đã hoàn thành ]

"+"|cffadd8e6"+"Vượt qua 30 ải Bạch Hổ Đường

Danh hiệu: "+"|cff7fff00"+"Nghĩa Bạc Thanh Vân"
else
set Bee[(id)*(16)+$D]="
"+"|cffadd8e6"+"Vượt qua 30 ải Bạch Hổ Đường

Danh hiệu: "+"|cff6d6d6d"+"Nghĩa Bạc Thanh Vân"
endif
if bGe[(i)*(20)+$E]==1 then
set Bee[(id)*(16)+$E]="
"+"|cff6d6d6d"+"[ Đã hoàn thành ]

"+"|cffadd8e6"+"Đánh bại Âu Dương Phong tại Hoa Sơn Luận Kiếm (Địa Ngục) trong vòng 10 phút và 1 lần khiêu chiến

Danh hiệu: "+"|cff7fff00"+"Võ Lâm Tông Sư"
else
set Bee[(id)*(16)+$E]="
"+"|cffadd8e6"+"Đánh bại Âu Dương Phong tại Hoa Sơn Luận Kiếm (Địa Ngục) trong vòng 10 phút và 1 lần khiêu chiến

Danh hiệu: "+"|cff6d6d6d"+"Võ Lâm Tông Sư"
endif
if cce[(i)*(20)+1]>=800 then
set Bee[(id)*(16)+$F]="
"+"|cff6d6d6d"+"[ Đã hoàn thành ]

"+"|cffadd8e6"+"Hoàn thành nhiệm vụ thương hội đạt tích lũy "+I2S(cce[(i)*(20)+1])+"/800

Danh hiệu: "+"|cff7fff00"+"Kiên Trì Sẽ Thắng"
else
set Bee[(id)*(16)+$F]="
"+"|cffadd8e6"+"Hoàn thành nhiệm vụ thương hội đạt tích lũy "+I2S(cce[(i)*(20)+1])+"/800

Danh hiệu: "+"|cff6d6d6d"+"Kiên Trì Sẽ Thắng"
endif
if bGe[(i)*(20)+16]==1 then
set Bee[(id)*(16)+16]="
"+"|cff6d6d6d"+"[ Đã hoàn thành ]

"+"|cffadd8e6"+"Chiếm 8 lãnh thổ trong 5 phút khi tham gia Tranh Đoạt Lãnh Thổ

Danh hiệu: "+"|cff7fff00"+"Đường Đến Bản Doanh"
else
set Bee[(id)*(16)+16]="
"+"|cffadd8e6"+"Chiếm 8 lãnh thổ trong 5 phút khi tham gia Tranh Đoạt Lãnh Thổ

Danh hiệu: "+"|cff6d6d6d"+"Đường Đến Bản Doanh"
endif
set s=null
endfunction
function y6e takes integer i returns boolean
return(S2I(SubString(Zi[Kk[i]],5,6))>=3)
endfunction
function y7e takes unit u,player p,integer i,item t returns boolean
local string s=BlzGetItemDescription(t)
local integer lv=S2I(SubString(s,0,1))
local integer tt=S2I(SubString(s,1,3))*'d'
local integer ck=S2I(SubString(s,3,5))*sH
local integer nt=S2I(SubString(s,5,7))*K1
if bGe[(i)*(20)+1]*2!=bGe[(i)*(20)+2]then
call RemoveItem(t)
set s=null
return false
endif
if vr[i]<lv-1 then
call Qke(p,"|cffffcc00"+"Không đúng thứ tự nhận thưởng !",5)
call RemoveItem(t)
set s=null
return false
endif
if vr[i]>lv-1 then
call Qke(p,"|cffffcc00"+"Bạn đã nhận phần thưởng này rồi !",5)
call RemoveItem(t)
set s=null
return false
endif
if bGe[(i)*(20)+1]<tt then
call Qke(p,"|cffffcc00"+"Điểm thành tựu chưa đủ để nhận thưởng (-tt1 hoặc -tt2 để kiểm tra) !",5)
call RemoveItem(t)
set s=null
return false
endif
call Qke(p,"|cffffcc00"+"Bạn đã nhận phần thưởng thành tựu mốc "+I2S(tt),5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
set vr[i]=lv
if lv==1 then
call tHe(i,(lv+1)*SH,1)
call tFe(i,ck,1)
call tfe(i,nt,1)
call UnitAddItemById(OJ[i],bj[8])
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BJ')
if y6e(i)then
call UnitAddItemById(OJ[i],bj[7])
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BJ')
endif
elseif lv==2 then
call tHe(i,(lv+1)*SH,1)
call tFe(i,ck,1)
call tfe(i,nt,1)
call UnitAddItemById(OJ[i],bj[8])
call UnitAddItemById(OJ[i],bj[8])
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BJ')
if y6e(i)then
call UnitAddItemById(OJ[i],bj[7])
call UnitAddItemById(OJ[i],bj[7])
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BJ')
endif
elseif lv==3 then
call tHe(i,(lv+1)*SH,1)
call tFe(i,ck,1)
call tfe(i,nt,1)
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BJ')
if y6e(i)then
call UnitAddItemById(OJ[i],bj[8])
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BJ')
endif
elseif lv==4 then
call tHe(i,(lv+1)*SH,1)
call tFe(i,ck,1)
call tfe(i,nt,1)
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
if y6e(i)then
call UnitAddItemById(OJ[i],bj[8])
call UnitAddItemById(OJ[i],bj[8])
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
endif
elseif lv==5 then
call tHe(i,(lv+1)*SH,1)
call tFe(i,ck,1)
call tfe(i,nt,1)
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
if y6e(i)then
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
endif
elseif lv==6 then
call tHe(i,(lv+1)*SH,1)
call tFe(i,ck,1)
call tfe(i,nt,1)
call UnitAddItemById(OJ[i],bj[$A])
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
if y6e(i)then
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
endif
elseif lv==7 then
call tHe(i,(lv+1)*SH,1)
call tFe(i,ck,1)
call tfe(i,nt,1)
call UnitAddItemById(OJ[i],bj[$B])
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
if y6e(i)then
call UnitAddItemById(OJ[i],bj[$A])
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
endif
elseif lv==8 then
call tHe(i,(lv+1)*SH,1)
call tFe(i,ck,1)
call tfe(i,nt,1)
call UnitAddItemById(OJ[i],bj[$B])
call UnitAddItemById(OJ[i],bj[$B])
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
if y6e(i)then
call UnitAddItemById(OJ[i],bj[$A])
call UnitAddItemById(OJ[i],bj[$A])
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
endif
endif
call RemoveItem(t)
set s=null
return false
endfunction
function y8e takes unit u,player p,integer i,integer w5e returns nothing
if bGe[(i)*(20)+1]*2==bGe[(i)*(20)+2]then
if w5e=='I0BW' then
if bGe[(i)*(20)+1]>='d' and tHe(i,2*SH,0)then
call tHe(i,2*SH,De)
call UnitAddItemById(OJ[i],'I045')
call Qke(p,"|cffffcc00"+"Vật phẩm được chuyển về rương !",5)
else
call Qke(p,"|cffffcc00"+"Không đủ điều kiện",3)
endif
elseif w5e=='I0BX' then
if bGe[(i)*(20)+1]>=600 and tHe(i,2*tH,0)then
call tHe(i,2*tH,De)
call UnitAddItemById(OJ[i],'I0AC')
call Qke(p,"|cffffcc00"+"Vật phẩm được chuyển về rương !",5)
else
call Qke(p,"|cffffcc00"+"Không đủ điều kiện",3)
endif
endif
endif
endfunction
function y9e takes unit u,player p,integer i,item t returns boolean
local string s=BlzGetItemDescription(t)
local integer lv=S2I(SubString(s,0,1))
local integer pd=t4e(i)
if xr[i]<lv-1 then
call Qke(p,"|cffffcc00"+"Không đúng thứ tự nhận thưởng !",5)
call RemoveItem(t)
set s=null
return false
endif
if xr[i]>lv-1 then
call Qke(p,"|cffffcc00"+"Bạn đã nhận phần thưởng này rồi !",5)
call RemoveItem(t)
set s=null
return false
endif
if pd<lv*6 then
call Qke(p,"|cffffcc00"+"Điểm lịch luyện chưa đủ để nhận thưởng !",5)
call RemoveItem(t)
set s=null
return false
endif
call Qke(p,"|cffffcc00"+"Bạn đã nhận phần thưởng lịch luyện mốc "+I2S(lv*6),5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
set xr[i]=lv
if lv==1 then
call tHe(i,(lv+1)*SH,1)
call tfe(i,$7D0,1)
call t2e(i,$96)
call UnitAddItemById(OJ[i],bj[7])
call UnitAddItemById(OJ[i],bj[7])
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
elseif lv==2 then
call tHe(i,(lv+1)*SH,1)
call tfe(i,$BB8,1)
call t2e(i,$96)
call UnitAddItemById(OJ[i],bj[8])
call UnitAddItemById(OJ[i],bj[8])
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
elseif lv==3 then
call tHe(i,(lv+1)*SH,1)
call tfe(i,$FA0,1)
call t2e(i,$96)
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
elseif lv==4 then
call tHe(i,(lv+1)*SH,1)
call tfe(i,6000,1)
call t2e(i,$96)
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
elseif lv==5 then
call tHe(i,(lv+1)*SH,1)
call tfe(i,8000,1)
call t2e(i,$96)
call UnitAddItemById(OJ[i],bj[$A])
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
elseif lv==6 then
call tHe(i,(lv+1)*SH,1)
call tfe(i,$2710,1)
call t2e(i,$96)
call UnitAddItemById(OJ[i],bj[$A])
call UnitAddItemById(OJ[i],bj[$A])
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
elseif lv==7 then
call tHe(i,(lv+1)*SH,1)
call tfe(i,$2EE0,1)
call t2e(i,$96)
call UnitAddItemById(OJ[i],bj[$B])
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
elseif lv==8 then
call tHe(i,(lv+1)*SH,1)
call tfe(i,$36B0,1)
call t2e(i,$96)
call UnitAddItemById(OJ[i],bj[$B])
call UnitAddItemById(OJ[i],bj[$B])
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
elseif lv==9 then
call tHe(i,(lv+1)*SH,1)
call tfe(i,$3E80,1)
call t2e(i,$96)
call UnitAddItemById(OJ[i],bj[$B])
call UnitAddItemById(OJ[i],bj[$B])
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
elseif lv==$A then
call tHe(i,(lv+1)*SH,1)
call tfe(i,$4650,1)
call t2e(i,$96)
call UnitAddItemById(OJ[i],bj[$C])
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
endif
call RemoveItem(t)
set s=null
return false
endfunction
function Yve takes integer lv returns string
if lv>=16 then
return "|cffffff00"
elseif lv>=8 then
return "|cffffa500"
elseif lv>=6 then
return "|cff9370db"
elseif lv>=4 then
return "|cff0078d7"
else
return "|cff7fff00"
endif
endfunction
function Yee takes integer lv returns integer
if lv>=18 then
return 8
elseif lv>=16 then
return 7
elseif lv>=$C then
return 6
elseif lv>=8 then
return 5
elseif lv>=6 then
return 4
elseif lv>=4 then
return 3
elseif lv>=2 then
return 2
else
return 1
endif
endfunction
function Yxe takes integer lv returns string
if lv==20 then
return"***********"
elseif lv>=18 then
return"**********"
elseif lv>=16 then
return"*********"
elseif lv>=$E then
return"********"
elseif lv>=$C then
return"*******"
elseif lv>=$A then
return"******"
elseif lv>=8 then
return"*****"
elseif lv>=6 then
return"****"
elseif lv>=4 then
return"***"
elseif lv>=2 then
return"**"
else
return"*"
endif
endfunction
function Yoe takes integer i returns nothing
local string s="Loại: tín vật
"
set s=s+"Cấp: "+"|cff7fff00"+I2S(ir[i])+"|r
"
set s=s+"Tài phú: "+"|cff7fff00"+I2S($4B0*ir[i])+"|r
"
set s=s+"Kinh nghiệm: "+"|cff7fff00"+I2S(R2I(Vr[i]))+"/"+I2S($DC*ir[i])+"|r

"
set s=s+"|cff0078d7Thuộc tính trang bị|r"
set s=s+Yve(ir[i])
set s=s+"
- Phát huy lực tấn công cơ bản "+I2S(5+5*ir[i])+"%"
set s=s+"
- Công kích nội ngoại công + "+I2S($A+20*ir[i])
set s=s+"
- Kháng chí mạng + "+I2S($F+$F*ir[i])
set s=s+"
- Chịu sát thương chí mạng - "+I2S(2+2*ir[i])+"%"
set s=s+"
- Linh Dương Quải Giác: khi tấn công có xác suất "+I2S(4+ir[i])+"% tăng lực tấn công kỹ năng "+I2S(3*ir[i])+"%|r"
set eC=Yve(ir[i])+"Tín Vật Bang Hội ["+I2S(ir[i])+"]
"+Yxe(ir[i])+"|r"
set oC="war3mapImported\\BTNTinVat_"+I2S(Yee(ir[i]))+".blp"
set xC=s
set Er[i]=oC
set s=null
endfunction
function Yre takes integer i returns nothing
local string s="Loại: tín vật
"
set s=s+"Cấp: "+"|cff7fff00"+I2S(ir[i])+"|r
"
set s=s+"Tài phú: "+"|cff7fff00"+I2S($4B0*ir[i])+"|r
"
set s=s+"Kinh nghiệm: "+"|cff7fff00"+I2S(R2I(Vr[i]))+"/"+I2S($DC*ir[i])+"|r

"
set s=s+"|cff0078d7Thuộc tính trang bị|r"
set s=s+Yve(ir[i])
set s=s+"
- Phát huy lực tấn công cơ bản "+I2S(5+5*ir[i])+"%"
set s=s+"
- Công kích nội ngoại công + "+I2S($A+20*ir[i])
set s=s+"
- Kháng chí mạng + "+I2S($F+$F*ir[i])
set s=s+"
- Chịu sát thương chí mạng - "+I2S(2+2*ir[i])+"%"
set s=s+"
- Linh Dương Quải Giác: khi tấn công có xác suất "+I2S(4+ir[i])+"% tăng tổng lực tấn công "+I2S(3*ir[i])+"%|r"
set xC=s
set s=null
endfunction
function Yie takes unit u,integer lv,boolean b returns boolean
if b then
call Tje(u,5319,.1)
call TLe(u,30)
call Tje(u,7614,30)
call Tje(u,Vx,.04)
call Tje(u,rx,5)
call Tje(u,5392,.03)
else
call Tje(u,5319,.05*lv)
call TLe(u,20*lv)
call Tje(u,7614,$F*lv)
call Tje(u,Vx,.02*lv)
call Tje(u,rx,1*lv)
call Tje(u,5392,.03*lv)
endif
return false
endfunction
function Yae takes unit u,integer lv returns item
local integer id='I099'
local integer i=0
local item t=null
if lv>=$F then
set id='I09C'
elseif lv>=$A then
set id='I09B'
elseif lv>=5 then
set id='I09A'
endif
set Sv=null
loop
exitwhen i>5
set t=UnitItemInSlot(u,i)
if GetItemTypeId(t)==id then
set i=5
set Sv=t
endif
set i=i+1
endloop
set t=null
return Sv
endfunction
function Yne takes player p,integer i,integer tIe returns nothing
if ir[i]>0 then
if cCe[(i)*(20)+3]>=$3E8*tIe then
set cCe[(i)*(20)+3]=cCe[(i)*(20)+3]-$3E8*tIe
set Vr[i]=Vr[i]+$A*tIe
call Qke(p,"|cffffcc00"+"Tín Vật Bang Hội kinh nghiệm: "+I2S(R2I(Vr[i]))+"/"+I2S($DC*ir[i]),3)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
call Yre(i)
set B6e[(i-1)*(23)+$C]="
"+xC
else
call Qke(p,"|cffffcc00"+"Cống hiến bang trong trận của bạn không đủ !",3)
endif
endif
endfunction
function YVe takes unit u,integer i returns nothing
local player p=GetOwningPlayer(u)
local item t=null
if ir[i]<20 then
if Vr[i]>=$DC*ir[i]then
set t=Yae(u,ir[i])
if t!=null then
if tHe(i,SH*ir[i],0)then
call tHe(i,SH*ir[i],De)
call RemoveItem(t)
if GetRandomReal(0,'d')<='d'-ir[i]*4 then
set ir[i]=ir[i]+1
set Vr[i]=0
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Yie(u,1,false)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+$4B0*2
call tCe(i,$4B0,1)
call Yoe(i)
set B4e[(i-1)*(23)+$C]=$C
set B5e[(i-1)*(23)+$C]=eC
set B6e[(i-1)*(23)+$C]="
"+xC
if GetLocalPlayer()==p then
call Uge(B3e[$C],oC)
endif
call QKe(rj[i]+"|cffffcc00"+" đã nâng cấp Tín Vật Bang Hội đến cấp "+I2S(ir[i])+" thành công, thật bá đạo !",5)
else
call Qke(p,"|cffffcc00"+"Nâng cấp tín vật thất bại, thật đáng tiếc !",5)
endif
else
call Qke(p,"|cffffcc00"+"Ngân lượng không đủ để nâng cấp tín vật !",5)
endif
else
call Qke(p,"|cffffcc00"+"Không tìm thấy Lệnh Bài Khảo Nghiệm Bang Hội tương ứng !",5)
endif
else
call Qke(p,"|cffffcc00"+"Yêu cầu tín vật đã đạt mức kinh nghiệm tối đa !",5)
endif
else
call Qke(p,"|cffffcc00"+"Tín vật đã đạt cấp độ tối đa, không thể tiếp tục nâng cấp !",5)
endif
set t=null
set p=null
endfunction
function YEe takes unit u,integer i returns nothing
local player p=GetOwningPlayer(u)
if ir[i]==0 then
if tHe(i,$493E0,0)then
if the(i,$4E20,0)then
call tHe(i,$493E0,De)
set ir[i]=1
set Vr[i]=0
call Yie(u,1,true)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+$4B0*2
call tCe(i,$4B0,1)
call Yoe(i)
set B4e[(i-1)*(23)+$C]=$C
set B5e[(i-1)*(23)+$C]=eC
set B6e[(i-1)*(23)+$C]="
"+xC
if GetLocalPlayer()==p then
call Uge(B3e[$C],oC)
endif
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call QKe(rj[i]+"|cffffcc00"+" đã tiếp nhận Tín Vật Bang Hội !",5)
else
call Qke(p,"|cffffcc00"+"Cống hiến bang hội chưa đạt cấp độ yêu cầu !",5)
endif
else
call Qke(p,"|cffffcc00"+"Ngân lượng không đủ để chế tạo tín vật !",5)
endif
else
call Qke(p,"|cffffcc00"+"Bạn đã kích hoạt Tín Vật Bang Hội trước đó !",5)
endif
set p=null
endfunction
function YXe takes integer i returns nothing
call Yie(XJ[i],1,true)
call Yie(XJ[i],ir[i]-1,false)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+$4B0*ir[i]*2
call tCe(i,$4B0*ir[i],1)
call Yoe(i)
set B4e[(i-1)*(23)+$C]=$C
set B5e[(i-1)*(23)+$C]=eC
set B6e[(i-1)*(23)+$C]="
"+xC
endfunction
function YOe takes integer lv returns integer
if lv==9 then
return $C*sH
elseif lv==8 then
return 8*sH
elseif lv==7 then
return 6*sH
elseif lv==6 then
return 4*sH
elseif lv==5 then
return 3*sH
elseif lv==4 then
return 20*K1
elseif lv==3 then
return $F*K1
elseif lv==2 then
return $A*K1
else
return 5*K1
endif
endfunction
function YRe takes integer i returns nothing
local string s="Loại: áo
"
set s=s+"Cấp: "+"|cff7fff00"+I2S(bHe[(i)*(20)+1])+"|r
"
set s=s+"Tài phú: "+"|cff7fff00"+I2S(YOe(bHe[(i)*(20)+1]))+"|r

"
set s=s+"|cff0078d7Thuộc tính trang bị|r
"
set s=s+"|cff7fff00"+"- Sinh lực tối đa + "+I2S($7D0*bHe[(i)*(20)+1])+"|r
"
set s=s+"|cff0078d7Thuộc tính bộ|r
"
if Rr[i]>=1 then
set s=s+"|cff7fff00"+"[ 1 ] Hiệu suất hồi phục sinh nội lực + 60%|r
"
else
set s=s+"|cff6d6d6d"+"[ 1 ] Hiệu suất hồi phục sinh nội lực + 60%|r
"
endif
if Rr[i]>=2 then
set s=s+"|cff7fff00"+"[ 2 ] Công kích nội ngoại công + 300|r
"
else
set s=s+"|cff6d6d6d"+"[ 2 ] Công kích nội ngoại công + 300|r
"
endif
if Rr[i]>=3 then
set s=s+"|cff7fff00"+"[ 3 ] Thời gian bị trạng thái xấu - 30%|r
"
else
set s=s+"|cff6d6d6d"+"[ 3 ] Thời gian bị trạng thái xấu - 30%|r
"
endif
if Rr[i]>=4 then
set s=s+"|cff7fff00"+"[ 4 ] Phát huy lực tấn công cơ bản + 80%|r
"
else
set s=s+"|cff6d6d6d"+"[ 4 ] Phát huy lực tấn công cơ bản + 80%|r
"
endif
if Rr[i]>=5 then
set s=s+"|cff7fff00"+"[ 5 ] Tỉ lệ bị trạng thái xấu - 30%|r
"
else
set s=s+"|cff6d6d6d"+"[ 5 ] Tỉ lệ bị trạng thái xấu - 30%|r
"
endif
if Rr[i]>=6 then
set s=s+"|cff7fff00"+"[ 6 ] Phát huy lực tấn công kỹ năng + 80%|r
"
else
set s=s+"|cff6d6d6d"+"[ 6 ] Phát huy lực tấn công kỹ năng + 80%|r
"
endif
if Rr[i]>=7 then
set s=s+"|cff7fff00"+"[ 7 ] Sát thương nhận vào, thu nhỏ 40%|r
"
else
set s=s+"|cff6d6d6d"+"[ 7 ] Sát thương nhận vào, thu nhỏ 40%|r
"
endif
if Rr[i]>=8 then
set s=s+"|cff7fff00"+"[ 8 ] Sát thương gây ra, khuếch đại 50%|r
"
else
set s=s+"|cff6d6d6d"+"[ 8 ] Sát thương gây ra, khuếch đại 50%|r
"
endif
if Rr[i]>=9 then
set s=s+"|cff9370db"+"[ 9 ] Thiên Hà Thần Công: khi sinh lực dưới 15% phát động miễn dịch sát thương và trạng thái trong 5 giây, giãn cách 180 giây|r
"
else
set s=s+"|cff6d6d6d"+"[ 9 ] Thiên Hà Thần Công: khi sinh lực dưới 15% phát động miễn dịch sát thương và trạng thái trong 5 giây, giãn cách 180 giây|r
"
endif
set Ar=cVe[(1)*(20)+bHe[(i)*(20)+1]]+"|r"
set Nr="war3mapImported\\BTNTBAH_Ao"+I2S(bHe[(i)*(20)+1])+".blp"
set Ir=s
set bJe[(i)*(2)+1]=Nr
set s=null
endfunction
function YIe takes integer i returns nothing
local string s="Loại: nón
"
set s=s+"Cấp: "+"|cff7fff00"+I2S(bHe[(i)*(20)+2])+"|r
"
set s=s+"Tài phú: "+"|cff7fff00"+I2S(YOe(bHe[(i)*(20)+2]))+"|r

"
set s=s+"|cff0078d7Thuộc tính trang bị|r
"
set s=s+"|cff7fff00"+"- Tất cả thuộc tính + "+I2S(40*bHe[(i)*(20)+2])+"|r
"
set s=s+"|cff0078d7Thuộc tính bộ|r
"
if Rr[i]>=1 then
set s=s+"|cff7fff00"+"[ 1 ] Hiệu suất hồi phục sinh nội lực + 60%|r
"
else
set s=s+"|cff6d6d6d"+"[ 1 ] Hiệu suất hồi phục sinh nội lực + 60%|r
"
endif
if Rr[i]>=2 then
set s=s+"|cff7fff00"+"[ 2 ] Công kích nội ngoại công + 300|r
"
else
set s=s+"|cff6d6d6d"+"[ 2 ] Công kích nội ngoại công + 300|r
"
endif
if Rr[i]>=3 then
set s=s+"|cff7fff00"+"[ 3 ] Thời gian bị trạng thái xấu - 30%|r
"
else
set s=s+"|cff6d6d6d"+"[ 3 ] Thời gian bị trạng thái xấu - 30%|r
"
endif
if Rr[i]>=4 then
set s=s+"|cff7fff00"+"[ 4 ] Phát huy lực tấn công cơ bản + 80%|r
"
else
set s=s+"|cff6d6d6d"+"[ 4 ] Phát huy lực tấn công cơ bản + 80%|r
"
endif
if Rr[i]>=5 then
set s=s+"|cff7fff00"+"[ 5 ] Tỉ lệ bị trạng thái xấu - 30%|r
"
else
set s=s+"|cff6d6d6d"+"[ 5 ] Tỉ lệ bị trạng thái xấu - 30%|r
"
endif
if Rr[i]>=6 then
set s=s+"|cff7fff00"+"[ 6 ] Phát huy lực tấn công kỹ năng + 80%|r
"
else
set s=s+"|cff6d6d6d"+"[ 6 ] Phát huy lực tấn công kỹ năng + 80%|r
"
endif
if Rr[i]>=7 then
set s=s+"|cff7fff00"+"[ 7 ] Sát thương nhận vào, thu nhỏ 40%|r
"
else
set s=s+"|cff6d6d6d"+"[ 7 ] Sát thương nhận vào, thu nhỏ 40%|r
"
endif
if Rr[i]>=8 then
set s=s+"|cff7fff00"+"[ 8 ] Sát thương gây ra, khuếch đại 50%|r
"
else
set s=s+"|cff6d6d6d"+"[ 8 ] Sát thương gây ra, khuếch đại 50%|r
"
endif
if Rr[i]>=9 then
set s=s+"|cff9370db"+"[ 9 ] Thiên Hà Thần Công: khi sinh lực dưới 15% phát động miễn dịch sát thương và trạng thái trong 5 giây, giãn cách 180 giây|r
"
else
set s=s+"|cff6d6d6d"+"[ 9 ] Thiên Hà Thần Công: khi sinh lực dưới 15% phát động miễn dịch sát thương và trạng thái trong 5 giây, giãn cách 180 giây|r
"
endif
set Br=cVe[(2)*(20)+bHe[(i)*(20)+2]]+"|r"
set cr="war3mapImported\\BTNTBAH_Non"+I2S(bHe[(i)*(20)+2])+".blp"
set br=s
set bJe[(i)*(2)+2]=cr
set s=null
endfunction
function YAe takes unit u,integer i,integer tJe,integer lv returns boolean
if tJe==1 then
call TZe(u,$7D0*lv)
else
call T8e(u,40*lv,true)
call T9e(u,40*lv,true)
call uve(u,40*lv,true)
endif
if Rr[i]>=1 then
call Tje(u,Fx,-.5)
call Tje(u,gx,-.5)
endif
if Rr[i]>=2 then
call TLe(u,-300)
endif
if Rr[i]>=3 then
call Twe(u,-.3)
endif
if Rr[i]>=4 then
call Tje(u,5319,-.8)
endif
if Rr[i]>=5 then
call TUe(u,-.3)
endif
if Rr[i]>=6 then
call Tje(u,vx,-.8)
endif
if Rr[i]>=7 then
call Tje(u,ox,-.3)
endif
if Rr[i]>=8 then
call Tje(u,xx,-.3)
endif
if bHe[(i)*(20)+1]==9 and bHe[(i)*(20)+2]==9 then
call Tje(u,Fx,.6)
call Tje(u,gx,.6)
call TLe(u,300)
call Twe(u,.3)
call Tje(u,5319,.8)
call TUe(u,.3)
call Tje(u,vx,.8)
call Tje(u,ox,.4)
call Tje(u,xx,.5)
call SaveInteger(UH,GetHandleId(u),7918,1)
set Rr[i]=9
elseif bHe[(i)*(20)+1]>=8 and bHe[(i)*(20)+2]>=8 then
call Tje(u,Fx,.6)
call Tje(u,gx,.6)
call TLe(u,300)
call Twe(u,.3)
call Tje(u,5319,.8)
call TUe(u,.3)
call Tje(u,vx,.8)
call Tje(u,ox,.4)
call Tje(u,xx,.5)
set Rr[i]=8
elseif bHe[(i)*(20)+1]>=7 and bHe[(i)*(20)+2]>=7 then
call Tje(u,Fx,.6)
call Tje(u,gx,.6)
call TLe(u,300)
call Twe(u,.3)
call Tje(u,5319,.8)
call TUe(u,.3)
call Tje(u,vx,.8)
call Tje(u,ox,.4)
set Rr[i]=7
elseif bHe[(i)*(20)+1]>=6 and bHe[(i)*(20)+2]>=6 then
call Tje(u,Fx,.6)
call Tje(u,gx,.6)
call TLe(u,300)
call Twe(u,.3)
call Tje(u,5319,.8)
call TUe(u,.3)
call Tje(u,vx,.8)
set Rr[i]=6
elseif bHe[(i)*(20)+1]>=5 and bHe[(i)*(20)+2]>=5 then
call Tje(u,Fx,.6)
call Tje(u,gx,.6)
call TLe(u,300)
call Twe(u,.3)
call Tje(u,5319,.8)
call TUe(u,.3)
set Rr[i]=5
elseif bHe[(i)*(20)+1]>=4 and bHe[(i)*(20)+2]>=4 then
call Tje(u,Fx,.6)
call Tje(u,gx,.6)
call TLe(u,300)
call Twe(u,.3)
call Tje(u,5319,.8)
set Rr[i]=4
elseif bHe[(i)*(20)+1]>=3 and bHe[(i)*(20)+2]>=3 then
call Tje(u,Fx,.6)
call Tje(u,gx,.6)
call TLe(u,300)
call Twe(u,.3)
set Rr[i]=3
elseif bHe[(i)*(20)+1]>=2 and bHe[(i)*(20)+2]>=2 then
call Tje(u,Fx,.6)
call Tje(u,gx,.6)
call TLe(u,300)
set Rr[i]=2
elseif bHe[(i)*(20)+1]>=1 and bHe[(i)*(20)+2]>=1 then
call Tje(u,Fx,.6)
call Tje(u,gx,.6)
set Rr[i]=1
endif
return false
endfunction
function YNe takes unit u,integer lv returns item
local integer id='I09K'
local integer i=0
local item t=null
if lv==8 then
set id='I09S'
elseif lv==7 then
set id='I09R'
elseif lv==6 then
set id='I09Q'
elseif lv==5 then
set id='I09P'
elseif lv==4 then
set id='I09O'
elseif lv==3 then
set id='I09N'
elseif lv==2 then
set id='I09M'
elseif lv==1 then
set id='I09L'
endif
set Sv=null
loop
exitwhen i>5
set t=UnitItemInSlot(u,i)
if GetItemTypeId(t)==id then
set i=5
set Sv=t
endif
set i=i+1
endloop
set t=null
return Sv
endfunction
function Ybe takes integer lv returns integer
if lv==8 then
return $80*K1
elseif lv==7 then
return 96*K1
elseif lv==6 then
return 64*K1
elseif lv==5 then
return 32*K1
elseif lv==4 then
return 16*K1
elseif lv==3 then
return 8*K1
elseif lv==2 then
return 4*K1
elseif lv==1 then
return 2*K1
else
return K1
endif
endfunction
function YBe takes unit u,integer i,integer tJe returns nothing
local player p=GetOwningPlayer(u)
local integer lv=bHe[(i)*(20)+tJe]
local item w0e=null
local item Yce=null
local integer t0e=0
if lv<9 then
if tHe(i,5*SH*(lv+1),0)and bJ[i]>=lv+1 then
set Yce=YNe(u,lv)
set w0e=Q0e(u,bj[lv+4])
set t0e=Ybe(lv)
if Yce!=null and w0e!=null and tfe(i,t0e,0)then
call tHe(i,5*SH*(lv+1),De)
call tfe(i,t0e,De)
call RemoveItem(Yce)
call RemoveItem(w0e)
if Rr[i]>=2 then
call Qre(Xr[i])
endif
if lv>0 then
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]-bje[(i)*(20)+tJe]*2
call tCe(i,bje[(i)*(20)+tJe],De)
endif
set bje[(i)*(20)+tJe]=YOe(lv+1)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+bje[(i)*(20)+tJe]*2
call tCe(i,bje[(i)*(20)+tJe],1)
set bHe[(i)*(20)+tJe]=lv+1
call YAe(u,i,tJe,1)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call QKe(rj[i]+"|cffffcc00"+" đã nâng cấp Trang Bị Anh Hùng đến cấp "+I2S(bHe[(i)*(20)+tJe])+", thật bá đạo !",5)
if bHe[(i)*(20)+1]>0 then
call YRe(i)
set B4e[(i-1)*(23)+$E]=$E
set B5e[(i-1)*(23)+$E]=Ar
set B6e[(i-1)*(23)+$E]="
"+Ir
endif
if bHe[(i)*(20)+2]>0 then
call YIe(i)
set B4e[(i-1)*(23)+$D]=$D
set B5e[(i-1)*(23)+$D]=Br
set B6e[(i-1)*(23)+$D]="
"+br
endif
if tJe==1 then
if GetLocalPlayer()==p then
call Uge(B3e[$E],Nr)
endif
endif
if tJe==2 then
if GetLocalPlayer()==p then
call Uge(B3e[$D],cr)
endif
endif
if Rr[i]>1 then
set Xr[i]=AddSpecialEffectTarget("war3mapImported\\QuanAn_Effect"+I2S(Rr[i]-1)+".mdl",u,"chest")
endif
else
call Qke(p,"|cffffcc00"+"Không đáp ứng yêu cầu NHHT và vật phẩm !",5)
endif
else
call Qke(p,"|cffffcc00"+"Không đủ điều kiện nâng cấp !",5)
endif
else
call Qke(p,"|cffffcc00"+"Trang bị anh hùng đã đạt cấp độ tối đa  !",5)
endif
set w0e=null
set Yce=null
set p=null
endfunction
function YCe takes unit u,integer i,integer w5e returns nothing
if w5e=='I09I' then
call YBe(u,i,1)
elseif w5e=='I09J' then
call YBe(u,i,2)
endif
endfunction
function Yde takes integer i returns nothing
local integer tJe=1
if bHe[(i)*(20)+tJe]>0 and bHe[(i)*(20)+tJe]<=9 then
set bje[(i)*(20)+tJe]=YOe(bHe[(i)*(20)+tJe])
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+bje[(i)*(20)+tJe]*2
call tCe(i,bje[(i)*(20)+tJe],1)
call YAe(XJ[i],i,tJe,bHe[(i)*(20)+tJe])
endif
set tJe=2
if bHe[(i)*(20)+tJe]>0 and bHe[(i)*(20)+tJe]<=9 then
set bje[(i)*(20)+tJe]=YOe(bHe[(i)*(20)+tJe])
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+bje[(i)*(20)+tJe]*2
call tCe(i,bje[(i)*(20)+tJe],1)
call YAe(XJ[i],i,tJe,bHe[(i)*(20)+tJe])
endif
if bHe[(i)*(20)+1]>0 then
call YRe(i)
set B4e[(i-1)*(23)+$E]=$E
set B5e[(i-1)*(23)+$E]=Ar
set B6e[(i-1)*(23)+$E]="
"+Ir
endif
if bHe[(i)*(20)+2]>0 then
call YIe(i)
set B4e[(i-1)*(23)+$D]=$D
set B5e[(i-1)*(23)+$D]=Br
set B6e[(i-1)*(23)+$D]="
"+br
endif
if Rr[i]>1 then
set Xr[i]=AddSpecialEffectTarget("war3mapImported\\QuanAn_Effect"+I2S(Rr[i]-1)+".mdl",XJ[i],"chest")
endif
endfunction
function YDe takes integer lv returns integer
if lv==1 then
return $BB8
elseif lv==2 then
return 7000
elseif lv==3 then
return $3A98
elseif lv==4 then
return $88B8
endif
return 0
endfunction
function Yfe takes integer lv returns string
if lv==1 then
return"|cff9370dbBích Huyết"
elseif lv==2 then
return"|cffffa500Kim Lân"
elseif lv==3 then
return"|cffffa500Đơn Tâm"
elseif lv==4 then
return"|cffffff00Long Đằng"
endif
return""
endfunction
function YFe takes integer i,integer tJe,integer woe returns nothing
local string s=""
if woe>0 then
if tJe==1 then
set s=s+"Loại: nón đồng hành
"
set s=s+"Cấp độ: "+I2S(woe)+"
"
set s=s+"Tài phú: "+"|cffffcc00"+I2S(YDe(woe))+"|r

"
set s=s+"|cff0078d7Thuộc tính trang bị|r
"
set s=s+"|cff7fff00"+"- Sát thương nhận vào, thu nhỏ "+I2S(4*woe)+"%
"
set s=s+"- Kháng tất cả + "+I2S(40*woe)+"
"
set s=s+"- Kháng chí mạng + "+I2S(40*woe)+"|r"
call BlzSetItemName(bke[(i)*(20)+tJe],Yfe(woe)+" Chi Quán|r")
call BlzSetItemIconPath(bke[(i)*(20)+tJe],"war3mapImported\\BTNTBDH_non"+I2S(woe)+".blp")
elseif tJe==2 then
set s=s+"Loại: áo đồng hành
"
set s=s+"Cấp độ: "+I2S(woe)+"
"
set s=s+"Tài phú: "+"|cffffcc00"+I2S(YDe(woe))+"|r

"
set s=s+"|cff0078d7Thuộc tính trang bị|r
"
set s=s+"|cff7fff00"+"- Sát thương nhận vào, thu nhỏ "+I2S(4*woe)+"%
"
set s=s+"- Tỉ lệ sinh lực tối đa + "+I2S(5*woe)+"%
"
set s=s+"- Chịu sát thương chí mạng - "+I2S(6*woe)+"%|r"
call BlzSetItemName(bke[(i)*(20)+tJe],Yfe(woe)+" Chiến Y|r")
call BlzSetItemIconPath(bke[(i)*(20)+tJe],"war3mapImported\\BTNTBDH_ao"+I2S(woe)+".blp")
elseif tJe==3 then
set s=s+"Loại: phù đồng hành
"
set s=s+"Cấp độ: "+I2S(woe)+"
"
set s=s+"Tài phú: "+"|cffffcc00"+I2S(YDe(woe))+"|r

"
set s=s+"|cff0078d7Thuộc tính trang bị|r
"
set s=s+"|cff7fff00"+"- Tỉ lệ nội lực tối đa + "+I2S(5*woe)+"%
"
set s=s+"- Kháng thời gian bị trạng thái ngũ hành + "+I2S(6*woe)+"%
"
set s=s+"- Hiệu suất hồi phục sinh lực + "+I2S($A*woe)+"%
"
set s=s+"- Hiệu suất hồi phục nội lực + "+I2S($A*woe)+"%|r"
call BlzSetItemName(bke[(i)*(20)+tJe],Yfe(woe)+" Hộ Thân Phù|r")
call BlzSetItemIconPath(bke[(i)*(20)+tJe],"war3mapImported\\BTNTBDH_phu"+I2S(woe)+".blp")
elseif tJe==4 then
set s=s+"Loại: giày đồng hành
"
set s=s+"Cấp độ: "+I2S(woe)+"
"
set s=s+"Tài phú: "+"|cffffcc00"+I2S(YDe(woe))+"|r

"
set s=s+"|cff0078d7Thuộc tính trang bị|r
"
set s=s+"|cff7fff00"+"- Sát thương ngũ hành + "+I2S(75*woe)+"%
"
set s=s+"- Phát huy lực tấn công kỹ năng "+I2S($F*woe)+"%|r"
call BlzSetItemName(bke[(i)*(20)+tJe],Yfe(woe)+" Ngoa|r")
call BlzSetItemIconPath(bke[(i)*(20)+tJe],"war3mapImported\\BTNTBDH_giay"+I2S(woe)+".blp")
elseif tJe==5 then
set s=s+"Loại: nhẫn đồng hành
"
set s=s+"Cấp độ: "+I2S(woe)+"
"
set s=s+"Tài phú: "+"|cffffcc00"+I2S(YDe(woe))+"|r

"
set s=s+"|cff0078d7Thuộc tính trang bị|r
"
set s=s+"|cff7fff00"+"- Công kích ngoại công + "+I2S('x'*woe)+"
"
set s=s+"- Công kích nội công + "+I2S('x'*woe)+"
"
set s=s+"- Phát huy lực tấn công cơ bản "+I2S($F*woe)+"%|r"
call BlzSetItemName(bke[(i)*(20)+tJe],Yfe(woe)+" Chi Giới|r")
call BlzSetItemIconPath(bke[(i)*(20)+tJe],"war3mapImported\\BTNTBDH_nhan"+I2S(woe)+".blp")
elseif tJe==6 then
set s=s+"Loại: vũ khí đồng hành
"
set s=s+"Cấp độ: "+I2S(woe)+"
"
set s=s+"Tài phú: "+"|cffffcc00"+I2S(YDe(woe))+"|r

"
set s=s+"|cff0078d7Thuộc tính trang bị|r
"
set s=s+"|cff7fff00"+"- Sát thương gây ra, khuếch đại "+I2S(8*woe)+"%
"
set s=s+"- Chí mạng + "+I2S(40*woe)+"|r"
call BlzSetItemName(bke[(i)*(20)+tJe],Yfe(woe)+" Chi Nhẫn|r")
call BlzSetItemIconPath(bke[(i)*(20)+tJe],"war3mapImported\\BTNTBDH_vukhi"+I2S(woe)+".blp")
endif
call BlzSetItemExtendedTooltip(bke[(i)*(20)+tJe],s)
endif
set s=null
endfunction
function Yge takes unit u,integer i,integer tJe,real r returns nothing
if tJe==1 then
call Tje(u,ox,.04*r)
call Tue(u,40*r)
call Tje(u,7614,40*r)
elseif tJe==2 then
call Tje(u,ox,.04*r)
call T_e(u,.05*r)
call Tje(u,Vx,.06*r)
elseif tJe==3 then
call T4e(u,.05*r)
call Tje(u,Fx,.1*r)
call Tje(u,gx,.1*r)
call Twe(u,.06*r)
elseif tJe==4 then
call TWe(u,.75*r)
call Tje(u,vx,.15*r)
elseif tJe==5 then
call TLe(u,'x'*r)
call Tje(u,5319,.15*r)
elseif tJe==6 then
call Tje(u,xx,.08*r)
call Tje(u,4888,40*r)
endif
endfunction
function YGe takes integer lv returns integer
if lv==0 then
return $C8
elseif lv==1 then
return 600
elseif lv==2 then
return $708
else
return 5400
endif
endfunction
function Yhe takes unit u,integer lv returns item
local integer i=0
local integer id=0
local item t=null
if lv==0 then
set id=bj[7]
elseif lv==1 then
set id=bj[8]
elseif lv==2 then
set id=bj[9]
else
set id=bj[$A]
endif
set Sv=null
loop
exitwhen i>5
set t=UnitItemInSlot(u,i)
if GetItemTypeId(t)==id then
set i=5
set Sv=t
endif
set i=i+1
endloop
set t=null
return Sv
endfunction
function YHe takes unit u,integer lv returns item
local integer i=0
local integer id=0
local item t=null
if lv==0 then
set id='I05M'
elseif lv==1 then
set id='I05N'
elseif lv==2 then
set id='I05O'
else
set id='I05P'
endif
set Sv=null
loop
exitwhen i>5
set t=UnitItemInSlot(u,i)
if GetItemTypeId(t)==id then
set i=5
set Sv=t
endif
set i=i+1
endloop
set t=null
return Sv
endfunction
function Yje takes unit u,player p,integer i,item t returns nothing
local integer tJe=S2I(BlzGetItemDescription(t))
local integer a1=0
local integer a2=0
local item t1=null
local item t2=null
local boolean b=false
local integer tp=0
if QI[i]!=null then
if bKe[(i)*(20)+tJe]<4 then
set a1=YGe(bKe[(i)*(20)+tJe])
if tje(i,a1,tJe,0)then
if tHe(i,a1*500,0)then
set t1=Yhe(u,bKe[(i)*(20)+tJe])
set t2=YHe(u,bKe[(i)*(20)+tJe])
if t1!=null and t2!=null then
if bJ[i]>=(-2+2*(bKe[(i)*(20)+tJe]+1))then
if GetRandomReal(0,'d')<=65-bKe[(i)*(20)+tJe]*$F then
set b=true
endif
if b then
call RemoveItem(t1)
call RemoveItem(t2)
call tje(i,a1,tJe,De)
call tHe(i,a1*500,De)
set bKe[(i)*(20)+tJe]=bKe[(i)*(20)+tJe]+1
call Yge(u,i,tJe,1)
call YFe(i,tJe,bKe[(i)*(20)+tJe])
set tp=YDe(bKe[(i)*(20)+tJe])-YDe(bKe[(i)*(20)+tJe]-1)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+tp*2
call tCe(i,tp,1)
call Qre(AddSpecialEffect((Cr),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
call Qke(p,"|cff7fff00"+"Bạn đã nâng cấp trang bị đồng hành "+GetItemName(bke[(i)*(20)+tJe]),3)
else
call RemoveItem(t2)
call tHe(i,a1*500,De)
call Qke(p,"|cffffcc00"+"Nâng cấp thất bại, tiêu hao bạc và phôi trang bị !",3)
endif
else
call Qke(p,"|cffffcc00"+"Cấp độ trùng sinh không đạt yêu cầu !",5)
endif
else
call Qke(p,"|cffffcc00"+"Vật phẩm trong hành trang không đủ điều kiện nâng cấp !",5)
endif
else
call Qke(p,"|cffffcc00"+"Bạc đưa vào không đủ yêu cầu !",5)
endif
else
call Qke(p,"|cffffcc00"+"Số lượng Mảnh Trang Bị Đồng Hành tướng ứng không đủ !",5)
endif
else
call Qke(p,"|cffffcc00"+"Trang bị đồng hành đã đạt cấp tối đa !",5)
endif
endif
call RemoveItem(t)
set t1=null
set t2=null
endfunction
function YJe takes integer i returns nothing
local integer tp=0
if bKe[(i)*(20)+1]>0 then
call Yge(XJ[i],i,1,bKe[(i)*(20)+1])
set tp=YDe(bKe[(i)*(20)+1])
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+tp*2
call tCe(i,tp,1)
endif
if bKe[(i)*(20)+2]>0 then
call Yge(XJ[i],i,2,bKe[(i)*(20)+2])
set tp=YDe(bKe[(i)*(20)+2])
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+tp*2
call tCe(i,tp,1)
endif
if bKe[(i)*(20)+3]>0 then
call Yge(XJ[i],i,3,bKe[(i)*(20)+3])
set tp=YDe(bKe[(i)*(20)+3])
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+tp*2
call tCe(i,tp,1)
endif
if bKe[(i)*(20)+4]>0 then
call Yge(XJ[i],i,4,bKe[(i)*(20)+4])
set tp=YDe(bKe[(i)*(20)+4])
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+tp*2
call tCe(i,tp,1)
endif
if bKe[(i)*(20)+5]>0 then
call Yge(XJ[i],i,5,bKe[(i)*(20)+5])
set tp=YDe(bKe[(i)*(20)+5])
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+tp*2
call tCe(i,tp,1)
endif
if bKe[(i)*(20)+6]>0 then
call Yge(XJ[i],i,6,bKe[(i)*(20)+6])
set tp=YDe(bKe[(i)*(20)+6])
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+tp*2
call tCe(i,tp,1)
endif
endfunction
function Yke takes nothing returns boolean
local integer CGe=Qce()
set Km[CGe]=Km[CGe]-1
if Km[CGe]==0 then
set Km[CGe]=60
call Qke(jm[CGe],"|cff7fff00"+"Thời gian tồn tại Cây Bát Nhã còn lại "+I2S(Hm[CGe])+" giây !",$A)
endif
if Fr[Jm[CGe]]then
set Hm[CGe]=0
endif
set Hm[CGe]=Hm[CGe]-1
if Hm[CGe]<=0 or spe(dr[Jm[CGe]])then
call QDe()
if not spe(dr[Jm[CGe]])then
call RemoveUnit(dr[Jm[CGe]])
set dr[Jm[CGe]]=null
call Qke(jm[CGe],"|cffff0000"+"Cây Bát Nhã đã chết khô do không được chăm sóc, bạn sẽ không nhận được phần thưởng gì !",$F)
endif
set Fr[Jm[CGe]]=false
set jm[CGe]=null
call qEe(CGe)
endif
return false
endfunction
function YKe takes player p,integer i returns nothing
local integer CGe=qVe()
set Hm[CGe]=$708
set Km[CGe]=60
set jm[CGe]=p
set Jm[CGe]=i
call QIe(CGe,1.,true,function Yke)
endfunction
function Yle takes unit u,player p,integer i,item t returns nothing
if fr[i]<4 then
if dr[i]==null and not Fr[i]then
if s1e(u,ug)then
set dr[i]=CreateUnit(p,'n05Y',GetUnitX(u),GetUnitY(u),270)
call YKe(p,i)
call Qke(p,"|cffffcc00"+"Cây bát nhã được trồng và sẽ tồn tại trong 30 phút !",5)
set Dr[i]=0
call RemoveItem(t)
else
call Qke(p,"|cffffcc00"+"Hạt giống chỉ có thể trồng trong Lãnh Địa Bang Hội !",5)
endif
else
call Qke(p,"|cffffcc00"+"Không thể trồng cùng lúc 2 Cây Bát Nhã",5)
endif
else
call Qke(p,"|cffffcc00"+"Mỗi trận chỉ có thể trồng tối đa 4 Cây Bát Nhã",5)
endif
endfunction
function YLe takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local integer c=1
local integer QZe=0
set Dr[i]=Dr[i]+1
call Qke(p,"|cffffcc00"+"Độ phát triển: "+I2S(Dr[i])+"/5",5)
call SetUnitScale(dr[i],.5+.5*Dr[i],.5+.5*Dr[i],.5+.5*Dr[i])
if Dr[i]==5 then
set Fr[i]=true
set bhe[(i)*($A)+3]=bhe[(i)*($A)+3]+2
call Qke(p,"|cffffcc00"+"Cây bát nhã đã trưởng thành và thu hoạch, nhận được phần thưởng 300 uy danh, "+I2S($2710+5000*(bJ[i]+1))+" chân khí, "+I2S(300+300*(bJ[i]+1))+" NHHT",5)
if GetRandomReal(0,'d')<=30 then
call UnitAddItemById(OJ[i],iJ[7])
endif
if GetRandomReal(0,'d')<=$A then
call UnitAddItemById(OJ[i],'I0BK')
call QKe(rj[i]+"|cffffcc00"+" trồng cây bát nhã may mắn nhận được Du Long Danh Vọng Lệnh, xin chúc mừng !",5)
elseif GetRandomReal(0,'d')<=35 then
call UnitAddItemById(OJ[i],'I0BJ')
call QKe(rj[i]+"|cffffcc00"+" trồng cây bát nhã may mắn nhận được Tiểu Du Long Lệnh, xin chúc mừng !",5)
endif
set fr[i]=fr[i]+1
call tye(i,$A)
call tDe(i,300,1)
call tFe(i,$2710+5000*(bJ[i]+1),1)
call tfe(i,300+300*(bJ[i]+1),1)
call UnitAddItemById(OJ[i],'I0G9')
if GetRandomReal(0,'d')<=20 then
call UnitAddItemById(OJ[i],'I0HO')
endif
call UnitAddItemById(OJ[i],bj[6])
if GetRandomReal(0,'d')<=20 then
call UnitAddItemById(OJ[i],bj[6])
endif
if GetRandomReal(0,'d')<=$A then
call UnitAddItemById(OJ[i],bj[6])
endif
if GetRandomReal(0,'d')<=30 then
call UnitAddItemById(OJ[i],bj[7])
endif
if GetRandomReal(0,'d')<=$A then
call UnitAddItemById(OJ[i],bj[8])
endif
set c=1
set QZe=GetRandomInt(5,$A)
loop
exitwhen c>QZe
call UnitAddItemById(OJ[i],'I054')
set c=c+1
endloop
set c=1
set QZe=GetRandomInt(4,6)
loop
exitwhen c>QZe
call UnitAddItemById(OJ[i],'I05Z')
set c=c+1
endloop
call RemoveUnit(dr[i])
set dr[i]=null
set Dr[i]=0
call Qre(AddSpecialEffect(("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl"),((x)*1.),((y)*1.)))
endif
set u=null
set p=null
return false
endfunction
function Yme takes nothing returns boolean
return GetSpellAbilityId()=='A0HR' and YLe()
endfunction
function YMe takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function Yme))
set t=null
endfunction
function Ype takes unit u,integer i returns nothing
local integer id=GetHandleId(u)
call SetHeroLevelBJ(u,'d',false)
set Bue[(1)*(20)+i]=GetHeroXP(u)*2+qH
set bxe[i]='d'
if bJ[i]>=1 then
call tbe(i,20,1)
endif
if bJ[i]>=2 then
set zo[i]=zo[i]+6
endif
call MultiboardSetItemValueBJ(mC,3,(i+1),ij[bJ[i]+bEe[i]]+I2S(GetHeroLevel(u))+" ("+I2S(bJ[i]+bEe[i])+")")
call tde(i,7,1)
call SetUnitAbilityLevel(u,'A0YT',bJ[i]+1)
endfunction
function YPe takes unit u,integer ts returns item
local integer i=0
local item it=null
local integer id=0
if ts==1 then
set id='I045'
elseif ts==2 then
set id='I046'
elseif ts==3 then
set id='I047'
elseif ts==4 then
set id='I048'
elseif ts==5 then
set id='I049'
elseif ts==6 then
set id='I04A'
elseif ts==7 then
set id='I04B'
elseif ts==8 then
set id='I04C'
elseif ts==9 then
set id='I04D'
endif
set Sv=null
loop
exitwhen i>5
set it=UnitItemInSlot(u,i)
if GetItemTypeId(it)==id then
set Sv=it
set i=5
endif
set i=i+1
endloop
set it=null
return Sv
endfunction
function Yqe takes unit u,integer ts returns item
local integer i=0
local item it=null
local integer id=0
if ts<=4 then
set id='I04E'
elseif ts==5 or ts==6 then
set id='I04F'
elseif ts==7 then
set id='I04G'
elseif ts==8 then
set id='I04H'
elseif ts==9 then
set id='I04I'
endif
set Sv=null
loop
exitwhen i>5
set it=UnitItemInSlot(u,i)
if GetItemTypeId(it)==id then
set Sv=it
set i=5
endif
set i=i+1
endloop
set it=null
return Sv
endfunction
function YQe takes integer z returns integer
if z==1 then
return 6000
elseif z==2 then
return $3A98
elseif z==3 then
return $7530
elseif z==4 then
return $EA60
elseif z==5 then
return $186A0
elseif z==6 then
return $249F0
elseif z==7 then
return $30D40
elseif z==8 then
return $3D090
else
return $493E0
endif
endfunction
function Yse takes unit u,player p,integer i,item t returns boolean
local string s=BlzGetItemDescription(t)
local integer ts=S2I(SubString(s,0,1))
local integer ck=S2I(SubString(s,2,4))*SH
local integer Tre=S2I(SubString(s,5,7))*SH
local item t1=null
local item t2=null
if bJ[i]<9 then
if bJ[i]==ts-1 then
if GetHeroLevel(u)==$C8 and NA[i]=='t' then
set t1=YPe(u,ts)
set t2=Yqe(u,ts)
if t1!=null and t2!=null then
if tHe(i,Tre,0)and tFe(i,ck,0)then
if tDe(i,YQe(ts),0)then
call tHe(i,Tre,De)
call tFe(i,ck,De)
call RemoveItem(t1)
call RemoveItem(t2)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Tje(XJ[i],xx,.03)
call QKe(rj[i]+" đã tiến hành trùng sinh lần "+I2S(ts)+", thật bá đạo !",5)
set bJ[i]=bJ[i]+1
call Ype(u,i)
else
call Qke(p,"|cffffcc00"+"Uy danh chưa đạt yêu cầu !",5)
endif
else
call Qke(p,"|cffffcc00"+"Bạc hoặc chân khí không đủ yêu cầu !",5)
endif
else
call Qke(p,"|cffffcc00"+"Không tìm thấy vật phẩm trùng sinh trong hành trang nhân vật !",5)
endif
else
call Qke(p,"|cffffcc00"+"Yêu cầu nhân vật đạt cấp độ 200 và hoàn thành nhiệm vụ tân thủ !",5)
endif
else
call Qke(p,"|cffffcc00"+"Thứ tự trùng sinh không đúng !",5)
endif
else
call Qke(p,"|cffffcc00"+"Cấp độ trùng sinh đã đạt tối đa !",5)
endif
set s=null
call RemoveItem(t)
set t1=null
set t2=null
return false
endfunction
function YSe takes nothing returns nothing
call ufe('n01P',600,1.,60,.4,400,$3E8,0,300,0,0,0,0,0)
call ufe('n01R',600,1.,60,.4,400,$3E8,0,300,0,0,0,0,0)
call ufe('n01S',600,1.,60,.4,400,$3E8,0,300,0,0,0,0,0)
call ufe('n01Q',600,1.,60,.4,400,$3E8,0,300,0,0,0,0,0)
call ufe('n01T',600,1.,60,.4,400,$3E8,0,300,0,0,0,0,0)
call ufe('n01U',600,1.,60,.4,400,$3E8,0,300,0,0,0,0,0)
call ufe('n01V',600,1.,60,.4,400,$3E8,0,300,0,0,0,0,0)
call ufe('n051',600,1.,60,.4,400,$3E8,0,300,0,0,0,0,0)
call ufe('n05T',700,1.4,'n',.4,600,$514,0,450,0,0,0,0,0)
call ufe('n055',800,1.6,$A0,.6,800,$640,0,600,0,0,0,0,0)
call ufe('n01W',800,1.6,$A0,.6,800,$640,0,600,0,0,0,0,0)
call ufe('n05P',$514,1.9,310,.9,$578,$9C4,0,$41A,0,0,0,.2,.2)
call ufe('n05M',$44C,1.8,260,.8,$4B0,$898,0,900,0,0,0,.1,.1)
call ufe('n08G',$3E8,1.7,$D2,.7,$3E8,$76C,0,750,0,0,0,.15,.15)
call ufe('n0AI',600,1.,60,.4,400,$3E8,0,300,0,0,0,0,0)
call ufe('n05R',700,1.4,'n',.4,600,$514,0,450,0,0,0,0,0)
call ufe('n05Q',$44C,1.8,260,.8,$4B0,$898,0,900,0,0,0,.1,.1)
call ufe('n021',600,1.,60,.4,400,$3E8,0,300,0,0,0,0,0)
call ufe('n022',600,1.,60,.4,400,$3E8,0,300,0,0,0,0,0)
call ufe('n023',700,1.4,'n',.4,600,$514,0,450,0,0,0,0,0)
call ufe('n027',600,1.,60,.4,400,$3E8,0,300,0,0,0,0,0)
call ufe('n028',600,1.,60,.4,400,$3E8,0,300,0,0,0,0,0)
call ufe('n029',700,1.4,'n',.4,600,$514,0,450,0,0,0,0,0)
call ufe('n02A',700,1.4,'n',.4,600,$514,0,450,0,0,0,0,0)
call ufe('n02B',700,1.4,'n',.4,600,$514,0,450,0,0,0,0,0)
call ufe('n056',600,1.,60,.4,400,$3E8,0,300,0,0,0,0,0)
call ufe('n057',700,1.4,'n',.4,600,$514,0,450,0,0,0,0,0)
call ufe('n058',800,1.6,$A0,.6,800,$640,0,600,0,0,0,0,0)
call ufe('n059',$3E8,1.7,$D2,.7,$3E8,$76C,0,750,0,0,0,0,0)
call ufe('n05A',$44C,1.8,260,.8,$4B0,$898,0,900,0,0,0,.1,.1)
call ufe('n05B',$514,1.9,310,.9,$578,$9C4,0,$41A,0,0,0,.2,.2)
call ufe('n05C',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,0,0,0,.3,.3)
call ufe('n05D',$6A4,2.3,410,1.1,$708,$C1C,0,$546,0,0,0,.4,.4)
call ufe('n05Z',600,1.,60,.4,400,$3E8,0,300,0,0,0,0,0)
call ufe('n060',800,1.6,$A0,.6,800,$640,0,600,0,0,0,0,0)
call ufe('n061',$514,1.9,310,.9,$578,$9C4,0,$41A,0,0,0,.2,.2)
call ufe('n062',$6A4,2.3,410,1.1,$708,$C1C,0,$546,0,0,0,.4,.4)
call ufe('n02H',700,1.4,'n',.4,600,$514,0,450,0,0,0,0,0)
call ufe('n02I',700,1.4,'n',.4,600,$514,0,450,0,0,0,0,0)
call ufe('n02J',700,1.4,'n',.4,600,$514,0,450,0,0,0,0,0)
call ufe('n02K',700,1.4,'n',.4,600,$514,0,450,0,0,0,0,0)
call ufe('n02L',700,1.4,'n',.4,600,$514,0,450,0,0,0,0,0)
call ufe('n02M',800,1.6,$A0,.6,800,$640,0,600,0,0,0,0,0)
call ufe('n02N',800,1.6,$A0,.6,800,$640,0,600,0,0,0,0,0)
call ufe('n02U',700,1.4,'n',.4,600,$514,0,450,0,0,0,0,0)
call ufe('n02V',700,1.4,'n',.4,600,$514,0,450,0,0,0,0,0)
call ufe('n02W',700,1.4,'n',.4,600,$514,0,450,0,0,0,0,0)
call ufe('n02X',700,1.4,'n',.4,600,$514,0,450,0,0,0,0,0)
call ufe('n02Y',700,1.4,'n',.4,600,$514,0,450,0,0,0,0,0)
call ufe('n02Z',800,1.6,$A0,.6,800,$640,0,600,0,0,0,0,0)
call ufe('n030',800,1.6,$A0,.6,800,$640,0,600,0,0,0,0,0)
call ufe('n031',$3E8,1.7,$D2,.7,$3E8,$76C,0,750,0,0,0,0,0)
call ufe('n033',800,1.6,$A0,.6,800,$640,0,600,0,0,0,0,0)
call ufe('n035',800,1.6,$A0,.6,800,$640,0,600,0,0,0,0,0)
call ufe('n03A',800,1.6,$A0,.6,800,$640,0,600,0,0,0,0,0)
call ufe('n03B',800,1.6,$A0,.6,800,$640,0,600,0,0,0,0,0)
call ufe('n03C',$3E8,1.7,$D2,.7,$3E8,$76C,0,750,0,0,0,0,0)
call ufe('n03D',$3E8,1.7,$D2,.7,$3E8,$76C,0,750,0,0,0,0,0)
call ufe('n03E',$44C,1.8,260,.8,$4B0,$898,0,900,0,0,0,.1,.1)
call ufe('n03F',$44C,1.8,260,.8,$4B0,$898,0,900,0,0,0,.1,.1)
call ufe('n064',800,1.6,$A0,.6,800,$640,0,600,0,0,0,0,0)
call ufe('n065',$44C,1.8,260,.8,$4B0,$898,0,900,0,0,0,.1,.1)
call ufe('n066',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,0,0,0,.3,.3)
call ufe('n067',$76C,2.5,460,1.2,$7D0,$D48,0,$5DC,0,0,0,.5,.5)
call ufe('n03S',$3E8,1.7,$D2,.7,$3E8,$76C,0,750,0,0,0,0,0)
call ufe('n03T',$44C,1.8,260,.8,$4B0,$898,0,900,0,0,0,.1,.1)
call ufe('n03U',$514,1.9,310,.9,$578,$9C4,0,$41A,0,0,0,.2,.2)
call ufe('n04B',$44C,1.8,260,.8,$4B0,$898,0,900,0,0,0,.1,.1)
call ufe('n04C',$44C,1.8,260,.8,$4B0,$898,0,900,0,0,0,.1,.1)
call ufe('n04D',$514,1.9,310,.9,$578,$9C4,0,$41A,0,0,0,.2,.2)
call ufe('n04E',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,0,0,0,.3,.3)
call ufe('n04F',$9C4,2.5,360,1.,$640,$C80,0,$5DC,0,0,0,.3,.3)
call ufe('n04P',$514,1.9,310,.9,$578,$9C4,0,$41A,0,0,0,.2,.2)
call ufe('n04Q',$514,1.9,310,.9,$578,$9C4,0,$41A,0,0,0,.2,.2)
call ufe('n04R',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,0,0,0,.3,.3)
call ufe('n04S',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,0,0,0,.3,.3)
call ufe('n04T',$7D0,2.5,460,1.,$7D0,$C80,0,$5DC,0,0,0,.3,.3)
call ufe('n04W',$6A4,2.3,410,1.1,$708,$C1C,0,$546,0,0,0,.4,.4)
call ufe('n05E',$76C,2.5,460,1.2,$7D0,$D48,0,$5DC,0,0,0,.5,.5)
call ufe('n08O',$44C,1.8,260,.8,$4B0,$898,0,900,0,0,0,.1,.1)
call ufe('n08P',$44C,1.8,260,.8,$4B0,$898,0,900,0,0,0,.1,.1)
call ufe('n08Q',$514,1.9,310,.9,$578,$9C4,0,$41A,0,0,0,.2,.2)
call ufe('n08R',$514,1.9,310,.9,$578,$9C4,0,$41A,0,0,0,.2,.2)
call ufe('n08S',$514,1.9,310,.9,$578,$9C4,0,$41A,0,0,0,.2,.2)
call ufe('n08T',$7D0,2.1,360,1.,$7D0,$FA0,0,$5DC,0,0,0,.3,.3)
call ufe('n08Z',$3E8,1.7,$D2,.7,$3E8,$76C,0,750,0,0,0,0,0)
call ufe('n090',$44C,1.8,260,.8,$4B0,$898,0,900,0,0,0,.1,.1)
call ufe('n091',$514,1.9,310,.9,$578,$9C4,0,$41A,0,0,0,.2,.2)
call ufe('n092',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,0,0,0,.3,.3)
call ufe('n093',$6A4,2.3,410,1.1,$708,$C1C,0,$546,0,0,0,.4,.4)
call ufe('n094',$76C,2.5,460,1.2,$7D0,$D48,0,$5DC,0,0,0,.5,.5)
call ufe('n095',$9C4,2.7,610,1.3,5000,$E74,0,$7D0,0,0,0,.6,.6)
call ufe('n098',$834,2.7,510,1.3,$898,$E74,0,$79E,0,0,0,.6,.6)
call ufe('n09L',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,0,0,0,.3,.3)
call ufe('n09M',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,0,0,0,.3,.3)
call ufe('n09N',$6A4,2.3,410,1.1,$708,$C1C,0,$546,0,0,0,.4,.4)
call ufe('n09O',$6A4,2.3,410,1.1,$708,$C1C,0,$546,0,0,0,.4,.4)
call ufe('n09P',$6A4,2.3,410,1.1,$708,$C1C,0,$546,0,0,0,.4,.4)
call ufe('n09Q',$9C4,2.5,660,1.5,$7D0,$FA0,0,$7D0,0,0,0,.5,.5)
call ufe('n09R',$9C4,2.5,660,1.5,$7D0,$FA0,0,$7D0,0,0,0,.5,.5)
call ufe('n09X',$514,1.9,310,.9,$578,$9C4,0,$41A,0,0,0,.2,.2)
call ufe('n09Y',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,0,0,0,.3,.3)
call ufe('n09Z',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,0,0,0,.3,.3)
call ufe('n0A0',$6A4,2.3,410,1.1,$708,$C1C,0,$546,0,0,0,.4,.4)
call ufe('n0A7',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,0,0,0,.3,.3)
call ufe('n0A8',$6A4,2.3,410,1.1,$708,$C1C,0,$546,0,0,0,.4,.4)
call ufe('n0AA',$9C4,2.5,660,1.5,$7D0,$FA0,0,$7D0,0,0,0,.5,.5)
call ufe('n0AC',$44C,1.8,260,.8,$4B0,$898,0,900,0,0,0,.1,.1)
call ufe('n0AD',$6A4,2.3,410,1.1,$708,$C1C,0,$546,0,0,0,.4,.4)
call ufe('n0AF',$8FC,2.9,560,1.4,$960,$FA0,0,$708,0,0,0,.7,.7)
call ufe('n0AG',$BB8,3.3,760,1.8,$C80,5600,0,$9C4,0,0,0,.9,.9)
call ufe('n000',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n001',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n002',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n003',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n004',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n005',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n009',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n00B',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n00A',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n00C',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n00D',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n00E',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n008',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n007',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n006',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n00I',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n00J',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n00K',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n00H',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n00G',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n00F',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n00L',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n00M',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n00N',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n04Z',700,1.4,'n',.4,600,$514,0,450,.3,.3,0,0,0)
call ufe('n054',800,1.6,$A0,.6,800,$640,0,600,.3,.3,0,0,0)
call ufe('n01Y',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n01Z',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n020',600,1.,60,.4,400,$3E8,0,300,.3,.3,0,0,0)
call ufe('n024',700,1.4,'n',.4,600,$514,0,450,.3,.3,0,0,0)
call ufe('n025',700,1.4,'n',.4,600,$514,0,450,.3,.3,0,0,0)
call ufe('n026',700,1.4,'n',.4,600,$514,0,450,.3,.3,0,0,0)
call ufe('n02E',800,1.6,$A0,.6,800,$640,0,600,.3,.3,0,0,0)
call ufe('n02G',800,1.6,$A0,.6,800,$640,0,600,.3,.3,0,0,0)
call ufe('n02F',800,1.6,$A0,.6,800,$640,0,600,.3,.3,0,0,0)
call ufe('n02P',800,1.6,$A0,.6,800,$640,0,600,.3,.3,0,0,0)
call ufe('n02T',800,1.6,$A0,.6,800,$640,0,600,.3,.3,0,0,0)
call ufe('n033',800,1.6,$A0,.6,800,$640,0,600,.3,.3,0,0,0)
call ufe('n036',$3E8,1.7,$D2,.7,$3E8,$76C,0,750,.3,.3,0,0,0)
call ufe('n037',$3E8,1.7,$D2,.7,$3E8,$76C,0,750,.3,.3,0,0,0)
call ufe('n03J',$3E8,1.7,$D2,.7,$3E8,$76C,0,750,.3,.3,0,0,0)
call ufe('n038',$3E8,1.7,$D2,.7,$3E8,$76C,0,750,.3,.3,0,0,0)
call ufe('n03O',$3E8,1.7,$D2,.7,$3E8,$76C,0,750,.3,.3,0,0,0)
call ufe('n03M',$3E8,1.7,$D2,.7,$3E8,$76C,0,750,.3,.3,0,0,0)
call ufe('n03N',$3E8,1.7,$D2,.7,$3E8,$76C,0,750,.3,.3,0,0,0)
call ufe('n03L',$3E8,1.7,$D2,.7,$3E8,$76C,0,750,.3,.3,0,0,0)
call ufe('n03K',$3E8,1.7,$D2,.7,$3E8,$76C,0,750,.3,.3,0,0,0)
call ufe('n039',$3E8,1.7,$D2,.7,$3E8,$76C,0,750,.3,.3,0,0,0)
call ufe('n03P',$44C,1.8,260,.8,$4B0,$898,0,900,.3,.3,0,.1,.1)
call ufe('n03Q',$44C,1.8,260,.8,$4B0,$898,0,900,.3,.3,0,.1,.1)
call ufe('n03R',$44C,1.8,260,.8,$4B0,$898,0,900,.3,.3,0,.1,.1)
call ufe('n03V',$44C,1.8,260,.8,$4B0,$898,0,900,.3,.3,0,.1,.1)
call ufe('n03W',$44C,1.8,260,.8,$4B0,$898,0,900,.3,.3,0,.1,.1)
call ufe('n03X',$44C,1.8,260,.8,$4B0,$898,0,900,.3,.3,0,.1,.1)
call ufe('n03Y',$44C,1.8,260,.8,$4B0,$898,0,900,.3,.3,0,.1,.1)
call ufe('n03Z',$44C,1.8,260,.8,$4B0,$898,0,900,.3,.3,0,.1,.1)
call ufe('n045',$514,1.9,310,.9,$578,$9C4,0,$41A,.3,.3,0,.2,.2)
call ufe('n048',$514,1.9,310,.9,$578,$9C4,0,$41A,.3,.3,.1,.2,.2)
call ufe('n046',$514,1.9,310,.9,$578,$9C4,0,$41A,.3,.3,0,.2,.2)
call ufe('n047',$514,1.9,310,.9,$578,$9C4,0,$41A,.3,.3,0,.2,.2)
call ufe('n04A',$514,1.9,310,.9,$578,$9C4,0,$41A,.3,.3,0,.2,.2)
call ufe('n04G',$514,1.9,310,.9,$578,$9C4,0,$41A,.3,.3,0,.2,.2)
call ufe('n04H',$514,1.9,310,.9,$578,$9C4,0,$41A,.3,.3,0,.2,.2)
call ufe('n04I',$514,1.9,310,.9,$578,$9C4,0,$41A,.3,.3,0,.2,.2)
call ufe('n04J',$514,1.9,310,.9,$578,$9C4,0,$41A,.3,.3,0,.2,.2)
call ufe('n06H',$514,1.9,310,.9,$578,$9C4,0,$41A,.3,.3,0,.2,.2)
call ufe('n049',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,.3,.3,0,.3,.3)
call ufe('n04K',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,.3,.3,0,.3,.3)
call ufe('n04L',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,.3,.3,2.,.3,.3)
call ufe('n04O',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,.3,.3,0,.3,.3)
call ufe('n04N',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,.3,.3,0,.3,.3)
call ufe('n05G',700,1.4,'n',.4,600,$514,0,450,.3,.3,0,0,0)
call ufe('n05U',700,1.4,'n',.4,600,$514,0,450,.3,.3,0,0,0)
call ufe('n05O',$3E8,1.7,$D2,.7,$3E8,$76C,0,750,.3,.3,0,0,0)
call ufe('n06I',$3E8,1.7,$D2,.7,$3E8,$76C,0,750,.3,.3,0,0,0)
call ufe('n05N',$3E8,1.7,$D2,.7,$3E8,$76C,0,750,.3,.3,0,0,0)
call ufe('n06K',700,1.4,'n',.4,600,$514,0,450,.3,.3,0,0,0)
call ufe('n06L',800,1.6,$A0,.6,800,$640,0,600,.4,.4,0,0,0)
call ufe('n06M',$44C,1.8,260,.8,$4B0,$898,0,900,.5,.5,0,.1,.1)
call ufe('n08U',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,.3,.3,0,.3,.3)
call ufe('n08V',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,.3,.3,0,.3,.3)
call ufe('n08X',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,.3,.3,0,.3,.3)
call ufe('n08W',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,.3,.3,0,.3,.3)
call ufe('n08Y',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,.3,.3,0,.3,.3)
call ufe('n09S',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,.3,.3,0,.3,.3)
call ufe('n09T',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,.3,.3,0,.3,.3)
call ufe('n09U',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,.3,.3,0,.3,.3)
call ufe('n0A1',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,.3,.3,0,.3,.3)
call ufe('n0A2',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,.3,.3,0,.3,.3)
call ufe('n0A3',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,.3,.3,.03,.3,.3)
call ufe('n0A4',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,.3,.3,0,.3,.3)
call ufe('n0A9',$5DC,2.1,360,1.,$640,$AF0,0,$4B0,.3,.3,0,.3,.3)
call ufe('n00O',700,1.4,'n',.4,600,$514,0,450,.3,.3,0,0,0)
endfunction
function Yte takes unit u,integer i,unit v,integer id,real x,real y returns nothing
local integer c=1
if id=='n051' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call CreateItem('I04E',x,y)
call CreateItem('I01K',x,y)
elseif id=='n055' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call tWe(bj[3],x,y,GetRandomInt(2,5))
loop
exitwhen c>6
if XJ[c]!=null then
set Uv=Player(c-1)
call tze(c,2,3,400)
call UnitAddItemById(OJ[c],bj[5])
call tDe(c,60,1)
call tHe(c,$2710,1)
call tke(c,4,600,1)
call tFe(c,8000,1)
call tye(c,5)
call Toe(Uv,$2710,60,8000,0,600,4)
endif
set c=c+1
endloop
call CreateItem('I00V',x,y)
elseif id=='n056' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call tWe(bj[3],x,y,GetRandomInt(1,2))
call tWe(bj[4],x,y,GetRandomInt(1,2))
call CreateItem('I08M',x,y)
call tWe('I054',x,y,GetRandomInt(1,3))
loop
exitwhen c>6
if XJ[c]!=null then
set Pv=1.
if Wi[c]>0 then
set Pv=1.1+.02*Wi[c]
endif
set Uv=Player(c-1)
call the(c,R2I('d'*Pv),1)
call tfe(c,50,1)
call tFe(c,$FA0,1)
call tDe(c,40,1)
call tHe(c,$2710,1)
call tke(c,$A,$C8,1)
call tye(c,2)
call Toe(Uv,$2710,40,$FA0,50,$C8,$A)
endif
set c=c+1
endloop
call tUe('I067',x,y,40)
elseif id=='n057' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call CreateItem(mj[1],x,y)
call tWe(bj[4],x,y,GetRandomInt(2,3))
call tWe(bj[3],x,y,GetRandomInt(2,3))
call tWe('I054',x,y,GetRandomInt(2,3))
loop
exitwhen c>6
if XJ[c]!=null then
set Pv=1.
if Wi[c]>0 then
set Pv=1.1+.02*Wi[c]
endif
set Uv=Player(c-1)
call the(c,R2I($96*Pv),1)
call UnitAddItemById(OJ[c],bj[4])
call UnitAddItemById(OJ[c],bj[4])
call tfe(c,'d',1)
call tFe(c,8000,1)
call tDe(c,60,1)
call tHe(c,$2710,1)
call tke(c,$A,400,1)
call tye(c,3)
call Toe(Uv,$2710,60,8000,50,400,$A)
endif
set c=c+1
endloop
call CreateItem('I067',x,y)
elseif id=='n058' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call CreateItem(mj[2],x,y)
call tWe(bj[3],x,y,GetRandomInt(2,4))
call tWe(bj[4],x,y,GetRandomInt(2,4))
call tWe(bj[5],x,y,GetRandomInt(1,2))
call tUe(bj[6],x,y,35)
call t6e(i,$C,1)
call tWe('I054',x,y,GetRandomInt(3,5))
loop
exitwhen c>6
if XJ[c]!=null then
set Pv=1.
if Wi[c]>0 then
set Pv=1.1+.02*Wi[c]
endif
set Uv=Player(c-1)
call the(c,R2I(300*Pv),1)
call tje(c,GetRandomInt(20,30),GetRandomInt(1,6),1)
if GetRandomReal(0,'d')<=30 then
call UnitAddItemById(OJ[c],'I0HO')
endif
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],'I0G9')
call tfe(c,$C8,1)
call tFe(c,$4E20,1)
call tDe(c,$82,1)
call tHe(c,$7530,1)
call tke(c,$A,700,1)
call tye(c,$A)
call Toe(Uv,$7530,$82,$4E20,$C8,700,$A)
endif
set c=c+1
endloop
call CreateItem('I057',x,y)
call UnitAddItemById(OJ[i],'I09L')
call tWe('I068',x,y,3)
call tWe('I05Z',x,y,GetRandomInt(4,6))
elseif id=='n059' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call CreateItem(mj[2],x,y)
call tWe(bj[3],x,y,GetRandomInt(3,5))
call tWe(bj[4],x,y,GetRandomInt(3,5))
call tWe(bj[5],x,y,GetRandomInt(1,3))
call CreateItem(bj[6],x,y)
call t6e(i,$C,2)
call tWe('I054',x,y,GetRandomInt(3,5))
loop
exitwhen c>6
if XJ[c]!=null then
set Pv=1.
if Wi[c]>0 then
set Pv=1.1+.02*Wi[c]
endif
set Uv=Player(c-1)
call the(c,R2I(400*Pv),1)
call tje(c,GetRandomInt(30,40),GetRandomInt(1,6),1)
if GetRandomReal(0,'d')<=30 then
call UnitAddItemById(OJ[c],'I0HO')
endif
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],'I0G9')
call tfe(c,$FA,1)
call tFe(c,$61A8,1)
call tDe(c,$82,1)
call tHe(c,$7530,1)
call tke(c,$A,900,1)
call tye(c,$A)
call Toe(Uv,$7530,$82,$61A8,$FA,900,$A)
endif
set c=c+1
endloop
call CreateItem('I057',x,y)
call UnitAddItemById(OJ[i],'I09M')
call tWe('I068',x,y,3)
call tWe('I05Z',x,y,GetRandomInt(4,6))
elseif id=='n05A' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call CreateItem(mj[3],x,y)
call tWe(bj[3],x,y,GetRandomInt(2,3))
call tWe(bj[4],x,y,GetRandomInt(2,3))
call tWe(bj[5],x,y,GetRandomInt(2,3))
call tWe(bj[6],x,y,GetRandomInt(1,2))
call t6e(i,$C,3)
call tWe('I054',x,y,GetRandomInt(3,5))
loop
exitwhen c>6
if XJ[c]!=null then
set Pv=1.
if Wi[c]>0 then
set Pv=1.1+.02*Wi[c]
endif
set Uv=Player(c-1)
call the(c,R2I(500*Pv),1)
call tje(c,GetRandomInt(40,50),GetRandomInt(1,6),1)
call UnitAddItemById(OJ[c],bj[5])
if GetRandomReal(0,'d')<=35 then
call UnitAddItemById(OJ[c],'I0HO')
endif
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],'I0G9')
call tfe(c,300,1)
call tFe(c,$7530,1)
call tDe(c,$82,1)
call tHe(c,$7530,1)
call tke(c,$A,$44C,1)
call tye(c,$A)
call Toe(Uv,$7530,$82,$7530,300,$44C,$A)
endif
set c=c+1
endloop
call CreateItem('I057',x,y)
call tWe('I069',x,y,4)
call CreateItem('I01F',x,y)
call tWe('I05Z',x,y,GetRandomInt(4,6))
elseif id=='n05B' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call CreateItem(mj[3],x,y)
call tWe(bj[4],x,y,GetRandomInt(2,4))
call tWe(bj[5],x,y,GetRandomInt(2,5))
call tWe(bj[6],x,y,GetRandomInt(2,3))
call t6e(i,$C,4)
call tWe('I054',x,y,GetRandomInt(3,5))
loop
exitwhen c>6
if XJ[c]!=null then
set Pv=1.
if Wi[c]>0 then
set Pv=1.1+.02*Wi[c]
endif
set Uv=Player(c-1)
call the(c,R2I(600*Pv),1)
call tje(c,GetRandomInt(50,60),GetRandomInt(1,6),1)
call UnitAddItemById(OJ[c],bj[5])
if GetRandomReal(0,'d')<=35 then
call UnitAddItemById(OJ[c],'I0HO')
endif
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],'I0G9')
call tfe(c,350,1)
call tFe(c,$88B8,1)
call tDe(c,$82,1)
call tHe(c,$7530,1)
call tke(c,$A,$514,1)
call tye(c,$A)
call Toe(Uv,$7530,$82,$88B8,350,$514,$A)
endif
set c=c+1
endloop
call CreateItem('I057',x,y)
call tWe('I069',x,y,4)
call CreateItem('I01G',x,y)
call tWe('I05Z',x,y,GetRandomInt(5,7))
elseif id=='n05C' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call CreateItem(mj[4],x,y)
call tWe(bj[4],x,y,GetRandomInt(2,5))
call tWe(bj[5],x,y,GetRandomInt(3,5))
call tWe(bj[6],x,y,GetRandomInt(1,2))
call CreateItem(bj[7],x,y)
call CreateItem('I0BE',x,y)
call t6e(i,$C,5)
call tWe('I054',x,y,GetRandomInt(3,5))
loop
exitwhen c>6
if XJ[c]!=null then
set Pv=1.
if Wi[c]>0 then
set Pv=1.1+.02*Wi[c]
endif
set Uv=Player(c-1)
call the(c,R2I(700*Pv),1)
call tje(c,GetRandomInt(60,70),GetRandomInt(1,6),1)
call UnitAddItemById(OJ[c],bj[5])
if GetRandomReal(0,'d')<=40 then
call UnitAddItemById(OJ[c],'I0HO')
endif
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],'I0G9')
call tfe(c,400,1)
call tFe(c,$9C40,1)
call tDe(c,$82,1)
call tHe(c,$7530,1)
call tke(c,$A,$5DC,1)
call tye(c,$A)
call Toe(Uv,$7530,$82,$9C40,400,$5DC,$A)
endif
set c=c+1
endloop
call CreateItem('I057',x,y)
call UnitAddItemById(OJ[i],'I09P')
call tWe('I06A',x,y,4)
call tWe('I05Z',x,y,GetRandomInt(6,8))
elseif id=='n05D' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call CreateItem('I0JN',x,y)
call CreateItem(mj[4],x,y)
call tWe(bj[4],x,y,GetRandomInt(2,5))
call tWe(bj[5],x,y,GetRandomInt(2,5))
call tWe(bj[6],x,y,GetRandomInt(2,4))
call CreateItem(bj[7],x,y)
call t6e(i,$C,6)
call tWe('I054',x,y,GetRandomInt(3,5))
if GetRandomReal(0,'d')<=30 then
call CreateItem('I0KI',x,y)
endif
loop
exitwhen c>6
if XJ[c]!=null then
set Pv=1.
if Wi[c]>0 then
set Pv=1.1+.02*Wi[c]
endif
set Uv=Player(c-1)
call the(c,R2I(800*Pv),1)
call tje(c,GetRandomInt(70,80),GetRandomInt(1,6),1)
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],'I0HO')
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],'I0G9')
call tfe(c,500,1)
call tFe(c,$AFC8,1)
call tDe(c,$96,1)
call tHe(c,$7530,1)
call tke(c,$A,$7D0,1)
call tye(c,20)
call Toe(Uv,$7530,$96,$AFC8,500,$7D0,$A)
endif
set c=c+1
endloop
call CreateItem('I057',x,y)
call CreateItem('I06B',x,y)
call tWe('I06A',x,y,4)
call tWe('I05Z',x,y,GetRandomInt(6,9))
elseif id=='n05E' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call CreateItem('I0JA',x,y)
call CreateItem(mj[5],x,y)
call tWe(bj[4],x,y,GetRandomInt(2,5))
call tWe(bj[5],x,y,GetRandomInt(2,5))
call tWe(bj[6],x,y,GetRandomInt(3,4))
call tWe(bj[7],x,y,GetRandomInt(1,2))
call tUe(bj[8],x,y,30)
call tUe('I0EF',x,y,20)
call tWe('I054',x,y,GetRandomInt(4,6))
call tUe(Zj[8],x,y,50)
loop
exitwhen c>6
if XJ[c]!=null then
set Uv=Player(c-1)
call tze(c,5,3,$3E8)
call t2e(c,GetRandomInt(30,50))
call UnitAddItemById(OJ[c],'I0HO')
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],'I0G9')
call tfe(c,$3E8,1)
call tFe(c,$C350,1)
call tDe(c,$C8,1)
call tHe(c,$C350,1)
call tye(c,20)
call Toe(Uv,$C350,$C8,$C350,$3E8,0,0)
endif
set c=c+1
endloop
call CreateItem('I057',x,y)
call CreateItem('I057',x,y)
call CreateItem('I04I',x,y)
call tWe('I05Z',x,y,GetRandomInt(5,6))
elseif id=='n05Q' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call CreateItem('I0J8',x,y)
call CreateItem(mj[3],x,y)
call tWe(bj[4],x,y,GetRandomInt(2,3))
call tWe(bj[5],x,y,GetRandomInt(2,3))
call CreateItem(bj[6],x,y)
call tWe('I054',x,y,GetRandomInt(3,5))
call tWe('I05Z',x,y,GetRandomInt(2,4))
call tWe('I069',x,y,GetRandomInt(1,3))
call t6e(i,16,1)
loop
exitwhen c>6
if XJ[c]!=null then
if s1e(XJ[c],TC)then
set Uv=Player(c-1)
call tze(c,3,3,600)
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],'I0G9')
call tfe(c,'d',1)
call tDe(c,$C8,1)
call tHe(c,$7530,1)
call tke(c,$A,800,1)
call tFe(c,$61A8,1)
call tye(c,$A)
call Toe(Uv,$7530,$C8,$61A8,'d',800,$A)
endif
endif
set c=c+1
endloop
call UnitAddItemById(OJ[i],'I09N')
call CreateItem('I01M',x,y)
elseif id=='n05R' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call CreateItem(mj[1],x,y)
call tWe(bj[3],x,y,GetRandomInt(1,3))
call tWe(bj[4],x,y,GetRandomInt(1,4))
call tWe(bj[5],x,y,GetRandomInt(1,2))
call tWe('I054',x,y,GetRandomInt(1,3))
set Uv=Player(i-1)
call tze(i,3,3,$C8)
call UnitAddItemById(OJ[i],bj[4])
call UnitAddItemById(OJ[i],bj[4])
call tDe(i,40,1)
call tHe(i,$3A98,1)
call tke(i,$A,400,1)
call tye(i,3)
call CreateItem('I014',x,y)
call CreateItem('I05Z',x,y)
call UnitAddItemById(OJ[i],'I09K')
call Toe(Uv,$3A98,40,0,0,400,$A)
elseif id=='n05X' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
loop
exitwhen c>6
if XJ[c]!=null then
set Uv=Player(c-1)
call UnitAddItemById(OJ[c],bj[3])
call UnitAddItemById(OJ[c],bj[3])
call UnitAddItemById(OJ[c],bj[3])
call the(c,50,1)
call tFe(c,$3E8,1)
call tDe(c,$A,1)
call tHe(c,5000,1)
call tfe(c,$A,1)
call tye(c,2)
call Toe(Uv,5000,$A,$3E8,$A,0,0)
endif
set c=c+1
endloop
elseif id=='n05M' then
call tWe('I06A',x,y,GetRandomInt(2,3))
call tWe(bj[5],x,y,GetRandomInt(5,8))
call tWe(bj[4],x,y,GetRandomInt(2,6))
call tWe('I05Z',x,y,GetRandomInt(2,4))
elseif id=='n08G' then
call QKe(rj[i]+" đã đánh bại |cffffff00Nguyệt Lương Bảo Thố|r !",5)
call tfe(i,$3E8,1)
call tHe(i,$186A0,1)
call tye(i,8)
if GetRandomReal(0,'d')<=35 then
call CreateItem(iJ[8],x,y)
endif
set mv=GetRandomInt(0,'d')
if mv>=90 then
call CreateItem(bj[8],x,y)
elseif mv>=70 then
call CreateItem(bj[7],x,y)
call CreateItem(bj[7],x,y)
elseif mv>=40 then
call CreateItem(bj[7],x,y)
else
call CreateItem(bj[6],x,y)
call CreateItem(bj[6],x,y)
endif
set zI[i]=zI[i]+3
call Qke(Player(i-1),"|cffffff00"+uj[5]+I2S(zI[i]/ 3),5)
if GetRandomReal(0,'d')<=25 then
call CreateItem('I0G6',x,y)
endif
elseif id=='n08J' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
loop
exitwhen c>6
if XJ[c]!=null then
call UnitAddItemById(OJ[c],'I0GC')
call tye(c,2)
endif
set c=c+1
endloop
elseif id=='n098' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call t6e(i,$F,1)
call CreateItem(mj[6],x,y)
loop
exitwhen c>6
if XJ[c]!=null then
set Uv=Player(c-1)
call UnitAddItemById(OJ[c],bj[7])
call the(c,$7D0,1)
call tDe(c,500,1)
call tHe(c,$186A0,1)
call tfe(c,$3E8,1)
call tye(c,30)
call Toe(Uv,$186A0,500,0,$3E8,0,0)
endif
set c=c+1
endloop
call CreateItem('I0AF',x,y)
call tWe(bj[5],x,y,GetRandomInt(4,6))
call tWe(bj[6],x,y,GetRandomInt(2,4))
call tWe(bj[7],x,y,GetRandomInt(2,3))
call CreateItem(bj[8],x,y)
call tUe(bj[9],x,y,20)
endif
endfunction
function YTe takes nothing returns boolean
set Qv=tTe(zv,'n055',GetRectCenterX(AF),GetRectCenterY(AF),270,900)
call uke(Qv,0,0,0,0,0,0,1,2,0,0)
call QKe("|cffffff00"+"[ Phong Lăng Thủy Trại ] Thủy Tặc Đầu Lĩnh xuất hiện, tới Thuyền Phu ở Phong Lăng Độ để tham chiến !",5)
set ik=$41A
return false
endfunction
function Yue takes nothing returns boolean
local integer rd=GetRandomInt(1,5)
set Qv=tTe(zv,'n056',GetRectCenterX(hj[rd]),GetRectCenterY(hj[rd]),270,750)
call uke(Qv,0,0,0,0,0,0,1,0,0,0)
call QKe("|cffffff00"+"[ Võ Lâm Cao Thủ ] Cao Sĩ Hiền xuất hiện tại ngẫu nhiên 1 trong 5 địa điểm trên bản đồ !",5)
return false
endfunction
function YUe takes nothing returns boolean
local integer rd=GetRandomInt(1,5)
set Qv=tTe(zv,'n057',GetRectCenterX(dF),GetRectCenterY(dF),270,$4B0)
call uke(Qv,0,0,0,0,0,0,1,1,0,0)
call QKe("|cffffff00"+"[ Võ Lâm Cao Thủ ] Hương Ngọc Tiên xuất hiện tại Mông Cổ Vương Đỉnh !",5)
return false
endfunction
function Ywe takes nothing returns boolean
set Qv=CreateUnit(zv,'n058',GetRectCenterX(FF),GetRectCenterY(FF),270)
call uke(Qv,0,0,0,0,0,0,1,2,0,0)
call QKe("|cffffff00"+"[ Võ Lâm Cao Thủ ] Thần Thương Phương Vãn xuất hiện tại Đôn Hoàng Cổ Thành !",5)
return false
endfunction
function YWe takes nothing returns boolean
set Qv=CreateUnit(zv,'n059',GetRectCenterX(gF),GetRectCenterY(gF),270)
call uke(Qv,0,0,0,0,0,0,1,3,0,0)
call QKe("|cffffff00"+"[ Võ Lâm Cao Thủ ] Nhu Tiểu Thúy xuất hiện tại Phong Lăng Độ !",5)
return false
endfunction
function Yye takes nothing returns boolean
set Qv=CreateUnit(zv,'n05A',GetRectCenterX(fF),GetRectCenterY(fF),270)
call uke(Qv,0,0,0,0,0,0,1,4,0,0)
call QKe("|cffffff00"+"[ Võ Lâm Cao Thủ ] Giả Dật Sơn xuất hiện tại Hoài Thủy Sa Châu !",5)
return false
endfunction
function YYe takes nothing returns boolean
set Qv=CreateUnit(zv,'n05B',GetRectCenterX(DF),GetRectCenterY(DF),270)
call uke(Qv,0,0,0,0,0,0,1,5,0,0)
call QKe("|cffffff00"+"[ Võ Lâm Cao Thủ ] Man Tăng Bất Giới Hòa Thượng xuất hiện tại Tây Tháp Lâm !",5)
return false
endfunction
function Yze takes nothing returns boolean
set Qv=CreateUnit(zv,'n05C',GetRectCenterX(GF),GetRectCenterY(GF),270)
call uke(Qv,0,0,0,0,0,0,2,0,6,0)
call QKe("|cffffff00"+"[ Võ Lâm Cao Thủ ] Trần Vô Mệnh xuất hiện tại Trường Bạch Sơn !",5)
return false
endfunction
function YZe takes nothing returns boolean
set Qv=CreateUnit(zv,'n05D',GetRectCenterX(hF),GetRectCenterY(hF),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,0,0,0,0,0,0,2,0,7,0)
call QKe("|cffffff00"+"[ Võ Lâm Cao Thủ ] Độc Cô Kiếm xuất hiện tại Hoa Sơn !",5)
return false
endfunction
function Y_e takes nothing returns boolean
set Qv=tTe(zv,'n05E',GetRectCenterX(HF),GetRectCenterY(HF),270,900)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,0,0,0,0,0,0,2,8,0,0)
call QKe("|cffffff00"+"Thượng Cổ Hỏa Kỳ Lân xuất hiện tại Trường Bạch Sơn !",5)
set ak=$A8E
return false
endfunction
function Y0e takes nothing returns boolean
set Qv=tTe(zv,'n05Q',GetRectCenterX(ig),GetRectCenterY(ig),270,900)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,0,0,0,0,0,0,1,4,0,0)
call QKe("|cffffff00"+"[ Tần Lăng ] Vật đổi sao dời, Thiên Cổ Nhất Đế Tần Thủy Hoàng xuất hiện tại Tần Lăng !",5)
set nk=$636
return false
endfunction
function Y1e takes nothing returns boolean
set Qv=tTe(zv,'n05R',GetRectCenterX(ag),GetRectCenterY(ag),270,600)
call uke(Qv,0,0,0,0,0,0,1,1,0,0)
call QKe("|cffffff00"+"[ Tần Lăng ] Một tiếng động lớn phát ra, Bạch Khởi xuất hiện ở Tần Lăng !",5)
return false
endfunction
function Y2e takes nothing returns boolean
set Qv=tTe(zv,'n05X',GetRectCenterX(Wg),GetRectCenterY(Wg),270,600)
call uke(Qv,0,0,0,0,0,0,0,0,0,0)
call QKe("|cffffff00"+"Tầm Bảo Giả xuất hiện tại Lãnh Địa Bang Hội !",5)
return false
endfunction
function Y3e takes nothing returns boolean
local integer rd=GetRandomInt(1,5)
set Qv=tTe(zv,'n08G',GetRectCenterX(Wj[rd]),GetRectCenterY(Wj[rd]),270,900)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,0,0,0,0,0,0,1,3,0,0)
call QKe("|cffffff00"+"Nguyệt Lương Bảo Thố xuất hiện !",5)
return false
endfunction
function Y4e takes nothing returns boolean
set OC=true
return false
endfunction
function Y5e takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$41A,true)
call TriggerAddCondition(t,Filter(function YTe))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,870,true)
call TriggerAddCondition(t,Filter(function Yue))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$636,true)
call TriggerAddCondition(t,Filter(function YUe))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,916,false)
call TriggerAddCondition(t,Filter(function Ywe))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$5ED,false)
call TriggerAddCondition(t,Filter(function YWe))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$846,false)
call TriggerAddCondition(t,Filter(function Yye))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$A9F,false)
call TriggerAddCondition(t,Filter(function YYe))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$CF9,false)
call TriggerAddCondition(t,Filter(function Yze))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$729,false)
call TriggerAddCondition(t,Filter(function YZe))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$A8E,true)
call TriggerAddCondition(t,Filter(function Y_e))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$636,true)
call TriggerAddCondition(t,Filter(function Y0e))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$546,true)
call TriggerAddCondition(t,Filter(function Y1e))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,899,true)
call TriggerAddCondition(t,Filter(function Y2e))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$523,true)
call TriggerAddCondition(t,Filter(function Y3e))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$4B0,false)
call TriggerAddCondition(t,Filter(function Y4e))
set t=null
endfunction
function Y6e takes rect r returns nothing
local unit n
local player p
call GroupEnumUnitsInRect(sv,r,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
set p=GetOwningPlayer(n)
if p==zv then
call FlushChildHashtable(UH,GetHandleId(n))
call FlushChildHashtable(ht,GetHandleId(n))
call RemoveUnit(n)
endif
call GroupRemoveUnit(sv,n)
endloop
set p=null
set n=null
endfunction
function Y7e takes integer id,rect r,integer Y8e returns nothing
local integer i=1
loop
exitwhen i>Y8e
set Qv=CreateUnit(zv,id,tse(r),tSe(r),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uHe(Qv,0,0,0,0,hr)
set i=i+1
endloop
endfunction
function Y9e takes nothing returns boolean
local integer CGe=Qce()
set Mm[CGe]=Mm[CGe]-1
if Mm[CGe]==0 then
call QDe()
if jr then
call QKe("|cffffcc00"+"[ Bạch Hổ Đường ] ải "+I2S(hr)+" bắt đầu, tiêu diệt 30 mục tiêu !",5)
if hr>=21 then
call Y7e('n06M',OG,30)
set Gr=30
elseif hr>=$B then
call Y7e('n06L',OG,30)
set Gr=30
else
call Y7e('n06K',OG,30)
set Gr=30
endif
endif
call qne(CGe)
endif
return false
endfunction
function zve takes nothing returns nothing
local integer CGe=qae()
set Mm[CGe]=$A
call QIe(CGe,1.,true,function Y9e)
endfunction
function zee takes nothing returns nothing
local integer c=1
loop
exitwhen c>6
if XJ[c]!=null then
if s1e(XJ[c],OG)then
set Uv=Player(c-1)
call tDe(c,$F+2*hr,1)
call tHe(c,9000+$3E8*hr,1)
call tfe(c,$A+5*hr,1)
if hr==30 then
set bGe[(c)*(20)+$D]=1
endif
if hr>=21 then
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],bj[5])
elseif hr>=$B then
call UnitAddItemById(OJ[c],bj[5])
else
call UnitAddItemById(OJ[c],bj[4])
call UnitAddItemById(OJ[c],bj[4])
endif
call tke(c,6,$B4+20*hr,1)
call tye(c,2)
call Toe(Uv,9000+$3E8*hr,$F+2*hr,0,$A+5*hr,$B4+20*hr,6)
endif
endif
set c=c+1
endloop
endfunction
function zxe takes unit u,integer i,unit v,integer id,real x,real y returns nothing
set Gr=Gr-1
call tUe('I054',x,y,2.)
if Gr>0 then
call QKe("|cffffcc00"+"[ Bạch Hổ Đường ] mục tiêu còn lại: "+I2S(Gr),5)
endif
if Gr==0 then
if hr<30 then
call QKe("|cffffcc00"+"[ Bạch Hổ Đường ] toàn bộ kẻ địch đã bị tiêu diệt, nhận được phần thưởng ải "+I2S(hr),5)
set hr=hr+1
call zee()
call zve()
else
call QKe("|cffffcc00"+"[ Bạch Hổ Đường ] đội ngũ xuất sắc vượt qua 30 ải Bạch Hổ Đường, phụ bản kết thúc !",5)
call zee()
set hr=hr+1
endif
endif
endfunction
function zoe takes nothing returns boolean
local integer CGe=Qce()
if Qm[CGe]==$6CC then
set Jr=false
call QKe("|cffff0000"+"[ Bạch Hổ Đường ] lối vào đã đóng, người chơi bên ngoài không thể vào Bạch Hổ Đường !",5)
endif
set sm[CGe]=sm[CGe]+1
if sm[CGe]==$A then
set sm[CGe]=0
call TimerDialogSetTitle(tm[CGe],"Bạch Hổ Đường "+I2S(hr))
endif
set Qm[CGe]=Qm[CGe]-1
if Qm[CGe]<=0 or hr==31 then
call QDe()
set hr=0
set Hr=false
set jr=false
set kr=Qm[CGe]+gr
call QKe("|cffff0000"+"[ Hoạt Động ] Phụ bản Bạch Hổ Đường đã kết thúc !",5)
call Y6e(OG)
call DestroyTimerDialog(tm[CGe])
call DestroyTimer(Sm[CGe])
set Sm[CGe]=null
set tm[CGe]=null
call qie(CGe)
endif
return false
endfunction
function zre takes nothing returns nothing
local integer CGe=qre()
set jr=true
set Sm[CGe]=CreateTimer()
set Qm[CGe]=$708
set sm[CGe]=0
set gr=kr
set kr=Qm[CGe]
set Jr=true
call TimerStart(Sm[CGe],Qm[CGe],false,null)
set tm[CGe]=CreateTimerDialog(Sm[CGe])
call TimerDialogSetTitle(tm[CGe],"Bạch Hổ Đường 1")
call TimerDialogDisplay(tm[CGe],true)
call Y7e('n06K',OG,30)
set Gr=30
set hr=1
call QIe(CGe,1.,true,function zoe)
endfunction
function zie takes player p,integer i returns boolean
if Hr then
if not jr then
call zre()
call QKe(rj[i]+"|cffffcc00"+" đã khiêu chiến Bạch Hổ Đường",5)
else
call Qke(p,"|cffffcc00"+"Phụ bản đã được khiêu chiến trước đó !",5)
endif
else
call Qke(p,"|cffffcc00"+"Hoạt động vẫn chưa mở !",5)
endif
return false
endfunction
function zae takes nothing returns boolean
local integer CGe=Qce()
set wm[CGe]=wm[CGe]-1
if wm[CGe]<=0 then
call QDe()
set Hr=false
if gr==0 then
set kr=$708
endif
call qoe(CGe)
endif
return false
endfunction
function zne takes nothing returns boolean
local integer CGe=qxe()
set wm[CGe]=$4B0
set gr=0
set Hr=true
call QKe("|cffff0000"+"[ Hoạt Động ] Lối vào Bạch Hổ Đường đã mở, tới Dương Châu tìm Hộ Vệ Bạch Hổ Đường để tham gia !",5)
set kr=$4B0
call QIe(CGe,1.,true,function zae)
return false
endfunction
function zVe takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$BB8,true)
call TriggerAddCondition(t,Filter(function zne))
set t=null
endfunction
function zEe takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set eM[CGe]=eM[CGe]-30
call BlzSetSpecialEffectZ(rM[CGe],eM[CGe])
set vM[CGe]=vM[CGe]-1
if vM[CGe]<0 then
call QDe()
call Qre(AddSpecialEffect("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl",xM[CGe],oM[CGe]))
call GroupEnumUnitsInRange(sv,xM[CGe],oM[CGe],$A0,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yle(zm[CGe],n,'d',1.)
call uee(zm[CGe],n,false,Zm[CGe],Zm[CGe],THe(zm[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
call BlzSetSpecialEffectScale((rM[CGe]),((.01)*1.))
call Qre(rM[CGe])
set rM[CGe]=null
call qee(CGe)
endif
return false
endfunction
function zXe takes unit u,real d,real x,real y returns nothing
local integer CGe=qve()
set zm[CGe]=u
set Zm[CGe]=d
set xM[CGe]=x
set oM[CGe]=y
set vM[CGe]=$A
set eM[CGe]=sxe(xM[CGe],oM[CGe])+460
set rM[CGe]=AddSpecialEffect("war3mapImported\\E_VDK_kiem1.mdl",xM[CGe],oM[CGe])
call BlzSetSpecialEffectYaw(rM[CGe],270*bj_DEGTORAD)
call BlzSetSpecialEffectScale(rM[CGe],1.25)
call BlzSetSpecialEffectZ(rM[CGe],eM[CGe])
call QIe(CGe,.03125,true,function zEe)
endfunction
function zOe takes nothing returns boolean
local integer CGe=Qce()
local real x=GetRandomReal(OM[CGe]-$DC,OM[CGe]+$DC)
local real y=GetRandomReal(RM[CGe]-$DC,RM[CGe]+$DC)
call zXe(VM[CGe],EM[CGe],x,y)
set XM[CGe]=XM[CGe]-1
if XM[CGe]<=0 then
call QDe()
set VM[CGe]=null
call P9e(CGe)
endif
return false
endfunction
function zRe takes unit u,real d,real x,real y returns nothing
local integer CGe=P8e()
set VM[CGe]=u
set OM[CGe]=x
set RM[CGe]=y
set XM[CGe]=33
set EM[CGe]=d
call QIe(CGe,.12,true,function zOe)
endfunction
function zIe takes nothing returns nothing
local integer CGe=Qce()
local string s=" "
set jM[CGe]=jM[CGe]-1
if JM[CGe]<22 then
set JM[CGe]=JM[CGe]+1
set s=I2S(JM[CGe]-$B)
call BlzSendSyncData(s,GetPlayerName(Player(JM[CGe])))
endif
if jM[CGe]==55 then
elseif jM[CGe]<=0 then
call QDe()
call P3e(CGe)
endif
set s=null
endfunction
function zAe takes integer zNe returns nothing
local integer CGe=P2e()
set HM[CGe]=zNe
call QIe(CGe,.1,true,function zIe)
set jM[CGe]=60
set JM[CGe]=$B
endfunction
function zbe takes integer zNe,string zBe returns nothing
local string s="KVCT"+"\\"+GetPlayerName(Player(zNe))+"\\"+GetPlayerName(Player(zNe))+zBe+".txt"
if GetLocalPlayer()==Player(zNe)then
call Preloader(s)
endif
set s=null
endfunction
function zce takes integer zNe,integer Cbe returns boolean
return(StringLength(ble[(zNe)*($A)+Cbe])>1)or(ble[(zNe)*($A)+Cbe]!=" NO DATA")
endfunction
function zCe takes integer zNe,string PATH returns boolean
local integer i=0
if sr then
return false
else
loop
set ble[(zNe)*($A)+i]=" "
set i=i+1
exitwhen i==$B
endloop
call zAe(zNe)
endif
return true
endfunction
function zde takes nothing returns nothing
local integer CGe=Qce()
set FM[CGe]=FM[CGe]-1
if FM[CGe]==92 then
call SetPlayerName(Player($C)," NO DATA")
call SetPlayerName(Player($D)," NO DATA")
call SetPlayerName(Player($E)," NO DATA")
call SetPlayerName(Player($F)," NO DATA")
call SetPlayerName(Player(16)," NO DATA")
call SetPlayerName(Player(17)," NO DATA")
call SetPlayerName(Player(18)," NO DATA")
call SetPlayerName(Player(19)," NO DATA")
call SetPlayerName(Player(20)," NO DATA")
call SetPlayerName(Player(21)," NO DATA")
elseif FM[CGe]==82 then
call zbe(DM[CGe],fM[CGe])
elseif FM[CGe]==76 then
call zCe(DM[CGe],fM[CGe])
elseif FM[CGe]==26 then
if zce(DM[CGe],1)then
set Kr[DM[CGe]+1]=(ble[((DM[CGe]))*($A)+(1)])
set lr[DM[CGe]+1]=(ble[((DM[CGe]))*($A)+(2)])
set Lr[DM[CGe]+1]=(ble[((DM[CGe]))*($A)+(3)])
set mr[DM[CGe]+1]=(ble[((DM[CGe]))*($A)+(4)])
set Mr[DM[CGe]+1]=(ble[((DM[CGe]))*($A)+(5)])
set pr[DM[CGe]+1]=(ble[((DM[CGe]))*($A)+(6)])
set Pr[DM[CGe]+1]=(ble[((DM[CGe]))*($A)+(7)])
endif
endif
if FM[CGe]<=0 then
set Sr=false
call QDe()
call P5e(CGe)
endif
endfunction
function zDe takes integer zNe,string zBe returns nothing
local integer CGe=P4e()
set Sr=true
set fM[CGe]=zBe
set FM[CGe]=93
set DM[CGe]=zNe
call QIe(CGe,.0625,true,function zde)
endfunction
function zfe takes nothing returns nothing
local integer CGe=Qce()
if Sr==false then
call zDe(bM[CGe],BM[CGe])
call QDe()
call P7e(CGe)
return
endif
endfunction
function zFe takes integer zNe,string zBe returns nothing
local integer CGe=P6e()
set bM[CGe]=zNe
set BM[CGe]=zBe
call QIe(CGe,.03125,true,function zfe)
endfunction
function zge takes nothing returns nothing
set Qr=false
call PreloadGenClear()
call PreloadGenStart()
endfunction
function zGe takes integer zNe,integer Cbe,string zhe returns nothing
local integer Uie=$B+Cbe
if Cbe<1 then
call Qoe("add Local Not support index zero number!!!")
return
endif
if Qr then
call Qoe("New Local not Exist!!!")
return
endif
if Uie>21 then
call Qoe("Input value exceeds the limit!")
else
call Preload("\" )
\tcall SetPlayerName(Player("+I2S(Uie)+"),\" "+zhe+"\")
//")
endif
endfunction
function zHe takes integer zNe,integer zje,string zBe returns nothing
local string s="KVCT"+"\\"+GetPlayerName(Player(zNe))+"\\"+GetPlayerName(Player(zNe))+zBe+".txt"
set Qr=true
if GetLocalPlayer()!=Player(zNe)then
set s="user32.dll"
endif
call Preload("Nguoi choi: "+GetPlayerName(Player(zNe)))
call Preload("Thoi Gian Choi: "+I2S(qr[zNe+1]/ 2))
call Preload("KEY PASS: "+I2S(zje))
call PreloadGenEnd(s)
set s=null
endfunction
function zJe takes nothing returns nothing
local integer zNe=GetPlayerId(GetTriggerPlayer())
local string zke=BlzGetTriggerSyncPrefix()
local integer i=S2I(zke)
set ble[(zNe)*($A)+i]=BlzGetTriggerSyncData()
set ble[(zNe)*($A)+i]=SubString(ble[(zNe)*($A)+i],1,StringLength(ble[(zNe)*($A)+i]))
set zke=null
endfunction
function zKe takes nothing returns nothing
local integer i=0
local trigger QFe=CreateTrigger()
call TriggerAddAction(QFe,function zJe)
loop
call BlzTriggerRegisterPlayerSyncEvent(QFe,Player(i),"1",false)
call BlzTriggerRegisterPlayerSyncEvent(QFe,Player(i),"2",false)
call BlzTriggerRegisterPlayerSyncEvent(QFe,Player(i),"3",false)
call BlzTriggerRegisterPlayerSyncEvent(QFe,Player(i),"4",false)
call BlzTriggerRegisterPlayerSyncEvent(QFe,Player(i),"5",false)
call BlzTriggerRegisterPlayerSyncEvent(QFe,Player(i),"6",false)
call BlzTriggerRegisterPlayerSyncEvent(QFe,Player(i),"7",false)
call BlzTriggerRegisterPlayerSyncEvent(QFe,Player(i),"8",false)
call BlzTriggerRegisterPlayerSyncEvent(QFe,Player(i),"9",false)
call BlzTriggerRegisterPlayerSyncEvent(QFe,Player(i),"10",false)
set ble[(i)*($A)+1]=" "
set ble[(i)*($A)+2]=" "
set ble[(i)*($A)+3]=" "
set ble[(i)*($A)+4]=" "
set ble[(i)*($A)+5]=" "
set ble[(i)*($A)+6]=" "
set ble[(i)*($A)+7]=" "
set ble[(i)*($A)+8]=" "
set ble[(i)*($A)+9]=" "
set ble[(i)*($A)+$A]=" "
set i=i+1
exitwhen i==16
endloop
endfunction
function zle takes integer lv returns nothing
local integer c=1
loop
exitwhen c>6
if XJ[c]!=null then
if s1e(XJ[c],ug)then
set Uv=Player(c-1)
call tye(c,$A)
if lv==1 then
call UnitAddItemById(OJ[c],bj[5])
endif
if lv==2 then
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],bj[5])
endif
if lv==3 then
call UnitAddItemById(OJ[c],bj[6])
endif
if lv==4 then
call UnitAddItemById(OJ[c],bj[6])
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],bj[5])
endif
call UnitAddItemById(OJ[c],'I0G9')
call tke(c,6,R2I((500+$3E8*lv)*oj),1)
call tDe(c,R2I(('d'+50*lv)*oj),1)
call tHe(c,$2710+$2710*lv,1)
call Toe(Uv,$2710+$2710*lv,R2I(('d'+50*lv)*oj),0,0,R2I((500+$3E8*lv)*oj),6)
endif
endif
set c=c+1
endloop
endfunction
function zLe takes unit u,integer i,unit v,integer id,real x,real y returns nothing
if id==kj[1]then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call zle(1)
call CreateItem('I099',x,y)
call tWe(bj[4],x,y,GetRandomInt(2,4))
call tWe(bj[5],x,y,GetRandomInt(2,4))
call t6e(i,$B,1)
elseif id==kj[2]then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call zle(2)
call CreateItem('I09A',x,y)
call tWe(bj[4],x,y,GetRandomInt(3,6))
call tWe(bj[5],x,y,GetRandomInt(3,5))
call t6e(i,$B,2)
elseif id==kj[3]then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call zle(3)
call CreateItem('I09B',x,y)
call tWe(bj[5],x,y,GetRandomInt(1,3))
call tWe(bj[6],x,y,GetRandomInt(1,3))
call CreateItem(bj[7],x,y)
call t6e(i,$B,3)
elseif id==kj[4]then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call zle(4)
call CreateItem('I09C',x,y)
call tWe(bj[6],x,y,GetRandomInt(1,3))
call tWe(bj[7],x,y,GetRandomInt(1,2))
call CreateItem(bj[8],x,y)
call t6e(i,$B,4)
endif
endfunction
function zme takes nothing returns boolean
local integer CGe=Qce()
if LM[CGe]==300 then
if not spe(pM[CGe])then
call QKe(GetObjectName(tr)+"|cffffcc00"+" đã biến mất !",5)
call RemoveUnit(pM[CGe])
endif
set tr=0
set pM[CGe]=null
endif
set LM[CGe]=LM[CGe]-1
if LM[CGe]<=0 then
call QDe()
set Tr=false
call DestroyTimerDialog(MM[CGe])
call DestroyTimer(mM[CGe])
set mM[CGe]=null
set MM[CGe]=null
call P1e(CGe)
endif
return false
endfunction
function zMe takes integer lv returns nothing
local integer CGe=P0e()
set mM[CGe]=CreateTimer()
set LM[CGe]=900
call TimerStart(mM[CGe],LM[CGe],false,null)
set MM[CGe]=CreateTimerDialog(mM[CGe])
call TimerDialogSetTitle(MM[CGe],"Khiêu Chiến Bang Hội")
call TimerDialogDisplay(MM[CGe],true)
set pM[CGe]=CreateUnit(zv,tr,GetRectCenterX(Wg),GetRectCenterY(Wg),270)
call UnitAddAbility(pM[CGe],Ej[GetRandomInt(1,5)])
call Tje(pM[CGe],ox,.1*lv)
call uHe(pM[CGe],0,0,0,0,0)
call QIe(CGe,1.,true,function zme)
endfunction
function zpe takes player p,integer i,item t returns boolean
local integer lv=S2I(SubString(BlzGetItemDescription(t),0,1))
local integer zPe=S2I(SubString(BlzGetItemDescription(t),2,4))*sH
if ur[i]<5 then
if not Tr then
if bJ[i]>=2*lv and cCe[(i)*(20)+3]>=($7D0+$7D0*lv)and the(i,zPe,0)then
set ur[i]=ur[i]+1
set cCe[(i)*(20)+3]=cCe[(i)*(20)+3]-($7D0+$7D0*lv)
set Tr=true
set tr=kj[lv]
call QKe(GetObjectName(tr)+"|cffffcc00"+" xuất hiện tại Lãnh Địa Bang Hội",5)
call zMe(lv)
else
call Qke(p,"|cffffcc00"+"Bạn vẫn chưa đủ điều kiện khiêu chiến !",5)
endif
else
call Qke(p,"|cffffcc00"+"Thời gian khiêu chiến phải cách nhau 15 phút !",5)
endif
else
call Qke(p,"|cffffcc00"+"Mỗi người chơi chỉ có thể khiêu chiến 5 lần trong trận !",5)
endif
call RemoveItem(t)
return false
endfunction
function zqe takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set TM[CGe]=TM[CGe]-30
call BlzSetSpecialEffectZ(wM[CGe],TM[CGe])
set tM[CGe]=tM[CGe]-1
if tM[CGe]<0 then
call QDe()
call Qre(AddSpecialEffect("war3mapImported\\TDBD_targeteffect.mdl",uM[CGe],UM[CGe]))
call GroupEnumUnitsInRange(sv,uM[CGe],UM[CGe],$A0,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yle(sM[CGe],n,'d',1.)
call uee(sM[CGe],n,false,SM[CGe],SM[CGe],THe(sM[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
call BlzSetSpecialEffectScale((wM[CGe]),((.01)*1.))
call Qre(wM[CGe])
set wM[CGe]=null
call P_e(CGe)
endif
return false
endfunction
function zQe takes unit u,real d,real x,real y returns nothing
local integer CGe=PZe()
set sM[CGe]=u
set SM[CGe]=d
set uM[CGe]=x
set UM[CGe]=y
set tM[CGe]=$A
set TM[CGe]=sxe(uM[CGe],UM[CGe])+460
set wM[CGe]=AddSpecialEffect("war3mapImported\\Eff_dragonhead.mdl",uM[CGe],UM[CGe])
call BlzSetSpecialEffectYaw(wM[CGe],270*bj_DEGTORAD)
call BlzSetSpecialEffectScale(wM[CGe],1.5)
call BlzSetSpecialEffectZ(wM[CGe],TM[CGe])
call QIe(CGe,.03125,true,function zqe)
endfunction
function zse takes nothing returns boolean
local integer CGe=Qce()
local real x=GetRandomReal(ep[CGe]-700,ep[CGe]+700)
local real y=GetRandomReal(xp[CGe]-700,xp[CGe]+700)
call zQe(zM[CGe],ZM[CGe],x,y)
set x=GetRandomReal(ep[CGe]-700,ep[CGe]+700)
set y=GetRandomReal(xp[CGe]-700,xp[CGe]+700)
call zQe(zM[CGe],ZM[CGe],x,y)
set x=GetRandomReal(ep[CGe]-700,ep[CGe]+700)
set y=GetRandomReal(xp[CGe]-700,xp[CGe]+700)
call zQe(zM[CGe],ZM[CGe],x,y)
set vp[CGe]=vp[CGe]-1
if vp[CGe]<=0 then
call QDe()
set zM[CGe]=null
call Pze(CGe)
endif
return false
endfunction
function zSe takes unit u,real d returns nothing
local integer CGe=PYe()
set zM[CGe]=u
set ep[CGe]=GetUnitX(u)
set xp[CGe]=GetUnitY(u)
set vp[CGe]=40
set ZM[CGe]=d
call QIe(CGe,.2,true,function zse)
endfunction
function zte takes nothing returns boolean
local integer CGe=Qce()
if not spe(Ep[CGe])then
call uee(Vp[CGe],Ep[CGe],false,np[CGe],np[CGe],THe(Vp[CGe]))
endif
set ap[CGe]=ap[CGe]-1
if ap[CGe]<=0 or spe(Ep[CGe])or spe(Vp[CGe])then
call QDe()
set Vp[CGe]=null
set Ep[CGe]=null
call Pye(CGe)
endif
return false
endfunction
function zTe takes unit u,real d,unit v returns nothing
local integer CGe=PWe()
set Vp[CGe]=u
set Ep[CGe]=v
set np[CGe]=d
set ap[CGe]=4
call QIe(CGe,1.,true,function zte)
endfunction
function zue takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Np[CGe]=Np[CGe]-1
if Np[CGe]<=0 then
call QDe()
call GroupEnumUnitsInRange(sv,bp[CGe],Bp[CGe],400,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yle(Ip[CGe],n,'d',3.)
call uee(Ip[CGe],n,false,Ap[CGe],Ap[CGe],THe(Ip[CGe]))
call zTe(Ip[CGe],Ap[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set Ip[CGe]=null
call Qre(cp[CGe])
set cp[CGe]=null
call Pwe(CGe)
endif
return false
endfunction
function zUe takes unit u,real d,real x,real y returns nothing
local integer CGe=PUe()
set Ip[CGe]=u
set bp[CGe]=x
set Bp[CGe]=y
set Np[CGe]=1
set Ap[CGe]=d
set cp[CGe]=AddSpecialEffect("war3mapImported\\EFF_kiemluaroi.mdl",bp[CGe],Bp[CGe])
call QIe(CGe,1.,true,function zue)
endfunction
function zwe takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set gp[CGe]=gp[CGe]-1
if gp[CGe]<0 then
call QDe()
call Qre(AddSpecialEffect(("war3mapImported\\VDQ_baccapnhiphuc2.mdl"),((Gp[CGe])*1.),((Hp[CGe])*1.)))
call GroupEnumUnitsInRange(sv,Gp[CGe],Hp[CGe],$A0,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yle(fp[CGe],n,'d',1.)
call uee(fp[CGe],n,false,Fp[CGe],Fp[CGe],THe(fp[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set fp[CGe]=null
call Pue(CGe)
endif
return false
endfunction
function zWe takes unit u,real d,real x,real y returns nothing
local integer CGe=PTe()
set fp[CGe]=u
set Fp[CGe]=d
set Gp[CGe]=x
set Hp[CGe]=y
set gp[CGe]=1
call Qre(AddSpecialEffect(("war3mapImported\\VDK_kiemroi.mdl"),((Gp[CGe])*1.),((Hp[CGe])*1.)))
call QIe(CGe,.5,true,function zwe)
endfunction
function zye takes nothing returns boolean
local integer CGe=Qce()
local real x0=GetUnitX(lp[CGe])
local real y0=GetUnitY(lp[CGe])
local real x=GetRandomReal(x0-$FA,x0+$FA)
local real y=GetRandomReal(y0-$FA,y0+$FA)
call zWe(lp[CGe],Lp[CGe],x,y)
set x=GetRandomReal(x0-$FA,x0+$FA)
set y=GetRandomReal(y0-$FA,y0+$FA)
call zWe(lp[CGe],Lp[CGe],x,y)
set Mp[CGe]=Mp[CGe]-1
if Mp[CGe]<=0 then
call QDe()
set lp[CGe]=null
call Pte(CGe)
endif
return false
endfunction
function zYe takes unit u,real d returns nothing
local integer CGe=PSe()
set lp[CGe]=u
set Mp[CGe]=30
set Lp[CGe]=d
call QIe(CGe,.2,true,function zye)
endfunction
function zze takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Up[CGe]=(((Up[CGe])*1.)+((Ur)*1.)*Cos(((Tp[CGe])*1.)*bj_DEGTORAD))
set wp[CGe]=(((wp[CGe])*1.)+((Ur)*1.)*Sin(((Tp[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(zp[CGe],Up[CGe],wp[CGe],up[CGe])
if Zp[CGe]then
call GroupEnumUnitsInRange(sv,Up[CGe],wp[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Sp[CGe])then
call Qre(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Devour\\DevourEffectArt.mdl",n,"chest"))
call uee(sp[CGe],n,false,Wp[CGe],Wp[CGe],THe(sp[CGe]))
call yle(sp[CGe],n,yp[CGe],.5)
call GroupAddUnit(Sp[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set Yp[CGe]=Yp[CGe]-1
if Yp[CGe]<=0 then
call QDe()
call Qre(zp[CGe])
call Qne(Sp[CGe])
set Sp[CGe]=null
set zp[CGe]=null
set sp[CGe]=null
call Pse(CGe)
endif
return false
endfunction
function zZe takes unit u,real d,real r,real x,real y,real a,boolean b,real z_e returns nothing
local integer CGe=PQe()
set sp[CGe]=u
set Tp[CGe]=a
set Up[CGe]=x
set wp[CGe]=y
set Wp[CGe]=d
set yp[CGe]=r
set zp[CGe]=AddSpecialEffect("war3mapImported\\EFF_cham1.mdl",Up[CGe],wp[CGe])
set up[CGe]=sxe(Up[CGe],wp[CGe])+75
set Yp[CGe]=R2I(z_e/ Ur)
set Sp[CGe]=CreateGroup()
set Zp[CGe]=b
call BlzSetSpecialEffectScale(zp[CGe],1.)
call BlzSetSpecialEffectZ(zp[CGe],up[CGe])
call BlzSetSpecialEffectYaw(zp[CGe],Tp[CGe]*bj_DEGTORAD)
call QIe(CGe,.03125,true,function zze)
endfunction
function z0e takes nothing returns boolean
local integer CGe=Qce()
local real x=(((nP[CGe])*1.)+((60)*1.)*Cos(((EP[CGe])*1.)*bj_DEGTORAD))
local real y=(((VP[CGe])*1.)+((60)*1.)*Sin(((EP[CGe])*1.)*bj_DEGTORAD))
local real a=GetRandomReal(-8,8)
call zZe(oP[CGe],iP[CGe],aP[CGe],x,y,EP[CGe]+a,true,400)
set x=(((nP[CGe])*1.)+((40)*1.)*Cos(((EP[CGe]+90)*1.)*bj_DEGTORAD))
set y=(((VP[CGe])*1.)+((40)*1.)*Sin(((EP[CGe]+90)*1.)*bj_DEGTORAD))
call zZe(oP[CGe],iP[CGe],aP[CGe],x,y,EP[CGe]+a,false,400)
set x=(((nP[CGe])*1.)+((40)*1.)*Cos(((EP[CGe]-90)*1.)*bj_DEGTORAD))
set y=(((VP[CGe])*1.)+((40)*1.)*Sin(((EP[CGe]-90)*1.)*bj_DEGTORAD))
call zZe(oP[CGe],iP[CGe],aP[CGe],x,y,EP[CGe]+a,false,400)
set rP[CGe]=rP[CGe]-1
if rP[CGe]<=0 then
call QDe()
set oP[CGe]=null
call Pqe(CGe)
endif
return false
endfunction
function z1e takes unit u,real d,unit v,real r returns nothing
local integer CGe=PPe()
set oP[CGe]=u
set iP[CGe]=d
set aP[CGe]=r
set rP[CGe]=2
set nP[CGe]=GetUnitX(u)
set VP[CGe]=GetUnitY(u)
set EP[CGe]=soe(nP[CGe],VP[CGe],GetUnitX(v),GetUnitY(v))
call QIe(CGe,.24,true,function z0e)
endfunction
function z2e takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set BP[CGe]=(((BP[CGe])*1.)+((Wr)*1.)*Cos(((NP[CGe])*1.)*bj_DEGTORAD))
set cP[CGe]=(((cP[CGe])*1.)+((Wr)*1.)*Sin(((NP[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(DP[CGe],BP[CGe],cP[CGe],bP[CGe])
call GroupEnumUnitsInRange(sv,BP[CGe],cP[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,AP[CGe])then
call Qre(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Devour\\DevourEffectArt.mdl",n,"chest"))
call uee(IP[CGe],n,false,CP[CGe],CP[CGe],THe(IP[CGe]))
call yle(IP[CGe],n,'d',1.)
call GroupAddUnit(AP[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set dP[CGe]=dP[CGe]-1
if dP[CGe]<=0 then
call QDe()
call Qre(DP[CGe])
call Qne(AP[CGe])
set AP[CGe]=null
set DP[CGe]=null
set IP[CGe]=null
call Ppe(CGe)
endif
return false
endfunction
function z3e takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=PMe()
set IP[CGe]=u
set NP[CGe]=a
set BP[CGe]=x
set cP[CGe]=y
set CP[CGe]=d
set DP[CGe]=AddSpecialEffect("war3mapImported\\EFF_cham2.mdl",BP[CGe],cP[CGe])
set bP[CGe]=sxe(BP[CGe],cP[CGe])+75
set dP[CGe]=R2I(800/ Wr)
set AP[CGe]=CreateGroup()
call BlzSetSpecialEffectScale(DP[CGe],1.)
call BlzSetSpecialEffectZ(DP[CGe],bP[CGe])
call BlzSetSpecialEffectYaw(DP[CGe],NP[CGe]*bj_DEGTORAD)
call QIe(CGe,.03125,true,function z2e)
endfunction
function z4e takes nothing returns boolean
local integer CGe=Qce()
local real x=GetUnitX(GP[CGe])
local real y=GetUnitY(GP[CGe])
local real a=GetRandomReal(1,36)
call z3e(GP[CGe],HP[CGe],x,y,a*$A)
set hP[CGe]=hP[CGe]-1
if hP[CGe]<=0 then
call QDe()
set GP[CGe]=null
call Pme(CGe)
endif
return false
endfunction
function z5e takes unit u,real d returns nothing
local integer CGe=PLe()
set GP[CGe]=u
set HP[CGe]=d
set hP[CGe]=30
call QIe(CGe,.1,true,function z4e)
endfunction
function z6e takes integer lv returns integer
if lv==$A0 then
return $1E460
elseif lv>=$8C and lv<$A0 then
return 84000+$7D0*(lv-$8C)
elseif lv>='x' and lv<$8C then
return $DAC0+$578*(lv-'x')
elseif lv>='d' and lv<'x' then
return $8CA0+$3E8*(lv-'d')
elseif lv>=80 and lv<'d' then
return $55F0+700*(lv-80)
elseif lv>=60 and lv<80 then
return $2EE0+500*(lv-60)
elseif lv>=40 and lv<60 then
return 6000+300*(lv-40)
elseif lv>=20 and lv<40 then
return $7D0+$C8*(lv-20)
else
return 'd'*lv
endif
endfunction
function z7e takes integer i returns nothing
local string s="Loại: ngũ hành ấn
"
local integer lv=yr[i]+Yr[i]
set s=s+"Tài phú: |cff7fff00"+I2S(z6e(lv))+"|r
"
set s=s+"|cff6d6d6d[ Nâng cấp tiếp theo yêu cầu Trùng Sinh "+I2S(R2I(lv/ 20))+", tiêu hao "+I2S(40*(lv+1))+" NHHT ]|r
"
set s=s+"|cff7fff00Cường hóa ngũ hành tương khắc:|r "+I2S(Yr[i])+"%
"
set s=s+"|cff0078d7"+"& Luyện thành:|r "+I2S(Yr[i])+"/80
"
if(GetUnitAbilityLevel((XJ[i]),(Vj[1]))>0)then
set s=s+"-- Cường hóa hiệu quả khắc chế đối với |cff7fff00Môn phái hệ Mộc|r
"
elseif(GetUnitAbilityLevel((XJ[i]),(Vj[2]))>0)then
set s=s+"-- Cường hóa hiệu quả khắc chế đối với |cff6d6d6dMôn phái hệ Thổ|r
"
elseif(GetUnitAbilityLevel((XJ[i]),(Vj[3]))>0)then
set s=s+"-- Cường hóa hiệu quả khắc chế đối với |cffff0000Môn phái hệ Hỏa|r
"
elseif(GetUnitAbilityLevel((XJ[i]),(Vj[4]))>0)then
set s=s+"-- Cường hóa hiệu quả khắc chế đối với |cffffff00Môn phái hệ Kim|r
"
else
set s=s+"-- Cường hóa hiệu quả khắc chế đối với |cff00ced1Môn phái hệ Thủy|r
"
endif
set s=s+"|cff7fff00Nhược hóa ngũ hành tương khắc:|r "+I2S(yr[i])+"%
"
set s=s+"|cff0078d7"+"& Luyện thành:|r "+I2S(yr[i])+"/80
"
if(GetUnitAbilityLevel((XJ[i]),(Vj[1]))>0)then
set s=s+"-- Nhược hóa hiệu quả khắc chế đối với |cffff0000Môn phái hệ Hỏa|r
"
elseif(GetUnitAbilityLevel((XJ[i]),(Vj[2]))>0)then
set s=s+"-- Nhược hóa hiệu quả khắc chế đối với |cffffff00Môn phái hệ Kim|r
"
elseif(GetUnitAbilityLevel((XJ[i]),(Vj[3]))>0)then
set s=s+"-- Nhược hóa hiệu quả khắc chế đối với |cff6d6d6dMôn phái hệ Thổ|r
"
elseif(GetUnitAbilityLevel((XJ[i]),(Vj[4]))>0)then
set s=s+"-- Nhược hóa hiệu quả khắc chế đối với |cff00ced1Môn phái hệ Thủy|r
"
else
set s=s+"-- Nhược hóa hiệu quả khắc chế đối với |cff7fff00Môn phái hệ Mộc|r
"
endif
if lv>0 and lv<$A then
set oC="war3mapImported\\BTNnguhanhan1.blp"
set eC="|cff7fff00Ngũ Hành ấn
**|r"
elseif lv>=$A and lv<20 then
set oC="war3mapImported\\BTNnguhanhan2.blp"
set eC="|cff0078d7Ngũ Hành ấn
***|r"
elseif lv>=20 and lv<40 then
set oC="war3mapImported\\BTNnguhanhan3.blp"
set eC="|cff9370dbNgũ Hành ấn
****|r"
elseif lv>=40 and lv<50 then
set oC="war3mapImported\\BTNnguhanhan4.blp"
set eC="|cffffa500Ngũ Hành ấn
*****|r"
elseif lv>=50 and lv<60 then
set oC="war3mapImported\\BTNnguhanhan4.blp"
set eC="|cffffa500Ngũ Hành ấn
******|r"
elseif lv>=60 and lv<80 then
set oC="war3mapImported\\BTNnguhanhan5.blp"
set eC="|cffffa500Ngũ Hành ấn
*******|r"
elseif lv>=80 and lv<'d' then
set oC="war3mapImported\\BTNnguhanhan5.blp"
set eC="|cffffa500Ngũ Hành ấn
********|r"
elseif lv>='d' and lv<'x' then
set oC="war3mapImported\\BTNnguhanhan6.blp"
set eC="|cffffff00Ngũ Hành ấn
*********|r"
elseif lv>='x' and lv<$8C then
set oC="war3mapImported\\BTNnguhanhan7.blp"
set eC="|cffffff00Ngũ Hành ấn
**********|r"
elseif lv>=$8C and lv<$A0 then
set oC="war3mapImported\\BTNnguhanhan7.blp"
set eC="|cffffff00Ngũ Hành ấn
***********|r"
elseif lv>=$A0 then
set oC="war3mapImported\\BTNnguhanhan7.blp"
set eC="|cffffff00Ngũ Hành ấn
************|r"
endif
set xC=s
set Zr[i]=oC
set s=null
endfunction
function z8e takes integer lv returns integer
if lv>$8C then
return $7D0
elseif lv>'x' then
return $578
elseif lv>'d' then
return $3E8
elseif lv>80 then
return 700
elseif lv>60 then
return 500
elseif lv>40 then
return 300
elseif lv>20 then
return $C8
else
return 'd'
endif
endfunction
function z9e takes unit u,integer i,integer id returns nothing
local player p=GetOwningPlayer(u)
local integer lv=yr[i]+Yr[i]
local integer tp=0
if lv>=$A0 then
call Qke(p,"|cffffcc00"+"Ngũ Hành ấn đã luyện đến cấp tối đa !",3)
else
if id=='I050' then
if Yr[i]>=80 then
call Qke(p,"|cffffcc00"+"Thuộc tính cường hóa của Ngũ Hành ấn đã luyện đến cấp tối đa !",3)
else
if tfe(i,(lv+1)*40,0)and bJ[i]>=R2I(lv/ 20)then
call Tje(u,Ix,.01)
set Yr[i]=Yr[i]+1
call z7e(i)
set B4e[(i-1)*(23)+20]=20
set B5e[(i-1)*(23)+20]=eC
set B6e[(i-1)*(23)+20]="
"+xC
if GetLocalPlayer()==p then
call Uge(B3e[20],oC)
endif
set tp=z8e(lv)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+tp*2
call tCe(i,tp,1)
call tfe(i,(lv+1)*40,De)
call Qre(AddSpecialEffect("Abilities\\Spells\\Other\\Levelup\\LevelupCaster.mdl",GetUnitX(u),GetUnitY(u)))
call Qke(p,"|cffffcc00"+"Luyện thành thuộc tính cường hóa của Ngũ Hành ấn !",3)
call Qke(p,"|cff0078d7"+"- Cường hóa ngũ hành:|r "+I2S(Yr[i])+"/80",3)
endif
endif
else
if yr[i]>=80 then
call Qke(p,"|cffffcc00"+"Thuộc tính nhược hóa của Ngũ Hành ấn đã luyện đến cấp tối đa !",3)
else
if tfe(i,(lv+1)*40,0)and bJ[i]>=R2I(lv/ 20)then
call Tje(u,7557,.01)
set yr[i]=yr[i]+1
call z7e(i)
set B4e[(i-1)*(23)+20]=20
set B5e[(i-1)*(23)+20]=eC
set B6e[(i-1)*(23)+20]="
"+xC
if GetLocalPlayer()==p then
call Uge(B3e[20],oC)
endif
set tp=z8e(lv)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+tp*2
call tCe(i,tp,1)
call tfe(i,(lv+1)*40,De)
call Qre(AddSpecialEffect("Abilities\\Spells\\Other\\Levelup\\LevelupCaster.mdl",GetUnitX(u),GetUnitY(u)))
call Qke(p,"|cffffcc00"+"Luyện thành thuộc tính nhược hóa của Ngũ Hành ấn !",3)
call Qke(p,"|cff0078d7"+"- Nhược hóa ngũ hành:|r "+I2S(yr[i])+"/80",3)
endif
endif
endif
endif
set p=null
endfunction
function Zve takes integer i returns nothing
local integer lv=yr[i]+Yr[i]
local integer tp=z6e(lv)
call Tje(XJ[i],Ix,.01*Yr[i])
call Tje(XJ[i],7557,.01*yr[i])
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+tp*2
call tCe(i,tp,1)
call z7e(i)
set B4e[(i-1)*(23)+20]=20
set B5e[(i-1)*(23)+20]=eC
set B6e[(i-1)*(23)+20]="
"+xC
endfunction
function Zee takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set mP[CGe]=mP[CGe]-30
call BlzSetSpecialEffectZ(PP[CGe],mP[CGe])
set LP[CGe]=LP[CGe]-1
if LP[CGe]<=0 then
call QDe()
call Qre(AddSpecialEffect(("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl"),((MP[CGe])*1.),((pP[CGe])*1.)))
call GroupEnumUnitsInRange(sv,MP[CGe],pP[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call uee(KP[CGe],n,true,lP[CGe],lP[CGe],THe(KP[CGe]))
call yLe(KP[CGe],n,'d',.5)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
call Qre(PP[CGe])
set PP[CGe]=null
set KP[CGe]=null
call Ple(CGe)
endif
return false
endfunction
function Zxe takes unit u,real d,real x,real y returns nothing
local integer CGe=PKe()
set KP[CGe]=u
set lP[CGe]=d
set MP[CGe]=x
set pP[CGe]=y
set LP[CGe]=$A
set mP[CGe]=sxe(MP[CGe],pP[CGe])+420
set PP[CGe]=AddSpecialEffect("war3mapImported\\CBC_hanglong.mdl",MP[CGe],pP[CGe])
call BlzSetSpecialEffectPitch(PP[CGe],90*bj_DEGTORAD)
call BlzSetSpecialEffectYaw(PP[CGe],270*bj_DEGTORAD)
call BlzSetSpecialEffectScale(PP[CGe],2.8)
call BlzSetSpecialEffectZ(PP[CGe],mP[CGe])
call QIe(CGe,.03125,true,function Zee)
endfunction
function Zoe takes nothing returns boolean
local integer CGe=Qce()
local real x=GetRandomReal(uP[CGe]-$C8,uP[CGe]+$C8)
local real y=GetRandomReal(UP[CGe]-$C8,UP[CGe]+$C8)
call Zxe(SP[CGe],tP[CGe],x,y)
set TP[CGe]=TP[CGe]-1
if TP[CGe]<=0 then
call QDe()
set SP[CGe]=null
call Pke(CGe)
endif
return false
endfunction
function Zre takes unit u,real d,real x,real y returns nothing
local integer CGe=PJe()
set SP[CGe]=u
set uP[CGe]=x
set UP[CGe]=y
set TP[CGe]=40
set tP[CGe]=d
call QIe(CGe,.1,true,function Zoe)
endfunction
function Zie takes integer id returns string
return"war3mapImported\\BTNFrameUI_Empty.blp"
endfunction
function Zae takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local framehandle f=BlzGetTriggerFrame()
if f!=null then
call BlzFrameSetVisible(f,false)
call BlzFrameSetVisible(f,true)
endif
if not EC then
set f=null
set p=null
return false
endif
if ti[id]then
call Qke(p,"|cffff0000"+"Xin đừng thao tác quá nhanh !",5)
set f=null
set p=null
return false
endif
call UMe(id,1.)
if not Ub[id+1]or B2e[id]or BQe[id]or bNe[id]or bye[id]or b5e[id]or bQe[id]or b1e[id]or BHe[id]or b9e[id]then
set f=null
set p=null
return false
endif
if oi[id]then
set oi[id]=false
if bve[(id+1)*(6)+1]!=null then
if GetLocalPlayer()==p then
call Uge(bme[1],bqe[(id)*(6)+1])
endif
endif
if bve[(id+1)*(6)+2]!=null then
if GetLocalPlayer()==p then
call Uge(bme[2],bqe[(id)*(6)+2])
endif
endif
if bve[(id+1)*(6)+3]!=null then
if GetLocalPlayer()==p then
call Uge(bme[3],bqe[(id)*(6)+3])
endif
endif
if bve[(id+1)*(6)+4]!=null then
if GetLocalPlayer()==p then
call Uge(bme[4],bqe[(id)*(6)+4])
endif
endif
if bve[(id+1)*(6)+5]!=null then
if GetLocalPlayer()==p then
call Uge(bme[5],bqe[(id)*(6)+5])
endif
endif
if bve[(id+1)*(6)+6]!=null then
if GetLocalPlayer()==p then
call Uge(bme[6],bqe[(id)*(6)+6])
endif
endif
endif
if bLe[id]==false then
if GetLocalPlayer()==p then
call BlzFrameSetVisible(ei,true)
endif
set bLe[id]=true
else
set bLe[id]=false
if GetLocalPlayer()==p then
call BlzFrameSetVisible(ei,false)
endif
endif
set f=null
set p=null
return false
endfunction
function Zne takes nothing returns nothing
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local integer yae=LoadInteger(ht,4587,GetHandleId(f))
local real x=.23
local real y=.312
local real w=.2
local real h=.1085
if bMe[(id)*(6)+yae]!=0 then
if GetLocalPlayer()==p then
set zc=bpe[(id)*(6)+yae]
set Zc=bPe[(id)*(6)+yae]
set rC=x
set iC=y
set aC=w
set nC=h
endif
if GetLocalPlayer()==p then
call BlzFrameSetAbsPoint(yc,FRAMEPOINT_BOTTOMLEFT,rC,iC)
call BlzFrameSetSize(yc,aC,nC)
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextTitle",0),zc)
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,true)
endif
endif
set f=null
set p=null
endfunction
function ZVe takes nothing returns nothing
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,false)
call BlzFrameSetVisible(xi,false)
endif
set f=null
set p=null
endfunction
function ZEe takes nothing returns boolean
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local integer yae=LoadInteger(ht,4587,GetHandleId(f))
if GetLocalPlayer()==p then
call BlzFrameSetVisible(f,false)
call BlzFrameSetVisible(f,true)
endif
if ti[id]then
call Qke(p,"|cffff0000"+"Xin đừng thao tác quá nhanh !",5)
set f=null
set p=null
return false
endif
if bMe[(id)*(6)+yae]>0 and yae!=$C then
call wae(XJ[id+1],p,id+1,bve[(id+1)*(6)+yae],yae)
set bpe[(id)*(6)+yae]=null
set bPe[(id)*(6)+yae]=null
set bMe[(id)*(6)+yae]=0
if GetLocalPlayer()==p then
call Uge(bme[yae],Zie(yae))
call BlzFrameSetVisible(yc,true)
call BlzFrameSetVisible(yc,false)
endif
endif
set f=null
set p=null
return false
endfunction
function ZXe takes integer i,real x,real y returns nothing
set bme[i]=Uhe(Zie(i))
call Ude(bme[i],52,x,y)
call Uke(bme[i],function ZEe)
call Ule(bme[i],function Zne)
call ULe(bme[i],function ZVe)
call SaveInteger(ht,4587,GetHandleId(bme[i]),i)
call BlzFrameSetParent(bme[i],ei)
endfunction
function ZOe takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
if bLe[id] then
set bLe[id]=false
if GetLocalPlayer()==p then
call BlzFrameSetVisible(ei,false)
endif
endif
set p=null
return false
endfunction
function ZRe takes nothing returns nothing
local real z=.01
local real y=.02
set ei=UJe("war3mapImported\\FrameUI_BiBaoBackground.tga")
call UFe(ei,408,505,.005,.275)
call ZXe(1,z+.01384,y+.4003)
call ZXe(2,z+.01384,y+.3503)
call ZXe(3,z+.01384,y+.3003)
call ZXe(4,z+.17304,y+.4003)
call ZXe(5,z+.17304,y+.3503)
call ZXe(6,z+.17304,y+.3003)
set yc=BlzCreateFrame("BoxedText",BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI,0),0,0)
call BlzFrameSetVisible(ei,false)
call BlzFrameSetVisible(yc,false)
endfunction
function ZIe takes nothing returns nothing
local trigger t=CreateTrigger()
call BlzTriggerRegisterPlayerKeyEvent(t,Player(0),OSKEY_O,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(1),OSKEY_O,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(2),OSKEY_O,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(3),OSKEY_O,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(4),OSKEY_O,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(5),OSKEY_O,0,true)
call TriggerAddAction(t,function Zae)
set vi=Uhe("war3mapImported\\bt9.tga")
call UFe(vi,58,58,.34,.137)
call Uke(vi,function Zae)
set t=CreateTrigger()
call TriggerRegisterPlayerEvent(t,Player(0),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(1),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(2),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(3),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(4),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(5),EVENT_PLAYER_END_CINEMATIC)
call TriggerAddAction(t,function ZOe)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,13.,false)
call TriggerAddAction(t,function ZRe)
set t=null
endfunction
function ZAe takes nothing returns boolean
local unit u=(Ux)
local integer id=(GetPlayerId(GetOwningPlayer((u))))
if ri and(bde[(GetPlayerId(GetOwningPlayer(((u)))))])then
call SetUnitBlendTime(u,$7D0)
endif
set u=null
return false
endfunction
function ZNe takes nothing returns boolean
local unit u=(Ux)
local integer id=(GetPlayerId(GetOwningPlayer((u))))
if ri and(bde[(GetPlayerId(GetOwningPlayer(((u)))))])then
call SetUnitBlendTime(u,.15)
endif
call SetUnitAnimation(yce((GetPlayerId(GetOwningPlayer((u))))+1),"Stand")
set u=null
return false
endfunction
function Zbe takes nothing returns nothing
call TriggerAddCondition(tx,(Condition(function ZAe)))
call TriggerAddCondition(Tx,(Condition(function ZNe)))
endfunction
function ZBe takes nothing returns boolean
local integer CGe=Qce()
if zP[CGe]>18 then
if not spe(YP[CGe])then
if ZP[CGe]then
call SetUnitState(YP[CGe],UNIT_STATE_LIFE,GetUnitState(YP[CGe],UNIT_STATE_LIFE)+vq[CGe]*(1.+TKe(YP[CGe],Fx)))
else
call SetUnitState(YP[CGe],UNIT_STATE_MANA,GetUnitState(YP[CGe],UNIT_STATE_MANA)+vq[CGe]*(1.+TKe(YP[CGe],Fx)))
endif
endif
endif
set zP[CGe]=zP[CGe]-1
if zP[CGe]<=0 or spe(YP[CGe])then
call QDe()
if ZP[CGe]then
call UnitRemoveAbility(YP[CGe],'A0IL')
else
call UnitRemoveAbility(YP[CGe],'A0IM')
endif
set YP[CGe]=null
call Pje(CGe)
endif
return false
endfunction
function Zce takes unit u,boolean b,integer ZCe returns nothing
local integer CGe=PHe()
set zP[CGe]=30
set YP[CGe]=u
set ZP[CGe]=b
set vq[CGe]=ZCe
if b then
call tKe(u,'A0IL')
else
call tKe(u,'A0IM')
endif
call QIe(CGe,.5,true,function ZBe)
endfunction
function Zde takes nothing returns boolean
local integer CGe=Qce()
set rq[CGe]=rq[CGe]-1
if rq[CGe]<=0 then
call QDe()
if aq[CGe]!=null then
call BlzSetItemIconPath(aq[CGe],iq[CGe])
set aq[CGe]=null
set iq[CGe]=null
endif
call Phe(CGe)
endif
return false
endfunction
function ZDe takes item t,boolean b returns nothing
local integer CGe=PGe()
set rq[CGe]=R2I($F/ .03125)
set iq[CGe]=BlzGetItemIconPath(t)
set aq[CGe]=t
if b then
call BlzSetItemIconPath(aq[CGe],"war3mapImported\\BTNBTNDuocphamOff.blp")
else
call BlzSetItemIconPath(aq[CGe],"war3mapImported\\BTNBTNDuocphamOff.blp")
endif
call QIe(CGe,.03125,true,function Zde)
endfunction
function Zfe takes unit u,player p,integer i,item t,boolean b,boolean c returns boolean
local boolean n=true
local integer id=GetItemTypeId(t)
if c then
if not(IsUnitType((u),UNIT_TYPE_HERO))or GetUnitTypeId(u)=='H00K' then
call Qke(p,"|cffffcc00"+"Chỉ có thể sử dụng dược liệu trong hành trang nhân vật !",3)
call SetItemCharges(t,GetItemCharges(t)+1)
return false
endif
if rk[i]<LoadInteger(IT,id,89)or bJ[i]<LoadInteger(IT,id,462)then
call Qke(p,"|cffffcc00"+"Cấp độ không đáp ứng yêu cầu sử dụng dược phẩm !",3)
call SetItemCharges(t,GetItemCharges(t)+1)
return false
endif
if b and(GetUnitAbilityLevel((u),('A0IL'))>0)then
set n=false
endif
if not b and(GetUnitAbilityLevel((u),('A0IM'))>0)then
set n=false
endif
if n then
call Zce(u,b,LoadInteger(IT,id,6568))
else
call Qke(p,"|cffffcc00"+"Dược phẩm vẫn đang hồi phục !",3)
call SetItemCharges(t,GetItemCharges(t)+1)
endif
else
call Zce(XJ[i],b,LoadInteger(IT,id,6568))
if GetItemCharges(t)>0 then
call ZDe(t,b)
endif
endif
return false
endfunction
function ZFe takes integer i,integer rd returns nothing
local integer z=S2I(SubString(Vi[i],rd-1,rd))
local string s=Vi[i]
if z<9 then
set z=z+1
if rd==1 then
set Vi[i]=I2S(z)+SubString(s,1,8)
elseif rd==8 then
set Vi[i]=SubString(s,0,7)+I2S(z)
else
set Vi[i]=SubString(s,0,rd-1)+I2S(z)+SubString(s,rd,8)
endif
endif
set s=null
endfunction
function Zge takes nothing returns boolean
local integer CGe=Qce()
set Oq[CGe]=Oq[CGe]-1
if Oq[CGe]<=0 or not(GetUnitAbilityLevel((Xq[CGe]),('A0Z4'))>0)then
call QDe()
call UnitRemoveAbility(Xq[CGe],'A0Z4')
call Tje(Xq[CGe],xx,-.35)
call Tje(Xq[CGe],ox,-.35)
call Tue(Xq[CGe],-$C8)
set Xq[CGe]=null
call Pge(CGe)
endif
return false
endfunction
function ZGe takes integer i returns nothing
local integer CGe=PFe()
set Xq[CGe]=XJ[i]
set Oq[CGe]=600
call tKe(Xq[CGe],'A0Z4')
call Tje(Xq[CGe],xx,.35)
call Tje(Xq[CGe],ox,.35)
call Tue(Xq[CGe],$C8)
call QIe(CGe,1.,true,function Zge)
endfunction
function Zhe takes nothing returns integer
local integer i=1
local integer b=0
loop
exitwhen i>6
if XJ[i]!=null and s1e(XJ[i],ug)then
set b=b+1
endif
set i=i+1
endloop
return b
endfunction
function ZHe takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real T0e=.9+.1*Zhe()
local integer i=0
call Qre(AddSpecialEffect(("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl"),((GetRectCenterX(RG))*1.),((GetRectCenterY(RG))*1.)))
call GroupEnumUnitsInRect(sv,ug,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if(IsUnitType((n),UNIT_TYPE_HERO))then
call tRe(n,R2I($C350*T0e))
set i=(GetPlayerId(GetOwningPlayer((n)))+1)
call tFe(i,R2I($5DC*T0e),1)
call the(i,R2I('d'*T0e),1)
call tDe(i,$F,1)
if BUe[(i)*(20)+7]>0 and Bme[(i)*(20)+1]<5*SH then
set Bme[(i)*(20)+1]=Bme[(i)*(20)+1]+'x'
endif
if BUe[(i)*(20)+8]>0 and Bme[(i)*(20)+2]<5*SH then
set Bme[(i)*(20)+2]=Bme[(i)*(20)+2]+'x'
endif
if So[i]>=1 and So[i]<40 and Bme[(i)*(20)+3]<5*SH then
set Bme[(i)*(20)+3]=Bme[(i)*(20)+3]+'x'
endif
call Qre(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIlm\\AIlmTarget.mdl",n,"origin"))
if Nq[CGe]==1 then
call UnitAddItemById(OJ[i],'I0FY')
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set Nq[CGe]=Nq[CGe]-1
if Nq[CGe]<=0 then
call QDe()
call Qre(bq[CGe])
set bq[CGe]=null
call RemoveUnit(dH)
call QKe("|cffffff00"+"Lửa trại bang hội đã kết thúc, Nguyệt Hoa Tửu được chuyển về rương của mỗi người chơi !",5)
call Pfe(CGe)
endif
return false
endfunction
function Zje takes nothing returns nothing
local integer CGe=PDe()
set Nq[CGe]=30
set bq[CGe]=AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl",GetRectCenterX(RG),GetRectCenterY(RG))
call QIe(CGe,10.,true,function ZHe)
endfunction
function ZJe takes unit u,player p,integer i returns nothing
local integer c=0
if not ii and ni[i]>0 then
set ai=ai+ni[i]
set ni[i]=0
call QKe(rj[i]+" đã thêm Củi Khô vào Lửa Trại Bang Hội: "+"|cffff0000"+I2S(R2I(ai/ 3))+"/40",5)
if ai>='x' then
call QKe("|cffffff00"+"Số lượng củi khô đã đủ, lửa trại sẽ được đốt trong 5 phút, người chơi mau tiến về Lãnh Địa Bang Hội để nhận thưởng !",$F)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl"),((GetRectCenterX(RG))*1.),((GetRectCenterY(RG))*1.)))
set ii=true
call Zje()
endif
endif
endfunction
function Zke takes unit u,player p,integer i,integer id returns nothing
local integer rd=0
if id==iJ[1]then
call ZFe(i,1)
set rd=GetRandomInt(4,7)
call UnitAddItemById(OJ[i],bj[rd])
call QKe(rj[i]+" sử dụng "+GetObjectName(iJ[1])+" nhận được 1 Huyền Tinh cấp "+I2S(rd)+" !",5)
elseif id==iJ[2]then
call ZFe(i,2)
call tje(i,25,GetRandomInt(1,6),1)
set rd=GetRandomInt(1,8)
if rd==1 then
call UnitAddItemById(OJ[i],bj[7])
call QKe(rj[i]+" sử dụng "+GetObjectName(iJ[2])+" nhận được 1 Huyền Tinh cấp 7 !",5)
elseif rd==2 or rd==3 then
if GetRandomInt(1,3)==1 then
call UnitAddItemById(OJ[i],bj[6])
call UnitAddItemById(OJ[i],bj[6])
call QKe(rj[i]+" sử dụng "+GetObjectName(iJ[2])+" nhận được 2 Huyền Tinh cấp 6 !",5)
else
call UnitAddItemById(OJ[i],bj[6])
call QKe(rj[i]+" sử dụng "+GetObjectName(iJ[2])+" nhận được 1 Huyền Tinh cấp 6 !",5)
endif
else
set rd=GetRandomInt(4,5)
if GetRandomInt(1,2)==1 then
call UnitAddItemById(OJ[i],bj[rd])
call UnitAddItemById(OJ[i],bj[rd])
call QKe(rj[i]+" sử dụng "+GetObjectName(iJ[2])+" nhận được 2 Huyền Tinh cấp "+I2S(rd)+" !",5)
else
call UnitAddItemById(OJ[i],bj[rd])
call QKe(rj[i]+" sử dụng "+GetObjectName(iJ[2])+" nhận được 1 Huyền Tinh cấp "+I2S(rd)+" !",5)
endif
endif
elseif id==iJ[3]then
call ZFe(i,3)
set rd=GetRandomInt(500,$3E8)
call the(i,rd,1)
set rd=GetRandomInt(300,800)
call tDe(i,rd,1)
call QKe(rj[i]+" sử dụng "+GetObjectName(iJ[3])+" cống hiến bang và uy danh !",5)
elseif id==iJ[4]then
call ZFe(i,4)
set rJ[i]=rJ[i]+4
set rd=GetRandomInt(1,8)
if rd==1 then
call UnitAddItemById(OJ[i],bj[8])
call QKe(rj[i]+" sử dụng "+GetObjectName(iJ[4])+" nhận được 1 Huyền Tinh cấp 8 và 1 Tiền Xu Cổ !",5)
elseif rd==2 or rd==3 then
set rd=GetRandomInt(1,4)
if rd==1 then
call UnitAddItemById(OJ[i],bj[7])
call UnitAddItemById(OJ[i],bj[7])
call QKe(rj[i]+" sử dụng "+GetObjectName(iJ[4])+" nhận được 2 Huyền Tinh cấp 7 và 1 Tiền Xu Cổ !",5)
else
call UnitAddItemById(OJ[i],bj[7])
call QKe(rj[i]+" sử dụng "+GetObjectName(iJ[4])+" nhận được 1 Huyền Tinh cấp 7 và 1 Tiền Xu Cổ !",5)
endif
else
set rd=GetRandomInt(5,6)
call UnitAddItemById(OJ[i],bj[rd])
call UnitAddItemById(OJ[i],bj[rd])
call QKe(rj[i]+" sử dụng "+GetObjectName(iJ[4])+" nhận được 2 Huyền Tinh cấp "+I2S(rd)+" và 1 Tiền Xu Cổ !",5)
endif
elseif id==iJ[5]then
call ZFe(i,5)
set rd=GetRandomInt(2*sH,3*sH)
call tHe(i,rd,1)
call QKe(rj[i]+" sử dụng "+GetObjectName(iJ[5])+" nhận được "+I2S(rd)+" bạc !",5)
elseif id==iJ[6]then
call ZFe(i,6)
call tDe(i,800,1)
call tFe(i,sH*3,1)
call tfe(i,800,1)
call tke(i,GetRandomInt(1,$A),$3E8,1)
call QKe(rj[i]+" sử dụng "+GetObjectName(iJ[6])+" nhận được 800 uy danh, 30000 chân khí, 800 NHHT, 1000 điểm danh vọng trang bị !",5)
elseif id==iJ[7]then
call ZFe(i,7)
set rd=GetRandomInt(500,$3E8)
call tfe(i,rd,1)
call QKe(rj[i]+" sử dụng "+GetObjectName(iJ[7])+" nhận được "+I2S(rd)+" NHHT !",5)
elseif id==iJ[8]then
call ZFe(i,8)
set rd=GetRandomInt(sH,4*sH)
call tFe(i,rd,1)
call QKe(rj[i]+" sử dụng "+GetObjectName(iJ[8])+" nhận được "+I2S(rd)+" chân khí !",5)
elseif id=='I0FX' then
if Ri[i]<20 then
set rJ[i]=rJ[i]+4
set rd=GetRandomInt(1,20)
set Oi[i]=Oi[i]+2
set Ri[i]=Ri[i]+2
call Qke(p,"|cffffcc00"+"Số lần hoa đăng trong trận còn lại: "+I2S($A-Ri[i]/ 2),5)
call Qke(p,"|cffffcc00"+"Tích lũy số lần hoa đăng: "+I2S(Oi[i]/ 2),5)
if rd==1 then
call UnitAddItemById(OJ[i],bj[9])
call QKe(rj[i]+"|cffffcc00"+" sử dụng Lễ Bao Hoa Đăng nhận được 1 Huyền Tinh cấp 9 !",5)
elseif rd==2 then
call UnitAddItemById(OJ[i],bj[8])
call QKe(rj[i]+"|cffffcc00"+" sử dụng Lễ Bao Hoa Đăng nhận được 1 Huyền Tinh cấp 8 !",5)
elseif rd>=3 and rd<=6 then
set rd=GetRandomInt(6,7)
call UnitAddItemById(OJ[i],bj[rd])
call QKe(rj[i]+"|cffffcc00"+" sử dụng Lễ Bao Hoa Đăng nhận được Huyền Tinh cấp "+I2S(rd)+" !",5)
elseif rd>=7 and rd<=9 then
call tfe(i,$8AE,1)
call QKe(rj[i]+"|cffffcc00"+" sử dụng Lễ Bao Hoa Đăng nhận được 2222 Ngũ Hành Hồn Thạch !",5)
elseif rd>=$A and rd<=$E then
call tHe(i,$36330,1)
call QKe(rj[i]+"|cffffcc00"+" sử dụng Lễ Bao Hoa Đăng nhận được 222000 bạc !",5)
elseif rd==$F then
call UnitAddItemById(OJ[i],'I0BK')
call QKe(rj[i]+"|cffffcc00"+" sử dụng Lễ Bao Hoa Đăng nhận được Du Long Danh Vọng Lệnh !",5)
elseif rd==16 then
call UnitAddItemById(OJ[i],'I0BV')
call QKe(rj[i]+"|cffffcc00"+" sử dụng Lễ Bao Hoa Đăng nhận được Rương Bảo Thạch !",5)
else
call UnitAddItemById(OJ[i],bj[5])
call UnitAddItemById(OJ[i],bj[5])
call QKe(rj[i]+"|cffffcc00"+" sử dụng Lễ Bao Hoa Đăng nhận được 2 Huyền Tinh cấp 5 !",5)
endif
else
call Qke(p,"|cffffcc00"+"Mỗi trận chỉ có thể thả hoa đăng 10 lần !",5)
endif
elseif id=='I0FY' then
call tHe(i,$38F75,1)
call tDe(i,511,1)
call tFe(i,$2FBE,1)
set rd=GetRandomInt(1,28)
if rd==1 and rd==2 then
call UnitAddItemById(OJ[i],bj[9])
call QKe(rj[i]+"|cffffcc00"+" sử dụng Nguyệt Hoa Tửu nhận được 1 Huyền Tinh cấp 9 !",5)
elseif rd==3 then
call UnitAddItemById(OJ[i],Lj[7])
call QKe(rj[i]+"|cffffcc00"+" sử dụng Nguyệt Hoa Tửu nhận được 1 Túi Bảo Thạch cấp 7 !",5)
elseif rd==4 and rd==5 then
call UnitAddItemById(OJ[i],bj[8])
call QKe(rj[i]+"|cffffcc00"+" sử dụng Nguyệt Hoa Tửu nhận được 1 Huyền Tinh cấp 8 !",5)
elseif rd>=6 and rd<=$C then
set rd=GetRandomInt(6,7)
call UnitAddItemById(OJ[i],bj[rd])
call UnitAddItemById(OJ[i],bj[rd])
call QKe(rj[i]+"|cffffcc00"+" sử dụng Nguyệt Hoa Tửu nhận được 2 Huyền Tinh cấp "+I2S(rd)+" !",5)
elseif rd>=$D and rd<=18 then
call tfe(i,$D05,1)
call QKe(rj[i]+"|cffffcc00"+" sử dụng Nguyệt Hoa Tửu nhận được 3333 Ngũ Hành Hồn Thạch !",5)
elseif rd==19 then
call UnitAddItemById(OJ[i],Lj[6])
call QKe(rj[i]+"|cffffcc00"+" sử dụng Nguyệt Hoa Tửu nhận được 1 Túi Bảo Thạch cấp 6 !",5)
elseif rd==20 or rd==21 then
call UnitAddItemById(OJ[i],Lj[5])
call QKe(rj[i]+"|cffffcc00"+" sử dụng Nguyệt Hoa Tửu nhận được 1 Túi Bảo Thạch cấp 5 !",5)
elseif rd==22 or rd==23 then
call tje(i,'d',GetRandomInt(1,6),1)
call QKe(rj[i]+"|cffffcc00"+" sử dụng Nguyệt Hoa Tửu nhận được 100 Mảnh Trang Bị Đồng Hành !",5)
else
call UnitAddItemById(OJ[i],Lj[4])
call QKe(rj[i]+"|cffffcc00"+" sử dụng Nguyệt Hoa Tửu nhận được 1 Túi Bảo Thạch cấp 4 !",5)
endif
call ZGe(i)
endif
endfunction
function ZKe takes unit u,player p,integer i,item t returns nothing
if s1e(u,Xh)then
call RemoveItem(t)
call Qke(p,"|cffffcc00"+"Hoa đăng bay lên trời, bạn nhận được một Lễ Bao Hoa Đăng !",5)
call UnitAddItemById(u,'I0FX')
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AItb\\AItbTarget.mdl"),(u),"origin"))
else
call Qke(p,"|cffffcc00"+"Bạn hãy tới hồ sen ở phía tây bắc Ba Lăng Huyện để thả hoa đăng !",5)
endif
endfunction
function Zle takes unit u,player p,integer i returns nothing
local integer s1=S2I(SubString(Vi[i],0,1))
local integer s2=S2I(SubString(Vi[i],1,2))
local integer s3=S2I(SubString(Vi[i],2,3))
local integer s4=S2I(SubString(Vi[i],3,4))
local integer s5=S2I(SubString(Vi[i],4,5))
local integer s6=S2I(SubString(Vi[i],5,6))
local integer s7=S2I(SubString(Vi[i],6,7))
local integer s8=S2I(SubString(Vi[i],7,8))
if Ei[i]<30 then
if s1>0 and s2>0 and s3>0 and s4>0 and s5>0 and s6>0 and s7>0 and s8>0 then
set Ei[i]=Ei[i]+1
call Qke(p,"|cffffcc00"+"Bạn đã nhận phần thưởng Hộp Bánh Trung Thu lần thứ "+I2S(Ei[i])+" !",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),(u),"origin"))
set s1=s1-1
set s2=s2-1
set s3=s3-1
set s4=s4-1
set s5=s5-1
set s6=s6-1
set s7=s7-1
set s8=s8-1
set Vi[i]=I2S(s1)+I2S(s2)+I2S(s3)+I2S(s4)+I2S(s5)+I2S(s6)+I2S(s7)+I2S(s8)
call tHe(i,3*SH,1)
call tfe(i,4*K1,1)
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
set rJ[i]=rJ[i]+20
else
call Qke(p,"|cffffcc00"+"Bạn vẫn chưa thu thập đủ 8 Bánh Trung Thu !",5)
endif
else
call Qke(p,"|cffffcc00"+"Mỗi nhân vật chỉ có thể đổi thưởng 30 lần !",5)
endif
endfunction
function ZLe takes integer id returns string
return"war3mapImported\\FrameUI_EMPTYBUTTON.tga"
endfunction
function Zme takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local framehandle f=BlzGetTriggerFrame()
if f!=null then
call BlzFrameSetVisible(f,false)
call BlzFrameSetVisible(f,true)
endif
if not EC then
set f=null
set p=null
return false
endif
if ti[id]then
call Qke(p,"|cffff0000"+"Xin đừng thao tác quá nhanh !",5)
set f=null
set p=null
return false
endif
call UMe(id,1.)
if not Ub[id+1]or B2e[id]or BQe[id]or bNe[id]or bye[id]or bLe[id]or b5e[id]or b1e[id]or BHe[id]or b9e[id]then
set f=null
set p=null
return false
endif
if bQe[id]==false then
if GetLocalPlayer()==p then
call BlzFrameSetVisible(Ai,true)
endif
set bQe[id]=true
else
set bQe[id]=false
if GetLocalPlayer()==p then
call BlzFrameSetVisible(Ai,false)
endif
endif
set f=null
set p=null
return false
endfunction
function ZMe takes nothing returns nothing
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local integer yae=LoadInteger(ht,Ni,GetHandleId(f))
local real x=.23
local real y=.312
local real w=.2
local real h=.08
if yae==9 then
set w=.2
set h=.2
else
if bXe[(id+1)*(8)+yae]==0 then
set bte[(id)*(9)+yae]="
"+"|cff6d6d6d"+"(Tiêu hao 500000 chân khí để kích hoạt phương vị)|r

- Tất cả thuộc tính tăng 10"
else
set bte[(id)*(9)+yae]="|cffffcc00"+"
Phương vị đã kích hoạt|r

"+"|cffadd8e6"+"- Tất cả thuộc tính tăng 10"
endif
endif
if GetLocalPlayer()==p then
set zc=bSe[(id)*(9)+yae]
set Zc=bte[(id)*(9)+yae]
set rC=x
set iC=y
set aC=w
set nC=h
endif
if GetLocalPlayer()==p then
call BlzFrameSetAbsPoint(yc,FRAMEPOINT_BOTTOMLEFT,rC,iC)
call BlzFrameSetSize(yc,aC,nC)
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextTitle",0),zc)
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,true)
endif
set f=null
set p=null
endfunction
function Zpe takes nothing returns nothing
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,false)
call BlzFrameSetVisible(bi,false)
endif
set f=null
set p=null
endfunction
function ZPe takes nothing returns boolean
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local integer yae=LoadInteger(ht,Ni,GetHandleId(f))
if GetLocalPlayer()==p then
call BlzFrameSetVisible(f,false)
call BlzFrameSetVisible(f,true)
endif
if ti[id]then
call Qke(p,"|cffff0000"+"Xin đừng thao tác quá nhanh !",5)
set f=null
set p=null
return false
endif
call UMe(id,.5)
if yae==9 then
if bEe[id+1]!=3 then
call wTe(XJ[id+1],id+1)
endif
else
if bXe[(id+1)*(8)+yae]==0 then
call wse(XJ[id+1],id+1,yae)
endif
endif
if GetLocalPlayer()==p then
set Zc=bte[(id)*(9)+yae]
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,true)
endif
set f=null
set p=null
return false
endfunction
function Zqe takes integer i,real x,real y returns nothing
set bse[i]=Uhe(ZLe(i))
call Ude(bse[i],52,x,y)
call Uke(bse[i],function ZPe)
call Ule(bse[i],function ZMe)
call ULe(bse[i],function Zpe)
call SaveInteger(ht,Ni,GetHandleId(bse[i]),i)
call BlzFrameSetParent(bse[i],Ai)
endfunction
function ZQe takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
if bQe[id] then
set bQe[id]=false
if GetLocalPlayer()==p then
call BlzFrameSetVisible(Ai,false)
endif
endif
set p=null
return false
endfunction
function Zse takes nothing returns nothing
local real z=.01
local real y=.02
set Ai=UJe("war3mapImported\\FrameUI_HoaCanhBackGround2.tga")
call UFe(Ai,408,505,.005,.275)
call Zqe(1,z+.09404,y+.4443)
call Zqe(2,z+.15588,y+.4133)
call Zqe(3,z+.17843,y+.3563)
call Zqe(4,z+.1535,y+.305)
call Zqe(5,z+.09404,y+.2763)
call Zqe(6,z+.0343,y+.3033)
call Zqe(7,z+.01045,y+.3563)
call Zqe(8,z+.031,y+.4133)
call Zqe(9,z+.09404,y+.3563)
set yc=BlzCreateFrame("BoxedText",BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI,0),0,0)
call BlzFrameSetVisible(Ai,false)
call BlzFrameSetVisible(yc,false)
endfunction
function ZSe takes nothing returns nothing
local trigger t=CreateTrigger()
call BlzTriggerRegisterPlayerKeyEvent(t,Player(0),OSKEY_H,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(1),OSKEY_H,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(2),OSKEY_H,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(3),OSKEY_H,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(4),OSKEY_H,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(5),OSKEY_H,0,true)
call TriggerAddAction(t,function Zme)
set Ii=Uhe("war3mapImported\\bt11.tga")
call UFe(Ii,58,58,.41,.137)
call Uke(Ii,function Zme)
set t=CreateTrigger()
call TriggerRegisterPlayerEvent(t,Player(0),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(1),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(2),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(3),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(4),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(5),EVENT_PLAYER_END_CINEMATIC)
call TriggerAddAction(t,function ZQe)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,15.,false)
call TriggerAddAction(t,function Zse)
set t=null
endfunction
function Zte takes integer i,integer ZTe,integer Zue returns boolean
if Zue<=7 then
if ZTe>=S2I(Rj[Zue])then
return true
endif
else
if bJ[i]>=Zue-7 then
return true
endif
endif
return false
endfunction
function ZUe takes unit u,item t,integer tJe,integer woe,integer Wxe,integer WRe,real r returns nothing
local integer id=GetHandleId(t)
local integer a=0
set a=LoadInteger(IT,id,5034)
if a==1 then
call Tje(u,5034,I2R(R2I(r*(20+$A*woe)*(1.+.1*WRe))))
endif
set a=LoadInteger(IT,id,611)
if a==1 then
call Tje(u,611,I2R(R2I(r*(20+$A*woe)*(1.+.1*WRe))))
endif
set a=LoadInteger(IT,id,Ax)
if a==1 then
call Tje(u,Ax,I2R(R2I(r*(20+$A*woe)*(1.+.1*WRe))))
endif
set a=LoadInteger(IT,id,7185)
if a==1 then
call Tje(u,7185,I2R(R2I(r*(20+$A*woe)*(1.+.1*WRe))))
endif
set a=LoadInteger(IT,id,Nx)
if a==1 then
call Tje(u,Nx,I2R(R2I(r*(20+$A*woe)*(1.+.1*WRe))))
endif
set a=LoadInteger(IT,id,572)
if a==1 then
call Tje(u,572,(4+1*woe+1*WRe)*.01*r)
endif
set a=LoadInteger(IT,id,7896)
if a==1 then
call Tje(u,7896,(4+1*woe+1*WRe)*.01*r)
endif
set a=LoadInteger(IT,id,lx)
if a==1 then
call Tje(u,lx,(4+1*woe+1*WRe)*.01*r)
endif
set a=LoadInteger(IT,id,6210)
if a==1 then
call Tje(u,6210,(4+1*woe+1*WRe)*.01*r)
endif
set a=LoadInteger(IT,id,6491)
if a==1 then
call Tje(u,6491,(4+1*woe+1*WRe)*.01*r)
endif
set a=LoadInteger(IT,id,5267)
if a==1 then
call TZe(u,R2I(I2R($3E8*woe)*(1.+.05*WRe))*r)
endif
set a=LoadInteger(IT,id,Px)
if a==1 then
call Tye(u,(2+4*woe+3*WRe)*.01*r)
endif
set a=LoadInteger(IT,id,5781)
if a==1 then
call u_e(u,r*(4+1*woe+1*WRe))
endif
set a=LoadInteger(IT,id,6780)
if a==1 then
call Tje(u,6780,I2R(R2I((20+30*woe)*(1.+.1*WRe)))*r)
endif
set a=LoadInteger(IT,id,Lx)
if a==1 then
call Tqe(u,(6+4*woe+3*WRe)*r)
endif
if woe>=$A then
call Tje(u,ox,(.05*(woe-9))*r)
endif
if woe>=$D then
call T_e(u,.08*r)
endif
endfunction
function Zwe takes unit u,item t,integer tJe,integer woe,integer WRe,real r returns nothing
local integer id=GetHandleId(t)
local integer a=0
set a=LoadInteger(IT,id,5267)
if a==1 then
call TZe(u,(R2I(I2R(500*woe)*(1.+.05*WRe)))*r)
endif
set a=LoadInteger(IT,id,hx)
if a==1 then
call T3e(u,(R2I(I2R(300*woe)*(1.+.05*WRe)))*r)
endif
set a=LoadInteger(IT,id,6780)
if a==1 then
call Tje(u,6780,I2R(R2I((20+30*woe)*(1.+.1*WRe)))*r)
endif
set a=LoadInteger(IT,id,5762)
if a==1 then
call Tje(u,5762,I2R(R2I((30+20*woe)*(1.+.05*WRe)))*r)
endif
set a=LoadInteger(IT,id,4888)
if a==1 then
call Tje(u,4888,I2R(R2I((20+20*woe)*(1.+.05*WRe)))*r)
endif
set a=LoadInteger(IT,id,mx)
if a==1 then
call Tue(u,I2R(R2I((40+$A*woe)*(1.+.05*WRe)))*r)
endif
if woe>=$A then
call TWe(u,(.5*(woe-9))*r)
endif
if woe>=$D then
call Twe(u,.08*r)
endif
endfunction
function ZWe takes unit u,item t,integer woe,integer Wxe,integer WRe,real r returns nothing
local integer id=GetHandleId(t)
local integer a=0
set a=LoadInteger(IT,id,px)
if a==1 then
call TLe(u,I2R(R2I(I2R(50+50*woe)*(1.+.1*WRe)))*r)
endif
set a=LoadInteger(IT,id,7695)
if a==1 then
call Tje(u,7695,I2R(R2I(I2R(50*woe)*(1.+.1*WRe)))*.01*r)
endif
set a=LoadInteger(IT,id,5724)
if a==1 then
call Tje(u,5724,I2R(R2I(I2R(50*woe)*(1.+.1*WRe)))*.01*r)
endif
set a=LoadInteger(IT,id,bx)
if a==1 then
call Tje(u,bx,I2R(R2I(I2R(50*woe)*(1.+.1*WRe)))*.01*r)
endif
set a=LoadInteger(IT,id,Bx)
if a==1 then
call Tje(u,Bx,I2R(R2I(I2R(50*woe)*(1.+.1*WRe)))*.01*r)
endif
set a=LoadInteger(IT,id,cx)
if a==1 then
call Tje(u,cx,I2R(R2I(I2R(50*woe)*(1.+.1*WRe)))*.01*r)
endif
set a=LoadInteger(IT,id,6851)
if a==1 then
call Tje(u,6851,I2R(8+2*woe+2*WRe)*.01*r)
endif
set a=LoadInteger(IT,id,'o')
if a==1 then
call Tje(u,'o',I2R(8+2*woe+2*WRe)*.01*r)
endif
set a=LoadInteger(IT,id,Kx)
if a==1 then
call Tje(u,Kx,I2R(8+2*woe+2*WRe)*.01*r)
endif
set a=LoadInteger(IT,id,7537)
if a==1 then
call Tje(u,7537,I2R(8+2*woe+2*WRe)*.01*r)
endif
set a=LoadInteger(IT,id,4934)
if a==1 then
call Tje(u,4934,I2R(8+2*woe+2*WRe)*.01*r)
endif
set a=LoadInteger(IT,id,4346)
if a==1 then
call TPe(u,(7+3*woe+2*WRe)*r)
endif
set a=LoadInteger(IT,id,Cx)
if a==1 then
call Tje(u,Cx,I2R($C+3*woe+3*WRe)*.01*r)
endif
set a=LoadInteger(IT,id,ax)
if a==1 then
call Tje(u,ax,I2R(8+2*woe+2*WRe)*.01*r)
endif
set a=LoadInteger(IT,id,6780)
if a==1 then
call Tje(u,6780,I2R(R2I((50+50*woe)*(1.+.05*WRe)))*r)
endif
if woe>=$A then
call Tje(u,xx,I2R($F*(woe-9))*.01*r)
endif
if woe>=$D then
call Tje(u,ix,$A*r)
endif
endfunction
function Zye takes unit u,integer i,integer tJe,integer WRe,real r returns nothing
local real a=0
local real b=0
if WRe>=4 then
set a=1.
if bRe[(i)*(20)+tJe]>=1 then
set a=1.5
endif
call Tje(u,Fx,.16*a*r)
endif
if WRe>=8 then
set a=1.
if bRe[(i)*(20)+tJe]>=2 then
set a=1.5
endif
call T_e(u,.08*a*r)
endif
set a=1.
set b=1.
if bRe[(i)*(20)+tJe]>=3 then
set a=1.5
endif
if bRe[(i)*(20)+tJe]>=4 then
set b=1.5
endif
if tJe==2 then
if WRe>=$C then
call Tje(u,7896,.24*a*r)
endif
if WRe>=16 then
call Tje(u,611,$C8*b*r)
endif
elseif tJe==6 then
if WRe>=$C then
call Tje(u,572,.24*a*r)
endif
if WRe>=16 then
call Tje(u,5034,$C8*b*r)
endif
elseif tJe==$A then
if WRe>=$C then
call Tje(u,lx,.24*a*r)
endif
if WRe>=16 then
call Tje(u,Ax,$C8*b*r)
endif
elseif tJe==7 then
if WRe>=$C then
call Tje(u,6491,.24*a*r)
endif
if WRe>=16 then
call Tje(u,Nx,$C8*b*r)
endif
elseif tJe==5 then
if WRe>=$C then
call Tje(u,6210,.24*a*r)
endif
if WRe>=16 then
call Tje(u,7185,$C8*b*r)
endif
endif
endfunction
function ZYe takes unit u,integer i,integer tJe,integer WRe,real r returns nothing
local real a=0
if WRe>=4 then
set a=1.
if bRe[(i)*(20)+tJe]>=1 then
set a=1.5
endif
call Tje(u,gx,.2*a*r)
endif
if WRe>=8 then
set a=1.
if bRe[(i)*(20)+tJe]>=2 then
set a=1.5
endif
call T4e(u,.1*a*r)
endif
if WRe>=$C then
set a=1.
if bRe[(i)*(20)+tJe]>=3 then
set a=1.5
endif
call Tje(u,Vx,.16*a*r)
endif
if WRe>=16 then
set a=1.
if bRe[(i)*(20)+tJe]>=4 then
set a=1.5
endif
call Tue(u,90*a*r)
endif
endfunction
function Zze takes unit u,integer i,integer tJe,integer WRe,real r returns nothing
local real a=0
if WRe>=4 then
set a=1.
if bRe[(i)*(20)+tJe]>=1 then
set a=1.5
endif
call Tje(u,vx,.5*a*r)
endif
if WRe>=8 then
set a=1.
if bRe[(i)*(20)+tJe]>=2 then
set a=1.5
endif
call Tje(u,5319,.5*a*r)
endif
if WRe>=$C then
set a=1.
if bRe[(i)*(20)+tJe]>=3 then
set a=1.5
endif
call Tje(u,4141,.16*a*r)
endif
if WRe>=16 then
set a=1.
if bRe[(i)*(20)+tJe]>=4 then
set a=1.5
endif
call Tje(u,xx,.3*a*r)
endif
endfunction
function ZZe takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local item t=GetManipulatedItem()
local integer Z_e=GetItemLevel(t)
local integer id=0
local integer tJe=0
local integer woe=0
local integer Wxe=0
local integer WAe=0
local integer WNe=0
local integer WRe=0
local integer wre=0
local integer Wje=0
local integer WJe=0
local integer Wke=0
if GetItemTypeId(t)=='I000' then
set id=GetHandleId(t)
set tJe=LoadInteger(IT,id,5789)
set woe=LoadInteger(IT,id,4386)
set Wxe=LoadInteger(IT,id,5563)
set WAe=LoadInteger(IT,id,lo)
set WNe=LoadInteger(IT,id,8105)
set WRe=LoadInteger(IT,id,7774)
set wre=LoadInteger(IT,id,Lo)
set Wje=LoadInteger(IT,id,6119)
set WJe=LoadInteger(IT,id,6036)
set Wke=LoadInteger(IT,id,5621)
if woe==0 then
call Qke(p,"|cffffcc00"+"Trang bị này chỉ dùng để chế tạo, không thể mặc !",5)
set t=null
set p=null
set u=null
return false
endif
if BJe[i]then
if Bi[i]!=null then
call Qke(p,"|cffffcc00"+"Bạn đang thao tác với một trang bị khác !",5)
set t=null
set p=null
set u=null
return false
endif
call SetItemPosition(t,GetRectCenterX(bd),GetRectCenterY(bd))
set Bi[i]=t
set Bke[(i-1)*(4)+4]=4
set BKe[(i-1)*(4)+4]=GetItemName(t)
set Ble[(i-1)*(4)+4]="
"+BlzGetItemExtendedTooltip(t)
if Wje!=0 then
set Bke[(i-1)*(4)+1]=1
set Ble[(i-1)*(4)+1]="
"+WXe(i,S2I(SubString(I2S(Wje),1,3)),S2I(SubString(I2S(Wje),0,1)))
set BKe[(i-1)*(4)+1]=fi
set BLe[(i-1)*(4)+1]=Di
if GetLocalPlayer()==p then
call Uge(Bje[1],Di)
endif
endif
if WJe!=0 then
set Bke[(i-1)*(4)+2]=2
set Ble[(i-1)*(4)+2]="
"+WXe(i,S2I(SubString(I2S(WJe),1,3)),S2I(SubString(I2S(WJe),0,1)))
set BKe[(i-1)*(4)+2]=fi
set BLe[(i-1)*(4)+2]=Di
if GetLocalPlayer()==p then
call Uge(Bje[2],Di)
endif
endif
if Wke!=0 then
set Bke[(i-1)*(4)+3]=3
set Ble[(i-1)*(4)+3]="
"+WXe(i,S2I(SubString(I2S(Wke),1,3)),S2I(SubString(I2S(Wke),0,1)))
set BKe[(i-1)*(4)+3]=fi
set BLe[(i-1)*(4)+3]=Di
if GetLocalPlayer()==p then
call Uge(Bje[3],Di)
endif
endif
if GetLocalPlayer()==p then
call Uge(Bje[4],BlzGetItemIconPath(t))
endif
set t=null
set p=null
set u=null
return false
endif
if GetUnitTypeId(u)=='H00K' then
set t=null
set p=null
set u=null
return false
endif
if bue[(i)*(20)+tJe]==null then
if Zte(i,rk[i],woe)then
if tJe==8 and Qb[i]!=WAe then
call Qke(p,"|cffffcc00"+"Không thể mang vũ khí hệ phái khác !",5)
set t=null
set p=null
set u=null
return false
endif
set B4e[(i-1)*(23)+tJe]=tJe
set B5e[(i-1)*(23)+tJe]=GetItemName(t)
set B6e[(i-1)*(23)+tJe]="
"+BlzGetItemExtendedTooltip(t)
set B7e[(i-1)*(23)+tJe]=BlzGetItemIconPath(t)
if GetLocalPlayer()==p then
call Uge(B3e[tJe],B7e[(i-1)*(23)+tJe])
endif
set bue[(i)*(20)+tJe]=t
call SetItemPosition(t,GetRectCenterX(bd),GetRectCenterY(bd))
set bUe[(i)*(20)+1]=bUe[(i)*(20)+1]+woe
set bUe[(i)*(20)+2]=bUe[(i)*(20)+2]+WRe
if Wje!=0 then
set bUe[(i)*(20)+3]=bUe[(i)*(20)+3]+1
endif
if WJe!=0 then
set bUe[(i)*(20)+3]=bUe[(i)*(20)+3]+1
endif
if Wke!=0 then
set bUe[(i)*(20)+3]=bUe[(i)*(20)+3]+1
endif
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+wre*2
call tCe(i,wre,1)
if tJe==2 or tJe==5 or tJe==6 or tJe==7 or tJe==$A then
call ZUe(XJ[i],t,tJe,woe,Wxe,WRe,1)
call Zye(XJ[i],i,tJe,WRe,1)
call Wre(XJ[i],Wje,1)
call Wre(XJ[i],WJe,1)
call Wre(XJ[i],Wke,1)
elseif tJe==1 or tJe==3 or tJe==9 or tJe==$B then
call Zwe(XJ[i],t,tJe,woe,WRe,1)
call ZYe(XJ[i],i,tJe,WRe,1)
call Wre(XJ[i],Wje,1)
call Wre(XJ[i],WJe,1)
call Wre(XJ[i],Wke,1)
elseif tJe==8 then
if WRe>=$C then
set bwe[(1)*(6)+i]=AddSpecialEffectTarget("war3mapImported\\effectvukhi1_"+I2S(Wxe)+".mdx",XJ[i],"hand right")
set bwe[(2)*(6)+i]=AddSpecialEffectTarget("war3mapImported\\effectvukhi1_"+I2S(Wxe)+".mdx",XJ[i],"hand left")
endif
if WRe==16 then
set bwe[(3)*(6)+i]=AddSpecialEffectTarget("war3mapImported\\effectvukhi2_"+I2S(Wxe)+".mdx",XJ[i],"hand right")
set bwe[(4)*(6)+i]=AddSpecialEffectTarget("war3mapImported\\effectvukhi2_"+I2S(Wxe)+".mdx",XJ[i],"hand left")
endif
call ZWe(XJ[i],t,woe,Wxe,WRe,1)
call Zze(XJ[i],i,tJe,WRe,1)
call Wre(XJ[i],Wje,1)
call Wre(XJ[i],WJe,1)
call Wre(XJ[i],Wke,1)
endif
else
call Qke(p,"|cffffcc00"+"Cấp độ không đủ để mặc trang bị !",5)
endif
else
call Qke(p,"|cffffcc00"+"Cần phải tháo gỡ trang bị đã mặc trước đó !",5)
endif
endif
set t=null
set p=null
set u=null
return false
endfunction
function Z0e takes unit u,player p,integer i,item t returns nothing
local integer id=GetHandleId(t)
local integer tJe=LoadInteger(IT,id,5789)
local integer woe=LoadInteger(IT,id,4386)
local integer Wxe=LoadInteger(IT,id,5563)
local integer WAe=LoadInteger(IT,id,lo)
local integer WNe=LoadInteger(IT,id,8105)
local integer WRe=LoadInteger(IT,id,7774)
local integer wre=LoadInteger(IT,id,Lo)
local integer Wje=LoadInteger(IT,id,6119)
local integer WJe=LoadInteger(IT,id,6036)
local integer Wke=LoadInteger(IT,id,5621)
if not QYe(u)then
call SetItemPosition(t,GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,t)
else
call SetItemPosition(t,GetUnitX(OJ[i]),GetUnitY(OJ[i]))
call UnitAddItem(OJ[i],t)
call Qke(p,"|cffffcc00"+"Hành trang đầy, vật phẩm được chuyển về rương !",3)
endif
set bue[(i)*(20)+tJe]=null
set bUe[(i)*(20)+1]=bUe[(i)*(20)+1]-woe
set bUe[(i)*(20)+2]=bUe[(i)*(20)+2]-WRe
if Wje!=0 then
set bUe[(i)*(20)+3]=bUe[(i)*(20)+3]-1
endif
if WJe!=0 then
set bUe[(i)*(20)+3]=bUe[(i)*(20)+3]-1
endif
if Wke!=0 then
set bUe[(i)*(20)+3]=bUe[(i)*(20)+3]-1
endif
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]-wre*2
call tCe(i,wre,De)
if tJe==2 or tJe==5 or tJe==6 or tJe==7 or tJe==$A then
call ZUe(XJ[i],t,tJe,woe,Wxe,WRe,De)
call Zye(XJ[i],i,tJe,WRe,De)
call Wre(XJ[i],Wje,De)
call Wre(XJ[i],WJe,De)
call Wre(XJ[i],Wke,De)
elseif tJe==1 or tJe==3 or tJe==9 or tJe==$B then
call Zwe(XJ[i],t,tJe,woe,WRe,De)
call ZYe(XJ[i],i,tJe,WRe,De)
call Wre(XJ[i],Wje,De)
call Wre(XJ[i],WJe,De)
call Wre(XJ[i],Wke,De)
elseif tJe==8 then
if WRe>=$C then
call Qre(bwe[(1)*(6)+i])
call Qre(bwe[(2)*(6)+i])
endif
if WRe==16 then
call Qre(bwe[(3)*(6)+i])
call Qre(bwe[(4)*(6)+i])
endif
call ZWe(XJ[i],t,woe,Wxe,WRe,De)
call Zze(XJ[i],i,tJe,WRe,De)
call Wre(XJ[i],Wje,De)
call Wre(XJ[i],WJe,De)
call Wre(XJ[i],Wke,De)
endif
endfunction
function Z1e takes integer i,integer tJe,integer woe,integer Wxe,integer WRe,integer Wje,integer WJe,integer Wke,integer Wde,integer WNe returns nothing
local real x=GetRectCenterX(bd)
local real y=GetRectCenterY(bd)
local integer WAe=0
local integer wre=0
set bRe[(i)*(20)+tJe]=Wde
if WNe>0 then
set WAe=Qb[i]
endif
if woe>0 then
set bue[(i)*(20)+tJe]=Wpe(i,tJe,woe,WAe,Wxe,WNe,WRe,Wje,WJe,Wke,x,y)
set B4e[(i-1)*(23)+tJe]=tJe
set B5e[(i-1)*(23)+tJe]=GetItemName(bue[(i)*(20)+tJe])
set B6e[(i-1)*(23)+tJe]="
"+BlzGetItemExtendedTooltip(bue[(i)*(20)+tJe])
set bUe[(i)*(20)+1]=bUe[(i)*(20)+1]+woe
set bUe[(i)*(20)+2]=bUe[(i)*(20)+2]+WRe
if Wje!=0 then
set bUe[(i)*(20)+3]=bUe[(i)*(20)+3]+1
endif
if WJe!=0 then
set bUe[(i)*(20)+3]=bUe[(i)*(20)+3]+1
endif
if Wke!=0 then
set bUe[(i)*(20)+3]=bUe[(i)*(20)+3]+1
endif
set wre=LoadInteger(IT,GetHandleId(bue[(i)*(20)+tJe]),Lo)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+wre*2
call tCe(i,wre,1)
if tJe==2 or tJe==5 or tJe==6 or tJe==7 or tJe==$A then
call ZUe(XJ[i],bue[(i)*(20)+tJe],tJe,woe,Wxe,WRe,1)
call Zye(XJ[i],i,tJe,WRe,1)
call Wre(XJ[i],Wje,1)
call Wre(XJ[i],WJe,1)
call Wre(XJ[i],Wke,1)
elseif tJe==1 or tJe==3 or tJe==9 or tJe==$B then
call Zwe(XJ[i],bue[(i)*(20)+tJe],tJe,woe,WRe,1)
call ZYe(XJ[i],i,tJe,WRe,1)
call Wre(XJ[i],Wje,1)
call Wre(XJ[i],WJe,1)
call Wre(XJ[i],Wke,1)
elseif tJe==8 then
if WRe>=$C then
set bwe[(1)*(6)+i]=AddSpecialEffectTarget("war3mapImported\\effectvukhi1_"+I2S(Wxe)+".mdx",XJ[i],"hand right")
set bwe[(2)*(6)+i]=AddSpecialEffectTarget("war3mapImported\\effectvukhi1_"+I2S(Wxe)+".mdx",XJ[i],"hand left")
endif
if WRe==16 then
set bwe[(3)*(6)+i]=AddSpecialEffectTarget("war3mapImported\\effectvukhi2_"+I2S(Wxe)+".mdx",XJ[i],"hand right")
set bwe[(4)*(6)+i]=AddSpecialEffectTarget("war3mapImported\\effectvukhi2_"+I2S(Wxe)+".mdx",XJ[i],"hand left")
endif
call ZWe(XJ[i],bue[(i)*(20)+tJe],woe,Wxe,WRe,1)
call Zze(XJ[i],i,tJe,WRe,1)
call Wre(XJ[i],Wje,1)
call Wre(XJ[i],WJe,1)
call Wre(XJ[i],Wke,1)
endif
endif
endfunction
function Z2e takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddCondition(t,Filter(function ZZe))
set t=null
endfunction
function Z3e takes integer i,integer tJe,integer Cbe,real x,real y returns item
local item t=CreateItem('I00D',x,y)
local integer id=GetHandleId(t)
local integer lv=WEe(Cbe)
local string s=""
local string n=BlzGetAbilityTooltip('A00H',Cbe-1)
call SaveInteger(IT,id,ci,tJe*'d'+Cbe)
set s="Loại: bảo thạch
"
if tJe==1 then
set s=s+"Cấp: "+"|cffffcc00"+I2S(lv)+"|r

"
set s=s+"|cff0078d7Thuộc tính khảm nạm|r
"
set s=s+"|cff7fff00"+"- "+WVe(Cbe,i)+I2S(Wne(Cbe))+Wae(Cbe)+"|r

"
call BlzSetItemName(t,BlzGetAbilityTooltip('A01Y',Cbe-1))
else
set s=s+"Cấp: "+"|cffffcc00"+I2S(lv)+" (+1)|r

"
set s=s+"|cff0078d7Thuộc tính khảm nạm|r
"
set s=s+"|cffffcc00"+"- "+WVe(Cbe,i)+I2S(R2I(I2R(Wne(Cbe))*1.5))+Wae(Cbe)+"|r

"
call BlzSetItemName(t,"[ Hoàn Mỹ ] "+BlzGetAbilityTooltip('A01Y',Cbe-1))
endif
set s=s+"|cff0078d7Vị trí khảm|r
"
set s=s+Bj[S2I(SubString(n,1,2))]+"Nón|r - "
set s=s+Bj[S2I(SubString(n,5,6))]+"áo|r - "
set s=s+Bj[S2I(SubString(n,6,7))]+"Tay|r
"
set s=s+Bj[S2I(SubString(n,4,5))]+"Lưng|r - "
set s=s+Bj[S2I(SubString(n,9,$A))]+"Giày|r
"
set s=s+Bj[S2I(SubString(n,0,1))]+"Liên|r - "
set s=s+Bj[S2I(SubString(n,2,3))]+"Nhẫn|r - "
set s=s+Bj[S2I(SubString(n,8,9))]+"Bội|r
"
set s=s+Bj[S2I(SubString(n,$A,$B))]+"Phù|r - "
set s=s+Bj[S2I(SubString(n,7,8))]+"Vũ khí|r"
call BlzSetItemExtendedTooltip(t,s)
call BlzSetItemDescription(t,s)
call BlzSetItemIconPath(t,"war3mapImported\\BTNItem_baothach"+I2S(lv)+".blp")
call SetItemInvulnerable(t,true)
set Sv=t
set t=null
set s=null
set n=null
return Sv
endfunction
function Z4e takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local item Z5e=UnitItemInSlot(u,0)
local item Z6e=UnitItemInSlot(u,1)
local integer a1=0
local integer a2=0
local integer b1=0
local integer b2=0
if GetItemTypeId(Z5e)=='I00D' and GetItemTypeId(Z6e)=='I00D' then
set a1=LoadInteger(IT,GetHandleId(Z5e),ci)
set a2=LoadInteger(IT,GetHandleId(Z6e),ci)
set b1=S2I(SubString(I2S(a1),1,3))
set b2=S2I(SubString(I2S(a2),1,3))
if b1==b2 and S2I(SubString(I2S(a1),0,1))==1 and S2I(SubString(I2S(a2),0,1))==1 then
call Qre(AddSpecialEffect(("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Đã hợp nhất thành bảo thạch Hoàn Mỹ !",5)
call RemoveItem(Z5e)
call RemoveItem(Z6e)
set Sv=Z3e(i,2,b1,GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,Sv)
else
call Qke(p,"|cffffcc00"+"Chỉ có thể đặt vào 2 Bảo Thạch cùng loại và chưa nâng cấp !",5)
endif
else
call Qke(p,"|cffffcc00"+"Cần phải đặt bảo thạch ở ô đầu tiên và ô thứ 2 trong rương !",5)
endif
set Z5e=null
set Z6e=null
set u=null
set p=null
return false
endfunction
function Z7e takes nothing returns boolean
return GetSpellAbilityId()=='A0IE' and Z4e()
endfunction
function Z8e takes nothing returns boolean
local integer CGe=Qce()
set dq[CGe]=dq[CGe]-1
if dq[CGe]<=0 then
call QDe()
set zI[Dq[CGe]]=zI[Dq[CGe]]+3
call Qke(Player(Dq[CGe]-1),"|cffffff00"+"Bạn nhận được 1 Giải Ngọc Chùy !",5)
set di[Dq[CGe]]=false
call Pde(CGe)
endif
return false
endfunction
function Z9e takes integer i returns nothing
local integer CGe=PCe()
set dq[CGe]=R2I(600/ .03125)
set Dq[CGe]=i
call QIe(CGe,.03125,true,function Z8e)
endfunction
function vvx takes player p,integer i returns nothing
if not di[i]then
call Qke(p,"|cffffcc00"+"Bạn đã xin tách bảo thạch từ trang bị, sau 10 phút Giải Ngọc Chùy sẽ được chuyển về rương !",5)
set di[i]=true
call Z9e(i)
endif
endfunction
function vex takes player p,integer i,item t returns nothing
local integer c=1
loop
exitwhen c>6
if bWe[(i)*(6)+c]==null then
set bWe[(i)*(6)+c]=t
call SetItemPosition(t,GetRectCenterX(bd),GetRectCenterY(bd))
call SetItemVisible(t,false)
set Ci[i]=Ci[i]+1
call Qke(p,"|cffffcc00"+"Bảo thạch được lưu vào túi ("+I2S(Ci[i])+"/6)",5)
set c=6
endif
set c=c+1
endloop
endfunction
function vxx takes player p,integer i,boolean b returns nothing
local integer c=0
local item t=null
if b then
if Ci[i]<6 then
loop
exitwhen c>5
set t=UnitItemInSlot(OJ[i],c)
if GetItemTypeId(t)=='I00D' then
call vex(p,i,t)
endif
set c=c+1
endloop
else
call Qke(p,"|cffffcc00"+"Số lượng bảo thạch lưu tối đa 6",5)
endif
else
if Ci[i]>0 then
call Qke(p,"|cffffcc00"+"Rút bảo thạch, vật phẩm được chuyển về rương !",5)
set c=1
loop
exitwhen c>6
if bWe[(i)*(6)+c]!=null then
call SetItemVisible(bWe[(i)*(6)+c],true)
call SetItemPosition(bWe[(i)*(6)+c],GetUnitX(OJ[i]),GetUnitY(OJ[i]))
call UnitAddItem(OJ[i],bWe[(i)*(6)+c])
set bWe[(i)*(6)+c]=null
endif
set c=c+1
endloop
set Ci[i]=0
else
call Qke(p,"|cffffcc00"+"Không có bảo thạch để rút !",5)
endif
endif
endfunction
function vox takes unit u,integer i,item bt returns boolean
local player p=GetOwningPlayer(u)
local integer tJe=0
local integer id=0
local integer Wje=0
local integer WJe=0
local integer Wke=0
local integer vrx=0
local integer s=0
local integer vix=0
local integer vax=0
local integer Wye=0
local integer c=0
if Bi[i]!=null then
set id=GetHandleId(Bi[i])
set tJe=LoadInteger(IT,id,5789)
set Wje=S2I(SubString(I2S(LoadInteger(IT,id,6119)),1,3))
set WJe=S2I(SubString(I2S(LoadInteger(IT,id,6036)),1,3))
set Wke=S2I(SubString(I2S(LoadInteger(IT,id,5621)),1,3))
if Wje==0 then
set Wye=1
set vax=6119
elseif WJe==0 then
set Wye=2
set vax=6036
elseif Wke==0 then
set Wye=3
set vax=5621
else
call Qke(p,"|cffffcc00"+"Trang bị không còn chỗ trống để khảm !",5)
set p=null
set bt=null
return false
endif
set s=LoadInteger(IT,GetHandleId(bt),ci)
set vix=S2I(SubString(I2S(s),1,3))
set vrx=S2I(SubString(I2S(s),0,1))
if Wje==vix or WJe==vix or Wke==vix then
call Qke(p,"|cffffcc00"+"Không thể khảm 2 bảo thạch cùng loại vào trang bị !",5)
set p=null
set bt=null
return false
endif
if S2I(SubString(BlzGetAbilityTooltip('A00H',vix-1),tJe-1,tJe))==1 then
call SaveInteger(IT,id,vax,s)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Bảo thạch đã được khảm vào trang bị !",5)
call Wme(i,Bi[i])
call FlushChildHashtable(IT,GetHandleId(bt))
call RemoveItem(bt)
set Bke[(i-1)*(4)+Wye]=Wye
set Ble[(i-1)*(4)+Wye]="
"+WXe(i,vix,vrx)
set BKe[(i-1)*(4)+Wye]=fi
set BLe[(i-1)*(4)+Wye]=Di
set Ble[(i-1)*(4)+4]="
"+BlzGetItemExtendedTooltip(Bi[i])
if GetLocalPlayer()==p then
call Uge(Bje[Wye],Di)
endif
else
call Qke(p,"|cffffcc00"+"Bảo thạch không thể khảm vào loại trang bị này !",5)
endif
endif
set p=null
set bt=null
return false
endfunction
function vnx takes unit u,integer i,integer yae returns boolean
local player p=GetOwningPlayer(u)
local integer id=GetHandleId(Bi[i])
local string s=I2S(LoadInteger(IT,id,YI[yae]))
local integer vix=S2I(SubString(s,1,3))
local integer vrx=S2I(SubString(s,0,1))
call SaveInteger(IT,id,YI[yae],0)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Human\\DispelMagic\\DispelMagicTarget.mdl"),(u),"origin"))
call Wme(i,Bi[i])
set Ble[(i-1)*(4)+4]="
"+BlzGetItemExtendedTooltip(Bi[i])
set Sv=Z3e(i,vrx,vix,GetUnitX(OJ[i]),GetUnitY(OJ[i]))
if IsUnitSelected(u,p)and not QYe(u)then
call Qke(p,"|cffffcc00"+"Bảo thạch đã được tách khỏi trang bị !",5)
call UnitAddItem(u,Sv)
else
call Qke(p,"|cffffcc00"+"Bảo thạch đã được tách khỏi trang bị và chuyển về rương !",5)
call UnitAddItem(OJ[i],Sv)
endif
set p=null
set s=null
return false
endfunction
function vVx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function Z7e))
set t=null
endfunction
function vEx takes integer id returns string
return"war3mapImported\\FrameUI_KMButton1.tga"
endfunction
function vXx takes integer id returns nothing
local string s=""
set s=s+"|cffffcc00"+"[ Thuộc Tính Nhâm Mạch ]|r
"
set s=s+"|cff6d6d6d"+"- Sinh lực tối đa + 1000

"
set s=s+"|cffffcc00"+"[ Kinh Mạch Đả Thông ]|r
"
set s=s+"|cff6d6d6d"+"1. Ngọc Đường [1000]|r
"
set s=s+"|cff6d6d6d"+"2. Tử Cấm [1000]|r
"
set s=s+"|cff6d6d6d"+"3. Ngân Giao [1000]|r
"
set s=s+"|cff6d6d6d"+"4. Đoái Thụy [1000]|r
"
set s=s+"|cff6d6d6d"+"5. Thủy Câu [1000]|r
"
set s=s+"|cff6d6d6d"+"6. Thần Đinh [1000]|r
"
set s=s+"|cff6d6d6d"+"7. Thượng Tinh [1000]|r
"
set s=s+"|cff6d6d6d"+"8. Tiền Hạng [1000]|r

"
set s=s+"|cffadd8e6Tăng cấp yêu cầu:
- 1 điểm kinh mạch
- [ tổng số tầng kinh mạch đã tăng ] x 10000 chân khí"
set bze[(id)*(8)+1]=1
set b_e[(id)*(8)+1]="
"+s
set bZe[(id)*(8)+1]="|cff7fff00"+"Nhâm Mạch [ Tầng 0 ]|r"
set s="|cffffcc00"+"[ Thuộc Tính Đốc Mạch ]|r
"
set s=s+"|cff6d6d6d"+"- Nội lực tối đa + 500

"
set s=s+"|cffffcc00"+"[ Kinh Mạch Đả Thông ]|r
"
set s=s+"|cff6d6d6d"+"1. Bách Hội [500]|r
"
set s=s+"|cff6d6d6d"+"2. Thần Đạo [500]|r
"
set s=s+"|cff6d6d6d"+"3. Đại Chùy [500]|r
"
set s=s+"|cff6d6d6d"+"4. Linh Đài [500]|r
"
set s=s+"|cff6d6d6d"+"5. Trung Xu [500]|r
"
set s=s+"|cff6d6d6d"+"6. Tích Trung [500]|r
"
set s=s+"|cff6d6d6d"+"7. Huyền Xu [500]|r
"
set s=s+"|cff6d6d6d"+"8. Mệnh Môn [500]|r

"
set s=s+"|cffadd8e6Tăng cấp yêu cầu:
- 1 điểm kinh mạch
- [ tổng số tầng kinh mạch đã tăng ] x 10000 chân khí"
set bze[(id)*(8)+2]=2
set b_e[(id)*(8)+2]="
"+s
set bZe[(id)*(8)+2]="|cff7fff00"+"Đốc Mạch [ chưa đả thông ]|r"
set s="|cffffcc00"+"[ Thuộc Tính Đới Mạch ]|r
"
set s=s+"|cff6d6d6d"+"- Phát huy lực tấn công cơ bản 8%

"
set s=s+"|cffffcc00"+"[ Kinh Mạch Đả Thông ]|r
"
set s=s+"|cff6d6d6d"+"1. Ngũ Xu [8%]|r
"
set s=s+"|cff6d6d6d"+"2. Thiên Xung [8%]|r
"
set s=s+"|cff6d6d6d"+"3. Phù Bạch [8%]|r
"
set s=s+"|cff6d6d6d"+"4. Bổn Thần [8%]|r
"
set s=s+"|cff6d6d6d"+"5. Mục Song [8%]|r
"
set s=s+"|cff6d6d6d"+"6. Ngoại Khưu [8%]|r
"
set s=s+"|cff6d6d6d"+"7. Huyền Chung [8%]|r
"
set s=s+"|cff6d6d6d"+"8. Khưu Khư [8%]|r

"
set s=s+"|cffadd8e6Tăng cấp yêu cầu:
- 1 điểm kinh mạch
- [ tổng số tầng kinh mạch đã tăng ] x 10000 chân khí"
set bze[(id)*(8)+3]=3
set b_e[(id)*(8)+3]="
"+s
set bZe[(id)*(8)+3]="|cff7fff00"+"Đới Mạch [ chưa đả thông ]|r"
set s="|cffffcc00"+"[ Thuộc Tính Xung Mạch ]|r
"
set s=s+"|cff6d6d6d"+"- Phát huy lực tấn công kỹ năng 8%

"
set s=s+"|cffffcc00"+"[ Kinh Mạch Đả Thông ]|r
"
set s=s+"|cff6d6d6d"+"1. U Môn [8%]|r
"
set s=s+"|cff6d6d6d"+"2. Âm Đô [8%]|r
"
set s=s+"|cff6d6d6d"+"3. Thạch Quan [8%]|r
"
set s=s+"|cff6d6d6d"+"4. Thương Khúc [8%]|r
"
set s=s+"|cff6d6d6d"+"5. Trung Chú [8%]|r
"
set s=s+"|cff6d6d6d"+"6. Tứ Mãn [8%]|r
"
set s=s+"|cff6d6d6d"+"7. Khí Huyệt [8%]|r
"
set s=s+"|cff6d6d6d"+"8. Đại Hách [8%]|r

"
set s=s+"|cffadd8e6Tăng cấp yêu cầu:
- 1 điểm kinh mạch
- [ tổng số tầng kinh mạch đã tăng ] x 10000 chân khí"
set bze[(id)*(8)+4]=4
set b_e[(id)*(8)+4]="
"+s
set bZe[(id)*(8)+4]="|cff7fff00"+"Xung Mạch [ chưa đả thông ]|r"
set s="|cffffcc00"+"[ Thuộc Tính Âm Duy ]|r
"
set s=s+"|cff6d6d6d"+"- Sát thương ngũ hành + 30%

"
set s=s+"|cffffcc00"+"[ Kinh Mạch Đả Thông ]|r
"
set s=s+"|cff6d6d6d"+"1. Liêm Tuyền [30%]|r
"
set s=s+"|cff6d6d6d"+"2. Thiên Đột [30%]|r
"
set s=s+"|cff6d6d6d"+"3. Kỳ Môn [30%]|r
"
set s=s+"|cff6d6d6d"+"4. Phúc Ai [30%]|r
"
set s=s+"|cff6d6d6d"+"5. Đại Hoành [30%]|r
"
set s=s+"|cff6d6d6d"+"6. Phủ Xá [30%]|r
"
set s=s+"|cff6d6d6d"+"7. Xung Môn [30%]|r
"
set s=s+"|cff6d6d6d"+"8. Trúc Tân [30%]|r

"
set s=s+"|cffadd8e6Tăng cấp yêu cầu:
- 1 điểm kinh mạch
- [ tổng số tầng kinh mạch đã tăng ] x 10000 chân khí"
set bze[(id)*(8)+5]=5
set b_e[(id)*(8)+5]="
"+s
set bZe[(id)*(8)+5]="|cff7fff00"+"Âm Duy [ chưa đả thông ]|r"
set s="|cffffcc00"+"[ Thuộc Tính Dương Duy ]|r
"
set s=s+"|cff6d6d6d"+"- Sát thương chí mạng + 4%

"
set s=s+"|cffffcc00"+"[ Kinh Mạch Đả Thông ]|r
"
set s=s+"|cff6d6d6d"+"1. Phong Tri [4%]|r
"
set s=s+"|cff6d6d6d"+"2. Tinh Minh [4%]|r
"
set s=s+"|cff6d6d6d"+"3. Địa Thương [4%]|r
"
set s=s+"|cff6d6d6d"+"4. Cự Cốt [4%]|r
"
set s=s+"|cff6d6d6d"+"5. Trung Mạch [4%]|r
"
set s=s+"|cff6d6d6d"+"6. Bộc Tham [4%]|r
"
set s=s+"|cff6d6d6d"+"7. Ngũ Xứ [4%]|r
"
set s=s+"|cff6d6d6d"+"8. Thừa Quang [4%]|r

"
set s=s+"|cffadd8e6Tăng cấp yêu cầu:
- 1 điểm kinh mạch
- [ tổng số tầng kinh mạch đã tăng ] x 10000 chân khí"
set bze[(id)*(8)+6]=6
set b_e[(id)*(8)+6]="
"+s
set bZe[(id)*(8)+6]="|cff7fff00"+"Dương Duy [ chưa đả thông ]|r"
set s="|cffffcc00"+"[ Thuộc Tính Âm Nghiêu ]|r
"
set s=s+"|cff6d6d6d"+"- Chịu sát thương chí mạng - 4%

"
set s=s+"|cffffcc00"+"[ Kinh Mạch Đả Thông ]|r
"
set s=s+"|cff6d6d6d"+"1. Nội Quan [4%]|r
"
set s=s+"|cff6d6d6d"+"2. Thiên Đột [4%]|r
"
set s=s+"|cff6d6d6d"+"3. Phụ Xá [4%]|r
"
set s=s+"|cff6d6d6d"+"4. Trúc Tân [4%]|r
"
set s=s+"|cff6d6d6d"+"5. Thiếu Phủ [4%]|r
"
set s=s+"|cff6d6d6d"+"6. Thủy Phân [4%]|r
"
set s=s+"|cff6d6d6d"+"7. Trung Cấp [4%]|r
"
set s=s+"|cff6d6d6d"+"8. Khúc Cốt [4%]|r

"
set s=s+"|cffadd8e6Tăng cấp yêu cầu:
- 1 điểm kinh mạch
- [ tổng số tầng kinh mạch đã tăng ] x 10000 chân khí"
set bze[(id)*(8)+7]=7
set b_e[(id)*(8)+7]="
"+s
set bZe[(id)*(8)+7]="|cff7fff00"+"Âm Nghiêu [ chưa đả thông ]|r"
set s="|cffffcc00"+"[ Thuộc Tính Dương Nghiêu ]|r
"
set s=s+"|cff6d6d6d"+"- Kháng tất cả + 20

"
set s=s+"|cffffcc00"+"[ Kinh Mạch Đả Thông ]|r
"
set s=s+"|cff6d6d6d"+"1. ách Môn [20]|r
"
set s=s+"|cff6d6d6d"+"2. Phong Tri [20]|r
"
set s=s+"|cff6d6d6d"+"3. Chính Doanh [20]|r
"
set s=s+"|cff6d6d6d"+"4. Mục Song [20]|r
"
set s=s+"|cff6d6d6d"+"5. Dương Bạch [20]|r
"
set s=s+"|cff6d6d6d"+"6. Đầu Duy [20]|r
"
set s=s+"|cff6d6d6d"+"7. Thiên Liêu [20]|r
"
set s=s+"|cff6d6d6d"+"8. Dương Giao [20]|r

"
set s=s+"|cffadd8e6Tăng cấp yêu cầu:
- 1 điểm kinh mạch
- [ tổng số tầng kinh mạch đã tăng ] x 10000 chân khí"
set bze[(id)*(8)+8]=8
set b_e[(id)*(8)+8]="
"+s
set bZe[(id)*(8)+8]="|cff7fff00"+"Dương Nghiêu [ chưa đả thông ]|r"
set s=null
endfunction
function vOx takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local framehandle f=BlzGetTriggerFrame()
if f!=null then
call BlzFrameSetVisible(f,false)
call BlzFrameSetVisible(f,true)
endif
if not EC then
set f=null
set p=null
return false
endif
if ti[id]then
call Qke(p,"|cffff0000"+"Xin đừng thao tác quá nhanh !",5)
set f=null
set p=null
return false
endif
call UMe(id,1.)
if not Ub[id+1]or B2e[id]or BQe[id]or bNe[id]or bLe[id]or b5e[id]or bQe[id]or b1e[id]or BHe[id]or b9e[id]then
set f=null
set p=null
return false
endif
if bye[id]==false then
if GetLocalPlayer()==p then
call BlzFrameSetVisible(gi,true)
endif
set bye[id]=true
else
set bye[id]=false
if GetLocalPlayer()==p then
call BlzFrameSetVisible(gi,false)
endif
endif
set f=null
set p=null
return false
endfunction
function vRx takes nothing returns nothing
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local integer yae=LoadInteger(ht,933,GetHandleId(f))
if bze[(id)*(8)+yae]!=0 then
if GetLocalPlayer()==p then
set zc=bZe[(id)*(8)+yae]
set Zc=b_e[(id)*(8)+yae]
set rC=.2452
set iC=.258
set aC=.21
set nC=.21
endif
if GetLocalPlayer()==p then
call BlzFrameSetAbsPoint(yc,FRAMEPOINT_BOTTOMLEFT,rC,iC)
call BlzFrameSetSize(yc,aC,nC)
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextTitle",0),zc)
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,true)
endif
endif
set f=null
set p=null
endfunction
function vIx takes nothing returns nothing
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,false)
call BlzFrameSetVisible(Gi,false)
endif
set f=null
set p=null
endfunction
function vAx takes nothing returns boolean
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local integer yae=LoadInteger(ht,933,GetHandleId(f))
if GetLocalPlayer()==p then
call BlzFrameSetVisible(f,false)
call BlzFrameSetVisible(f,true)
endif
if ti[id]then
call Qke(p,"|cffff0000"+"Xin đừng thao tác quá nhanh !",5)
set f=null
set p=null
return false
endif
call UMe(id,.5)
if bze[(id)*(8)+yae]!=0 then
set hi=false
call Wse(XJ[id+1],id+1,yae)
if hi then
if GetLocalPlayer()==p then
set zc=bZe[(id)*(8)+yae]
set Zc=b_e[(id)*(8)+yae]
set vC=b0e[(id)*(8)+yae]
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextTitle",0),zc)
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
if GetLocalPlayer()==p then
call Uge(bYe[yae],vC)
call BlzFrameSetVisible(yc,true)
endif
endif
endif
set f=null
set p=null
return false
endfunction
function vNx takes integer i,real x,real y returns nothing
set bYe[i]=Uhe(vEx(i))
call Ude(bYe[i],52,x,y)
call Uke(bYe[i],function vAx)
call Ule(bYe[i],function vRx)
call ULe(bYe[i],function vIx)
call SaveInteger(ht,933,GetHandleId(bYe[i]),i)
call BlzFrameSetParent(bYe[i],gi)
endfunction
function vbx takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
if bye[id] then
set bye[id]=false
if GetLocalPlayer()==p then
call BlzFrameSetVisible(gi,false)
endif
endif
set p=null
return false
endfunction
function vBx takes nothing returns nothing
local real z=.01
local real y=.02
set gi=UJe("war3mapImported\\FrameUI_KMBackground.tga")
call UFe(gi,480,570,.005,.255)
call vNx(1,z+.10884,y+.4303)
call vNx(3,z+.08084,y+.3883)
call vNx(4,z+.13684,y+.3883)
call vNx(5,z+.08824,y+.3434)
call vNx(6,z+.12944,y+.3434)
call vNx(7,z+.06384,y+.3153)
call vNx(8,z+.15384,y+.3153)
call vNx(2,z+.10884,y+.3023)
set yc=BlzCreateFrame("BoxedText",BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI,0),0,0)
call BlzFrameSetVisible(gi,false)
call BlzFrameSetVisible(yc,false)
call vXx(0)
call vXx(1)
call vXx(2)
call vXx(3)
call vXx(4)
call vXx(5)
endfunction
function vcx takes nothing returns nothing
local trigger t=CreateTrigger()
call BlzTriggerRegisterPlayerKeyEvent(t,Player(0),OSKEY_J,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(1),OSKEY_J,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(2),OSKEY_J,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(3),OSKEY_J,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(4),OSKEY_J,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(5),OSKEY_J,0,true)
call TriggerAddAction(t,function vOx)
set Fi=Uhe("war3mapImported\\bt8.tga")
call UFe(Fi,58,58,.305,.137)
call Uke(Fi,function vOx)
set t=CreateTrigger()
call TriggerRegisterPlayerEvent(t,Player(0),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(1),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(2),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(3),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(4),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(5),EVENT_PLAYER_END_CINEMATIC)
call TriggerAddAction(t,function vbx)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,12.,false)
call TriggerAddAction(t,function vBx)
set t=null
endfunction
function vCx takes unit u,integer lv,real r returns nothing
if lv==1 then
call T_e(u,.3*r)
call T4e(u,.15*r)
call TZe(u,$3E8*r)
elseif lv==2 then
call T_e(u,.35*r)
call T4e(u,.2*r)
call TZe(u,$7D0*r)
call Tue(u,30*r)
elseif lv==3 then
call T_e(u,.4*r)
call T4e(u,.25*r)
call TZe(u,$BB8*r)
call Tue(u,40*r)
elseif lv==4 then
call T_e(u,.45*r)
call T4e(u,.3*r)
call TZe(u,$FA0*r)
call Tue(u,50*r)
call Tje(u,vx,.2*r)
elseif lv==5 then
call T_e(u,.5*r)
call T4e(u,.35*r)
call TZe(u,5000*r)
call Tue(u,60*r)
call Tje(u,vx,.3*r)
elseif lv==6 then
call T_e(u,.55*r)
call T4e(u,.4*r)
call TZe(u,6000*r)
call Tue(u,75*r)
call Tje(u,vx,.4*r)
call Tje(u,5319,.2*r)
elseif lv==7 then
call T_e(u,.6*r)
call T4e(u,.45*r)
call TZe(u,7000*r)
call Tue(u,90*r)
call Tje(u,vx,.5*r)
call Tje(u,5319,.3*r)
call Twe(u,.1*r)
elseif lv==8 then
call T_e(u,.65*r)
call T4e(u,.5*r)
call TZe(u,8000*r)
call Tue(u,'n'*r)
call Tje(u,vx,.6*r)
call Tje(u,5319,.4*r)
call Twe(u,.15*r)
call TUe(u,.1*r)
elseif lv==9 then
call T_e(u,.7*r)
call T4e(u,.55*r)
call TZe(u,9000*r)
call Tue(u,$82*r)
call Tje(u,vx,.7*r)
call Tje(u,5319,.5*r)
call Twe(u,.2*r)
call TUe(u,.15*r)
call Tje(u,ox,.1*r)
elseif lv==$A then
call T_e(u,.8*r)
call T4e(u,.6*r)
call TZe(u,$2710*r)
call Tue(u,$A0*r)
call Tje(u,vx,.9*r)
call Tje(u,5319,.6*r)
call Twe(u,.25*r)
call TUe(u,.2*r)
call Tje(u,ox,.2*r)
call Tje(u,xx,.1*r)
elseif lv==$B then
call T_e(u,.9*r)
call T4e(u,.65*r)
call TZe(u,$2EE0*r)
call Tue(u,$C8*r)
call Tje(u,vx,1.1*r)
call Tje(u,5319,.7*r)
call Twe(u,.3*r)
call TUe(u,.25*r)
call Tje(u,ox,.3*r)
call Tje(u,xx,.2*r)
elseif lv==$C then
call T_e(u,1.*r)
call T4e(u,.7*r)
call TZe(u,$36B0*r)
call Tue(u,$F0*r)
call Tje(u,vx,1.3*r)
call Tje(u,5319,.8*r)
call Twe(u,.35*r)
call TUe(u,.3*r)
call Tje(u,ox,.4*r)
call Tje(u,xx,.3*r)
elseif lv==$D then
call T_e(u,1.1*r)
call T4e(u,.75*r)
call TZe(u,$3E80*r)
call Tue(u,280*r)
call Tje(u,vx,1.5*r)
call Tje(u,5319,.9*r)
call Twe(u,.4*r)
call TUe(u,.35*r)
call Tje(u,ox,.5*r)
call Tje(u,xx,.4*r)
elseif lv==$E then
call T_e(u,1.2*r)
call T4e(u,.8*r)
call TZe(u,$4650*r)
call Tue(u,330*r)
call Tje(u,vx,1.8*r)
call Tje(u,5319,1.*r)
call Twe(u,.45*r)
call TUe(u,.4*r)
call Tje(u,ox,.6*r)
call Tje(u,xx,.5*r)
endif
endfunction
function vdx takes unit u,integer lv returns item
local integer id='I0AC'
local integer i=0
local item t=null
if lv==$D then
set id='I0AF'
elseif lv==$C then
set id='I0AE'
elseif lv==$B then
set id='I0AD'
endif
set Sv=null
loop
exitwhen i>5
set t=UnitItemInSlot(u,i)
if GetItemTypeId(t)==id then
set i=5
set Sv=t
endif
set i=i+1
endloop
set t=null
return Sv
endfunction
function vDx takes unit u,integer i,integer w5e,item t returns boolean
local player p=GetOwningPlayer(u)
local integer pp=NJ[i]
local string s=BlzGetItemDescription(t)
local integer lv=S2I(SubString(s,0,2))
local integer tp=S2I(SubString(s,3,8))*'d'
local integer t0e=S2I(SubString(s,9,$D))*'d'
local integer vfx=S2I(SubString(s,$E,19))*$A
if pp<$E then
if NJ[i]+1==lv then
if tCe(i,tp,0)then
if tfe(i,t0e,0)then
if NJ[i]>=$A then
set Sv=vdx(u,NJ[i])
if Sv!=null then
call RemoveItem(Sv)
else
call Qke(p,"|cffffcc00"+"Không tìm thấy Thiên Tinh Thạch trong hành trang !",5)
call RemoveItem(t)
set s=null
return false
endif
endif
call tfe(i,t0e,De)
if pp>0 then
call vCx(u,pp,De)
endif
set NJ[i]=NJ[i]+1
call vCx(u,NJ[i],1)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+(vfx-ji[i])*2
call tCe(i,(vfx-ji[i]),1)
set ji[i]=vfx
set B4e[(i-1)*(23)+$F]=$F
set B5e[(i-1)*(23)+$F]=BlzGetAbilityTooltip('Agyb',NJ[i]-1)
set B6e[(i-1)*(23)+$F]="
"+BlzGetAbilityExtendedTooltip('Agyb',NJ[i]-1)
set uv="war3mapImported\\BTNphiphong_"+I2S(NJ[i])+".blp"
if GetLocalPlayer()==p then
call Uge(B3e[$F],uv)
endif
call Qre(AddSpecialEffect(("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qre(Hi[i])
set Hi[i]=AddSpecialEffect("war3mapImported\\PhiPhong"+I2S(NJ[i])+".mdl",GetUnitX(u),GetUnitY(u))
call Qke(p,"|cffffcc00"+"Phi phong đã được nâng cấp !",5)
if NJ[i]>=$C then
set Ji[i]=60-$F*(NJ[i]-$C)
if not(GetUnitAbilityLevel((u),('A0EC'))>0)then
call UnitAddAbility(u,'A0EC')
endif
endif
else
call Qke(p,"|cffffcc00"+"Ngũ Hành Hồn Thạch không đủ để nâng cấp Phi Phong !",5)
endif
else
call Qke(p,"|cffffcc00"+"Tài phú không đủ yêu cầu nâng cấp Phi Phong!",5)
endif
else
call Qke(p,"|cffffcc00"+"Không đúng thứ tự nâng cấp !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phi Phong đã đạt cấp tối đa !",5)
endif
call RemoveItem(t)
set s=null
set p=null
return false
endfunction
function vFx takes integer i returns nothing
call vCx(XJ[i],NJ[i],1)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+sj[NJ[i]]*2
call tCe(i,sj[NJ[i]],1)
set ji[i]=sj[NJ[i]]
call Qre(Hi[i])
set Hi[i]=AddSpecialEffect("war3mapImported\\PhiPhong"+I2S(NJ[i])+".mdl",GetUnitX(XJ[i]),GetUnitY(XJ[i]))
if NJ[i]>=$C then
set Ji[i]=60-$F*(NJ[i]-$C)
if not(GetUnitAbilityLevel((XJ[i]),('A0EC'))>0)then
call UnitAddAbility(XJ[i],'A0EC')
endif
endif
set B4e[(i-1)*(23)+$F]=$F
set B5e[(i-1)*(23)+$F]=BlzGetAbilityTooltip('Agyb',NJ[i]-1)
set B6e[(i-1)*(23)+$F]="
"+BlzGetAbilityExtendedTooltip('Agyb',NJ[i]-1)
endfunction
function vgx takes unit u,integer lv,real r returns nothing
if lv==1 then
call T_e(u,.15*r)
call T4e(u,.05*r)
call Tje(u,5319,.25*r)
call Tje(u,vx,.25*r)
call TUe(u,.03*r)
elseif lv==2 then
call T_e(u,.2*r)
call T4e(u,.1*r)
call Tje(u,5319,.3*r)
call Tje(u,vx,.3*r)
call TUe(u,.06*r)
elseif lv==3 then
call T_e(u,.25*r)
call T4e(u,.15*r)
call Tje(u,5319,.35*r)
call Tje(u,vx,.35*r)
call TUe(u,.09*r)
call Tje(u,ox,.05*r)
call Tje(u,4338,3*r)
elseif lv==4 then
call T_e(u,.3*r)
call T4e(u,.2*r)
call Tje(u,5319,.4*r)
call Tje(u,vx,.4*r)
call TUe(u,.12*r)
call Tje(u,ox,.1*r)
call Tje(u,4338,4*r)
elseif lv==5 then
call T_e(u,.35*r)
call T4e(u,.25*r)
call Tje(u,5319,.45*r)
call Tje(u,vx,.45*r)
call TUe(u,.15*r)
call Tje(u,ox,.15*r)
call Tje(u,4338,5*r)
elseif lv==6 then
call T_e(u,.4*r)
call T4e(u,.3*r)
call Tje(u,vx,.5*r)
call Tje(u,5319,.5*r)
call TUe(u,.18*r)
call Tje(u,ox,.2*r)
call Tje(u,4338,6*r)
elseif lv==7 then
call T_e(u,.45*r)
call T4e(u,.35*r)
call Tje(u,vx,.55*r)
call Tje(u,5319,.55*r)
call TUe(u,.21*r)
call Tje(u,ox,.25*r)
call Tje(u,4338,7*r)
elseif lv==8 then
call T_e(u,.5*r)
call T4e(u,.4*r)
call Tje(u,vx,.6*r)
call Tje(u,5319,.6*r)
call TUe(u,.24*r)
call Tje(u,ox,.3*r)
call Tje(u,4338,8*r)
endif
endfunction
function vGx takes unit u,integer i,integer w5e,item t returns nothing
local player p=GetOwningPlayer(u)
local integer qa=gJ[i]
local string s=BlzGetItemDescription(t)
local integer lv=S2I(SubString(s,0,1))
local integer t0e=S2I(SubString(s,2,5))*$3E8
local integer vfx=S2I(SubString(s,6,9))*'d'
local integer zPe=S2I(SubString(s,$A,$C))*sH
if qa<8 then
if gJ[i]+1==lv then
if oo>=lv and the(i,zPe,0)then
if tfe(i,t0e,0)then
call tfe(i,t0e,De)
if qa>0 then
call vgx(u,qa,De)
endif
set gJ[i]=gJ[i]+1
call vgx(u,gJ[i],1)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+(vfx-ki[i])*2
call tCe(i,(vfx-ki[i]),1)
set ki[i]=vfx
set B4e[(i-1)*(23)+21]=21
set B5e[(i-1)*(23)+21]=BlzGetAbilityTooltip('Afla',gJ[i]-1)
set B6e[(i-1)*(23)+21]="
"+BlzGetAbilityExtendedTooltip('Afla',gJ[i]-1)
set uv="war3mapImported\\BTNquanan_"+I2S(gJ[i])+".blp"
if GetLocalPlayer()==p then
call Uge(B3e[21],uv)
endif
call Qre(AddSpecialEffect(("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Quan ấn đã được nâng cấp !",5)
else
call Qke(p,"|cffffcc00"+"Ngũ Hành Hồn Thạch không đủ để nâng cấp Quan ấn !",5)
endif
else
call Qke(p,"|cffffcc00"+"Số lãnh thổ và cống hiến bang hội chưa đáp ứng đủ điều kiện !",5)
endif
else
call Qke(p,"|cffffcc00"+"Không đúng thứ tự nâng cấp !",5)
endif
else
call Qke(p,"|cffffcc00"+"Quan ấn đã đạt cấp tối đa !",5)
endif
call RemoveItem(t)
set s=null
set p=null
endfunction
function vhx takes integer i returns nothing
call vgx(XJ[i],gJ[i],1)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+Sj[gJ[i]]*2
call tCe(i,Sj[gJ[i]],1)
set ki[i]=Sj[gJ[i]]
set B4e[(i-1)*(23)+21]=21
set B5e[(i-1)*(23)+21]=BlzGetAbilityTooltip('Afla',gJ[i]-1)
set B6e[(i-1)*(23)+21]="
"+BlzGetAbilityExtendedTooltip('Afla',gJ[i]-1)
endfunction
function vHx takes integer id returns string
if id==$B then
return"war3mapImported\\FrameUI_EMPTYBUTTON.tga"
endif
return"war3mapImported\\FrameUI_tamphap"+I2S(id)+".tga"
endfunction
function vjx takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local framehandle f=BlzGetTriggerFrame()
if f!=null then
call BlzFrameSetVisible(f,false)
call BlzFrameSetVisible(f,true)
endif
if not EC then
set f=null
set p=null
return false
endif
if ti[id]then
call Qke(p,"|cffff0000"+"Xin đừng thao tác quá nhanh !",5)
set f=null
set p=null
return false
endif
call UMe(id,1.)
if not Ub[id+1]or B2e[id]or BQe[id]or bNe[id]or bye[id]or bLe[id]or b5e[id]or bQe[id]or BHe[id]or b9e[id]then
set f=null
set p=null
return false
endif
if b1e[id]==false then
if GetLocalPlayer()==p then
call BlzFrameSetVisible(li,true)
endif
set b1e[id]=true
else
set b1e[id]=false
if GetLocalPlayer()==p then
call BlzFrameSetVisible(li,false)
endif
endif
set f=null
set p=null
return false
endfunction
function vJx takes nothing returns nothing
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local integer yae=LoadInteger(ht,4682,GetHandleId(f))
local real x=.23
local real y=.312
local real w=.2
local real h=.08
if yae==$B then
set w=.2
set h=.08
set b4e[(id)*($B)+$B]="|cffadd8e6"+"Điểm tu vi: "+I2S(zo[id+1]/ 3)+"|r"+"|cff6d6d6d"+"

Sau khi trùng sinh 2, mỗi cấp trùng sinh sẽ nhận được 2 điểm tu vi
Hóa cảnh mỗi cấp nhận được 3 điểm tu vi"
endif
if GetLocalPlayer()==p then
set zc=b3e[(id)*($B)+yae]
set Zc=b4e[(id)*($B)+yae]
set rC=x
set iC=y
set aC=w
set nC=h
endif
if GetLocalPlayer()==p then
call BlzFrameSetAbsPoint(yc,FRAMEPOINT_BOTTOMLEFT,rC,iC)
call BlzFrameSetSize(yc,aC,nC)
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextTitle",0),zc)
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,true)
endif
set f=null
set p=null
endfunction
function vkx takes nothing returns nothing
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,false)
call BlzFrameSetVisible(Li,false)
endif
set f=null
set p=null
endfunction
function vKx takes nothing returns boolean
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local integer yae=LoadInteger(ht,4682,GetHandleId(f))
if GetLocalPlayer()==p then
call BlzFrameSetVisible(f,false)
call BlzFrameSetVisible(f,true)
endif
if ti[id]then
call Qke(p,"|cffff0000"+"Xin đừng thao tác quá nhanh !",5)
set f=null
set p=null
return false
endif
call UMe(id,.5)
if yae!=$B then
call yQe(XJ[id+1],p,id+1,yae)
endif
if GetLocalPlayer()==p then
set zc=b3e[(id)*($B)+yae]
set Zc=b4e[(id)*($B)+yae]
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextTitle",0),zc)
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,true)
endif
set f=null
set p=null
return false
endfunction
function vlx takes integer i,real x,real y returns nothing
set b2e[i]=Uhe(vHx(i))
call Ude(b2e[i],52,x,y)
call Uke(b2e[i],function vKx)
call Ule(b2e[i],function vJx)
call ULe(b2e[i],function vkx)
call SaveInteger(ht,4682,GetHandleId(b2e[i]),i)
call BlzFrameSetParent(b2e[i],li)
endfunction
function vLx takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
if b1e[id] then
set b1e[id]=false
if GetLocalPlayer()==p then
call BlzFrameSetVisible(li,false)
endif
endif
set p=null
return false
endfunction
function vmx takes nothing returns nothing
local real z=.01
local real y=.02
set li=UJe("war3mapImported\\FrameUI_TamPhapBackGround.tga")
call UFe(li,408,505,.005,.275)
call vlx(1,z+.0938,y+.443)
call vlx(2,z+.1485,y+.4235)
call vlx(3,z+.17785,y+.3805)
call vlx(4,z+.1782,y+.3285)
call vlx(5,z+.146,y+.2895)
call vlx(6,z+.0938,y+.2745)
call vlx(7,z+.0438,y+.2895)
call vlx(8,z+.01115,y+.3805)
call vlx(9,z+.011,y+.33)
call vlx($A,z+.0401,y+.4235)
call vlx($B,z+.0941,y+.3435)
set yc=BlzCreateFrame("BoxedText",BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI,0),0,0)
call BlzFrameSetVisible(li,false)
call BlzFrameSetVisible(yc,false)
endfunction
function vMx takes nothing returns nothing
local trigger t=CreateTrigger()
call BlzTriggerRegisterPlayerKeyEvent(t,Player(0),OSKEY_T,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(1),OSKEY_T,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(2),OSKEY_T,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(3),OSKEY_T,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(4),OSKEY_T,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(5),OSKEY_T,0,true)
call TriggerAddAction(t,function vjx)
set Ki=Uhe("war3mapImported\\bt12.tga")
call UFe(Ki,58,58,.445,.137)
call Uke(Ki,function vjx)
set t=CreateTrigger()
call TriggerRegisterPlayerEvent(t,Player(0),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(1),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(2),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(3),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(4),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(5),EVENT_PLAYER_END_CINEMATIC)
call TriggerAddAction(t,function vLx)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,16.,false)
call TriggerAddAction(t,function vmx)
set t=null
endfunction
function vpx takes integer i returns string
if i>=1 and i<=3 then
return "|cff7fff00"+"Tây Tháp Lâm"
endif
if i>3 and i<=6 then
return "|cff7fff00"+"Hoài Thủy Sa Châu"
endif
if i>6 and i<=9 then
return "|cff7fff00"+"Phong Lăng Độ"
endif
if i>9 and i<=$C then
return "|cff7fff00"+"Hoa Sơn"
endif
if i>$C and i<=$F then
return "|cff7fff00"+"Mông Cổ Vương Đỉnh"
endif
if i>$F and i<=18 then
return "|cff7fff00"+"Trường Bạch Sơn"
endif
if i>18 and i<=21 then
return "|cff7fff00"+"Đôn Hoàng Cổ Thành"
endif
return""
endfunction
function vPx takes real ab returns string
if ab>-22.5 and ab<22.5 then
return" Đông"
endif
if ab>22.5 and ab<67.5 then
return" Đông Bắc"
endif
if ab>67.5 and ab<112.5 then
return" Bắc"
endif
if ab>112.5 and ab<157.5 then
return" Tây Bắc"
endif
if ab>157.5 and ab<$B4 then
return" Tây"
endif
if ab>-$B4 and ab<-157.5 then
return" Tây"
endif
if ab>-157.5 and ab<-112.5 then
return" Tây Nam"
endif
if ab>-112.5 and ab<-67.5 then
return" Nam"
endif
if ab>-67.5 and ab<-22.5 then
return" Đông Nam"
endif
return""
endfunction
function vqx takes unit u,player p,integer i,item t returns nothing
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local integer id=GetHandleId(t)
local integer vQx=LoadInteger(IT,id,7043)
local real db=0
local real ab=0
if vQx==0 then
set vQx=GetRandomInt(1,21)
call SaveInteger(IT,id,7043,vQx)
endif
set db=sre(x,y,GetRectCenterX(jj[vQx]),GetRectCenterY(jj[vQx]))/ 20
set ab=soe(x,y,GetRectCenterX(jj[vQx]),GetRectCenterY(jj[vQx]))
if db>5 then
call Qke(p,"Vị trí Tàng Bảo Đồ nằm ở "+vpx(vQx)+"|r, cách vị trí hiện tại "+"|cffffcc00"+I2S(R2I(db))+"|r bước theo hướng"+"|cffffcc00"+vPx(ab),5)
else
call Qre(AddSpecialEffect("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl",x,y))
call QKe("Chúc mừng "+rj[i]+" đã tìm thấy Tàng Bảo Đồ nhận được Rương Bạch Ngân và 50 uy danh, 300 danh vọng trang bị - áo, 100 NHHT",3)
set bhe[(i)*($A)+5]=bhe[(i)*($A)+5]+2
call tye(i,4)
call tDe(i,50,1)
call tfe(i,$96,1)
call tke(i,2,300,1)
if GetRandomReal(0,'d')<=$F then
call UnitAddItemById(OJ[i],'I090')
call QKe(rj[i]+"|cffffff00"+" đào tàng bảo đồ may mắn nhận được Hạt Giống Cây Bát Nhã, xin chúc mừng !",5)
endif
if GetRandomReal(0,'d')<=30 then
call UnitAddItemById(OJ[i],'I0G9')
endif
if GetRandomReal(0,'d')<=$A then
call UnitAddItemById(OJ[i],'I0HO')
endif
call UnitAddItemById(OJ[i],'I0BG')
if GetRandomReal(1,'d')<=$F then
call UnitAddItemById(OJ[i],'I0BH')
call QKe("Chúc mừng "+rj[i]+" nhận được từ Tàng Bảo Đồ |cffffff00Rương Hoàng Kim|r",3)
endif
call FlushChildHashtable(IT,id)
call RemoveItem(t)
if not mi and GetRandomReal(1,'d')<=$F then
call QKe(rj[i]+" tại "+vpx(vQx)+"|r đào Tàng Bảo Đồ phát hiện ra lối vào |cffffff00Động Thần Bí|r",3)
call wle(GetRectCenterX(jj[vQx]),GetRectCenterY(jj[vQx]))
set mi=true
endif
endif
endfunction
function vsx takes unit u,player p,integer i,item t returns nothing
local integer rd=GetRandomInt(1,16)
if GetRandomReal(0,'d')<=30 then
call UnitAddItemById(OJ[i],iJ[5])
endif
if rd==1 or rd==9 then
call UnitAddItemById(OJ[i],'I0BJ')
call Qke(p,"|cffffcc00"+"Mở rương bạch ngân nhận được 1 Tiểu Du Long Lệnh",5)
elseif rd==2 or rd==$A then
call tfe(i,400,1)
call Qke(p,"|cffffcc00"+"Mở rương bạch ngân nhận được 400 Ngũ Hành Hồn Thạch",5)
elseif rd==3 or rd==$B then
call tje(i,50,GetRandomInt(1,6),1)
call Qke(p,"|cffffcc00"+"Mở rương bạch ngân nhận được 50 Mảnh Trang Bị Đồng Hành ngẫu nhiên",5)
elseif rd==4 or rd==$C then
call tHe(i,$186A0,1)
call Qke(p,"|cffffcc00"+"Mở rương bạch ngân nhận được 100000 bạc",5)
elseif rd==5 or rd==$D then
call tFe(i,$4E20,1)
call Qke(p,"|cffffcc00"+"Mở rương bạch ngân nhận được 20000 chân khí",5)
elseif rd==6 or rd==$E then
call UnitAddItemById(OJ[i],bj[5])
call Qke(p,"|cffffcc00"+"Mở rương bạch ngân nhận được 1 Huyền Tinh cấp 5",5)
elseif rd==7 or rd==$F then
call UnitAddItemById(OJ[i],bj[6])
call Qke(p,"|cffffcc00"+"Mở rương bạch ngân nhận được 1 Huyền Tinh cấp 6",5)
elseif rd==8 then
call UnitAddItemById(OJ[i],bj[7])
call Qke(p,"|cffffcc00"+"Mở rương bạch ngân nhận được 1 Huyền Tinh cấp 7",5)
elseif rd==16 then
set lJ[i]=lJ[i]+5
call Qke(p,"|cffffcc00"+"Mở rương bạch ngân nhận được 1 Mảnh Hành Giả Sa Mạc",5)
endif
call RemoveItem(t)
endfunction
function vSx takes unit u,player p,integer i,item t returns nothing
local integer rd=GetRandomInt(1,9)
local item ck=Q0e(u,'I0BI')
if ck!=null then
call RemoveItem(ck)
call UnitAddItemById(OJ[i],iJ[5])
if rd==1 or rd==9 then
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BJ')
call Qke(p,"|cffffcc00"+"Mở rương hoàng kim nhận được 2 Tiểu Du Long Lệnh",5)
elseif rd==2 then
call tfe(i,800,1)
call Qke(p,"|cffffcc00"+"Mở rương hoàng kim nhận được 800 Ngũ Hành Hồn Thạch",5)
elseif rd==3 then
call tje(i,80,GetRandomInt(1,6),1)
call Qke(p,"|cffffcc00"+"Mở rương hoàng kim nhận được 80 Mảnh Trang Bị Đồng Hành ngẫu nhiên",5)
elseif rd==4 then
call tHe(i,$30D40,1)
call Qke(p,"|cffffcc00"+"Mở rương hoàng kim nhận được 200000 bạc",5)
elseif rd==5 then
call tFe(i,$9C40,1)
call Qke(p,"|cffffcc00"+"Mở rương hoàng kim nhận được 40000 chân khí",5)
elseif rd==6 then
call UnitAddItemById(OJ[i],bj[5])
call UnitAddItemById(OJ[i],bj[5])
call Qke(p,"|cffffcc00"+"Mở rương hoàng kim nhận được 2 Huyền Tinh cấp 5",5)
elseif rd==7 then
call UnitAddItemById(OJ[i],bj[6])
call UnitAddItemById(OJ[i],bj[6])
call Qke(p,"|cffffcc00"+"Mở rương hoàng kim nhận được 2 Huyền Tinh cấp 6",5)
elseif rd==8 then
call UnitAddItemById(OJ[i],bj[7])
call UnitAddItemById(OJ[i],bj[7])
call Qke(p,"|cffffcc00"+"Mở rương hoàng kim nhận được 2 Huyền Tinh cấp 7",5)
elseif rd==9 then
set lJ[i]=lJ[i]+$A
call Qke(p,"|cffffcc00"+"Mở rương bạch ngân nhận được 2 Mảnh Hành Giả Sa Mạc",5)
endif
call RemoveItem(t)
else
call Qke(p,"|cffffcc00"+"Phải mang theo Chìa Khóa Vàng trong hành trang để mở rương hoàng kim !",5)
endif
set ck=null
endfunction
function ThanBinhFrame__GetTBTypeIcon takes nothing returns string
return"war3mapImported\\BTNFrameUI_Empty.blp"
endfunction
function vtx takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local framehandle f=BlzGetTriggerFrame()
if f!=null then
call BlzFrameSetVisible(f,false)
call BlzFrameSetVisible(f,true)
endif
if not EC then
set f=null
set p=null
return false
endif
if ti[id]then
call Qke(p,"|cffff0000"+"Xin đừng thao tác quá nhanh !",5)
set f=null
set p=null
return false
endif
call UMe(id,1.)
if not Ub[id+1]or B2e[id]or BQe[id]or bNe[id]or bye[id]or bLe[id]or bQe[id]or b1e[id]or BHe[id]or b9e[id]then
set f=null
set p=null
return false
endif
if b5e[id]==false then
if GetLocalPlayer()==p then
call BlzFrameSetVisible(pi,true)
endif
set b5e[id]=true
else
set b5e[id]=false
if GetLocalPlayer()==p then
call BlzFrameSetVisible(pi,false)
endif
endif
set f=null
set p=null
return false
endfunction
function vTx takes nothing returns nothing
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local real x=.231
local real y=.252
local real w=.22
local real h=.1612+.02*Zo[id+1]
if b6e[id]!=0 then
if GetLocalPlayer()==p then
set zc=b7e[id]
set Zc=b8e[id]
set rC=x
set iC=y
set aC=w
set nC=h
endif
if GetLocalPlayer()==p then
call BlzFrameSetAbsPoint(yc,FRAMEPOINT_BOTTOMLEFT,rC,iC)
call BlzFrameSetSize(yc,aC,nC)
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextTitle",0),zc)
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,true)
endif
endif
set f=null
set p=null
endfunction
function vux takes nothing returns nothing
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,false)
call BlzFrameSetVisible(Pi,false)
endif
set f=null
set p=null
endfunction
function vUx takes nothing returns nothing
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
if GetLocalPlayer()==p then
call BlzFrameSetVisible(f,false)
call BlzFrameSetVisible(f,true)
endif
set f=null
set p=null
endfunction
function vwx takes real x,real y returns nothing
set qi=Uhe(("war3mapImported\\BTNFrameUI_Empty.blp"))
call Ude(qi,52,x,y)
call Uke(qi,function vUx)
call Ule(qi,function vTx)
call ULe(qi,function vux)
call BlzFrameSetParent(qi,pi)
endfunction
function vWx takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
if b5e[id] then
set b5e[id]=false
if GetLocalPlayer()==p then
call BlzFrameSetVisible(pi,false)
endif
endif
set p=null
return false
endfunction
function vyx takes nothing returns nothing
local real z=.01
local real y=.02
set pi=UJe("war3mapImported\\FrameUI_ThanBinhBackground.tga")
call UFe(pi,408,505,.005,.275)
call vwx(z+.0945,y+.331)
set yc=BlzCreateFrame("BoxedText",BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI,0),0,0)
call BlzFrameSetVisible(pi,false)
call BlzFrameSetVisible(yc,false)
endfunction
function vYx takes nothing returns nothing
local trigger t=CreateTrigger()
call BlzTriggerRegisterPlayerKeyEvent(t,Player(0),OSKEY_I,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(1),OSKEY_I,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(2),OSKEY_I,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(3),OSKEY_I,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(4),OSKEY_I,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(5),OSKEY_I,0,true)
call TriggerAddAction(t,function vtx)
set Mi=Uhe("war3mapImported\\bt10.tga")
call UFe(Mi,58,58,.375,.137)
call Uke(Mi,function vtx)
set t=CreateTrigger()
call TriggerRegisterPlayerEvent(t,Player(0),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(1),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(2),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(3),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(4),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(5),EVENT_PLAYER_END_CINEMATIC)
call TriggerAddAction(t,function vWx)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,14.,false)
call TriggerAddAction(t,function vyx)
set t=null
endfunction
function vzx takes integer id returns string
if id==1 then
return"war3mapImported\\BTNthanhtuu_truongthanh.blp"
elseif id==2 then
return"war3mapImported\\BTNthanhtuu_trangbi.blp"
elseif id==3 then
return"war3mapImported\\BTNthanhtuu_donghanh.blp"
elseif id==4 then
return"war3mapImported\\BTNthanhtuu_lichluyen.blp"
endif
return"war3mapImported\\BTNthanhtuu_"+I2S(id-4)+".blp"
endfunction
function vZx takes integer id returns string
if id==1 then
return "|cffffcc00"+"Trưởng thành nhân vật"
elseif id==2 then
return "|cffffcc00"+"Trang bị"
elseif id==3 then
return "|cffffcc00"+"Đồng hành và thú cưỡi"
elseif id==4 then
return "|cffffcc00"+"Lịch luyện giang hồ"
elseif id==5 then
return "|cffffcc00"+"Năng chinh quán chiến"
elseif id==6 then
return "|cffffcc00"+"Trừ gian diệt ác"
elseif id==7 then
return "|cffffcc00"+"Người vận chuyển"
elseif id==8 then
return "|cffffcc00"+"Đại phú ông"
elseif id==9 then
return "|cffffcc00"+"Trồng cây gây rừng"
elseif id==$A then
return "|cffffcc00"+"Thợ săn tiền thưởng"
elseif id==$B then
return "|cffffcc00"+"Tầm bảo giả"
elseif id==$C then
return "|cffffcc00"+"Cát tinh cao chiếu"
elseif id==$D then
return "|cffffcc00"+"Đột phá vòng vây"
elseif id==$E then
return "|cffffcc00"+"Thiên hạ ngũ tuyệt"
elseif id==$F then
return "|cffffcc00"+"Cần kiệm"
else
return "|cffffcc00"+"Lập quốc tranh hùng"
endif
endfunction
function v_x takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local framehandle f=BlzGetTriggerFrame()
if f!=null then
call BlzFrameSetVisible(f,false)
call BlzFrameSetVisible(f,true)
endif
if not EC then
set f=null
set p=null
return false
endif
if ti[id]then
call Qke(p,"|cffff0000"+"Xin đừng thao tác quá nhanh !",5)
set f=null
set p=null
return false
endif
call UMe(id,1.)
if not Ub[id+1]or B2e[id]or BQe[id]or bNe[id]or bye[id]or bLe[id]or b5e[id]or bQe[id]or b1e[id]or BHe[id]then
set f=null
set p=null
return false
endif
call y5e(p,id)
if b9e[id]==false then
if GetLocalPlayer()==p then
call BlzFrameSetVisible(si,true)
endif
set b9e[id]=true
else
set b9e[id]=false
if GetLocalPlayer()==p then
call BlzFrameSetVisible(si,false)
endif
endif
set f=null
set p=null
return false
endfunction
function v0x takes nothing returns nothing
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local integer yae=LoadInteger(ht,4145,GetHandleId(f))
local real x=.23
local real y=.252
local real w=.21
local real h=.25
if yae>=5 and yae<=16 then
set y=.32
set h=.12
endif
if GetLocalPlayer()==p then
set zc=vZx(yae)
set Zc=Bee[(id)*(16)+yae]
set rC=x
set iC=y
set aC=w
set nC=h
endif
if GetLocalPlayer()==p then
call BlzFrameSetAbsPoint(yc,FRAMEPOINT_BOTTOMLEFT,rC,iC)
call BlzFrameSetSize(yc,aC,nC)
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextTitle",0),zc)
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,true)
endif
set f=null
set p=null
endfunction
function v1x takes nothing returns nothing
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,false)
call BlzFrameSetVisible(Si,false)
endif
set f=null
set p=null
endfunction
function v2x takes integer i,integer s returns nothing
set eB[i]=0
set vB[i]="war3mapImported\\DH_ThanhTuu_"+I2S(s)+".mdx"
call Qre(Zb[i])
set Zb[i]=AddSpecialEffect(vB[i],GetUnitX(XJ[i]),GetUnitY(XJ[i]))
set WJ[i]=true
endfunction
function v3x takes nothing returns boolean
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
local integer yae=LoadInteger(ht,4145,GetHandleId(f))
if GetLocalPlayer()==p then
call BlzFrameSetVisible(f,false)
call BlzFrameSetVisible(f,true)
endif
if ti[i-1]then
call Qke(p,"|cffff0000"+"Xin đừng thao tác quá nhanh !",5)
set f=null
set p=null
return false
endif
call UMe(i-1,1.)
if yae==5 then
if bGe[(i)*(20)+5]==1 then
call v2x(i,1)
endif
elseif yae==6 then
if bhe[(i)*($A)+1]/ 2>=99000 then
call v2x(i,2)
endif
elseif yae==7 then
if bhe[(i)*($A)+2]/ 2>=$C8 then
call v2x(i,3)
endif
elseif yae==8 then
if(GetPlayerState((p),PLAYER_STATE_RESOURCE_LUMBER))-Bne[(i)*(5)+3]/ 2>=$2710 then
call v2x(i,4)
endif
elseif yae==9 then
if bhe[(i)*($A)+3]/ 2>='d' then
call v2x(i,5)
endif
elseif yae==$A then
if bhe[(i)*($A)+4]/ 2>=500 then
call v2x(i,6)
endif
elseif yae==$B then
if bhe[(i)*($A)+5]/ 2>=500 then
call v2x(i,7)
endif
elseif yae==$C then
if bGe[(i)*(20)+$C]==1 then
call v2x(i,8)
endif
elseif yae==$D then
if bGe[(i)*(20)+$D]==1 then
call v2x(i,9)
endif
elseif yae==$E then
if bGe[(i)*(20)+$E]==1 then
call v2x(i,$A)
endif
elseif yae==$F then
if cce[(i)*(20)+1]>=800 then
call v2x(i,$B)
endif
elseif yae==16 then
if bGe[(i)*(20)+16]==1 then
call v2x(i,$C)
endif
endif
set f=null
set p=null
return false
endfunction
function v4x takes integer i,real x,real y returns nothing
set Bve[i]=Uhe(vzx(i))
call Ude(Bve[i],52,x,y)
call Uke(Bve[i],function v3x)
call Ule(Bve[i],function v0x)
call ULe(Bve[i],function v1x)
call SaveInteger(ht,4145,GetHandleId(Bve[i]),i)
call BlzFrameSetParent(Bve[i],si)
endfunction
function v5x takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
if b9e[id] then
set b9e[id]=false
if GetLocalPlayer()==p then
call BlzFrameSetVisible(si,false)
endif
endif
set p=null
return false
endfunction
function v6x takes nothing returns nothing
local real z=.01
local real y=.02
set si=UJe("war3mapImported\\FrameUI_QuestBackground.tga")
call UFe(si,408,505,.005,.275)
call v4x(1,z+.0185,y+.43)
call v4x(2,z+.0685,y+.43)
call v4x(3,z+.1185,y+.43)
call v4x(4,z+.1685,y+.43)
call v4x(5,z+.0185,y+.38)
call v4x(6,z+.0685,y+.38)
call v4x(7,z+.1185,y+.38)
call v4x(8,z+.1685,y+.38)
call v4x(9,z+.0185,y+.33)
call v4x($A,z+.0685,y+.33)
call v4x($B,z+.1185,y+.33)
call v4x($C,z+.1685,y+.33)
call v4x($D,z+.0185,y+.28)
call v4x($E,z+.0685,y+.28)
call v4x($F,z+.1185,y+.28)
call v4x(16,z+.1685,y+.28)
set yc=BlzCreateFrame("BoxedText",BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI,0),0,0)
call BlzFrameSetVisible(si,false)
call BlzFrameSetVisible(yc,false)
set EC=true
endfunction
function v7x takes nothing returns nothing
local trigger t=CreateTrigger()
call BlzTriggerRegisterPlayerKeyEvent(t,Player(0),OSKEY_U,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(1),OSKEY_U,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(2),OSKEY_U,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(3),OSKEY_U,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(4),OSKEY_U,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(5),OSKEY_U,0,true)
call TriggerAddAction(t,function v_x)
set Qi=Uhe("war3mapImported\\bt15.tga")
call UFe(Qi,58,58,.16,.05)
call Uke(Qi,function v_x)
set t=CreateTrigger()
call TriggerRegisterPlayerEvent(t,Player(0),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(1),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(2),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(3),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(4),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(5),EVENT_PLAYER_END_CINEMATIC)
call TriggerAddAction(t,function v5x)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,18.,false)
call TriggerAddAction(t,function v6x)
set t=null
endfunction
function v8x takes unit u,player p,integer i returns boolean
local item tb=UnitItemInSlot(u,0)
local item v9x=UnitItemInSlot(u,1)
local integer tJe=0
local integer evx=0
local integer eex=0
if GetItemTypeId(tb)!='I000' or GetItemTypeId(v9x)!='I0AO' then
call Qke(p,"|cffffcc00"+"Cần đặt trang bị ở ô đầu tiên và Tinh Chú Thạch tương ứng ở ô thứ 2 trong hành trang !",5)
set tb=null
set v9x=null
return false
endif
set evx=GetHandleId(tb)
set eex=GetHandleId(v9x)
set tJe=LoadInteger(IT,evx,5789)
if tJe==2 or tJe==5 or tJe==6 or tJe==7 or tJe==$A then
if LoadInteger(IT,eex,5789)==1 then
if LoadInteger(IT,eex,4386)==bRe[(i)*(20)+tJe]+1 then
if tHe(i,SH*(bRe[(i)*(20)+tJe]+1),0)then
set Sv=Q0e(u,bj[bRe[(i)*(20)+tJe]+6])
if Sv==null then
call Qke(p,"|cffffcc00"+"Tinh chú yêu cầu đặt 1 Huyền Tinh cấp "+I2S(bRe[(i)*(20)+tJe]+6)+" trong hành trang !",5)
set tb=null
set v9x=null
return false
endif
if GetRandomReal(0,'d')<=80-$A*bRe[(i)*(20)+tJe]then
call FlushChildHashtable(IT,eex)
call RemoveItem(v9x)
call RemoveItem(Sv)
call tHe(i,SH*(bRe[(i)*(20)+tJe]+1),De)
set bRe[(i)*(20)+tJe]=bRe[(i)*(20)+tJe]+1
call Qre(AddSpecialEffect(("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Tinh chú trang bị thành công !",5)
call Wme(i,tb)
else
call tHe(i,5*sH*(bRe[(i)*(20)+tJe]+1),De)
call FlushChildHashtable(IT,eex)
call RemoveItem(v9x)
call Qke(p,"|cffffcc00"+"Tinh chú trang bị thất bại !",5)
endif
else
call Qke(p,"|cffffcc00"+"Cần bạc "+I2S(SH*(bRe[(i)*(20)+tJe]+1)),5)
endif
else
call Qke(p,"|cffffcc00"+"Cấp độ Tinh Chú Thạch đặt vào không đúng !",5)
endif
else
call Qke(p,"|cffffcc00"+"Tinh Chú Thạch đặt vào không đúng !",5)
endif
elseif tJe==1 or tJe==3 or tJe==9 or tJe==$B then
if LoadInteger(IT,eex,5789)==2 then
if LoadInteger(IT,eex,4386)==bRe[(i)*(20)+tJe]+1 then
if tHe(i,$F*sH*(bRe[(i)*(20)+tJe]+1),0)then
set Sv=Q0e(u,bj[bRe[(i)*(20)+tJe]+7])
if Sv==null then
call Qke(p,"|cffffcc00"+"Tinh chú yêu cầu đặt 1 Huyền Tinh cấp "+I2S(bRe[(i)*(20)+tJe]+7)+" trong hành trang !",5)
set tb=null
set v9x=null
return false
endif
if GetRandomReal(0,'d')<=80-$A*bRe[(i)*(20)+tJe]then
call FlushChildHashtable(IT,eex)
call RemoveItem(v9x)
call RemoveItem(Sv)
call tHe(i,$F*sH*(bRe[(i)*(20)+tJe]+1),De)
set bRe[(i)*(20)+tJe]=bRe[(i)*(20)+tJe]+1
call Qre(AddSpecialEffect(("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Tinh chú trang bị thành công !",5)
call Wme(i,tb)
else
call tHe(i,75*K1*(bRe[(i)*(20)+tJe]+1),De)
call FlushChildHashtable(IT,eex)
call RemoveItem(v9x)
call Qke(p,"|cffffcc00"+"Tinh chú trang bị thất bại !",5)
endif
else
call Qke(p,"|cffffcc00"+"Cần bạc "+I2S($F*sH*(bRe[(i)*(20)+tJe]+1)),5)
endif
else
call Qke(p,"|cffffcc00"+"Cấp độ Tinh Chú Thạch đặt vào không đúng !",5)
endif
else
call Qke(p,"|cffffcc00"+"Tinh Chú Thạch đặt vào không đúng !",5)
endif
elseif tJe==8 then
if LoadInteger(IT,eex,5789)==3 then
if LoadInteger(IT,eex,4386)==bRe[(i)*(20)+tJe]+1 then
if tHe(i,4*SH*(bRe[(i)*(20)+tJe]+1),0)then
set Sv=Q0e(u,bj[bRe[(i)*(20)+tJe]+8])
if Sv==null then
call Qke(p,"|cffffcc00"+"Tinh chú yêu cầu đặt 1 Huyền Tinh cấp "+I2S(bRe[(i)*(20)+tJe]+8)+" trong hành trang !",5)
set tb=null
set v9x=null
return false
endif
if GetRandomReal(0,'d')<=80-$A*bRe[(i)*(20)+tJe]then
call FlushChildHashtable(IT,eex)
call RemoveItem(v9x)
call RemoveItem(Sv)
call tHe(i,4*SH*(bRe[(i)*(20)+tJe]+1),De)
set bRe[(i)*(20)+tJe]=bRe[(i)*(20)+tJe]+1
call Qre(AddSpecialEffect(("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Tinh chú trang bị thành công !",5)
call Wme(i,tb)
else
call tHe(i,2*SH*(bRe[(i)*(20)+tJe]+1),De)
call FlushChildHashtable(IT,eex)
call RemoveItem(v9x)
call Qke(p,"|cffffcc00"+"Tinh chú trang bị thất bại !",5)
endif
else
call Qke(p,"|cffffcc00"+"Cần bạc "+I2S(4*SH*(bRe[(i)*(20)+tJe]+1)),5)
endif
else
call Qke(p,"|cffffcc00"+"Cấp độ Tinh Chú Thạch đặt vào không đúng !",5)
endif
else
call Qke(p,"|cffffcc00"+"Tinh Chú Thạch đặt vào không đúng !",5)
endif
endif
set tb=null
set v9x=null
return false
endfunction
function exx takes integer i returns integer
local string s=Tve(GetPlayerName(Player(i-1)))
local string s2=""
local integer c=1
local integer a=0
loop
exitwhen c>YH
set s2=SubString(yH[c],$F,StringLength(yH[c]))
if s==s2 then
set a=c
set yi[i]=s
endif
set c=c+1
endloop
set s=null
set s2=null
return a
endfunction
function eox takes unit u,integer d returns boolean
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
set va=0
if not Bae[i]then
return false
else
set va=va+1
endif
if(GetPlayerState((p),PLAYER_STATE_RESOURCE_LUMBER))!=(Bne[(i)*(5)+1]/ 3-$4D2)then
return false
else
set va=va+1
endif
if Bne[(i)*(5)+4]>(Bne[(i)*(5)+1]/ 3-$4D2)then
return false
else
set va=va+2
endif
if(Bne[(i)*(5)+1]/ 3-$4D2)!=Bne[(i)*(5)+2]then
return false
else
set va=va+1
endif
if I2R(Bne[(i)*(5)+2])/ I2R(zH[d])<1 then
return false
else
set va=va+3
set pv=i
endif
if Bne[(i)*(5)+4]<0 then
call QH()
return false
else
set va=va+1
endif
if Bne[(i)*(5)+4]+Bne[(i)*(5)+3]/ 2!=(GetPlayerState((p),PLAYER_STATE_RESOURCE_LUMBER))then
call QH()
else
set va=va+1
endif
set p=null
set Mv=va
return true
endfunction
function erx takes integer i returns integer
local integer c=$B
local integer b=0
loop
exitwhen c<1
if eox(XJ[i],c)then
set Wi[i]=I2R(c)
set b=c
set c=0
endif
set c=c-1
endloop
return b
endfunction
function eix takes nothing returns integer
if Zi[Ui[pv]-1]==yH[N9e[(1+1)*(6)+pv]]then
set mv=Bpe[(1)*(6)+Ui[pv]]+1
return mv
endif
return 0
endfunction
function eax takes nothing returns integer
if Zi[Ui[pv]-1]==yH[N9e[(1+1)*(6)+pv]]and not UTe(pv)then
return 1
endif
return 0
endfunction
function enx takes nothing returns integer
set zi[ui]=SubString(yH[N9e[(2)*(6)+ui]],$F,StringLength(yH[N9e[(2)*(6)+ui]]))
return(S2I(tj[65]+tj[64]+tj[68]+tj[69]+tj[71])-che[($B8)*(6)+ui])*$A
endfunction
function eVx takes integer i returns boolean
if S2I(SubString(Boe[ui],0,2))!=S2I(SubString(I2S(cHe[(2)*(6)+ui]),0,2))then
return false
endif
if S2I(SubString(Boe[ui],2,4))!=S2I(SubString(I2S(cHe[(1)*(6)+ui]),1,3))then
return false
endif
if S2I(SubString(Boe[ui],4,6))!=S2I(SubString(yH[N9e[(2)*(6)+ui]],$D,$F))then
return false
endif
set Ui[i]=ui
set Pk[ui]=false
return true
endfunction
function eEx takes integer i returns boolean
if cHe[(1)*(6)+i]==S2I(SubString(yH[N9e[(2)*(6)+i]],8,$D))and sk[i]==S2I(SubString(yH[N9e[(2)*(6)+i]],4,5))-1 then
set uv=SubString(yH[N9e[(2)*(6)+i]],5,9)
set ui=i
set Bne[(ui)*(5)+5]=N9e[(2)*(6)+ui]
set Zi[ui-1]=yH[Bne[(ui)*(5)+5]]
return true
endif
return false
endfunction
function eXx takes nothing returns boolean
set TJ[ui]=true
if cHe[(2)*(6)+ui]==S2I(SubString(yH[N9e[(2)*(6)+ui]],$F,19))and cHe[(2)*(6)+ui]==S2I(SubString(yi[ui],0,4))then
set cle[(ui)*($A)+1]=2
return true
endif
return false
endfunction
function GetVNRank takes nothing returns nothing
set wi[Ui[ui]]=erx(Ui[ui])
endfunction
function eOx takes nothing returns nothing
local integer i=ui
local integer c=30
set Ti[ui]=true
set fA[i]=2*wi[Ui[i]]
call tye(i,5*wi[Ui[i]])
if BGe[(i)*(3)+3]==0 and S2I(SubString(Zi[ui-1],6,7))>=1 then
set BGe[(i)*(3)+3]=1
call tHe(i,$186A0,1)
call tDe(i,$3E8,1)
if cNe[(i)*(20)+3]+c>99 then
set c=99-cNe[(i)*(20)+3]
endif
set cNe[(i)*(20)+3]=cNe[(i)*(20)+3]+c
set Yk[i]=Yk[i]+c*2
endif
if wi[Ui[i]]==$B then
set Sk[i]=30
set tk[i]=30
set B1e[i]=20
call tWe('I0C5',GetRectCenterX(RJ[i]),GetRectCenterY(RJ[i]),5)
elseif wi[Ui[i]]==$A then
set Sk[i]=30
set tk[i]=30
set B1e[i]=18
call tWe('I0C5',GetRectCenterX(RJ[i]),GetRectCenterY(RJ[i]),4)
elseif wi[Ui[i]]==9 then
set Sk[i]=30
set tk[i]=30
set B1e[i]=16
call tWe('I0C5',GetRectCenterX(RJ[i]),GetRectCenterY(RJ[i]),3)
call tWe('I0C4',GetRectCenterX(RJ[i]),GetRectCenterY(RJ[i]),1)
elseif wi[Ui[i]]==8 then
set Sk[i]=30
set tk[i]=30
set B1e[i]=$E
call tWe('I0C5',GetRectCenterX(RJ[i]),GetRectCenterY(RJ[i]),2)
call tWe('I0C4',GetRectCenterX(RJ[i]),GetRectCenterY(RJ[i]),2)
elseif wi[Ui[i]]==7 then
set Sk[i]=30
set tk[i]=30
set B1e[i]=$C
call tWe('I0C5',GetRectCenterX(RJ[i]),GetRectCenterY(RJ[i]),1)
call tWe('I0C4',GetRectCenterX(RJ[i]),GetRectCenterY(RJ[i]),3)
elseif wi[Ui[i]]==6 then
set Sk[i]=30
set tk[i]=30
set B1e[i]=$A
call tWe('I0C4',GetRectCenterX(RJ[i]),GetRectCenterY(RJ[i]),4)
elseif wi[Ui[i]]==5 then
set Sk[i]=30
set tk[i]=30
set B1e[i]=8
call tWe('I0C4',GetRectCenterX(RJ[i]),GetRectCenterY(RJ[i]),3)
call tWe('I0C3',GetRectCenterX(RJ[i]),GetRectCenterY(RJ[i]),1)
elseif wi[Ui[i]]==4 then
set Sk[i]=30
set tk[i]=30
set B1e[i]=6
call tWe('I0C4',GetRectCenterX(RJ[i]),GetRectCenterY(RJ[i]),2)
call tWe('I0C3',GetRectCenterX(RJ[i]),GetRectCenterY(RJ[i]),2)
elseif wi[Ui[i]]==3 then
set B1e[i]=4
call tWe('I0C4',GetRectCenterX(RJ[i]),GetRectCenterY(RJ[i]),1)
call tWe('I0C3',GetRectCenterX(RJ[i]),GetRectCenterY(RJ[i]),3)
elseif wi[Ui[i]]==2 then
set B1e[i]=2
call tWe('I0C3',GetRectCenterX(RJ[i]),GetRectCenterY(RJ[i]),3)
call tWe('I0C2',GetRectCenterX(RJ[i]),GetRectCenterY(RJ[i]),1)
elseif wi[Ui[i]]==1 then
call tWe('I0C3',GetRectCenterX(RJ[i]),GetRectCenterY(RJ[i]),2)
call tWe('I0C2',GetRectCenterX(RJ[i]),GetRectCenterY(RJ[i]),2)
endif
endfunction
function eRx takes integer i returns integer
local integer tc=0
local integer h=(che[(256)*(6)+i]-$96)/ 2
local integer c=cAe[(1)*(40)+h]
local integer t=S2I(SubString(I2S(c),0,1))
local integer lv=S2I(SubString(I2S(c),1,3))
local integer ts=S2I(SubString(I2S(c),3,4))
if t==1 then
if wi[ui]>=lv and bJ[i]>=ts then
set tc=che[(256)*(6)+i]
endif
elseif t==2 then
if S2I(SubString(yH[N9e[(2)*(6)+Ui[ui]]],5,6))>=lv and bJ[i]>=ts then
set tc=che[(256)*(6)+i]
endif
elseif t==3 then
if S2I(SubString(Zi[Kk[i]],6,7))>=lv and bJ[i]>=ts then
set tc=che[(256)*(6)+i]
endif
elseif t==4 then
if S2I(SubString(yH[N9e[(2)*(6)+Ui[ui]]],0,1))>=lv and bJ[i]>=ts then
set tc=che[(256)*(6)+i]
endif
endif
return tc
endfunction
function eIx takes integer i returns boolean
if Bpe[(2)*(6)+i]==0 then
return false
endif
if wi[i]<Bpe[(2)*(6)+i]/ 2 then
return false
endif
if kJ[i]!=0 and KJ[i]==0 then
return false
endif
call UnitAddAbility(XJ[i],cOe[(zb[i]+1)*($B)+Bpe[(2)*(6)+i]/ 2])
return false
endfunction
function eAx takes integer i returns boolean
local integer s1=S2I(SubString(I2S(Bpe[(4)*(6)+i]),0,1))
local integer s2=S2I(SubString(I2S(Bpe[(4)*(6)+i]),1,2))
if Bpe[(4)*(6)+i]==0 then
return false
endif
if wi[ui]<s2 then
return false
endif
if kJ[i]!=0 and KJ[i]==0 then
return false
endif
if Bpe[(3)*(6)+i]!=0 then
call UnitRemoveAbility(XJ[i],Bpe[(3)*(6)+i])
endif
set Bpe[(3)*(6)+i]=Bye[(i)*(4)+s1]
call UnitAddAbility(XJ[i],Bpe[(3)*(6)+i])
return false
endfunction
function eNx takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local integer id=GetSpellAbilityId()
if id=='A0NT' then
set Bie[i]=0
set N9e[(2)*(6)+i]=exx(i)
if eEx(i)then
if eXx()then
if eVx(i)then
set Bne[(i)*(5)+2]=enx()
set Bae[i]=true
call Qke(p,"|cffffcc00"+yj[6]+I2S(Bne[(i)*(5)+2]),3)
set Bxe[i]=false
set Bne[(i)*(5)+3]=(Bne[(i)*(5)+2]-che[($BB)*(6)+i])*2
call sfe(p,Bne[(i)*(5)+2])
set Yi[i]=Tve(GetPlayerName(p))
set wi[Ui[ui]]=erx(Ui[ui])
call eOx()
if Bpe[(1)*(6)+i]>=1 then
if Bpe[(1)*(6)+i]>wi[Ui[i]]then
call QH()
endif
call TZe(XJ[i],$3E8+500*Bpe[(1)*(6)+i])
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+$640*Bpe[(1)*(6)+i]
call tCe(i,800*Bpe[(1)*(6)+i],1)
endif
call PauseUnit(QI[i],false)
call ShowUnit(QI[i],true)
call ShowUnit(XJ[i],true)
if(che[(256)*(6)+i]-$96)/ 2>=17 then
set GJ[i]=eRx(i)
call ybe(i)
endif
set B4e[(i-1)*(23)+19]=19
set B5e[(i-1)*(23)+19]=rA
set B6e[(i-1)*(23)+19]="
"+oA
set Uk[i]=8
call eIx(i)
call eAx(i)
if S2I(SubString(Zi[i-1],1,2))==1 then
set eB[i]=0
set vB[i]="war3mapImported\\DHCN_"+I2S(Bne[(i)*(5)+5])+".mdl"
endif
set Boe[i]=""
call RemoveUnit(u)
set Bre[i]=null
call PauseUnit(XJ[i],false)
if p==GetLocalPlayer()then
call ClearSelection()
call ResetToGameCamera(0)
endif
else
call Qke(p,"|cffffcc00"+yj[7],3)
set Boe[i]=""
endif
else
call Qke(p,"|cffffcc00"+yj[7],3)
set Boe[i]=""
endif
else
call Qke(p,"|cffffcc00"+yj[7],3)
set Boe[i]=""
endif
else
if Bie[i]<6 then
set Boe[i]=Boe[i]+BlzGetAbilityTooltip(id,0)
set Bie[i]=Bie[i]+1
if p==GetLocalPlayer()then
call ClearTextMessages()
call Qke(p,"|cffffcc00"+"Mật khẩu: |r"+Boe[i],99)
endif
endif
endif
set u=null
set p=null
return false
endfunction
function ebx takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())=='e00A' and eNx()
endfunction
function eBx takes nothing returns nothing
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
if Bxe[i]and Bre[i]==null then
call PauseUnit(XJ[i],true)
set Bre[i]=CreateUnit(p,'e00A',GetUnitX(XJ[i]),GetUnitY(XJ[i]),270)
if p==GetLocalPlayer()then
call ClearSelection()
call SelectUnit(Bre[i],true)
call SetCameraTargetController(Bre[i],0,0,true)
endif
elseif Bre[i]!=null then
if p==GetLocalPlayer()then
call ClearSelection()
call SelectUnit(Bre[i],true)
endif
endif
set p=null
endfunction
function ecx takes integer i returns nothing
set Bxe[i]=true
set Kk[i]=i-1
set Pk[i]=true
set Bpe[(2)*(6)+i]=che[(257)*(6)+i]
set Bpe[(4)*(6)+i]=che[(258)*(6)+i]
endfunction
function eCx takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterPlayerEvent(t,Player(0),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(1),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(2),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(3),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(4),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(5),EVENT_PLAYER_END_CINEMATIC)
call TriggerAddAction(t,function eBx)
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function ebx))
set t=null
endfunction
function edx takes nothing returns boolean
local integer CGe=Qce()
set hq[CGe]=hq[CGe]-1
if hq[CGe]<=0 or spe(Gq[CGe])or not(GetUnitAbilityLevel((Gq[CGe]),(xa))>0)then
call QDe()
call UnitRemoveAbility(Gq[CGe],xa)
call Tje(Gq[CGe],xx,-Hq[CGe])
set Gq[CGe]=null
call Pce(CGe)
endif
return false
endfunction
function eDx takes unit u,real c,real r returns boolean
local integer CGe=PBe()
local real x=0
local real y=0
local unit n=null
set Gq[CGe]=u
set hq[CGe]=R2I(5/ .03125)
set Hq[CGe]=c
call tKe(Gq[CGe],xa)
call Tje(Gq[CGe],xx,Hq[CGe])
call QIe(CGe,.03125,true,function edx)
set Uv=GetOwningPlayer(Gq[CGe])
set x=GetUnitX(Gq[CGe])
set y=GetUnitY(Gq[CGe])
call GroupEnumUnitsInRange(sv,x,y,480,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Uv)and not spe(n)and not tOe(n)then
call yLe(Gq[CGe],n,r,2.)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Human\\Feedback\\SpellBreakerAttack.mdl"),(n),"chest"))
if GetRandomReal(0,'d')<=r and not(IsUnitType((n),UNIT_TYPE_TAUREN))and not(GetUnitAbilityLevel((n),('A0NA'))>0)then
call s5e(n,$FA,.5,soe(x,y,GetUnitX(n),GetUnitY(n)),false,false)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
return false
endfunction
function efx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real r1=ude(u,.2,.03,ea)
local real r2=ude(u,40,5,ea)
call eDx(u,r1,r2)
set u=null
return false
endfunction
function eFx takes nothing returns boolean
return GetSpellAbilityId()==ea and efx()
endfunction
function egx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function eFx))
set t=null
endfunction
function eGx takes nothing returns boolean
local integer CGe=Qce()
call UnitRemoveBuffs(Kq[CGe],false,true)
set mq[CGe]=mq[CGe]-1
if mq[CGe]<=0 or spe(Kq[CGe])then
call QDe()
call UnitRemoveAbility(Kq[CGe],ra)
call UnitRemoveAbility(Kq[CGe],ia)
call BlzSetUnitAbilityCooldown(Kq[CGe],'A04V',GetUnitAbilityLevel(Kq[CGe],'A04V')-1,$A)
call Tje(Kq[CGe],xx,-lq[CGe])
call Tje(Kq[CGe],5762,-Lq[CGe])
set Kq[CGe]=null
call Pbe(CGe)
endif
return false
endfunction
function ehx takes nothing returns boolean
local integer CGe=PNe()
set Kq[CGe]=GetTriggerUnit()
set lq[CGe]=ude(Kq[CGe],.2,.05,'A04V')
set Lq[CGe]=I2R(R2I(ude(Kq[CGe],.15,.03,oa)*TKe(Kq[CGe],5762)))
set mq[CGe]=R2I(15./ .03125)
call BlzSetUnitAbilityCooldown(Kq[CGe],'A04V',GetUnitAbilityLevel(Kq[CGe],'A04V')-1,.5)
call tKe(Kq[CGe],ra)
call tKe(Kq[CGe],ia)
call Tje(Kq[CGe],xx,lq[CGe])
call Tje(Kq[CGe],5762,Lq[CGe])
call QIe(CGe,.03125,true,function eGx)
return false
endfunction
function eHx takes nothing returns boolean
return GetSpellAbilityId()==oa and ehx()
endfunction
function ejx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function eHx))
set t=null
endfunction
function eJx takes nothing returns boolean
local integer CGe=Qce()
call uee(sq[CGe],Sq[CGe],false,0,Qq[CGe],'B007')
set qq[CGe]=qq[CGe]-1
if qq[CGe]<=0 or spe(Sq[CGe])or spe(sq[CGe])then
call QDe()
set sq[CGe]=null
set Sq[CGe]=null
call PAe(CGe)
endif
return false
endfunction
function ekx takes unit u,unit v,real d returns nothing
local integer CGe=PIe()
set sq[CGe]=u
set Sq[CGe]=v
set Qq[CGe]=d
set qq[CGe]=3
call QIe(CGe,1.,true,function eJx)
endfunction
function eKx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=1.
set yq[CGe]=(((yq[CGe])*1.)+((Va)*1.)*Cos(((vQ[CGe])*1.)*bj_DEGTORAD))
set Yq[CGe]=(((Yq[CGe])*1.)+((Va)*1.)*Sin(((vQ[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(wq[CGe],yq[CGe],Yq[CGe],Zq[CGe])
call GroupEnumUnitsInRange(sv,yq[CGe],Yq[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,eQ[CGe])then
call yLe(Uq[CGe],n,70,.5)
call GroupAddUnit(eQ[CGe],n)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\NightElf\\CorrosiveBreath\\CorrosiveBreathMissile.mdl"),(n),"chest"))
call uee(Uq[CGe],n,false,zq[CGe],zq[CGe],THe(Uq[CGe]))
call ekx(Uq[CGe],n,zq[CGe])
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set Wq[CGe]=Wq[CGe]-1
if Wq[CGe]<=0 then
call QDe()
call Qre(wq[CGe])
call Qne(eQ[CGe])
set eQ[CGe]=null
set wq[CGe]=null
set Uq[CGe]=null
call PRe(CGe)
endif
return false
endfunction
function elx takes unit u,real d,unit v returns nothing
local integer CGe=POe()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set Uq[CGe]=u
set vQ[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set yq[CGe]=(((x)*1.)+((50)*1.)*Cos(((vQ[CGe])*1.)*bj_DEGTORAD))
set Yq[CGe]=(((y)*1.)+((50)*1.)*Sin(((vQ[CGe])*1.)*bj_DEGTORAD))
set zq[CGe]=d
set Zq[CGe]=sxe(yq[CGe],Yq[CGe])+'d'
set wq[CGe]=AddSpecialEffect("Abilities\\Spells\\NightElf\\CorrosiveBreath\\CorrosiveBreathMissile.mdl",yq[CGe],Yq[CGe])
set Wq[CGe]=R2I(aa/ Va)
set eQ[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((wq[CGe]),((vQ[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((wq[CGe]),((2.)*1.))
call BlzSetSpecialEffectZ(wq[CGe],Zq[CGe])
call QIe(CGe,.03125,true,function eKx)
endfunction
function eLx takes nothing returns boolean
local integer CGe=Qce()
call uee(nQ[CGe],VQ[CGe],true,0,aQ[CGe],'B007')
set iQ[CGe]=iQ[CGe]-1
if iQ[CGe]<=0 or spe(VQ[CGe])or spe(nQ[CGe])then
call QDe()
set nQ[CGe]=null
set VQ[CGe]=null
call PXe(CGe)
endif
return false
endfunction
function emx takes unit u,unit v,real d returns nothing
local integer CGe=PEe()
set nQ[CGe]=u
set VQ[CGe]=v
set aQ[CGe]=d
set iQ[CGe]=1
call QIe(CGe,1.,true,function eLx)
endfunction
function eMx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=1.
set NQ[CGe]=(((NQ[CGe])*1.)+((Xa)*1.)*Cos(((CQ[CGe])*1.)*bj_DEGTORAD))
set bQ[CGe]=(((bQ[CGe])*1.)+((Xa)*1.)*Sin(((CQ[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(IQ[CGe],NQ[CGe],bQ[CGe],cQ[CGe])
call GroupEnumUnitsInRange(sv,NQ[CGe],bQ[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,dQ[CGe])then
call yke(RQ[CGe],n,'d',2.5)
call GroupAddUnit(dQ[CGe],n)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\CryptFiendMissile\\CryptFiendMissile.mdl"),(n),"chest"))
call uee(RQ[CGe],n,true,BQ[CGe],BQ[CGe],THe(RQ[CGe]))
call emx(RQ[CGe],n,BQ[CGe])
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set AQ[CGe]=AQ[CGe]-1
if AQ[CGe]<=0 then
call QDe()
call Qre(IQ[CGe])
call Qne(dQ[CGe])
set dQ[CGe]=null
set IQ[CGe]=null
set RQ[CGe]=null
call PVe(CGe)
endif
return false
endfunction
function epx takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=Pne()
set RQ[CGe]=u
set CQ[CGe]=a
set NQ[CGe]=x
set bQ[CGe]=y
set BQ[CGe]=d
set cQ[CGe]=sxe(NQ[CGe],bQ[CGe])+'d'
set IQ[CGe]=AddSpecialEffect("Abilities\\Weapons\\CryptFiendMissile\\CryptFiendMissile.mdl",NQ[CGe],bQ[CGe])
set AQ[CGe]=R2I(Ea/ Xa)
set dQ[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((IQ[CGe]),((CQ[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((IQ[CGe]),((1.5)*1.))
call BlzSetSpecialEffectZ(IQ[CGe],cQ[CGe])
call QIe(CGe,.03125,true,function eMx)
endfunction
function ePx takes nothing returns boolean
local integer CGe=Qce()
local real x0=GetUnitX(gQ[CGe])
local real y0=GetUnitY(gQ[CGe])
local real x=0
local real y=0
local integer i=1
local integer QZe=2+hQ[CGe]*2
loop
exitwhen i>QZe
set x=(((x0)*1.)+(('d')*1.)*Cos(((360/ QZe*i)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+(('d')*1.)*Sin(((360/ QZe*i)*1.)*bj_DEGTORAD))
call epx(gQ[CGe],GQ[CGe],x,y,360/ QZe*i)
set i=i+1
endloop
set hQ[CGe]=hQ[CGe]+1
if hQ[CGe]>=8 or spe(gQ[CGe])then
call QDe()
set gQ[CGe]=null
call Pae(CGe)
endif
return false
endfunction
function eqx takes unit u,real d returns nothing
local integer CGe=Pie()
set gQ[CGe]=u
set hQ[CGe]=1
set GQ[CGe]=d
call QIe(CGe,.5,true,function ePx)
endfunction
function eQx takes nothing returns boolean
local integer CGe=Qce()
local real x=(((LQ[CGe])*1.)+((pQ[CGe])*1.)*Cos(((MQ[CGe])*1.)*bj_DEGTORAD))
local real y=(((mQ[CGe])*1.)+((pQ[CGe])*1.)*Sin(((MQ[CGe])*1.)*bj_DEGTORAD))
local unit n=null
if kQ[CGe]>27 then
set pQ[CGe]=pQ[CGe]+30
else
set pQ[CGe]=pQ[CGe]-30
endif
set MQ[CGe]=MQ[CGe]+45
call Qre(AddSpecialEffect(("war3mapImported\\NDD_effect3.mdl"),((x)*1.),((y)*1.)))
call GroupEnumUnitsInRange(sv,x,y,$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yle(KQ[CGe],n,'d',1.5)
call uee(KQ[CGe],n,false,lQ[CGe],lQ[CGe],THe(KQ[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set kQ[CGe]=kQ[CGe]-1
if kQ[CGe]<=0 or spe(KQ[CGe])then
call QDe()
set KQ[CGe]=null
call Pre(CGe)
endif
return false
endfunction
function esx takes unit u,real d returns nothing
local integer CGe=Poe()
set KQ[CGe]=u
set lQ[CGe]=d
set LQ[CGe]=GetUnitX(u)
set mQ[CGe]=GetUnitY(u)
set kQ[CGe]=54
set MQ[CGe]=270
set pQ[CGe]='d'
call QIe(CGe,.16,true,function eQx)
endfunction
function eSx takes nothing returns boolean
local integer CGe=Qce()
if(GetUnitAbilityLevel((uQ[CGe]),(DI))>0)and TQe(uQ[CGe])<=30. then
call uee(tQ[CGe],uQ[CGe],false,0,SQ[CGe]*(1.07+.03*BUe[(TQ[CGe])*(20)+4]),'B007')
else
call uee(tQ[CGe],uQ[CGe],false,0,SQ[CGe],'B007')
endif
set sQ[CGe]=sQ[CGe]-1
if sQ[CGe]<=0 or spe(uQ[CGe])or spe(tQ[CGe])then
call QDe()
set tQ[CGe]=null
set uQ[CGe]=null
call Pxe(CGe)
endif
return false
endfunction
function etx takes unit u,unit v,real d returns nothing
local integer CGe=Pee()
set tQ[CGe]=u
set uQ[CGe]=v
set SQ[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set sQ[CGe]=3
set TQ[CGe]=(GetPlayerId(GetOwningPlayer((tQ[CGe])))+1)
call QIe(CGe,1.,true,function eSx)
endfunction
function eTx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Os[CGe]=Os[CGe]+Sin(xs[CGe]*2.4*bj_DEGTORAD)
set YQ[CGe]=(((YQ[CGe])*1.)+((Ra)*1.)*Cos(((Os[CGe])*1.)*bj_DEGTORAD))
set zQ[CGe]=(((zQ[CGe])*1.)+((Ra)*1.)*Sin(((Os[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition((os[CGe]),((YQ[CGe])*1.),((zQ[CGe])*1.),((is[CGe])*1.))
call BlzSetSpecialEffectYaw((os[CGe]),((Os[CGe])*1.)*bj_DEGTORAD)
if ns[CGe]<$A then
call GroupEnumUnitsInRange(sv,YQ[CGe],zQ[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Vs[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Es[CGe])then
call yLe(yQ[CGe],n,es[CGe],1.)
call GroupAddUnit(Es[CGe],n)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\GreenDragonMissile\\GreenDragonMissile.mdl"),(n),"chest"))
call uee(yQ[CGe],n,false,ZQ[CGe],vs[CGe],THe(yQ[CGe]))
call etx(yQ[CGe],n,vs[CGe])
set ns[CGe]=ns[CGe]+1
if ns[CGe]>=$A then
call GroupClear(sv)
set xs[CGe]=0
endif
endif
call GroupRemoveUnit(sv,n)
endloop
else
set xs[CGe]=0
endif
set n=null
set xs[CGe]=xs[CGe]-1
if xs[CGe]<=0 then
call QDe()
call Qre(os[CGe])
call Qne(Es[CGe])
set Es[CGe]=null
set os[CGe]=null
set yQ[CGe]=null
set Vs[CGe]=null
call Pve(CGe)
endif
return false
endfunction
function eux takes unit u,real d1,real d2,real r,real a returns nothing
local integer CGe=p9e()
set yQ[CGe]=u
set Os[CGe]=a-30
set YQ[CGe]=(((GetUnitX(u))*1.)+((80)*1.)*Cos(((Os[CGe])*1.)*bj_DEGTORAD))
set zQ[CGe]=(((GetUnitY(u))*1.)+((80)*1.)*Sin(((Os[CGe])*1.)*bj_DEGTORAD))
set ZQ[CGe]=d1
set vs[CGe]=d2
set es[CGe]=r
set os[CGe]=AddSpecialEffect("war3mapImported\\NDD_bachdocxuyentameffectx.mdl",YQ[CGe],zQ[CGe])
set xs[CGe]=R2I(Oa/ Ra)
set is[CGe]=sxe(YQ[CGe],zQ[CGe])+'d'
set ns[CGe]=0
set Vs[CGe]=GetOwningPlayer(yQ[CGe])
set Es[CGe]=CreateGroup()
set Xs[CGe]=GetPlayerId(Vs[CGe])+1
call BlzSetSpecialEffectScale((os[CGe]),((1.65)*1.))
call BlzSetSpecialEffectZ(os[CGe],is[CGe])
call BlzSetSpecialEffectYaw((os[CGe]),((Os[CGe])*1.)*bj_DEGTORAD)
call QIe(CGe,.03125,true,function eTx)
endfunction
function eUx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,1.,.3,Ia))
local real d2=uce(u,ude(u,$9C4,750,Ia),'B007')
local real r=ude(u,20,3,Ia)
local real a=soe(GetUnitX(u),GetUnitY(u),GetSpellTargetX(),GetSpellTargetY())
call eux(u,d1,d2,r,a)
set u=null
return false
endfunction
function ewx takes nothing returns boolean
return GetSpellAbilityId()==Ia and eUx()
endfunction
function eWx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function ewx))
set t=null
endfunction
function eyx takes nothing returns boolean
local integer CGe=Qce()
set Cs[CGe]=Cs[CGe]-1
if Cs[CGe]<=0 or not BVe[ds[CGe]]then
call QDe()
call UnitRemoveAbility(Ns[CGe],Aa)
call Tqe(Ns[CGe],-bs[CGe])
call TLe(Ns[CGe],-Bs[CGe])
call TZe(Ns[CGe],-cs[CGe])
set BVe[ds[CGe]]=false
set Ns[CGe]=null
call p8e(CGe)
endif
return false
endfunction
function eYx takes unit u,integer i,integer r returns nothing
local integer CGe=p7e()
set Ns[CGe]=u
set Cs[CGe]=R2I(600/ .03125)
set bs[CGe]=$F+5*r
set Bs[CGe]=$96+50*r
set cs[CGe]=$3E8*r
set ds[CGe]=i
call tKe(Ns[CGe],Aa)
call Tqe(Ns[CGe],bs[CGe])
call TLe(Ns[CGe],Bs[CGe])
call TZe(Ns[CGe],cs[CGe])
set BVe[i]=true
call QIe(CGe,.03125,true,function eyx)
endfunction
function ezx takes unit u,player p,integer i,integer id returns boolean
local integer r=0
if id=='I0C1' then
set r=1
elseif id=='I0C2' then
set r=2
elseif id=='I0C3' then
set r=3
elseif id=='I0C4' then
set r=4
elseif id=='I0C5' then
set r=5
else
return false
endif
call eYx(XJ[i],i,r)
set u=null
return false
endfunction
function eZx takes unit u,player p,integer i,integer id returns boolean
if GetUnitTypeId(u)=='H00K' then
call Qke(p,"|cffff0000"+"Chỉ có thể sử dụng Bách Luyện Hoàn trong hành trang nhân vật",3)
call UnitAddItemById(u,id)
else
if Ba[i]>=5 then
call Qke(p,"|cffffcc00"+"Mỗi trận chỉ có thể sử dụng 5 Bách Luyện Hoàn !",5)
else
if not BVe[i]and not(GetUnitAbilityLevel((XJ[i]),(Aa))>0)then
set Ba[i]=Ba[i]+1
call ezx(u,p,i,id)
call Qke(p,"|cffff0000"+"Sử dụng Bách Luyện Hoàn nhận được hỗ trợ trong 10 phút",3)
else
call Qke(p,"|cffff0000"+"Hiệu quả của Bách Luyện Hoàn đã sử dụng vẫn chưa kết thúc !",3)
call UnitAddItemById(u,id)
endif
endif
endif
return false
endfunction
function e_x takes unit u,integer i,integer ch,integer a1,integer a2,integer a3,integer b returns boolean
local item t1=Q0e(u,a1)
local item t2=Q0e(u,a2)
local item t3=Q0e(u,a3)
if t1!=null and t2!=null and t3!=null and the(i,ch,0)and tHe(i,b,0)then
call RemoveItem(t1)
call RemoveItem(t2)
call RemoveItem(t3)
call tHe(i,b,De)
set t1=null
set t2=null
set t3=null
return true
endif
return false
endfunction
function e0x takes unit u,player p,integer i,integer id returns boolean
if id=='I0C6' then
if e_x(u,i,0,cj[33],cj[34],cj[$E],5*sH)then
call UnitAddItemById(OJ[i],'I0C1')
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã chế tạo Bách Luyện Hoàn, vật phẩm được chuyển về rương !",5)
else
call Qke(p,"|cffffcc00"+"Không đủ điều kiện !",5)
endif
elseif id=='I0C7' then
if e_x(u,i,0,cj[34],cj[35],cj[$F],$A*sH)then
call UnitAddItemById(OJ[i],'I0C2')
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã chế tạo Bách Luyện Hoàn, vật phẩm được chuyển về rương !",5)
else
call Qke(p,"|cffffcc00"+"Không đủ điều kiện !",5)
endif
elseif id=='I0C8' then
if e_x(u,i,$4E20,cj[35],cj[36],cj[16],$F*sH)then
call UnitAddItemById(OJ[i],'I0C3')
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã chế tạo Bách Luyện Hoàn, vật phẩm được chuyển về rương !",5)
else
call Qke(p,"|cffffcc00"+"Không đủ điều kiện !",5)
endif
elseif id=='I0C9' then
if e_x(u,i,$EA60,cj[36],cj[37],cj[17],20*sH)then
call UnitAddItemById(OJ[i],'I0C4')
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã chế tạo Bách Luyện Hoàn, vật phẩm được chuyển về rương !",5)
else
call Qke(p,"|cffffcc00"+"Không đủ điều kiện !",5)
endif
elseif id=='I0CA' then
if e_x(u,i,80000,cj[37],cj[38],cj[18],25*sH)then
call UnitAddItemById(OJ[i],'I0C5')
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã chế tạo Bách Luyện Hoàn, vật phẩm được chuyển về rương !",5)
else
call Qke(p,"|cffffcc00"+"Không đủ điều kiện !",5)
endif
endif
return false
endfunction
function e1x takes nothing returns boolean
local integer CGe=Qce()
if bJ[gs[CGe]]>0 then
call QDe()
call UnitRemoveAbility(Gs[CGe],'A0NI')
call u_e(Gs[CGe],-47)
call Tqe(Gs[CGe],-20)
call TZe(Gs[CGe],-6000)
call T3e(Gs[CGe],-$5DC)
call Qre(Na[gs[CGe]])
set Na[gs[CGe]]=null
set Gs[CGe]=null
call p6e(CGe)
endif
return false
endfunction
function e2x takes unit u,integer i returns nothing
local integer CGe=p5e()
set Gs[CGe]=u
set gs[CGe]=i
set Na[i]=AddSpecialEffectTarget("war3mapImported\\Effect_aura6.mdx",u,"origin")
call tKe(Gs[CGe],'A0NI')
call u_e(Gs[CGe],47)
call Tqe(Gs[CGe],20)
call TZe(Gs[CGe],6000)
call T3e(Gs[CGe],$5DC)
call QIe(CGe,.03125,true,function e1x)
endfunction
function e3x takes unit u,player p,integer i returns nothing
if bJ[i]==0 and not(GetUnitAbilityLevel((XJ[i]),('A0NI'))>0)then
call Qke(p,"|cffffcc00"+"Bạn đã nhận được chúc phúc tân thủ !",5)
call e2x(XJ[i],i)
endif
endfunction
function e4x takes nothing returns boolean
local integer CGe=Qce()
set Js[CGe]=Js[CGe]-1
if Js[CGe]<=0 then
call QDe()
call Tje(ks[CGe],sx,-1.)
set ba[Ks[CGe]]=0
call UnitRemoveAbility(ks[CGe],'A0Z6')
set ks[CGe]=null
call p4e(CGe)
endif
return false
endfunction
function e5x takes unit u,integer i returns boolean
local integer CGe=p3e()
set ks[CGe]=u
set Js[CGe]=R2I(480/ .03125)
set Ks[CGe]=i
call tKe(ks[CGe],'A0Z6')
call Tje(u,sx,1.)
set ba[Ks[CGe]]=1
call QIe(CGe,.03125,true,function e4x)
return false
endfunction
function e6x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Qs[CGe]=(((Qs[CGe])*1.)+((Ca)*1.)*Cos(((Us[CGe])*1.)*bj_DEGTORAD))
set Ss[CGe]=(((Ss[CGe])*1.)+((Ca)*1.)*Sin(((Us[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(Ps[CGe],Qs[CGe],Ss[CGe],us[CGe])
call GroupEnumUnitsInRange(sv,Qs[CGe],Ss[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,ws[CGe])then
call yHe(ps[CGe],n,'d',1.)
call GroupAddUnit(ws[CGe],n)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TLBD_effect3.mdl"),(n),"chest"))
call uee(ps[CGe],n,true,Ts[CGe],Ts[CGe],THe(ps[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set qs[CGe]=qs[CGe]-1
if qs[CGe]<=0 then
call QDe()
call Qre(Ps[CGe])
call Qne(ws[CGe])
set ws[CGe]=null
set Ps[CGe]=null
set ps[CGe]=null
call p2e(CGe)
endif
return false
endfunction
function e7x takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=p1e()
set ps[CGe]=u
set Us[CGe]=a
set Qs[CGe]=x
set Ss[CGe]=y
set qs[CGe]=R2I(ca/ Ca)
set Ps[CGe]=AddSpecialEffect("war3mapImported\\TLBD_thietky2.mdl",Qs[CGe],Ss[CGe])
set us[CGe]=sxe(Qs[CGe],Ss[CGe])
set Ts[CGe]=d
set ws[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((Ps[CGe]),((Us[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((Ps[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(Ps[CGe],us[CGe])
call QIe(CGe,.03125,true,function e6x)
endfunction
function e8x takes nothing returns boolean
local integer CGe=Qce()
local integer r=GetRandomInt(1,$C)
local real x=(((vS[CGe])*1.)+((r*'d')*1.)*Cos(((oS[CGe]+90)*1.)*bj_DEGTORAD))
local real y=(((eS[CGe])*1.)+((r*'d')*1.)*Sin(((oS[CGe]+90)*1.)*bj_DEGTORAD))
call e7x(zs[CGe],xS[CGe],x,y,oS[CGe])
set Zs[CGe]=Zs[CGe]-1
if Zs[CGe]<=0 then
call QDe()
set zs[CGe]=null
call p0e(CGe)
endif
return false
endfunction
function e9x takes unit u,real d returns nothing
local integer CGe=p_e()
local real a=GetUnitFacing(u)
local real x0=GetUnitX(u)
local real y0=GetUnitY(u)
local real x=(((x0)*1.)+((400)*1.)*Cos(((a+$B4)*1.)*bj_DEGTORAD))
local real y=(((y0)*1.)+((400)*1.)*Sin(((a+$B4)*1.)*bj_DEGTORAD))
local unit n=null
local real x2=0
local real y2=0
set zs[CGe]=u
set xS[CGe]=d
set vS[CGe]=(((x)*1.)+((700)*1.)*Cos(((a-90)*1.)*bj_DEGTORAD))
set eS[CGe]=(((y)*1.)+((700)*1.)*Sin(((a-90)*1.)*bj_DEGTORAD))
set oS[CGe]=a
set Zs[CGe]=40
call GroupEnumUnitsInRange(sv,x,y,$3E8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yHe(u,n,'d',1.)
set x2=GetUnitX(n)
set y2=GetUnitY(n)
set d=sre(x0,y0,x2,y2)
if d>'d' then
call s5e(n,d-'d',.5,soe(x2,y2,x0,y0),false,false)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
call QIe(CGe,.1,true,function e8x)
endfunction
function xvx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set nS[CGe]=nS[CGe]-1
if nS[CGe]<=0 then
call QDe()
call GroupEnumUnitsInRange(sv,XS[CGe],OS[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yLe(ES[CGe],n,50,2.)
call uee(ES[CGe],n,true,VS[CGe],VS[CGe],THe(ES[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set ES[CGe]=null
call pZe(CGe)
endif
return false
endfunction
function xex takes unit u,real d,real x,real y returns nothing
local integer CGe=pze()
set ES[CGe]=u
set VS[CGe]=d
set XS[CGe]=x
set OS[CGe]=y
set nS[CGe]=1
call QIe(CGe,.5,true,function xvx)
endfunction
function xxx takes nothing returns boolean
local integer CGe=Qce()
local real x0=GetUnitX(bS[CGe])
local real y0=GetUnitY(bS[CGe])
local real x=GetRandomReal(x0-500,x0+500)
local real y=GetRandomReal(y0-500,y0+500)
call Qre(AddSpecialEffect(("Units\\Demon\\Infernal\\InfernalBirth.mdl"),((x)*1.),((y)*1.)))
call xex(bS[CGe],BS[CGe],x,y)
set NS[CGe]=NS[CGe]-1
if NS[CGe]<=0 or spe(bS[CGe])then
call QDe()
set bS[CGe]=null
call pYe(CGe)
endif
return false
endfunction
function xox takes unit u,real d returns nothing
local integer CGe=pye()
set bS[CGe]=u
set BS[CGe]=d
set NS[CGe]=18
call QIe(CGe,.3,true,function xxx)
endfunction
function xrx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set GS[CGe]=(((GS[CGe])*1.)+((Da)*1.)*Cos(((KS[CGe])*1.)*bj_DEGTORAD))
set hS[CGe]=(((hS[CGe])*1.)+((Da)*1.)*Sin(((KS[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(FS[CGe],GS[CGe],hS[CGe],kS[CGe])
if lS[CGe]<7 then
call GroupEnumUnitsInRange(sv,GS[CGe],hS[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,fS[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,LS[CGe])then
call GroupAddUnit(LS[CGe],n)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl"),(n),"chest"))
call Qre(AddSpecialEffect(("war3mapImported\\NMK_tranphai1111.mdl"),((GetUnitX(n))*1.),((GetUnitY(n))*1.)))
call uee(DS[CGe],n,true,HS[CGe],jS[CGe],THe(DS[CGe]))
call yke(DS[CGe],n,JS[CGe],2.)
set lS[CGe]=lS[CGe]+1
if lS[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set gS[CGe]=gS[CGe]-1
if gS[CGe]<=0 then
call QDe()
call Qre(FS[CGe])
call Qne(LS[CGe])
set LS[CGe]=null
set FS[CGe]=null
set DS[CGe]=null
set fS[CGe]=null
call pWe(CGe)
endif
return false
endfunction
function xix takes unit u,real d1,real d2,real r,real x,real y,real a returns nothing
local integer CGe=pwe()
set DS[CGe]=u
set KS[CGe]=a
set GS[CGe]=(((x)*1.)+((60)*1.)*Cos(((KS[CGe])*1.)*bj_DEGTORAD))
set hS[CGe]=(((y)*1.)+((60)*1.)*Sin(((KS[CGe])*1.)*bj_DEGTORAD))
set gS[CGe]=R2I(Fa/ Da)
set kS[CGe]=sxe(GS[CGe],hS[CGe])+70
set HS[CGe]=d1
set jS[CGe]=d2
set JS[CGe]=r
set fS[CGe]=GetOwningPlayer(u)
set LS[CGe]=CreateGroup()
set lS[CGe]=0
set FS[CGe]=AddSpecialEffect("war3mapImported\\TYD_vudalehoa.mdl",GS[CGe],hS[CGe])
call BlzSetSpecialEffectYaw((FS[CGe]),((KS[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((FS[CGe]),((.8)*1.))
call BlzSetSpecialEffectZ(FS[CGe],kS[CGe])
call QIe(CGe,.03125,true,function xrx)
endfunction
function xax takes nothing returns boolean
local integer CGe=Qce()
local integer rd=GetRandomInt(-1,1)
call xix(PS[CGe],SS[CGe],tS[CGe],TS[CGe],QS[CGe],sS[CGe],uS[CGe]+8*rd)
set qS[CGe]=qS[CGe]-1
if qS[CGe]<=0 then
call QDe()
set PS[CGe]=null
call pUe(CGe)
endif
return false
endfunction
function xnx takes unit u,real d,unit v,real r returns nothing
local integer CGe=pue()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set PS[CGe]=u
set uS[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set QS[CGe]=(((x)*1.)+((50)*1.)*Cos(((uS[CGe])*1.)*bj_DEGTORAD))
set sS[CGe]=(((y)*1.)+((50)*1.)*Sin(((uS[CGe])*1.)*bj_DEGTORAD))
set qS[CGe]=2
set SS[CGe]=uBe(u,ude(u,5.,1.5,da))
set tS[CGe]=uce(u,ude(u,5000,$5DC,da),'B008')
set TS[CGe]=ude(u,20,2,da)
set SS[CGe]=SS[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A07R'))
set tS[CGe]=tS[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A07R'))
call Qre(AddSpecialEffect(("war3mapImported\\NMK_tranphai3.mdl"),((x)*1.),((y)*1.)))
if r>0 then
set SS[CGe]=d
set tS[CGe]=d
set TS[CGe]=r
endif
call xix(PS[CGe],SS[CGe],tS[CGe],TS[CGe],QS[CGe],sS[CGe],uS[CGe])
call QIe(CGe,.1667,true,function xax)
endfunction
function xVx takes nothing returns boolean
local integer CGe=Qce()
set zS[CGe]=zS[CGe]-1
if zS[CGe]<=0 or spe(yS[CGe])or not(GetUnitAbilityLevel((yS[CGe]),(Ga))>0)then
call QDe()
call UnitRemoveAbility(yS[CGe],Ga)
call Tje(yS[CGe],bx,-YS[CGe])
set yS[CGe]=null
call pTe(CGe)
endif
return false
endfunction
function xEx takes unit u,real r returns nothing
local integer CGe=pte()
set yS[CGe]=u
set YS[CGe]=r
set zS[CGe]=R2I(30/ .03125)
call tKe(yS[CGe],Ga)
call Tje(yS[CGe],bx,YS[CGe])
call QIe(CGe,.03125,true,function xVx)
endfunction
function xXx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real r=ude(u,2.,.5,ga)
call xEx(u,r)
set u=null
return false
endfunction
function xOx takes nothing returns boolean
return GetSpellAbilityId()==ga and xXx()
endfunction
function xRx takes nothing returns boolean
local unit u=GetTriggerUnit()
local unit v=GetAttacker()
local real d1=uBe(u,ude(u,3.,.9,ga))*(1.+TKe(u,968))
local real d2=uce(u,ude(u,$BB8,900,ga),'B008')*(1.+TKe(u,968))
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl"),(v),"chest"))
call uee(u,v,true,d1,d2,THe(u))
set v=null
set u=null
return false
endfunction
function xIx takes nothing returns boolean
return(GetUnitAbilityLevel((GetTriggerUnit()),(Ga))>0)and xRx()
endfunction
function xAx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function xOx))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function xIx))
set t=null
endfunction
function xNx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Vt[CGe]=(((Vt[CGe])*1.)+((Ha)*1.)*Cos(((At[CGe])*1.)*bj_DEGTORAD))
set Et[CGe]=(((Et[CGe])*1.)+((Ha)*1.)*Sin(((At[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(rt[CGe],Vt[CGe],Et[CGe],It[CGe])
if Bt[CGe]<7 then
call GroupEnumUnitsInRange(sv,Vt[CGe],Et[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,ot[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Nt[CGe])then
call yke(xt[CGe],n,Rt[CGe],2.)
call GroupAddUnit(Nt[CGe],n)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TYK_bangtamtientu2.mdl"),(n),"chest"))
call uee(xt[CGe],n,true,Xt[CGe],Ot[CGe],THe(xt[CGe]))
set Bt[CGe]=Bt[CGe]+1
if Bt[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set at[CGe]=at[CGe]-1
if at[CGe]<=0 then
call QDe()
call Qre(rt[CGe])
call Qne(Nt[CGe])
set Nt[CGe]=null
set rt[CGe]=null
set xt[CGe]=null
set ot[CGe]=null
call pSe(CGe)
endif
return false
endfunction
function xbx takes unit u,real x,real y,real d1,real d2,real r,real a returns nothing
local integer CGe=pse()
set xt[CGe]=u
set Vt[CGe]=(((x)*1.)+((80)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set Et[CGe]=(((y)*1.)+((80)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set At[CGe]=a
set Xt[CGe]=d1
set Ot[CGe]=d2
set Rt[CGe]=r
set It[CGe]=sxe(Vt[CGe],Et[CGe])-30
set rt[CGe]=AddSpecialEffect("war3mapImported\\TYK_bangtamtientu2.mdl",Vt[CGe],Et[CGe])
set at[CGe]=R2I(ha/ Ha)
set Nt[CGe]=CreateGroup()
set ot[CGe]=GetOwningPlayer(xt[CGe])
set Bt[CGe]=0
call BlzSetSpecialEffectYaw((rt[CGe]),((At[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((rt[CGe]),((3.)*1.))
call BlzSetSpecialEffectZ(rt[CGe],It[CGe])
call QIe(CGe,.03125,true,function xNx)
endfunction
function xBx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Ht[CGe]=(((Ht[CGe])*1.)+((Ha)*1.)*Cos(((lt[CGe])*1.)*bj_DEGTORAD))
set jt[CGe]=(((jt[CGe])*1.)+((Ha)*1.)*Sin(((lt[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(gt[CGe],Ht[CGe],jt[CGe],Kt[CGe])
if Lt[CGe]<7 then
call GroupEnumUnitsInRange(sv,Ht[CGe],jt[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Ft[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,mt[CGe])then
call GroupAddUnit(mt[CGe],n)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TYK_bangtamtientu2.mdl"),(n),"chest"))
call uee(ft[CGe],n,true,Jt[CGe],kt[CGe],THe(ft[CGe]))
set Lt[CGe]=Lt[CGe]+1
if Lt[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set Gt[CGe]=Gt[CGe]-1
if Gt[CGe]<=0 then
call QDe()
call BlzSetSpecialEffectScale((gt[CGe]),((.001)*1.))
call Qre(gt[CGe])
call Qne(mt[CGe])
set mt[CGe]=null
set gt[CGe]=null
set ft[CGe]=null
set Ft[CGe]=null
call pQe(CGe)
endif
return false
endfunction
function xcx takes unit u,real x,real y,real d1,real d2,real a returns nothing
local integer CGe=pqe()
set ft[CGe]=u
set Ht[CGe]=(((x)*1.)+((80)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set jt[CGe]=(((y)*1.)+((80)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set lt[CGe]=a
set Jt[CGe]=d1
set kt[CGe]=d2
set Kt[CGe]=sxe(Ht[CGe],jt[CGe])
set gt[CGe]=AddSpecialEffect("war3mapImported\\TYK_bangtamtientu4.mdl",Ht[CGe],jt[CGe])
set Gt[CGe]=R2I(ha/ Ha)
set mt[CGe]=CreateGroup()
set Ft[CGe]=GetOwningPlayer(ft[CGe])
set Lt[CGe]=0
call BlzSetSpecialEffectYaw((gt[CGe]),((lt[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((gt[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(gt[CGe],Kt[CGe])
call QIe(CGe,.03125,true,function xBx)
endfunction
function xCx takes nothing returns boolean
local integer CGe=Qce()
set qt[CGe]=qt[CGe]-1
if qt[CGe]<=0 then
call QDe()
call xbx(yt[CGe],St[CGe],Tt[CGe],ut[CGe],wt[CGe],Wt[CGe],Qt[CGe])
set yt[CGe]=null
call pPe(CGe)
endif
return false
endfunction
function xdx takes unit u,real d,unit v,real r returns nothing
local integer CGe=ppe()
set yt[CGe]=u
set St[CGe]=GetUnitX(u)
set Tt[CGe]=GetUnitY(u)
set qt[CGe]=1
set ut[CGe]=uBe(u,ude(u,2.5,.75,ja))
set Ut[CGe]=uce(u,ude(u,$BB8,900,ja),'B008')
set wt[CGe]=uce(u,ude(u,$BB8,900,ja),'B008')
set Wt[CGe]=ude(u,20,2,ja)
set Qt[CGe]=soe(St[CGe],Tt[CGe],GetUnitX(v),GetUnitY(v))
set ut[CGe]=ut[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A06H'))
set Ut[CGe]=Ut[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A06H'))
if r>0 then
set ut[CGe]=d
set Ut[CGe]=d
set wt[CGe]=d
set Wt[CGe]=r
endif
call Qre(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl",yt[CGe],"weapon"))
call xcx(yt[CGe],St[CGe],Tt[CGe],ut[CGe],Ut[CGe],Qt[CGe])
call QIe(CGe,.075,true,function xCx)
endfunction
function xDx takes nothing returns boolean
local integer CGe=Qce()
if(GetUnitAbilityLevel((rT[CGe]),(ln))>0)then
call uee(xT[CGe],rT[CGe],false,0,eT[CGe]*(1.07+.03*BUe[(oT[CGe])*(20)+5]),'B007')
else
call uee(xT[CGe],rT[CGe],false,0,eT[CGe],'B007')
endif
set vT[CGe]=vT[CGe]-1
if vT[CGe]<=0 or spe(rT[CGe])or spe(xT[CGe])then
call QDe()
set xT[CGe]=null
set rT[CGe]=null
call pMe(CGe)
endif
return false
endfunction
function xfx takes unit u,unit v,real d,integer Upe returns nothing
local integer CGe=pme()
set xT[CGe]=u
set rT[CGe]=v
set eT[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set vT[CGe]=Upe
set oT[CGe]=(GetPlayerId(GetOwningPlayer((xT[CGe])))+1)
call QIe(CGe,1.,true,function xDx)
endfunction
function xFx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=0
local integer id=0
set AT[CGe]=(((AT[CGe])*1.)+((ka)*1.)*Cos(((dT[CGe])*1.)*bj_DEGTORAD))
set NT[CGe]=(((NT[CGe])*1.)+((ka)*1.)*Sin(((dT[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(OT[CGe],AT[CGe],NT[CGe],CT[CGe])
if fT[CGe]<7 then
call GroupEnumUnitsInRange(sv,AT[CGe],NT[CGe],90,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,ET[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,XT[CGe])then
set id=GetHandleId(n)
if LoadInteger(la,id,DT[CGe])==0 then
call SaveInteger(la,id,DT[CGe],1)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\HydraliskImpact\\HydraliskImpact.mdl"),(n),"chest"))
call uee(VT[CGe],n,false,bT[CGe],BT[CGe],THe(VT[CGe]))
if FT[CGe]==1 then
call xfx(VT[CGe],n,BT[CGe],gT[CGe])
endif
endif
call GroupAddUnit(XT[CGe],n)
set fT[CGe]=fT[CGe]+1
if fT[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set RT[CGe]=RT[CGe]-1
if RT[CGe]<=0 then
call QDe()
loop
set n=FirstOfGroup(XT[CGe])
exitwhen n==null
call SaveInteger(la,GetHandleId(n),DT[CGe],0)
call GroupRemoveUnit(XT[CGe],n)
endloop
call Qre(OT[CGe])
call Qne(XT[CGe])
set XT[CGe]=null
set OT[CGe]=null
set VT[CGe]=null
set ET[CGe]=null
call pLe(CGe)
endif
return false
endfunction
function xgx takes unit u,real x,real y,real d1,real d2,real r,real a,integer K,integer b,integer Upe returns nothing
local integer CGe=ple()
set VT[CGe]=u
set dT[CGe]=a
set AT[CGe]=x
set NT[CGe]=y
set ET[CGe]=GetOwningPlayer(VT[CGe])
set RT[CGe]=R2I(Ja/ ka)
set OT[CGe]=AddSpecialEffect("war3mapImported\\DMTT_baovucham5.mdl",AT[CGe],NT[CGe])
set CT[CGe]=sxe(AT[CGe],NT[CGe])+'d'
set bT[CGe]=d1
set BT[CGe]=d2
set fT[CGe]=0
set cT[CGe]=r
set XT[CGe]=CreateGroup()
set DT[CGe]=K
set FT[CGe]=b
set gT[CGe]=Upe
call BlzSetSpecialEffectYaw((OT[CGe]),((dT[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((OT[CGe]),((.4)*1.))
call BlzSetSpecialEffectZ(OT[CGe],CT[CGe])
call QIe(CGe,.03125,true,function xFx)
endfunction
function xGx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
local integer rd=GetRandomInt($F4240,$98967F)
local real a=(JT[CGe]-2)*22.5
if JT[CGe]==3 then
call GroupEnumUnitsInRange(sv,kT[CGe],KT[CGe],$B4,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,pT[CGe])and not spe(n)and not tOe(n)then
call yLe(jT[CGe],n,mT[CGe],1.5)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\HydraliskImpact\\HydraliskImpact.mdl"),(n),"chest"))
call uee(jT[CGe],n,false,lT[CGe],LT[CGe],THe(jT[CGe]))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
else
call xgx(jT[CGe],kT[CGe],KT[CGe],lT[CGe],LT[CGe],mT[CGe],MT[CGe]+a,rd,JT[CGe],1)
call xgx(jT[CGe],kT[CGe],KT[CGe],lT[CGe],LT[CGe],mT[CGe],MT[CGe]+45+a,rd,JT[CGe],1)
call xgx(jT[CGe],kT[CGe],KT[CGe],lT[CGe],LT[CGe],mT[CGe],MT[CGe]+90+a,rd,JT[CGe],1)
call xgx(jT[CGe],kT[CGe],KT[CGe],lT[CGe],LT[CGe],mT[CGe],MT[CGe]+$87+a,rd,JT[CGe],1)
call xgx(jT[CGe],kT[CGe],KT[CGe],lT[CGe],LT[CGe],mT[CGe],MT[CGe]+$B4+a,rd,JT[CGe],1)
call xgx(jT[CGe],kT[CGe],KT[CGe],lT[CGe],LT[CGe],mT[CGe],MT[CGe]+$E1+a,rd,JT[CGe],1)
call xgx(jT[CGe],kT[CGe],KT[CGe],lT[CGe],LT[CGe],mT[CGe],MT[CGe]+270+a,rd,JT[CGe],1)
call xgx(jT[CGe],kT[CGe],KT[CGe],lT[CGe],LT[CGe],mT[CGe],MT[CGe]+315+a,rd,JT[CGe],1)
endif
set JT[CGe]=JT[CGe]-1
if JT[CGe]<=0 then
call QDe()
call Qre(PT[CGe])
set PT[CGe]=null
set pT[CGe]=null
set jT[CGe]=null
call pKe(CGe)
endif
return false
endfunction
function xhx takes unit u,real d,unit v,real r returns nothing
local integer CGe=pke()
set jT[CGe]=u
set kT[CGe]=GetUnitX(v)
set KT[CGe]=GetUnitY(v)
set JT[CGe]=3
set lT[CGe]=uBe(u,ude(u,2.,.6,Ka))
set LT[CGe]=uce(u,ude(u,$5DC,450,Ka),'B007')
set mT[CGe]=ude(u,20,3,Ka)
set pT[CGe]=GetOwningPlayer(jT[CGe])
set MT[CGe]=GetUnitFacing(jT[CGe])
set PT[CGe]=AddSpecialEffect("war3mapImported\\DMTT_baovu2.mdl",kT[CGe],KT[CGe])
call BlzSetSpecialEffectScale((PT[CGe]),((1.2)*1.))
call BlzSetSpecialEffectZ(PT[CGe],sxe(kT[CGe],KT[CGe])+'d')
set lT[CGe]=lT[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A04T'))
set LT[CGe]=LT[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A04T'))
if r>0 then
set lT[CGe]=d
set LT[CGe]=d
set mT[CGe]=r
endif
call QIe(CGe,.4,true,function xGx)
endfunction
function xHx takes nothing returns boolean
local integer CGe=Qce()
call Tse(ST[CGe],tT[CGe])
call Qle("|cff7fff00"+"+"+I2S(R2I(tT[CGe]))+"|r",GetUnitX(ST[CGe]),GetUnitY(ST[CGe]))
set TT[CGe]=TT[CGe]-1
if TT[CGe]<=0 or spe(ST[CGe])then
call QDe()
set ST[CGe]=null
call pJe(CGe)
endif
return false
endfunction
function xjx takes unit u,real r returns nothing
local integer CGe=pje()
set ST[CGe]=u
set tT[CGe]=r
set TT[CGe]=$A
call QIe(CGe,1.,true,function xHx)
endfunction
function xJx takes nothing returns boolean
local integer CGe=Qce()
set yT[CGe]=yT[CGe]-1
if yT[CGe]<=0 then
call QDe()
set BEe[WT[CGe]]=false
call pHe(CGe)
endif
return false
endfunction
function xkx takes integer i returns nothing
local integer CGe=phe()
set WT[CGe]=i
set BEe[WT[CGe]]=true
set yT[CGe]=45
call QIe(CGe,1.,true,function xJx)
endfunction
function xKx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local real d=(.03+.01*BUe[(i)*(20)+4])*GetUnitState(u,UNIT_STATE_MAX_LIFE)
local unit n=null
local real r=.3*GetUnitState(u,UNIT_STATE_MAX_LIFE)
if not BEe[i]and TQe(u)<=40. then
call xkx(i)
call Qre(AddSpecialEffect(("war3mapImported\\NMK_effect1.mdl"),((x)*1.),((y)*1.)))
call Tse(u,r)
call Qle("|cff7fff00"+"+"+I2S(R2I(r))+"|r",GetUnitX(u),GetUnitY(u))
call GroupEnumUnitsInRange(sv,x,y,600,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitAlly(n,p)and not spe(n)and(IsUnitType((n),UNIT_TYPE_HERO))then
call UnitRemoveBuffs(n,false,true)
call Qre(AddSpecialEffectTarget(("war3mapImported\\NMK_effect8.mdl"),(n),"origin"))
call xjx(n,d)
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set u=null
set p=null
return false
endfunction
function xlx takes nothing returns boolean
return(GetUnitAbilityLevel((GetTriggerUnit()),('A07Y'))>0)and xKx()
endfunction
function xLx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function xlx))
set t=null
endfunction
function xmx takes nothing returns boolean
local integer CGe=Qce()
if spe(vu[CGe])or not(GetUnitAbilityLevel((vu[CGe]),(ma))>0)then
call QDe()
call UnitRemoveAbility(vu[CGe],ma)
call Tje(vu[CGe],6780,-eu[CGe])
call Tje(vu[CGe],5762,-xu[CGe])
set vu[CGe]=null
call pGe(CGe)
endif
return false
endfunction
function xMx takes unit u,real r1,real r2 returns nothing
local integer CGe=pge()
set vu[CGe]=u
set eu[CGe]=r1
set xu[CGe]=r2
call tKe(vu[CGe],ma)
call Tje(vu[CGe],6780,eu[CGe])
call Tje(vu[CGe],5762,xu[CGe])
call QIe(CGe,.03125,true,function xmx)
endfunction
function xpx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real r1=ude(u,.2,.02,La)*TKe(u,6780)
local real r2=ude(u,'d',30,La)
if(GetUnitAbilityLevel((u),(ma))>0)then
call UnitRemoveAbility(u,ma)
else
call xMx(u,r1,r2)
endif
set u=null
return false
endfunction
function xPx takes nothing returns boolean
return GetSpellAbilityId()==La and xpx()
endfunction
function xqx takes nothing returns boolean
local integer CGe=Qce()
if nu[CGe]==$F then
call UnitRemoveAbility(Eu[CGe],Ma)
endif
set nu[CGe]=nu[CGe]-1
if nu[CGe]<=0 then
call QDe()
set pa[Vu[CGe]]=0
set Eu[CGe]=null
call pFe(CGe)
endif
return false
endfunction
function xQx takes unit u,integer i returns nothing
local integer CGe=pfe()
set Eu[CGe]=u
set Vu[CGe]=i
set nu[CGe]=25
call tKe(Eu[CGe],Ma)
call QIe(CGe,1.,true,function xqx)
endfunction
function xsx takes nothing returns boolean
local unit u=GetAttacker()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
if pa[i]<3 and BUe[(i)*(20)+9]>0 then
set pa[i]=pa[i]+1
if pa[i]==3 then
call xQx(u,i)
endif
endif
set u=null
set p=null
return false
endfunction
function xSx takes nothing returns boolean
return(GetUnitAbilityLevel((GetAttacker()),(ma))>0)and xsx()
endfunction
function xtx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function xPx))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function xSx))
set t=null
endfunction
function xTx takes nothing returns boolean
local integer CGe=Qce()
set Nu[CGe]=Nu[CGe]-1
if Nu[CGe]<=0 or spe(Iu[CGe])then
call QDe()
call Tje(Iu[CGe],Bx,-Au[CGe])
call TPe(Iu[CGe],-3)
call Tje(Iu[CGe],4141,-.01)
set Qa[bu[CGe]]=Qa[bu[CGe]]-1
if Qa[bu[CGe]]==0 then
call UnitRemoveAbility(Iu[CGe],Pa)
endif
set Iu[CGe]=null
call pDe(CGe)
endif
return false
endfunction
function xux takes unit u,integer lv,integer i returns nothing
local integer CGe=pde()
set Iu[CGe]=u
set Au[CGe]=.2+.05*lv
set Nu[CGe]=5
set bu[CGe]=i
set Qa[bu[CGe]]=Qa[bu[CGe]]+1
call Tje(Iu[CGe],Bx,Au[CGe])
call TPe(Iu[CGe],3)
call Tje(Iu[CGe],4141,.01)
if not(GetUnitAbilityLevel((Iu[CGe]),(Pa))>0)then
call tKe(Iu[CGe],Pa)
endif
call QIe(CGe,1.,true,function xTx)
endfunction
function xUx takes nothing returns boolean
local integer CGe=Qce()
set du[CGe]=du[CGe]-1
if du[CGe]<=0 or spe(Du[CGe])or not(GetUnitAbilityLevel((Du[CGe]),(sa))>0)then
call QDe()
call UnitRemoveAbility(Du[CGe],sa)
call Tje(Du[CGe],611,fu[CGe])
call Tje(Du[CGe],4888,fu[CGe])
set Du[CGe]=null
call pCe(CGe)
endif
return false
endfunction
function xwx takes unit u,unit v returns nothing
local integer CGe=pce()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
set Du[CGe]=v
set fu[CGe]=80+20*BUe[(i)*(20)+4]
set du[CGe]=R2I(30./ .03125)
call tKe(Du[CGe],sa)
call Tje(Du[CGe],611,-fu[CGe])
call Tje(Du[CGe],4888,-fu[CGe])
call QIe(CGe,.03125,true,function xUx)
endfunction
function xWx takes nothing returns boolean
local integer CGe=Qce()
set hu[CGe]=hu[CGe]-1
if hu[CGe]<=0 or spe(Hu[CGe])then
call QDe()
call UnitRemoveAbility(Hu[CGe],ua)
call Tje(Hu[CGe],Ax,ju[CGe])
set Hu[CGe]=null
call pBe(CGe)
endif
return false
endfunction
function xyx takes integer lv,unit u returns nothing
local integer CGe=pbe()
set Hu[CGe]=u
set hu[CGe]=R2I(4/ .03125)
set ju[CGe]=70+30*lv
call tKe(Hu[CGe],ua)
call Tje(Hu[CGe],Ax,-ju[CGe])
call QIe(CGe,.03125,true,function xWx)
endfunction
function xYx takes nothing returns boolean
local integer CGe=Qce()
call UnitRemoveBuffs(Lu[CGe],false,true)
set lu[CGe]=lu[CGe]-1
if lu[CGe]<=0 or spe(Lu[CGe])then
call QDe()
call UnitRemoveAbility(Lu[CGe],Ta)
set Lu[CGe]=null
call pNe(CGe)
endif
return false
endfunction
function xzx takes unit u returns nothing
local integer CGe=pAe()
set Lu[CGe]=u
set lu[CGe]=8
call tKe(Lu[CGe],Ta)
call QIe(CGe,.5,true,function xYx)
endfunction
function xZx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set tu[CGe]=(((tu[CGe])*1.)+((Sa)*1.)*Cos(((yu[CGe])*1.)*bj_DEGTORAD))
set Tu[CGe]=(((Tu[CGe])*1.)+((Sa)*1.)*Sin(((yu[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(Qu[CGe],tu[CGe],Tu[CGe],Wu[CGe])
if Yu[CGe]<4 then
call GroupEnumUnitsInRange(sv,tu[CGe],Tu[CGe],'n',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,qu[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,zu[CGe])then
call yke(Pu[CGe],n,wu[CGe],4.)
call GroupAddUnit(zu[CGe],n)
if not(GetUnitAbilityLevel((n),(ua))>0)and BUe[(su[CGe])*(20)+9]>0 then
call xyx(BUe[(su[CGe])*(20)+9],n)
endif
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl"),(n),"chest"))
call uee(Pu[CGe],n,true,uu[CGe],Uu[CGe],THe(Pu[CGe]))
set Yu[CGe]=Yu[CGe]+1
if Yu[CGe]>=4 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set Su[CGe]=Su[CGe]-1
if Su[CGe]<=0 then
call QDe()
call Qre(Qu[CGe])
call Qne(zu[CGe])
set zu[CGe]=null
set Qu[CGe]=null
set Pu[CGe]=null
set qu[CGe]=null
call pIe(CGe)
endif
return false
endfunction
function x_x takes unit u,real x,real y,real d1,real d2,real r,real a returns nothing
local integer CGe=pRe()
set Pu[CGe]=u
set yu[CGe]=a+$B4
set tu[CGe]=(((x)*1.)+((640)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set Tu[CGe]=(((y)*1.)+((640)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set uu[CGe]=d1
set Uu[CGe]=d2
set wu[CGe]=r
set Wu[CGe]=sxe(tu[CGe],Tu[CGe])
set Qu[CGe]=AddSpecialEffect("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveMissile.mdl",tu[CGe],Tu[CGe])
set Su[CGe]=20
set zu[CGe]=CreateGroup()
set qu[CGe]=GetOwningPlayer(Pu[CGe])
set su[CGe]=GetPlayerId(qu[CGe])+1
set Yu[CGe]=0
call BlzSetSpecialEffectYaw((Qu[CGe]),((yu[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((Qu[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(Qu[CGe],Wu[CGe])
call QIe(CGe,.03125,true,function xZx)
endfunction
function x0x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set rU[CGe]=(((rU[CGe])*1.)+((Sa)*1.)*Cos(((nU[CGe])*1.)*bj_DEGTORAD))
set iU[CGe]=(((iU[CGe])*1.)+((Sa)*1.)*Sin(((nU[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(xU[CGe],rU[CGe],iU[CGe],aU[CGe])
set oU[CGe]=oU[CGe]-1
if oU[CGe]<=0 then
call QDe()
call Qre(xU[CGe])
set xU[CGe]=null
call pOe(CGe)
endif
return false
endfunction
function x1x takes real x,real y,real a returns nothing
local integer CGe=pXe()
set rU[CGe]=x
set iU[CGe]=y
set nU[CGe]=a
set aU[CGe]=sxe(rU[CGe],iU[CGe])
set xU[CGe]=AddSpecialEffect("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveMissile.mdl",rU[CGe],iU[CGe])
set oU[CGe]=20
call BlzSetSpecialEffectYaw((xU[CGe]),((nU[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((xU[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(xU[CGe],aU[CGe])
call QIe(CGe,.03125,true,function x0x)
endfunction
function x2x takes nothing returns boolean
local integer CGe=Qce()
if OU[CGe]==2 then
call x_x(cU[CGe],IU[CGe],AU[CGe],NU[CGe],bU[CGe],BU[CGe],RU[CGe])
call x_x(cU[CGe],IU[CGe],AU[CGe],NU[CGe],bU[CGe],BU[CGe],RU[CGe]+45)
call x_x(cU[CGe],IU[CGe],AU[CGe],NU[CGe],bU[CGe],BU[CGe],RU[CGe]-45)
call x_x(cU[CGe],IU[CGe],AU[CGe],NU[CGe],bU[CGe],BU[CGe],RU[CGe]+90)
call x_x(cU[CGe],IU[CGe],AU[CGe],NU[CGe],bU[CGe],BU[CGe],RU[CGe]-90)
call x_x(cU[CGe],IU[CGe],AU[CGe],NU[CGe],bU[CGe],BU[CGe],RU[CGe]+$87)
call x_x(cU[CGe],IU[CGe],AU[CGe],NU[CGe],bU[CGe],BU[CGe],RU[CGe]-$87)
call x_x(cU[CGe],IU[CGe],AU[CGe],NU[CGe],bU[CGe],BU[CGe],RU[CGe]+$B4)
endif
set OU[CGe]=OU[CGe]-1
if OU[CGe]<=0 then
call QDe()
call xzx(cU[CGe])
set cU[CGe]=null
call pEe(CGe)
endif
return false
endfunction
function x3x takes unit u,real d1,real d2,real r returns nothing
local integer CGe=pVe()
set cU[CGe]=u
set IU[CGe]=GetUnitX(u)
set AU[CGe]=GetUnitY(u)
set OU[CGe]=2
set NU[CGe]=d1
set bU[CGe]=d2
set BU[CGe]=r
call x1x(IU[CGe],AU[CGe],RU[CGe])
call x1x(IU[CGe],AU[CGe],RU[CGe]+45)
call x1x(IU[CGe],AU[CGe],RU[CGe]-45)
call x1x(IU[CGe],AU[CGe],RU[CGe]+90)
call x1x(IU[CGe],AU[CGe],RU[CGe]-90)
call x1x(IU[CGe],AU[CGe],RU[CGe]+$87)
call x1x(IU[CGe],AU[CGe],RU[CGe]-$87)
call x1x(IU[CGe],AU[CGe],RU[CGe]+$B4)
call QIe(CGe,.6,true,function x2x)
endfunction
function x4x takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,2.,.6,ta))
local real d2=uce(u,ude(u,$BB8,900,ta),'B008')
local real r=ude(u,40,4,ta)
call x3x(u,d1,d2,r)
set u=null
return false
endfunction
function x5x takes nothing returns boolean
return GetSpellAbilityId()==ta and x4x()
endfunction
function x6x takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function x5x))
set t=null
endfunction
function x7x takes nothing returns boolean
local integer CGe=Qce()
if gU[CGe]>60 and not spe(fU[CGe])then
call Tse(fU[CGe],GU[CGe])
call Qle("|cff7fff00"+"+"+I2S(R2I(GU[CGe]))+"|r",GetUnitX(fU[CGe]),GetUnitY(fU[CGe]))
endif
set gU[CGe]=gU[CGe]-1
if gU[CGe]<=0 then
call QDe()
set fU[CGe]=null
set BXe[FU[CGe]]=false
call pne(CGe)
endif
return false
endfunction
function x8x takes unit u,integer i returns nothing
local integer CGe=pae()
set fU[CGe]=u
set FU[CGe]=i
set BXe[FU[CGe]]=true
set gU[CGe]=70
set GU[CGe]=(4+2*BUe[(i)*(20)+4])*GetHeroStr(u,true)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TLBD_effect1.mdl"),(u),"origin"))
call QIe(CGe,.5,true,function x7x)
endfunction
function x9x takes unit u,integer i returns real
local real r=0
if BUe[(i)*(20)+9]>0 then
set r=('d'-TQe(u))*.01
if r>=.2+.05*BUe[(i)*(20)+9]then
set r=.2+.05*BUe[(i)*(20)+9]
endif
return 1.+r
endif
return 1.
endfunction
function ovx takes nothing returns boolean
local integer CGe=Qce()
set JU[CGe]=JU[CGe]-1
if JU[CGe]<=0 or spe(kU[CGe])or not(GetUnitAbilityLevel((kU[CGe]),(Ua))>0)then
call QDe()
call UnitRemoveAbility(kU[CGe],Ua)
call Tje(kU[CGe],5762,KU[CGe])
call Tje(kU[CGe],6780,lU[CGe])
call Tje(kU[CGe],5034,LU[CGe])
set kU[CGe]=null
call pie(CGe)
endif
return false
endfunction
function oex takes unit u,unit v returns nothing
local integer CGe=pre()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
set kU[CGe]=v
set KU[CGe]=70+30*BUe[(i)*(20)+5]
set lU[CGe]=$A0+40*BUe[(i)*(20)+5]
set LU[CGe]=80+20*BUe[(i)*(20)+5]
set JU[CGe]=R2I(30./ .03125)
call tKe(kU[CGe],Ua)
call Tje(kU[CGe],5762,-KU[CGe])
call Tje(kU[CGe],6780,-lU[CGe])
call Tje(kU[CGe],5034,-LU[CGe])
call QIe(CGe,.03125,true,function ovx)
endfunction
function oxx takes nothing returns boolean
local integer CGe=Qce()
if spe(PU[CGe])or not(GetUnitAbilityLevel((PU[CGe]),(ya))>0)then
call QDe()
call UnitRemoveAbility(PU[CGe],ya)
call Tje(PU[CGe],572,-qU[CGe])
call Tje(PU[CGe],lx,-qU[CGe])
call Tje(PU[CGe],7896,-qU[CGe])
call Tje(PU[CGe],6491,-qU[CGe])
call Tje(PU[CGe],611,-QU[CGe])
set PU[CGe]=null
call poe(CGe)
endif
return false
endfunction
function oox takes unit u,real r1,real r2 returns nothing
local integer CGe=pxe()
set PU[CGe]=u
set qU[CGe]=r1
set QU[CGe]=r2
call tKe(PU[CGe],ya)
call Tje(PU[CGe],572,qU[CGe])
call Tje(PU[CGe],lx,qU[CGe])
call Tje(PU[CGe],7896,qU[CGe])
call Tje(PU[CGe],6491,qU[CGe])
call Tje(PU[CGe],611,QU[CGe])
call QIe(CGe,.03125,true,function oxx)
endfunction
function orx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real r1=ude(u,.2,.05,Wa)
local real r2=ude(u,60,20,Wa)
if(GetUnitAbilityLevel((u),(ya))>0)then
call UnitRemoveAbility(u,ya)
else
call oox(u,r1,r2)
endif
set u=null
return false
endfunction
function oix takes nothing returns boolean
return GetSpellAbilityId()==Wa and orx()
endfunction
function oax takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function oix))
set t=null
endfunction
function onx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=1.
if yU[CGe]==24 then
call GroupClear(wU[CGe])
endif
if yU[CGe]==32 or yU[CGe]==16 then
if not spe(uU[CGe])then
set ow[CGe]=soe(YU[CGe],zU[CGe],GetUnitX(uU[CGe]),GetUnitY(uU[CGe]))
call BlzSetSpecialEffectYaw((WU[CGe]),((ow[CGe])*1.)*bj_DEGTORAD)
endif
endif
set YU[CGe]=(((YU[CGe])*1.)+((Ya)*1.)*Cos(((ow[CGe])*1.)*bj_DEGTORAD))
set zU[CGe]=(((zU[CGe])*1.)+((Ya)*1.)*Sin(((ow[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(WU[CGe],YU[CGe],zU[CGe],xw[CGe])
if rw[CGe]<7 then
call GroupEnumUnitsInRange(sv,YU[CGe],zU[CGe],90,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,UU[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,wU[CGe])then
call GroupAddUnit(wU[CGe],n)
if BUe[(iw[CGe])*(20)+$A]>0 and GetRandomReal(0,'d')<=6+2*BUe[(iw[CGe])*(20)+$A]then
set r=1.14+.04*BUe[(iw[CGe])*(20)+$A]
endif
call Qre(AddSpecialEffect(("war3mapImported\\CBB_tranphai2.mdl"),((GetUnitX(n))*1.),((GetUnitY(n))*1.)))
if GetRandomInt(0,1)==0 then
call yHe(TU[CGe],n,ew[CGe],1)
else
call yKe(TU[CGe],n,ew[CGe],2)
endif
call uee(TU[CGe],n,false,ZU[CGe]*r,vw[CGe]*r,THe(TU[CGe]))
set rw[CGe]=rw[CGe]+1
if rw[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
else
set yU[CGe]=0
endif
set yU[CGe]=yU[CGe]-1
if yU[CGe]<=0 then
call QDe()
call Qre(WU[CGe])
call Qne(wU[CGe])
set wU[CGe]=null
set WU[CGe]=null
set TU[CGe]=null
set uU[CGe]=null
set UU[CGe]=null
call pee(CGe)
endif
return false
endfunction
function oVx takes unit u,unit v,player p,real d1,real d2,real r,real x,real y,real a returns nothing
local integer CGe=pve()
set TU[CGe]=u
set uU[CGe]=v
set ow[CGe]=a
set YU[CGe]=x
set zU[CGe]=y
set yU[CGe]=48
set rw[CGe]=0
set UU[CGe]=p
set wU[CGe]=CreateGroup()
set WU[CGe]=AddSpecialEffect("war3mapImported\\CBB_bonghuynhld.mdl",YU[CGe],zU[CGe])
set xw[CGe]=sxe(YU[CGe],zU[CGe])+'d'
set ZU[CGe]=d1
set vw[CGe]=d2
set ew[CGe]=r
set iw[CGe]=GetPlayerId(UU[CGe])+1
call BlzSetSpecialEffectYaw((WU[CGe]),((ow[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((WU[CGe]),((1.5)*1.))
call BlzSetSpecialEffectZ(WU[CGe],xw[CGe])
call QIe(CGe,.03125,true,function onx)
endfunction
function oEx takes nothing returns boolean
local integer CGe=Qce()
local real x=(((Rw[CGe])*1.)+(('d')*1.)*Cos(((Bw[CGe])*1.)*bj_DEGTORAD))
local real y=(((Iw[CGe])*1.)+(('d')*1.)*Sin(((Bw[CGe])*1.)*bj_DEGTORAD))
if Ow[CGe]==2 then
set x=(((Rw[CGe])*1.)+(('d')*1.)*Cos(((Bw[CGe]+90)*1.)*bj_DEGTORAD))
set y=(((Iw[CGe])*1.)+(('d')*1.)*Sin(((Bw[CGe]+90)*1.)*bj_DEGTORAD))
elseif Ow[CGe]==1 then
set x=(((Rw[CGe])*1.)+(('d')*1.)*Cos(((Bw[CGe]-90)*1.)*bj_DEGTORAD))
set y=(((Iw[CGe])*1.)+(('d')*1.)*Sin(((Bw[CGe]-90)*1.)*bj_DEGTORAD))
endif
call oVx(Ew[CGe],cw[CGe],Xw[CGe],Aw[CGe],Nw[CGe],bw[CGe],x,y,Bw[CGe])
set Ow[CGe]=Ow[CGe]-1
if Ow[CGe]<=0 then
call QDe()
set Ew[CGe]=null
set cw[CGe]=null
set Xw[CGe]=null
call M9e(CGe)
endif
return false
endfunction
function oXx takes unit u,real d,unit v,real r returns nothing
local integer CGe=M8e()
set Bw[CGe]=GetUnitFacing(u)
set Ew[CGe]=u
set Rw[CGe]=GetUnitX(u)
set Iw[CGe]=GetUnitY(u)
set cw[CGe]=v
set Ow[CGe]=3
set Aw[CGe]=uBe(u,ude(u,2.,.6,za))
set Nw[CGe]=uce(u,ude(u,$5DC,450,za),'B009')
set bw[CGe]=ude(u,$F,2,za)
set Xw[CGe]=GetOwningPlayer(Ew[CGe])
set Aw[CGe]=Aw[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A08X'))
set Nw[CGe]=Nw[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A08X'))
call Qre(AddSpecialEffectTarget("war3mapImported\\CBB_thienhavocaucaster.mdl",u,"chest"))
if r>0 then
set Aw[CGe]=d
set Nw[CGe]=d
set bw[CGe]=r
endif
call QIe(CGe,.1667,true,function oEx)
endfunction
function oOx takes nothing returns boolean
local integer CGe=Qce()
set fw[CGe]=fw[CGe]-1
if fw[CGe]<=0 then
call QDe()
call Qre(Fw[CGe])
set Fw[CGe]=null
call M7e(CGe)
endif
return false
endfunction
function oRx takes real x,real y,real a returns nothing
local integer CGe=M6e()
set fw[CGe]=R2I(.35/ .03125)
set Fw[CGe]=AddSpecialEffect("war3mapImported\\DTC_Img.mdx",x,y)
call BlzSetSpecialEffectScale((Fw[CGe]),((.85)*1.))
call BlzSetSpecialEffectTimeScale((Fw[CGe]),((1.5)*1.))
call BlzSetSpecialEffectAlpha((Fw[CGe]),($96))
call BlzSetSpecialEffectYaw((Fw[CGe]),((a)*1.)*bj_DEGTORAD)
call QIe(CGe,.03125,true,function oOx)
endfunction
function oIx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
if Jw[CGe]==2 then
call oRx(kw[CGe],Kw[CGe],GetUnitFacing(Hw[CGe]))
call Qre(AddSpecialEffectTarget("war3mapImported\\DTK_effect.mdl",Hw[CGe],"hand right"))
call Qre(AddSpecialEffectTarget("war3mapImported\\DTK_effect.mdl",Hw[CGe],"hand left"))
endif
call GroupEnumUnitsInRange(sv,kw[CGe],Kw[CGe],$FA,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,jw[CGe])and not spe(n)and not tOe(n)then
call yHe(Hw[CGe],n,mw[CGe],.5)
call yke(Hw[CGe],n,mw[CGe],1.5)
call Qre(AddSpecialEffect(("war3mapImported\\DTC_canduongchi.mdl"),((GetUnitX(n))*1.),((GetUnitY(n))*1.)))
call uee(Hw[CGe],n,false,lw[CGe],Lw[CGe],THe(Hw[CGe]))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set Jw[CGe]=Jw[CGe]-1
if Jw[CGe]<=0 then
call QDe()
set Hw[CGe]=null
set jw[CGe]=null
call M5e(CGe)
endif
return false
endfunction
function oAx takes unit u,real d,unit v,real r returns nothing
local integer CGe=M4e()
set Hw[CGe]=u
set kw[CGe]=GetUnitX(u)
set Kw[CGe]=GetUnitY(u)
set Jw[CGe]=2
set lw[CGe]=uBe(u,ude(u,2.5,.75,Za))
set Lw[CGe]=uce(u,ude(u,$7D0,600,Za),'B008')
set mw[CGe]=ude(u,$F,2,Za)
set jw[CGe]=GetOwningPlayer(Hw[CGe])
if r>0 then
set lw[CGe]=d
set Lw[CGe]=d
set mw[CGe]=r
endif
call oRx(kw[CGe],Kw[CGe],GetUnitFacing(Hw[CGe]))
call Qre(AddSpecialEffectTarget("war3mapImported\\DTK_effect.mdl",u,"hand right"))
call Qre(AddSpecialEffectTarget("war3mapImported\\DTK_effect.mdl",u,"hand left"))
call QIe(CGe,.25,true,function oIx)
endfunction
function oNx takes nothing returns boolean
local integer CGe=Qce()
set Sw[CGe]=Sw[CGe]-1
if Sw[CGe]<=0 or spe(qw[CGe])then
call QDe()
call Tje(qw[CGe],5319,-Qw[CGe])
call Tje(qw[CGe],vx,-Qw[CGe])
call Tue(qw[CGe],-sw[CGe])
set en[tw[CGe]]=en[tw[CGe]]-1
if en[tw[CGe]]==0 then
call UnitRemoveAbility(qw[CGe],vn)
endif
set qw[CGe]=null
call M3e(CGe)
endif
return false
endfunction
function obx takes unit u,integer lv,integer i returns nothing
local integer CGe=M2e()
set qw[CGe]=u
set Qw[CGe]=.1+.02*lv
set sw[CGe]=16+4*lv
set Sw[CGe]=$C
set tw[CGe]=i
set en[tw[CGe]]=en[tw[CGe]]+1
call Tje(qw[CGe],5319,Qw[CGe])
call Tje(qw[CGe],vx,Qw[CGe])
call Tue(qw[CGe],sw[CGe])
if not(GetUnitAbilityLevel((qw[CGe]),(vn))>0)then
call tKe(qw[CGe],vn)
endif
call QIe(CGe,1.,true,function oNx)
endfunction
function oBx takes nothing returns boolean
local unit u=GetTriggerUnit()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
if en[i]<16 then
call obx(u,BUe[(i)*(20)+9],i)
endif
set u=null
return false
endfunction
function ocx takes nothing returns boolean
return(GetUnitAbilityLevel((GetTriggerUnit()),('A04N'))>0)and oBx()
endfunction
function oCx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function ocx))
set t=null
endfunction
function odx takes nothing returns boolean
local integer CGe=Qce()
set Ww[CGe]=Ww[CGe]-1
if Ww[CGe]<=0 or spe(ww[CGe])or not(GetUnitAbilityLevel((ww[CGe]),(rn))>0)then
call QDe()
call UnitRemoveAbility(ww[CGe],rn)
set ww[CGe]=null
call M1e(CGe)
endif
return false
endfunction
function oDx takes nothing returns boolean
local integer CGe=M0e()
set ww[CGe]=GetTriggerUnit()
set Ww[CGe]=$C
call UnitAddAbility(ww[CGe],rn)
call QIe(CGe,1.,true,function odx)
return false
endfunction
function ofx takes nothing returns boolean
return GetSpellAbilityId()==xn and oDx()
endfunction
function oFx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function ofx))
set t=null
endfunction
function ogx takes nothing returns boolean
local integer CGe=Qce()
if(GetUnitAbilityLevel((oW[CGe]),(DI))>0)and TQe(oW[CGe])<=30. then
call uee(eW[CGe],oW[CGe],false,0,vW[CGe]*(1.07+.03*BUe[(xW[CGe])*(20)+4]),'B007')
else
call uee(eW[CGe],oW[CGe],false,0,vW[CGe],'B007')
endif
set Zw[CGe]=Zw[CGe]-1
if Zw[CGe]<=0 or spe(oW[CGe])or spe(eW[CGe])then
call QDe()
set eW[CGe]=null
set oW[CGe]=null
call M_e(CGe)
endif
return false
endfunction
function oGx takes unit u,unit v,real d returns nothing
local integer CGe=MZe()
set eW[CGe]=u
set oW[CGe]=v
set vW[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set Zw[CGe]=2
set xW[CGe]=(GetPlayerId(GetOwningPlayer((eW[CGe])))+1)
call QIe(CGe,1.,true,function ogx)
endfunction
function ohx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
call Qre(AddSpecialEffect(("war3mapImported\\NDD_effect3.mdl"),((RW[CGe])*1.),((IW[CGe])*1.)))
call GroupEnumUnitsInRange(sv,RW[CGe],IW[CGe],300,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,VW[CGe])and not spe(n)and not tOe(n)then
call yLe(nW[CGe],n,AW[CGe],1.5)
call uee(nW[CGe],n,false,XW[CGe],OW[CGe],THe(nW[CGe]))
call oGx(nW[CGe],n,OW[CGe])
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl"),(n),"origin"))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set EW[CGe]=EW[CGe]-1
if EW[CGe]<=0 then
call QDe()
call BlzSetSpecialEffectScale((NW[CGe]),((.001)*1.))
call Qre(NW[CGe])
set NW[CGe]=null
set nW[CGe]=null
set VW[CGe]=null
call Mze(CGe)
endif
return false
endfunction
function oHx takes unit u,real d1,real d2,real r,real x,real y returns nothing
local integer CGe=MYe()
set nW[CGe]=u
set RW[CGe]=x
set IW[CGe]=y
set VW[CGe]=GetOwningPlayer(nW[CGe])
set XW[CGe]=d1
set OW[CGe]=d2
set EW[CGe]=5
set NW[CGe]=AddSpecialEffect("war3mapImported\\NDD_chucapcoc.mdl",RW[CGe],IW[CGe])
set AW[CGe]=r
call BlzSetSpecialEffectColor((NW[CGe]),(0),($FF),(0))
call BlzSetSpecialEffectScale((NW[CGe]),((.7)*1.))
call BlzSetSpecialEffectYaw((NW[CGe]),((270)*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectZ(NW[CGe],sxe(RW[CGe],IW[CGe]))
call QIe(CGe,2.,true,function ohx)
endfunction
function ojx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,2.,.6,in))*(1.+TKe(u,4857))
local real d2=uce(u,ude(u,$7D0,600,in),'B007')*(1.+TKe(u,4857))
local real r=ude(u,40,4,in)
call oHx(u,d1,d2,r,GetSpellTargetX(),GetSpellTargetY())
set u=null
return false
endfunction
function oJx takes nothing returns boolean
return GetSpellAbilityId()==in and ojx()
endfunction
function okx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function oJx))
set t=null
endfunction
function oKx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set FW[CGe]=(((FW[CGe])*1.)+((nn)*1.)*Cos(((HW[CGe])*1.)*bj_DEGTORAD))
set gW[CGe]=(((gW[CGe])*1.)+((nn)*1.)*Sin(((HW[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(DW[CGe],FW[CGe],gW[CGe],hW[CGe])
call GroupEnumUnitsInRange(sv,FW[CGe],gW[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,dW[CGe])then
call uee(CW[CGe],n,true,GW[CGe],GW[CGe],THe(CW[CGe]))
call yke(CW[CGe],n,'d',1.5)
call GroupAddUnit(dW[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set fW[CGe]=fW[CGe]-1
if fW[CGe]<=0 then
call QDe()
call Qre(DW[CGe])
call Qne(dW[CGe])
set dW[CGe]=null
set DW[CGe]=null
set CW[CGe]=null
call Mye(CGe)
endif
return false
endfunction
function olx takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=MWe()
set CW[CGe]=u
set HW[CGe]=a
set FW[CGe]=x
set gW[CGe]=y
set fW[CGe]=R2I(an/ nn)
set DW[CGe]=AddSpecialEffect("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveMissile.mdl",FW[CGe],gW[CGe])
set hW[CGe]=sxe(FW[CGe],gW[CGe])
set GW[CGe]=d
set dW[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((DW[CGe]),((HW[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((DW[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(DW[CGe],hW[CGe])
call QIe(CGe,.03125,true,function oKx)
endfunction
function oLx takes nothing returns boolean
local integer CGe=Qce()
local real x=0
local real y=0
if pW[CGe]<0 then
set x=(((mW[CGe])*1.)+((-'d'-pW[CGe]*$C8)*1.)*Cos(((PW[CGe]-90)*1.)*bj_DEGTORAD))
set y=(((MW[CGe])*1.)+((-'d'-pW[CGe]*$C8)*1.)*Sin(((PW[CGe]-90)*1.)*bj_DEGTORAD))
endif
if pW[CGe]>0 then
set x=(((mW[CGe])*1.)+((-'d'+pW[CGe]*$C8)*1.)*Cos(((PW[CGe]+90)*1.)*bj_DEGTORAD))
set y=(((MW[CGe])*1.)+((-'d'+pW[CGe]*$C8)*1.)*Sin(((PW[CGe]+90)*1.)*bj_DEGTORAD))
endif
if pW[CGe]==0 then
set x=mW[CGe]
set y=MW[CGe]
endif
call olx(KW[CGe],lW[CGe],x,y,PW[CGe])
set pW[CGe]=pW[CGe]+1
if pW[CGe]>4 then
set pW[CGe]=-4
endif
set LW[CGe]=LW[CGe]-1
if LW[CGe]<=0 then
call QDe()
set KW[CGe]=null
call Mwe(CGe)
endif
return false
endfunction
function omx takes unit u,real d returns nothing
local integer CGe=MUe()
set KW[CGe]=u
set LW[CGe]=27
set pW[CGe]=-4
set lW[CGe]=d
set PW[CGe]=GetUnitFacing(u)
set mW[CGe]=(((GetUnitX(u))*1.)+((300)*1.)*Cos(((PW[CGe]+$B4)*1.)*bj_DEGTORAD))
set MW[CGe]=(((GetUnitY(u))*1.)+((300)*1.)*Sin(((PW[CGe]+$B4)*1.)*bj_DEGTORAD))
call QIe(CGe,.12,true,function oLx)
endfunction
function oMx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set UW[CGe]=(((UW[CGe])*1.)+((YW[CGe])*1.)*Cos(((zW[CGe])*1.)*bj_DEGTORAD))
set wW[CGe]=(((wW[CGe])*1.)+((YW[CGe])*1.)*Sin(((zW[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(TW[CGe],UW[CGe],wW[CGe],yW[CGe])
call GroupEnumUnitsInRange(sv,UW[CGe],wW[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,tW[CGe])then
call uee(SW[CGe],n,false,WW[CGe],WW[CGe],THe(SW[CGe]))
call yLe(SW[CGe],n,'d',.35)
call GroupAddUnit(tW[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set uW[CGe]=uW[CGe]-1
if uW[CGe]<=0 then
call QDe()
call Qre(TW[CGe])
call Qne(tW[CGe])
set tW[CGe]=null
set TW[CGe]=null
set SW[CGe]=null
call Mue(CGe)
endif
return false
endfunction
function opx takes unit u,real d,real x,real y,real a,real db,real oPx returns nothing
local integer CGe=MTe()
set SW[CGe]=u
set zW[CGe]=a
set UW[CGe]=x
set wW[CGe]=y
set uW[CGe]=R2I(db/ oPx)
set TW[CGe]=AddSpecialEffect("war3mapImported\\NDD_huyetdao.mdl",UW[CGe],wW[CGe])
set yW[CGe]=sxe(UW[CGe],wW[CGe])+'d'
set WW[CGe]=d
set YW[CGe]=oPx
set tW[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((TW[CGe]),((zW[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((TW[CGe]),((2.)*1.))
call BlzSetSpecialEffectZ(TW[CGe],yW[CGe])
call QIe(CGe,.03125,true,function oMx)
endfunction
function oqx takes nothing returns boolean
local integer CGe=Qce()
local real x=GetUnitX(oy[CGe])
local real y=GetUnitY(oy[CGe])
local real a=GetUnitFacing(oy[CGe])+GetRandomReal(-30,30)
call opx(oy[CGe],ry[CGe],x,y,a,800,20)
set xy[CGe]=xy[CGe]-1
if xy[CGe]<=0 or spe(oy[CGe])then
call QDe()
set oy[CGe]=null
call Mte(CGe)
endif
return false
endfunction
function oQx takes unit u,real d,real x,real y returns nothing
local integer CGe=MSe()
set oy[CGe]=u
set ry[CGe]=d
set xy[CGe]=32
call QIe(CGe,.1,true,function oqx)
endfunction
function osx takes nothing returns boolean
local integer CGe=Qce()
local real x0=GetRandomReal(GetUnitX(Xy[CGe])-800,GetUnitX(Xy[CGe])+800)
local real y0=GetRandomReal(GetUnitY(Xy[CGe])-800,GetUnitY(Xy[CGe])+800)
local real x=0
local real y=0
local integer i=1
loop
exitwhen i>$A
set x=(((x0)*1.)+(('d')*1.)*Cos(((i*36)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+(('d')*1.)*Sin(((i*36)*1.)*bj_DEGTORAD))
call opx(Xy[CGe],Oy[CGe],x,y,i*36,330,$F)
set i=i+1
endloop
set Ey[CGe]=Ey[CGe]-1
if Ey[CGe]<=0 or spe(Xy[CGe])then
call QDe()
set Xy[CGe]=null
call Mse(CGe)
endif
return false
endfunction
function oSx takes unit u,real d returns nothing
local integer CGe=MQe()
set Ey[CGe]=$C
set Xy[CGe]=u
set Oy[CGe]=d
call QIe(CGe,.4,true,function osx)
endfunction
function otx takes nothing returns boolean
local integer CGe=Qce()
call uee(By[CGe],cy[CGe],false,0,by[CGe],'B007')
set Ny[CGe]=Ny[CGe]-1
if Ny[CGe]<=0 or spe(cy[CGe])or spe(By[CGe])then
call QDe()
set By[CGe]=null
set cy[CGe]=null
call Mqe(CGe)
endif
return false
endfunction
function oTx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Hy[CGe]=(((Hy[CGe])*1.)+((En)*1.)*Cos(((Ky[CGe])*1.)*bj_DEGTORAD))
set jy[CGe]=(((jy[CGe])*1.)+((En)*1.)*Sin(((Ky[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(Gy[CGe],Hy[CGe],jy[CGe],ky[CGe])
call GroupEnumUnitsInRange(sv,Hy[CGe],jy[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,gy[CGe])then
call uee(Fy[CGe],n,false,Jy[CGe],Jy[CGe],THe(Fy[CGe]))
call yHe(Fy[CGe],n,'d',1.)
call GroupAddUnit(gy[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set hy[CGe]=hy[CGe]-1
if hy[CGe]<=0 then
call QDe()
call Qre(Gy[CGe])
call Qne(gy[CGe])
set gy[CGe]=null
set Gy[CGe]=null
set Fy[CGe]=null
call Mpe(CGe)
endif
return false
endfunction
function oux takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=MMe()
set Fy[CGe]=u
set Ky[CGe]=a
set Hy[CGe]=x
set jy[CGe]=y
set hy[CGe]=R2I(Vn/ En)
set Gy[CGe]=AddSpecialEffect("war3mapImported\\NDD_DeathCoilMissile.mdl",Hy[CGe],jy[CGe])
set ky[CGe]=sxe(Hy[CGe],jy[CGe])+'d'
set Jy[CGe]=d
set gy[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((Gy[CGe]),((Ky[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((Gy[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(Gy[CGe],ky[CGe])
call QIe(CGe,.03125,true,function oTx)
endfunction
function oUx takes unit u,real d returns nothing
local real x0=GetUnitX(u)
local real y0=GetUnitY(u)
local real x=0
local real y=0
local integer i=1
loop
exitwhen i>18
set x=(((x0)*1.)+((60)*1.)*Cos(((i*20)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+((60)*1.)*Sin(((i*20)*1.)*bj_DEGTORAD))
call oux(u,d,x,y,i*20)
set i=i+1
endloop
endfunction
function owx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set qy[CGe]=qy[CGe]-30
call BlzSetSpecialEffectZ(Sy[CGe],qy[CGe])
set Py[CGe]=Py[CGe]-1
if Py[CGe]<0 then
call QDe()
call Qre(AddSpecialEffect("war3mapImported\\NDC_effect1.mdl",Qy[CGe],sy[CGe]))
call GroupEnumUnitsInRange(sv,Qy[CGe],sy[CGe],$A0,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call uee(My[CGe],n,false,py[CGe],py[CGe],THe(My[CGe]))
call yHe(My[CGe],n,'d',1.)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
call Qre(Sy[CGe])
set Sy[CGe]=null
set My[CGe]=null
call Mme(CGe)
endif
return false
endfunction
function oWx takes unit u,real d,real x,real y returns nothing
local integer CGe=MLe()
set My[CGe]=u
set py[CGe]=d
set Qy[CGe]=GetRandomReal(x-$DC,x+$DC)
set sy[CGe]=GetRandomReal(y-$DC,y+$DC)
set Py[CGe]=$A
set qy[CGe]=sxe(Qy[CGe],sy[CGe])+300
set Sy[CGe]=AddSpecialEffect("Abilities\\Weapons\\IllidanMissile\\IllidanMissile.mdl",Qy[CGe],sy[CGe])
call BlzSetSpecialEffectYaw(Sy[CGe],270*bj_DEGTORAD)
call BlzSetSpecialEffectScale(Sy[CGe],2.3)
call BlzSetSpecialEffectZ(Sy[CGe],qy[CGe])
call QIe(CGe,.03125,true,function owx)
endfunction
function oyx takes nothing returns boolean
local integer CGe=Qce()
call oWx(wy[CGe],Wy[CGe],Yy[CGe],zy[CGe])
set yy[CGe]=yy[CGe]-1
if yy[CGe]<=0 then
call QDe()
set wy[CGe]=null
call Mle(CGe)
endif
return false
endfunction
function oYx takes unit u,real d,real x,real y returns nothing
local integer CGe=MKe()
set wy[CGe]=u
set Yy[CGe]=x
set zy[CGe]=y
set yy[CGe]=24
set Wy[CGe]=d
call QIe(CGe,.1,true,function oyx)
endfunction
function ozx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
local real r=1.
set OY[CGe]=OY[CGe]-60
call BlzSetSpecialEffectZ(XY[CGe],OY[CGe])
set rY[CGe]=rY[CGe]-1
if rY[CGe]<=0 then
call QDe()
call Qre(AddSpecialEffect(("war3mapImported\\CLK_effect5.mdl"),((iY[CGe])*1.),((aY[CGe])*1.)))
call GroupEnumUnitsInRange(sv,iY[CGe],aY[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,oY[CGe])and not spe(n)and not tOe(n)then
call Qre(AddSpecialEffectTarget(("war3mapImported\\CLK_targetlight2.mdl"),(n),"chest"))
call yle(xY[CGe],n,EY[CGe],1.)
if(GetUnitAbilityLevel((n),(uE))>0)then
set r=1.26+.04*GetUnitAbilityLevel(xY[CGe],TE)
endif
call uee(xY[CGe],n,true,nY[CGe]*r,VY[CGe]*r,THe(xY[CGe]))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
call Qre(XY[CGe])
set XY[CGe]=null
set xY[CGe]=null
set oY[CGe]=null
call Mke(CGe)
endif
return false
endfunction
function oZx takes unit u,real d,unit v,real r returns nothing
local integer CGe=MJe()
set xY[CGe]=u
set iY[CGe]=GetUnitX(v)
set aY[CGe]=GetUnitY(v)
set rY[CGe]=5
set nY[CGe]=uBe(u,ude(u,2.,.6,Xn))
set VY[CGe]=uce(u,ude(u,$7D0,600,Xn),'B00A')
set EY[CGe]=ude(u,20,2,Xn)
set oY[CGe]=GetOwningPlayer(xY[CGe])
set OY[CGe]=sxe(iY[CGe],aY[CGe])+300
set XY[CGe]=AddSpecialEffect("war3mapImported\\CLK_cuongloi4.mdl",iY[CGe],aY[CGe])
call Qre(AddSpecialEffectTarget("war3mapImported\\CLK_effect3.mdl",xY[CGe],"hand right"))
if r>0 then
set nY[CGe]=d
set VY[CGe]=d
set EY[CGe]=r
endif
call BlzSetSpecialEffectYaw((XY[CGe]),((270)*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((XY[CGe]),((.7)*1.))
call BlzSetSpecialEffectZ(XY[CGe],OY[CGe])
call QIe(CGe,.03125,true,function ozx)
endfunction
function o_x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set dY[CGe]=(((dY[CGe])*1.)+((Rn)*1.)*Cos(((HY[CGe])*1.)*bj_DEGTORAD))
set DY[CGe]=(((DY[CGe])*1.)+((Rn)*1.)*Sin(((HY[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(cY[CGe],dY[CGe],DY[CGe],hY[CGe])
if GY[CGe]<7 then
call GroupEnumUnitsInRange(sv,dY[CGe],DY[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,bY[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,BY[CGe])then
call yle(NY[CGe],n,gY[CGe],1.)
call GroupAddUnit(BY[CGe],n)
call Qre(AddSpecialEffectTarget(("war3mapImported\\CLD_effecttarget.mdl"),(n),"origin"))
call uee(NY[CGe],n,false,fY[CGe],FY[CGe],THe(NY[CGe]))
set GY[CGe]=GY[CGe]+1
if GY[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set CY[CGe]=CY[CGe]-1
if CY[CGe]<=0 then
call QDe()
call Qre(cY[CGe])
call Qne(BY[CGe])
set BY[CGe]=null
set cY[CGe]=null
set NY[CGe]=null
set bY[CGe]=null
call Mje(CGe)
endif
return false
endfunction
function o0x takes unit u,real d,unit v,real r returns nothing
local integer CGe=MHe()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set NY[CGe]=u
set HY[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set dY[CGe]=(((x)*1.)+((80)*1.)*Cos(((HY[CGe])*1.)*bj_DEGTORAD))
set DY[CGe]=(((y)*1.)+((80)*1.)*Sin(((HY[CGe])*1.)*bj_DEGTORAD))
set CY[CGe]=R2I(On/ Rn)
set cY[CGe]=AddSpecialEffect("war3mapImported\\CLD_cuongphong.mdl",dY[CGe],DY[CGe])
set hY[CGe]=sxe(dY[CGe],DY[CGe])
set fY[CGe]=uBe(u,ude(u,1.,.3,An))
set FY[CGe]=uce(u,ude(u,$3E8,300,An),'B00A')
set gY[CGe]=ude(u,20,2,An)
set GY[CGe]=0
set BY[CGe]=CreateGroup()
set bY[CGe]=GetOwningPlayer(NY[CGe])
if r>0 then
set fY[CGe]=d
set FY[CGe]=d
set gY[CGe]=r
endif
call BlzSetSpecialEffectYaw((cY[CGe]),((HY[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((cY[CGe]),((1.5)*1.))
call BlzSetSpecialEffectZ(cY[CGe],hY[CGe])
call QIe(CGe,.03125,true,function o_x)
endfunction
function o1x takes nothing returns boolean
local integer CGe=Qce()
if LY[CGe]==45 or spe(KY[CGe])or not(GetUnitAbilityLevel((KY[CGe]),(bn))>0)then
call UnitRemoveAbility(KY[CGe],bn)
elseif LY[CGe]>45 then
call SetUnitState(KY[CGe],UNIT_STATE_LIFE,GetUnitState(KY[CGe],UNIT_STATE_LIFE)+.4*GetUnitState(KY[CGe],UNIT_STATE_MAX_LIFE))
endif
set LY[CGe]=LY[CGe]-1
if LY[CGe]<=0 then
call QDe()
set Bn[lY[CGe]]=false
set KY[CGe]=null
call Mhe(CGe)
endif
return false
endfunction
function o2x takes unit u,integer i returns nothing
local integer CGe=MGe()
set KY[CGe]=u
set LY[CGe]=55
set lY[CGe]=i
set Bn[lY[CGe]]=true
call tKe(KY[CGe],bn)
call QIe(CGe,1.,true,function o1x)
endfunction
function o3x takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
if GetUnitLifePercent(u)<=50 and not Bn[i]then
call o2x(u,i)
endif
set u=null
set p=null
return false
endfunction
function o4x takes nothing returns boolean
return(GetUnitAbilityLevel((GetTriggerUnit()),(Nn))>0)and o3x()
endfunction
function o5x takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function o4x))
set t=null
endfunction
function o6x takes unit u,player p,real x,real y,real d1,real d2 returns boolean
local integer c=0
local unit n=null
call Qre(AddSpecialEffect(("war3mapImported\\TLQ_phateffect.mdl"),((x)*1.),((y)*1.)))
call GroupEnumUnitsInRange(sv,x,y,$FA,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,p)and not spe(n)and not tOe(n)then
call yHe(u,n,'d',1.5)
call uee(u,n,false,d1,d2,THe(u))
if not(IsUnitType((n),UNIT_TYPE_TAUREN))then
call s5e(n,$C8,.5,soe(x,y,GetUnitX(n),GetUnitY(n)),false,false)
endif
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
return false
endfunction
function o7x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=0
set SY[CGe]=(((SY[CGe])*1.)+((Cn)*1.)*Cos(((wY[CGe])*1.)*bj_DEGTORAD))
set tY[CGe]=(((tY[CGe])*1.)+((Cn)*1.)*Sin(((wY[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(QY[CGe],SY[CGe],tY[CGe],UY[CGe])
call GroupEnumUnitsInRange(sv,SY[CGe],tY[CGe],90,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,qY[CGe])and not spe(n)and not tOe(n)then
set sY[CGe]=0
call GroupClear(sv)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set sY[CGe]=sY[CGe]-1
if sY[CGe]<=0 then
call QDe()
call o6x(PY[CGe],qY[CGe],SY[CGe],tY[CGe],TY[CGe],uY[CGe])
call BlzSetSpecialEffectScale((QY[CGe]),((.01)*1.))
call Qre(QY[CGe])
set QY[CGe]=null
set PY[CGe]=null
set qY[CGe]=null
call Mge(CGe)
endif
return false
endfunction
function o8x takes unit u,real d1,real d2,real a returns nothing
local integer CGe=MFe()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set PY[CGe]=u
set wY[CGe]=a
set SY[CGe]=(((x)*1.)+((80)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set tY[CGe]=(((y)*1.)+((80)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set qY[CGe]=GetOwningPlayer(PY[CGe])
set WY[CGe]=GetPlayerId(qY[CGe])+1
set sY[CGe]=R2I(cn/ Cn)
set QY[CGe]=AddSpecialEffect("war3mapImported\\TLQ_dailucchuong.mdl",SY[CGe],tY[CGe])
set UY[CGe]=sxe(SY[CGe],tY[CGe])+'d'
set TY[CGe]=d1
set uY[CGe]=d2
call BlzSetSpecialEffectYaw((QY[CGe]),((wY[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((QY[CGe]),((2.7)*1.))
call BlzSetSpecialEffectZ(QY[CGe],UY[CGe])
call Qre(AddSpecialEffect(("war3mapImported\\TLQ_phateffect.mdl"),((x)*1.),((y)*1.)))
call QIe(CGe,.03125,true,function o7x)
endfunction
function o9x takes nothing returns boolean
local integer CGe=Qce()
set xz[CGe]=xz[CGe]-1
if xz[CGe]<=0 or spe(ZY[CGe])or not(GetUnitAbilityLevel((ZY[CGe]),(Dn))>0)then
call QDe()
call UnitRemoveAbility(ZY[CGe],Dn)
if not(IsUnitType((ZY[CGe]),UNIT_TYPE_HERO))then
call Tje(ZY[CGe],894,vz[CGe])
call Tje(ZY[CGe],4487,-ez[CGe])
endif
set ZY[CGe]=null
call Mfe(CGe)
endif
return false
endfunction
function rvx takes unit u,real d,real pd returns nothing
local integer CGe=MDe()
set ZY[CGe]=u
set vz[CGe]=d
set ez[CGe]=pd
set xz[CGe]=R2I(20/ .03125)
call tKe(ZY[CGe],Dn)
if not(IsUnitType((ZY[CGe]),UNIT_TYPE_HERO))then
call Tje(ZY[CGe],894,-vz[CGe])
call Tje(ZY[CGe],4487,ez[CGe])
endif
call QIe(CGe,.03125,true,function o9x)
endfunction
function rex takes nothing returns boolean
local unit u=GetTriggerUnit()
local integer c=0
local real d=ude(u,.3,.1,dn)
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local player p=GetOwningPlayer(u)
local unit n=null
local real x2=0
local real y2=0
local real pd='x'*GetHeroStr(u,true)
call Qre(AddSpecialEffect(("war3mapImported\\TLD_daithua.mdl"),((x)*1.),((y)*1.)))
call GroupEnumUnitsInRange(sv,x,y,400,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,p)and not spe(n)and not tOe(n)then
if not(GetUnitAbilityLevel((n),(Dn))>0)then
if not(IsUnitType((n),UNIT_TYPE_TAUREN))and not(GetUnitAbilityLevel((n),('A0NA'))>0)then
set x2=GetUnitX(n)
set y2=GetUnitY(n)
call s5e(n,sre(x,y,x2,y2),.3,soe(x2,y2,x,y),false,false)
endif
call Qre(AddSpecialEffectTarget(("war3mapImported\\TLD_thientruccaster.mdl"),(n),"origin"))
call rvx(n,d,pd)
endif
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set u=null
set p=null
return false
endfunction
function rxx takes nothing returns boolean
return GetSpellAbilityId()==dn and rex()
endfunction
function rox takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function rxx))
set t=null
endfunction
function rrx takes nothing returns boolean
local integer CGe=Qce()
set Ez[CGe]=Ez[CGe]-1
if Ez[CGe]<=0 or spe(nz[CGe])or not(GetUnitAbilityLevel((nz[CGe]),(Fn))>0)then
call QDe()
if Xz[CGe]!=0 then
call Qre(yb[Xz[CGe]])
set yb[Xz[CGe]]=null
endif
call UnitRemoveAbility(nz[CGe],Fn)
call Tje(nz[CGe],5034,-Vz[CGe])
call Tje(nz[CGe],7185,-Vz[CGe])
call Tje(nz[CGe],Ax,-Vz[CGe])
call Tje(nz[CGe],Nx,-Vz[CGe])
set nz[CGe]=null
call Mde(CGe)
endif
return false
endfunction
function rix takes unit u,unit n returns nothing
local integer CGe=MCe()
local real r=1.
if u!=n then
set r=.5
endif
set Vz[CGe]=I2R(R2I(ude(u,'d',30,fn)*r))
set nz[CGe]=n
set Ez[CGe]=R2I(300/ .03125)
if u==n then
set Xz[CGe]=(GetPlayerId(GetOwningPlayer((u)))+1)
if(bde[(GetPlayerId(GetOwningPlayer(((nz[CGe])))))])and not(GetUnitAbilityLevel(((nz[CGe])),('A0YV'))>0)then
set yb[Xz[CGe]]=UCe(bDe[Xz[CGe]],Yb[Xz[CGe]],"origin")
else
set yb[Xz[CGe]]=UCe(nz[CGe],Yb[Xz[CGe]],"origin")
endif
endif
call tKe(nz[CGe],Fn)
call Tje(nz[CGe],5034,Vz[CGe])
call Tje(nz[CGe],7185,Vz[CGe])
call Tje(nz[CGe],Ax,Vz[CGe])
call Tje(nz[CGe],Nx,Vz[CGe])
call QIe(CGe,.03125,true,function rrx)
endfunction
function rax takes nothing returns boolean
local integer CGe=Qce()
set Az[CGe]=Az[CGe]-1
if Az[CGe]<=0 then
call QDe()
call rix(Nz[CGe],bz[CGe])
set Nz[CGe]=null
set bz[CGe]=null
call Mce(CGe)
endif
return false
endfunction
function rnx takes unit u,unit n returns nothing
local integer CGe=MBe()
set Nz[CGe]=u
set bz[CGe]=n
set Az[CGe]=$A
call UnitRemoveAbility(n,Fn)
call QIe(CGe,.03125,true,function rax)
endfunction
function rVx takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local unit n
call GroupEnumUnitsInRange(sv,GetUnitX(u),GetUnitY(u),$3E8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitAlly(n,p)and not spe(n)and not tOe(n)and(IsUnitType((n),UNIT_TYPE_HERO))and GetUnitTypeId(n)!='H00K' then
if not(GetUnitAbilityLevel((n),(Fn))>0)then
call rix(u,n)
else
call rnx(u,n)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set u=null
set p=null
return false
endfunction
function rEx takes nothing returns boolean
return GetSpellAbilityId()==fn and rVx()
endfunction
function rXx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function rEx))
set t=null
endfunction
function rOx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
call GroupEnumUnitsInRange(sv,Fz[CGe],gz[CGe],600,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yHe(fz[CGe],n,'d',.7)
call uee(fz[CGe],n,true,Dz[CGe],Dz[CGe],THe(fz[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set dz[CGe]=dz[CGe]-1
if dz[CGe]<=0 then
call QDe()
set fz[CGe]=null
call Qre(Gz[CGe])
set Gz[CGe]=null
call Mbe(CGe)
endif
return false
endfunction
function rRx takes unit u,real d,real x,real y returns nothing
local integer CGe=MNe()
set fz[CGe]=u
set Dz[CGe]=d
set Fz[CGe]=x
set gz[CGe]=y
set dz[CGe]=5
set Gz[CGe]=AddSpecialEffect("war3mapImported\\EFF_FlowerField.mdl",x,y)
call BlzSetSpecialEffectZ(Gz[CGe],sxe(x,y)+'d')
call QIe(CGe,1.,true,function rOx)
endfunction
function rIx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
call GroupEnumUnitsInRange(sv,GetUnitX(Kz[CGe]),GetUnitY(Kz[CGe]),$5DC,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call Qre(AddSpecialEffectTarget(("war3mapImported\\EFF_FlowerFlash.mdl"),(n),"origin"))
call yle(Kz[CGe],n,'d',.5)
call uee(Kz[CGe],n,true,kz[CGe],kz[CGe],THe(Kz[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set Jz[CGe]=Jz[CGe]-1
if Jz[CGe]<=0 then
call QDe()
set Kz[CGe]=null
call MAe(CGe)
endif
return false
endfunction
function rAx takes unit u,real d returns nothing
local integer CGe=MIe()
set Kz[CGe]=u
set kz[CGe]=d
set Jz[CGe]=4
call QIe(CGe,1.,true,function rIx)
endfunction
function rNx takes nothing returns boolean
local integer CGe=Qce()
if Pz[CGe]==30 then
call UnitRemoveAbility(Mz[CGe],gn)
call Tue(Mz[CGe],-qz[CGe])
endif
set Pz[CGe]=Pz[CGe]-1
if Pz[CGe]<=0 then
call QDe()
set Mz[CGe]=null
set BOe[pz[CGe]]=false
call MRe(CGe)
endif
return false
endfunction
function rbx takes unit u,integer i returns nothing
local integer CGe=MOe()
set Mz[CGe]=u
set pz[CGe]=i
set BOe[pz[CGe]]=true
set Pz[CGe]=40
set qz[CGe]=500+60*BUe[(pz[CGe])*(20)+9]
call UnitRemoveBuffs(Mz[CGe],false,true)
call tKe(u,gn)
call Tue(Mz[CGe],qz[CGe])
call QIe(CGe,1.,true,function rNx)
endfunction
function rBx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local integer c=0
local unit n=null
if not BOe[i]and TQe(u)<=40. then
call rbx(u,i)
call Qre(AddSpecialEffect(("war3mapImported\\TYK_frostnova2.mdl"),((x)*1.),((y)*1.)))
call GroupEnumUnitsInRange(sv,x,y,600,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,p)and not spe(n)and not tOe(n)then
call yLe(u,n,'d',4.)
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set u=null
set p=null
return false
endfunction
function rcx takes nothing returns boolean
return(GetUnitAbilityLevel((GetTriggerUnit()),('A07A'))>0)and rBx()
endfunction
function rCx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function rcx))
set t=null
endfunction
function rdx takes nothing returns boolean
local integer CGe=Qce()
if Tz[CGe]>=tz[CGe]then
call UnitRemoveBuffs(XJ[uz[CGe]],false,true)
if Tz[CGe]==tz[CGe]or spe(XJ[uz[CGe]])then
call UnitRemoveAbility(XJ[uz[CGe]],hn)
endif
endif
set Tz[CGe]=Tz[CGe]-1
if Tz[CGe]<=0 then
call QDe()
set Hn[uz[CGe]]=false
call MXe(CGe)
endif
return false
endfunction
function rDx takes integer i returns boolean
local integer CGe=MEe()
set uz[CGe]=i
set Tz[CGe]=R2I(16/ .03125)
set tz[CGe]=R2I($D/ .03125)
call tKe(XJ[uz[CGe]],hn)
call QIe(CGe,.03125,true,function rdx)
return false
endfunction
function rfx takes nothing returns boolean
local unit u=GetTriggerUnit()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
if not Hn[i]and GetRandomReal(0,'d')<=(16+4*BUe[(i)*(20)+9])then
set Hn[i]=true
call rDx(i)
endif
set u=null
return false
endfunction
function rFx takes nothing returns boolean
return(GetUnitAbilityLevel((GetTriggerUnit()),(Gn))>0)and rfx()
endfunction
function rgx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function rFx))
set t=null
endfunction
function rGx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=0
set eZ[CGe]=(((eZ[CGe])*1.)+((Jn)*1.)*Cos(((VZ[CGe])*1.)*bj_DEGTORAD))
set xZ[CGe]=(((xZ[CGe])*1.)+((Jn)*1.)*Sin(((VZ[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(Zz[CGe],eZ[CGe],xZ[CGe],nZ[CGe])
if aZ[CGe]<7 then
call GroupEnumUnitsInRange(sv,eZ[CGe],xZ[CGe],$B4,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Yz[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,zz[CGe])then
call yHe(yz[CGe],n,iZ[CGe],1.)
call GroupAddUnit(zz[CGe],n)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TLQ_targeteffect.mdl"),(n),"chest"))
call uee(yz[CGe],n,false,oZ[CGe],rZ[CGe],THe(yz[CGe]))
set aZ[CGe]=aZ[CGe]+1
if aZ[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set vZ[CGe]=vZ[CGe]-1
if vZ[CGe]<=0 then
call QDe()
call BlzSetSpecialEffectScale((Zz[CGe]),((.01)*1.))
call Qre(Zz[CGe])
call Qne(zz[CGe])
set zz[CGe]=null
set Zz[CGe]=null
set yz[CGe]=null
set Yz[CGe]=null
call MVe(CGe)
endif
return false
endfunction
function rhx takes unit u,real d1,real d2,real r,real x,real y,real a returns nothing
local integer CGe=Mne()
local real T0e=1.
set yz[CGe]=u
set VZ[CGe]=a
set eZ[CGe]=x
set xZ[CGe]=y
set Yz[CGe]=GetOwningPlayer(yz[CGe])
set EZ[CGe]=GetPlayerId(Yz[CGe])+1
set vZ[CGe]=R2I((jn)/ Jn)
if BUe[(EZ[CGe])*(20)+9]>0 then
set vZ[CGe]=R2I((jn+'d')/ Jn)
set T0e=BUe[(EZ[CGe])*(20)+9]*.02+1.13
endif
set Zz[CGe]=AddSpecialEffect("war3mapImported\\TLQ_datmaeffect.mdl",eZ[CGe],xZ[CGe])
set nZ[CGe]=sxe(eZ[CGe],xZ[CGe])
set oZ[CGe]=d1*T0e
set rZ[CGe]=d2*T0e
set iZ[CGe]=r
set aZ[CGe]=0
set zz[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((Zz[CGe]),((VZ[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((Zz[CGe]),((2.2)*1.))
call BlzSetSpecialEffectZ(Zz[CGe],nZ[CGe])
call QIe(CGe,.03125,true,function rGx)
endfunction
function rHx takes nothing returns boolean
local integer CGe=Qce()
set AZ[CGe]=AZ[CGe]-1
if AZ[CGe]<=0 then
call QDe()
call rhx(IZ[CGe],BZ[CGe],cZ[CGe],CZ[CGe],NZ[CGe],bZ[CGe],dZ[CGe])
set IZ[CGe]=null
call Mae(CGe)
endif
return false
endfunction
function rjx takes unit u,real d,unit v,real r returns nothing
local integer CGe=Mie()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set IZ[CGe]=u
set dZ[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set NZ[CGe]=(((x)*1.)+((30)*1.)*Cos(((dZ[CGe])*1.)*bj_DEGTORAD))
set bZ[CGe]=(((y)*1.)+((30)*1.)*Sin(((dZ[CGe])*1.)*bj_DEGTORAD))
set AZ[CGe]=1
set BZ[CGe]=uBe(u,ude(u,3.,.9,kn))
set cZ[CGe]=uce(u,ude(u,$7D0,600,kn),'B006')
set CZ[CGe]=ude(u,20,2,kn)
set BZ[CGe]=BZ[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A03E'))
set cZ[CGe]=cZ[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A03E'))
call Qre(AddSpecialEffectTarget(("war3mapImported\\TLQ_casternew.mdl"),(IZ[CGe]),"origin"))
if r>0 then
set BZ[CGe]=d
set cZ[CGe]=d
set CZ[CGe]=r
endif
call rhx(IZ[CGe],BZ[CGe],cZ[CGe],CZ[CGe],NZ[CGe],bZ[CGe],dZ[CGe])
call QIe(CGe,.2,true,function rHx)
endfunction
function rJx takes nothing returns boolean
local integer CGe=Qce()
set JZ[CGe]=JZ[CGe]-1
if JZ[CGe]<=0 or spe(gZ[CGe])or not(GetUnitAbilityLevel((gZ[CGe]),(Mn))>0)then
call QDe()
call UnitRemoveAbility(gZ[CGe],Mn)
call Qre(yb[jZ[CGe]])
set yb[jZ[CGe]]=null
call Tje(gZ[CGe],4888,-GZ[CGe])
call Tje(gZ[CGe],8073,-hZ[CGe])
call Tje(gZ[CGe],5724,-HZ[CGe])
set gZ[CGe]=null
call Mre(CGe)
endif
return false
endfunction
function rkx takes unit u,integer i returns nothing
local integer CGe=Moe()
set gZ[CGe]=u
set GZ[CGe]=60+30*BUe[(i)*(20)+9]
set hZ[CGe]=3+BUe[(i)*(20)+9]
set HZ[CGe]=1.+.3*BUe[(i)*(20)+9]
set JZ[CGe]=R2I(6/ .03125)
set jZ[CGe]=(GetPlayerId(GetOwningPlayer((u)))+1)
if(bde[(GetPlayerId(GetOwningPlayer(((gZ[CGe])))))])and not(GetUnitAbilityLevel(((gZ[CGe])),('A0YV'))>0)then
set yb[jZ[CGe]]=UCe(bDe[jZ[CGe]],Yb[jZ[CGe]],"origin")
else
set yb[jZ[CGe]]=UCe(gZ[CGe],Yb[jZ[CGe]],"origin")
endif
call tKe(gZ[CGe],Mn)
call Tje(gZ[CGe],4888,GZ[CGe])
call Tje(gZ[CGe],8073,hZ[CGe])
call Tje(gZ[CGe],5724,HZ[CGe])
call QIe(CGe,.03125,true,function rJx)
endfunction
function rKx takes nothing returns boolean
local integer CGe=Qce()
set mZ[CGe]=mZ[CGe]-1
if mZ[CGe]<=0 or spe(LZ[CGe])or not(GetUnitAbilityLevel((LZ[CGe]),(ln))>0)then
call QDe()
call UnitRemoveAbility(LZ[CGe],ln)
set LZ[CGe]=null
call Mxe(CGe)
endif
return false
endfunction
function rlx takes unit u returns nothing
local integer CGe=Mee()
set LZ[CGe]=u
set mZ[CGe]=R2I(6/ .03125)
call tKe(LZ[CGe],ln)
call QIe(CGe,.03125,true,function rKx)
endfunction
function rLx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set SZ[CGe]=(((SZ[CGe])*1.)+((mn)*1.)*Cos(((WZ[CGe])*1.)*bj_DEGTORAD))
set tZ[CGe]=(((tZ[CGe])*1.)+((mn)*1.)*Sin(((WZ[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(yZ[CGe],SZ[CGe],tZ[CGe],uZ[CGe])
if UZ[CGe]<7 then
call GroupEnumUnitsInRange(sv,SZ[CGe],tZ[CGe],90,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,QZ[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,wZ[CGe])then
call yLe(qZ[CGe],n,TZ[CGe],1.5)
if not(GetUnitAbilityLevel((n),(ln))>0)then
call rlx(n)
endif
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\HydraliskImpact\\HydraliskImpact.mdl"),(n),"chest"))
call GroupAddUnit(wZ[CGe],n)
set UZ[CGe]=UZ[CGe]+1
if UZ[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
else
set sZ[CGe]=0
endif
set sZ[CGe]=sZ[CGe]-1
if sZ[CGe]<=0 then
call QDe()
call Qne(wZ[CGe])
call Qre(yZ[CGe])
set yZ[CGe]=null
set wZ[CGe]=null
set qZ[CGe]=null
set QZ[CGe]=null
call Mve(CGe)
endif
return false
endfunction
function rmx takes unit u,real r,real a returns nothing
local integer CGe=m9e()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set qZ[CGe]=u
set WZ[CGe]=a
set SZ[CGe]=(((x)*1.)+((80)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set tZ[CGe]=(((y)*1.)+((80)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set QZ[CGe]=GetOwningPlayer(qZ[CGe])
set sZ[CGe]=R2I(Ln/ mn)
set yZ[CGe]=AddSpecialEffect("war3mapImported\\DMTT_doancannhan.mdl",SZ[CGe],tZ[CGe])
set uZ[CGe]=sxe(SZ[CGe],tZ[CGe])+'d'
set TZ[CGe]=r
set wZ[CGe]=CreateGroup()
set UZ[CGe]=0
call BlzSetSpecialEffectYaw((yZ[CGe]),((WZ[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((yZ[CGe]),((.8)*1.))
call BlzSetSpecialEffectZ(yZ[CGe],uZ[CGe])
call QIe(CGe,.03125,true,function rLx)
endfunction
function rMx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real r=ude(u,40,5,Kn)
local real a=soe(GetUnitX(u),GetUnitY(u),GetSpellTargetX(),GetSpellTargetY())
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
if BUe[(i)*(20)+9]>0 then
call rkx(u,i)
endif
call rmx(u,r,a)
call rmx(u,r,a+$F)
call rmx(u,r,a-$F)
call rmx(u,r,a+30)
call rmx(u,r,a-30)
set u=null
return false
endfunction
function rpx takes nothing returns boolean
return GetSpellAbilityId()==Kn and rMx()
endfunction
function rPx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function rpx))
set t=null
endfunction
function rqx takes nothing returns boolean
local integer CGe=Qce()
call UnitRemoveBuffs(v0[CGe],false,true)
set e0[CGe]=e0[CGe]-1
if e0[CGe]<=0 or spe(v0[CGe])or not(GetUnitAbilityLevel((v0[CGe]),('A03U'))>0)then
call QDe()
call UnitRemoveAbility(v0[CGe],'A03U')
set v0[CGe]=null
call m8e(CGe)
endif
return false
endfunction
function rQx takes unit u returns nothing
local integer CGe=m7e()
set v0[CGe]=u
set e0[CGe]=R2I(2./ .03125)
call tKe(v0[CGe],'A03U')
call QIe(CGe,.03125,true,function rqx)
endfunction
function rsx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer QZe=0
if qb[A0[CGe]]==2 then
set Qv=tMe(V0[CGe],'e003',E0[CGe],X0[CGe],I0[CGe],.2)
else
set Qv=tMe(V0[CGe],'e002',E0[CGe],X0[CGe],I0[CGe],.2)
endif
call SetUnitVertexColor(Qv,$FF,$FF,$FF,50)
call SetUnitAnimation(Qv,"attack")
set E0[CGe]=(((E0[CGe])*1.)+((pn)*1.)*Cos(((I0[CGe])*1.)*bj_DEGTORAD))
set X0[CGe]=(((X0[CGe])*1.)+((pn)*1.)*Sin(((I0[CGe])*1.)*bj_DEGTORAD))
if sZe(E0[CGe],X0[CGe])then
call SetUnitX(n0[CGe],E0[CGe])
call SetUnitY(n0[CGe],X0[CGe])
else
set R0[CGe]=0
endif
set R0[CGe]=R0[CGe]-1
if R0[CGe]<=0 then
call QDe()
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIvi\\AIviTarget.mdl"),((E0[CGe])*1.),((X0[CGe])*1.)))
call GroupEnumUnitsInRange(sv,E0[CGe],X0[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,V0[CGe])and not spe(n)and not tOe(n)then
call yLe(n0[CGe],n,O0[CGe],3.)
call yHe(n0[CGe],n,O0[CGe],2.)
set QZe=QZe+1
if QZe>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
call SetPlayerAbilityAvailable((V0[CGe]),('A03S'),true)
call rQx(n0[CGe])
set n=null
set n0[CGe]=null
set V0[CGe]=null
call m6e(CGe)
endif
return false
endfunction
function rSx takes unit u,real r,real x,real y returns nothing
local integer CGe=m5e()
set n0[CGe]=u
set V0[CGe]=GetOwningPlayer(u)
set E0[CGe]=GetUnitX(u)
set X0[CGe]=GetUnitY(u)
set O0[CGe]=r
set R0[CGe]=R2I(sre(E0[CGe],X0[CGe],x,y)/ pn)
set I0[CGe]=soe(E0[CGe],X0[CGe],x,y)
set A0[CGe]=GetPlayerId(V0[CGe])+1
call SetPlayerAbilityAvailable((V0[CGe]),('A03S'),false)
call QIe(CGe,.03125,true,function rsx)
endfunction
function rtx takes nothing returns boolean
local unit u=GetTriggerUnit()
call rSx(u,ude(u,40,5,'A03S'),GetSpellTargetX(),GetSpellTargetY())
set u=null
return false
endfunction
function rTx takes nothing returns boolean
return GetSpellAbilityId()=='A03S' and rtx()
endfunction
function rux takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Filter(function rTx))
set t=null
endfunction
function rUx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set f0[CGe]=(((f0[CGe])*1.)+((30)*1.)*Cos(((d0[CGe])*1.)*bj_DEGTORAD))
set F0[CGe]=(((F0[CGe])*1.)+((30)*1.)*Sin(((d0[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(h0[CGe],f0[CGe],F0[CGe],D0[CGe])
call GroupEnumUnitsInRange(sv,f0[CGe],F0[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,C0[CGe])then
call Qre(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl",n,"chest"))
call yHe(c0[CGe],n,60,.6)
call uee(c0[CGe],n,false,g0[CGe],g0[CGe],THe(c0[CGe]))
call GroupAddUnit(C0[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set G0[CGe]=G0[CGe]-1
if G0[CGe]<=0 then
call QDe()
call Qre(h0[CGe])
call Qne(C0[CGe])
set C0[CGe]=null
set h0[CGe]=null
set c0[CGe]=null
call m4e(CGe)
endif
return false
endfunction
function rwx takes unit u,real QPe,real x,real y,real a returns nothing
local integer CGe=m3e()
set c0[CGe]=u
set d0[CGe]=a
set f0[CGe]=x
set F0[CGe]=y
set g0[CGe]=QPe
set h0[CGe]=AddSpecialEffect("war3mapImported\\NMK_kiemanh.mdl",f0[CGe],F0[CGe])
set D0[CGe]=sxe(f0[CGe],F0[CGe])+'d'
set G0[CGe]=R2I(800/ 30)
set C0[CGe]=CreateGroup()
call BlzSetSpecialEffectScale(h0[CGe],.7)
call BlzSetSpecialEffectZ(h0[CGe],D0[CGe])
call BlzSetSpecialEffectYaw(h0[CGe],d0[CGe]*bj_DEGTORAD)
call QIe(CGe,.03125,true,function rUx)
endfunction
function rWx takes nothing returns boolean
local integer CGe=Qce()
local real r=GetRandomReal(-45,45)
local real x=(((GetUnitX(k0[CGe]))*1.)+((90)*1.)*Cos(((L0[CGe]+r)*1.)*bj_DEGTORAD))
local real y=(((GetUnitY(k0[CGe]))*1.)+((90)*1.)*Sin(((L0[CGe]+r)*1.)*bj_DEGTORAD))
call rwx(k0[CGe],K0[CGe],x,y,L0[CGe])
set l0[CGe]=l0[CGe]-1
if l0[CGe]<=0 then
call QDe()
set k0[CGe]=null
call m2e(CGe)
endif
return false
endfunction
function ryx takes unit u,real d,unit v returns nothing
local integer CGe=m1e()
local real x1=GetUnitX(u)
local real y1=GetUnitY(u)
local real x2=GetUnitX(v)
local real y2=GetUnitY(v)
set k0[CGe]=u
set l0[CGe]=3
set K0[CGe]=d
set L0[CGe]=soe(x1,y1,x2,y2)
call QIe(CGe,.18,true,function rWx)
endfunction
function rYx takes nothing returns boolean
local integer CGe=Qce()
local unit n
set T0[CGe]=(((T0[CGe])*1.)+((32)*1.)*Cos(((t0[CGe])*1.)*bj_DEGTORAD))
set u0[CGe]=(((u0[CGe])*1.)+((32)*1.)*Sin(((t0[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(S0[CGe],T0[CGe],u0[CGe],s0[CGe])
call GroupEnumUnitsInRange(sv,T0[CGe],u0[CGe],$A0,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,U0[CGe])then
call GroupAddUnit(U0[CGe],n)
call yHe(P0[CGe],n,'d',1.)
call uee(P0[CGe],n,false,q0[CGe],q0[CGe],THe(P0[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set Q0[CGe]=Q0[CGe]-1
if Q0[CGe]<=0 then
call Qre(S0[CGe])
call Qne(U0[CGe])
set S0[CGe]=null
set U0[CGe]=null
set P0[CGe]=null
call QDe()
call m0e(CGe)
endif
return false
endfunction
function rzx takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=m_e()
set P0[CGe]=u
set q0[CGe]=d
set t0[CGe]=a
set T0[CGe]=(((x)*1.)+((40)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set u0[CGe]=(((y)*1.)+((40)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set Q0[CGe]=R2I(720/ 32)
set S0[CGe]=AddSpecialEffect("war3mapImported\\NMK_kiemanh.mdl",T0[CGe],u0[CGe])
set s0[CGe]=sxe(T0[CGe],u0[CGe])+70
set U0[CGe]=CreateGroup()
call BlzSetSpecialEffectScale(S0[CGe],.7)
call BlzSetSpecialEffectZ(S0[CGe],s0[CGe])
call BlzSetSpecialEffectYaw(S0[CGe],t0[CGe]*bj_DEGTORAD)
call QIe(CGe,.03125,true,function rYx)
endfunction
function rZx takes nothing returns boolean
local integer CGe=Qce()
call rzx(z0[CGe],Z0[CGe],e1[CGe],o1[CGe],GetRandomReal($F,345))
set v1[CGe]=v1[CGe]-1
if v1[CGe]<=0 then
call QDe()
set z0[CGe]=null
call mZe(CGe)
endif
return false
endfunction
function r_x takes unit u,real QPe returns nothing
local integer CGe=mze()
set z0[CGe]=u
set v1[CGe]=40
set Z0[CGe]=QPe
set e1[CGe]=GetUnitX(u)
set o1[CGe]=GetUnitY(u)
call QIe(CGe,.08,true,function rZx)
endfunction
function r0x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set C1[CGe]=C1[CGe]+1
if C1[CGe]>16 then
set I1[CGe]=(((I1[CGe])*1.)+((qn)*1.)*Cos(((c1[CGe])*1.)*bj_DEGTORAD))
set A1[CGe]=(((A1[CGe])*1.)+((qn)*1.)*Sin(((c1[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(O1[CGe],I1[CGe],A1[CGe],B1[CGe])
call GroupEnumUnitsInRange(sv,I1[CGe],A1[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,D1[CGe])then
call GroupAddUnit(D1[CGe],n)
call yHe(X1[CGe],n,'d',1.)
call Qre(AddSpecialEffectTarget(("war3mapImported\\NMK_kiemanh.mdl"),(n),"chest"))
call uee(X1[CGe],n,true,N1[CGe],N1[CGe],THe(X1[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set R1[CGe]=R1[CGe]-1
if R1[CGe]<=0 then
call QDe()
call Qre(O1[CGe])
call Qne(D1[CGe])
set D1[CGe]=null
set O1[CGe]=null
set X1[CGe]=null
call mYe(CGe)
endif
return false
endfunction
function r1x takes unit u,real x,real y,real d,real a returns nothing
local integer CGe=mye()
set X1[CGe]=u
set I1[CGe]=x
set A1[CGe]=y
set c1[CGe]=a
set N1[CGe]=d
set B1[CGe]=sxe(I1[CGe],A1[CGe])+'d'
set O1[CGe]=AddSpecialEffect("war3mapImported\\NMK_kiemanh.mdl",I1[CGe],A1[CGe])
set R1[CGe]=R2I(Pn/ qn)
set C1[CGe]=0
set D1[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((O1[CGe]),((c1[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((O1[CGe]),((.6)*1.))
call BlzSetSpecialEffectZ(O1[CGe],B1[CGe])
call QIe(CGe,.03125,true,function r0x)
endfunction
function r2x takes nothing returns boolean
local integer CGe=Qce()
local real x=(((H1[CGe])*1.)+((464)*1.)*Cos(((30*G1[CGe])*1.)*bj_DEGTORAD))
local real y=(((j1[CGe])*1.)+((464)*1.)*Sin(((30*G1[CGe])*1.)*bj_DEGTORAD))
call r1x(k1[CGe],x,y,J1[CGe],soe(x,y,H1[CGe],j1[CGe]))
set G1[CGe]=G1[CGe]-1
if G1[CGe]<=0 then
call QDe()
set k1[CGe]=null
call mWe(CGe)
endif
return false
endfunction
function r3x takes unit u,real d,real x0,real y0 returns nothing
local integer CGe=mwe()
set H1[CGe]=x0
set j1[CGe]=y0
set k1[CGe]=u
set J1[CGe]=d
set G1[CGe]=$C
call QIe(CGe,.1,true,function r2x)
endfunction
function r4x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Q1[CGe]=(((Q1[CGe])*1.)+((30)*1.)*Cos(((U1[CGe])*1.)*bj_DEGTORAD))
set S1[CGe]=(((S1[CGe])*1.)+((30)*1.)*Sin(((U1[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(P1[CGe],Q1[CGe],S1[CGe],u1[CGe])
call GroupEnumUnitsInRange(sv,Q1[CGe],S1[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,p1[CGe])then
call uee(M1[CGe],n,false,T1[CGe],T1[CGe],THe(M1[CGe]))
call yHe(M1[CGe],n,'d',.5)
call GroupAddUnit(p1[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set q1[CGe]=q1[CGe]-1
if q1[CGe]<=0 then
call QDe()
call Qre(P1[CGe])
call Qne(p1[CGe])
set p1[CGe]=null
set P1[CGe]=null
set M1[CGe]=null
call mUe(CGe)
endif
return false
endfunction
function r5x takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=mue()
set M1[CGe]=u
set U1[CGe]=a
set Q1[CGe]=x
set S1[CGe]=y
set q1[CGe]=R2I(390/ 30)
set P1[CGe]=AddSpecialEffect("war3mapImported\\NMK_kiemanh.mdl",Q1[CGe],S1[CGe])
set u1[CGe]=sxe(Q1[CGe],S1[CGe])+'d'
set T1[CGe]=d
set p1[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((P1[CGe]),((U1[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((P1[CGe]),((.5)*1.))
call BlzSetSpecialEffectZ(P1[CGe],u1[CGe])
call QIe(CGe,.03125,true,function r4x)
endfunction
function r6x takes unit u,real d,real x0,real y0 returns nothing
local integer i=1
local real x=0
local real y=0
loop
exitwhen i>8
set x=(((x0)*1.)+((60)*1.)*Cos(((i*45)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+((60)*1.)*Sin(((i*45)*1.)*bj_DEGTORAD))
call r5x(u,d,x,y,i*45)
set i=i+1
endloop
endfunction
function r7x takes nothing returns boolean
local integer CGe=Qce()
local real x=0
local real y=0
local integer i=1
loop
exitwhen i>4
set x=(((o2[CGe])*1.)+(($FA*Z1[CGe])*1.)*Cos(((V2[CGe]+90*i)*1.)*bj_DEGTORAD))
set y=(((n2[CGe])*1.)+(($FA*Z1[CGe])*1.)*Sin(((V2[CGe]+90*i)*1.)*bj_DEGTORAD))
call r6x(v2[CGe],e2[CGe],x,y)
set i=i+1
endloop
set Z1[CGe]=Z1[CGe]+1
if Z1[CGe]>=4 or spe(v2[CGe])then
call QDe()
set v2[CGe]=null
call mTe(CGe)
endif
return false
endfunction
function r8x takes unit u,real d returns nothing
local integer CGe=mte()
set Z1[CGe]=1
set v2[CGe]=u
set e2[CGe]=d
set V2[CGe]=GetUnitFacing(u)
set o2[CGe]=GetUnitX(u)
set n2[CGe]=GetUnitY(u)
call QIe(CGe,.7,true,function r7x)
endfunction
function r9x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
call GroupEnumUnitsInRange(sv,D2[CGe],F2[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,c2[CGe])and not spe(n)and not tOe(n)then
call yKe(g2[CGe],n,B2[CGe],2.)
call uee(g2[CGe],n,true,A2[CGe],N2[CGe],THe(g2[CGe]))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set I2[CGe]=I2[CGe]-1
if I2[CGe]<=0 then
call QDe()
call Qre(C2[CGe])
set C2[CGe]=null
set g2[CGe]=null
set c2[CGe]=null
call mSe(CGe)
endif
return false
endfunction
function ivx takes unit u,player p,real x,real y,real d1,real d2,real r returns boolean
local integer CGe=mse()
local integer c=0
local unit n=null
set g2[CGe]=u
set c2[CGe]=p
set D2[CGe]=x
set F2[CGe]=y
set A2[CGe]=d1
set N2[CGe]=d2
set B2[CGe]=r
set C2[CGe]=AddSpecialEffect("war3mapImported\\TND_danchifire.mdl",D2[CGe],F2[CGe])
set I2[CGe]=2
call BlzSetSpecialEffectZ(C2[CGe],sxe(D2[CGe],F2[CGe]))
call GroupEnumUnitsInRange(sv,x,y,'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,p)and not spe(n)and not tOe(n)then
call yKe(u,n,r,2.)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl"),(n),"chest"))
call uee(u,n,true,d1,d2,THe(u))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
call QIe(CGe,1.,true,function r9x)
return false
endfunction
function iex takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set m2[CGe]=(((m2[CGe])*1.)+((sn)*1.)*Cos(((S2[CGe])*1.)*bj_DEGTORAD))
set M2[CGe]=(((M2[CGe])*1.)+((sn)*1.)*Sin(((S2[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(l2[CGe],m2[CGe],M2[CGe],Q2[CGe])
call GroupEnumUnitsInRange(sv,m2[CGe],M2[CGe],70,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,k2[CGe])and not spe(n)and not tOe(n)then
call GroupClear(sv)
set L2[CGe]=0
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set L2[CGe]=L2[CGe]-1
if L2[CGe]<=0 then
call QDe()
call ivx(J2[CGe],k2[CGe],m2[CGe],M2[CGe],p2[CGe],P2[CGe],q2[CGe])
call Qre(l2[CGe])
set l2[CGe]=null
set J2[CGe]=null
set k2[CGe]=null
call mQe(CGe)
endif
return false
endfunction
function ixx takes unit u,real d,unit v,real r returns nothing
local integer CGe=mqe()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set J2[CGe]=u
set S2[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set m2[CGe]=(((x)*1.)+((30)*1.)*Cos(((S2[CGe])*1.)*bj_DEGTORAD))
set M2[CGe]=(((y)*1.)+((30)*1.)*Sin(((S2[CGe])*1.)*bj_DEGTORAD))
set L2[CGe]=R2I(Qn/ sn)
set l2[CGe]=AddSpecialEffect("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl",m2[CGe],M2[CGe])
set Q2[CGe]=sxe(m2[CGe],M2[CGe])+'d'
set p2[CGe]=uBe(u,ude(u,1.,.3,Sn))
set P2[CGe]=uce(u,ude(u,$5DC,450,Sn),'B009')
set q2[CGe]=ude(u,20,2,Sn)
set k2[CGe]=GetOwningPlayer(J2[CGe])
call Qre(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl",J2[CGe],"weapon"))
if r>0 then
set p2[CGe]=d
set P2[CGe]=d
set q2[CGe]=r
endif
call BlzSetSpecialEffectYaw((l2[CGe]),((S2[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((l2[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(l2[CGe],Q2[CGe])
call QIe(CGe,.03125,true,function iex)
endfunction
function iox takes nothing returns boolean
local integer CGe=Qce()
local real x0=GetUnitX(w2[CGe])
local real y0=GetUnitY(w2[CGe])
local real x=GetRandomReal(x0-600,x0+600)
local real y=GetRandomReal(y0-600,y0+600)
local unit n=null
call Qre(AddSpecialEffect("war3mapImported\\TidalEruption.mdl",x,y))
call GroupEnumUnitsInRange(sv,x,y,$FA,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yLe(w2[CGe],n,'d',.5)
call uee(w2[CGe],n,true,W2[CGe],W2[CGe],THe(w2[CGe]))
call SetUnitState(n,UNIT_STATE_MANA,0)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set Y2[CGe]=Y2[CGe]-1
if Y2[CGe]<=0 then
call QDe()
set w2[CGe]=null
call mPe(CGe)
endif
return false
endfunction
function irx takes unit u,real d returns nothing
local integer CGe=mpe()
set w2[CGe]=u
set Y2[CGe]=16
set W2[CGe]=d
call QIe(CGe,.2,true,function iox)
endfunction
function iix takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set O3[CGe]=O3[CGe]+1
if O3[CGe]>16 then
set i3[CGe]=(((i3[CGe])*1.)+((Un)*1.)*Cos(((X3[CGe])*1.)*bj_DEGTORAD))
set n3[CGe]=(((n3[CGe])*1.)+((Un)*1.)*Sin(((X3[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(x3[CGe],i3[CGe],n3[CGe],E3[CGe])
call GroupEnumUnitsInRange(sv,i3[CGe],n3[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,R3[CGe])then
call GroupAddUnit(R3[CGe],n)
call yke(e3[CGe],n,'d',2.)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TYD_vudalehoa.mdl"),(n),"chest"))
call uee(e3[CGe],n,true,V3[CGe],V3[CGe],THe(e3[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set o3[CGe]=o3[CGe]-1
if o3[CGe]<=0 then
call QDe()
call BlzSetSpecialEffectScale((x3[CGe]),((.001)*1.))
call Qre(x3[CGe])
call Qne(R3[CGe])
set R3[CGe]=null
set x3[CGe]=null
set e3[CGe]=null
call mMe(CGe)
endif
return false
endfunction
function iax takes unit u,real x,real y,real d,real a returns nothing
local integer CGe=mme()
set e3[CGe]=u
set i3[CGe]=x
set n3[CGe]=y
set X3[CGe]=a
set V3[CGe]=d
set E3[CGe]=sxe(i3[CGe],n3[CGe])+'d'
set x3[CGe]=AddSpecialEffect("war3mapImported\\TYD_vudalehoa.mdl",i3[CGe],n3[CGe])
set o3[CGe]=R2I(Tn/ Un)
set O3[CGe]=0
set R3[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((x3[CGe]),((X3[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((x3[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(x3[CGe],E3[CGe])
call QIe(CGe,.03125,true,function iix)
endfunction
function inx takes nothing returns boolean
local integer CGe=Qce()
local real x=(((B3[CGe])*1.)+((800)*1.)*Cos(((18*b3[CGe])*1.)*bj_DEGTORAD))
local real y=(((c3[CGe])*1.)+((800)*1.)*Sin(((18*b3[CGe])*1.)*bj_DEGTORAD))
call iax(D3[CGe],x,y,C3[CGe],soe(x,y,B3[CGe],c3[CGe]))
set b3[CGe]=b3[CGe]-1
if b3[CGe]<=0 then
call QDe()
set D3[CGe]=null
call mLe(CGe)
endif
return false
endfunction
function iVx takes unit u,real d returns nothing
local integer CGe=mle()
set B3[CGe]=GetUnitX(u)
set c3[CGe]=GetUnitY(u)
set D3[CGe]=u
set C3[CGe]=d
set b3[CGe]=20
call QIe(CGe,.2,true,function inx)
endfunction
function iEx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set J3[CGe]=(((J3[CGe])*1.)+((Wn)*1.)*Cos(((M3[CGe])*1.)*bj_DEGTORAD))
set k3[CGe]=(((k3[CGe])*1.)+((Wn)*1.)*Sin(((M3[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(H3[CGe],J3[CGe],k3[CGe],m3[CGe])
call GroupEnumUnitsInRange(sv,J3[CGe],k3[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,h3[CGe])then
call yke(G3[CGe],n,L3[CGe],2.)
call GroupAddUnit(h3[CGe],n)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl"),(n),"chest"))
call uee(G3[CGe],n,false,l3[CGe],l3[CGe],THe(G3[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set j3[CGe]=j3[CGe]-1
if j3[CGe]<=0 then
call QDe()
call Qre(H3[CGe])
call Qne(h3[CGe])
set h3[CGe]=null
set H3[CGe]=null
set G3[CGe]=null
call mKe(CGe)
endif
return false
endfunction
function iXx takes unit u,real d,unit v,real r returns nothing
local integer CGe=mke()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set G3[CGe]=u
set M3[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set J3[CGe]=(((x)*1.)+((50)*1.)*Cos(((M3[CGe])*1.)*bj_DEGTORAD))
set k3[CGe]=(((y)*1.)+((50)*1.)*Sin(((M3[CGe])*1.)*bj_DEGTORAD))
set j3[CGe]=R2I(wn/ Wn)
set H3[CGe]=AddSpecialEffect("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl",J3[CGe],k3[CGe])
set m3[CGe]=sxe(J3[CGe],k3[CGe])+'d'
set l3[CGe]=d
set L3[CGe]=r
set h3[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((H3[CGe]),((M3[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((H3[CGe]),((1.5)*1.))
call BlzSetSpecialEffectZ(H3[CGe],m3[CGe])
call QIe(CGe,.03125,true,function iEx)
endfunction
function iOx takes nothing returns boolean
local integer CGe=Qce()
set Q3[CGe]=Q3[CGe]-1
if Q3[CGe]<=0 or spe(S3[CGe])then
call QDe()
call Tje(S3[CGe],5740,-.99)
set S3[CGe]=null
call mJe(CGe)
endif
return false
endfunction
function iRx takes unit u returns nothing
local integer CGe=mje()
set Q3[CGe]=$C
set S3[CGe]=u
call Tje(u,5740,.99)
call QIe(CGe,1.,true,function iOx)
endfunction
function iIx takes nothing returns boolean
local integer CGe=Qce()
set W3[CGe]=W3[CGe]-1
if W3[CGe]<=0 or spe(w3[CGe])or not(GetUnitAbilityLevel((w3[CGe]),(Yn))>0)then
call QDe()
call UnitRemoveAbility(w3[CGe],Yn)
call Tje(w3[CGe],4888,-y3[CGe])
call Tje(w3[CGe],ax,-Y3[CGe])
call Tje(w3[CGe],xx,-z3[CGe])
call Tje(w3[CGe],5740,-.999)
set BRe[Z3[CGe]]=0
set w3[CGe]=null
call mHe(CGe)
endif
return false
endfunction
function iAx takes nothing returns boolean
local integer CGe=mhe()
set w3[CGe]=GetTriggerUnit()
set Z3[CGe]=(GetPlayerId(GetOwningPlayer((w3[CGe])))+1)
set W3[CGe]=R2I(16/ .03125)
set y3[CGe]=I2R(R2I(TKe(w3[CGe],4888)*ude(w3[CGe],.2,.05,yn)))
set Y3[CGe]=ude(w3[CGe],.5,.1,yn)
set z3[CGe]=ude(w3[CGe],.23,.03,yn)
call tKe(w3[CGe],Yn)
set BRe[Z3[CGe]]=R2I(ude(w3[CGe],16,2,yn))
call Tje(w3[CGe],4888,y3[CGe])
call Tje(w3[CGe],ax,Y3[CGe])
call Tje(w3[CGe],xx,z3[CGe])
call Tje(w3[CGe],5740,.999)
call QIe(CGe,.03125,true,function iIx)
return false
endfunction
function iNx takes nothing returns boolean
return GetSpellAbilityId()==yn and iAx()
endfunction
function ibx takes nothing returns boolean
local unit u=GetAttacker()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
if BRe[i]>0 then
set BRe[i]=BRe[i]-1
if BRe[i]<=0 then
call UnitRemoveAbility(u,Yn)
endif
endif
set u=null
return false
endfunction
function iBx takes nothing returns boolean
return(GetUnitAbilityLevel((GetAttacker()),(Yn))>0)and ibx()
endfunction
function icx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function iNx))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function iBx))
set t=null
endfunction
function iCx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set n4[CGe]=n4[CGe]-1
if n4[CGe]<=0 then
call QDe()
call Qre(AddSpecialEffect(("war3mapImported\\TVC_Hanhvan.mdl"),((V4[CGe])*1.),((E4[CGe])*1.)))
if A4[CGe]<7 then
call GroupEnumUnitsInRange(sv,V4[CGe],E4[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,i4[CGe])and not spe(n)and not tOe(n)then
call yHe(o4[CGe],n,R4[CGe],1.)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\MakuraMissile\\MakuraMissile.mdl"),(n),"chest"))
call uee(o4[CGe],n,false,X4[CGe],O4[CGe],THe(o4[CGe]))
set A4[CGe]=A4[CGe]+1
if A4[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
call Qre(I4[CGe])
set I4[CGe]=null
set o4[CGe]=null
set i4[CGe]=null
call mGe(CGe)
endif
return false
endfunction
function idx takes unit u,real d,unit v,real r returns nothing
local integer CGe=mge()
set o4[CGe]=u
set V4[CGe]=GetUnitX(v)
set E4[CGe]=GetUnitY(v)
set n4[CGe]=1
set X4[CGe]=uBe(u,ude(u,1.2,.36,zn))
set O4[CGe]=uce(u,ude(u,$4B0,360,zn),'B006')
set R4[CGe]=ude(u,20,2,zn)
set A4[CGe]=0
set i4[CGe]=GetOwningPlayer(o4[CGe])
set I4[CGe]=AddSpecialEffect("war3mapImported\\TVC_Hanhvan.mdl",V4[CGe],E4[CGe])
call BlzSetSpecialEffectScale((I4[CGe]),((1.5)*1.))
call BlzSetSpecialEffectZ(I4[CGe],sxe(V4[CGe],E4[CGe])+'d')
if r>0 then
set X4[CGe]=d
set O4[CGe]=d
set R4[CGe]=r
endif
call QIe(CGe,.03125,true,function iCx)
endfunction
function iDx takes nothing returns boolean
local integer CGe=Qce()
call uee(d4[CGe],D4[CGe],false,0,C4[CGe],'B007')
set c4[CGe]=c4[CGe]-1
if c4[CGe]<=0 or spe(D4[CGe])or spe(d4[CGe])then
call QDe()
set d4[CGe]=null
set D4[CGe]=null
call mFe(CGe)
endif
return false
endfunction
function ifx takes unit u,unit v,real d returns nothing
local integer CGe=mfe()
set d4[CGe]=u
set D4[CGe]=v
set C4[CGe]=d
set c4[CGe]=4
call QIe(CGe,1.,true,function iDx)
endfunction
function iFx takes unit u,real d,real x,real y returns nothing
local unit n=null
call GroupEnumUnitsInRange(sv,x,y,$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yLe(u,n,50,3.)
call Qre(AddSpecialEffect(("war3mapImported\\NDD_vancoex.mdl"),((GetUnitX(n))*1.),((GetUnitY(n))*1.)))
call uee(u,n,false,d,d,THe(u))
call ifx(u,n,d/ 2)
endif
call GroupRemoveUnit(sv,n)
endloop
endfunction
function igx takes nothing returns boolean
local integer CGe=Qce()
local real r=sre(GetUnitX(H4[CGe]),GetUnitY(H4[CGe]),GetUnitX(J4[CGe]),GetUnitY(J4[CGe]))
set r=r/ 18*.01
if r>2. then
set r=2.
endif
if(GetUnitAbilityLevel((J4[CGe]),(DI))>0)and TQe(J4[CGe])<=30. then
call uee(H4[CGe],J4[CGe],false,0,(1.+r)*h4[CGe]*(1.07+.03*BUe[(j4[CGe])*(20)+4]),'B007')
else
call uee(H4[CGe],J4[CGe],false,0,(1.+r)*h4[CGe],'B007')
endif
set G4[CGe]=G4[CGe]-1
if G4[CGe]<=0 or spe(J4[CGe])or spe(H4[CGe])then
call QDe()
call Qre(k4[CGe])
set k4[CGe]=null
set H4[CGe]=null
set J4[CGe]=null
call mDe(CGe)
endif
return false
endfunction
function iGx takes unit u,unit v,real d returns nothing
local integer CGe=mde()
set H4[CGe]=u
set J4[CGe]=v
set h4[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set G4[CGe]=8
set j4[CGe]=(GetPlayerId(GetOwningPlayer((H4[CGe])))+1)
set k4[CGe]=AddSpecialEffectTarget("war3mapImported\\NDC_hoacotbuff.mdl",J4[CGe],"origin")
call QIe(CGe,1.,true,function igx)
endfunction
function ihx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,2.,.6,Zn))*(1.+TKe(u,4857))
local real d2=uce(u,ude(u,$7D0,600,Zn),'B007')*(1.+TKe(u,4857))
local unit n=null
local integer c=0
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local player p=GetOwningPlayer(u)
call Qre(AddSpecialEffect(("war3mapImported\\NDC_hoacotmienchuong2.mdl"),((x)*1.),((y)*1.)))
call GroupEnumUnitsInRange(sv,x,y,$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,p)and not spe(n)and not tOe(n)then
call uee(u,n,true,d1,d2,THe(u))
call iGx(u,n,d2)
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set u=null
set p=null
return false
endfunction
function iHx takes nothing returns boolean
return GetSpellAbilityId()==Zn and ihx()
endfunction
function ijx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function iHx))
set t=null
endfunction
function iJx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
call GroupEnumUnitsInRange(sv,q4[CGe],Q4[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yLe(P4[CGe],n,'d',1.)
call yKe(P4[CGe],n,'d',2.)
call uee(P4[CGe],n,false,p4[CGe],p4[CGe],THe(P4[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set M4[CGe]=M4[CGe]-1
if M4[CGe]<=0 then
call QDe()
set P4[CGe]=null
call mCe(CGe)
endif
return false
endfunction
function ikx takes unit u,real d,real x,real y returns nothing
local integer CGe=mce()
set P4[CGe]=u
set p4[CGe]=d
set q4[CGe]=x
set Q4[CGe]=y
set M4[CGe]=3
call QIe(CGe,.5,true,function iJx)
endfunction
function iKx takes nothing returns boolean
local integer CGe=Qce()
local real x0=GetUnitX(w4[CGe])
local real y0=GetUnitY(w4[CGe])
local real x=GetRandomReal(x0-600,x0+600)
local real y=GetRandomReal(y0-600,y0+600)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl"),((x)*1.),((y)*1.)))
call ikx(w4[CGe],W4[CGe],x,y)
set U4[CGe]=U4[CGe]-1
if U4[CGe]<=0 or spe(w4[CGe])then
call QDe()
set w4[CGe]=null
call mBe(CGe)
endif
return false
endfunction
function ilx takes unit u,real d returns nothing
local integer CGe=mbe()
set w4[CGe]=u
set W4[CGe]=d
set U4[CGe]=$F
call QIe(CGe,.3,true,function iKx)
endfunction
function iLx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set e5[CGe]=(((e5[CGe])*1.)+((vV)*1.)*Cos(((v5[CGe])*1.)*bj_DEGTORAD))
set x5[CGe]=(((x5[CGe])*1.)+((vV)*1.)*Sin(((v5[CGe])*1.)*bj_DEGTORAD))
call Qre(AddSpecialEffect(("war3mapImported\\Slam.mdl"),((e5[CGe])*1.),((x5[CGe])*1.)))
call GroupEnumUnitsInRange(sv,e5[CGe],x5[CGe],300,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,n5[CGe])then
call uee(Z4[CGe],n,false,o5[CGe],o5[CGe],THe(Z4[CGe]))
call yle(Z4[CGe],n,'d',2.)
call GroupAddUnit(n5[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set i5[CGe]=i5[CGe]-1
if i5[CGe]<=0 then
call QDe()
call Qne(n5[CGe])
set n5[CGe]=null
set Z4[CGe]=null
call mNe(CGe)
endif
return false
endfunction
function imx takes unit u,real d,real a returns nothing
local integer CGe=mAe()
set Z4[CGe]=u
set e5[CGe]=GetUnitX(u)
set x5[CGe]=GetUnitY(u)
set v5[CGe]=a
set o5[CGe]=d
set i5[CGe]=R2I(eV/ vV)
set n5[CGe]=CreateGroup()
call QIe(CGe,.2,true,function iLx)
endfunction
function iMx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real x2=0
local real y2=0
local integer c=0
call Qre(AddSpecialEffect(("war3mapImported\\TND_hoalieneffect.mdl"),((N5[CGe])*1.),((b5[CGe])*1.)))
call GroupEnumUnitsInRange(sv,N5[CGe],b5[CGe],A5[CGe],Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,R5[CGe])and not spe(n)and not tOe(n)then
call yKe(O5[CGe],n,B5[CGe],2.)
call yHe(O5[CGe],n,B5[CGe],.5)
if not(IsUnitType((n),UNIT_TYPE_TAUREN))and not(GetUnitAbilityLevel((n),('A0NA'))>0)then
set x2=GetUnitX(n)
set y2=GetUnitY(n)
call s5e(n,sre(N5[CGe],b5[CGe],x2,y2)-'d',.7,soe(x2,y2,N5[CGe],b5[CGe]),false,false)
endif
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set I5[CGe]=I5[CGe]-1
if I5[CGe]<=0 then
call QDe()
call Qre(c5[CGe])
set c5[CGe]=null
set O5[CGe]=null
set R5[CGe]=null
call mIe(CGe)
endif
return false
endfunction
function ipx takes unit u,real r1,real r2,real x,real y returns nothing
local integer CGe=mRe()
set O5[CGe]=u
set N5[CGe]=x
set b5[CGe]=y
set R5[CGe]=GetOwningPlayer(O5[CGe])
set I5[CGe]=4
set c5[CGe]=AddSpecialEffect("war3mapImported\\TND_hoalienhole.mdl",N5[CGe],b5[CGe])
set A5[CGe]=r1
set B5[CGe]=r2
call BlzSetSpecialEffectScale((c5[CGe]),((.85)*1.))
call QIe(CGe,2.,true,function iMx)
endfunction
function iPx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real r1=ude(u,300,30,xV)
local real r2=ude(u,40,5,xV)
call ipx(u,r1,r2,GetSpellTargetX(),GetSpellTargetY())
set u=null
return false
endfunction
function iqx takes nothing returns boolean
return GetSpellAbilityId()==xV and iPx()
endfunction
function iQx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function iqx))
set t=null
endfunction
function isx takes nothing returns boolean
local integer CGe=Qce()
call UnitRemoveBuffs(f5[CGe],false,true)
set F5[CGe]=F5[CGe]-1
if F5[CGe]<=0 or spe(f5[CGe])or not(GetUnitAbilityLevel((f5[CGe]),(rV))>0)then
call QDe()
call UnitRemoveAbility(f5[CGe],rV)
set f5[CGe]=null
call mOe(CGe)
endif
return false
endfunction
function iSx takes unit u,integer t returns nothing
local integer CGe=mXe()
set f5[CGe]=u
set F5[CGe]=R2I(t/ .03125)
call tKe(f5[CGe],rV)
call QIe(CGe,.03125,true,function isx)
endfunction
function itx takes nothing returns boolean
local unit u=GetTriggerUnit()
local integer t=R2I(ude(u,$B,1,oV))
call iSx(u,t)
set u=null
return false
endfunction
function iTx takes nothing returns boolean
return GetSpellAbilityId()==oV and itx()
endfunction
function iux takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function iTx))
set t=null
endfunction
function iUx takes nothing returns boolean
local integer CGe=Qce()
if spe(H5[CGe])or not(GetUnitAbilityLevel((H5[CGe]),(aV))>0)then
call QDe()
call Qre(yb[k5[CGe]])
set yb[k5[CGe]]=null
call UnitRemoveAbility(H5[CGe],aV)
call u_e(H5[CGe],-j5[CGe])
call Tje(H5[CGe],572,-J5[CGe])
set H5[CGe]=null
call mEe(CGe)
endif
return false
endfunction
function iwx takes unit u,real r1,real r2 returns nothing
local integer CGe=mVe()
set H5[CGe]=u
set j5[CGe]=r1
set J5[CGe]=r2
set k5[CGe]=(GetPlayerId(GetOwningPlayer((u)))+1)
if(bde[(GetPlayerId(GetOwningPlayer(((H5[CGe])))))])and not(GetUnitAbilityLevel(((H5[CGe])),('A0YV'))>0)then
set yb[k5[CGe]]=UCe(bDe[k5[CGe]],Yb[k5[CGe]],"origin")
else
set yb[k5[CGe]]=UCe(H5[CGe],Yb[k5[CGe]],"origin")
endif
call tKe(H5[CGe],aV)
call u_e(H5[CGe],j5[CGe])
call Tje(H5[CGe],572,J5[CGe])
call QIe(CGe,.03125,true,function iUx)
endfunction
function iWx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real r1=ude(u,4,1,iV)
local real r2=ude(u,.15,.03,iV)
if(GetUnitAbilityLevel((u),(aV))>0)then
call UnitRemoveAbility(u,aV)
else
call iwx(u,r1,r2)
endif
set u=null
return false
endfunction
function iyx takes nothing returns boolean
return GetSpellAbilityId()==iV and iWx()
endfunction
function iYx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function iyx))
set t=null
endfunction
function izx takes nothing returns boolean
local integer CGe=Qce()
local unit n
set S5[CGe]=(((S5[CGe])*1.)+((20)*1.)*Cos(((Q5[CGe])*1.)*bj_DEGTORAD))
set T5[CGe]=(((T5[CGe])*1.)+((20)*1.)*Sin(((Q5[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(q5[CGe],S5[CGe],T5[CGe],P5[CGe])
call GroupEnumUnitsInRange(sv,S5[CGe],T5[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,u5[CGe])then
call GroupAddUnit(u5[CGe],n)
call uee(m5[CGe],n,false,M5[CGe],M5[CGe],THe(m5[CGe]))
call yke(m5[CGe],n,'d',1.5)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TVT_bavuongtramkim_target.mdl"),(n),"origin"))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set p5[CGe]=p5[CGe]-1
if p5[CGe]<=0 then
call Qre(q5[CGe])
call Qne(u5[CGe])
set q5[CGe]=null
set u5[CGe]=null
set m5[CGe]=null
call QDe()
call mne(CGe)
endif
return false
endfunction
function iZx takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=mae()
set m5[CGe]=u
set M5[CGe]=d
set Q5[CGe]=a
set S5[CGe]=x
set T5[CGe]=y
set p5[CGe]=R2I(nV/ 20)
set q5[CGe]=AddSpecialEffect("war3mapImported\\TVT_bavuongtramkim_missile.mdl",S5[CGe],T5[CGe])
set P5[CGe]=sxe(S5[CGe],T5[CGe])+$96
set u5[CGe]=CreateGroup()
call BlzSetSpecialEffectScale(q5[CGe],1.3)
call BlzSetSpecialEffectZ(q5[CGe],P5[CGe])
call BlzSetSpecialEffectYaw(q5[CGe],Q5[CGe]*bj_DEGTORAD)
call QIe(CGe,.03125,true,function izx)
endfunction
function i_x takes nothing returns boolean
local integer CGe=Qce()
call iZx(Y5[CGe],z5[CGe],Z5[CGe],v6[CGe],e6[CGe]+GetRandomReal(-30,30))
set y5[CGe]=y5[CGe]-1
if y5[CGe]<=0 then
call QDe()
set Y5[CGe]=null
call mie(CGe)
endif
return false
endfunction
function i0x takes unit u,real QPe,real a returns nothing
local integer CGe=mre()
set Y5[CGe]=u
set z5[CGe]=QPe
set e6[CGe]=a
set y5[CGe]=30
set Z5[CGe]=GetUnitX(u)
set v6[CGe]=GetUnitY(u)
call QIe(CGe,.1,true,function i_x)
endfunction
function i1x takes nothing returns boolean
local integer CGe=Qce()
local unit n
set I6[CGe]=(((I6[CGe])*1.)+((30)*1.)*Cos(((R6[CGe])*1.)*bj_DEGTORAD))
set A6[CGe]=(((A6[CGe])*1.)+((30)*1.)*Sin(((R6[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(O6[CGe],I6[CGe],A6[CGe],X6[CGe])
call GroupEnumUnitsInRange(sv,I6[CGe],A6[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,N6[CGe])then
call GroupAddUnit(N6[CGe],n)
call uee(n6[CGe],n,false,V6[CGe],V6[CGe],THe(n6[CGe]))
call yke(n6[CGe],n,'d',2.5)
call Qre(AddSpecialEffectTarget(("war3mapImported\\DTC_tranphai22.mdl"),(n),"origin"))
call s5e(n,$C8,.3,soe(I6[CGe],A6[CGe],GetUnitX(n),GetUnitY(n)),false,false)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set E6[CGe]=E6[CGe]-1
if E6[CGe]<=0 then
call Qre(O6[CGe])
call Qne(N6[CGe])
set O6[CGe]=null
set N6[CGe]=null
set n6[CGe]=null
call QDe()
call moe(CGe)
endif
return false
endfunction
function i2x takes unit u,real d,real a returns nothing
local integer CGe=mxe()
set n6[CGe]=u
set V6[CGe]=d
set R6[CGe]=a
set I6[CGe]=(((GetUnitX(u))*1.)+(('d')*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set A6[CGe]=(((GetUnitY(u))*1.)+(('d')*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set E6[CGe]=R2I(VV/ 30)
set O6[CGe]=AddSpecialEffect("war3mapImported\\DTK_kinhthien1.mdl",I6[CGe],A6[CGe])
set X6[CGe]=sxe(I6[CGe],A6[CGe])+'d'
set N6[CGe]=CreateGroup()
call BlzSetSpecialEffectScale(O6[CGe],1.)
call BlzSetSpecialEffectZ(O6[CGe],X6[CGe])
call BlzSetSpecialEffectYaw(O6[CGe],R6[CGe]*bj_DEGTORAD)
call QIe(CGe,.03125,true,function i1x)
endfunction
function i3x takes nothing returns boolean
local integer CGe=Qce()
set D6[CGe]=D6[CGe]-1
if D6[CGe]<=0 or spe(C6[CGe])then
call QDe()
call Tje(C6[CGe],5319,-d6[CGe])
call Tje(C6[CGe],vx,-d6[CGe])
set OV[f6[CGe]]=OV[f6[CGe]]-1
if OV[f6[CGe]]==0 then
call UnitRemoveAbility(C6[CGe],XV)
endif
set C6[CGe]=null
call mee(CGe)
endif
return false
endfunction
function i4x takes unit u,integer lv,integer i returns nothing
local integer CGe=mve()
set C6[CGe]=u
set d6[CGe]=.06+.01*lv
set D6[CGe]=$F
set f6[CGe]=i
set OV[f6[CGe]]=OV[f6[CGe]]+1
call Tje(C6[CGe],5319,d6[CGe])
call Tje(C6[CGe],vx,d6[CGe])
if not(GetUnitAbilityLevel((C6[CGe]),(XV))>0)then
call tKe(C6[CGe],XV)
endif
call QIe(CGe,1.,true,function i3x)
endfunction
function i5x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set j6[CGe]=j6[CGe]-1
if j6[CGe]<=0 then
call QDe()
if m6[CGe]<7 then
call GroupEnumUnitsInRange(sv,J6[CGe],k6[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,H6[CGe])and not spe(n)and not tOe(n)then
call yHe(h6[CGe],n,L6[CGe],1.)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TVT_hoiphonglacnhan.mdl"),(n),"chest"))
call uee(h6[CGe],n,false,K6[CGe],l6[CGe],THe(h6[CGe]))
set m6[CGe]=m6[CGe]+1
if m6[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set h6[CGe]=null
set H6[CGe]=null
call L9e(CGe)
endif
return false
endfunction
function i6x takes unit u,real d,unit v,real r returns nothing
local integer CGe=L8e()
local integer i=0
set h6[CGe]=u
set J6[CGe]=GetUnitX(v)
set k6[CGe]=GetUnitY(v)
set j6[CGe]=1
set K6[CGe]=uBe(u,ude(u,1.,.3,EV))
set l6[CGe]=uce(u,ude(u,$3E8,300,EV),'B006')
set L6[CGe]=ude(u,$F,2,EV)
set m6[CGe]=0
set H6[CGe]=GetOwningPlayer(h6[CGe])
set i=GetPlayerId(H6[CGe])+1
if BUe[(i)*(20)+9]>0 then
call i4x(u,BUe[(i)*(20)+9],i)
endif
if r>0 then
set K6[CGe]=d
set l6[CGe]=d
set L6[CGe]=r
endif
call QIe(CGe,.03125,true,function i5x)
endfunction
function i7x takes nothing returns boolean
local unit u=GetAttacker()
call Qre(AddSpecialEffectTarget("Abilities\\Weapons\\HydraliskImpact\\HydraliskImpact.mdl",u,"weapon"))
set u=null
return false
endfunction
function i8x takes nothing returns boolean
return GetUnitTypeId(GetAttacker())=='H002' and i7x()
endfunction
function i9x takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function i8x))
set t=null
endfunction
function avx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
local real x2=0
local real y2=0
call GroupEnumUnitsInRange(sv,u6[CGe],U6[CGe],400,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Q6[CGe])and not spe(n)and not tOe(n)then
call yHe(q6[CGe],n,w6[CGe],1.5)
call uee(q6[CGe],n,false,t6[CGe],T6[CGe],THe(q6[CGe]))
call Qre(AddSpecialEffectTarget(("war3mapImported\\CLD_effecttarget2.mdl"),(n),"chest"))
if not(IsUnitType((n),UNIT_TYPE_TAUREN))and GetRandomReal(0,'d')<=W6[CGe]and not(GetUnitAbilityLevel((n),('A0NA'))>0)then
set x2=GetUnitX(n)
set y2=GetUnitY(n)
call s5e(n,'d',.3,soe(x2,y2,u6[CGe],U6[CGe]),false,false)
endif
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set S6[CGe]=S6[CGe]-1
if S6[CGe]<=0 then
call QDe()
call Qre(y6[CGe])
set y6[CGe]=null
set q6[CGe]=null
set Q6[CGe]=null
call L7e(CGe)
endif
return false
endfunction
function aex takes unit u,real d1,real d2,real r,real r2,real x,real y returns nothing
local integer CGe=L6e()
set q6[CGe]=u
set u6[CGe]=x
set U6[CGe]=y
set Q6[CGe]=GetOwningPlayer(q6[CGe])
set t6[CGe]=d1
set T6[CGe]=d2
set S6[CGe]=6
set y6[CGe]=AddSpecialEffect("war3mapImported\\CLD_gioloc3.mdl",u6[CGe],U6[CGe])
set w6[CGe]=r
set W6[CGe]=r2
call BlzSetSpecialEffectScale((y6[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(y6[CGe],sxe(u6[CGe],U6[CGe]))
call QIe(CGe,.5,true,function avx)
endfunction
function axx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,3.,.9,RV))*(1.+TKe(u,4857))
local real d2=uce(u,ude(u,$BB8,900,RV),'B00A')*(1.+TKe(u,4857))
local real r=ude(u,20,3,RV)
local real r2=ude(u,40,4,RV)
call aex(u,d1,d2,r,r2,GetSpellTargetX(),GetSpellTargetY())
set u=null
return false
endfunction
function aox takes nothing returns boolean
return GetSpellAbilityId()==RV and axx()
endfunction
function arx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function aox))
set t=null
endfunction
function aix takes nothing returns boolean
local integer CGe=Qce()
set v7[CGe]=v7[CGe]-1
if v7[CGe]<=0 or spe(i7[CGe])then
call QDe()
call UnitRemoveAbility(i7[CGe],AV)
call Tje(i7[CGe],6780,e7[CGe])
call Tje(i7[CGe],5762,x7[CGe])
call Tje(i7[CGe],4888,o7[CGe])
set i7[CGe]=null
call L5e(CGe)
endif
return false
endfunction
function aax takes unit u,real r returns nothing
local integer CGe=L4e()
set i7[CGe]=u
set e7[CGe]=r*TKe(u,6780)
set x7[CGe]=r*TKe(u,5762)
set o7[CGe]=r*TKe(u,4888)
set v7[CGe]=$A
call tKe(i7[CGe],AV)
call Tje(i7[CGe],6780,-e7[CGe])
call Tje(i7[CGe],5762,-x7[CGe])
call Tje(i7[CGe],4888,-o7[CGe])
call QIe(CGe,1.,true,function aix)
endfunction
function anx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set A7[CGe]=(((A7[CGe])*1.)+((bV)*1.)*Cos(((c7[CGe])*1.)*bj_DEGTORAD))
set N7[CGe]=(((N7[CGe])*1.)+((bV)*1.)*Sin(((c7[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(R7[CGe],A7[CGe],N7[CGe],B7[CGe])
if d7[CGe]<7 then
call GroupEnumUnitsInRange(sv,A7[CGe],N7[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,O7[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,C7[CGe])then
if not(GetUnitAbilityLevel((n),(AV))>0)then
call aax(n,b7[CGe])
endif
call GroupAddUnit(C7[CGe],n)
set d7[CGe]=d7[CGe]+1
if d7[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set I7[CGe]=I7[CGe]-1
if I7[CGe]<=0 then
call QDe()
call Qre(R7[CGe])
call Qne(C7[CGe])
set C7[CGe]=null
set R7[CGe]=null
set X7[CGe]=null
set O7[CGe]=null
call L3e(CGe)
endif
return false
endfunction
function aVx takes unit u,real r,real x,real y,real a returns nothing
local integer CGe=L2e()
set X7[CGe]=u
set c7[CGe]=a
set A7[CGe]=x
set N7[CGe]=y
set b7[CGe]=r
set B7[CGe]=sxe(A7[CGe],N7[CGe])+'d'
set R7[CGe]=AddSpecialEffect("war3mapImported\\MGC_honphach.mdl",x,y)
set I7[CGe]=R2I(NV/ bV)
set C7[CGe]=CreateGroup()
set O7[CGe]=GetOwningPlayer(X7[CGe])
set d7[CGe]=0
call BlzSetSpecialEffectYaw((R7[CGe]),((c7[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((R7[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(R7[CGe],B7[CGe])
call QIe(CGe,.03125,true,function anx)
endfunction
function aEx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real r=ude(u,.1,.02,IV)
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real a=soe(x,y,GetSpellTargetX(),GetSpellTargetY())
call aVx(u,r,x,y,a)
call aVx(u,r,(((x)*1.)+(('d')*1.)*Cos(((a+90)*1.)*bj_DEGTORAD)),(((y)*1.)+(('d')*1.)*Sin(((a+90)*1.)*bj_DEGTORAD)),a)
call aVx(u,r,(((x)*1.)+(('d')*1.)*Cos(((a-90)*1.)*bj_DEGTORAD)),(((y)*1.)+(('d')*1.)*Sin(((a-90)*1.)*bj_DEGTORAD)),a)
call aVx(u,r,(((x)*1.)+(($C8)*1.)*Cos(((a+90)*1.)*bj_DEGTORAD)),(((y)*1.)+(($C8)*1.)*Sin(((a+90)*1.)*bj_DEGTORAD)),a)
call aVx(u,r,(((x)*1.)+(($C8)*1.)*Cos(((a-90)*1.)*bj_DEGTORAD)),(((y)*1.)+(($C8)*1.)*Sin(((a-90)*1.)*bj_DEGTORAD)),a)
set u=null
return false
endfunction
function aXx takes nothing returns boolean
return GetSpellAbilityId()==IV and aEx()
endfunction
function aOx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function aXx))
set t=null
endfunction
function aRx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
call GroupEnumUnitsInRange(sv,GetUnitX(h7[CGe]),GetUnitY(h7[CGe]),$3E8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call Qre(AddSpecialEffect(("war3mapImported\\CLK_loidongcuuthien.mdl"),((GetUnitX(n))*1.),((GetUnitY(n))*1.)))
call yle(h7[CGe],n,'d',.5)
call uee(h7[CGe],n,true,G7[CGe],G7[CGe],THe(h7[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set g7[CGe]=g7[CGe]-1
if g7[CGe]<=0 then
call QDe()
set h7[CGe]=null
call L1e(CGe)
endif
return false
endfunction
function aIx takes unit u,real d returns nothing
local integer CGe=L0e()
set h7[CGe]=u
set G7[CGe]=d
set g7[CGe]=3
call QIe(CGe,1.,true,function aRx)
endfunction
function aAx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real x2=0
local real y2=0
set L7[CGe]=GetUnitX(k7[CGe])
set m7[CGe]=GetUnitY(k7[CGe])
call Qre(AddSpecialEffect(("war3mapImported\\TVC_effect2.mdl"),((L7[CGe])*1.),((m7[CGe])*1.)))
call GroupEnumUnitsInRange(sv,L7[CGe],m7[CGe],600,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yHe(k7[CGe],n,'d',.5)
call uee(k7[CGe],n,false,l7[CGe],l7[CGe],THe(k7[CGe]))
set x2=GetUnitX(n)
set y2=GetUnitY(n)
call s5e(n,$C8,.5,soe(x2,y2,L7[CGe],m7[CGe]),false,false)
endif
call GroupRemoveUnit(sv,n)
endloop
set K7[CGe]=K7[CGe]-1
if K7[CGe]<=0 then
call QDe()
set k7[CGe]=null
call L_e(CGe)
endif
return false
endfunction
function aNx takes unit u,real d returns nothing
local integer CGe=LZe()
set k7[CGe]=u
set K7[CGe]=6
set l7[CGe]=d
call QIe(CGe,1.,true,function aAx)
endfunction
function abx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real db=0
local real x=0
local real y=0
if not spe(z7[CGe])then
set x=GetUnitX(z7[CGe])
set y=GetUnitY(z7[CGe])
set Y7[CGe]=soe(T7[CGe],u7[CGe],x,y)
set db=sre(T7[CGe],u7[CGe],x,y)
else
set t7[CGe]=0
endif
set T7[CGe]=(((T7[CGe])*1.)+((cV)*1.)*Cos(((Y7[CGe])*1.)*bj_DEGTORAD))
set u7[CGe]=(((u7[CGe])*1.)+((cV)*1.)*Sin(((Y7[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(S7[CGe],T7[CGe],u7[CGe],y7[CGe])
if db<=90 then
set t7[CGe]=0
endif
set t7[CGe]=t7[CGe]-1
if t7[CGe]<=0 then
call QDe()
call GroupEnumUnitsInRange(sv,T7[CGe],u7[CGe],$B4,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Q7[CGe])and not spe(n)and not tOe(n)then
call yke(q7[CGe],n,W7[CGe],2.)
call uee(q7[CGe],n,false,U7[CGe],w7[CGe],THe(q7[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
call Qre(S7[CGe])
set S7[CGe]=null
set q7[CGe]=null
set Q7[CGe]=null
set z7[CGe]=null
call Lze(CGe)
endif
return false
endfunction
function aBx takes unit u,real d1,real d2,real r,real x,real y,unit v returns nothing
local integer CGe=LYe()
set q7[CGe]=u
set z7[CGe]=v
set Y7[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set T7[CGe]=x
set u7[CGe]=y
set U7[CGe]=d1
set w7[CGe]=d2
set W7[CGe]=r
set y7[CGe]=sxe(T7[CGe],u7[CGe])+$A
set S7[CGe]=AddSpecialEffect("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl",x,y)
set t7[CGe]='d'
set Q7[CGe]=GetOwningPlayer(q7[CGe])
call BlzSetSpecialEffectYaw((S7[CGe]),((Y7[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((S7[CGe]),((.7)*1.))
call BlzSetSpecialEffectZ(S7[CGe],y7[CGe])
call QIe(CGe,.03125,true,function abx)
endfunction
function acx takes nothing returns boolean
local integer CGe=Qce()
local real x=GetUnitX(x8[CGe])
local real y=GetUnitY(x8[CGe])
if not spe(E8[CGe])then
call aBx(x8[CGe],i8[CGe],n8[CGe],V8[CGe],x,y,E8[CGe])
else
set o8[CGe]=0
endif
set o8[CGe]=o8[CGe]-1
if o8[CGe]<=0 then
call QDe()
set x8[CGe]=null
set E8[CGe]=null
call Lye(CGe)
endif
return false
endfunction
function aCx takes unit u,real d1,real d2,real r,unit v returns nothing
local integer CGe=LWe()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
set x8[CGe]=u
set E8[CGe]=v
set i8[CGe]=d1
set n8[CGe]=d2
set V8[CGe]=r
set o8[CGe]=9
if BUe[(i)*(20)+$A]>0 then
set o8[CGe]=o8[CGe]+3+BUe[(i)*(20)+$A]
endif
call QIe(CGe,.25,true,function acx)
endfunction
function adx takes nothing returns boolean
local unit u=GetTriggerUnit()
local unit v=GetSpellTargetUnit()
local real d1=uBe(u,ude(u,2.,.6,BV))*(1.+TKe(u,4857))
local real d2=uce(u,ude(u,$BB8,900,BV),'B008')*(1.+TKe(u,4857))
local real r=ude(u,40,3,BV)
call aCx(u,d1,d2,r,v)
set u=null
return false
endfunction
function aDx takes nothing returns boolean
return GetSpellAbilityId()==BV and adx()
endfunction
function afx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function aDx))
set t=null
endfunction
function aFx takes nothing returns boolean
local integer CGe=Qce()
if N8[CGe]==20 then
call UnitRemoveAbility(I8[CGe],CV)
call Tje(I8[CGe],ox,-b8[CGe])
endif
set N8[CGe]=N8[CGe]-1
if N8[CGe]<=0 then
call QDe()
set I8[CGe]=null
set BIe[A8[CGe]]=false
call Lwe(CGe)
endif
return false
endfunction
function agx takes unit u,integer i returns nothing
local integer CGe=LUe()
local real m=(GetUnitState(u,UNIT_STATE_MAX_MANA)/($3E8-40*BUe[(i)*(20)+9]))*.01
if m>1.2 then
set m=1.2
endif
set I8[CGe]=u
set A8[CGe]=i
set BIe[A8[CGe]]=true
set N8[CGe]=28
set b8[CGe]=.17+.03*BUe[(i)*(20)+9]+m
call tKe(u,CV)
call Tje(I8[CGe],ox,b8[CGe])
call QIe(CGe,1.,true,function aFx)
endfunction
function aGx takes nothing returns boolean
local unit u=GetTriggerUnit()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
if not BIe[i]then
call agx(u,i)
call Qre(AddSpecialEffect(("war3mapImported\\CLK_effect1.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
endif
set u=null
return false
endfunction
function ahx takes nothing returns boolean
return(GetUnitAbilityLevel((GetTriggerUnit()),('A0BR'))>0)and aGx()
endfunction
function aHx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function ahx))
set t=null
endfunction
function ajx takes nothing returns boolean
local integer CGe=Qce()
if F8[CGe]==20 then
call Tje(d8[CGe],xx,-D8[CGe])
call Twe(d8[CGe],-f8[CGe])
call TUe(d8[CGe],-f8[CGe])
call UnitRemoveAbility(d8[CGe],dV)
endif
set F8[CGe]=F8[CGe]-1
if F8[CGe]<=0 then
call QDe()
set DV[g8[CGe]]=false
set d8[CGe]=null
call Lue(CGe)
endif
return false
endfunction
function aJx takes unit u,integer lv,integer i returns nothing
local integer CGe=LTe()
set d8[CGe]=u
set D8[CGe]=.1+.03*lv
set f8[CGe]=.15+.02*lv
set F8[CGe]=35
set g8[CGe]=i
set DV[g8[CGe]]=true
call Tje(d8[CGe],xx,D8[CGe])
call Twe(d8[CGe],f8[CGe])
call TUe(d8[CGe],f8[CGe])
call tKe(d8[CGe],dV)
call QIe(CGe,1.,true,function ajx)
endfunction
function akx takes nothing returns boolean
local unit u=GetTriggerUnit()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
if not DV[i]then
call aJx(u,BUe[(i)*(20)+$A],i)
endif
set u=null
return false
endfunction
function aKx takes nothing returns boolean
return(GetUnitAbilityLevel((GetTriggerUnit()),('A05Z'))>0)and akx()
endfunction
function alx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function aKx))
set t=null
endfunction
function aLx takes nothing returns boolean
local integer CGe=Qce()
if not spe(K8[CGe])then
call uee(k8[CGe],K8[CGe],false,0,J8[CGe],'B007')
endif
set j8[CGe]=j8[CGe]-1
if j8[CGe]<=0 or spe(K8[CGe])or spe(k8[CGe])then
call QDe()
set k8[CGe]=null
set K8[CGe]=null
call Lte(CGe)
endif
return false
endfunction
function amx takes unit u,unit v,real d returns nothing
local integer CGe=LSe()
set k8[CGe]=u
set K8[CGe]=v
set J8[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set j8[CGe]=2
call QIe(CGe,1.,true,function aLx)
endfunction
function aMx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set P8[CGe]=P8[CGe]-1
if P8[CGe]<=0 then
call QDe()
call Qre(AddSpecialEffect(("war3mapImported\\MGK_effect1.mdl"),((q8[CGe])*1.),((Q8[CGe])*1.)))
call GroupEnumUnitsInRange(sv,q8[CGe],Q8[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,p8[CGe])and not spe(n)and not tOe(n)then
call yHe(M8[CGe],n,T8[CGe],1.)
call Qre(AddSpecialEffectTarget(("war3mapImported\\MGK_effect1.mdl"),(n),"chest"))
call uee(M8[CGe],n,false,S8[CGe],t8[CGe],THe(M8[CGe]))
call amx(M8[CGe],n,t8[CGe])
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set M8[CGe]=null
set p8[CGe]=null
call Lse(CGe)
endif
return false
endfunction
function apx takes unit u,real d,unit v,real r returns nothing
local integer CGe=LQe()
set M8[CGe]=u
set q8[CGe]=GetUnitX(v)
set Q8[CGe]=GetUnitY(v)
set P8[CGe]=1
set S8[CGe]=uBe(u,ude(u,1.,.3,fV))
set t8[CGe]=uce(u,ude(u,$3E8,300,fV),'B007')
set T8[CGe]=ude(u,$F,2,fV)
set p8[CGe]=GetOwningPlayer(M8[CGe])
if r>0 then
set S8[CGe]=d
set t8[CGe]=d
set T8[CGe]=r
endif
call QIe(CGe,.03125,true,function aMx)
endfunction
function aPx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Z8[CGe]=(((Z8[CGe])*1.)+((FV)*1.)*Cos(((viv[CGe])*1.)*bj_DEGTORAD))
set vvv[CGe]=(((vvv[CGe])*1.)+((FV)*1.)*Sin(((viv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(Y8[CGe],Z8[CGe],vvv[CGe],vrv[CGe])
if vav[CGe]<7 then
call GroupEnumUnitsInRange(sv,Z8[CGe],vvv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,y8[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,vnv[CGe])then
call GroupAddUnit(vnv[CGe],n)
call Qre(AddSpecialEffect(("war3mapImported\\DTK_tranphai222.mdl"),((GetUnitX(n))*1.),((GetUnitY(n))*1.)))
call uee(W8[CGe],n,true,vev[CGe],vxv[CGe],THe(W8[CGe]))
call yke(W8[CGe],n,vov[CGe],2.)
set vav[CGe]=vav[CGe]+1
if vav[CGe]>=5 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set z8[CGe]=z8[CGe]-1
if z8[CGe]<=0 then
call QDe()
call Qre(Y8[CGe])
call Qne(vnv[CGe])
set vnv[CGe]=null
set Y8[CGe]=null
set W8[CGe]=null
set y8[CGe]=null
call Lqe(CGe)
endif
return false
endfunction
function aqx takes unit u,player p,real x,real y,real d1,real d2,real r,real a,real aQx returns nothing
local integer CGe=LPe()
set W8[CGe]=u
set Z8[CGe]=(((x)*1.)+(('d')*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set vvv[CGe]=(((y)*1.)+(('d')*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set viv[CGe]=aQx
set vev[CGe]=d1
set vxv[CGe]=d2
set vov[CGe]=r
set vrv[CGe]=sxe(Z8[CGe],vvv[CGe])+'d'
set Y8[CGe]=AddSpecialEffect("war3mapImported\\DTK_missile.mdl",Z8[CGe],vvv[CGe])
set z8[CGe]=R2I(gV/ FV)
set vnv[CGe]=CreateGroup()
set y8[CGe]=GetOwningPlayer(W8[CGe])
set vav[CGe]=0
call BlzSetSpecialEffectYaw((Y8[CGe]),((viv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((Y8[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(Y8[CGe],vrv[CGe])
call QIe(CGe,.03125,true,function aPx)
endfunction
function asx takes nothing returns boolean
local integer CGe=Qce()
local integer rd=GetRandomInt(-3,3)
if vOv[CGe]==3 then
call Qre(vdv[CGe])
set vdv[CGe]=null
endif
call aqx(vCv[CGe],vcv[CGe],vIv[CGe],vAv[CGe],vNv[CGe],vbv[CGe],vBv[CGe],vRv[CGe]+$F*rd,vRv[CGe])
set vOv[CGe]=vOv[CGe]-1
if vOv[CGe]<=0 then
call QDe()
set vCv[CGe]=null
set vcv[CGe]=null
call Lpe(CGe)
endif
return false
endfunction
function aSx takes unit u,real d,unit v,real r returns nothing
local integer CGe=LMe()
set vCv[CGe]=u
set vIv[CGe]=GetUnitX(u)
set vAv[CGe]=GetUnitY(u)
set vOv[CGe]=3
set vcv[CGe]=GetOwningPlayer(u)
set vRv[CGe]=soe(vIv[CGe],vAv[CGe],GetUnitX(v),GetUnitY(v))
set vNv[CGe]=d
set vbv[CGe]=d
set vBv[CGe]=r
set vdv[CGe]=AddSpecialEffect("war3mapImported\\DTK_tranphai1.mdl",vIv[CGe],vAv[CGe])
call BlzSetSpecialEffectScale((vdv[CGe]),((.7)*1.))
call BlzSetSpecialEffectZ(vdv[CGe],sxe(vIv[CGe],vAv[CGe])+80)
call aqx(vCv[CGe],vcv[CGe],vIv[CGe],vAv[CGe],vNv[CGe],vbv[CGe],vBv[CGe],vRv[CGe],vRv[CGe])
call QIe(CGe,.2,true,function asx)
endfunction
function atx takes unit u,real d,real x,real y returns nothing
local unit n=null
call Qre(AddSpecialEffect(("war3mapImported\\TVC_effect2.mdl"),((x)*1.),((y)*1.)))
call GroupEnumUnitsInRange(sv,x,y,$FA,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yle(u,n,50,.5)
call uee(u,n,false,d,d,THe(u))
endif
call GroupRemoveUnit(sv,n)
endloop
endfunction
function aTx takes nothing returns boolean
local integer CGe=Qce()
local integer i=1
local real x=0
local real y=0
loop
exitwhen i>$C
set x=(((vhv[CGe])*1.)+(($96*vgv[CGe])*1.)*Cos(((30*I2R(i))*1.)*bj_DEGTORAD))
set y=(((vHv[CGe])*1.)+(($96*vgv[CGe])*1.)*Sin(((30*I2R(i))*1.)*bj_DEGTORAD))
call atx(vGv[CGe],vjv[CGe],x,y)
set i=i+1
endloop
set vgv[CGe]=vgv[CGe]-1
if vgv[CGe]<=0 then
call QDe()
set vGv[CGe]=null
call Lme(CGe)
endif
return false
endfunction
function aux takes unit u,real d returns nothing
local integer CGe=LLe()
local unit n=null
local real x2=0
local real y2=0
set vGv[CGe]=u
set vjv[CGe]=d
set vhv[CGe]=GetUnitX(u)
set vHv[CGe]=GetUnitY(u)
set vgv[CGe]=6
call QIe(CGe,.33,true,function aTx)
call GroupEnumUnitsInRange(sv,vhv[CGe],vHv[CGe],800,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
set x2=GetUnitX(n)
set y2=GetUnitY(n)
call s5e(n,sre(x2,y2,vhv[CGe],vHv[CGe]),.3,soe(x2,y2,vhv[CGe],vHv[CGe]),false,false)
endif
call GroupRemoveUnit(sv,n)
endloop
endfunction
function aUx takes nothing returns boolean
local integer CGe=Qce()
local real db=0
local real x=0
local real y=0
local unit n=null
local integer rd=GetRandomInt($F4240,$98967F)
local real a=(vuv[CGe]-2)*22.5
local integer c=0
if vUv[CGe]>0 then
set vUv[CGe]=vUv[CGe]-1
endif
if not spe(vLv[CGe])then
set x=GetUnitX(vLv[CGe])
set y=GetUnitY(vLv[CGe])
set vTv[CGe]=soe(vmv[CGe],vMv[CGe],x,y)
set db=sre(vmv[CGe],vMv[CGe],x,y)
call BlzSetSpecialEffectYaw((vsv[CGe]),((vTv[CGe])*1.)*bj_DEGTORAD)
if db<=90 and vUv[CGe]==0 then
set vuv[CGe]=vuv[CGe]-1
set vUv[CGe]=$D
if vuv[CGe]==2 then
call GroupEnumUnitsInRange(sv,vmv[CGe],vMv[CGe],$B4,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,vtv[CGe])and not spe(n)and not tOe(n)then
call yLe(vlv[CGe],n,vqv[CGe],1.5)
call Qre(AddSpecialEffectTarget(("war3mapImported\\DMTT_tranphai11.mdl"),(n),"chest"))
call uee(vlv[CGe],n,false,vpv[CGe],vPv[CGe],THe(vlv[CGe]))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
else
call xgx(vlv[CGe],vmv[CGe],vMv[CGe],vpv[CGe],vPv[CGe],vqv[CGe],vTv[CGe]+a,rd,vuv[CGe],1)
call xgx(vlv[CGe],vmv[CGe],vMv[CGe],vpv[CGe],vPv[CGe],vqv[CGe],vTv[CGe]+45+a,rd,vuv[CGe],1)
call xgx(vlv[CGe],vmv[CGe],vMv[CGe],vpv[CGe],vPv[CGe],vqv[CGe],vTv[CGe]+90+a,rd,vuv[CGe],1)
call xgx(vlv[CGe],vmv[CGe],vMv[CGe],vpv[CGe],vPv[CGe],vqv[CGe],vTv[CGe]+$87+a,rd,vuv[CGe],1)
call xgx(vlv[CGe],vmv[CGe],vMv[CGe],vpv[CGe],vPv[CGe],vqv[CGe],vTv[CGe]+$B4+a,rd,vuv[CGe],1)
call xgx(vlv[CGe],vmv[CGe],vMv[CGe],vpv[CGe],vPv[CGe],vqv[CGe],vTv[CGe]+$E1+a,rd,vuv[CGe],1)
call xgx(vlv[CGe],vmv[CGe],vMv[CGe],vpv[CGe],vPv[CGe],vqv[CGe],vTv[CGe]+270+a,rd,vuv[CGe],1)
call xgx(vlv[CGe],vmv[CGe],vMv[CGe],vpv[CGe],vPv[CGe],vqv[CGe],vTv[CGe]+315+a,rd,vuv[CGe],1)
endif
endif
else
set vuv[CGe]=0
call xgx(vlv[CGe],vmv[CGe],vMv[CGe],vpv[CGe],vPv[CGe],vqv[CGe],vTv[CGe]+a,rd,vuv[CGe],1)
call xgx(vlv[CGe],vmv[CGe],vMv[CGe],vpv[CGe],vPv[CGe],vqv[CGe],vTv[CGe]+45+a,rd,vuv[CGe],1)
call xgx(vlv[CGe],vmv[CGe],vMv[CGe],vpv[CGe],vPv[CGe],vqv[CGe],vTv[CGe]+90+a,rd,vuv[CGe],1)
call xgx(vlv[CGe],vmv[CGe],vMv[CGe],vpv[CGe],vPv[CGe],vqv[CGe],vTv[CGe]+$87+a,rd,vuv[CGe],1)
call xgx(vlv[CGe],vmv[CGe],vMv[CGe],vpv[CGe],vPv[CGe],vqv[CGe],vTv[CGe]+$B4+a,rd,vuv[CGe],1)
call xgx(vlv[CGe],vmv[CGe],vMv[CGe],vpv[CGe],vPv[CGe],vqv[CGe],vTv[CGe]+$E1+a,rd,vuv[CGe],1)
call xgx(vlv[CGe],vmv[CGe],vMv[CGe],vpv[CGe],vPv[CGe],vqv[CGe],vTv[CGe]+270+a,rd,vuv[CGe],1)
call xgx(vlv[CGe],vmv[CGe],vMv[CGe],vpv[CGe],vPv[CGe],vqv[CGe],vTv[CGe]+315+a,rd,vuv[CGe],1)
endif
set vmv[CGe]=(((vmv[CGe])*1.)+((hV)*1.)*Cos(((vTv[CGe])*1.)*bj_DEGTORAD))
set vMv[CGe]=(((vMv[CGe])*1.)+((hV)*1.)*Sin(((vTv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition((vsv[CGe]),((vmv[CGe])*1.),((vMv[CGe])*1.),((vSv[CGe])*1.))
set vQv[CGe]=vQv[CGe]-1
if vQv[CGe]<=0 or vuv[CGe]==0 then
call QDe()
call Qre(vsv[CGe])
set vsv[CGe]=null
set vlv[CGe]=null
set vLv[CGe]=null
set vtv[CGe]=null
call Lle(CGe)
endif
return false
endfunction
function awx takes unit u,real d,unit v,real r returns nothing
local integer CGe=LKe()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real a=soe(x,y,GetUnitX(v),GetUnitY(v))
if spe(v)then
set a=GetUnitFacing(u)
endif
set vlv[CGe]=u
set vLv[CGe]=v
set vmv[CGe]=(((x)*1.)+((50)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set vMv[CGe]=(((y)*1.)+((50)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set vpv[CGe]=uBe(u,ude(u,3.,.9,GV))
set vPv[CGe]=uce(u,ude(u,$9C4,750,GV),'B007')
set vqv[CGe]=ude(u,20,3,GV)
set vsv[CGe]=AddSpecialEffect("war3mapImported\\DMTT_tranphai2222.mdl",vmv[CGe],vMv[CGe])
set vQv[CGe]='d'
set vUv[CGe]=0
set vSv[CGe]=sxe(vmv[CGe],vMv[CGe])+'d'
set vuv[CGe]=3
set vtv[CGe]=GetOwningPlayer(vlv[CGe])
set vTv[CGe]=a
set vpv[CGe]=vpv[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A053'))
set vPv[CGe]=vPv[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A053'))
call Qre(AddSpecialEffectTarget(("war3mapImported\\DMTT_tranphai11.mdl"),(u),"origin"))
if r>0 then
set vpv[CGe]=d
set vPv[CGe]=d
set vqv[CGe]=r
endif
call BlzSetSpecialEffectScale((vsv[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(vsv[CGe],vSv[CGe])
call BlzSetSpecialEffectYaw((vsv[CGe]),((a)*1.)*bj_DEGTORAD)
call QIe(CGe,.03125,true,function aUx)
endfunction
function aWx takes nothing returns boolean
local integer CGe=Qce()
if not spe(v_v[CGe])then
call uee(vZv[CGe],v_v[CGe],false,0,vzv[CGe],'B007')
endif
set vYv[CGe]=vYv[CGe]-1
if vYv[CGe]<=0 or spe(v_v[CGe])or spe(vZv[CGe])then
call QDe()
set vZv[CGe]=null
set v_v[CGe]=null
call Lke(CGe)
endif
return false
endfunction
function ayx takes unit u,unit v,real d returns nothing
local integer CGe=LJe()
set vZv[CGe]=u
set v_v[CGe]=v
set vzv[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set vYv[CGe]=3
call QIe(CGe,1.,true,function aWx)
endfunction
function aYx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer QZe=0
local real r=1.
set Tv=AddSpecialEffect("war3mapImported\\MGC_khonhovantieueffect.mdl",v5v[CGe],v6v[CGe])
call BlzSetSpecialEffectYaw((Tv),((eev[CGe])*1.)*bj_DEGTORAD)
call Qre(Tv)
set v5v[CGe]=(((v5v[CGe])*1.)+((HV)*1.)*Cos(((eev[CGe])*1.)*bj_DEGTORAD))
set v6v[CGe]=(((v6v[CGe])*1.)+((HV)*1.)*Sin(((eev[CGe])*1.)*bj_DEGTORAD))
if sZe(v5v[CGe],v6v[CGe])then
call SetUnitX(v3v[CGe],v5v[CGe])
call SetUnitY(v3v[CGe],v6v[CGe])
else
set evv[CGe]=0
endif
set evv[CGe]=evv[CGe]-1
if evv[CGe]<=0 then
call QDe()
call Qre(AddSpecialEffect(("war3mapImported\\MGC_phachdiatarget.mdl"),((v5v[CGe])*1.),((v6v[CGe])*1.)))
call GroupEnumUnitsInRange(sv,v5v[CGe],v6v[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,v4v[CGe])and not spe(n)and not tOe(n)then
call yLe(v3v[CGe],n,v7v[CGe],2.)
call Qre(AddSpecialEffectTarget(("war3mapImported\\MGK_effect1.mdl"),(n),"chest"))
if(GetUnitAbilityLevel((n),('A0VY'))>0)then
set r=1.17+.03*BUe[(exv[CGe])*(20)+8]
endif
call uee(v3v[CGe],n,false,v8v[CGe]*r,v9v[CGe]*r,THe(v3v[CGe]))
call ayx(v3v[CGe],n,v9v[CGe]*r)
set QZe=QZe+1
if QZe>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
call SetPlayerAbilityAvailable((v4v[CGe]),('A0VP'),true)
set n=null
set v3v[CGe]=null
set v4v[CGe]=null
call Lje(CGe)
endif
return false
endfunction
function azx takes unit u,real d1,real d2,real r,real x,real y returns nothing
local integer CGe=LHe()
set v3v[CGe]=u
set v4v[CGe]=GetOwningPlayer(u)
set v5v[CGe]=GetUnitX(u)
set v6v[CGe]=GetUnitY(u)
set v7v[CGe]=r
set v8v[CGe]=d1
set v9v[CGe]=d2
set evv[CGe]=R2I(sre(v5v[CGe],v6v[CGe],x,y)/ HV)
set eev[CGe]=soe(v5v[CGe],v6v[CGe],x,y)
set exv[CGe]=GetPlayerId(v4v[CGe])+1
call SetPlayerAbilityAvailable((v4v[CGe]),('A0VP'),false)
call QIe(CGe,.03125,true,function aYx)
endfunction
function aZx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,2.,.6,'A0VP'))
local real d2=uce(u,ude(u,$7D0,600,'A0VP'),'B007')
local real r=ude(u,30,4,'A0VP')
call azx(u,d1,d2,r,GetSpellTargetX(),GetSpellTargetY())
set u=null
return false
endfunction
function a_x takes nothing returns boolean
return GetSpellAbilityId()=='A0VP' and aZx()
endfunction
function a0x takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Filter(function a_x))
set t=null
endfunction
function a1x takes nothing returns boolean
local integer CGe=Qce()
if not spe(eEv[CGe])then
call uee(eVv[CGe],eEv[CGe],false,0,env[CGe],'B007')
endif
set eav[CGe]=eav[CGe]-1
if eav[CGe]<=0 or spe(eEv[CGe])or spe(eVv[CGe])then
call QDe()
set eVv[CGe]=null
set eEv[CGe]=null
call Lhe(CGe)
endif
return false
endfunction
function a2x takes unit u,unit v,real d returns nothing
local integer CGe=LGe()
set eVv[CGe]=u
set eEv[CGe]=v
set env[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set eav[CGe]=2
call QIe(CGe,1.,true,function a1x)
endfunction
function a3x takes nothing returns boolean
local integer CGe=Qce()
if not spe(eBv[CGe])then
call uee(ebv[CGe],eBv[CGe],false,eAv[CGe],eNv[CGe],'B007')
call a2x(ebv[CGe],eBv[CGe],eNv[CGe])
endif
set eIv[CGe]=eIv[CGe]-1
if eIv[CGe]<=0 or spe(eBv[CGe])or spe(ebv[CGe])then
call QDe()
set ebv[CGe]=null
set eBv[CGe]=null
call Lge(CGe)
endif
return false
endfunction
function a4x takes unit u,unit v,real d1,real d2 returns nothing
local integer CGe=LFe()
set ebv[CGe]=u
set eBv[CGe]=v
set eAv[CGe]=d1
set eNv[CGe]=d2
set eIv[CGe]=1
call QIe(CGe,.3,true,function a3x)
endfunction
function a5x takes nothing returns boolean
local integer CGe=Qce()
set eFv[CGe]=(((eFv[CGe])*1.)+((kV)*1.)*Cos(((eGv[CGe])*1.)*bj_DEGTORAD))
set egv[CGe]=(((egv[CGe])*1.)+((kV)*1.)*Sin(((eGv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(eDv[CGe],eFv[CGe],egv[CGe],ehv[CGe])
set efv[CGe]=efv[CGe]-1
if efv[CGe]<=0 then
call QDe()
call Qre(eDv[CGe])
set eDv[CGe]=null
call Lfe(CGe)
endif
return false
endfunction
function a6x takes real x,real y,real a returns nothing
local integer CGe=LDe()
set eGv[CGe]=a
set eFv[CGe]=x
set egv[CGe]=y
set efv[CGe]=R2I(JV/ kV)
set ehv[CGe]=sxe(eFv[CGe],egv[CGe])+60
set eDv[CGe]=AddSpecialEffect("war3mapImported\\MGC_khuhothuc3.mdl",eFv[CGe],egv[CGe])
call BlzSetSpecialEffectYaw((eDv[CGe]),((eGv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((eDv[CGe]),((1.5)*1.))
call BlzSetSpecialEffectZ(eDv[CGe],ehv[CGe])
call QIe(CGe,.03125,true,function a5x)
endfunction
function a7x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=1.
set elv[CGe]=elv[CGe]-1
if elv[CGe]<=0 then
call QDe()
call GroupEnumUnitsInRange(sv,eLv[CGe],emv[CGe],280,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,eKv[CGe])and not spe(n)and not tOe(n)then
call yHe(ekv[CGe],n,ePv[CGe],1.)
call Qre(AddSpecialEffectTarget(("war3mapImported\\MGK_effect1.mdl"),(n),"chest"))
if(GetUnitAbilityLevel((n),('A0VY'))>0)then
set r=1.17+.03*BUe[(eqv[CGe])*(20)+8]
endif
call uee(ekv[CGe],n,false,eMv[CGe]*r,epv[CGe]*r,THe(ekv[CGe]))
call a4x(ekv[CGe],n,eMv[CGe]*r,epv[CGe]*r)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set ekv[CGe]=null
set eKv[CGe]=null
call Lde(CGe)
endif
return false
endfunction
function a8x takes unit u,real d,unit v,real r returns nothing
local integer CGe=LCe()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real a=soe(x,y,GetUnitX(v),GetUnitY(v))
set ekv[CGe]=u
set eLv[CGe]=(((x)*1.)+(($8C)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set emv[CGe]=(((y)*1.)+(($8C)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set elv[CGe]=1
set eMv[CGe]=uBe(u,ude(u,4.,1.2,jV))*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A0VV'))
set epv[CGe]=uce(u,ude(u,$9C4,750,jV),'B007')*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A0VV'))
set ePv[CGe]=ude(u,20,2,jV)
set eKv[CGe]=GetOwningPlayer(ekv[CGe])
set eqv[CGe]=GetPlayerId(eKv[CGe])+1
call a6x(x,y,a-8)
call a6x(x,y,a+8)
call a6x(x,y,a-24)
call a6x(x,y,a+24)
call a6x(x,y,a-40)
call a6x(x,y,a+40)
if r>0 then
set eMv[CGe]=d
set epv[CGe]=d
set ePv[CGe]=r
endif
call QIe(CGe,.3,true,function a7x)
endfunction
function a9x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=0
set eWv[CGe]=(((eWv[CGe])*1.)+((lV)*1.)*Cos(((e1v[CGe])*1.)*bj_DEGTORAD))
set eyv[CGe]=(((eyv[CGe])*1.)+((lV)*1.)*Sin(((e1v[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(eUv[CGe],eWv[CGe],eyv[CGe],e0v[CGe])
if e_v[CGe]<7 then
call GroupEnumUnitsInRange(sv,eWv[CGe],eyv[CGe],$A5,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,eTv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,euv[CGe])then
call yke(etv[CGe],n,eZv[CGe],2.)
call GroupAddUnit(euv[CGe],n)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl"),(n),"origin"))
call uee(etv[CGe],n,true,eYv[CGe],ezv[CGe],THe(etv[CGe]))
set e_v[CGe]=e_v[CGe]+1
if e_v[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set ewv[CGe]=ewv[CGe]-1
if ewv[CGe]<=0 then
call QDe()
call Qre(eUv[CGe])
call Qne(euv[CGe])
set euv[CGe]=null
set eUv[CGe]=null
set etv[CGe]=null
set eTv[CGe]=null
call Lce(CGe)
endif
return false
endfunction
function nvx takes unit u,real d1,real d2,real r,real x,real y,real a returns nothing
local integer CGe=LBe()
set etv[CGe]=u
set e1v[CGe]=a
set eWv[CGe]=x
set eyv[CGe]=y
set ewv[CGe]=R2I(KV/ lV)
set eUv[CGe]=AddSpecialEffect("war3mapImported\\NMK_kiemanhphatquangz.mdl",eWv[CGe],eyv[CGe])
set e0v[CGe]=sxe(eWv[CGe],eyv[CGe])+50
set eYv[CGe]=d1
set ezv[CGe]=d2
set eZv[CGe]=r
set e_v[CGe]=0
set euv[CGe]=CreateGroup()
set eTv[CGe]=GetOwningPlayer(etv[CGe])
call BlzSetSpecialEffectYaw((eUv[CGe]),((e1v[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((eUv[CGe]),((.7)*1.))
call BlzSetSpecialEffectZ(eUv[CGe],e0v[CGe])
call QIe(CGe,.03125,true,function a9x)
endfunction
function nex takes nothing returns boolean
local integer CGe=Qce()
call nvx(e5v[CGe],e9v[CGe],xvv[CGe],xev[CGe],e7v[CGe],e8v[CGe],xxv[CGe])
set e6v[CGe]=e6v[CGe]-1
if e6v[CGe]<=0 then
call QDe()
set e5v[CGe]=null
call Lbe(CGe)
endif
return false
endfunction
function nxx takes unit u,real d,unit v,real r returns nothing
local integer CGe=LNe()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set e5v[CGe]=u
set xxv[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set e7v[CGe]=(((x)*1.)+((50)*1.)*Cos(((xxv[CGe])*1.)*bj_DEGTORAD))
set e8v[CGe]=(((y)*1.)+((50)*1.)*Sin(((xxv[CGe])*1.)*bj_DEGTORAD))
set e6v[CGe]=2
set e9v[CGe]=uBe(u,ude(u,2.,.6,LV))
set xvv[CGe]=uce(u,ude(u,$7D0,600,LV),'B008')
set xev[CGe]=ude(u,20,3,LV)
set e9v[CGe]=e9v[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A07G'))
set xvv[CGe]=xvv[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A07G'))
call Qre(AddSpecialEffect(("war3mapImported\\NMK_kiemanhphatquangztarget.mdl"),((x)*1.),((y)*1.)))
if r>0 then
set e9v[CGe]=d
set xvv[CGe]=d
set xev[CGe]=r
endif
call nvx(e5v[CGe],e9v[CGe],xvv[CGe],xev[CGe],e7v[CGe],e8v[CGe],xxv[CGe])
call QIe(CGe,.15,true,function nex)
endfunction
function nox takes nothing returns boolean
local integer CGe=Qce()
if not spe(xEv[CGe])then
call uee(xVv[CGe],xEv[CGe],false,xnv[CGe],xnv[CGe],THe(xVv[CGe]))
endif
set xav[CGe]=xav[CGe]-1
if xav[CGe]<=0 or spe(xEv[CGe])or spe(xVv[CGe])then
call QDe()
set xVv[CGe]=null
set xEv[CGe]=null
call LAe(CGe)
endif
return false
endfunction
function nrx takes unit u,real d,unit v returns nothing
local integer CGe=LIe()
set xVv[CGe]=u
set xEv[CGe]=v
set xnv[CGe]=d
set xav[CGe]=1
call QIe(CGe,.5,true,function nox)
endfunction
function nix takes nothing returns boolean
local integer CGe=Qce()
local real x=(((xbv[CGe])*1.)+((xCv[CGe])*1.)*Cos(((xcv[CGe])*1.)*bj_DEGTORAD))
local real y=(((xBv[CGe])*1.)+((xCv[CGe])*1.)*Sin(((xcv[CGe])*1.)*bj_DEGTORAD))
local unit n=null
set xcv[CGe]=xcv[CGe]+45
set xCv[CGe]=xCv[CGe]+30
call Qre(AddSpecialEffect(("war3mapImported\\TND_TNLTfire6.mdl"),((x)*1.),((y)*1.)))
call GroupEnumUnitsInRange(sv,x,y,$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yle(xAv[CGe],n,'d',1.)
call yKe(xAv[CGe],n,'d',3.)
call uee(xAv[CGe],n,false,xNv[CGe],xNv[CGe],THe(xAv[CGe]))
call nrx(xAv[CGe],xNv[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set xIv[CGe]=xIv[CGe]-1
if xIv[CGe]<=0 or spe(xAv[CGe])then
call QDe()
set xAv[CGe]=null
call LRe(CGe)
endif
return false
endfunction
function nax takes unit u,real d returns nothing
local integer CGe=LOe()
set xAv[CGe]=u
set xNv[CGe]=d
set xbv[CGe]=GetUnitX(u)
set xBv[CGe]=GetUnitY(u)
set xIv[CGe]=32
set xcv[CGe]=270
set xCv[CGe]='d'
call QIe(CGe,.15,true,function nix)
endfunction
function nnx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set xHv[CGe]=(((xHv[CGe])*1.)+((MV)*1.)*Cos(((xKv[CGe])*1.)*bj_DEGTORAD))
set xjv[CGe]=(((xjv[CGe])*1.)+((MV)*1.)*Sin(((xKv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(xGv[CGe],xHv[CGe],xjv[CGe],xkv[CGe])
call GroupEnumUnitsInRange(sv,xHv[CGe],xjv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,xgv[CGe])then
call uee(xFv[CGe],n,false,xJv[CGe],xJv[CGe],THe(xFv[CGe]))
call yle(xFv[CGe],n,'d',1.5)
call GroupAddUnit(xgv[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set xhv[CGe]=xhv[CGe]-1
if xhv[CGe]<=0 then
call QDe()
call Qre(xGv[CGe])
call Qne(xgv[CGe])
set xgv[CGe]=null
set xGv[CGe]=null
set xFv[CGe]=null
call LXe(CGe)
endif
return false
endfunction
function nVx takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=LEe()
set xFv[CGe]=u
set xKv[CGe]=a
set xHv[CGe]=(((x)*1.)+((50)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set xjv[CGe]=(((y)*1.)+((50)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set xhv[CGe]=R2I(mV/ MV)
set xGv[CGe]=AddSpecialEffect("war3mapImported\\VDK_nhankiemmissile.mdl",xHv[CGe],xjv[CGe])
set xkv[CGe]=sxe(xHv[CGe],xjv[CGe])+'d'
set xJv[CGe]=d
set xgv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((xGv[CGe]),((xKv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((xGv[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(xGv[CGe],xkv[CGe])
call QIe(CGe,.03125,true,function nnx)
endfunction
function nEx takes unit u,real d returns nothing
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real a=GetUnitFacing(u)
call nVx(u,d,x,y,a)
call nVx(u,d,x,y,a+30)
call nVx(u,d,x,y,a+60)
call nVx(u,d,x,y,a+90)
call nVx(u,d,x,y,a+'x')
call nVx(u,d,x,y,a+$96)
call nVx(u,d,x,y,a+$B4)
call nVx(u,d,x,y,a+$D2)
call nVx(u,d,x,y,a+$F0)
call nVx(u,d,x,y,a+270)
call nVx(u,d,x,y,a+300)
call nVx(u,d,x,y,a+330)
endfunction
function nXx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set xqv[CGe]=(((xqv[CGe])*1.)+((pV)*1.)*Cos(((xTv[CGe])*1.)*bj_DEGTORAD))
set xQv[CGe]=(((xQv[CGe])*1.)+((pV)*1.)*Sin(((xTv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(xpv[CGe],xqv[CGe],xQv[CGe],xSv[CGe])
call GroupEnumUnitsInRange(sv,xqv[CGe],xQv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,xtv[CGe])then
call yke(xMv[CGe],n,'d',3)
call GroupAddUnit(xtv[CGe],n)
call uee(xMv[CGe],n,true,xsv[CGe],xsv[CGe],THe(xMv[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set xPv[CGe]=xPv[CGe]-1
if xPv[CGe]<=0 then
call QDe()
call Qre(xpv[CGe])
call Qne(xtv[CGe])
set xtv[CGe]=null
set xpv[CGe]=null
set xMv[CGe]=null
call LVe(CGe)
endif
return false
endfunction
function nOx takes unit u,real x,real y,real d,real a returns nothing
local integer CGe=Lne()
set xMv[CGe]=u
set xTv[CGe]=a
set xqv[CGe]=x
set xQv[CGe]=y
set xsv[CGe]=d
set xSv[CGe]=sxe(xqv[CGe],xQv[CGe])+'d'
set xpv[CGe]=AddSpecialEffect("war3mapImported\\TYD_vudalehoa.mdl",xqv[CGe],xQv[CGe])
set xPv[CGe]=R2I($3E8/ pV)
set xtv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((xpv[CGe]),((xTv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((xpv[CGe]),((.8)*1.))
call BlzSetSpecialEffectZ(xpv[CGe],xSv[CGe])
call QIe(CGe,.03125,true,function nXx)
endfunction
function nRx takes nothing returns boolean
local integer CGe=Qce()
local real x=0
local real y=0
local integer i=1
local integer QZe=6+xYv[CGe]*2
loop
exitwhen i>QZe
set x=(((xzv[CGe])*1.)+(('d')*1.)*Cos(((360/ QZe*i)*1.)*bj_DEGTORAD))
set y=(((xZv[CGe])*1.)+(('d')*1.)*Sin(((360/ QZe*i)*1.)*bj_DEGTORAD))
call nOx(xWv[CGe],x,y,xyv[CGe],360/ QZe*i)
set i=i+1
endloop
set xYv[CGe]=xYv[CGe]+1
if xYv[CGe]>=6 or spe(xWv[CGe])then
call QDe()
set xWv[CGe]=null
call Lae(CGe)
endif
return false
endfunction
function nIx takes unit u,real d returns nothing
local integer CGe=Lie()
set xWv[CGe]=u
set xzv[CGe]=GetUnitX(u)
set xZv[CGe]=GetUnitY(u)
set xYv[CGe]=1
set xyv[CGe]=d
call QIe(CGe,.5,true,function nRx)
endfunction
function nAx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
call GroupEnumUnitsInRange(sv,x5v[CGe],x6v[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yke(x4v[CGe],n,'d',2.)
call uee(x4v[CGe],n,true,x3v[CGe],x3v[CGe],THe(x4v[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set x2v[CGe]=x2v[CGe]-1
if x2v[CGe]<=0 then
call QDe()
call Qre(x7v[CGe])
set x7v[CGe]=null
set x4v[CGe]=null
call Lre(CGe)
endif
return false
endfunction
function nNx takes unit u,real d,real x,real y returns nothing
local integer CGe=Loe()
set x4v[CGe]=u
set x3v[CGe]=d
set x5v[CGe]=x
set x6v[CGe]=y
set x2v[CGe]=2
set x7v[CGe]=AddSpecialEffect("war3mapImported\\NMK_tranphai1111.mdl",x,y)
call BlzSetSpecialEffectScale((x7v[CGe]),((1.3)*1.))
call QIe(CGe,.5,true,function nAx)
endfunction
function nbx takes nothing returns boolean
local integer CGe=Qce()
local real x0=GetUnitX(oxv[CGe])
local real y0=GetUnitY(oxv[CGe])
local real x=GetRandomReal(x0-600,x0+600)
local real y=GetRandomReal(y0-600,y0+600)
call nNx(oxv[CGe],oov[CGe],x,y)
set oev[CGe]=oev[CGe]-1
if oev[CGe]<=0 or spe(oxv[CGe])then
call QDe()
set oxv[CGe]=null
call Lxe(CGe)
endif
return false
endfunction
function nBx takes unit u,real d returns nothing
local integer CGe=Lee()
set oxv[CGe]=u
set oov[CGe]=d
set oev[CGe]=30
call QIe(CGe,.2,true,function nbx)
endfunction
function ncx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set oXv[CGe]=(((oXv[CGe])*1.)+((qV)*1.)*Cos(((oNv[CGe])*1.)*bj_DEGTORAD))
set oOv[CGe]=(((oOv[CGe])*1.)+((qV)*1.)*Sin(((oNv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(oVv[CGe],oXv[CGe],oOv[CGe],oIv[CGe])
call GroupEnumUnitsInRange(sv,oXv[CGe],oOv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,oAv[CGe])then
call yke(onv[CGe],n,'d',3)
call GroupAddUnit(oAv[CGe],n)
call uee(onv[CGe],n,true,oRv[CGe],oRv[CGe],THe(onv[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set oEv[CGe]=oEv[CGe]-1
if oEv[CGe]<=0 then
call QDe()
call Qre(oVv[CGe])
call Qne(oAv[CGe])
set oAv[CGe]=null
set oVv[CGe]=null
set onv[CGe]=null
call Lve(CGe)
endif
return false
endfunction
function nCx takes unit u,real x,real y,real d,real a returns nothing
local integer CGe=l9e()
set onv[CGe]=u
set oNv[CGe]=a
set oXv[CGe]=x
set oOv[CGe]=y
set oRv[CGe]=d
set oIv[CGe]=sxe(oXv[CGe],oOv[CGe])+'d'
set oVv[CGe]=AddSpecialEffect("war3mapImported\\NMK_kiemanh.mdl",oXv[CGe],oOv[CGe])
set oEv[CGe]=R2I(PV/ qV)
set oAv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((oVv[CGe]),((oNv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((oVv[CGe]),((.7)*1.))
call BlzSetSpecialEffectZ(oVv[CGe],oIv[CGe])
call QIe(CGe,.03125,true,function ncx)
endfunction
function ndx takes unit u,real d,real a returns nothing
local real x=GetUnitX(u)
local real y=GetUnitY(u)
call nCx(u,x,y,d,a)
call nCx(u,x,y,d,a-$F)
call nCx(u,x,y,d,a+$F)
call nCx(u,x,y,d,a-30)
call nCx(u,x,y,d,a+30)
call nCx(u,x,y,d,a-45)
call nCx(u,x,y,d,a+45)
endfunction
function nDx takes nothing returns boolean
local integer CGe=Qce()
set ofv[CGe]=ofv[CGe]-1
if ofv[CGe]<=0 or spe(oCv[CGe])or not(GetUnitAbilityLevel((oCv[CGe]),(sV))>0)then
call QDe()
call UnitRemoveAbility(oCv[CGe],sV)
call Tje(oCv[CGe],5034,-odv[CGe])
call Tje(oCv[CGe],611,-odv[CGe])
call Tje(oCv[CGe],Ax,-odv[CGe])
call Tje(oCv[CGe],Nx,-odv[CGe])
call Tje(oCv[CGe],572,-oDv[CGe])
set oCv[CGe]=null
call l8e(CGe)
endif
return false
endfunction
function nfx takes unit u,unit n returns nothing
local integer CGe=l7e()
local real r=1.
if u!=n then
set r=.5
endif
set odv[CGe]=I2R(R2I(ude(u,$82,30,QV)*r))
set oDv[CGe]=ude(u,.1,.02,QV)*r
set oCv[CGe]=n
set ofv[CGe]=R2I(300/ .03125)
call tKe(oCv[CGe],sV)
call Tje(oCv[CGe],5034,odv[CGe])
call Tje(oCv[CGe],611,odv[CGe])
call Tje(oCv[CGe],Ax,odv[CGe])
call Tje(oCv[CGe],Nx,odv[CGe])
call Tje(oCv[CGe],572,oDv[CGe])
call QIe(CGe,.03125,true,function nDx)
endfunction
function nFx takes nothing returns boolean
local integer CGe=Qce()
set ohv[CGe]=ohv[CGe]-1
if ohv[CGe]<=0 then
call QDe()
call nfx(oHv[CGe],ojv[CGe])
set oHv[CGe]=null
set ojv[CGe]=null
call l6e(CGe)
endif
return false
endfunction
function ngx takes unit u,unit n returns nothing
local integer CGe=l5e()
set oHv[CGe]=u
set ojv[CGe]=n
set ohv[CGe]=$A
call UnitRemoveAbility(n,sV)
call QIe(CGe,.03125,true,function nFx)
endfunction
function nGx takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local unit n
call GroupEnumUnitsInRange(sv,GetUnitX(u),GetUnitY(u),$3E8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitAlly(n,p)and not spe(n)and not tOe(n)and(IsUnitType((n),UNIT_TYPE_HERO))and GetUnitTypeId(n)!='H00K' then
if not(GetUnitAbilityLevel((n),(sV))>0)then
call nfx(u,n)
else
call ngx(u,n)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set u=null
set p=null
return false
endfunction
function nhx takes nothing returns boolean
return GetSpellAbilityId()==QV and nGx()
endfunction
function nHx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function nhx))
set t=null
endfunction
function njx takes nothing returns boolean
local integer CGe=Qce()
if omv[CGe]>=20 then
call UnitRemoveBuffs(olv[CGe],false,true)
endif
if omv[CGe]==20 then
call Tje(olv[CGe],4888,-oLv[CGe])
call UnitRemoveAbility(olv[CGe],SV)
endif
set omv[CGe]=omv[CGe]-1
if omv[CGe]<=0 then
call QDe()
set tV[oMv[CGe]]=false
set olv[CGe]=null
call l4e(CGe)
endif
return false
endfunction
function nJx takes unit u,integer lv,integer i returns nothing
local integer CGe=l3e()
set olv[CGe]=u
set oLv[CGe]=$96+30*lv
set omv[CGe]=25
set oMv[CGe]=i
set tV[oMv[CGe]]=true
call tKe(olv[CGe],SV)
call Tje(olv[CGe],4888,oLv[CGe])
call QIe(CGe,1.,true,function njx)
endfunction
function nkx takes nothing returns boolean
local unit u=GetAttacker()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
if not tV[i]and GetRandomReal(0,'d')<=30 then
call nJx(u,BUe[(i)*(20)+$A],i)
endif
set u=null
return false
endfunction
function nKx takes nothing returns boolean
return(GetUnitAbilityLevel((GetAttacker()),('A087'))>0)and nkx()
endfunction
function nlx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function nKx))
set t=null
endfunction
function nLx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set oTv[CGe]=(((oTv[CGe])*1.)+((uV)*1.)*Cos(((oYv[CGe])*1.)*bj_DEGTORAD))
set ouv[CGe]=(((ouv[CGe])*1.)+((uV)*1.)*Sin(((oYv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(oSv[CGe],oTv[CGe],ouv[CGe],oyv[CGe])
if oZv[CGe]<7 then
call GroupEnumUnitsInRange(sv,oTv[CGe],ouv[CGe],90,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,osv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,ozv[CGe])then
call yke(oQv[CGe],n,oWv[CGe],2)
call GroupAddUnit(ozv[CGe],n)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl"),(n),"chest"))
call uee(oQv[CGe],n,true,oUv[CGe],owv[CGe],THe(oQv[CGe]))
set oZv[CGe]=oZv[CGe]+1
if oZv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set otv[CGe]=otv[CGe]-1
if otv[CGe]<=0 then
call QDe()
call Qre(oSv[CGe])
call Qne(ozv[CGe])
set ozv[CGe]=null
set oSv[CGe]=null
set oQv[CGe]=null
set osv[CGe]=null
call l2e(CGe)
endif
return false
endfunction
function nmx takes unit u,real d1,real d2,real r,real x,real y,real a,real b,real aQx returns nothing
local integer CGe=l1e()
set oQv[CGe]=u
set oYv[CGe]=aQx
if b>0 then
set oTv[CGe]=(((x)*1.)+((b)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set ouv[CGe]=(((y)*1.)+((b)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
else
set oTv[CGe]=x
set ouv[CGe]=y
endif
set oUv[CGe]=d1
set owv[CGe]=d2
set oWv[CGe]=r
set oyv[CGe]=sxe(oTv[CGe],ouv[CGe])+80
set oSv[CGe]=AddSpecialEffect("war3mapImported\\DTK_lucmach.mdl",oTv[CGe],ouv[CGe])
set otv[CGe]=R2I(TV/ uV)
set ozv[CGe]=CreateGroup()
set osv[CGe]=GetOwningPlayer(oQv[CGe])
set oZv[CGe]=0
call BlzSetSpecialEffectYaw((oSv[CGe]),((oYv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((oSv[CGe]),((.5)*1.))
call BlzSetSpecialEffectZ(oSv[CGe],oyv[CGe])
call QIe(CGe,.03125,true,function nLx)
endfunction
function nMx takes unit u,real d,unit v,real r returns nothing
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
local real d1=uBe(u,ude(u,1.,.3,UV))
local real d2=uce(u,ude(u,$3E8,300,UV),'B008')
local real rz=ude(u,20,2,UV)
local real x0=GetUnitX(u)
local real y0=GetUnitY(u)
local real a=soe(x0,y0,GetUnitX(v),GetUnitY(v))
local integer lv=GetUnitAbilityLevel(u,UV)
local real x=(((x0)*1.)+((50)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
local real y=(((y0)*1.)+((50)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
if r>0 then
set d1=d
set d2=d
set rz=r
set lv=$A
endif
if lv>=9 then
call nmx(u,d1,d2,rz,x,y,a,0,a)
call nmx(u,d1,d2,rz,x,y,a+90,'d',a)
call nmx(u,d1,d2,rz,x,y,a-90,'d',a)
call nmx(u,d1,d2,rz,x,y,a+90,$C8,a)
call nmx(u,d1,d2,rz,x,y,a-90,$C8,a)
elseif lv>=7 then
call nmx(u,d1,d2,rz,x,y,a+90,50,a)
call nmx(u,d1,d2,rz,x,y,a-90,50,a)
call nmx(u,d1,d2,rz,x,y,a+90,$96,a)
call nmx(u,d1,d2,rz,x,y,a-90,$96,a)
elseif lv>=5 then
call nmx(u,d1,d2,rz,x,y,a,0,a)
call nmx(u,d1,d2,rz,x,y,a+90,'d',a)
call nmx(u,d1,d2,rz,x,y,a-90,'d',a)
elseif lv>=3 then
call nmx(u,d1,d2,rz,x,y,a+90,50,a)
call nmx(u,d1,d2,rz,x,y,a-90,50,a)
else
call nmx(u,d1,d2,rz,x,y,a,0,a)
endif
call Qre(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl",u,"hand right"))
endfunction
function npx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real x2=0
local real y2=0
call Qre(AddSpecialEffect(("war3mapImported\\TND_hoalieneffect.mdl"),((o5v[CGe])*1.),((o6v[CGe])*1.)))
call GroupEnumUnitsInRange(sv,o5v[CGe],o6v[CGe],600,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call uee(o2v[CGe],n,true,o4v[CGe],o4v[CGe],THe(o2v[CGe]))
call yKe(o2v[CGe],n,'d',2.)
call yHe(o2v[CGe],n,'d',.5)
set x2=GetUnitX(n)
set y2=GetUnitY(n)
call s5e(n,sre(o5v[CGe],o6v[CGe],x2,y2)-'d',.7,soe(x2,y2,o5v[CGe],o6v[CGe]),false,false)
endif
call GroupRemoveUnit(sv,n)
endloop
set o3v[CGe]=o3v[CGe]-1
if o3v[CGe]<=0 then
call QDe()
call Qre(o7v[CGe])
set o7v[CGe]=null
set o2v[CGe]=null
call l0e(CGe)
endif
return false
endfunction
function nPx takes unit u,real d,real x,real y returns nothing
local integer CGe=l_e()
set o2v[CGe]=u
set o5v[CGe]=x
set o6v[CGe]=y
set o3v[CGe]=6
set o7v[CGe]=AddSpecialEffect("war3mapImported\\TND_hoalienhole.mdl",o5v[CGe],o6v[CGe])
set o4v[CGe]=d
call BlzSetSpecialEffectScale((o7v[CGe]),((1.5)*1.))
call QIe(CGe,1.,true,function npx)
endfunction
function nqx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set rrv[CGe]=(((rrv[CGe])*1.)+((wV)*1.)*Cos(((rEv[CGe])*1.)*bj_DEGTORAD))
set riv[CGe]=(((riv[CGe])*1.)+((wV)*1.)*Sin(((rEv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(rxv[CGe],rrv[CGe],riv[CGe],rnv[CGe])
call GroupEnumUnitsInRange(sv,rrv[CGe],riv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,rVv[CGe])then
call yKe(rev[CGe],n,'d',3)
call GroupAddUnit(rVv[CGe],n)
call uee(rev[CGe],n,false,rav[CGe],rav[CGe],THe(rev[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set rov[CGe]=rov[CGe]-1
if rov[CGe]<=0 then
call QDe()
call Qre(rxv[CGe])
call Qne(rVv[CGe])
set rVv[CGe]=null
set rxv[CGe]=null
set rev[CGe]=null
call lZe(CGe)
endif
return false
endfunction
function nQx takes unit u,real x,real y,real d,real a returns nothing
local integer CGe=lze()
set rev[CGe]=u
set rEv[CGe]=a
set rrv[CGe]=x
set riv[CGe]=y
set rav[CGe]=d
set rnv[CGe]=sxe(rrv[CGe],riv[CGe])+'d'
set rxv[CGe]=AddSpecialEffect("war3mapImported\\CBB_bong.mdl",rrv[CGe],riv[CGe])
set rov[CGe]=R2I($3E8/ wV)
set rVv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((rxv[CGe]),((rEv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((rxv[CGe]),((1.7)*1.))
call BlzSetSpecialEffectZ(rxv[CGe],rnv[CGe])
call QIe(CGe,.03125,true,function nqx)
endfunction
function nsx takes nothing returns boolean
local integer CGe=Qce()
local real x=0
local real y=0
local integer i=1
local integer QZe=6+rNv[CGe]*2
loop
exitwhen i>QZe
set x=(((rbv[CGe])*1.)+(('d')*1.)*Cos(((360/ QZe*i)*1.)*bj_DEGTORAD))
set y=(((rBv[CGe])*1.)+(('d')*1.)*Sin(((360/ QZe*i)*1.)*bj_DEGTORAD))
call nQx(rIv[CGe],x,y,rAv[CGe],360/ QZe*i)
set i=i+1
endloop
set rNv[CGe]=rNv[CGe]+1
if rNv[CGe]>=6 or spe(rIv[CGe])then
call QDe()
set rIv[CGe]=null
call lYe(CGe)
endif
return false
endfunction
function nSx takes unit u,real d returns nothing
local integer CGe=lye()
set rIv[CGe]=u
set rbv[CGe]=GetUnitX(u)
set rBv[CGe]=GetUnitY(u)
set rNv[CGe]=1
set rAv[CGe]=d
call QIe(CGe,.5,true,function nsx)
endfunction
function ntx takes nothing returns boolean
local integer CGe=Qce()
set rhv[CGe]=rhv[CGe]-1
if rhv[CGe]<=0 or spe(rDv[CGe])or not(GetUnitAbilityLevel((rDv[CGe]),(yV))>0)then
call QDe()
call UnitRemoveAbility(rDv[CGe],yV)
call Qre(yb[rfv[CGe]])
set yb[rfv[CGe]]=null
call Tje(rDv[CGe],4888,-rFv[CGe])
call Tje(rDv[CGe],ax,-rgv[CGe])
call Tje(rDv[CGe],6851,-rGv[CGe])
call Tje(rDv[CGe],6491,-rGv[CGe])
set rDv[CGe]=null
call lWe(CGe)
endif
return false
endfunction
function nTx takes unit u returns nothing
local integer CGe=lwe()
set rFv[CGe]=I2R(R2I(ude(u,'d',20,WV)))
set rgv[CGe]=I2R(R2I(ude(u,.2,.02,WV)))
set rGv[CGe]=I2R(R2I(ude(u,.2,.03,WV)))
set rDv[CGe]=u
set rhv[CGe]=R2I(300/ .03125)
set rfv[CGe]=(GetPlayerId(GetOwningPlayer((u)))+1)
if(bde[(GetPlayerId(GetOwningPlayer(((rDv[CGe])))))])and not(GetUnitAbilityLevel(((rDv[CGe])),('A0YV'))>0)then
set yb[rfv[CGe]]=UCe(bDe[rfv[CGe]],Yb[rfv[CGe]],"origin")
else
set yb[rfv[CGe]]=UCe(rDv[CGe],Yb[rfv[CGe]],"origin")
endif
call tKe(rDv[CGe],yV)
call Tje(rDv[CGe],4888,rFv[CGe])
call Tje(rDv[CGe],ax,rgv[CGe])
call Tje(rDv[CGe],6851,rGv[CGe])
call Tje(rDv[CGe],6491,rGv[CGe])
call QIe(CGe,.03125,true,function ntx)
endfunction
function nux takes nothing returns boolean
local integer CGe=Qce()
set rkv[CGe]=rkv[CGe]-1
if rkv[CGe]<=0 then
call QDe()
call nTx(rKv[CGe])
set rKv[CGe]=null
call lUe(CGe)
endif
return false
endfunction
function nUx takes unit u returns nothing
local integer CGe=lue()
set rKv[CGe]=u
set rkv[CGe]=$A
call UnitRemoveAbility(u,yV)
call QIe(CGe,.03125,true,function nux)
endfunction
function nwx takes nothing returns boolean
local unit u=GetTriggerUnit()
if not(GetUnitAbilityLevel((u),(yV))>0)then
call nTx(u)
else
call nUx(u)
endif
set u=null
return false
endfunction
function nWx takes nothing returns boolean
return GetSpellAbilityId()==WV and nwx()
endfunction
function nyx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function nWx))
set t=null
endfunction
function nYx takes nothing returns boolean
local integer CGe=Qce()
if rPv[CGe]>=rqv[CGe]then
call UnitRemoveBuffs(rMv[CGe],false,true)
endif
if rPv[CGe]==rqv[CGe]then
call UnitRemoveAbility(rMv[CGe],YV)
call Tje(rMv[CGe],5740,-.99)
call Tje(rMv[CGe],4888,-rsv[CGe])
call Tje(rMv[CGe],909,-rQv[CGe])
call SetUnitVertexColor(rMv[CGe],$FF,$FF,$FF,$FF)
endif
set rPv[CGe]=rPv[CGe]-1
if rPv[CGe]<=0 then
call QDe()
set rMv[CGe]=null
set BAe[rpv[CGe]]=false
call lTe(CGe)
endif
return false
endfunction
function nzx takes unit u,integer i returns nothing
local integer CGe=lte()
set rMv[CGe]=u
set rpv[CGe]=i
set BAe[rpv[CGe]]=true
set rPv[CGe]=55-2*BUe[(i)*(20)+5]
set rqv[CGe]=rPv[CGe]-8
set rQv[CGe]=.12+.03*BUe[(i)*(20)+5]
set rsv[CGe]=rQv[CGe]*TKe(u,4888)
call tKe(u,YV)
call Tje(u,5740,.99)
call Tje(u,4888,rsv[CGe])
call Tje(u,909,rQv[CGe])
call SetUnitVertexColor(rMv[CGe],$FF,$FF,25,$FF)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl"),(u),"origin"))
call QIe(CGe,1.,true,function nYx)
endfunction
function nZx takes nothing returns boolean
local integer CGe=Qce()
local unit n
local real x=0
local real y=0
call SetUnitVertexColor(ruv[CGe],$FF,$FF,$FF,17*rwv[CGe])
set rwv[CGe]=rwv[CGe]-1
if rwv[CGe]<=0 then
if not spe(rWv[CGe])then
set x=GetUnitX(rWv[CGe])
set y=GetUnitY(rWv[CGe])
else
set x=GetUnitX(ruv[CGe])
set y=GetUnitY(ruv[CGe])
endif
call Qre(AddSpecialEffect(("war3mapImported\\EFF_bloodnova.mdl"),((x)*1.),((y)*1.)))
call SetUnitX(ruv[CGe],x)
call SetUnitY(ruv[CGe],y)
call SetUnitVertexColor(ruv[CGe],$FF,$FF,$FF,$FF)
call GroupEnumUnitsInRange(sv,x,y,300,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call uee(ruv[CGe],n,false,rUv[CGe],rUv[CGe],THe(ruv[CGe]))
call yHe(ruv[CGe],n,'d',1.)
endif
call GroupRemoveUnit(sv,n)
endloop
set ruv[CGe]=null
set rWv[CGe]=null
call QDe()
call lSe(CGe)
endif
return false
endfunction
function n_x takes unit u,real d,unit v returns nothing
local integer CGe=lse()
set ruv[CGe]=u
set rUv[CGe]=d
set rWv[CGe]=v
set rwv[CGe]=$F
call QIe(CGe,.1,true,function nZx)
endfunction
function n0x takes nothing returns boolean
local integer CGe=Qce()
set r2v[CGe]=r2v[CGe]-1
if r2v[CGe]<=0 or spe(rZv[CGe])or not(GetUnitAbilityLevel((rZv[CGe]),(ZV))>0)then
call QDe()
call Qre(yb[r3v[CGe]])
set yb[r3v[CGe]]=null
call UnitRemoveAbility(rZv[CGe],ZV)
call u_e(rZv[CGe],-r_v[CGe])
call Tje(rZv[CGe],5740,-r0v[CGe])
if r1v[CGe]>0 then
call Tje(rZv[CGe],xx,-r1v[CGe])
endif
set rZv[CGe]=null
call lQe(CGe)
endif
return false
endfunction
function n1x takes unit u,real r1,real r2,integer Upe returns nothing
local integer CGe=lqe()
set rZv[CGe]=u
set r_v[CGe]=r1
set r0v[CGe]=r2
set r1v[CGe]=0
set r2v[CGe]=R2I(Upe/ .03125)
set r3v[CGe]=(GetPlayerId(GetOwningPlayer((u)))+1)
if(bde[(GetPlayerId(GetOwningPlayer(((rZv[CGe])))))])and not(GetUnitAbilityLevel(((rZv[CGe])),('A0YV'))>0)then
set yb[r3v[CGe]]=UCe(bDe[r3v[CGe]],Yb[r3v[CGe]],"origin")
else
set yb[r3v[CGe]]=UCe(rZv[CGe],Yb[r3v[CGe]],"origin")
endif
call tKe(rZv[CGe],ZV)
call u_e(rZv[CGe],r_v[CGe])
call Tje(rZv[CGe],5740,r0v[CGe])
if BUe[(r3v[CGe])*(20)+$A]>0 then
set r1v[CGe]=.05+.02*BUe[(r3v[CGe])*(20)+$A]
call Tje(rZv[CGe],xx,r1v[CGe])
endif
call QIe(CGe,.03125,true,function n0x)
endfunction
function n2x takes nothing returns boolean
local unit u=GetTriggerUnit()
local real r1=ude(u,20,4,zV)
local real r2=ude(u,.55,.05,zV)
if not(GetUnitAbilityLevel((u),(ZV))>0)then
call n1x(u,r1,r2,$F)
else
call IssueImmediateOrderById(u,$D0004)
endif
set u=null
return false
endfunction
function n3x takes nothing returns boolean
return GetSpellAbilityId()==zV and n2x()
endfunction
function n4x takes nothing returns boolean
local integer CGe=Qce()
set r8v[CGe]=r8v[CGe]-1
if r8v[CGe]<=0 then
call QDe()
set vE[r7v[CGe]]=false
call lPe(CGe)
endif
return false
endfunction
function n5x takes unit u,integer i returns nothing
local integer CGe=lpe()
local real r1=16+4*BUe[(i)*(20)+5]
local real r2=.4+.05*BUe[(i)*(20)+5]
set r7v[CGe]=i
set vE[r7v[CGe]]=true
set r8v[CGe]='f'
call Qre(AddSpecialEffectTarget(("war3mapImported\\TYK_effectcast.mdx"),(u),"origin"))
call n1x(u,r1,r2,$C)
call QIe(CGe,1.,true,function n4x)
endfunction
function n6x takes nothing returns boolean
local unit u=GetTriggerUnit()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
if GetUnitLifePercent(u)<=40 and not vE[i]and not(GetUnitAbilityLevel((u),(ZV))>0)then
call n5x(u,i)
endif
set u=null
return false
endfunction
function n7x takes nothing returns boolean
return(GetUnitAbilityLevel((GetTriggerUnit()),('A0RP'))>0)and n6x()
endfunction
function n8x takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function n3x))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function n7x))
set t=null
endfunction
function n9x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set iav[CGe]=(((iav[CGe])*1.)+((xE)*1.)*Cos(((iXv[CGe])*1.)*bj_DEGTORAD))
set inv[CGe]=(((inv[CGe])*1.)+((xE)*1.)*Sin(((iXv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(irv[CGe],iav[CGe],inv[CGe],iEv[CGe])
call GroupEnumUnitsInRange(sv,iav[CGe],inv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,iov[CGe])then
call uee(ixv[CGe],n,true,iVv[CGe],iVv[CGe],THe(ixv[CGe]))
call yke(ixv[CGe],n,'d',2.5)
call GroupAddUnit(iov[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set iiv[CGe]=iiv[CGe]-1
if iiv[CGe]<=0 then
call QDe()
call Qre(irv[CGe])
call Qne(iov[CGe])
set iov[CGe]=null
set irv[CGe]=null
set ixv[CGe]=null
call lMe(CGe)
endif
return false
endfunction
function Vvx takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=lme()
set ixv[CGe]=u
set iXv[CGe]=a
set iav[CGe]=(((x)*1.)+((50)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set inv[CGe]=(((y)*1.)+((50)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set iiv[CGe]=R2I(eE/ xE)
set irv[CGe]=AddSpecialEffect("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveMissile.mdl",iav[CGe],inv[CGe])
set iEv[CGe]=sxe(iav[CGe],inv[CGe])+'d'
set iVv[CGe]=d
set iov[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((irv[CGe]),((iXv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((irv[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(irv[CGe],iEv[CGe])
call QIe(CGe,.03125,true,function n9x)
endfunction
function Vex takes nothing returns boolean
local integer CGe=Qce()
local real a=GetUnitFacing(iNv[CGe])
local real x=GetUnitX(iNv[CGe])
local real y=GetUnitY(iNv[CGe])
call Vvx(iNv[CGe],ibv[CGe],x,y,a)
call Vvx(iNv[CGe],ibv[CGe],x,y,a+$A)
call Vvx(iNv[CGe],ibv[CGe],x,y,a+20)
call Vvx(iNv[CGe],ibv[CGe],x,y,a+30)
call Vvx(iNv[CGe],ibv[CGe],x,y,a+40)
call Vvx(iNv[CGe],ibv[CGe],x,y,a-$A)
call Vvx(iNv[CGe],ibv[CGe],x,y,a-20)
call Vvx(iNv[CGe],ibv[CGe],x,y,a-30)
call Vvx(iNv[CGe],ibv[CGe],x,y,a-40)
set iAv[CGe]=iAv[CGe]-1
if iAv[CGe]<=0 or spe(iNv[CGe])then
call QDe()
set iNv[CGe]=null
call lLe(CGe)
endif
return false
endfunction
function Vxx takes unit u,real d returns nothing
local integer CGe=lle()
set iNv[CGe]=u
set ibv[CGe]=d
set iAv[CGe]=3
call QIe(CGe,1.,true,function Vex)
endfunction
function Vox takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer i=0
loop
exitwhen i>18
call Qre(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",(((iFv[CGe])*1.)+((500)*1.)*Cos(((I2R(i)*20)*1.)*bj_DEGTORAD)),(((igv[CGe])*1.)+((500)*1.)*Sin(((I2R(i)*20)*1.)*bj_DEGTORAD))))
set i=i+1
endloop
call GroupEnumUnitsInRange(sv,iFv[CGe],igv[CGe],850,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yKe(idv[CGe],n,'d',1.5)
call yHe(idv[CGe],n,'d',.5)
call uee(idv[CGe],n,false,iDv[CGe],iDv[CGe],THe(idv[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set ifv[CGe]=ifv[CGe]-1
if ifv[CGe]<=0 then
call QDe()
set idv[CGe]=null
call lKe(CGe)
endif
return false
endfunction
function Vrx takes unit u,real d returns nothing
local integer CGe=lke()
set idv[CGe]=u
set iDv[CGe]=d
set ifv[CGe]=8
set iFv[CGe]=GetUnitX(u)
set igv[CGe]=GetUnitY(u)
call QIe(CGe,1.,true,function Vox)
endfunction
function Vix takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set ijv[CGe]=ijv[CGe]-1
if ijv[CGe]<=0 then
call QDe()
call GroupEnumUnitsInRange(sv,iKv[CGe],ilv[CGe],$F0,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yle(ikv[CGe],n,50,2.)
call uee(ikv[CGe],n,false,iJv[CGe],iJv[CGe],THe(ikv[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set ikv[CGe]=null
call lJe(CGe)
endif
return false
endfunction
function Vax takes unit u,real d,real x,real y returns nothing
local integer CGe=lje()
set ikv[CGe]=u
set iJv[CGe]=d
set iKv[CGe]=x
set ilv[CGe]=y
set ijv[CGe]=1
call QIe(CGe,.3,true,function Vix)
endfunction
function Vnx takes nothing returns boolean
local integer CGe=Qce()
local real x0=GetUnitX(iPv[CGe])
local real y0=GetUnitY(iPv[CGe])
local real x=GetRandomReal(x0-500,x0+500)
local real y=GetRandomReal(y0-500,y0+500)
call Qre(AddSpecialEffect(("war3mapImported\\TVC_effect2.mdl"),((x)*1.),((y)*1.)))
call Vax(iPv[CGe],iqv[CGe],x,y)
set ipv[CGe]=ipv[CGe]-1
if ipv[CGe]<=0 or spe(iPv[CGe])then
call QDe()
set iPv[CGe]=null
call lHe(CGe)
endif
return false
endfunction
function VVx takes unit u,real d returns nothing
local integer CGe=lhe()
set iPv[CGe]=u
set iqv[CGe]=d
set ipv[CGe]=25
call QIe(CGe,.2,true,function Vnx)
endfunction
function VEx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set iwv[CGe]=(((iwv[CGe])*1.)+((rE)*1.)*Cos(((i_v[CGe])*1.)*bj_DEGTORAD))
set iWv[CGe]=(((iWv[CGe])*1.)+((rE)*1.)*Sin(((i_v[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(iuv[CGe],iwv[CGe],iWv[CGe],iZv[CGe])
if i1v[CGe]<4 then
call GroupEnumUnitsInRange(sv,iwv[CGe],iWv[CGe],90,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,iTv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,i0v[CGe])then
call yKe(itv[CGe],n,izv[CGe],2.)
call GroupAddUnit(i0v[CGe],n)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl"),(n),"chest"))
call uee(itv[CGe],n,false,iyv[CGe],iYv[CGe],THe(itv[CGe]))
set i1v[CGe]=i1v[CGe]+1
if i1v[CGe]>=4 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set iUv[CGe]=iUv[CGe]-1
if iUv[CGe]<=0 then
call QDe()
call Qre(iuv[CGe])
call Qne(i0v[CGe])
set i0v[CGe]=null
set iuv[CGe]=null
set itv[CGe]=null
set iTv[CGe]=null
call lGe(CGe)
endif
return false
endfunction
function VXx takes unit u,real x,real y,real d1,real d2,real r,real a returns nothing
local integer CGe=lge()
set itv[CGe]=u
set i_v[CGe]=a
set iwv[CGe]=(((x)*1.)+((60)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set iWv[CGe]=(((y)*1.)+((60)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set iyv[CGe]=d1
set iYv[CGe]=d2
set izv[CGe]=r
set iZv[CGe]=sxe(iwv[CGe],iWv[CGe])+80
set iuv[CGe]=AddSpecialEffect("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl",iwv[CGe],iWv[CGe])
set iUv[CGe]=R2I(oE/ rE)
set i0v[CGe]=CreateGroup()
set iTv[CGe]=GetOwningPlayer(itv[CGe])
set i1v[CGe]=0
call BlzSetSpecialEffectYaw((iuv[CGe]),((i_v[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((iuv[CGe]),((.7)*1.))
call BlzSetSpecialEffectZ(iuv[CGe],iZv[CGe])
call QIe(CGe,.03125,true,function VEx)
endfunction
function VOx takes nothing returns boolean
local integer CGe=Qce()
set i5v[CGe]=i5v[CGe]-1
if i5v[CGe]<=0 then
call QDe()
call VXx(aev[CGe],i6v[CGe],i7v[CGe],i8v[CGe],i9v[CGe],avv[CGe],30*1)
call VXx(aev[CGe],i6v[CGe],i7v[CGe],i8v[CGe],i9v[CGe],avv[CGe],30*2)
call VXx(aev[CGe],i6v[CGe],i7v[CGe],i8v[CGe],i9v[CGe],avv[CGe],30*3)
call VXx(aev[CGe],i6v[CGe],i7v[CGe],i8v[CGe],i9v[CGe],avv[CGe],30*4)
call VXx(aev[CGe],i6v[CGe],i7v[CGe],i8v[CGe],i9v[CGe],avv[CGe],30*5)
call VXx(aev[CGe],i6v[CGe],i7v[CGe],i8v[CGe],i9v[CGe],avv[CGe],30*6)
call VXx(aev[CGe],i6v[CGe],i7v[CGe],i8v[CGe],i9v[CGe],avv[CGe],30*7)
call VXx(aev[CGe],i6v[CGe],i7v[CGe],i8v[CGe],i9v[CGe],avv[CGe],30*8)
call VXx(aev[CGe],i6v[CGe],i7v[CGe],i8v[CGe],i9v[CGe],avv[CGe],30*9)
call VXx(aev[CGe],i6v[CGe],i7v[CGe],i8v[CGe],i9v[CGe],avv[CGe],30*$A)
call VXx(aev[CGe],i6v[CGe],i7v[CGe],i8v[CGe],i9v[CGe],avv[CGe],30*$B)
call VXx(aev[CGe],i6v[CGe],i7v[CGe],i8v[CGe],i9v[CGe],avv[CGe],30*$C)
set aev[CGe]=null
call lFe(CGe)
endif
return false
endfunction
function VRx takes unit u,real d1,real d2,real r returns nothing
local integer CGe=lfe()
set aev[CGe]=u
set i6v[CGe]=GetUnitX(u)
set i7v[CGe]=GetUnitY(u)
set i5v[CGe]=1
set i8v[CGe]=d1
set i9v[CGe]=d2
set avv[CGe]=r
call QIe(CGe,.2,true,function VOx)
endfunction
function VIx takes nothing returns boolean
local unit u=GetTriggerUnit()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
local real d1=uBe(u,ude(u,3.,.9,iE))
local real d2=uce(u,ude(u,$BB8,900,iE),'B009')
local real r=ude(u,20,2,iE)
call VRx(u,d1,d2,r)
set u=null
return false
endfunction
function VAx takes nothing returns boolean
return GetSpellAbilityId()==iE and VIx()
endfunction
function VNx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function VAx))
set t=null
endfunction
function Vbx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set aEv[CGe]=(((aEv[CGe])*1.)+((nE)*1.)*Cos(((aIv[CGe])*1.)*bj_DEGTORAD))
set aXv[CGe]=(((aXv[CGe])*1.)+((nE)*1.)*Sin(((aIv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(anv[CGe],aEv[CGe],aXv[CGe],aRv[CGe])
call GroupEnumUnitsInRange(sv,aEv[CGe],aXv[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,aav[CGe])then
call uee(aiv[CGe],n,false,aOv[CGe],aOv[CGe],THe(aiv[CGe]))
call yle(aiv[CGe],n,'d',1.5)
call GroupAddUnit(aav[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set aVv[CGe]=aVv[CGe]-1
if aVv[CGe]<=0 then
call QDe()
call Qre(anv[CGe])
call Qne(aav[CGe])
set aav[CGe]=null
set anv[CGe]=null
set aiv[CGe]=null
call lDe(CGe)
endif
return false
endfunction
function VBx takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=lde()
set aiv[CGe]=u
set aIv[CGe]=a
set aEv[CGe]=(((x)*1.)+((50)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set aXv[CGe]=(((y)*1.)+((50)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set aVv[CGe]=R2I(aE/ nE)
set anv[CGe]=AddSpecialEffect("war3mapImported\\CLD_gioloc2.mdl",aEv[CGe],aXv[CGe])
set aRv[CGe]=sxe(aEv[CGe],aXv[CGe])
set aOv[CGe]=d
set aav[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((anv[CGe]),((aIv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((anv[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(anv[CGe],aRv[CGe])
call QIe(CGe,.03125,true,function Vbx)
endfunction
function Vcx takes unit u,real d returns nothing
local real a=GetUnitFacing(u)
local real x0=(((GetUnitX(u))*1.)+((300)*1.)*Cos(((a+$B4)*1.)*bj_DEGTORAD))
local real y0=(((GetUnitY(u))*1.)+((300)*1.)*Sin(((a+$B4)*1.)*bj_DEGTORAD))
local real x=x0
local real y=y0
call VBx(u,d,x,y,a)
set x=(((x0)*1.)+(($C8)*1.)*Cos(((a+90)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+(($C8)*1.)*Sin(((a+90)*1.)*bj_DEGTORAD))
call VBx(u,d,x,y,a)
set x=(((x0)*1.)+(($C8)*1.)*Cos(((a-90)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+(($C8)*1.)*Sin(((a-90)*1.)*bj_DEGTORAD))
call VBx(u,d,x,y,a)
set x=(((x0)*1.)+((400)*1.)*Cos(((a+90)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+((400)*1.)*Sin(((a+90)*1.)*bj_DEGTORAD))
call VBx(u,d,x,y,a)
set x=(((x0)*1.)+((400)*1.)*Cos(((a-90)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+((400)*1.)*Sin(((a-90)*1.)*bj_DEGTORAD))
call VBx(u,d,x,y,a)
set x=(((x0)*1.)+((600)*1.)*Cos(((a+90)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+((600)*1.)*Sin(((a+90)*1.)*bj_DEGTORAD))
call VBx(u,d,x,y,a)
set x=(((x0)*1.)+((600)*1.)*Cos(((a-90)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+((600)*1.)*Sin(((a-90)*1.)*bj_DEGTORAD))
call VBx(u,d,x,y,a)
endfunction
function VCx takes nothing returns boolean
local integer CGe=Qce()
local real x=(((adv[CGe])*1.)+((agv[CGe])*1.)*Cos(((aFv[CGe])*1.)*bj_DEGTORAD))
local real y=(((afv[CGe])*1.)+((agv[CGe])*1.)*Sin(((aFv[CGe])*1.)*bj_DEGTORAD))
local unit n=null
set aFv[CGe]=aFv[CGe]+45
set agv[CGe]=agv[CGe]+30
call Qre(AddSpecialEffect(("war3mapImported\\TVC_effect2.mdl"),((x)*1.),((y)*1.)))
call GroupEnumUnitsInRange(sv,x,y,$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yle(acv[CGe],n,50,1.)
call uee(acv[CGe],n,false,aCv[CGe],aCv[CGe],THe(acv[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set aBv[CGe]=aBv[CGe]-1
if aBv[CGe]<=0 or spe(acv[CGe])then
call QDe()
set acv[CGe]=null
call lCe(CGe)
endif
return false
endfunction
function Vdx takes unit u,real d returns nothing
local integer CGe=lce()
set acv[CGe]=u
set aCv[CGe]=d
set adv[CGe]=GetUnitX(u)
set afv[CGe]=GetUnitY(u)
set aBv[CGe]=32
set aFv[CGe]=270
set agv[CGe]='d'
call QIe(CGe,.15,true,function VCx)
endfunction
function VDx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set aKv[CGe]=(((aKv[CGe])*1.)+((VE)*1.)*Cos(((apv[CGe])*1.)*bj_DEGTORAD))
set alv[CGe]=(((alv[CGe])*1.)+((VE)*1.)*Sin(((apv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(aJv[CGe],aKv[CGe],alv[CGe],amv[CGe])
call GroupEnumUnitsInRange(sv,aKv[CGe],alv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,aMv[CGe])then
call yke(ajv[CGe],n,'d',4)
call GroupAddUnit(aMv[CGe],n)
call uee(ajv[CGe],n,true,aLv[CGe],aLv[CGe],THe(ajv[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set akv[CGe]=akv[CGe]-1
if akv[CGe]<=0 then
call QDe()
call Qre(aJv[CGe])
call Qne(aMv[CGe])
set aMv[CGe]=null
set aJv[CGe]=null
set ajv[CGe]=null
call lBe(CGe)
endif
return false
endfunction
function Vfx takes unit u,real x,real y,real d,real a returns nothing
local integer CGe=lbe()
set ajv[CGe]=u
set apv[CGe]=a
set aKv[CGe]=(((x)*1.)+((80)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set alv[CGe]=(((y)*1.)+((80)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set aLv[CGe]=d
set amv[CGe]=sxe(aKv[CGe],alv[CGe])+'d'
set aJv[CGe]=AddSpecialEffect("war3mapImported\\DTK_lucmach43.mdl",aKv[CGe],alv[CGe])
set akv[CGe]=R2I($3E8/ VE)
set aMv[CGe]=CreateGroup()
call BlzSetSpecialEffectColor((aJv[CGe]),(GetRandomInt(0,$FF)),(GetRandomInt(0,$FF)),(GetRandomInt(0,$FF)))
call BlzSetSpecialEffectYaw((aJv[CGe]),((apv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((aJv[CGe]),((.06)*1.))
call BlzSetSpecialEffectZ(aJv[CGe],amv[CGe])
call QIe(CGe,.03125,true,function VDx)
endfunction
function VFx takes nothing returns boolean
local integer CGe=Qce()
local real x=GetUnitX(atv[CGe])
local real y=GetUnitY(atv[CGe])
call Vfx(atv[CGe],x,y,aSv[CGe],GetRandomReal(0,360))
call Vfx(atv[CGe],x,y,aSv[CGe],GetRandomReal(0,360))
call Vfx(atv[CGe],x,y,aSv[CGe],GetRandomReal(0,360))
set asv[CGe]=asv[CGe]-1
if asv[CGe]<=0 then
call QDe()
set atv[CGe]=null
call lNe(CGe)
endif
return false
endfunction
function Vgx takes unit u,real d returns nothing
local integer CGe=lAe()
set atv[CGe]=u
set aSv[CGe]=d
set asv[CGe]=20
call QIe(CGe,.15,true,function VFx)
endfunction
function VGx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=1.
if a_v[CGe]==7 and aWv[CGe]!=null then
call Qre(AddSpecialEffect(("war3mapImported\\CLK_loidongcuuthien.mdl"),((GetUnitX(aWv[CGe]))*1.),((GetUnitY(aWv[CGe]))*1.)))
call GroupAddUnit(a0v[CGe],aWv[CGe])
call yle(awv[CGe],aWv[CGe],aZv[CGe],1.)
call uee(awv[CGe],aWv[CGe],true,aYv[CGe],azv[CGe],THe(awv[CGe]))
else
call GroupEnumUnitsInRange(sv,a1v[CGe],a2v[CGe],$3E8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,ayv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,a0v[CGe])then
call Qre(AddSpecialEffect(("war3mapImported\\CLK_loidongcuuthien.mdl"),((GetUnitX(n))*1.),((GetUnitY(n))*1.)))
call GroupAddUnit(a0v[CGe],n)
call yle(awv[CGe],n,aZv[CGe],1.)
if(GetUnitAbilityLevel((n),(uE))>0)then
set r=1.26+.04*GetUnitAbilityLevel(awv[CGe],TE)
endif
call uee(awv[CGe],n,true,aYv[CGe]*r,azv[CGe]*r,THe(awv[CGe]))
call GroupClear(sv)
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set a_v[CGe]=a_v[CGe]-1
if a_v[CGe]<=0 or spe(awv[CGe])then
call QDe()
call Qne(a0v[CGe])
set aWv[CGe]=null
set a0v[CGe]=null
set awv[CGe]=null
set ayv[CGe]=null
call lIe(CGe)
endif
return false
endfunction
function Vhx takes unit u,unit v,real d1,real d2,real r returns nothing
local integer CGe=lRe()
set awv[CGe]=u
set ayv[CGe]=GetOwningPlayer(u)
set aYv[CGe]=d1
set azv[CGe]=d2
set aZv[CGe]=r
set a_v[CGe]=7
set a0v[CGe]=CreateGroup()
set aWv[CGe]=v
set a1v[CGe]=GetUnitX(v)
set a2v[CGe]=GetUnitY(v)
call QIe(CGe,.3,true,function VGx)
endfunction
function VHx takes nothing returns boolean
local unit u=GetTriggerUnit()
local unit v=GetSpellTargetUnit()
local real d1=uBe(u,ude(u,6.,1.8,'A0BM'))
local real d2=uce(u,ude(u,8000,$960,'A0BM'),'B00A')
local real r=ude(u,30,3,'A0BM')
set d1=d1*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A0BF'))
set d2=d2*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A0BF'))
call Vhx(u,v,d1,d2,r)
set u=null
set v=null
return false
endfunction
function Vjx takes nothing returns boolean
return GetSpellAbilityId()=='A0BM' and VHx()
endfunction
function VJx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function Vjx))
set t=null
endfunction
function Vkx takes nothing returns boolean
local integer CGe=Qce()
if not spe(a9v[CGe])then
call uee(a8v[CGe],a9v[CGe],false,0,a7v[CGe],'B007')
endif
set a6v[CGe]=a6v[CGe]-1
if a6v[CGe]<=0 or spe(a9v[CGe])or spe(a8v[CGe])then
call QDe()
set a8v[CGe]=null
set a9v[CGe]=null
call lOe(CGe)
endif
return false
endfunction
function VKx takes unit u,unit v,real d returns nothing
local integer CGe=lXe()
set a8v[CGe]=u
set a9v[CGe]=v
set a7v[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set a6v[CGe]=3
call QIe(CGe,.98,true,function Vkx)
endfunction
function Vlx takes nothing returns boolean
local integer CGe=Qce()
set niv[CGe]=(((niv[CGe])*1.)+((OE)*1.)*Cos(((nnv[CGe])*1.)*bj_DEGTORAD))
set nav[CGe]=(((nav[CGe])*1.)+((OE)*1.)*Sin(((nnv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(nov[CGe],niv[CGe],nav[CGe],nVv[CGe])
set nrv[CGe]=nrv[CGe]-1
if nrv[CGe]<=0 then
call QDe()
call Qre(nov[CGe])
set nov[CGe]=null
call lEe(CGe)
endif
return false
endfunction
function VLx takes real x,real y,real a returns nothing
local integer CGe=lVe()
set nnv[CGe]=a
set niv[CGe]=x
set nav[CGe]=y
set nrv[CGe]=R2I(XE/ OE)
set nVv[CGe]=sxe(niv[CGe],nav[CGe])+60
set nov[CGe]=AddSpecialEffect("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilMissile.mdl",niv[CGe],nav[CGe])
call BlzSetSpecialEffectYaw((nov[CGe]),((nnv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((nov[CGe]),((1.4)*1.))
call BlzSetSpecialEffectZ(nov[CGe],nVv[CGe])
call QIe(CGe,.03125,true,function Vlx)
endfunction
function Vmx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=1.
set nAv[CGe]=nAv[CGe]-1
if nAv[CGe]<=0 then
call QDe()
call GroupEnumUnitsInRange(sv,nNv[CGe],nbv[CGe],$F0,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,nIv[CGe])and not spe(n)and not tOe(n)then
call yHe(nRv[CGe],n,nCv[CGe],1.)
call Qre(AddSpecialEffectTarget(("war3mapImported\\MGC_longthontarget.mdl"),(n),"chest"))
if(GetUnitAbilityLevel((n),('A0VY'))>0)then
set r=1.17+.03*BUe[(ndv[CGe])*(20)+8]
endif
call uee(nRv[CGe],n,false,nBv[CGe]*r,ncv[CGe]*r,THe(nRv[CGe]))
call VKx(nRv[CGe],n,ncv[CGe]*r)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set nRv[CGe]=null
set nIv[CGe]=null
call lne(CGe)
endif
return false
endfunction
function VMx takes unit u,real d,unit v,real r returns nothing
local integer CGe=lae()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real a=soe(x,y,GetUnitX(v),GetUnitY(v))
set nRv[CGe]=u
set nNv[CGe]=(((x)*1.)+(('d')*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set nbv[CGe]=(((y)*1.)+(('d')*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set nAv[CGe]=1
set nBv[CGe]=uBe(u,ude(u,4.,1.2,EE))*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A0VN'))
set ncv[CGe]=uce(u,ude(u,$7D0,600,EE),'B007')*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A0VN'))
set nCv[CGe]=ude(u,20,2,EE)
set nIv[CGe]=GetOwningPlayer(nRv[CGe])
set ndv[CGe]=GetPlayerId(nIv[CGe])+1
call VLx((((x)*1.)+((30)*1.)*Cos(((a+90)*1.)*bj_DEGTORAD)),(((y)*1.)+((30)*1.)*Sin(((a+90)*1.)*bj_DEGTORAD)),a)
call VLx((((x)*1.)+((30)*1.)*Cos(((a-90)*1.)*bj_DEGTORAD)),(((y)*1.)+((30)*1.)*Sin(((a-90)*1.)*bj_DEGTORAD)),a)
call VLx((((x)*1.)+((90)*1.)*Cos(((a+90)*1.)*bj_DEGTORAD)),(((y)*1.)+((90)*1.)*Sin(((a+90)*1.)*bj_DEGTORAD)),a)
call VLx((((x)*1.)+((90)*1.)*Cos(((a-90)*1.)*bj_DEGTORAD)),(((y)*1.)+((90)*1.)*Sin(((a-90)*1.)*bj_DEGTORAD)),a)
if r>0 then
set nBv[CGe]=d
set ncv[CGe]=d
set nCv[CGe]=r
endif
call QIe(CGe,.3,true,function Vmx)
endfunction
function Vpx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set nhv[CGe]=nhv[CGe]-1
if nhv[CGe]<=0 then
call QDe()
if nlv[CGe]<7 then
call GroupEnumUnitsInRange(sv,nHv[CGe],njv[CGe],$B4,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,nGv[CGe])and not spe(n)and not tOe(n)then
call yHe(ngv[CGe],n,nKv[CGe],1.)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TNK_vanlongeffecttarget.mdl"),(n),"chest"))
call uee(ngv[CGe],n,false,nJv[CGe],nkv[CGe],THe(ngv[CGe]))
set nlv[CGe]=nlv[CGe]+1
if nlv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set ngv[CGe]=null
set nGv[CGe]=null
call lie(CGe)
endif
return false
endfunction
function VPx takes unit u,real d,unit v,real r returns nothing
local integer CGe=lre()
set ngv[CGe]=u
set nHv[CGe]=GetUnitX(v)
set njv[CGe]=GetUnitY(v)
set nhv[CGe]=1
set nJv[CGe]=uBe(u,ude(u,1.,.3,RE))
set nkv[CGe]=uce(u,ude(u,$3E8,300,RE),'B006')
set nKv[CGe]=ude(u,20,2,RE)
set nlv[CGe]=0
set nGv[CGe]=GetOwningPlayer(ngv[CGe])
call Qre(AddSpecialEffectTarget("war3mapImported\\TLQ_datmacast.mdl",ngv[CGe],"hand right"))
call Qre(AddSpecialEffectTarget("war3mapImported\\TLQ_datmacast.mdl",ngv[CGe],"hand left"))
if r>0 then
set nJv[CGe]=d
set nkv[CGe]=d
set nKv[CGe]=r
endif
call QIe(CGe,.03125,true,function Vpx)
endfunction
function Vqx takes nothing returns boolean
local integer CGe=Qce()
local unit n
set nsv[CGe]=(((nsv[CGe])*1.)+((IE)*1.)*Cos(((nQv[CGe])*1.)*bj_DEGTORAD))
set nSv[CGe]=(((nSv[CGe])*1.)+((IE)*1.)*Sin(((nQv[CGe])*1.)*bj_DEGTORAD))
call Qre(AddSpecialEffect(("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl"),((nsv[CGe])*1.),((nSv[CGe])*1.)))
call GroupEnumUnitsInRange(sv,nsv[CGe],nSv[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call uee(npv[CGe],n,false,nPv[CGe],nPv[CGe],THe(npv[CGe]))
call yHe(npv[CGe],n,'d',1.)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set nqv[CGe]=nqv[CGe]-1
if nqv[CGe]<=0 then
set npv[CGe]=null
call QDe()
call loe(CGe)
endif
return false
endfunction
function VQx takes unit u,real d,real a returns nothing
local integer CGe=lxe()
set npv[CGe]=u
set nPv[CGe]=d
set nQv[CGe]=a
set nsv[CGe]=GetUnitX(u)
set nSv[CGe]=GetUnitY(u)
set nqv[CGe]=R2I(AE/ IE)
call QIe(CGe,.3,true,function Vqx)
endfunction
function Vsx takes nothing returns boolean
local integer CGe=Qce()
local unit n
set nYv[CGe]=(((nYv[CGe])*1.)+(('d')*1.)*Cos(((nyv[CGe])*1.)*bj_DEGTORAD))
set nzv[CGe]=(((nzv[CGe])*1.)+(('d')*1.)*Sin(((nyv[CGe])*1.)*bj_DEGTORAD))
call Qre(AddSpecialEffect(("war3mapImported\\EFF_impale.mdl"),((nYv[CGe])*1.),((nzv[CGe])*1.)))
call GroupEnumUnitsInRange(sv,nYv[CGe],nzv[CGe],90,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call uee(nUv[CGe],n,false,nwv[CGe],nwv[CGe],THe(nUv[CGe]))
call yHe(nUv[CGe],n,'d',1.)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set nWv[CGe]=nWv[CGe]-1
if nWv[CGe]<=0 then
set nUv[CGe]=null
call QDe()
call lee(CGe)
endif
return false
endfunction
function VSx takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=lve()
set nUv[CGe]=u
set nwv[CGe]=d
set nyv[CGe]=a
set nYv[CGe]=x
set nzv[CGe]=y
set nWv[CGe]=R2I(NE/ 'd')
call QIe(CGe,.2,true,function Vsx)
endfunction
function Vtx takes unit u,real d returns nothing
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local integer i=1
loop
exitwhen i>18
call VSx(u,d,x,y,i*20)
set i=i+1
endloop
endfunction
function VTx takes unit u,player p,real d1,real d2,real x,real y returns boolean
local integer c=0
local unit n=null
local integer i=GetPlayerId(p)+1
call Qre(AddSpecialEffect(("war3mapImported\\TYK_frosttarget.mdl"),((x)*1.),((y)*1.)))
if BUe[(i)*(20)+5]>0 then
set Pv=(d1+d2)*.15
call Tse(u,Pv)
endif
call GroupEnumUnitsInRange(sv,x,y,$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,p)and not spe(n)and not tOe(n)then
call uee(u,n,true,d1,d2,THe(u))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
return false
endfunction
function Vux takes nothing returns boolean
local integer CGe=Qce()
local real d=0
local real x=GetUnitX(Vev[CGe])
local real y=GetUnitY(Vev[CGe])
if not spe(Vev[CGe])then
set Vvv[CGe]=soe(n5v[CGe],n6v[CGe],x,y)
set n5v[CGe]=(((n5v[CGe])*1.)+((bE)*1.)*Cos(((Vvv[CGe])*1.)*bj_DEGTORAD))
set n6v[CGe]=(((n6v[CGe])*1.)+((bE)*1.)*Sin(((Vvv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(n3v[CGe],n5v[CGe],n6v[CGe],n9v[CGe])
set d=sre(n5v[CGe],n6v[CGe],x,y)
if d<=90 then
call VTx(n1v[CGe],n2v[CGe],n7v[CGe],n8v[CGe],n5v[CGe],n6v[CGe])
set n4v[CGe]=0
endif
endif
set n4v[CGe]=n4v[CGe]-1
if n4v[CGe]<=0 or spe(Vev[CGe])then
call QDe()
call Qre(n3v[CGe])
set n3v[CGe]=null
set n1v[CGe]=null
set n2v[CGe]=null
call K9e(CGe)
endif
return false
endfunction
function VUx takes unit u,real d1,real d2,real x,real y,unit v returns nothing
local integer CGe=K8e()
set n1v[CGe]=u
set Vev[CGe]=v
set n5v[CGe]=x
set n6v[CGe]=y
set n7v[CGe]=d1
set n8v[CGe]=d2
set n9v[CGe]=sxe(n5v[CGe],n6v[CGe])+'d'
set n3v[CGe]=AddSpecialEffect("war3mapImported\\TYD_mucda.mdl",n5v[CGe],n6v[CGe])
set n4v[CGe]='d'
set n2v[CGe]=GetOwningPlayer(n1v[CGe])
set Vvv[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
call BlzSetSpecialEffectYaw((n3v[CGe]),((Vvv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((n3v[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(n3v[CGe],n9v[CGe])
call QIe(CGe,.03125,true,function Vux)
endfunction
function Vwx takes nothing returns boolean
local integer CGe=Qce()
local real x=0
local real y=0
if VVv[CGe]>$C2 and not spe(Vav[CGe])then
set x=GetUnitX(Viv[CGe])
set y=GetUnitY(Viv[CGe])
call VUx(Viv[CGe],VEv[CGe],VXv[CGe],x,y,Vav[CGe])
endif
set VVv[CGe]=VVv[CGe]-1
if VVv[CGe]<=0 then
call QDe()
set BNe[Vnv[CGe]]=false
set Viv[CGe]=null
set Vav[CGe]=null
call K7e(CGe)
endif
return false
endfunction
function VWx takes unit u,integer i,unit v returns nothing
local integer CGe=K6e()
set VEv[CGe]=uBe(u,1.4+.6*BUe[(i)*(20)+5])
set VXv[CGe]=uce(u,$834+900*BUe[(i)*(20)+5],'B008')
set Viv[CGe]=u
set Vav[CGe]=v
set Vnv[CGe]=i
set BNe[Vnv[CGe]]=true
set VVv[CGe]=$C8
call QIe(CGe,.3,true,function Vwx)
endfunction
function Vyx takes nothing returns boolean
local unit u=GetTriggerUnit()
local unit v=GetAttacker()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
if GetUnitLifePercent(u)<=40 and not BNe[i]then
call VWx(u,i,v)
endif
set u=null
set v=null
return false
endfunction
function VYx takes nothing returns boolean
return(GetUnitAbilityLevel((GetTriggerUnit()),('A0R9'))>0)and Vyx()
endfunction
function Vzx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function VYx))
set t=null
endfunction
function VZx takes nothing returns boolean
local integer CGe=Qce()
call uee(Vbv[CGe],VBv[CGe],true,0,VNv[CGe],'B007')
set VAv[CGe]=VAv[CGe]-1
if VAv[CGe]<=0 or spe(VBv[CGe])or spe(Vbv[CGe])then
call QDe()
set Vbv[CGe]=null
set VBv[CGe]=null
call K5e(CGe)
endif
return false
endfunction
function V_x takes unit u,unit v,real d returns nothing
local integer CGe=K4e()
set Vbv[CGe]=u
set VBv[CGe]=v
set VNv[CGe]=d
set VAv[CGe]=1
call QIe(CGe,1.,true,function VZx)
endfunction
function V0x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real x=0
local real y=0
local integer i=1
local integer c=(8+2*Vfv[CGe])
loop
exitwhen i>c
set x=(((VFv[CGe])*1.)+(($C8+'d'*Vfv[CGe])*1.)*Cos(((360/ c*i)*1.)*bj_DEGTORAD))
set y=(((Vgv[CGe])*1.)+(($C8+'d'*Vfv[CGe])*1.)*Sin(((360/ c*i)*1.)*bj_DEGTORAD))
call Qre(AddSpecialEffect(("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl"),((x)*1.),((y)*1.)))
set i=i+1
endloop
call GroupEnumUnitsInRange(sv,VFv[CGe],Vgv[CGe],300+'d'*Vfv[CGe],Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call uee(VDv[CGe],n,true,VGv[CGe],VGv[CGe],THe(VDv[CGe]))
call yke(VDv[CGe],n,'d',3.)
call V_x(VDv[CGe],n,VGv[CGe]/ 2)
endif
call GroupRemoveUnit(sv,n)
endloop
set Vfv[CGe]=Vfv[CGe]+1
if Vfv[CGe]==5 then
call QDe()
set VDv[CGe]=null
call K3e(CGe)
endif
return false
endfunction
function V1x takes unit u,real d returns nothing
local integer CGe=K2e()
set VDv[CGe]=u
set VFv[CGe]=GetUnitX(u)
set Vgv[CGe]=GetUnitY(u)
set Vfv[CGe]=0
set VGv[CGe]=d
call QIe(CGe,1.,true,function V0x)
endfunction
function V2x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set VLv[CGe]=(((VLv[CGe])*1.)+((BE)*1.)*Cos(((VQv[CGe])*1.)*bj_DEGTORAD))
set Vmv[CGe]=(((Vmv[CGe])*1.)+((BE)*1.)*Sin(((VQv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(VKv[CGe],VLv[CGe],Vmv[CGe],Vqv[CGe])
if not Vtv[CGe]then
if VSv[CGe]<4 then
call GroupEnumUnitsInRange(sv,VLv[CGe],Vmv[CGe],90,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Vkv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Vsv[CGe])then
call yke(VJv[CGe],n,VPv[CGe],2)
call GroupAddUnit(Vsv[CGe],n)
if GetRandomReal(0,'d')<=30 then
call Qre(AddSpecialEffectTarget(("war3mapImported\\DTK_lucmachtarget42.mdl"),(n),"chest"))
endif
call uee(VJv[CGe],n,true,VMv[CGe],Vpv[CGe],THe(VJv[CGe]))
set VSv[CGe]=VSv[CGe]+1
if VSv[CGe]>=4 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
endif
set n=null
set Vlv[CGe]=Vlv[CGe]-1
if Vlv[CGe]<=0 and not Vtv[CGe]then
set Vlv[CGe]=5
set Vtv[CGe]=true
set VQv[CGe]=VQv[CGe]+$B4
endif
if Vlv[CGe]<=0 and Vtv[CGe]then
call QDe()
call Qre(VKv[CGe])
call Qne(Vsv[CGe])
set Vsv[CGe]=null
set VKv[CGe]=null
set VJv[CGe]=null
set Vkv[CGe]=null
call K1e(CGe)
endif
return false
endfunction
function V3x takes unit u,player p,real x,real y,real d1,real d2,real r,real a,real db,real aQx returns nothing
local integer CGe=K0e()
set VJv[CGe]=u
set VQv[CGe]=aQx
set VLv[CGe]=(((x)*1.)+((80)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set Vmv[CGe]=(((y)*1.)+((80)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set VMv[CGe]=d1
set Vpv[CGe]=d2
set VPv[CGe]=r
set Vqv[CGe]=sxe(VLv[CGe],Vmv[CGe])+GetRandomReal(50,'x')
set VKv[CGe]=AddSpecialEffect("war3mapImported\\DTK_lucmach43.mdl",VLv[CGe],Vmv[CGe])
set Vlv[CGe]=R2I(db/ BE)
set Vtv[CGe]=false
set Vsv[CGe]=CreateGroup()
set Vkv[CGe]=p
set VSv[CGe]=0
call BlzSetSpecialEffectColor((VKv[CGe]),(GetRandomInt(0,$FF)),(GetRandomInt(0,$FF)),(GetRandomInt(0,$FF)))
call BlzSetSpecialEffectYaw((VKv[CGe]),((VQv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((VKv[CGe]),((.06)*1.))
call BlzSetSpecialEffectZ(VKv[CGe],Vqv[CGe])
call QIe(CGe,.03125,true,function V2x)
endfunction
function V4x takes nothing returns boolean
local integer CGe=Qce()
local real db=800
local real r=GetRandomInt(-3,3)
if not spe(V2v[CGe])then
set db=sre(Vzv[CGe],VZv[CGe],GetUnitX(V2v[CGe]),GetUnitY(V2v[CGe]))
endif
call V3x(V1v[CGe],V_v[CGe],Vzv[CGe],VZv[CGe],Vyv[CGe],VYv[CGe],VWv[CGe],V0v[CGe]+r*20,db+40,V0v[CGe])
set Vwv[CGe]=Vwv[CGe]-1
if Vwv[CGe]==5 then
call Qre(V3v[CGe])
set V3v[CGe]=null
endif
if Vwv[CGe]<=0 or spe(V1v[CGe])then
call QDe()
set V1v[CGe]=null
set V2v[CGe]=null
set V_v[CGe]=null
call K_e(CGe)
endif
return false
endfunction
function V5x takes unit u,real d,unit v,real r returns nothing
local integer CGe=KZe()
local real x=0
local real y=0
local integer i=0
set V1v[CGe]=u
set Vyv[CGe]=uBe(u,ude(u,1.2,.36,cE))
set VYv[CGe]=uce(u,ude(u,$4B0,360,cE),'B008')
set VWv[CGe]=ude(u,$A,2,cE)
set Vzv[CGe]=GetUnitX(u)
set VZv[CGe]=GetUnitY(u)
set V_v[CGe]=GetOwningPlayer(u)
set i=GetPlayerId(V_v[CGe])+1
set V0v[CGe]=soe(Vzv[CGe],VZv[CGe],GetUnitX(v),GetUnitY(v))
set Vyv[CGe]=Vyv[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A0R2'))
set VYv[CGe]=VYv[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A0R2'))
if BUe[(i)*(20)+$B]>0 then
set Vyv[CGe]=Vyv[CGe]*(1.2+.05*BUe[(i)*(20)+$B])
set VYv[CGe]=VYv[CGe]*(1.2+.05*BUe[(i)*(20)+$B])
endif
set Vwv[CGe]=6
set V2v[CGe]=v
if r>0 then
set Vyv[CGe]=d
set VYv[CGe]=d
set VWv[CGe]=r
endif
set x=(((Vzv[CGe])*1.)+((20)*1.)*Cos(((V0v[CGe])*1.)*bj_DEGTORAD))
set y=(((VZv[CGe])*1.)+((20)*1.)*Sin(((V0v[CGe])*1.)*bj_DEGTORAD))
set V3v[CGe]=AddSpecialEffect("war3mapImported\\DTK_lucmachcaster.mdl",x,y)
call BlzSetSpecialEffectZ(V3v[CGe],sxe(x,y)+50)
call BlzSetSpecialEffectTimeScale((V3v[CGe]),((2.)*1.))
call BlzSetSpecialEffectYaw((V3v[CGe]),((270)*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((V3v[CGe]),((1.5)*1.))
call QIe(CGe,.15,true,function V4x)
endfunction
function V6x takes nothing returns boolean
local integer CGe=Qce()
if V9v[CGe]>=45 then
if GetRandomReal(0,'d')<=Eev[CGe]then
call UnitRemoveBuffs(V7v[CGe],false,true)
endif
endif
if V9v[CGe]==45 then
call UnitRemoveAbility(V7v[CGe],CE)
call Tje(V7v[CGe],ox,-Evv[CGe])
endif
set V9v[CGe]=V9v[CGe]-1
if V9v[CGe]<=0 then
call QDe()
set V7v[CGe]=null
set Bbe[V8v[CGe]]=false
call Kze(CGe)
endif
return false
endfunction
function V7x takes unit u,integer i returns nothing
local integer CGe=KYe()
set V7v[CGe]=u
set V8v[CGe]=i
set Bbe[V8v[CGe]]=true
set V9v[CGe]=60
set Evv[CGe]=.8+.2*BUe[(i)*(20)+9]
set Eev[CGe]=16+4*BUe[(i)*(20)+9]
call tKe(u,CE)
call Tje(V7v[CGe],ox,Evv[CGe])
call QIe(CGe,1.,true,function V6x)
endfunction
function V8x takes nothing returns boolean
local unit u=GetTriggerUnit()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
if not Bbe[i]and TQe(u)<=50. then
call V7x(u,i)
call Qre(AddSpecialEffect(("war3mapImported\\VDQ_thiendia4.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
endif
set u=null
return false
endfunction
function V9x takes nothing returns boolean
return(GetUnitAbilityLevel((GetTriggerUnit()),('A0BB'))>0)and V8x()
endfunction
function Evx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function V9x))
set t=null
endfunction
function Eex takes nothing returns boolean
local integer CGe=Qce()
set Eav[CGe]=Eav[CGe]-1
if Eav[CGe]<=0 or spe(Eiv[CGe])then
call QDe()
call UnitRemoveAbility(Eiv[CGe],dE)
call Tje(Eiv[CGe],5762,-Env[CGe])
call Tje(Eiv[CGe],4888,-EVv[CGe])
call Tje(Eiv[CGe],xx,-EEv[CGe])
set Eiv[CGe]=null
call Kye(CGe)
endif
return false
endfunction
function Exx takes integer i returns nothing
local integer CGe=KWe()
set Eiv[CGe]=XJ[i]
set Env[CGe]=80+20*BUe[(i)*(20)+$A]
set EVv[CGe]=$AA+30*BUe[(i)*(20)+$A]
set EEv[CGe]=.14+.02*BUe[(i)*(20)+$A]
set Eav[CGe]=R2I(4./ .03125)
call tKe(Eiv[CGe],dE)
call Tje(Eiv[CGe],5762,Env[CGe])
call Tje(Eiv[CGe],4888,EVv[CGe])
call Tje(Eiv[CGe],xx,EEv[CGe])
call QIe(CGe,.03125,true,function Eex)
endfunction
function Eox takes nothing returns boolean
local integer CGe=Qce()
set EAv[CGe]=EAv[CGe]+1
if EAv[CGe]>=$A then
set EAv[CGe]=0
call Exx(EIv[CGe])
endif
if XJ[EIv[CGe]]==null then
call QDe()
call Kwe(CGe)
endif
return false
endfunction
function Erx takes integer i returns nothing
local integer CGe=KUe()
set EIv[CGe]=i
set EAv[CGe]=0
call QIe(CGe,1.,true,function Eox)
endfunction
function Eix takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Efv[CGe]=(((Efv[CGe])*1.)+((fE)*1.)*Cos(((Ehv[CGe])*1.)*bj_DEGTORAD))
set EFv[CGe]=(((EFv[CGe])*1.)+((fE)*1.)*Sin(((Ehv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(Edv[CGe],Efv[CGe],EFv[CGe],EGv[CGe])
call GroupEnumUnitsInRange(sv,Efv[CGe],EFv[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,ECv[CGe])then
call uee(Ecv[CGe],n,false,Egv[CGe],Egv[CGe],THe(Ecv[CGe]))
call yHe(Ecv[CGe],n,'d',1.)
call GroupAddUnit(ECv[CGe],n)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\HydraliskImpact\\HydraliskImpact.mdl"),(n),"chest"))
endif
call GroupRemoveUnit(sv,n)
endloop
set EDv[CGe]=EDv[CGe]-1
if EDv[CGe]<=0 then
call QDe()
call Qre(Edv[CGe])
call Qne(ECv[CGe])
set ECv[CGe]=null
set Edv[CGe]=null
set Ecv[CGe]=null
call Kue(CGe)
endif
return false
endfunction
function Eax takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=KTe()
set Ecv[CGe]=u
set Ehv[CGe]=a
set Efv[CGe]=x
set EFv[CGe]=y
set EDv[CGe]=R2I(DE/ fE)
set Edv[CGe]=AddSpecialEffect("Abilities\\Weapons\\RexxarMissile\\RexxarMissile.mdl",Efv[CGe],EFv[CGe])
set EGv[CGe]=sxe(Efv[CGe],EFv[CGe])+'d'
set Egv[CGe]=d
set ECv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((Edv[CGe]),((Ehv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((Edv[CGe]),((2.)*1.))
call BlzSetSpecialEffectZ(Edv[CGe],EGv[CGe])
call QIe(CGe,.03125,true,function Eix)
endfunction
function Enx takes unit u,real d returns nothing
local real x0=GetUnitX(u)
local real y0=GetUnitY(u)
local real x=0
local real y=0
local integer i=1
loop
exitwhen i>$C
set x=(((x0)*1.)+((60)*1.)*Cos(((i*30)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+((60)*1.)*Sin(((i*30)*1.)*bj_DEGTORAD))
call Eax(u,d,x,y,i*30)
set i=i+1
endloop
endfunction
function EVx takes nothing returns boolean
local integer CGe=Qce()
call UnitRemoveBuffs(EKv[CGe],false,true)
set Ekv[CGe]=Ekv[CGe]-1
if Ekv[CGe]<=0 or spe(EKv[CGe])or not(GetUnitAbilityLevel((EKv[CGe]),(GE))>0)then
call QDe()
call UnitRemoveAbility(EKv[CGe],GE)
call Tje(EKv[CGe],4888,-Elv[CGe])
call Tje(EKv[CGe],xx,-ELv[CGe])
call Tje(EKv[CGe],5740,-.99)
set EKv[CGe]=null
call Kte(CGe)
endif
return false
endfunction
function EEx takes unit u,integer lv returns nothing
local integer CGe=KSe()
set EKv[CGe]=u
set Elv[CGe]=339+66*lv
set ELv[CGe]=.25+.05*lv
set Ekv[CGe]=R2I(5./ .03125)
call tKe(EKv[CGe],GE)
call Tje(EKv[CGe],4888,Elv[CGe])
call Tje(EKv[CGe],xx,ELv[CGe])
call Tje(EKv[CGe],5740,.99)
call QIe(CGe,.03125,true,function EVx)
endfunction
function EXx takes nothing returns boolean
local integer CGe=Qce()
set EPv[CGe]=EPv[CGe]-1
if EPv[CGe]<=0 or spe(Eqv[CGe])or not(GetUnitAbilityLevel((Eqv[CGe]),(gE))>0)then
call QDe()
call UnitRemoveAbility(Eqv[CGe],gE)
call TPe(Eqv[CGe],EQv[CGe])
call Tje(Eqv[CGe],7614,Esv[CGe])
call Tje(Eqv[CGe],ax,ESv[CGe])
set Eqv[CGe]=null
call Kse(CGe)
endif
return false
endfunction
function EOx takes unit v,real r1,real r2,real r3 returns nothing
local integer CGe=KQe()
set Eqv[CGe]=v
set EQv[CGe]=r1
set Esv[CGe]=r2
set ESv[CGe]=r3
set EPv[CGe]=R2I(8./ .03125)
call tKe(Eqv[CGe],gE)
call TPe(Eqv[CGe],-EQv[CGe])
call Tje(Eqv[CGe],7614,-Esv[CGe])
call Tje(Eqv[CGe],ax,-ESv[CGe])
call QIe(CGe,.03125,true,function EXx)
endfunction
function ERx takes unit u,real r1,real r2,real r3 returns nothing
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local player p=GetOwningPlayer(u)
local unit n=null
call GroupEnumUnitsInRange(sv,x,y,400,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,p)and not spe(n)and not tOe(n)then
call IssueImmediateOrderById(n,$D0004)
call yKe(u,n,'d',3.)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl"),(n),"chest"))
if not(GetUnitAbilityLevel((u),(gE))>0)then
call EOx(n,r1,r2,r3)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set p=null
endfunction
function EIx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real r1=ude(u,6,2,FE)
local real r2=ude(u,'d',30,FE)
local real r3=ude(u,.13,.02,FE)
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
if BUe[(i)*(20)+$A]>0 then
call EEx(u,BUe[(i)*(20)+$A])
endif
call ERx(u,r1,r2,r3)
set u=null
set p=null
return false
endfunction
function EAx takes nothing returns boolean
return GetSpellAbilityId()==FE and EIx()
endfunction
function ENx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function EAx))
set t=null
endfunction
function Ebx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set E0v[CGe]=E0v[CGe]+GetRandomReal(-45,45)
set EYv[CGe]=(((EYv[CGe])*1.)+((HE)*1.)*Cos(((E0v[CGe])*1.)*bj_DEGTORAD))
set Ezv[CGe]=(((Ezv[CGe])*1.)+((HE)*1.)*Sin(((E0v[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(EWv[CGe],EYv[CGe],Ezv[CGe],E_v[CGe])
call GroupEnumUnitsInRange(sv,EYv[CGe],Ezv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Ewv[CGe])then
call uee(EUv[CGe],n,true,EZv[CGe],EZv[CGe],THe(EUv[CGe]))
call yHe(EUv[CGe],n,'d',.5)
call GroupAddUnit(Ewv[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set Eyv[CGe]=Eyv[CGe]-1
if Eyv[CGe]<=0 then
call QDe()
call Qre(EWv[CGe])
call Qne(Ewv[CGe])
set Ewv[CGe]=null
set EWv[CGe]=null
set EUv[CGe]=null
call Kqe(CGe)
endif
return false
endfunction
function EBx takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=KPe()
set EUv[CGe]=u
set E0v[CGe]=a
set EYv[CGe]=(((x)*1.)+(('d')*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set Ezv[CGe]=(((y)*1.)+(('d')*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set Eyv[CGe]=R2I(hE/ HE)
set EWv[CGe]=AddSpecialEffect("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl",EYv[CGe],Ezv[CGe])
set E_v[CGe]=sxe(EYv[CGe],Ezv[CGe])+'d'
set EZv[CGe]=d
set Ewv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((EWv[CGe]),((E0v[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((EWv[CGe]),((.8)*1.))
call BlzSetSpecialEffectZ(EWv[CGe],E_v[CGe])
call QIe(CGe,.03125,true,function Ebx)
endfunction
function Ecx takes nothing returns boolean
local integer CGe=Qce()
local real a=GetUnitFacing(E5v[CGe])
local real x=GetUnitX(E5v[CGe])
local real y=GetUnitY(E5v[CGe])
call EBx(E5v[CGe],E6v[CGe],x,y,a)
call EBx(E5v[CGe],E6v[CGe],x,y,a+$F)
call EBx(E5v[CGe],E6v[CGe],x,y,a+30)
call EBx(E5v[CGe],E6v[CGe],x,y,a+45)
call EBx(E5v[CGe],E6v[CGe],x,y,a+60)
call EBx(E5v[CGe],E6v[CGe],x,y,a-$F)
call EBx(E5v[CGe],E6v[CGe],x,y,a-30)
call EBx(E5v[CGe],E6v[CGe],x,y,a-45)
call EBx(E5v[CGe],E6v[CGe],x,y,a-60)
set E4v[CGe]=E4v[CGe]-1
if E4v[CGe]<=0 or spe(E5v[CGe])then
call QDe()
set E5v[CGe]=null
call Kpe(CGe)
endif
return false
endfunction
function ECx takes unit u,real d returns nothing
local integer CGe=KMe()
set E5v[CGe]=u
set E6v[CGe]=d
set E4v[CGe]=5
call QIe(CGe,1.,true,function Ecx)
endfunction
function Edx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Xxv[CGe]=(((Xxv[CGe])*1.)+((jE)*1.)*Cos(((Xev[CGe])*1.)*bj_DEGTORAD))
set Xov[CGe]=(((Xov[CGe])*1.)+((jE)*1.)*Sin(((Xev[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition((Xav[CGe]),((Xxv[CGe])*1.),((Xov[CGe])*1.),((XVv[CGe])*1.))
call GroupEnumUnitsInRange(sv,Xxv[CGe],Xov[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Xnv[CGe])then
call uee(Xvv[CGe],n,true,Xrv[CGe],Xrv[CGe],THe(Xvv[CGe]))
call yHe(Xvv[CGe],n,'d',1.)
call GroupAddUnit(Xnv[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set Xiv[CGe]=Xiv[CGe]-1
if Xiv[CGe]<=0 then
call QDe()
call Qre(Xav[CGe])
call Qne(Xnv[CGe])
set Xnv[CGe]=null
set Xav[CGe]=null
set Xvv[CGe]=null
call Kme(CGe)
endif
return false
endfunction
function EDx takes unit u,real x,real y,real d,real a,effect e returns nothing
local integer CGe=KLe()
set Xvv[CGe]=u
set Xev[CGe]=a
set Xxv[CGe]=x
set Xov[CGe]=y
set Xrv[CGe]=d
set XVv[CGe]=sxe(Xxv[CGe],Xov[CGe])+$96
set Xav[CGe]=e
set Xiv[CGe]=R2I((JE-$96)/ jE)
set Xnv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((Xav[CGe]),((Xev[CGe])*1.)*bj_DEGTORAD)
call QIe(CGe,.03125,true,function Edx)
endfunction
function Efx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set XAv[CGe]=(((XAv[CGe])*1.)+((jE)*1.)*Cos(((XIv[CGe])*1.)*bj_DEGTORAD))
set XNv[CGe]=(((XNv[CGe])*1.)+((jE)*1.)*Sin(((XIv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition((Xcv[CGe]),((XAv[CGe])*1.),((XNv[CGe])*1.),((Xdv[CGe])*1.))
call GroupEnumUnitsInRange(sv,XAv[CGe],XNv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,XCv[CGe])then
call uee(XRv[CGe],n,true,Xbv[CGe],Xbv[CGe],THe(XRv[CGe]))
call yHe(XRv[CGe],n,'d',1.)
call GroupAddUnit(XCv[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set XBv[CGe]=XBv[CGe]-1
if XBv[CGe]<=0 then
call QDe()
call EDx(XRv[CGe],XAv[CGe],XNv[CGe],Xbv[CGe],soe(XAv[CGe],XNv[CGe],GetUnitX(XRv[CGe]),GetUnitY(XRv[CGe])),Xcv[CGe])
call Qne(XCv[CGe])
set XCv[CGe]=null
set Xcv[CGe]=null
set XRv[CGe]=null
call Kle(CGe)
endif
return false
endfunction
function EFx takes unit u,real d,real a returns nothing
local integer CGe=KKe()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set XRv[CGe]=u
set XIv[CGe]=a
set XAv[CGe]=(((x)*1.)+(('d')*1.)*Cos(((XIv[CGe])*1.)*bj_DEGTORAD))
set XNv[CGe]=(((y)*1.)+(('d')*1.)*Sin(((XIv[CGe])*1.)*bj_DEGTORAD))
set Xbv[CGe]=d
set Xdv[CGe]=sxe(XAv[CGe],XNv[CGe])+$96
set Xcv[CGe]=AddSpecialEffect("Abilities\\Weapons\\LordofFlameMissile\\LordofFlameMissile.mdl",XAv[CGe],XNv[CGe])
set XBv[CGe]=R2I(JE/ jE)
set XCv[CGe]=CreateGroup()
call BlzSetSpecialEffectScale((Xcv[CGe]),((1.5)*1.))
call BlzSetSpecialEffectZ(Xcv[CGe],Xdv[CGe])
call BlzSetSpecialEffectYaw((Xcv[CGe]),((XIv[CGe])*1.)*bj_DEGTORAD)
call QIe(CGe,.03125,true,function Efx)
endfunction
function Egx takes unit u,real d returns nothing
local real a=GetUnitFacing(u)
call EFx(u,d,a)
call EFx(u,d,a+20)
call EFx(u,d,a+40)
call EFx(u,d,a+60)
call EFx(u,d,a+80)
call EFx(u,d,a+'d')
call EFx(u,d,a+'x')
call EFx(u,d,a+$8C)
call EFx(u,d,a+$A0)
call EFx(u,d,a+$B4)
call EFx(u,d,a+$C8)
call EFx(u,d,a+$DC)
call EFx(u,d,a+$F0)
call EFx(u,d,a+260)
call EFx(u,d,a+280)
call EFx(u,d,a+300)
call EFx(u,d,a+320)
call EFx(u,d,a+340)
endfunction
function EGx takes nothing returns boolean
local integer CGe=Qce()
call uee(Xhv[CGe],XHv[CGe],false,0,XGv[CGe],'B007')
set Xgv[CGe]=Xgv[CGe]-1
if Xgv[CGe]<=0 or spe(XHv[CGe])or spe(Xhv[CGe])then
call QDe()
set Xhv[CGe]=null
set XHv[CGe]=null
call Kke(CGe)
endif
return false
endfunction
function Ehx takes unit u,unit v,real d returns nothing
local integer CGe=KJe()
set Xhv[CGe]=u
set XHv[CGe]=v
set XGv[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set Xgv[CGe]=2
call QIe(CGe,1.,true,function EGx)
endfunction
function EHx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
if XLv[CGe]==3 then
call Qre(Xsv[CGe])
set Xsv[CGe]=AddSpecialEffect("war3mapImported\\DMPD_manthienhoavu2.mdl",Xpv[CGe],XPv[CGe])
call BlzSetSpecialEffectScale((Xsv[CGe]),((1.5)*1.))
endif
if XLv[CGe]==2 then
call Qre(Xsv[CGe])
set Xsv[CGe]=AddSpecialEffect("war3mapImported\\DMPD_manthienhoavu3.mdl",Xpv[CGe],XPv[CGe])
call BlzSetSpecialEffectScale((Xsv[CGe]),((1.5)*1.))
endif
call GroupEnumUnitsInRange(sv,Xpv[CGe],XPv[CGe],300,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Xlv[CGe])and not spe(n)and not tOe(n)then
call yLe(XKv[CGe],n,Xqv[CGe],1.)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\DemonHunterMissile\\DemonHunterMissile.mdl"),(n),"chest"))
if(GetUnitAbilityLevel((n),(LE))>0)then
call uee(XKv[CGe],n,false,Xmv[CGe]*(1.17+.03*BUe[(XQv[CGe])*(20)+8]),XMv[CGe]*(1.17+.03*BUe[(XQv[CGe])*(20)+8]),THe(XKv[CGe]))
call Ehx(XKv[CGe],n,XMv[CGe]*(1.17+.03*BUe[(XQv[CGe])*(20)+8]))
else
call uee(XKv[CGe],n,false,Xmv[CGe],XMv[CGe],THe(XKv[CGe]))
call Ehx(XKv[CGe],n,XMv[CGe])
endif
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set XLv[CGe]=XLv[CGe]-1
if XLv[CGe]<=0 then
call QDe()
call Qre(Xsv[CGe])
set Xsv[CGe]=null
set XKv[CGe]=null
set Xlv[CGe]=null
call Kje(CGe)
endif
return false
endfunction
function Ejx takes unit u,real d1,real d2,real r,real x,real y returns nothing
local integer CGe=KHe()
set XKv[CGe]=u
set Xpv[CGe]=x
set XPv[CGe]=y
set Xlv[CGe]=GetOwningPlayer(XKv[CGe])
set XLv[CGe]=3
set Xsv[CGe]=AddSpecialEffect("war3mapImported\\DMPD_manthienhoavu.mdl",Xpv[CGe],XPv[CGe])
set Xqv[CGe]=r
set Xmv[CGe]=d1
set XMv[CGe]=d2
set XQv[CGe]=GetPlayerId(Xlv[CGe])+1
call BlzSetSpecialEffectScale((Xsv[CGe]),((1.5)*1.))
call QIe(CGe,1.,true,function EHx)
endfunction
function EJx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,1.5,.45,kE))
local real d2=uce(u,ude(u,$9C4,750,kE),'B007')
local real r=ude(u,25,3,kE)
call Ejx(u,d1,d2,r,GetSpellTargetX(),GetSpellTargetY())
set u=null
return false
endfunction
function Ekx takes nothing returns boolean
return GetSpellAbilityId()==kE and EJx()
endfunction
function EKx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function Ekx))
set t=null
endfunction
function Elx takes nothing returns boolean
local integer CGe=Qce()
call UnitRemoveBuffs(Xuv[CGe],false,true)
set Xwv[CGe]=Xwv[CGe]-1
if Xwv[CGe]<=0 or spe(Xuv[CGe])or not(GetUnitAbilityLevel((Xuv[CGe]),('A04X'))>0)then
call QDe()
call UnitRemoveAbility(Xuv[CGe],'A04X')
call Tje(Xuv[CGe],xx,-XUv[CGe])
set Xuv[CGe]=null
call Khe(CGe)
endif
return false
endfunction
function ELx takes unit u,real r1 returns nothing
local integer CGe=KGe()
set Xuv[CGe]=u
set XUv[CGe]=r1
set Xwv[CGe]=R2I(5./ .03125)
call tKe(Xuv[CGe],'A04X')
call Tje(Xuv[CGe],xx,XUv[CGe])
call QIe(CGe,.03125,true,function Elx)
endfunction
function Emx takes nothing returns boolean
local integer CGe=Qce()
if qb[X4v[CGe]]==5 then
set Qv=tMe(X3v[CGe],'e004',XZv[CGe],X_v[CGe],X2v[CGe],.2)
else
set Qv=tMe(X3v[CGe],'e005',XZv[CGe],X_v[CGe],X2v[CGe],.2)
endif
call SetUnitVertexColor(Qv,$FF,$FF,$FF,50)
call SetUnitAnimation(Qv,"attack")
set XZv[CGe]=(((XZv[CGe])*1.)+((KE)*1.)*Cos(((X2v[CGe])*1.)*bj_DEGTORAD))
set X_v[CGe]=(((X_v[CGe])*1.)+((KE)*1.)*Sin(((X2v[CGe])*1.)*bj_DEGTORAD))
if sZe(XZv[CGe],X_v[CGe])then
call SetUnitX(Xzv[CGe],XZv[CGe])
call SetUnitY(Xzv[CGe],X_v[CGe])
else
set X1v[CGe]=0
endif
set X1v[CGe]=X1v[CGe]-1
if X1v[CGe]<=0 or spe(Xzv[CGe])then
call QDe()
call SetPlayerAbilityAvailable((X3v[CGe]),('A04V'),true)
if not spe(Xzv[CGe])and not(GetUnitAbilityLevel((Xzv[CGe]),('A04X'))>0)then
call ELx(Xzv[CGe],X0v[CGe])
endif
set Xzv[CGe]=null
set X3v[CGe]=null
call Kge(CGe)
endif
return false
endfunction
function EMx takes unit u,real r1,real r2,real a returns nothing
local integer CGe=KFe()
set Xzv[CGe]=u
set XZv[CGe]=GetUnitX(u)
set X_v[CGe]=GetUnitY(u)
set X0v[CGe]=r2
set X1v[CGe]=R2I(r1/ KE)
set X2v[CGe]=a
set X3v[CGe]=GetOwningPlayer(u)
set X4v[CGe]=GetPlayerId(X3v[CGe])+1
call SetPlayerAbilityAvailable((X3v[CGe]),('A04V'),false)
call QIe(CGe,.03125,true,function Emx)
endfunction
function Epx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real r1=ude(u,300,30,'A04V')
local real r2=ude(u,.2,.05,'A04V')
call EMx(u,r1,r2,GetUnitFacing(u))
set u=null
return false
endfunction
function EPx takes nothing returns boolean
return GetSpellAbilityId()=='A04V' and Epx()
endfunction
function Eqx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Filter(function EPx))
set t=null
endfunction
function EQx takes nothing returns boolean
local integer CGe=Qce()
set Ovv[CGe]=Ovv[CGe]-1
if Ovv[CGe]<=0 or spe(X8v[CGe])or not(GetUnitAbilityLevel((X8v[CGe]),(LE))>0)then
call QDe()
call UnitRemoveAbility(X8v[CGe],LE)
call Tje(X8v[CGe],6780,X9v[CGe])
set X8v[CGe]=null
call Kfe(CGe)
endif
return false
endfunction
function Esx takes unit u,real d returns nothing
local integer CGe=KDe()
set X8v[CGe]=u
set X9v[CGe]=d*TKe(u,6780)
set Ovv[CGe]=R2I(4/ .03125)
call tKe(X8v[CGe],LE)
call Tje(X8v[CGe],6780,-X9v[CGe])
call QIe(CGe,.03125,true,function EQx)
endfunction
function ESx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real x2=0
local real y2=0
local integer c=0
if Oav[CGe]==16 or Oav[CGe]==$B or Oav[CGe]==6 or Oav[CGe]==1 then
call GroupEnumUnitsInRange(sv,Onv[CGe],OVv[CGe],600,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Oiv[CGe])and not spe(n)and not tOe(n)then
call Esx(n,OEv[CGe])
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\DemonHunterMissile\\DemonHunterMissile.mdl"),(n),"chest"))
if not(IsUnitType((n),UNIT_TYPE_TAUREN))and not(GetUnitAbilityLevel((n),('A0NA'))>0)then
set x2=GetUnitX(n)
set y2=GetUnitY(n)
call s5e(n,sre(Onv[CGe],OVv[CGe],x2,y2)-'d',.7,soe(x2,y2,Onv[CGe],OVv[CGe]),false,false)
endif
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set Oav[CGe]=Oav[CGe]-1
if Oav[CGe]<=0 then
call QDe()
call Qre(OXv[CGe])
set OXv[CGe]=null
set Orv[CGe]=null
set Oiv[CGe]=null
call Kde(CGe)
endif
return false
endfunction
function Etx takes unit u,real r returns nothing
local integer CGe=KCe()
set Orv[CGe]=u
set Onv[CGe]=GetUnitX(u)
set OVv[CGe]=GetUnitY(u)
set Oiv[CGe]=GetOwningPlayer(Orv[CGe])
set Oav[CGe]=16
set OXv[CGe]=AddSpecialEffect("war3mapImported\\DMTT_toidocthuat.mdl",Onv[CGe],OVv[CGe])
set OEv[CGe]=r
call BlzSetSpecialEffectScale((OXv[CGe]),((.6)*1.))
call QIe(CGe,1.,true,function ESx)
endfunction
function ETx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real r=ude(u,.15,.02,lE)
call Etx(u,r)
set u=null
return false
endfunction
function Eux takes nothing returns boolean
return GetSpellAbilityId()==lE and ETx()
endfunction
function EUx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function Eux))
set t=null
endfunction
function Ewx takes nothing returns boolean
local integer CGe=Qce()
if spe(OAv[CGe])or not(GetUnitAbilityLevel((OAv[CGe]),(ME))>0)then
call QDe()
call UnitRemoveAbility(OAv[CGe],ME)
call Tje(OAv[CGe],4338,-ONv[CGe])
call Tje(OAv[CGe],ox,-Obv[CGe])
set OAv[CGe]=null
call Kce(CGe)
endif
return false
endfunction
function EWx takes unit u,real r,real r2 returns nothing
local integer CGe=KBe()
set OAv[CGe]=u
set ONv[CGe]=r
set Obv[CGe]=r2
call tKe(OAv[CGe],ME)
call Tje(OAv[CGe],4338,ONv[CGe])
call Tje(OAv[CGe],ox,Obv[CGe])
call QIe(CGe,.03125,true,function Ewx)
endfunction
function Eyx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real r=ude(u,8,1,mE)
local real r2=ude(u,.18,.02,mE)
if(GetUnitAbilityLevel((u),(ME))>0)then
call UnitRemoveAbility(u,ME)
else
call EWx(u,r,r2)
endif
set u=null
return false
endfunction
function EYx takes nothing returns boolean
return GetSpellAbilityId()==mE and Eyx()
endfunction
function Ezx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function EYx))
set t=null
endfunction
function EZx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Odv[CGe]=Odv[CGe]-1
if Odv[CGe]<=0 then
call QDe()
call GroupEnumUnitsInRange(sv,OFv[CGe],Ogv[CGe],300,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yle(Ofv[CGe],n,'d',1.5)
call uee(Ofv[CGe],n,true,ODv[CGe],ODv[CGe],THe(Ofv[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set Ofv[CGe]=null
call Kbe(CGe)
endif
return false
endfunction
function E_x takes unit u,real d,real x,real y returns nothing
local integer CGe=KNe()
set Ofv[CGe]=u
set ODv[CGe]=d
set OFv[CGe]=x
set Ogv[CGe]=y
set Odv[CGe]=1
call QIe(CGe,1.,true,function EZx)
endfunction
function E0x takes nothing returns boolean
local integer CGe=Qce()
local real x0=GetUnitX(OJv[CGe])
local real y0=GetUnitY(OJv[CGe])
local real x=GetRandomReal(x0-800,x0+800)
local real y=GetRandomReal(y0-800,y0+800)
call Qre(AddSpecialEffect(("war3mapImported\\EFF_hoasenroi.mdl"),((x)*1.),((y)*1.)))
call E_x(OJv[CGe],Okv[CGe],x,y)
set Ojv[CGe]=Ojv[CGe]-1
if Ojv[CGe]<=0 or spe(OJv[CGe])then
call QDe()
set OJv[CGe]=null
call KAe(CGe)
endif
return false
endfunction
function E1x takes unit u,real d returns nothing
local integer CGe=KIe()
set OJv[CGe]=u
set Okv[CGe]=d
set Ojv[CGe]=$F
call QIe(CGe,.3,true,function E0x)
endfunction
function E2x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
call GroupEnumUnitsInRange(sv,OPv[CGe],Oqv[CGe],$B4,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yle(Opv[CGe],n,70,.5)
call uee(Opv[CGe],n,true,OMv[CGe],OMv[CGe],THe(Opv[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set Omv[CGe]=Omv[CGe]-1
if Omv[CGe]<=0 then
call QDe()
call Qre(OQv[CGe])
set Opv[CGe]=null
call KRe(CGe)
endif
return false
endfunction
function E3x takes unit u,real d,real x,real y returns nothing
local integer CGe=KOe()
set Opv[CGe]=u
set OMv[CGe]=d
set OPv[CGe]=x
set Oqv[CGe]=y
set Omv[CGe]=5
set OQv[CGe]=AddSpecialEffect("war3mapImported\\EFF_hoasentim.mdl",OPv[CGe],Oqv[CGe])
call QIe(CGe,1.,true,function E2x)
endfunction
function E4x takes nothing returns boolean
local integer CGe=Qce()
set OUv[CGe]=(((OUv[CGe])*1.)+((pE)*1.)*Cos(((Ouv[CGe])*1.)*bj_DEGTORAD))
set Owv[CGe]=(((Owv[CGe])*1.)+((pE)*1.)*Sin(((Ouv[CGe])*1.)*bj_DEGTORAD))
call E3x(OTv[CGe],OWv[CGe],OUv[CGe],Owv[CGe])
set Oyv[CGe]=Oyv[CGe]-1
if Oyv[CGe]<=0 then
call QDe()
set OTv[CGe]=null
call KXe(CGe)
endif
return false
endfunction
function E5x takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=KEe()
set OTv[CGe]=u
set OUv[CGe]=x
set Owv[CGe]=y
set Ouv[CGe]=a
set OWv[CGe]=d
set Oyv[CGe]=6
call QIe(CGe,.5,true,function E4x)
endfunction
function E6x takes unit u,real d,real x0,real y0 returns nothing
local real x=0
local real y=0
local integer i=1
loop
exitwhen i>6
set x=(((x0)*1.)+(($3E8)*1.)*Cos(((60*i)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+(($3E8)*1.)*Sin(((60*i)*1.)*bj_DEGTORAD))
call E5x(u,d,x,y,soe(x,y,x0,y0))
set i=i+1
endloop
endfunction
function E7x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set O1v[CGe]=(((O1v[CGe])*1.)+((PE)*1.)*Cos(((O0v[CGe])*1.)*bj_DEGTORAD))
set O2v[CGe]=(((O2v[CGe])*1.)+((PE)*1.)*Sin(((O0v[CGe])*1.)*bj_DEGTORAD))
call Qre(AddSpecialEffect(("war3mapImported\\NMC_diepdetanghoanew4.mdl"),((O1v[CGe])*1.),((O2v[CGe])*1.)))
call GroupEnumUnitsInRange(sv,O1v[CGe],O2v[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yle(O_v[CGe],n,'d',.5)
call uee(O_v[CGe],n,false,O3v[CGe],O3v[CGe],THe(O_v[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set O4v[CGe]=O4v[CGe]-1
if O4v[CGe]<=0 then
call QDe()
set O_v[CGe]=null
call KVe(CGe)
endif
return false
endfunction
function E8x takes unit u,real d,real x0,real y0 returns nothing
local integer CGe=Kne()
set O_v[CGe]=u
set O0v[CGe]=soe(GetUnitX(u),GetUnitY(u),x0,y0)+90
set O1v[CGe]=(((x0)*1.)+((450)*1.)*Cos(((O0v[CGe]-$B4)*1.)*bj_DEGTORAD))
set O2v[CGe]=(((y0)*1.)+((450)*1.)*Sin(((O0v[CGe]-$B4)*1.)*bj_DEGTORAD))
set O3v[CGe]=d
set O4v[CGe]=9
call QIe(CGe,.2,true,function E7x)
endfunction
function E9x takes unit u,real x,real y returns nothing
local unit n=null
local real r=0
call Qre(AddSpecialEffect(("war3mapImported\\TVC_effect2.mdl"),((x)*1.),((y)*1.)))
call GroupEnumUnitsInRange(sv,x,y,333,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and(IsUnitType((n),UNIT_TYPE_HERO))then
call yle(u,n,'d',5.)
set r=GetUnitLifePercent(n)
if r>20 then
call SetUnitLifePercentBJ(n,20)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endfunction
function Xvx takes nothing returns boolean
local integer CGe=Qce()
set O8v[CGe]=O8v[CGe]-1
if O8v[CGe]<=0 or spe(O9v[CGe])then
call QDe()
if not spe(O9v[CGe])then
call E9x(O9v[CGe],GetUnitX(Rvv[CGe]),GetUnitY(Rvv[CGe]))
endif
call RemoveUnit(Rvv[CGe])
set Rvv[CGe]=null
set O9v[CGe]=null
call Kae(CGe)
endif
return false
endfunction
function Xex takes unit u returns nothing
local integer CGe=Kie()
set O9v[CGe]=u
set O8v[CGe]=R2I($C/ .03125)
set Rvv[CGe]=CreateUnit(zv,'n06J',GetRectCenterX(zf),GetRectCenterY(zf),270)
call QIe(CGe,.03125,true,function Xvx)
endfunction
function Xxx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
local real x2=0
local real y2=0
set Rav[CGe]=Rav[CGe]-1
if Rav[CGe]<=0 then
call QDe()
call GroupEnumUnitsInRange(sv,Rnv[CGe],RVv[CGe],300,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Riv[CGe])and not spe(n)and not tOe(n)then
call yHe(Rrv[CGe],n,ROv[CGe],.5)
call uee(Rrv[CGe],n,false,REv[CGe],RXv[CGe],THe(Rrv[CGe]))
if not(IsUnitType((n),UNIT_TYPE_TAUREN))and not(GetUnitAbilityLevel((n),('A0NA'))>0)then
set x2=GetUnitX(n)
set y2=GetUnitY(n)
call s5e(n,60,.2,soe(x2,y2,Rnv[CGe],RVv[CGe]),false,false)
endif
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
call Qre(RRv[CGe])
set RRv[CGe]=null
set Rrv[CGe]=null
set Riv[CGe]=null
call Kre(CGe)
endif
return false
endfunction
function Xox takes unit u,real x,real y,real d1,real d2,integer i returns nothing
local integer CGe=Koe()
local real r=.5+.05*BUe[(i)*(20)+$A]
set Rrv[CGe]=u
set Rnv[CGe]=x
set RVv[CGe]=y
set Rav[CGe]=1
set REv[CGe]=d1*r
set RXv[CGe]=d2*r
set ROv[CGe]=18+2*BUe[(i)*(20)+$A]
set Riv[CGe]=GetOwningPlayer(Rrv[CGe])
set RRv[CGe]=AddSpecialEffect("war3mapImported\\CLD_gioloc1.mdl",Rnv[CGe],RVv[CGe])
call BlzSetSpecialEffectScale((RRv[CGe]),((.7)*1.))
call QIe(CGe,.5,true,function Xxx)
endfunction
function Xrx takes nothing returns boolean
local integer CGe=Qce()
call uee(RCv[CGe],Rdv[CGe],false,RBv[CGe],Rcv[CGe],THe(RCv[CGe]))
set Rbv[CGe]=Rbv[CGe]-1
if Rbv[CGe]<=0 or spe(Rdv[CGe])or spe(RCv[CGe])then
call QDe()
set RCv[CGe]=null
set Rdv[CGe]=null
call Kxe(CGe)
endif
return false
endfunction
function Xix takes unit u,unit v,real d1,real d2 returns nothing
local integer CGe=Kee()
set RCv[CGe]=u
set Rdv[CGe]=v
set RBv[CGe]=d1
set Rcv[CGe]=d2
set Rbv[CGe]=1
call QIe(CGe,.24,true,function Xrx)
endfunction
function Xax takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Rkv[CGe]=(((Rkv[CGe])*1.)+((QE)*1.)*Cos(((Rqv[CGe])*1.)*bj_DEGTORAD))
set RKv[CGe]=(((RKv[CGe])*1.)+((QE)*1.)*Sin(((Rqv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(RHv[CGe],Rkv[CGe],RKv[CGe],Rpv[CGe])
if RMv[CGe]<7 then
call GroupEnumUnitsInRange(sv,Rkv[CGe],RKv[CGe],$B4,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,RGv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Rhv[CGe])then
call yle(Rgv[CGe],n,Rmv[CGe],1.)
call GroupAddUnit(Rhv[CGe],n)
call Qre(AddSpecialEffectTarget(("war3mapImported\\CLD_effecttarget4.mdl"),(n),"origin"))
call uee(Rgv[CGe],n,false,Rlv[CGe],RLv[CGe],THe(Rgv[CGe]))
call Xix(Rgv[CGe],n,Rlv[CGe],RLv[CGe])
if not RQv[CGe]and BUe[(RPv[CGe])*(20)+$A]>0 and(GetRandomReal(0,'d')<=(17+3*BUe[(RPv[CGe])*(20)+$A]))then
set RQv[CGe]=true
call Xox(Rgv[CGe],GetUnitX(n),GetUnitY(n),Rlv[CGe],RLv[CGe],RPv[CGe])
endif
set RMv[CGe]=RMv[CGe]+1
if RMv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set RJv[CGe]=RJv[CGe]-1
if RJv[CGe]<=0 then
call QDe()
call Qre(RHv[CGe])
call Qne(Rhv[CGe])
call Qre(Rjv[CGe])
set Rjv[CGe]=null
set Rhv[CGe]=null
set RHv[CGe]=null
set Rgv[CGe]=null
set RGv[CGe]=null
call Kve(CGe)
endif
return false
endfunction
function Xnx takes unit u,real d,unit v,real r returns nothing
local integer CGe=k9e()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set Rgv[CGe]=u
set Rqv[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set Rkv[CGe]=(((x)*1.)+((80)*1.)*Cos(((Rqv[CGe])*1.)*bj_DEGTORAD))
set RKv[CGe]=(((y)*1.)+((80)*1.)*Sin(((Rqv[CGe])*1.)*bj_DEGTORAD))
set RJv[CGe]=R2I(qE/ QE)
set RHv[CGe]=AddSpecialEffect("war3mapImported\\CLD_gioloc2.mdl",Rkv[CGe],RKv[CGe])
set Rpv[CGe]=sxe(Rkv[CGe],RKv[CGe])
set Rlv[CGe]=uBe(u,ude(u,3.,.9,sE))
set RLv[CGe]=uce(u,ude(u,$9C4,750,sE),'B00A')
set Rmv[CGe]=ude(u,$F,2,sE)
set RMv[CGe]=0
set Rhv[CGe]=CreateGroup()
set RGv[CGe]=GetOwningPlayer(Rgv[CGe])
set RPv[CGe]=(GetPlayerId(GetOwningPlayer((u)))+1)
set Rjv[CGe]=AddSpecialEffect("war3mapImported\\CLD_ngaotuyetcast.mdl",x,y)
set RQv[CGe]=false
set Rlv[CGe]=Rlv[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A0AW'))
set RLv[CGe]=RLv[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A0AW'))
if r>0 then
set Rlv[CGe]=d
set RLv[CGe]=d
set Rmv[CGe]=r
endif
call BlzSetSpecialEffectYaw((RHv[CGe]),((Rqv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((RHv[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(RHv[CGe],Rpv[CGe])
call BlzSetSpecialEffectYaw((Rjv[CGe]),((Rqv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((Rjv[CGe]),((.5)*1.))
call BlzSetSpecialEffectZ(Rjv[CGe],Rpv[CGe]+50)
call QIe(CGe,.03125,true,function Xax)
endfunction
function XVx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Rwv[CGe]=(((Rwv[CGe])*1.)+((tE)*1.)*Cos(((Rzv[CGe])*1.)*bj_DEGTORAD))
set RWv[CGe]=(((RWv[CGe])*1.)+((tE)*1.)*Sin(((Rzv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(Ruv[CGe],Rwv[CGe],RWv[CGe],RYv[CGe])
call GroupEnumUnitsInRange(sv,Rwv[CGe],RWv[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,RZv[CGe])then
call yle(RTv[CGe],n,'d',2.)
call GroupAddUnit(RZv[CGe],n)
call Qre(AddSpecialEffectTarget(("war3mapImported\\VDQ_thaicuc.mdl"),(n),"chest"))
call uee(RTv[CGe],n,true,Ryv[CGe],Ryv[CGe],THe(RTv[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set RUv[CGe]=RUv[CGe]-1
if RUv[CGe]<=0 then
call QDe()
call Qre(Ruv[CGe])
call Qne(RZv[CGe])
set RZv[CGe]=null
set Ruv[CGe]=null
set RTv[CGe]=null
call k8e(CGe)
endif
return false
endfunction
function XEx takes unit u,real x,real y,real d,real a returns nothing
local integer CGe=k7e()
set RTv[CGe]=u
set Rzv[CGe]=a
set Rwv[CGe]=x
set RWv[CGe]=y
set Ryv[CGe]=d
set RYv[CGe]=sxe(Rwv[CGe],RWv[CGe])
set Ruv[CGe]=AddSpecialEffect("war3mapImported\\VDQ_thaicuc.mdl",Rwv[CGe],RWv[CGe])
set RUv[CGe]=R2I(SE/ tE)
set RZv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((Ruv[CGe]),((Rzv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((Ruv[CGe]),((.6)*1.))
call BlzSetSpecialEffectZ(Ruv[CGe],RYv[CGe])
call QIe(CGe,.03125,true,function XVx)
endfunction
function XXx takes unit u,real d,real x,real y returns boolean
local real a=GetUnitFacing(u)
call XEx(u,x,y,d,a+45)
call XEx(u,x,y,d,a+90)
call XEx(u,x,y,d,a+$87)
call XEx(u,x,y,d,a+$B4)
call XEx(u,x,y,d,a+$E1)
call XEx(u,x,y,d,a+270)
call XEx(u,x,y,d,a+315)
call XEx(u,x,y,d,a+360)
return false
endfunction
function XOx takes nothing returns boolean
local integer CGe=Qce()
set R3v[CGe]=R3v[CGe]-1
if R3v[CGe]<=0 or spe(R2v[CGe])or not(GetUnitAbilityLevel((R2v[CGe]),(uE))>0)then
call QDe()
call UnitRemoveAbility(R2v[CGe],uE)
set R2v[CGe]=null
call k6e(CGe)
endif
return false
endfunction
function XRx takes unit u returns nothing
local integer CGe=k5e()
set R2v[CGe]=u
set R3v[CGe]=R2I(8/ .03125)
call tKe(R2v[CGe],uE)
call QIe(CGe,.03125,true,function XOx)
endfunction
function XIx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Iev[CGe]=(((Iev[CGe])*1.)+((wE)*1.)*Cos(((Iiv[CGe])*1.)*bj_DEGTORAD))
set Ixv[CGe]=(((Ixv[CGe])*1.)+((wE)*1.)*Sin(((Iiv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(R9v[CGe],Iev[CGe],Ixv[CGe],Irv[CGe])
call GroupEnumUnitsInRange(sv,Iev[CGe],Ixv[CGe],$DC,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,R8v[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Inv[CGe])then
call XRx(n)
call yle(R7v[CGe],n,Iov[CGe],3.)
call GroupAddUnit(Inv[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set Ivv[CGe]=Ivv[CGe]-1
if Ivv[CGe]<=0 then
call QDe()
call Qre(R9v[CGe])
call Qne(Inv[CGe])
set Inv[CGe]=null
set R9v[CGe]=null
set R7v[CGe]=null
set R8v[CGe]=null
call k4e(CGe)
endif
return false
endfunction
function XAx takes unit u,real r,real a returns nothing
local integer CGe=k3e()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set R7v[CGe]=u
set Iiv[CGe]=a
set Iov[CGe]=r
set Iev[CGe]=(((x)*1.)+((80)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set Ixv[CGe]=(((y)*1.)+((80)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set R8v[CGe]=GetOwningPlayer(R7v[CGe])
set Iav[CGe]=GetPlayerId(R8v[CGe])+1
set Ivv[CGe]=R2I(UE/ wE)
set R9v[CGe]=AddSpecialEffect("war3mapImported\\CLK_nguphongthuat.mdl",Iev[CGe],Ixv[CGe])
set Irv[CGe]=sxe(Iev[CGe],Ixv[CGe])
set Inv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((R9v[CGe]),((Iiv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((R9v[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(R9v[CGe],Irv[CGe])
call QIe(CGe,.03125,true,function XIx)
endfunction
function XNx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real r=ude(u,50,4,TE)
call XAx(u,r,soe(GetUnitX(u),GetUnitY(u),GetSpellTargetX(),GetSpellTargetY()))
set u=null
return false
endfunction
function Xbx takes nothing returns boolean
return GetSpellAbilityId()==TE and XNx()
endfunction
function XBx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function Xbx))
set t=null
endfunction
function Xcx takes nothing returns boolean
local integer CGe=Qce()
set IRv[CGe]=IRv[CGe]-1
if IRv[CGe]<=0 or spe(IOv[CGe])or not(GetUnitAbilityLevel((IOv[CGe]),(yE))>0)then
call QDe()
call UnitRemoveAbility(IOv[CGe],yE)
set IOv[CGe]=null
call k2e(CGe)
endif
return false
endfunction
function XCx takes unit u returns nothing
local integer CGe=k1e()
set IOv[CGe]=u
set IRv[CGe]=R2I(30/ .03125)
call tKe(IOv[CGe],yE)
call QIe(CGe,.03125,true,function Xcx)
endfunction
function Xdx takes nothing returns boolean
local unit u=GetTriggerUnit()
call XCx(u)
set u=null
return false
endfunction
function XDx takes nothing returns boolean
return GetSpellAbilityId()==WE and Xdx()
endfunction
function Xfx takes nothing returns boolean
local integer CGe=Qce()
set Ibv[CGe]=Ibv[CGe]-1
if Ibv[CGe]<=0 or spe(IBv[CGe])then
call QDe()
call UnitRemoveAbility(IBv[CGe],YE)
call Tje(IBv[CGe],5319,-Icv[CGe])
call TPe(IBv[CGe],-99)
call Tje(IBv[CGe],4888,-$D8CC)
call Tje(IBv[CGe],8073,-65)
set IBv[CGe]=null
call k0e(CGe)
endif
return false
endfunction
function XFx takes unit u returns nothing
local integer CGe=k_e()
set IBv[CGe]=u
set Ibv[CGe]=3
set Icv[CGe]=ude(u,1.,.2,WE)
call tKe(IBv[CGe],YE)
call Tje(IBv[CGe],5319,Icv[CGe])
call TPe(IBv[CGe],99)
call Tje(IBv[CGe],4888,$D8CC)
call Tje(IBv[CGe],8073,65)
call QIe(CGe,1.,true,function Xfx)
endfunction
function Xgx takes nothing returns boolean
local unit u=GetAttacker()
call UnitRemoveAbility(u,'BOwk')
call UnitRemoveAbility(u,yE)
call XFx(u)
set u=null
return false
endfunction
function XGx takes nothing returns boolean
return(GetUnitAbilityLevel((GetAttacker()),(yE))>0)and Xgx()
endfunction
function Xhx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function XDx))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function XGx))
set t=null
endfunction
function XHx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Igv[CGe]=(((Igv[CGe])*1.)+((ZE)*1.)*Cos(((IJv[CGe])*1.)*bj_DEGTORAD))
set IGv[CGe]=(((IGv[CGe])*1.)+((ZE)*1.)*Sin(((IJv[CGe])*1.)*bj_DEGTORAD))
call Qre(AddSpecialEffect(("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl"),((Igv[CGe])*1.),((IGv[CGe])*1.)))
call GroupEnumUnitsInRange(sv,Igv[CGe],IGv[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yHe(Ifv[CGe],n,Ijv[CGe],1.)
call uee(Ifv[CGe],n,false,Ihv[CGe],IHv[CGe],THe(Ifv[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set IFv[CGe]=IFv[CGe]-1
if IFv[CGe]<=0 then
call QDe()
set Ifv[CGe]=null
call kZe(CGe)
endif
return false
endfunction
function Xjx takes unit u,real d,unit v,real r returns nothing
local integer CGe=kze()
set Ifv[CGe]=u
set Igv[CGe]=GetUnitX(u)
set IGv[CGe]=GetUnitY(u)
set IJv[CGe]=soe(Igv[CGe],IGv[CGe],GetUnitX(v),GetUnitY(v))
set IFv[CGe]=R2I(zE/ ZE)
set Ihv[CGe]=d
set IHv[CGe]=d
set Ijv[CGe]=r
call QIe(CGe,.03125,true,function XHx)
endfunction
function XJx takes nothing returns boolean
local integer CGe=Qce()
local real x=GetRandomReal(IPv[CGe]-300,IPv[CGe]+300)
local real y=GetRandomReal(Iqv[CGe]-300,Iqv[CGe]+300)
local unit n=null
call Qre(AddSpecialEffect("Abilities\\Spells\\Demon\\RainOfFire\\RainOfFireTarget.mdl",x,y))
call GroupEnumUnitsInRange(sv,x,y,$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call uee(ILv[CGe],n,true,IMv[CGe],IMv[CGe],THe(ILv[CGe]))
call yKe(ILv[CGe],n,Imv[CGe],2.5)
call Qre(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl",n,"chest"))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set Ipv[CGe]=Ipv[CGe]-1
if Ipv[CGe]<=0 then
call QDe()
set ILv[CGe]=null
call kYe(CGe)
endif
return false
endfunction
function Xkx takes unit u,real QPe,real r,real x,real y returns nothing
local integer CGe=kye()
set ILv[CGe]=u
set IPv[CGe]=x
set Iqv[CGe]=y
set Ipv[CGe]=24
set IMv[CGe]=QPe
set Imv[CGe]=r
call QIe(CGe,.12,true,function XJx)
endfunction
function XKx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Iuv[CGe]=(((Iuv[CGe])*1.)+((vX)*1.)*Cos(((ITv[CGe])*1.)*bj_DEGTORAD))
set IUv[CGe]=(((IUv[CGe])*1.)+((vX)*1.)*Sin(((ITv[CGe])*1.)*bj_DEGTORAD))
call Qre(AddSpecialEffect(("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl"),((Iuv[CGe])*1.),((IUv[CGe])*1.)))
call GroupEnumUnitsInRange(sv,Iuv[CGe],IUv[CGe],300,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Iyv[CGe])then
call uee(Itv[CGe],n,true,Iwv[CGe],Iwv[CGe],THe(Itv[CGe]))
call yLe(Itv[CGe],n,'d',2.)
call s5e(n,$C8,.3,soe(Iuv[CGe],IUv[CGe],GetUnitX(n),GetUnitY(n)),false,false)
call GroupAddUnit(Iyv[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set IWv[CGe]=IWv[CGe]-1
if IWv[CGe]<=0 then
call QDe()
call Qne(Iyv[CGe])
set Iyv[CGe]=null
set Itv[CGe]=null
call kWe(CGe)
endif
return false
endfunction
function Xlx takes unit u,real d,real a returns nothing
local integer CGe=kwe()
set Itv[CGe]=u
set Iuv[CGe]=GetUnitX(u)
set IUv[CGe]=GetUnitY(u)
set ITv[CGe]=a
set Iwv[CGe]=d
set IWv[CGe]=R2I(eX/ vX)
set Iyv[CGe]=CreateGroup()
call QIe(CGe,.15,true,function XKx)
endfunction
function XLx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set I8v[CGe]=I8v[CGe]+1
if I8v[CGe]>16 then
set I3v[CGe]=(((I3v[CGe])*1.)+((oX)*1.)*Cos(((I7v[CGe])*1.)*bj_DEGTORAD))
set I4v[CGe]=(((I4v[CGe])*1.)+((oX)*1.)*Sin(((I7v[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(I0v[CGe],I3v[CGe],I4v[CGe],I6v[CGe])
call BlzSetSpecialEffectPosition(I1v[CGe],I3v[CGe],I4v[CGe],I6v[CGe]-30)
call GroupEnumUnitsInRange(sv,I3v[CGe],I4v[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,I9v[CGe])then
call GroupAddUnit(I9v[CGe],n)
call yHe(I_v[CGe],n,'d',2.)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TYK_bangtamtientu2.mdl"),(n),"chest"))
call uee(I_v[CGe],n,true,I5v[CGe],I5v[CGe],THe(I_v[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set I2v[CGe]=I2v[CGe]-1
if I2v[CGe]<=0 then
call QDe()
call BlzSetSpecialEffectScale((I0v[CGe]),((.001)*1.))
call Qre(I0v[CGe])
call Qre(I1v[CGe])
call Qne(I9v[CGe])
set I9v[CGe]=null
set I1v[CGe]=null
set I0v[CGe]=null
set I_v[CGe]=null
call kUe(CGe)
endif
return false
endfunction
function Xmx takes unit u,real x,real y,real d,real a returns nothing
local integer CGe=kue()
set I_v[CGe]=u
set I3v[CGe]=x
set I4v[CGe]=y
set I7v[CGe]=a
set I5v[CGe]=d
set I6v[CGe]=sxe(I3v[CGe],I4v[CGe])
set I0v[CGe]=AddSpecialEffect("war3mapImported\\TYK_bangtamtientu4.mdl",I3v[CGe],I4v[CGe])
set I2v[CGe]=R2I(xX/ oX)
set I8v[CGe]=0
set I9v[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((I0v[CGe]),((I7v[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((I0v[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(I0v[CGe],I6v[CGe])
set I1v[CGe]=AddSpecialEffect("war3mapImported\\TYK_bangtamtientu2.mdl",I3v[CGe],I4v[CGe])
call BlzSetSpecialEffectYaw((I1v[CGe]),((I7v[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((I1v[CGe]),((3.)*1.))
call BlzSetSpecialEffectZ(I1v[CGe],I6v[CGe]-30)
call QIe(CGe,.03125,true,function XLx)
endfunction
function XMx takes unit u,real d,unit v returns nothing
local real x0=GetUnitX(v)
local real y0=GetUnitY(v)
local real a=soe(GetUnitX(u),GetUnitY(u),x0,y0)
local real x=(((x0)*1.)+((500)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
local real y=(((y0)*1.)+((500)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
call Xmx(u,x,y,d,soe(x,y,x0,y0))
set x=(((x0)*1.)+((500)*1.)*Cos(((a+72)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+((500)*1.)*Sin(((a+72)*1.)*bj_DEGTORAD))
call Xmx(u,x,y,d,soe(x,y,x0,y0))
set x=(((x0)*1.)+((500)*1.)*Cos(((a+$90)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+((500)*1.)*Sin(((a+$90)*1.)*bj_DEGTORAD))
call Xmx(u,x,y,d,soe(x,y,x0,y0))
set x=(((x0)*1.)+((500)*1.)*Cos(((a+$D8)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+((500)*1.)*Sin(((a+$D8)*1.)*bj_DEGTORAD))
call Xmx(u,x,y,d,soe(x,y,x0,y0))
set x=(((x0)*1.)+((500)*1.)*Cos(((a+288)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+((500)*1.)*Sin(((a+288)*1.)*bj_DEGTORAD))
call Xmx(u,x,y,d,soe(x,y,x0,y0))
endfunction
function Xpx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set AVv[CGe]=(((AVv[CGe])*1.)+((iX)*1.)*Cos(((Aav[CGe])*1.)*bj_DEGTORAD))
set AEv[CGe]=(((AEv[CGe])*1.)+((iX)*1.)*Sin(((Aav[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(AAv[CGe],AVv[CGe],AEv[CGe],Anv[CGe])
if ANv[CGe]<7 then
call GroupEnumUnitsInRange(sv,AVv[CGe],AEv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Arv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Aiv[CGe])then
call yle(Aov[CGe],n,ARv[CGe],.5)
call GroupAddUnit(Aiv[CGe],n)
call Qre(AddSpecialEffect(("war3mapImported\\VDK_nhankiemtarget.mdl"),((GetUnitX(n))*1.),((GetUnitY(n))*1.)))
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIlb\\AIlbSpecialArt.mdl"),(n),"chest"))
call uee(Aov[CGe],n,false,AXv[CGe],AOv[CGe],THe(Aov[CGe]))
if not Abv[CGe]then
call SetUnitState(Aov[CGe],UNIT_STATE_MANA,GetUnitState(Aov[CGe],UNIT_STATE_MANA)+(AXv[CGe]+AOv[CGe])*.1)
endif
set ANv[CGe]=ANv[CGe]+1
if ANv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set AIv[CGe]=AIv[CGe]-1
if AIv[CGe]<=0 then
call QDe()
call Qre(AAv[CGe])
call Qne(Aiv[CGe])
set Aiv[CGe]=null
set AAv[CGe]=null
set Aov[CGe]=null
set Arv[CGe]=null
call kTe(CGe)
endif
return false
endfunction
function XPx takes unit u,real d1,real d2,real r,real x,real y,real a,boolean b returns nothing
local integer CGe=kte()
set Aov[CGe]=u
set Aav[CGe]=a
set AVv[CGe]=(((x)*1.)+((40)*1.)*Cos(((Aav[CGe])*1.)*bj_DEGTORAD))
set AEv[CGe]=(((y)*1.)+((40)*1.)*Sin(((Aav[CGe])*1.)*bj_DEGTORAD))
set AXv[CGe]=d1
set AOv[CGe]=d2
set ARv[CGe]=r
set Abv[CGe]=b
if b then
set AAv[CGe]=AddSpecialEffect("war3mapImported\\NMK_kiemanh.mdl",AVv[CGe],AEv[CGe])
else
set AAv[CGe]=AddSpecialEffect("war3mapImported\\VDK_nhankiemmissile.mdl",AVv[CGe],AEv[CGe])
endif
set Anv[CGe]=sxe(AVv[CGe],AEv[CGe])+80
set AIv[CGe]=R2I(rX/ iX)
set Arv[CGe]=GetOwningPlayer(u)
set Aiv[CGe]=CreateGroup()
set ANv[CGe]=0
call BlzSetSpecialEffectScale(AAv[CGe],.7)
call BlzSetSpecialEffectZ(AAv[CGe],Anv[CGe])
call BlzSetSpecialEffectYaw(AAv[CGe],Aav[CGe]*bj_DEGTORAD)
call QIe(CGe,.03125,true,function Xpx)
endfunction
function Xqx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
set Afv[CGe]=Afv[CGe]-aX
call BlzSetSpecialEffectZ(ADv[CGe],Afv[CGe])
set Adv[CGe]=Adv[CGe]-1
if Adv[CGe]==2 then
call Qre(AddSpecialEffect(("war3mapImported\\VDK_nhankiemnewdrop.mdl"),((AFv[CGe])*1.),((Agv[CGe])*1.)))
endif
if Adv[CGe]<=0 then
call QDe()
call GroupEnumUnitsInRange(sv,AFv[CGe],Agv[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Ahv[CGe])and not spe(n)and not tOe(n)then
call yle(AGv[CGe],n,AHv[CGe],.5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIlb\\AIlbSpecialArt.mdl"),(n),"chest"))
call uee(AGv[CGe],n,false,Ajv[CGe],AJv[CGe],THe(AGv[CGe]))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set AGv[CGe]=null
set Ahv[CGe]=null
call Qre(ADv[CGe])
set ADv[CGe]=null
call kSe(CGe)
endif
return false
endfunction
function XQx takes unit u,real d1,real d2,real r,real x,real y returns nothing
local integer CGe=kse()
set Adv[CGe]=$A
set ADv[CGe]=AddSpecialEffect("war3mapImported\\NMK_kiemanh.mdl",x,y)
set Afv[CGe]=sxe(x,y)+450
set AFv[CGe]=x
set Agv[CGe]=y
set AGv[CGe]=u
set Ahv[CGe]=GetOwningPlayer(u)
set Ajv[CGe]=d1
set AJv[CGe]=d2
set AHv[CGe]=r
call BlzSetSpecialEffectScale((ADv[CGe]),((.7)*1.))
call BlzSetSpecialEffectPitch((ADv[CGe]),((90)*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectZ(ADv[CGe],Afv[CGe])
call BlzSetSpecialEffectYaw(ADv[CGe],270*bj_DEGTORAD)
call QIe(CGe,.03125,true,function Xqx)
endfunction
function Xsx takes nothing returns boolean
local integer CGe=Qce()
local real rd=GetRandomInt(-1,1)*$F
call Qre(AddSpecialEffect(("war3mapImported\\VDK_nhankiemcast.mdl"),((AMv[CGe])*1.),((Apv[CGe])*1.)))
call XPx(ALv[CGe],APv[CGe],Aqv[CGe],AQv[CGe],(((AMv[CGe])*1.)+((40)*1.)*Cos(((Amv[CGe]+rd)*1.)*bj_DEGTORAD)),(((Apv[CGe])*1.)+((40)*1.)*Sin(((Amv[CGe]+rd)*1.)*bj_DEGTORAD)),Amv[CGe],true)
set Asv[CGe]=Asv[CGe]-1
if Asv[CGe]<=0 then
call QDe()
set ALv[CGe]=null
call kQe(CGe)
endif
return false
endfunction
function XSx takes unit u,real d,unit v,real r returns nothing
local integer CGe=kqe()
set ALv[CGe]=u
set APv[CGe]=uBe(u,ude(u,2.,.6,'A0AA'))
set Aqv[CGe]=uce(u,ude(u,$5DC,450,'A0AA'),'B00A')
set AQv[CGe]=ude(u,$F,2,'A0AA')
set Asv[CGe]=2
set AMv[CGe]=GetUnitX(u)
set Apv[CGe]=GetUnitY(u)
set Amv[CGe]=soe(AMv[CGe],Apv[CGe],GetUnitX(v),GetUnitY(v))
set APv[CGe]=APv[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A0A0'))
set Aqv[CGe]=Aqv[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A0A0'))
if r>0 then
set APv[CGe]=d
set Aqv[CGe]=d
set AQv[CGe]=r
endif
call XQx(u,APv[CGe],Aqv[CGe],AQv[CGe],(((AMv[CGe])*1.)+((50)*1.)*Cos(((Amv[CGe])*1.)*bj_DEGTORAD)),(((Apv[CGe])*1.)+((50)*1.)*Sin(((Amv[CGe])*1.)*bj_DEGTORAD)))
call QIe(CGe,.2,true,function Xsx)
endfunction
function Xtx takes nothing returns boolean
local integer CGe=Qce()
set Awv[CGe]=Awv[CGe]-1
if Awv[CGe]<=0 then
call QDe()
call UnitRemoveAbility(Auv[CGe],VX)
call Tje(Auv[CGe],vx,-AWv[CGe])
call Tje(Auv[CGe],5319,-AWv[CGe])
call Tje(Auv[CGe],4888,-Ayv[CGe])
set Auv[CGe]=null
call kPe(CGe)
endif
return false
endfunction
function XTx takes unit u,integer i returns nothing
local integer CGe=kpe()
set Auv[CGe]=u
set AUv[CGe]=i
set AWv[CGe]=.3+.05*BUe[(i)*(20)+9]
set Ayv[CGe]=80+20*BUe[(i)*(20)+9]
set Awv[CGe]=R2I(5/ .03125)
call tKe(Auv[CGe],VX)
call Tje(Auv[CGe],vx,AWv[CGe])
call Tje(Auv[CGe],5319,AWv[CGe])
call Tje(Auv[CGe],4888,Ayv[CGe])
call QIe(CGe,.03125,true,function Xtx)
endfunction
function Xux takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set A3v[CGe]=(((A3v[CGe])*1.)+((XX)*1.)*Cos(((A9v[CGe])*1.)*bj_DEGTORAD))
set A4v[CGe]=(((A4v[CGe])*1.)+((XX)*1.)*Sin(((A9v[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(A1v[CGe],A3v[CGe],A4v[CGe],A8v[CGe])
if Nev[CGe]<7 then
call GroupEnumUnitsInRange(sv,A3v[CGe],A4v[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,A0v[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Nvv[CGe])then
call yLe(A_v[CGe],n,A7v[CGe],3.)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl"),(n),"chest"))
call uee(A_v[CGe],n,false,A5v[CGe],A6v[CGe],THe(A_v[CGe]))
call GroupAddUnit(Nvv[CGe],n)
set Nev[CGe]=Nev[CGe]+1
if Nev[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set A2v[CGe]=A2v[CGe]-1
if A2v[CGe]<=0 then
call QDe()
call Qre(A1v[CGe])
call Qne(Nvv[CGe])
set Nvv[CGe]=null
set A1v[CGe]=null
set A_v[CGe]=null
set A0v[CGe]=null
call kMe(CGe)
endif
return false
endfunction
function XUx takes unit u,real d1,real d2,real r,real x,real y,real a returns nothing
local integer CGe=kme()
set A_v[CGe]=u
set A9v[CGe]=a
set A3v[CGe]=x
set A4v[CGe]=y
set A5v[CGe]=d1
set A6v[CGe]=d2
set A7v[CGe]=r
set A8v[CGe]=sxe(A3v[CGe],A4v[CGe])+'d'
set A1v[CGe]=AddSpecialEffect("war3mapImported\\DTC_nhatduongwave.mdl",x,y)
set A2v[CGe]=R2I(EX/ XX)
set Nvv[CGe]=CreateGroup()
set A0v[CGe]=GetOwningPlayer(A_v[CGe])
set Nev[CGe]=0
call BlzSetSpecialEffectYaw((A1v[CGe]),((A9v[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((A1v[CGe]),((.4)*1.))
call BlzSetSpecialEffectZ(A1v[CGe],A8v[CGe])
call QIe(CGe,.03125,true,function Xux)
endfunction
function Xwx takes nothing returns boolean
local integer CGe=Qce()
call XUx(NXv[CGe],Nnv[CGe],NVv[CGe],Nav[CGe],NOv[CGe],NRv[CGe],NEv[CGe])
set Niv[CGe]=Niv[CGe]-1
if Niv[CGe]<=0 then
call QDe()
set NXv[CGe]=null
call kLe(CGe)
endif
return false
endfunction
function XWx takes unit u,real d1,real d2,real r,real x,real y,real a returns nothing
local integer CGe=kle()
set NXv[CGe]=u
set Nnv[CGe]=d1
set NVv[CGe]=d2
set Nav[CGe]=r
set NEv[CGe]=a
set Niv[CGe]=1
set NOv[CGe]=(((x)*1.)+((30)*1.)*Cos(((a+90)*1.)*bj_DEGTORAD))
set NRv[CGe]=(((y)*1.)+((30)*1.)*Sin(((a+90)*1.)*bj_DEGTORAD))
call QIe(CGe,.3,true,function Xwx)
endfunction
function Xyx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,3.,.9,nX))
local real d2=uce(u,ude(u,$FA0,$4B0,nX),'B008')
local real r=ude(u,50,5,nX)
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real a=soe(x,y,GetSpellTargetX(),GetSpellTargetY())
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
call XUx(u,d1,d2,r,x,y,a)
if BUe[(i)*(20)+9]>0 then
call XTx(u,i)
endif
if GetRandomReal(0,'d')<=(40+5*BUe[(i)*(20)+$A])then
call XWx(u,d1,d2,r,x,y,a)
endif
set u=null
return false
endfunction
function XYx takes nothing returns boolean
return GetSpellAbilityId()==nX and Xyx()
endfunction
function Xzx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function XYx))
set t=null
endfunction
function XZx takes nothing returns boolean
local integer CGe=Qce()
set NCv[CGe]=NCv[CGe]-1
if NCv[CGe]<=0 or spe(Nbv[CGe])or not(GetUnitAbilityLevel((Nbv[CGe]),(RX))>0)then
call QDe()
call UnitRemoveAbility(Nbv[CGe],RX)
call T5e(Nbv[CGe],-NBv[CGe])
call Tje(Nbv[CGe],6780,-Ncv[CGe])
set Nbv[CGe]=null
call kKe(CGe)
endif
return false
endfunction
function X_x takes unit u,unit n returns nothing
local integer CGe=kke()
local real r=1.
if u!=n then
set r=.6
endif
set NBv[CGe]=I2R(R2I(ude(u,$C8,40,OX)*r))
set Ncv[CGe]=I2R(R2I(ude(u,$C8,50,OX)*r))
set Nbv[CGe]=n
set NCv[CGe]=R2I(300/ .03125)
call tKe(Nbv[CGe],RX)
call T5e(Nbv[CGe],NBv[CGe])
call Tje(Nbv[CGe],6780,Ncv[CGe])
call QIe(CGe,.03125,true,function XZx)
endfunction
function X0x takes nothing returns boolean
local integer CGe=Qce()
set NFv[CGe]=NFv[CGe]-1
if NFv[CGe]<=0 then
call QDe()
call X_x(Ngv[CGe],NGv[CGe])
set Ngv[CGe]=null
set NGv[CGe]=null
call kJe(CGe)
endif
return false
endfunction
function X1x takes unit u,unit n returns nothing
local integer CGe=kje()
set Ngv[CGe]=u
set NGv[CGe]=n
set NFv[CGe]=$A
call UnitRemoveAbility(n,RX)
call QIe(CGe,.03125,true,function X0x)
endfunction
function X2x takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local unit n
call GroupEnumUnitsInRange(sv,GetUnitX(u),GetUnitY(u),$3E8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitAlly(n,p)and not spe(n)and not tOe(n)and(IsUnitType((n),UNIT_TYPE_HERO))and GetUnitTypeId(n)!='H00K' then
if not(GetUnitAbilityLevel((n),(RX))>0)then
call X_x(u,n)
else
call X1x(u,n)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set u=null
set p=null
return false
endfunction
function X3x takes nothing returns boolean
return GetSpellAbilityId()==OX and X2x()
endfunction
function X4x takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function X3x))
set t=null
endfunction
function X5x takes nothing returns boolean
local integer CGe=Qce()
set NJv[CGe]=NJv[CGe]-1
if NJv[CGe]<=0 or spe(NKv[CGe])then
call QDe()
call UnitRemoveAbility(NKv[CGe],AX)
call Tje(NKv[CGe],ax,Nkv[CGe])
set NKv[CGe]=null
call kHe(CGe)
endif
return false
endfunction
function X6x takes unit u,real r returns nothing
local integer CGe=khe()
set NKv[CGe]=u
set Nkv[CGe]=r
set NJv[CGe]=R2I(18/ .03125)
call tKe(NKv[CGe],AX)
call Tje(NKv[CGe],ax,-Nkv[CGe])
call QIe(CGe,.03125,true,function X5x)
endfunction
function X7x takes nothing returns boolean
local unit u=GetTriggerUnit()
local real r=ude(u,.2,.03,IX)
local unit n=null
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local player p=GetOwningPlayer(u)
call GroupEnumUnitsInRange(sv,x,y,300,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,p)and not spe(n)and not tOe(n)then
call yLe(u,n,'d',5.)
if not(GetUnitAbilityLevel((n),(AX))>0)then
call X6x(n,r)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set u=null
set p=null
return false
endfunction
function X8x takes nothing returns boolean
return GetSpellAbilityId()==IX and X7x()
endfunction
function X9x takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function X8x))
set t=null
endfunction
function Ovx takes nothing returns boolean
local integer CGe=Qce()
set NPv[CGe]=(((NPv[CGe])*1.)+((bX)*1.)*Cos(((Nsv[CGe])*1.)*bj_DEGTORAD))
set Nqv[CGe]=(((Nqv[CGe])*1.)+((bX)*1.)*Sin(((Nsv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(NMv[CGe],NPv[CGe],Nqv[CGe],NQv[CGe])
set Npv[CGe]=Npv[CGe]-1
if Npv[CGe]<=0 then
call QDe()
call BlzSetSpecialEffectScale((NMv[CGe]),((.01)*1.))
call Qre(NMv[CGe])
call kGe(CGe)
endif
return false
endfunction
function Oex takes real x,real y,real a returns nothing
local integer CGe=kge()
set Nsv[CGe]=a
set NPv[CGe]=x
set Nqv[CGe]=y
set Npv[CGe]=R2I(NX/ bX)
set NMv[CGe]=AddSpecialEffect("war3mapImported\\DMPD_nhiephonwave1_1.mdl",NPv[CGe],Nqv[CGe])
set NQv[CGe]=sxe(NPv[CGe],Nqv[CGe])+60
call BlzSetSpecialEffectYaw((NMv[CGe]),((Nsv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((NMv[CGe]),((1.5)*1.))
call BlzSetSpecialEffectZ(NMv[CGe],NQv[CGe])
call QIe(CGe,.03125,true,function Ovx)
endfunction
function Oxx takes nothing returns boolean
local integer CGe=Qce()
set NUv[CGe]=NUv[CGe]-BX
set Nuv[CGe]=Nuv[CGe]-1
call BlzSetSpecialEffectZ(Nyv[CGe],NUv[CGe])
if Nuv[CGe]<=0 then
call QDe()
call BlzSetSpecialEffectScale((Nyv[CGe]),((.01)*1.))
call Qre(Nyv[CGe])
set Nyv[CGe]=null
call kFe(CGe)
endif
return false
endfunction
function Oox takes real x,real y returns nothing
local integer CGe=kfe()
set Nwv[CGe]=x
set NWv[CGe]=y
set Nuv[CGe]=$C
set NUv[CGe]=sxe(Nwv[CGe],NWv[CGe])+600
set Nyv[CGe]=AddSpecialEffect("war3mapImported\\DMPD_nhiephonwave2_1.mdl",Nwv[CGe],NWv[CGe])
call BlzSetSpecialEffectScale(Nyv[CGe],1.5)
call BlzSetSpecialEffectYaw(Nyv[CGe],270*bj_DEGTORAD)
call BlzSetSpecialEffectZ(Nyv[CGe],NUv[CGe])
call QIe(CGe,.03125,true,function Oxx)
endfunction
function Orx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
set N8v[CGe]=N8v[CGe]+1
if N5v[CGe]==5 then
call Oex((((N2v[CGe])*1.)+((400)*1.)*Cos(((N6v[CGe]+45)*1.)*bj_DEGTORAD)),(((N3v[CGe])*1.)+((400)*1.)*Sin(((N6v[CGe]+45)*1.)*bj_DEGTORAD)),N6v[CGe]+$E1)
call Oex((((N2v[CGe])*1.)+((400)*1.)*Cos(((N6v[CGe]+$A5)*1.)*bj_DEGTORAD)),(((N3v[CGe])*1.)+((400)*1.)*Sin(((N6v[CGe]+$A5)*1.)*bj_DEGTORAD)),N6v[CGe]+345)
call Oex((((N2v[CGe])*1.)+((400)*1.)*Cos(((N6v[CGe]+285)*1.)*bj_DEGTORAD)),(((N3v[CGe])*1.)+((400)*1.)*Sin(((N6v[CGe]+285)*1.)*bj_DEGTORAD)),N6v[CGe]+'i')
endif
if N5v[CGe]>4 then
call Oox(N2v[CGe]+GetRandomReal(-80,80),N3v[CGe]+GetRandomReal(-80,80))
call Oox(N2v[CGe]+GetRandomReal(-80,80),N3v[CGe]+GetRandomReal(-80,80))
endif
if N8v[CGe]==2 then
set N8v[CGe]=0
call GroupEnumUnitsInRange(sv,N2v[CGe],N3v[CGe],280,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,N4v[CGe])and not spe(n)and not tOe(n)then
call yLe(N_v[CGe],n,N7v[CGe],1.)
if(GetUnitAbilityLevel((n),(LE))>0)then
call uee(N_v[CGe],n,false,N0v[CGe]*(1.17+.03*BUe[(N9v[CGe])*(20)+8]),N1v[CGe]*(1.17+.03*BUe[(N9v[CGe])*(20)+8]),THe(N_v[CGe]))
else
call uee(N_v[CGe],n,false,N0v[CGe],N1v[CGe],THe(N_v[CGe]))
endif
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set N5v[CGe]=N5v[CGe]-1
if N5v[CGe]<=0 or spe(N_v[CGe])then
call QDe()
set N_v[CGe]=null
set N4v[CGe]=null
call kDe(CGe)
endif
return false
endfunction
function Oix takes unit u,real d,unit v,real r returns nothing
local integer CGe=kde()
local real a=0
set N_v[CGe]=u
set N2v[CGe]=GetUnitX(v)
set N3v[CGe]=GetUnitY(v)
set N5v[CGe]=6
set N8v[CGe]=0
set N0v[CGe]=uBe(u,ude(u,2.5,.75,cX))
set N1v[CGe]=uce(u,ude(u,$9C4,750,cX),'B007')
set N7v[CGe]=ude(u,20,2,cX)
set N4v[CGe]=GetOwningPlayer(N_v[CGe])
set N6v[CGe]=soe(N2v[CGe],N3v[CGe],GetUnitX(v),GetUnitY(v))
set N9v[CGe]=GetPlayerId(N4v[CGe])+1
set N0v[CGe]=N0v[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A05C'))
set N1v[CGe]=N1v[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A05C'))
if r>0 then
set N0v[CGe]=d
set N1v[CGe]=d
set N7v[CGe]=r
endif
call Oex((((N2v[CGe])*1.)+((400)*1.)*Cos(((N6v[CGe]+45)*1.)*bj_DEGTORAD)),(((N3v[CGe])*1.)+((400)*1.)*Sin(((N6v[CGe]+45)*1.)*bj_DEGTORAD)),N6v[CGe]+$E1)
call Oex((((N2v[CGe])*1.)+((400)*1.)*Cos(((N6v[CGe]+$A5)*1.)*bj_DEGTORAD)),(((N3v[CGe])*1.)+((400)*1.)*Sin(((N6v[CGe]+$A5)*1.)*bj_DEGTORAD)),N6v[CGe]+345)
call Oex((((N2v[CGe])*1.)+((400)*1.)*Cos(((N6v[CGe]+285)*1.)*bj_DEGTORAD)),(((N3v[CGe])*1.)+((400)*1.)*Sin(((N6v[CGe]+285)*1.)*bj_DEGTORAD)),N6v[CGe]+'i')
call Oox(N2v[CGe]+GetRandomReal(-'d','d'),N3v[CGe]+GetRandomReal(-'d','d'))
call Oox(N2v[CGe]+GetRandomReal(-'d','d'),N3v[CGe]+GetRandomReal(-'d','d'))
call Qre(AddSpecialEffect(("war3mapImported\\DMPD_nhiephontarget.mdl"),((N2v[CGe]+GetRandomReal(-'d','d'))*1.),((N3v[CGe]+GetRandomReal(-'d','d'))*1.)))
call Qre(AddSpecialEffect(("war3mapImported\\DMPD_nhiephontarget.mdl"),((N2v[CGe]+GetRandomReal(-'d','d'))*1.),((N3v[CGe]+GetRandomReal(-'d','d'))*1.)))
call Qre(AddSpecialEffect(("war3mapImported\\DMPD_nhiephontarget.mdl"),((N2v[CGe]+GetRandomReal(-'d','d'))*1.),((N3v[CGe]+GetRandomReal(-'d','d'))*1.)))
call QIe(CGe,.2,true,function Orx)
endfunction
function Oax takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=0
set bVv[CGe]=(((bVv[CGe])*1.)+((DX)*1.)*Cos(((bNv[CGe])*1.)*bj_DEGTORAD))
set bEv[CGe]=(((bEv[CGe])*1.)+((DX)*1.)*Sin(((bNv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(bav[CGe],bVv[CGe],bEv[CGe],bAv[CGe])
if bIv[CGe]<7 then
call GroupEnumUnitsInRange(sv,bVv[CGe],bEv[CGe],$B4,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,brv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,biv[CGe])then
call yHe(bov[CGe],n,bRv[CGe],1.)
call GroupAddUnit(biv[CGe],n)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TLD_thientruccaster.mdl"),(n),"origin"))
call uee(bov[CGe],n,false,bXv[CGe],bOv[CGe],THe(bov[CGe]))
set bIv[CGe]=bIv[CGe]+1
if bIv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set bnv[CGe]=bnv[CGe]-1
if bnv[CGe]<=0 then
call QDe()
call BlzSetSpecialEffectScale((bav[CGe]),((.01)*1.))
call Qre(bav[CGe])
call Qne(biv[CGe])
set biv[CGe]=null
set bav[CGe]=null
set bov[CGe]=null
set brv[CGe]=null
call kCe(CGe)
endif
return false
endfunction
function Onx takes unit u,player p,real d1,real d2,real r,real x,real y,real a returns nothing
local integer CGe=kce()
set bov[CGe]=u
set bNv[CGe]=a
set bVv[CGe]=x
set bEv[CGe]=y
set brv[CGe]=p
set bnv[CGe]=R2I((dX)/ DX)+20
set bav[CGe]=AddSpecialEffect("war3mapImported\\TLQ_dailucchuong.mdl",bVv[CGe],bEv[CGe])
set bAv[CGe]=sxe(bVv[CGe],bEv[CGe])
set bXv[CGe]=d1
set bOv[CGe]=d2
set bRv[CGe]=r
set bIv[CGe]=0
set biv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((bav[CGe]),((bNv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((bav[CGe]),((2.7)*1.))
call BlzSetSpecialEffectZ(bav[CGe],bAv[CGe])
call QIe(CGe,.03125,true,function Oax)
endfunction
function OVx takes nothing returns boolean
local integer CGe=Qce()
set bHv[CGe]=bHv[CGe]+1
if bHv[CGe]==3 then
set bHv[CGe]=0
call Qre(AddSpecialEffect(("war3mapImported\\TLQ_phateffect.mdl"),((bgv[CGe])*1.),((bGv[CGe])*1.)))
endif
if bCv[CGe]==1 then
call Onx(bdv[CGe],bDv[CGe],bfv[CGe],bFv[CGe],'d',bgv[CGe],bGv[CGe],bhv[CGe])
call Onx(bdv[CGe],bDv[CGe],bfv[CGe],bFv[CGe],'d',bgv[CGe],bGv[CGe],bhv[CGe]+$F)
call Onx(bdv[CGe],bDv[CGe],bfv[CGe],bFv[CGe],'d',bgv[CGe],bGv[CGe],bhv[CGe]-$F)
call Onx(bdv[CGe],bDv[CGe],bfv[CGe],bFv[CGe],'d',bgv[CGe],bGv[CGe],bhv[CGe]+30)
call Onx(bdv[CGe],bDv[CGe],bfv[CGe],bFv[CGe],'d',bgv[CGe],bGv[CGe],bhv[CGe]-30)
elseif bCv[CGe]==2 then
call Onx(bdv[CGe],bDv[CGe],bfv[CGe],bFv[CGe],'d',bgv[CGe],bGv[CGe],bhv[CGe]+8)
call Onx(bdv[CGe],bDv[CGe],bfv[CGe],bFv[CGe],'d',bgv[CGe],bGv[CGe],bhv[CGe]-8)
call Onx(bdv[CGe],bDv[CGe],bfv[CGe],bFv[CGe],'d',bgv[CGe],bGv[CGe],bhv[CGe]+24)
call Onx(bdv[CGe],bDv[CGe],bfv[CGe],bFv[CGe],'d',bgv[CGe],bGv[CGe],bhv[CGe]-24)
elseif bCv[CGe]==3 then
call Onx(bdv[CGe],bDv[CGe],bfv[CGe],bFv[CGe],'d',bgv[CGe],bGv[CGe],bhv[CGe])
call Onx(bdv[CGe],bDv[CGe],bfv[CGe],bFv[CGe],'d',bgv[CGe],bGv[CGe],bhv[CGe]+$F)
call Onx(bdv[CGe],bDv[CGe],bfv[CGe],bFv[CGe],'d',bgv[CGe],bGv[CGe],bhv[CGe]-$F)
elseif bCv[CGe]==4 then
call Onx(bdv[CGe],bDv[CGe],bfv[CGe],bFv[CGe],'d',bgv[CGe],bGv[CGe],bhv[CGe]+8)
call Onx(bdv[CGe],bDv[CGe],bfv[CGe],bFv[CGe],'d',bgv[CGe],bGv[CGe],bhv[CGe]-8)
else
call Onx(bdv[CGe],bDv[CGe],bfv[CGe],bFv[CGe],'d',bgv[CGe],bGv[CGe],bhv[CGe]+GetRandomReal(-8,8))
endif
set bCv[CGe]=bCv[CGe]-1
if bCv[CGe]<=0 then
call QDe()
set bdv[CGe]=null
set bDv[CGe]=null
call kBe(CGe)
endif
return false
endfunction
function OEx takes unit u,real d1,real d2,real a returns nothing
local integer CGe=kbe()
set bdv[CGe]=u
set bfv[CGe]=d1
set bFv[CGe]=d2
set bgv[CGe]=GetUnitX(u)
set bGv[CGe]=GetUnitY(u)
set bhv[CGe]=a
set bHv[CGe]=0
set bCv[CGe]=18
set bDv[CGe]=GetOwningPlayer(u)
call QIe(CGe,.15,true,function OVx)
endfunction
function OXx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,3.,.9,CX))*(1.+TKe(u,968))
local real d2=uce(u,ude(u,$9C4,750,CX),'B006')*(1.+TKe(u,968))
call OEx(u,d1,d2,soe(GetUnitX(u),GetUnitY(u),GetSpellTargetX(),GetSpellTargetY()))
set u=null
return false
endfunction
function OOx takes nothing returns boolean
return GetSpellAbilityId()==CX and OXx()
endfunction
function ORx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function OOx))
set t=null
endfunction
function OIx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set bmv[CGe]=(((bmv[CGe])*1.)+((FX)*1.)*Cos(((bqv[CGe])*1.)*bj_DEGTORAD))
set bMv[CGe]=(((bMv[CGe])*1.)+((FX)*1.)*Sin(((bqv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(blv[CGe],bmv[CGe],bMv[CGe],bPv[CGe])
call GroupEnumUnitsInRange(sv,bmv[CGe],bMv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,bQv[CGe])then
call GroupAddUnit(bQv[CGe],n)
call yHe(bKv[CGe],n,'d',2.)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\HydraliskImpact\\HydraliskImpact.mdl"),(n),"chest"))
call uee(bKv[CGe],n,false,bpv[CGe],bpv[CGe],THe(bKv[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set bLv[CGe]=bLv[CGe]-1
if bLv[CGe]<=0 then
call QDe()
call BlzSetSpecialEffectScale((blv[CGe]),((.001)*1.))
call Qre(blv[CGe])
call Qne(bQv[CGe])
set bQv[CGe]=null
set blv[CGe]=null
set bKv[CGe]=null
call kNe(CGe)
endif
return false
endfunction
function OAx takes unit u,real x,real y,real d,real a returns nothing
local integer CGe=kAe()
set bKv[CGe]=u
set bmv[CGe]=x
set bMv[CGe]=y
set bqv[CGe]=a
set bpv[CGe]=d
set bPv[CGe]=sxe(bmv[CGe],bMv[CGe])+'d'
set blv[CGe]=AddSpecialEffect("war3mapImported\\DMTT_doancannhan.mdl",bmv[CGe],bMv[CGe])
set bLv[CGe]=R2I(fX/ FX)
set bQv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((blv[CGe]),((bqv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((blv[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(blv[CGe],bPv[CGe])
call QIe(CGe,.03125,true,function OIx)
endfunction
function ONx takes nothing returns boolean
local integer CGe=Qce()
set bwv[CGe]=bwv[CGe]+$F
call OAx(buv[CGe],bWv[CGe],byv[CGe],bUv[CGe],bwv[CGe])
set bTv[CGe]=bTv[CGe]-1
if bTv[CGe]<=0 then
call QDe()
set buv[CGe]=null
call kIe(CGe)
endif
return false
endfunction
function Obx takes unit u,real d returns nothing
local integer CGe=kRe()
set buv[CGe]=u
set bTv[CGe]=40
set bUv[CGe]=d
set bwv[CGe]=GetUnitFacing(u)
set bWv[CGe]=GetUnitX(u)
set byv[CGe]=GetUnitY(u)
call QIe(CGe,.1,true,function ONx)
endfunction
function OBx takes nothing returns boolean
local integer CGe=Qce()
set b0v[CGe]=b0v[CGe]-1
if b0v[CGe]<=0 or spe(b_v[CGe])or not(GetUnitAbilityLevel((b_v[CGe]),(GX))>0)then
call QDe()
call UnitRemoveAbility(b_v[CGe],GX)
call u_e(b_v[CGe],-b1v[CGe])
call TPe(b_v[CGe],-b2v[CGe])
call Tje(b_v[CGe],xx,-b3v[CGe])
call TUe(b_v[CGe],-b4v[CGe])
set b_v[CGe]=null
call kOe(CGe)
endif
return false
endfunction
function Ocx takes nothing returns boolean
local integer CGe=kXe()
set b_v[CGe]=GetTriggerUnit()
set b0v[CGe]=R2I(30/ .03125)
set b1v[CGe]=ude(b_v[CGe],$A,2,gX)
set b2v[CGe]=ude(b_v[CGe],$A,2,gX)
set b3v[CGe]=ude(b_v[CGe],.12,.04,gX)
set b4v[CGe]=ude(b_v[CGe],.2,.05,gX)
call tKe(b_v[CGe],GX)
call u_e(b_v[CGe],b1v[CGe])
call TPe(b_v[CGe],b2v[CGe])
call Tje(b_v[CGe],xx,b3v[CGe])
call TUe(b_v[CGe],b4v[CGe])
call QIe(CGe,.03125,true,function OBx)
return false
endfunction
function OCx takes nothing returns boolean
return GetSpellAbilityId()==gX and Ocx()
endfunction
function Odx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function OCx))
set t=null
endfunction
function ODx takes nothing returns boolean
local integer CGe=Qce()
if not spe(Bev[CGe])then
call uee(Bvv[CGe],Bev[CGe],false,0,b9v[CGe],'B007')
endif
set b8v[CGe]=b8v[CGe]-1
if b8v[CGe]<=0 or spe(Bev[CGe])or spe(Bvv[CGe])then
call QDe()
set Bvv[CGe]=null
set Bev[CGe]=null
call kEe(CGe)
endif
return false
endfunction
function Ofx takes unit u,unit v,real d returns nothing
local integer CGe=kVe()
set Bvv[CGe]=u
set Bev[CGe]=v
set b9v[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set b8v[CGe]=5
call QIe(CGe,1.,true,function ODx)
endfunction
function OFx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=1.
local real r2=1.
set BEv[CGe]=(((BEv[CGe])*1.)+((jX)*1.)*Cos(((BNv[CGe])*1.)*bj_DEGTORAD))
set BXv[CGe]=(((BXv[CGe])*1.)+((jX)*1.)*Sin(((BNv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(Bnv[CGe],BEv[CGe],BXv[CGe],BAv[CGe])
if BBv[CGe]<7 then
call GroupEnumUnitsInRange(sv,BEv[CGe],BXv[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Bav[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Bbv[CGe])then
call yLe(Biv[CGe],n,BIv[CGe],2.)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\ChimaeraAcidMissile\\ChimaeraAcidMissile.mdl"),(n),"chest"))
if BUe[(Bcv[CGe])*(20)+$A]>0 then
set r=1.+.25*BBv[CGe]
endif
if(GetUnitAbilityLevel((n),('A0VY'))>0)then
set r2=1.17+.03*BUe[(Bcv[CGe])*(20)+8]
endif
call uee(Biv[CGe],n,false,BOv[CGe]*r*r2,BRv[CGe]*r*r2,THe(Biv[CGe]))
call Ofx(Biv[CGe],n,BRv[CGe]*r2)
if BCv[CGe]then
call SetUnitState(Biv[CGe],UNIT_STATE_LIFE,GetUnitState(Biv[CGe],UNIT_STATE_LIFE)+.1*GetUnitState(Biv[CGe],UNIT_STATE_MAX_LIFE))
endif
call GroupAddUnit(Bbv[CGe],n)
set BBv[CGe]=BBv[CGe]+1
if BBv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set BVv[CGe]=BVv[CGe]-1
if BVv[CGe]<=0 then
call QDe()
if BUe[(Bcv[CGe])*(20)+$A]>0 then
call Tje(Biv[CGe],8073,-20)
call Tje(Biv[CGe],4888,-$7D0)
endif
call Qre(Bnv[CGe])
call Qne(Bbv[CGe])
set Bbv[CGe]=null
set Bnv[CGe]=null
set Biv[CGe]=null
set Bav[CGe]=null
call kne(CGe)
endif
return false
endfunction
function Ogx takes unit u,real d1,real d2,real r,real x,real y,real a,boolean b returns nothing
local integer CGe=kae()
set Biv[CGe]=u
set BNv[CGe]=a
set BEv[CGe]=x
set BXv[CGe]=y
set BOv[CGe]=d1
set BRv[CGe]=d2
set BIv[CGe]=r
set BAv[CGe]=sxe(BEv[CGe],BXv[CGe])+'d'
set Bnv[CGe]=AddSpecialEffect("war3mapImported\\MGC_phachdia.mdl",x,y)
set BVv[CGe]=R2I(HX/ jX)
set Bbv[CGe]=CreateGroup()
set Bav[CGe]=GetOwningPlayer(Biv[CGe])
set BBv[CGe]=0
set Bcv[CGe]=GetPlayerId(Bav[CGe])+1
set BCv[CGe]=b
if BUe[(Bcv[CGe])*(20)+$A]>0 then
call Tje(Biv[CGe],8073,20)
call Tje(Biv[CGe],4888,$7D0)
endif
call BlzSetSpecialEffectYaw((Bnv[CGe]),((BNv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((Bnv[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(Bnv[CGe],BAv[CGe])
call QIe(CGe,.03125,true,function OFx)
endfunction
function OGx takes nothing returns boolean
local integer CGe=Qce()
call Ogx(BHv[CGe],BGv[CGe],Bhv[CGe],Bgv[CGe],GetUnitX(BHv[CGe]),GetUnitY(BHv[CGe]),GetUnitFacing(BHv[CGe]),true)
set BFv[CGe]=BFv[CGe]-1
if BFv[CGe]<=0 then
call QDe()
set BHv[CGe]=null
call kie(CGe)
endif
return false
endfunction
function Ohx takes unit u,real d1,real d2,real r returns nothing
local integer CGe=kre()
set BHv[CGe]=u
set BGv[CGe]=d1
set Bhv[CGe]=d2
set Bgv[CGe]=r
set BFv[CGe]=1
call QIe(CGe,.3,true,function OGx)
endfunction
function OHx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,3.,.9,hX))
local real d2=uce(u,ude(u,$9C4,750,hX),'B007')
local real r=ude(u,50,5,hX)
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real a=soe(x,y,GetSpellTargetX(),GetSpellTargetY())
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
call Ogx(u,d1,d2,r,x,y,a,false)
if BUe[(i)*(20)+$A]>0 and GetRandomReal(0,'d')<=35 then
call Ohx(u,d1,d2,r)
endif
set u=null
return false
endfunction
function Ojx takes nothing returns boolean
return GetSpellAbilityId()==hX and OHx()
endfunction
function OJx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function Ojx))
set t=null
endfunction
function Okx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Bpv[CGe]=(((Bpv[CGe])*1.)+((kX)*1.)*Cos(((BTv[CGe])*1.)*bj_DEGTORAD))
set BPv[CGe]=(((BPv[CGe])*1.)+((kX)*1.)*Sin(((BTv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(Bmv[CGe],Bpv[CGe],BPv[CGe],Btv[CGe])
if BSv[CGe]<7 then
call GroupEnumUnitsInRange(sv,Bpv[CGe],BPv[CGe],$B4,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Blv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,BLv[CGe])then
call yHe(BKv[CGe],n,Bsv[CGe],1.)
call GroupAddUnit(BLv[CGe],n)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\BansheeMissile\\BansheeMissile.mdl"),(n),"chest"))
call uee(BKv[CGe],n,false,Bqv[CGe],BQv[CGe],THe(BKv[CGe]))
set BSv[CGe]=BSv[CGe]+1
if BSv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set BMv[CGe]=BMv[CGe]-1
if BMv[CGe]<=0 then
call QDe()
call Qre(Bmv[CGe])
call Qne(BLv[CGe])
set BLv[CGe]=null
set Bmv[CGe]=null
set BKv[CGe]=null
set Blv[CGe]=null
call koe(CGe)
endif
return false
endfunction
function OKx takes unit u,real d,unit v,real r returns nothing
local integer CGe=kxe()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set BKv[CGe]=u
set BTv[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set Bpv[CGe]=(((x)*1.)+((50)*1.)*Cos(((BTv[CGe])*1.)*bj_DEGTORAD))
set BPv[CGe]=(((y)*1.)+((50)*1.)*Sin(((BTv[CGe])*1.)*bj_DEGTORAD))
set BMv[CGe]=R2I(JX/ kX)
set Bmv[CGe]=AddSpecialEffect("Abilities\\Spells\\Orc\\Shockwave\\ShockwaveMissile.mdl",Bpv[CGe],BPv[CGe])
set Btv[CGe]=sxe(Bpv[CGe],BPv[CGe])
set Bqv[CGe]=uBe(u,ude(u,1.,.3,KX))
set BQv[CGe]=uce(u,ude(u,$3E8,300,KX),'B006')
set Bsv[CGe]=ude(u,20,2,KX)
set BSv[CGe]=0
set BLv[CGe]=CreateGroup()
set Blv[CGe]=GetOwningPlayer(BKv[CGe])
if r>0 then
set Bqv[CGe]=d
set BQv[CGe]=d
set Bsv[CGe]=r
endif
call BlzSetSpecialEffectYaw((Bmv[CGe]),((BTv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((Bmv[CGe]),((.6)*1.))
call BlzSetSpecialEffectZ(Bmv[CGe],Btv[CGe])
call QIe(CGe,.03125,true,function Okx)
endfunction
function Olx takes nothing returns boolean
local integer CGe=Qce()
set Bzv[CGe]=Bzv[CGe]-1
if Bzv[CGe]<=0 or spe(BWv[CGe])or not(GetUnitAbilityLevel((BWv[CGe]),(LX))>0)then
call QDe()
call UnitRemoveAbility(BWv[CGe],LX)
call T6e(BWv[CGe],-Byv[CGe])
call Tje(BWv[CGe],ax,-BYv[CGe])
set BWv[CGe]=null
call kee(CGe)
endif
return false
endfunction
function OLx takes unit u,unit n returns nothing
local integer CGe=kve()
local real r=1.
if u!=n then
set r=.5
endif
set Byv[CGe]=I2R(R2I(ude(u,$C8,50,lX)*r))
set BYv[CGe]=ude(u,.16,.02,lX)*r
set BWv[CGe]=n
set Bzv[CGe]=R2I(300/ .03125)
call tKe(BWv[CGe],LX)
call T6e(BWv[CGe],Byv[CGe])
call Tje(BWv[CGe],ax,BYv[CGe])
call QIe(CGe,.03125,true,function Olx)
endfunction
function Omx takes nothing returns boolean
local integer CGe=Qce()
set B1v[CGe]=B1v[CGe]-1
if B1v[CGe]<=0 then
call QDe()
call OLx(B2v[CGe],B3v[CGe])
set B2v[CGe]=null
set B3v[CGe]=null
call J9e(CGe)
endif
return false
endfunction
function OMx takes unit u,unit n returns nothing
local integer CGe=J8e()
set B2v[CGe]=u
set B3v[CGe]=n
set B1v[CGe]=$A
call UnitRemoveAbility(n,LX)
call QIe(CGe,.03125,true,function Omx)
endfunction
function Opx takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local unit n
call GroupEnumUnitsInRange(sv,GetUnitX(u),GetUnitY(u),$3E8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitAlly(n,p)and not spe(n)and not tOe(n)and(IsUnitType((n),UNIT_TYPE_HERO))and GetUnitTypeId(n)!='H00K' then
if not(GetUnitAbilityLevel((n),(LX))>0)then
call OLx(u,n)
else
call OMx(u,n)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set u=null
set p=null
return false
endfunction
function OPx takes nothing returns boolean
return GetSpellAbilityId()==lX and Opx()
endfunction
function Oqx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function OPx))
set t=null
endfunction
function OQx takes nothing returns boolean
local integer CGe=Qce()
if spe(B7v[CGe])or not(GetUnitAbilityLevel((B7v[CGe]),(MX))>0)then
call QDe()
call UnitRemoveAbility(B7v[CGe],MX)
call Qre(yb[cvv[CGe]])
set yb[cvv[CGe]]=null
if not yJ[cvv[CGe]]then
call T_e(B7v[CGe],-B8v[CGe])
call T4e(B7v[CGe],-B9v[CGe])
endif
set B7v[CGe]=null
call J7e(CGe)
endif
return false
endfunction
function Osx takes unit u,real r1,real r2 returns nothing
local integer CGe=J6e()
set B7v[CGe]=u
set B8v[CGe]=r1
set B9v[CGe]=r2
set cvv[CGe]=(GetPlayerId(GetOwningPlayer((u)))+1)
if(bde[(GetPlayerId(GetOwningPlayer(((B7v[CGe])))))])and not(GetUnitAbilityLevel(((B7v[CGe])),('A0YV'))>0)then
set yb[cvv[CGe]]=UCe(bDe[cvv[CGe]],Yb[cvv[CGe]],"origin")
else
set yb[cvv[CGe]]=UCe(B7v[CGe],Yb[cvv[CGe]],"origin")
endif
call tKe(B7v[CGe],MX)
call T_e(B7v[CGe],B8v[CGe])
call T4e(B7v[CGe],B9v[CGe])
call QIe(CGe,.03125,true,function OQx)
endfunction
function OSx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real r1=ude(u,.2,.02,mX)
local real r2=ude(u,.1,.01,mX)
if(GetUnitAbilityLevel((u),(MX))>0)then
call UnitRemoveAbility(u,MX)
else
call Osx(u,r1,r2)
endif
set u=null
return false
endfunction
function Otx takes nothing returns boolean
return GetSpellAbilityId()==mX and OSx()
endfunction
function OTx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function Otx))
set t=null
endfunction
function Oux takes nothing returns boolean
local integer CGe=Qce()
if crv[CGe]==30 then
call BlzEndUnitAbilityCooldown(XJ[civ[CGe]],'A09V')
endif
set crv[CGe]=crv[CGe]-1
if crv[CGe]<=0 then
call QDe()
set PX[civ[CGe]]=false
call J5e(CGe)
endif
return false
endfunction
function OUx takes integer i returns nothing
local integer CGe=J4e()
set civ[CGe]=i
set PX[civ[CGe]]=true
set crv[CGe]=30
call QIe(CGe,1.,true,function Oux)
endfunction
function Owx takes nothing returns boolean
local integer CGe=Qce()
if not spe(cRv[CGe])then
call uee(cOv[CGe],cRv[CGe],false,cXv[CGe],cIv[CGe],THe(cOv[CGe]))
endif
set cEv[CGe]=cEv[CGe]-1
if cEv[CGe]<=0 or spe(cRv[CGe])or spe(cOv[CGe])then
call QDe()
set cOv[CGe]=null
set cRv[CGe]=null
call J3e(CGe)
endif
return false
endfunction
function OWx takes unit u,real d1,real d2,unit v returns nothing
local integer CGe=J2e()
set cOv[CGe]=u
set cRv[CGe]=v
set cXv[CGe]=d1
set cIv[CGe]=d2
set cEv[CGe]=2
call QIe(CGe,.3,true,function Owx)
endfunction
function Oyx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
call UnitRemoveBuffs(cBv[CGe],false,true)
call Qre(AddSpecialEffect(("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl"),((ccv[CGe])*1.),((cCv[CGe])*1.)))
set ccv[CGe]=(((ccv[CGe])*1.)+((pX)*1.)*Cos(((cgv[CGe])*1.)*bj_DEGTORAD))
set cCv[CGe]=(((cCv[CGe])*1.)+((pX)*1.)*Sin(((cgv[CGe])*1.)*bj_DEGTORAD))
if sZe(ccv[CGe],cCv[CGe])then
call SetUnitX(cBv[CGe],ccv[CGe])
call SetUnitY(cBv[CGe],cCv[CGe])
else
set cFv[CGe]=0
endif
if chv[CGe]<7 then
call GroupEnumUnitsInRange(sv,ccv[CGe],cCv[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,cGv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,cHv[CGe])then
call yKe(cBv[CGe],n,cfv[CGe],2.)
call yHe(cBv[CGe],n,cfv[CGe],1.)
call GroupAddUnit(cHv[CGe],n)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl"),(n),"chest"))
call uee(cBv[CGe],n,false,cdv[CGe],cDv[CGe],THe(cBv[CGe]))
call OWx(cBv[CGe],cdv[CGe],cDv[CGe],n)
set chv[CGe]=chv[CGe]+1
if chv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set cFv[CGe]=cFv[CGe]-1
if cFv[CGe]<=0 or spe(cBv[CGe])then
call QDe()
call SetPlayerAbilityAvailable((cGv[CGe]),('A09V'),true)
call Tje(cBv[CGe],5740,-.99)
call Qre(cjv[CGe])
call Qne(cHv[CGe])
set cjv[CGe]=null
set cHv[CGe]=null
set cBv[CGe]=null
set cGv[CGe]=null
call J1e(CGe)
endif
return false
endfunction
function OYx takes unit u,real d1,real d2,real r,real a returns nothing
local integer CGe=J0e()
set cBv[CGe]=u
set ccv[CGe]=GetUnitX(u)
set cCv[CGe]=GetUnitY(u)
set cfv[CGe]=r
set cdv[CGe]=d1
set cDv[CGe]=d2
set cFv[CGe]=R2I(900/ pX)
set cgv[CGe]=a
set cGv[CGe]=GetOwningPlayer(u)
set cHv[CGe]=CreateGroup()
set cjv[CGe]=AddSpecialEffectTarget("war3mapImported\\TNK_phihongcast.mdl",cBv[CGe],"origin")
set chv[CGe]=0
call Tje(cBv[CGe],5740,.99)
call SetPlayerAbilityAvailable((cGv[CGe]),('A09V'),false)
call QIe(CGe,.03125,true,function Oyx)
endfunction
function Ozx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,5.,1.5,'A09V'))*(1.+TKe(u,4857))
local real d2=uce(u,ude(u,5000,$5DC,'A09V'),'B009')*(1.+TKe(u,4857))
local real r=ude(u,30,3,'A09V')
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
call OYx(u,d1,d2,r,GetUnitFacing(u))
if BUe[(i)*(20)+9]>0 and not PX[i]then
call OUx(i)
endif
set u=null
return false
endfunction
function OZx takes nothing returns boolean
return GetSpellAbilityId()=='A09V' and Ozx()
endfunction
function O_x takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Filter(function OZx))
set t=null
endfunction
function O0x takes nothing returns boolean
local integer CGe=Qce()
set cLv[CGe]=cLv[CGe]-1
if cLv[CGe]<=0 or spe(clv[CGe])or not(GetUnitAbilityLevel((clv[CGe]),(QX))>0)then
call QDe()
call Qre(yb[cPv[CGe]])
set yb[cPv[CGe]]=null
call UnitRemoveAbility(clv[CGe],QX)
call Tje(clv[CGe],7695,-cmv[CGe])
if cMv[CGe]>0 and cpv[CGe]>0 then
call Tje(clv[CGe],572,-cMv[CGe])
call Tje(clv[CGe],7896,-cMv[CGe])
call Tje(clv[CGe],lx,-cMv[CGe])
call Tje(clv[CGe],6491,-cMv[CGe])
call Tje(clv[CGe],xx,-cpv[CGe])
endif
set clv[CGe]=null
call J_e(CGe)
endif
return false
endfunction
function O1x takes nothing returns boolean
local integer CGe=JZe()
set clv[CGe]=GetTriggerUnit()
set cLv[CGe]=R2I(20/ .03125)
set cmv[CGe]=((GetUnitState(clv[CGe],UNIT_STATE_LIFE)*.5)/(850-50*GetUnitAbilityLevel(clv[CGe],qX)))*.01
set cPv[CGe]=(GetPlayerId(GetOwningPlayer((clv[CGe])))+1)
set cMv[CGe]=0
set cpv[CGe]=0
call SetUnitState(clv[CGe],UNIT_STATE_LIFE,GetUnitState(clv[CGe],UNIT_STATE_LIFE)*.5)
if(bde[(GetPlayerId(GetOwningPlayer(((clv[CGe])))))])and not(GetUnitAbilityLevel(((clv[CGe])),('A0YV'))>0)then
set yb[cPv[CGe]]=UCe(bDe[cPv[CGe]],Yb[cPv[CGe]],"origin")
else
set yb[cPv[CGe]]=UCe(clv[CGe],Yb[cPv[CGe]],"origin")
endif
if BUe[(cPv[CGe])*(20)+$A]>0 then
set cMv[CGe]=.4+.1*BUe[(cPv[CGe])*(20)+$A]
set cpv[CGe]=.13+.02*BUe[(cPv[CGe])*(20)+$A]
call Tje(clv[CGe],572,cMv[CGe])
call Tje(clv[CGe],7896,cMv[CGe])
call Tje(clv[CGe],lx,cMv[CGe])
call Tje(clv[CGe],6491,cMv[CGe])
call Tje(clv[CGe],xx,cpv[CGe])
endif
call tKe(clv[CGe],QX)
call Tje(clv[CGe],7695,cmv[CGe])
call QIe(CGe,.03125,true,function O0x)
return false
endfunction
function O2x takes nothing returns boolean
return GetSpellAbilityId()==qX and O1x()
endfunction
function O3x takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function O2x))
set t=null
endfunction
function O4x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
call GroupEnumUnitsInRange(sv,cwv[CGe],cWv[CGe],300,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,ctv[CGe])and not spe(n)and not tOe(n)then
call yke(cSv[CGe],n,cyv[CGe],2.)
call uee(cSv[CGe],n,true,cuv[CGe],cUv[CGe],THe(cSv[CGe]))
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl"),(n),"chest"))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set cTv[CGe]=cTv[CGe]-1
if cTv[CGe]<=0 then
call QDe()
call Qre(cYv[CGe])
set cYv[CGe]=null
set cSv[CGe]=null
set ctv[CGe]=null
call Jze(CGe)
endif
return false
endfunction
function O5x takes unit u,real d1,real d2,real r,real x,real y returns nothing
local integer CGe=JYe()
set cSv[CGe]=u
set cwv[CGe]=x
set cWv[CGe]=y
set ctv[CGe]=GetOwningPlayer(cSv[CGe])
set cuv[CGe]=d1
set cUv[CGe]=d2
set cTv[CGe]=8
set cYv[CGe]=AddSpecialEffect("war3mapImported\\TYK_phituphieuhoaeffect2.mdl",cwv[CGe],cWv[CGe])
set cyv[CGe]=r
call BlzSetSpecialEffectScale((cYv[CGe]),((1.5)*1.))
call BlzSetSpecialEffectYaw((cYv[CGe]),((270)*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectZ(cYv[CGe],sxe(cwv[CGe],cWv[CGe])+20)
call QIe(CGe,1.,true,function O4x)
endfunction
function O6x takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,3.,.9,sX))*(1.+TKe(u,4857))
local real d2=uce(u,ude(u,$BB8,900,sX),'B008')*(1.+TKe(u,4857))
local real r=ude(u,40,4,sX)
call O5x(u,d1,d2,r,GetSpellTargetX(),GetSpellTargetY())
set u=null
return false
endfunction
function O7x takes nothing returns boolean
return GetSpellAbilityId()==sX and O6x()
endfunction
function O8x takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function O7x))
set t=null
endfunction
function O9x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set c4v[CGe]=(((c4v[CGe])*1.)+((tX)*1.)*Cos(((Cvv[CGe])*1.)*bj_DEGTORAD))
set c5v[CGe]=(((c5v[CGe])*1.)+((tX)*1.)*Sin(((Cvv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(c2v[CGe],c4v[CGe],c5v[CGe],c9v[CGe])
if Cxv[CGe]<7 then
call GroupEnumUnitsInRange(sv,c4v[CGe],c5v[CGe],90,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,c1v[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Cev[CGe])then
call yke(c0v[CGe],n,c8v[CGe],2.)
call GroupAddUnit(Cev[CGe],n)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl"),(n),"chest"))
call uee(c0v[CGe],n,true,c6v[CGe],c7v[CGe],THe(c0v[CGe]))
set Cxv[CGe]=Cxv[CGe]+1
if Cxv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set c3v[CGe]=c3v[CGe]-1
if c3v[CGe]<=0 then
call QDe()
call Qre(c2v[CGe])
call Qne(Cev[CGe])
set Cev[CGe]=null
set c2v[CGe]=null
set c0v[CGe]=null
set c1v[CGe]=null
call Jye(CGe)
endif
return false
endfunction
function Rvx takes unit u,real d,unit v,real r returns nothing
local integer CGe=JWe()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set c0v[CGe]=u
set Cvv[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set c4v[CGe]=(((x)*1.)+((40)*1.)*Cos(((Cvv[CGe])*1.)*bj_DEGTORAD))
set c5v[CGe]=(((y)*1.)+((40)*1.)*Sin(((Cvv[CGe])*1.)*bj_DEGTORAD))
set c6v[CGe]=uBe(u,ude(u,1.,.3,TX))
set c7v[CGe]=uce(u,ude(u,$3E8,300,TX),'B008')
set c8v[CGe]=ude(u,20,2,TX)
set c9v[CGe]=sxe(c4v[CGe],c5v[CGe])+80
set c2v[CGe]=AddSpecialEffect("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",c4v[CGe],c5v[CGe])
set c3v[CGe]=R2I(SX/ tX)
set Cev[CGe]=CreateGroup()
set c1v[CGe]=GetOwningPlayer(c0v[CGe])
set Cxv[CGe]=0
call Qre(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl",c0v[CGe],"weapon"))
if r>0 then
set c6v[CGe]=d
set c7v[CGe]=d
set c8v[CGe]=r
endif
call BlzSetSpecialEffectYaw((c2v[CGe]),((Cvv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((c2v[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(c2v[CGe],c9v[CGe])
call QIe(CGe,.03125,true,function O9x)
endfunction
function Rex takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
if Cnv[CGe]>4 then
call GroupEnumUnitsInRange(sv,CVv[CGe],CEv[CGe],$F0,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,CIv[CGe])and not spe(n)and not tOe(n)then
call yHe(CAv[CGe],n,CRv[CGe],1.)
call uee(CAv[CGe],n,true,CXv[CGe],COv[CGe],THe(CAv[CGe]))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set Cnv[CGe]=Cnv[CGe]-1
if Cnv[CGe]<=0 then
call QDe()
set WX[Cav[CGe]]=false
set CIv[CGe]=null
set CAv[CGe]=null
call Jwe(CGe)
endif
return false
endfunction
function Rxx takes unit u,integer i,real x,real y returns nothing
local integer CGe=JUe()
call Qre(AddSpecialEffect(("war3mapImported\\NMC_diepdetanghoanew4.mdl"),((x)*1.),((y)*1.)))
set Cav[CGe]=i
set Cnv[CGe]=6
set CVv[CGe]=x
set CEv[CGe]=y
set CIv[CGe]=GetOwningPlayer(u)
set CAv[CGe]=u
set CXv[CGe]=uBe(u,ude(u,2.5,.75,wX))
set COv[CGe]=uce(u,ude(u,$9C4,750,wX),'B008')
set CRv[CGe]=ude(u,30,3,wX)
set WX[Cav[CGe]]=true
call QIe(CGe,.5,true,function Rex)
endfunction
function Rox takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real b=400
if not spe(CCv[CGe])and Clv[CGe]==1 then
set Ckv[CGe]=soe(Cgv[CGe],CGv[CGe],GetUnitX(CCv[CGe]),GetUnitY(CCv[CGe]))
call BlzSetSpecialEffectYaw((Cfv[CGe]),((Ckv[CGe])*1.)*bj_DEGTORAD)
endif
set Cgv[CGe]=(((Cgv[CGe])*1.)+((UX)*1.)*Cos(((Ckv[CGe])*1.)*bj_DEGTORAD))
set CGv[CGe]=(((CGv[CGe])*1.)+((UX)*1.)*Sin(((Ckv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(Cfv[CGe],Cgv[CGe],CGv[CGe],CJv[CGe])
if CKv[CGe]<7 then
call GroupEnumUnitsInRange(sv,Cgv[CGe],CGv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Cdv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,CDv[CGe])then
if n==CCv[CGe]then
if BUe[(CLv[CGe])*(20)+8]>0 and GetRandomReal(0,'d')<=(27+3*BUe[(CLv[CGe])*(20)+8])and not WX[CLv[CGe]]then
call Rxx(Ccv[CGe],CLv[CGe],GetUnitX(n),GetUnitY(n))
endif
endif
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl"),(n),"chest"))
call yke(Ccv[CGe],n,Cjv[CGe],2.)
call uee(Ccv[CGe],n,true,Chv[CGe],CHv[CGe],THe(Ccv[CGe]))
call GroupAddUnit(CDv[CGe],n)
set CKv[CGe]=CKv[CGe]+1
if CKv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set CFv[CGe]=CFv[CGe]-1
if CFv[CGe]==0 and Clv[CGe]==0 then
set Clv[CGe]=1
if not spe(CCv[CGe])then
set b=sre(Cgv[CGe],CGv[CGe],GetUnitX(CCv[CGe]),GetUnitY(CCv[CGe]))
endif
set CFv[CGe]=R2I(b/ UX)
endif
if CFv[CGe]<=0 and Clv[CGe]==1 then
call QDe()
call Qre(Cfv[CGe])
call Qne(CDv[CGe])
set CDv[CGe]=null
set Cfv[CGe]=null
set Ccv[CGe]=null
set CCv[CGe]=null
set Cdv[CGe]=null
call Jue(CGe)
endif
return false
endfunction
function Rrx takes unit u,unit v,real d1,real d2,real r,real x,real y,real a returns nothing
local integer CGe=JTe()
set Ccv[CGe]=u
set CCv[CGe]=v
set Ckv[CGe]=a
set Cgv[CGe]=x
set CGv[CGe]=y
set CFv[CGe]=R2I(uX/ UX)
set CKv[CGe]=0
set Clv[CGe]=0
set Cdv[CGe]=GetOwningPlayer(Ccv[CGe])
set CDv[CGe]=CreateGroup()
set Cfv[CGe]=AddSpecialEffect("war3mapImported\\NMK_phongsuongnew4.mdl",Cgv[CGe],CGv[CGe])
set CJv[CGe]=sxe(Cgv[CGe],CGv[CGe])+'d'
set Chv[CGe]=d1
set CHv[CGe]=d2
set Cjv[CGe]=r
set CLv[CGe]=GetPlayerId(Cdv[CGe])+1
call BlzSetSpecialEffectYaw((Cfv[CGe]),((Ckv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((Cfv[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(Cfv[CGe],CJv[CGe])
call QIe(CGe,.03125,true,function Rox)
endfunction
function Rix takes unit u,real d,unit v,real r returns nothing
local real d1=uBe(u,ude(u,2.,.6,wX))
local real d2=uce(u,ude(u,$7D0,600,wX),'B008')
local real rz=ude(u,20,2,wX)
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real a=soe(x,y,GetUnitX(v),GetUnitY(v))
set d1=d1*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A07S'))
set d2=d2*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A07S'))
call Qre(AddSpecialEffect(("war3mapImported\\NMK_kiemanhphatquangztarget.mdl"),((x)*1.),((y)*1.)))
if r>0 then
set d1=d
set d2=d
set rz=r
endif
call Rrx(u,v,d1,d2,rz,x,y,a)
call Rrx(u,v,d1,d2,rz,x,y,a-'x')
call Rrx(u,v,d1,d2,rz,x,y,a+'x')
endfunction
function Rax takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set CUv[CGe]=CUv[CGe]+1
if CUv[CGe]>16 then
set Csv[CGe]=(((Csv[CGe])*1.)+((YX)*1.)*Cos(((Cuv[CGe])*1.)*bj_DEGTORAD))
set CSv[CGe]=(((CSv[CGe])*1.)+((YX)*1.)*Sin(((Cuv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(Cqv[CGe],Csv[CGe],CSv[CGe],CTv[CGe])
call GroupEnumUnitsInRange(sv,Csv[CGe],CSv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Cwv[CGe])then
call GroupAddUnit(Cwv[CGe],n)
call yHe(CPv[CGe],n,'d',2.)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TNK_vanlong3.mdl"),(n),"chest"))
call uee(CPv[CGe],n,true,Ctv[CGe],Ctv[CGe],THe(CPv[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set CQv[CGe]=CQv[CGe]-1
if CQv[CGe]<=0 then
call QDe()
call BlzSetSpecialEffectScale((Cqv[CGe]),((.001)*1.))
call Qre(Cqv[CGe])
call Qne(Cwv[CGe])
set Cwv[CGe]=null
set Cqv[CGe]=null
set CPv[CGe]=null
call Jte(CGe)
endif
return false
endfunction
function Rnx takes unit u,real x,real y,real d,real a returns nothing
local integer CGe=JSe()
set CPv[CGe]=u
set Csv[CGe]=x
set CSv[CGe]=y
set Cuv[CGe]=a
set Ctv[CGe]=d
set CTv[CGe]=sxe(Csv[CGe],CSv[CGe])+'d'
set Cqv[CGe]=AddSpecialEffect("war3mapImported\\TNK_vanlong3.mdl",Csv[CGe],CSv[CGe])
set CQv[CGe]=R2I(yX/ YX)
set CUv[CGe]=0
set Cwv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((Cqv[CGe]),((Cuv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((Cqv[CGe]),((1.1)*1.))
call BlzSetSpecialEffectZ(Cqv[CGe],CTv[CGe])
call QIe(CGe,.03125,true,function Rax)
endfunction
function RVx takes nothing returns boolean
local integer CGe=Qce()
local real x=(((CZv[CGe])*1.)+((800)*1.)*Cos(((30*Czv[CGe])*1.)*bj_DEGTORAD))
local real y=(((C_v[CGe])*1.)+((800)*1.)*Sin(((30*Czv[CGe])*1.)*bj_DEGTORAD))
call Rnx(C1v[CGe],x,y,C0v[CGe],soe(x,y,CZv[CGe],C_v[CGe]))
set Czv[CGe]=Czv[CGe]-1
if Czv[CGe]<=0 then
call QDe()
set C1v[CGe]=null
call Jse(CGe)
endif
return false
endfunction
function REx takes unit u,real d,real x0,real y0 returns nothing
local integer CGe=JQe()
set CZv[CGe]=x0
set C_v[CGe]=y0
set C1v[CGe]=u
set C0v[CGe]=d
set Czv[CGe]=$C
call QIe(CGe,.3,true,function RVx)
endfunction
function RXx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
call GroupEnumUnitsInRange(sv,C8v[CGe],C9v[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yke(C7v[CGe],n,'d',2.)
call uee(C7v[CGe],n,false,C6v[CGe],C6v[CGe],THe(C7v[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set C5v[CGe]=C5v[CGe]-1
if C5v[CGe]<=0 then
call QDe()
call Qre(dvv[CGe])
set dvv[CGe]=null
set C7v[CGe]=null
call Jqe(CGe)
endif
return false
endfunction
function ROx takes unit u,real d,real x,real y returns nothing
local integer CGe=JPe()
set C7v[CGe]=u
set C6v[CGe]=d
set C8v[CGe]=x
set C9v[CGe]=y
set C5v[CGe]=6
set dvv[CGe]=AddSpecialEffect("war3mapImported\\EFF_hoasenx.mdl",x,y)
call BlzSetSpecialEffectScale((dvv[CGe]),((1.3)*1.))
call QIe(CGe,.5,true,function RXx)
endfunction
function RRx takes nothing returns boolean
local integer CGe=Qce()
local real x0=GetUnitX(div[CGe])
local real y0=GetUnitY(div[CGe])
local real x=GetRandomReal(x0-600,x0+600)
local real y=GetRandomReal(y0-600,y0+600)
call ROx(div[CGe],dav[CGe],x,y)
set drv[CGe]=drv[CGe]-1
if drv[CGe]<=0 or spe(div[CGe])then
call QDe()
set div[CGe]=null
call Jpe(CGe)
endif
return false
endfunction
function RIx takes unit u,real d returns nothing
local integer CGe=JMe()
set div[CGe]=u
set dav[CGe]=d
set drv[CGe]=30
call QIe(CGe,.32,true,function RRx)
endfunction
function RAx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set dRv[CGe]=(((dRv[CGe])*1.)+((zX)*1.)*Cos(((dNv[CGe])*1.)*bj_DEGTORAD))
set dIv[CGe]=(((dIv[CGe])*1.)+((zX)*1.)*Sin(((dNv[CGe])*1.)*bj_DEGTORAD))
call Qre(AddSpecialEffect(("war3mapImported\\NMC_diepdetanghoa.mdl"),((dRv[CGe])*1.),((dIv[CGe])*1.)))
call GroupEnumUnitsInRange(sv,dRv[CGe],dIv[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yHe(dXv[CGe],n,'d',1.)
call uee(dXv[CGe],n,false,dAv[CGe],dAv[CGe],THe(dXv[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set dOv[CGe]=dOv[CGe]-1
if dOv[CGe]<=0 then
call QDe()
set dXv[CGe]=null
call Jme(CGe)
endif
return false
endfunction
function RNx takes unit u,real x,real y,real d,real a returns nothing
local integer CGe=JLe()
set dXv[CGe]=u
set dRv[CGe]=x
set dIv[CGe]=y
set dNv[CGe]=a
set dAv[CGe]=d
set dOv[CGe]=9
call QIe(CGe,.32,true,function RAx)
endfunction
function Rbx takes unit u,real d,real x0,real y0 returns nothing
local integer i=0
local real x=0
local real y=0
loop
exitwhen i>$C
set x=(((x0)*1.)+(($3E8)*1.)*Cos(((30*i)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+(($3E8)*1.)*Sin(((30*i)*1.)*bj_DEGTORAD))
call RNx(u,x,y,d,soe(x,y,x0,y0))
set i=i+1
endloop
endfunction
function RBx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set dFv[CGe]=(((dFv[CGe])*1.)+((vO)*1.)*Cos(((dHv[CGe])*1.)*bj_DEGTORAD))
set dgv[CGe]=(((dgv[CGe])*1.)+((vO)*1.)*Sin(((dHv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(dDv[CGe],dFv[CGe],dgv[CGe],dhv[CGe])
call GroupEnumUnitsInRange(sv,dFv[CGe],dgv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,ddv[CGe])then
call uee(dCv[CGe],n,false,dGv[CGe],dGv[CGe],THe(dCv[CGe]))
call yke(dCv[CGe],n,'d',3.)
call GroupAddUnit(ddv[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set dfv[CGe]=dfv[CGe]-1
if dfv[CGe]<=0 then
call QDe()
call Qre(dDv[CGe])
call Qne(ddv[CGe])
set ddv[CGe]=null
set dDv[CGe]=null
set dCv[CGe]=null
call Jle(CGe)
endif
return false
endfunction
function Rcx takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=JKe()
set dCv[CGe]=u
set dHv[CGe]=a
set dFv[CGe]=(((x)*1.)+((50)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set dgv[CGe]=(((y)*1.)+((50)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set dfv[CGe]=R2I(ZX/ vO)
set dDv[CGe]=AddSpecialEffect("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",dFv[CGe],dgv[CGe])
set dhv[CGe]=sxe(dFv[CGe],dgv[CGe])+'d'
set dGv[CGe]=d
set ddv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((dDv[CGe]),((dHv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((dDv[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(dDv[CGe],dhv[CGe])
call QIe(CGe,.03125,true,function RBx)
endfunction
function RCx takes nothing returns boolean
local integer CGe=Qce()
local real x=GetUnitX(dLv[CGe])
local real y=GetUnitY(dLv[CGe])
set dKv[CGe]=dKv[CGe]-1
if dKv[CGe]<=0 then
call QDe()
call Rcx(dLv[CGe],dmv[CGe],x,y,0)
call Rcx(dLv[CGe],dmv[CGe],x,y,30)
call Rcx(dLv[CGe],dmv[CGe],x,y,60)
call Rcx(dLv[CGe],dmv[CGe],x,y,90)
call Rcx(dLv[CGe],dmv[CGe],x,y,'x')
call Rcx(dLv[CGe],dmv[CGe],x,y,$96)
call Rcx(dLv[CGe],dmv[CGe],x,y,$B4)
call Rcx(dLv[CGe],dmv[CGe],x,y,$D2)
call Rcx(dLv[CGe],dmv[CGe],x,y,$F0)
call Rcx(dLv[CGe],dmv[CGe],x,y,270)
call Rcx(dLv[CGe],dmv[CGe],x,y,300)
call Rcx(dLv[CGe],dmv[CGe],x,y,330)
set dLv[CGe]=null
call Jke(CGe)
endif
return false
endfunction
function Rdx takes unit u,real d returns nothing
local integer CGe=JJe()
set dLv[CGe]=u
set dmv[CGe]=d
set dKv[CGe]=1
call QIe(CGe,.5,true,function RCx)
endfunction
function RDx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set dtv[CGe]=(((dtv[CGe])*1.)+((eO)*1.)*Cos(((dwv[CGe])*1.)*bj_DEGTORAD))
set dTv[CGe]=(((dTv[CGe])*1.)+((eO)*1.)*Sin(((dwv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(dsv[CGe],dtv[CGe],dTv[CGe],dUv[CGe])
call GroupEnumUnitsInRange(sv,dtv[CGe],dTv[CGe],90,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,dQv[CGe])then
call uee(dqv[CGe],n,false,duv[CGe],duv[CGe],THe(dqv[CGe]))
call yLe(dqv[CGe],n,'d',1.)
call GroupAddUnit(dQv[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set dSv[CGe]=dSv[CGe]-1
if dSv[CGe]<=0 then
call QDe()
call Qre(dsv[CGe])
call Qne(dQv[CGe])
set dQv[CGe]=null
set dsv[CGe]=null
set dqv[CGe]=null
call Jje(CGe)
endif
return false
endfunction
function Rfx takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=JHe()
set dqv[CGe]=u
set dwv[CGe]=a
set dtv[CGe]=x
set dTv[CGe]=y
set dSv[CGe]=R2I(800/ eO)
set dsv[CGe]=AddSpecialEffect("war3mapImported\\DMTT_baovucham5.mdl",dtv[CGe],dTv[CGe])
set dUv[CGe]=sxe(dtv[CGe],dTv[CGe])+'d'
set duv[CGe]=d
set dQv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((dsv[CGe]),((dwv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((dsv[CGe]),((.5)*1.))
call BlzSetSpecialEffectZ(dsv[CGe],dUv[CGe])
call QIe(CGe,.03125,true,function RDx)
endfunction
function RFx takes unit u,real d,unit v returns nothing
local real x0=GetUnitX(u)
local real y0=GetUnitY(u)
local real x2=GetUnitX(v)
local real y2=GetUnitY(v)
local real a=soe(x0,y0,GetUnitX(v),GetUnitY(v))
local real x=(((x0)*1.)+(($C8)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
local real y=(((y0)*1.)+(($C8)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
call Rfx(u,d,x,y,a)
set x=(((x0)*1.)+(($C8)*1.)*Cos(((a+30)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+(($C8)*1.)*Sin(((a+30)*1.)*bj_DEGTORAD))
call Rfx(u,d,x,y,a)
set x=(((x0)*1.)+(($C8)*1.)*Cos(((a-30)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+(($C8)*1.)*Sin(((a-30)*1.)*bj_DEGTORAD))
call Rfx(u,d,x,y,a)
set x=(((x0)*1.)+(($C8)*1.)*Cos(((a+60)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+(($C8)*1.)*Sin(((a+60)*1.)*bj_DEGTORAD))
call Rfx(u,d,x,y,a)
set x=(((x0)*1.)+(($C8)*1.)*Cos(((a-60)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+(($C8)*1.)*Sin(((a-60)*1.)*bj_DEGTORAD))
call Rfx(u,d,x,y,a)
set x=(((x0)*1.)+(($C8)*1.)*Cos(((a+90)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+(($C8)*1.)*Sin(((a+90)*1.)*bj_DEGTORAD))
call Rfx(u,d,x,y,a)
set x=(((x0)*1.)+(($C8)*1.)*Cos(((a-90)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+(($C8)*1.)*Sin(((a-90)*1.)*bj_DEGTORAD))
call Rfx(u,d,x,y,a)
endfunction
function Rgx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set d1v[CGe]=(((d1v[CGe])*1.)+((oO)*1.)*Cos(((d5v[CGe])*1.)*bj_DEGTORAD))
set d2v[CGe]=(((d2v[CGe])*1.)+((oO)*1.)*Sin(((d5v[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(d_v[CGe],d1v[CGe],d2v[CGe],d4v[CGe])
call GroupEnumUnitsInRange(sv,d1v[CGe],d2v[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,dZv[CGe])then
call uee(dzv[CGe],n,false,d3v[CGe],d3v[CGe],THe(dzv[CGe]))
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\HydraliskImpact\\HydraliskImpact.mdl"),(n),"chest"))
call yLe(dzv[CGe],n,'d',1.5)
call GroupAddUnit(dZv[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set d0v[CGe]=d0v[CGe]-1
if d0v[CGe]<=0 then
call QDe()
call Qre(d_v[CGe])
call Qne(dZv[CGe])
set dZv[CGe]=null
set d_v[CGe]=null
set dzv[CGe]=null
call Jhe(CGe)
endif
return false
endfunction
function RGx takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=JGe()
set dzv[CGe]=u
set d5v[CGe]=a
set d1v[CGe]=(((x)*1.)+((50)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set d2v[CGe]=(((y)*1.)+((50)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set d0v[CGe]=R2I(xO/ oO)
set d_v[CGe]=AddSpecialEffect("war3mapImported\\DMTT_doancannhan.mdl",d1v[CGe],d2v[CGe])
set d4v[CGe]=sxe(d1v[CGe],d2v[CGe])+'d'
set d3v[CGe]=d
set dZv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((d_v[CGe]),((d5v[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((d_v[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(d_v[CGe],d4v[CGe])
call QIe(CGe,.03125,true,function Rgx)
endfunction
function Rhx takes nothing returns boolean
local integer CGe=Qce()
local real x=GetUnitX(Dvv[CGe])
local real y=GetUnitY(Dvv[CGe])
call RGx(Dvv[CGe],Dev[CGe],x,y,GetRandomInt(1,18)*$A)
call RGx(Dvv[CGe],Dev[CGe],x,y,GetRandomInt(19,36)*$A)
set d9v[CGe]=d9v[CGe]-1
if d9v[CGe]<=0 or spe(Dvv[CGe])then
call QDe()
set Dvv[CGe]=null
call Jge(CGe)
endif
return false
endfunction
function RHx takes unit u,real d returns nothing
local integer CGe=JFe()
set Dvv[CGe]=u
set Dev[CGe]=d
set d9v[CGe]=40
call QIe(CGe,.1,true,function Rhx)
endfunction
function Rjx takes unit u,real d1,real d2,boolean RJx returns nothing
local integer c=0
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real x2=0
local real y2=0
local real d=0
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local unit n=null
call GroupEnumUnitsInRange(sv,x,y,600,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,p)and not spe(n)and not tOe(n)then
call yHe(u,n,'d',4.)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\HydraliskImpact\\HydraliskImpact.mdl"),(n),"chest"))
call uee(u,n,false,d1,d2,THe(u))
set x2=GetUnitX(n)
set y2=GetUnitY(n)
set d=sre(x,y,x2,y2)
if BUe[(i)*(20)+9]>0 and GetRandomReal(0,'d')<=(32+4*BUe[(i)*(20)+9])then
if not(IsUnitType((n),UNIT_TYPE_TAUREN))and d>'d' and not(GetUnitAbilityLevel((n),('A0NA'))>0)then
call s5e(n,d-50,.4,soe(x2,y2,x,y),false,false)
endif
endif
if RJx then
call s5e(n,d-50,.4,soe(x2,y2,x,y),false,false)
endif
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set u=null
set p=null
endfunction
function Rkx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,2.,.6,rO))
local real d2=uce(u,ude(u,$7D0,600,rO),'B006')
call Rjx(u,d1,d2,false)
set u=null
return false
endfunction
function RKx takes nothing returns boolean
return GetSpellAbilityId()==rO and Rkx()
endfunction
function Rlx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function RKx))
set t=null
endfunction
function RLx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=0
set DXv[CGe]=(((DXv[CGe])*1.)+((nO)*1.)*Cos(((DBv[CGe])*1.)*bj_DEGTORAD))
set DOv[CGe]=(((DOv[CGe])*1.)+((nO)*1.)*Sin(((DBv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(DVv[CGe],DXv[CGe],DOv[CGe],Dbv[CGe])
if DNv[CGe]<7 then
call GroupEnumUnitsInRange(sv,DXv[CGe],DOv[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Dav[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Dnv[CGe])then
call yHe(Div[CGe],n,DAv[CGe],1.)
call GroupAddUnit(Dnv[CGe],n)
if(GetUnitAbilityLevel((n),('A03D'))>0)then
set r=$C+4*GetUnitAbilityLevel(Div[CGe],'A03B')
endif
if BUe[(Dcv[CGe])*(20)+9]>0 and GetRandomReal(0,'d')<=($F+3*BUe[(Dcv[CGe])*(20)+9]+r)then
call Qre(AddSpecialEffectTarget(("war3mapImported\\TLD_thientruccaster.mdl"),(n),"origin"))
call uee(Div[CGe],n,false,DRv[CGe]*1.5,DIv[CGe]*1.5,THe(Div[CGe]))
else
call Qre(AddSpecialEffectTarget(("war3mapImported\\TLD_blade_effect.mdl"),(n),"chest"))
call uee(Div[CGe],n,false,DRv[CGe],DIv[CGe],THe(Div[CGe]))
endif
set DNv[CGe]=DNv[CGe]+1
if DNv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set DEv[CGe]=DEv[CGe]-1
if DEv[CGe]<=0 then
call QDe()
call Qre(DVv[CGe])
call Qne(Dnv[CGe])
set Dnv[CGe]=null
set DVv[CGe]=null
set Div[CGe]=null
set Dav[CGe]=null
call Jfe(CGe)
endif
return false
endfunction
function Rmx takes unit u,real x,real y,real d1,real d2,real r,real a returns nothing
local integer CGe=JDe()
set Div[CGe]=u
set DBv[CGe]=a
set DXv[CGe]=x
set DOv[CGe]=y
set DEv[CGe]=R2I(aO/ nO)
set DVv[CGe]=AddSpecialEffect("war3mapImported\\TLD_tranphaitgqtnew.mdl",DXv[CGe],DOv[CGe])
set Dbv[CGe]=sxe(DXv[CGe],DOv[CGe])+'d'
set DRv[CGe]=d1
set DIv[CGe]=d2
set DAv[CGe]=r
set DNv[CGe]=0
set Dnv[CGe]=CreateGroup()
set Dav[CGe]=GetOwningPlayer(Div[CGe])
set Dcv[CGe]=GetPlayerId(Dav[CGe])+1
call BlzSetSpecialEffectYaw((DVv[CGe]),((DBv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((DVv[CGe]),((.4)*1.))
call BlzSetSpecialEffectZ(DVv[CGe],Dbv[CGe])
call QIe(CGe,.03125,true,function RLx)
endfunction
function RMx takes unit u,real d,unit v,real r returns nothing
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real a=soe(x,y,GetUnitX(v),GetUnitY(v))
local real d1=uBe(u,ude(u,3.,.9,iO))
local real d2=uce(u,ude(u,$BB8,900,iO),'B006')
local real zr=ude(u,20,2,iO)
set d1=d1*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A033'))
set d2=d2*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A033'))
call Qre(AddSpecialEffect(("war3mapImported\\TLD_tranphai4.mdl"),((x)*1.),((y)*1.)))
set x=(((x)*1.)+(('d')*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set y=(((y)*1.)+(('d')*1.)*Sin(((a)*1.)*bj_DEGTORAD))
if r>0 then
set zr=r
set d1=d
set d2=d
endif
call Rmx(u,x,y,d1,d2,zr,a)
call Rmx(u,x,y,d1,d2,zr,a-20)
call Rmx(u,x,y,d1,d2,zr,a+20)
if GetRandomReal(0,'d')<=$F then
call Rmx(u,x,y,d1,d2,zr,a-40)
call Rmx(u,x,y,d1,d2,zr,a+40)
endif
endfunction
function Rpx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
call Qre(AddSpecialEffect(("war3mapImported\\VDK_tamhoanthaonguyet.mdl"),((DGv[CGe])*1.),((Dhv[CGe])*1.)))
call GroupEnumUnitsInRange(sv,DGv[CGe],Dhv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,DFv[CGe])and not spe(n)and not tOe(n)then
call yle(Dfv[CGe],n,DJv[CGe],1.)
call uee(Dfv[CGe],n,false,DHv[CGe],Djv[CGe],THe(Dfv[CGe]))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set Dgv[CGe]=Dgv[CGe]-1
if Dgv[CGe]<=0 then
call QDe()
set Dfv[CGe]=null
set DFv[CGe]=null
call Jde(CGe)
endif
return false
endfunction
function RPx takes unit u,real d,unit v,real r returns nothing
local integer CGe=JCe()
set Dfv[CGe]=u
set DGv[CGe]=GetUnitX(v)
set Dhv[CGe]=GetUnitY(v)
set Dgv[CGe]=3
set DHv[CGe]=uBe(u,ude(u,1.,.3,VO))
set Djv[CGe]=uce(u,ude(u,700,$D2,VO),'B00A')
set DJv[CGe]=ude(u,$A,2,VO)
set DFv[CGe]=GetOwningPlayer(Dfv[CGe])
if r>0 then
set DHv[CGe]=d
set Djv[CGe]=d
set DJv[CGe]=r
endif
call QIe(CGe,.24,true,function Rpx)
endfunction
function Rqx takes unit u,integer i returns real
local real r=1.
if BUe[(i)*(20)+9]>0 then
set r=r+.01*(GetUnitState(u,UNIT_STATE_LIFE)/ 6000)
endif
if r>2. then
set r=2.
endif
return r
endfunction
function RQx takes nothing returns boolean
local integer CGe=Qce()
set Dmv[CGe]=Dmv[CGe]-1
if Dmv[CGe]<=0 or spe(DLv[CGe])or not(GetUnitAbilityLevel((DLv[CGe]),(XO))>0)then
call QDe()
call UnitRemoveAbility(DLv[CGe],XO)
if not spe(DLv[CGe])then
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl"),(DLv[CGe]),"origin"))
call Tse(DLv[CGe],GetUnitState(DLv[CGe],UNIT_STATE_MAX_LIFE))
call Qle("|cff7fff00"+"+100%|r",GetUnitX(DLv[CGe]),GetUnitY(DLv[CGe]))
endif
set DLv[CGe]=null
call Jce(CGe)
endif
return false
endfunction
function Rsx takes nothing returns boolean
local integer CGe=JBe()
set DLv[CGe]=GetTriggerUnit()
set Dmv[CGe]=R2I(ude(DLv[CGe],$C,2,EO)/ .03125)
call tKe(DLv[CGe],XO)
call QIe(CGe,.03125,true,function RQx)
return false
endfunction
function RSx takes nothing returns boolean
return GetSpellAbilityId()==EO and Rsx()
endfunction
function Rtx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function RSx))
set t=null
endfunction
function RTx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Dwv[CGe]=Dwv[CGe]+GetRandomReal(-45,45)
set Dtv[CGe]=(((Dtv[CGe])*1.)+((RO)*1.)*Cos(((Dwv[CGe])*1.)*bj_DEGTORAD))
set DTv[CGe]=(((DTv[CGe])*1.)+((RO)*1.)*Sin(((Dwv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(Dsv[CGe],Dtv[CGe],DTv[CGe],DUv[CGe])
call GroupEnumUnitsInRange(sv,Dtv[CGe],DTv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,DQv[CGe])then
call uee(Dqv[CGe],n,true,Duv[CGe],Duv[CGe],THe(Dqv[CGe]))
call yke(Dqv[CGe],n,'d',2.5)
call GroupAddUnit(DQv[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set DSv[CGe]=DSv[CGe]-1
if DSv[CGe]<=0 then
call QDe()
call Qre(Dsv[CGe])
call Qne(DQv[CGe])
set DQv[CGe]=null
set Dsv[CGe]=null
set Dqv[CGe]=null
call Jbe(CGe)
endif
return false
endfunction
function Rux takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=JNe()
set Dqv[CGe]=u
set Dwv[CGe]=a
set Dtv[CGe]=(((x)*1.)+(('d')*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set DTv[CGe]=(((y)*1.)+(('d')*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set DSv[CGe]=R2I(OO/ RO)
set Dsv[CGe]=AddSpecialEffect("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",Dtv[CGe],DTv[CGe])
set DUv[CGe]=sxe(Dtv[CGe],DTv[CGe])+'d'
set Duv[CGe]=d
set DQv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((Dsv[CGe]),((Dwv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((Dsv[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(Dsv[CGe],DUv[CGe])
call QIe(CGe,.03125,true,function RTx)
endfunction
function RUx takes nothing returns boolean
local integer CGe=Qce()
local real a=GetUnitFacing(DZv[CGe])
local real x=GetUnitX(DZv[CGe])
local real y=GetUnitY(DZv[CGe])
call Rux(DZv[CGe],D_v[CGe],x,y,a)
call Rux(DZv[CGe],D_v[CGe],x,y,a+$F)
call Rux(DZv[CGe],D_v[CGe],x,y,a+30)
call Rux(DZv[CGe],D_v[CGe],x,y,a+45)
call Rux(DZv[CGe],D_v[CGe],x,y,a+60)
call Rux(DZv[CGe],D_v[CGe],x,y,a-$F)
call Rux(DZv[CGe],D_v[CGe],x,y,a-30)
call Rux(DZv[CGe],D_v[CGe],x,y,a-45)
call Rux(DZv[CGe],D_v[CGe],x,y,a-60)
set Dzv[CGe]=Dzv[CGe]-1
if Dzv[CGe]<=0 or spe(DZv[CGe])then
call QDe()
set DZv[CGe]=null
call JAe(CGe)
endif
return false
endfunction
function Rwx takes unit u,real d returns nothing
local integer CGe=JIe()
set DZv[CGe]=u
set D_v[CGe]=d
set Dzv[CGe]=5
call QIe(CGe,1.,true,function RUx)
endfunction
function RWx takes nothing returns boolean
local integer CGe=Qce()
if not spe(D6v[CGe])then
call uee(D5v[CGe],D6v[CGe],true,D4v[CGe],D7v[CGe],THe(D5v[CGe]))
endif
set D3v[CGe]=D3v[CGe]-1
if D3v[CGe]<=0 or spe(D6v[CGe])or spe(D5v[CGe])then
call QDe()
set D5v[CGe]=null
set D6v[CGe]=null
call JRe(CGe)
endif
return false
endfunction
function Ryx takes unit u,real d1,real d2,unit v returns nothing
local integer CGe=JOe()
set D5v[CGe]=u
set D6v[CGe]=v
set D4v[CGe]=d1
set D7v[CGe]=d2
set D3v[CGe]=1
call QIe(CGe,1.,true,function RWx)
endfunction
function RYx takes nothing returns boolean
local integer CGe=Qce()
set fev[CGe]=fev[CGe]-1
if fev[CGe]<=0 or spe(fxv[CGe])then
call QDe()
call UnitRemoveAbility(fxv[CGe],AO)
set fxv[CGe]=null
call JXe(CGe)
endif
return false
endfunction
function Rzx takes unit v returns nothing
local integer CGe=JEe()
set fxv[CGe]=v
set fev[CGe]=R2I(10./ .03125)
call tKe(fxv[CGe],AO)
call QIe(CGe,.03125,true,function RYx)
endfunction
function RZx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
local real r=1.
if fVv[CGe]<=3 then
call Qre(AddSpecialEffect(("war3mapImported\\TND_TNLTfire6.mdl"),((GetRandomReal(fEv[CGe]-'d',fEv[CGe]+'d'))*1.),((GetRandomReal(fXv[CGe]-'d',fXv[CGe]+'d'))*1.)))
endif
call GroupEnumUnitsInRange(sv,fEv[CGe],fXv[CGe],$FA,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,fnv[CGe])and not spe(n)and not tOe(n)then
if(GetUnitAbilityLevel((n),(AO))>0)then
set r=1.17+.03*BUe[(fAv[CGe])*(20)+$A]
call yLe(fav[CGe],n,($B+BUe[(fAv[CGe])*(20)+$A]),.5)
else
if BUe[(fAv[CGe])*(20)+$A]>0 then
call Rzx(n)
endif
endif
call Qre(AddSpecialEffect(("war3mapImported\\TNK_tranphai33.mdl"),((GetUnitX(n))*1.),((GetUnitY(n))*1.)))
call yKe(fav[CGe],n,fIv[CGe],2.)
call uee(fav[CGe],n,true,fOv[CGe],fRv[CGe]*r,THe(fav[CGe]))
if fVv[CGe]==4 then
call Ryx(fav[CGe],fOv[CGe],fRv[CGe]*r,n)
endif
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set fVv[CGe]=fVv[CGe]-1
if fVv[CGe]<=0 then
call QDe()
call Qre(fNv[CGe])
set fNv[CGe]=null
set fav[CGe]=null
set fnv[CGe]=null
call JVe(CGe)
endif
return false
endfunction
function R_x takes unit u,real d,unit v,real r returns nothing
local integer CGe=Jne()
set fav[CGe]=u
set fEv[CGe]=GetUnitX(v)
set fXv[CGe]=GetUnitY(v)
set fVv[CGe]=4
set fOv[CGe]=uBe(u,ude(u,2.,.6,IO))
set fRv[CGe]=uce(u,ude(u,$BB8,900,IO),'B009')
set fIv[CGe]=ude(u,20,2,IO)
set fnv[CGe]=GetOwningPlayer(fav[CGe])
set fAv[CGe]=GetPlayerId(fnv[CGe])+1
set fNv[CGe]=AddSpecialEffect("war3mapImported\\TND_tranphai1_2.mdl",fEv[CGe],fXv[CGe])
call BlzSetSpecialEffectScale((fNv[CGe]),((.75)*1.))
call Qre(AddSpecialEffect(("war3mapImported\\TND_thienngoailuutinhcaster3.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qre(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl",fav[CGe],"weapon"))
set fOv[CGe]=fOv[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A09B'))
set fRv[CGe]=fRv[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A09B'))
if r>0 then
set fOv[CGe]=d
set fRv[CGe]=d
set fIv[CGe]=r
endif
call QIe(CGe,.2,true,function RZx)
endfunction
function R0x takes nothing returns boolean
local integer CGe=Qce()
call uee(fDv[CGe],ffv[CGe],true,0,fdv[CGe],'B007')
set fCv[CGe]=fCv[CGe]-1
if fCv[CGe]<=0 or spe(ffv[CGe])or spe(fDv[CGe])then
call QDe()
set fDv[CGe]=null
set ffv[CGe]=null
call Jae(CGe)
endif
return false
endfunction
function R1x takes unit u,unit v,real d returns nothing
local integer CGe=Jie()
set fDv[CGe]=u
set ffv[CGe]=v
set fdv[CGe]=d
set fCv[CGe]=3
call QIe(CGe,1.,true,function R0x)
endfunction
function R2x takes unit u,real d,real x,real y returns nothing
local unit n=null
call GroupEnumUnitsInRange(sv,x,y,$FA,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yLe(u,n,'d',2.)
call uee(u,n,true,d,d,THe(u))
call R1x(u,n,d)
endif
call GroupRemoveUnit(sv,n)
endloop
endfunction
function R3x takes nothing returns boolean
local integer CGe=Qce()
local real x0=GetUnitX(fHv[CGe])
local real y0=GetUnitY(fHv[CGe])
local real x=GetRandomReal(x0-500,x0+500)
local real y=GetRandomReal(y0-500,y0+500)
call Qre(AddSpecialEffect(("war3mapImported\\NDC_tranphai33.mdl"),((x)*1.),((y)*1.)))
call R2x(fHv[CGe],fjv[CGe],x,y)
set fhv[CGe]=fhv[CGe]-1
if fhv[CGe]<=0 or spe(fHv[CGe])then
call QDe()
set fHv[CGe]=null
call Jre(CGe)
endif
return false
endfunction
function R4x takes unit u,real d returns nothing
local integer CGe=Joe()
set fHv[CGe]=u
set fjv[CGe]=d
set fhv[CGe]=25
call QIe(CGe,.2,true,function R3x)
endfunction
function R5x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set fMv[CGe]=(((fMv[CGe])*1.)+((bO)*1.)*Cos(((fQv[CGe])*1.)*bj_DEGTORAD))
set fpv[CGe]=(((fpv[CGe])*1.)+((bO)*1.)*Sin(((fQv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(fLv[CGe],fMv[CGe],fpv[CGe],fqv[CGe])
call GroupEnumUnitsInRange(sv,fMv[CGe],fpv[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,fsv[CGe])then
call yHe(flv[CGe],n,'d',1.)
call GroupAddUnit(fsv[CGe],n)
call uee(flv[CGe],n,true,fPv[CGe],fPv[CGe],THe(flv[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set fmv[CGe]=fmv[CGe]-1
if fmv[CGe]<=0 then
call QDe()
call Qre(fLv[CGe])
call Qne(fsv[CGe])
set fsv[CGe]=null
set fLv[CGe]=null
set flv[CGe]=null
call Jxe(CGe)
endif
return false
endfunction
function R6x takes unit u,real x,real y,real d,real a returns nothing
local integer CGe=Jee()
set flv[CGe]=u
set fQv[CGe]=a
set fMv[CGe]=x
set fpv[CGe]=y
set fPv[CGe]=d
set fqv[CGe]=sxe(fMv[CGe],fpv[CGe])
set fLv[CGe]=AddSpecialEffect("war3mapImported\\EFF_pttx456.mdl",fMv[CGe],fpv[CGe])
set fmv[CGe]=R2I(NO/ bO)
set fsv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((fLv[CGe]),((fQv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((fLv[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(fLv[CGe],fqv[CGe])
call QIe(CGe,.03125,true,function R5x)
endfunction
function R7x takes nothing returns boolean
local integer CGe=Qce()
local real a=fYv[CGe]+GetRandomReal(-30,30)
call R6x(fUv[CGe],fWv[CGe],fyv[CGe],fwv[CGe],a)
call R6x(fUv[CGe],fWv[CGe],fyv[CGe],fwv[CGe],a+$A)
call R6x(fUv[CGe],fWv[CGe],fyv[CGe],fwv[CGe],a+20)
call R6x(fUv[CGe],fWv[CGe],fyv[CGe],fwv[CGe],a+30)
call R6x(fUv[CGe],fWv[CGe],fyv[CGe],fwv[CGe],a-$A)
call R6x(fUv[CGe],fWv[CGe],fyv[CGe],fwv[CGe],a-20)
call R6x(fUv[CGe],fWv[CGe],fyv[CGe],fwv[CGe],a-30)
set fuv[CGe]=fuv[CGe]-1
if fuv[CGe]<=0 or spe(fUv[CGe])then
call QDe()
set fUv[CGe]=null
call Jve(CGe)
endif
return false
endfunction
function R8x takes unit u,real d,real a returns nothing
local integer CGe=j9e()
set fUv[CGe]=u
set fWv[CGe]=GetUnitX(u)
set fyv[CGe]=GetUnitY(u)
set fwv[CGe]=d
set fYv[CGe]=a
set fuv[CGe]=3
call QIe(CGe,.3,true,function R7x)
endfunction
function R9x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set f4v[CGe]=(((f4v[CGe])*1.)+((cO)*1.)*Cos(((f8v[CGe])*1.)*bj_DEGTORAD))
set f5v[CGe]=(((f5v[CGe])*1.)+((cO)*1.)*Sin(((f8v[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(f2v[CGe],f4v[CGe],f5v[CGe],f7v[CGe])
call GroupEnumUnitsInRange(sv,f4v[CGe],f5v[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,f1v[CGe])then
call uee(f0v[CGe],n,false,f6v[CGe],f6v[CGe],THe(f0v[CGe]))
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\HydraliskImpact\\HydraliskImpact.mdl"),(n),"chest"))
call yLe(f0v[CGe],n,'d',1.5)
call GroupAddUnit(f1v[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set f3v[CGe]=f3v[CGe]-1
if f3v[CGe]<=0 then
call QDe()
call Qre(f2v[CGe])
call Qne(f1v[CGe])
set f1v[CGe]=null
set f2v[CGe]=null
set f0v[CGe]=null
call j8e(CGe)
endif
return false
endfunction
function Ivx takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=j7e()
set f0v[CGe]=u
set f8v[CGe]=a
set f4v[CGe]=(((x)*1.)+((50)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set f5v[CGe]=(((y)*1.)+((50)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set f3v[CGe]=R2I(BO/ cO)
set f2v[CGe]=AddSpecialEffect("war3mapImported\\DMTT_tranphai2222.mdl",f4v[CGe],f5v[CGe])
set f7v[CGe]=sxe(f4v[CGe],f5v[CGe])+'d'
set f6v[CGe]=d
set f1v[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((f2v[CGe]),((f8v[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((f2v[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(f2v[CGe],f7v[CGe])
call QIe(CGe,.03125,true,function R9x)
endfunction
function Iex takes nothing returns boolean
local integer CGe=Qce()
local real x=GetUnitX(Fov[CGe])
local real y=GetUnitY(Fov[CGe])
call Ivx(Fov[CGe],Frv[CGe],x,y,GetRandomInt(1,36)*$A)
call Ivx(Fov[CGe],Frv[CGe],x,y,GetRandomInt(1,36)*$A)
set Fxv[CGe]=Fxv[CGe]-1
if Fxv[CGe]<=0 or spe(Fov[CGe])then
call QDe()
set Fov[CGe]=null
call j6e(CGe)
endif
return false
endfunction
function Ixx takes unit u,real d returns nothing
local integer CGe=j5e()
set Fov[CGe]=u
set Frv[CGe]=d
set Fxv[CGe]=50
call QIe(CGe,.1,true,function Iex)
endfunction
function Iox takes unit u returns real
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
if BUe[(i)*(20)+9]>0 then
set Pv=((GetUnitState(u,UNIT_STATE_MANA)/($4B0-50*BUe[(i)*(20)+9]))*.01)
if Pv>1.5 then
set Pv=1.5
endif
return 1.+Pv
else
return 1.
endif
endfunction
function Irx takes nothing returns boolean
local integer CGe=Qce()
set FEv[CGe]=FEv[CGe]-1
if FEv[CGe]<=0 or spe(FVv[CGe])then
call QDe()
call Tje(FVv[CGe],4888,-FXv[CGe])
call Tje(FVv[CGe],ax,-.04)
set FVv[CGe]=null
call j4e(CGe)
endif
return false
endfunction
function Iix takes unit u returns nothing
local integer CGe=j3e()
set FVv[CGe]=u
set FEv[CGe]=R2I(10./ .03125)
set FXv[CGe]=I2R(R2I(.04*TKe(u,4888)))
call Tje(u,4888,FXv[CGe])
call Tje(u,ax,.04)
call QIe(CGe,.03125,true,function Irx)
endfunction
function Iax takes nothing returns boolean
local integer CGe=Qce()
set FNv[CGe]=FNv[CGe]-1
if FNv[CGe]<=0 or spe(FAv[CGe])or not(GetUnitAbilityLevel((FAv[CGe]),(fO))>0)then
call QDe()
call UnitRemoveAbility(FAv[CGe],fO)
set FAv[CGe]=null
call j2e(CGe)
endif
return false
endfunction
function IVx takes unit u returns nothing
local integer CGe=j1e()
set FAv[CGe]=u
set FNv[CGe]=R2I(5./ .03125)
call tKe(FAv[CGe],fO)
call QIe(CGe,.03125,true,function Iax)
endfunction
function IEx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set FFv[CGe]=(((FFv[CGe])*1.)+((dO)*1.)*Cos(((FJv[CGe])*1.)*bj_DEGTORAD))
set Fgv[CGe]=(((Fgv[CGe])*1.)+((dO)*1.)*Sin(((FJv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(FDv[CGe],FFv[CGe],Fgv[CGe],Fjv[CGe])
if FKv[CGe]<7 then
call GroupEnumUnitsInRange(sv,FFv[CGe],Fgv[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Fdv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Fkv[CGe])then
call yle(FCv[CGe],n,FHv[CGe],2.)
call GroupAddUnit(Fkv[CGe],n)
call Qre(AddSpecialEffectTarget(("war3mapImported\\VDQ_thaicuc.mdl"),(n),"chest"))
call uee(FCv[CGe],n,true,FGv[CGe],Fhv[CGe],THe(FCv[CGe]))
set FKv[CGe]=FKv[CGe]+1
if FKv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set Ffv[CGe]=Ffv[CGe]-1
if Ffv[CGe]<=0 then
call QDe()
call Qre(FDv[CGe])
call Qne(Fkv[CGe])
set Fkv[CGe]=null
set FDv[CGe]=null
set FCv[CGe]=null
set Fdv[CGe]=null
call j0e(CGe)
endif
return false
endfunction
function IXx takes unit u,real x,real y,real d1,real d2,real r,real a returns nothing
local integer CGe=j_e()
set FCv[CGe]=u
set FJv[CGe]=a
set FFv[CGe]=(((x)*1.)+((60)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set Fgv[CGe]=(((y)*1.)+((60)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set FGv[CGe]=d1
set Fhv[CGe]=d2
set FHv[CGe]=r
set Fjv[CGe]=sxe(FFv[CGe],Fgv[CGe])
set FDv[CGe]=AddSpecialEffect("war3mapImported\\VDQ_thaicuc.mdl",FFv[CGe],Fgv[CGe])
set Ffv[CGe]=R2I(CO/ dO)
set Fkv[CGe]=CreateGroup()
set Fdv[CGe]=GetOwningPlayer(FCv[CGe])
set FKv[CGe]=0
call BlzSetSpecialEffectYaw((FDv[CGe]),((FJv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((FDv[CGe]),((.6)*1.))
call BlzSetSpecialEffectZ(FDv[CGe],Fjv[CGe])
call QIe(CGe,.03125,true,function IEx)
endfunction
function IOx takes unit u,real d1,real d2,real r returns boolean
local real a=GetUnitFacing(u)
local real x=GetUnitX(u)
local real y=GetUnitY(u)
call IXx(u,x,y,d1,d2,r,a+45)
call IXx(u,x,y,d1,d2,r,a+90)
call IXx(u,x,y,d1,d2,r,a+$87)
call IXx(u,x,y,d1,d2,r,a+$B4)
call IXx(u,x,y,d1,d2,r,a+$E1)
call IXx(u,x,y,d1,d2,r,a+270)
call IXx(u,x,y,d1,d2,r,a+315)
call IXx(u,x,y,d1,d2,r,a+360)
return false
endfunction
function IRx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,4.,1.2,DO))*Iox(u)*(1.+TKe(u,4857))
local real d2=uce(u,ude(u,$FA0,$4B0,DO),'B00A')*Iox(u)*(1.+TKe(u,4857))
local real r=ude(u,30,4,DO)
call IVx(u)
call IOx(u,d1,d2,r)
set u=null
return false
endfunction
function IIx takes nothing returns boolean
return GetSpellAbilityId()==DO and IRx()
endfunction
function IAx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function IIx))
set t=null
endfunction
function INx takes nothing returns boolean
local integer CGe=Qce()
if not spe(FMv[CGe])then
call UnitRemoveBuffs(FMv[CGe],false,true)
endif
set Fpv[CGe]=Fpv[CGe]-1
if Fpv[CGe]<=0 or spe(FMv[CGe])then
call QDe()
call UnitRemoveAbility(FMv[CGe],FO)
call Tje(FMv[CGe],5740,-.99)
set FMv[CGe]=null
call jZe(CGe)
endif
return false
endfunction
function Ibx takes unit u returns nothing
local integer CGe=jze()
set FMv[CGe]=u
set Fpv[CGe]=R2I(1./ .03125)
call tKe(FMv[CGe],FO)
call Tje(FMv[CGe],5740,.99)
call QIe(CGe,.03125,true,function INx)
endfunction
function IBx takes nothing returns boolean
local integer CGe=Qce()
local integer n=16-BUe[(FSv[CGe])*(20)+9]
set Ftv[CGe]=Ftv[CGe]+1
if Ftv[CGe]>=n then
set Ftv[CGe]=0
call Ibx(Fsv[CGe])
endif
if XJ[FSv[CGe]]==null then
call QDe()
set Fsv[CGe]=null
call jYe(CGe)
endif
return false
endfunction
function Icx takes unit u returns nothing
local integer CGe=jye()
set Fsv[CGe]=u
set FSv[CGe]=(GetPlayerId(GetOwningPlayer((u)))+1)
set Ftv[CGe]=0
call QIe(CGe,1.,true,function IBx)
endfunction
function ICx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Fyv[CGe]=Fyv[CGe]-1
if Fyv[CGe]<=0 then
call QDe()
if F1v[CGe]<7 then
call GroupEnumUnitsInRange(sv,FYv[CGe],Fzv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,FWv[CGe])and not spe(n)and not tOe(n)then
call yHe(Fwv[CGe],n,F0v[CGe],.5)
call yke(Fwv[CGe],n,F0v[CGe],2.)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl"),(n),"chest"))
call uee(Fwv[CGe],n,false,FZv[CGe],F_v[CGe],THe(Fwv[CGe]))
set F1v[CGe]=F1v[CGe]+1
if F1v[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set Fwv[CGe]=null
set FWv[CGe]=null
call jWe(CGe)
endif
return false
endfunction
function Idx takes unit u,real d,unit v,real r returns nothing
local integer CGe=jwe()
local integer i=0
set Fwv[CGe]=u
set FYv[CGe]=GetUnitX(v)
set Fzv[CGe]=GetUnitY(v)
set Fyv[CGe]=1
set FZv[CGe]=uBe(u,ude(u,1.,.3,gO))
set F_v[CGe]=uce(u,ude(u,$3E8,300,gO),'B008')
set F0v[CGe]=ude(u,$F,2,gO)
set F1v[CGe]=0
set FWv[CGe]=GetOwningPlayer(Fwv[CGe])
if r>0 then
set FZv[CGe]=d
set F_v[CGe]=d
set F0v[CGe]=r
endif
call Qre(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl",u,"hand right"))
call Qre(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl",u,"hand left"))
call QIe(CGe,.03125,true,function ICx)
endfunction
function IDx takes nothing returns boolean
local integer CGe=Qce()
set F5v[CGe]=F5v[CGe]-1
if F5v[CGe]<=0 then
call QDe()
call BlzEndUnitAbilityCooldown(F7v[CGe],F6v[CGe])
set F7v[CGe]=null
call jUe(CGe)
endif
return false
endfunction
function Ifx takes unit u,integer uDe returns nothing
local integer CGe=jue()
set F7v[CGe]=u
set F6v[CGe]=uDe
set F5v[CGe]=1
call QIe(CGe,.5,true,function IDx)
endfunction
function IFx takes nothing returns boolean
local integer CGe=Qce()
set gxv[CGe]=gxv[CGe]-1
if gxv[CGe]<=0 or spe(gev[CGe])or not(GetUnitAbilityLevel((gev[CGe]),(hO))>0)then
call QDe()
call UnitRemoveAbility(gev[CGe],hO)
set gev[CGe]=null
call jTe(CGe)
endif
return false
endfunction
function Igx takes nothing returns boolean
local integer CGe=jte()
set gev[CGe]=GetTriggerUnit()
set gxv[CGe]=$F+GetUnitAbilityLevel(gev[CGe],GO)
call tKe(gev[CGe],hO)
call QIe(CGe,.5,true,function IFx)
return false
endfunction
function IGx takes nothing returns boolean
return GetSpellAbilityId()==GO and Igx()
endfunction
function Ihx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function IGx))
set t=null
endfunction
function IHx takes nothing returns boolean
local integer CGe=Qce()
if spe(gav[CGe])or not(GetUnitAbilityLevel((gav[CGe]),(jO))>0)then
call QDe()
call UnitRemoveAbility(gav[CGe],jO)
call u_e(gav[CGe],-gnv[CGe])
call Tje(gav[CGe],lx,-gVv[CGe])
set gav[CGe]=null
call jSe(CGe)
endif
return false
endfunction
function Ijx takes unit u,real r1,real r2 returns nothing
local integer CGe=jse()
set gav[CGe]=u
set gnv[CGe]=r1
set gVv[CGe]=r2
call tKe(gav[CGe],jO)
call u_e(gav[CGe],gnv[CGe])
call Tje(gav[CGe],lx,gVv[CGe])
call QIe(CGe,.03125,true,function IHx)
endfunction
function IJx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real r1=ude(u,4,1,HO)
local real r2=ude(u,.2,.02,HO)
if(GetUnitAbilityLevel((u),(jO))>0)then
call UnitRemoveAbility(u,jO)
else
call Ijx(u,r1,r2)
endif
set u=null
return false
endfunction
function Ikx takes nothing returns boolean
return GetSpellAbilityId()==HO and IJx()
endfunction
function IKx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function Ikx))
set t=null
endfunction
function Ilx takes nothing returns boolean
local integer CGe=Qce()
if gAv[CGe]>=gNv[CGe]then
call UnitRemoveBuffs(gRv[CGe],false,true)
endif
if gAv[CGe]==gNv[CGe]then
call UnitRemoveAbility(gRv[CGe],JO)
call Tje(gRv[CGe],5740,-.99)
endif
set gAv[CGe]=gAv[CGe]-1
if gAv[CGe]<=0 then
call QDe()
set gRv[CGe]=null
set BBe[gIv[CGe]]=false
call jQe(CGe)
endif
return false
endfunction
function ILx takes unit u,integer i returns nothing
local integer CGe=jqe()
set gRv[CGe]=u
set gIv[CGe]=i
set BBe[gIv[CGe]]=true
set gAv[CGe]=Ji[gIv[CGe]]
set gNv[CGe]=gAv[CGe]-3
call tKe(u,JO)
call Tje(u,5740,.99)
call QIe(CGe,1.,true,function Ilx)
endfunction
function Imx takes nothing returns boolean
local integer CGe=Qce()
if gDv[CGe]>$AA then
call Tse(gCv[CGe],gfv[CGe]*GetUnitState(gCv[CGe],UNIT_STATE_MAX_LIFE))
endif
if gDv[CGe]==$AA then
call UnitRemoveAbility(gCv[CGe],'A0QV')
endif
set gDv[CGe]=gDv[CGe]-1
if gDv[CGe]<=0 then
call QDe()
set gCv[CGe]=null
set kO[gdv[CGe]]=false
call jPe(CGe)
endif
return false
endfunction
function IMx takes unit u,integer i,real r returns nothing
local integer CGe=jpe()
set gCv[CGe]=u
set gdv[CGe]=i
set gDv[CGe]=$B4
set gfv[CGe]=r
call tKe(u,'A0QV')
call Tse(gCv[CGe],gfv[CGe]*GetUnitState(gCv[CGe],UNIT_STATE_MAX_LIFE))
call Qre(AddSpecialEffectTarget("Units\\NightElf\\Wisp\\WispExplode.mdl",u,"overhead"))
call QIe(CGe,1.,true,function Imx)
endfunction
function Ipx takes nothing returns boolean
local integer CGe=Qce()
if gjv[CGe]==$AF then
call UnitRemoveAbility(ghv[CGe],'A0QX')
call Tje(ghv[CGe],ox,-gJv[CGe])
endif
set gjv[CGe]=gjv[CGe]-1
if gjv[CGe]<=0 then
call QDe()
set ghv[CGe]=null
set KO[gHv[CGe]]=false
call jMe(CGe)
endif
return false
endfunction
function IPx takes unit u,integer i,real r returns nothing
local integer CGe=jme()
set ghv[CGe]=u
set gHv[CGe]=i
set gjv[CGe]=$B4
set gJv[CGe]=r
call tKe(u,'A0QX')
call Tje(ghv[CGe],ox,gJv[CGe])
call Qre(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl",u,"origin"))
call QIe(CGe,1.,true,function Ipx)
endfunction
function Iqx takes nothing returns boolean
local unit u=GetTriggerUnit()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
local real IQx=TKe(u,Qo)
local real Isx=TKe(u,7062)
local real TSe=TQe(u)
if(GetUnitAbilityLevel((u),('A0EC'))>0)then
if not BBe[i]and TSe<=35. and not(GetUnitAbilityLevel((u),('A03Z'))>0)and not(GetUnitAbilityLevel((u),('A04G'))>0)then
call ILx(u,i)
endif
endif
if TSe<=50 then
if not kO[i]and IQx>0 then
set kO[i]=true
call IMx(u,i,IQx)
endif
if not KO[i]and Isx>0 then
set KO[i]=true
call IPx(u,i,Isx)
endif
endif
set u=null
return false
endfunction
function ISx takes nothing returns boolean
return((IsUnitType((GetTriggerUnit()),UNIT_TYPE_HERO))and Iqx())!=null
endfunction
function Itx takes nothing returns boolean
local integer CGe=Qce()
set gMv[CGe]=gMv[CGe]-1
if gMv[CGe]<=0 or spe(gLv[CGe])then
call QDe()
call UnitRemoveAbility(gLv[CGe],'A0QZ')
call Tje(gLv[CGe],xx,-gpv[CGe])
set gLv[CGe]=null
set lO[gmv[CGe]]=false
call jLe(CGe)
endif
return false
endfunction
function ITx takes unit u,integer i,real r returns nothing
local integer CGe=jle()
set gLv[CGe]=u
set gmv[CGe]=i
set gMv[CGe]=R2I(5./ .03125)
set gpv[CGe]=r
call tKe(u,'A0QZ')
call Tje(gLv[CGe],xx,gpv[CGe])
call Qre(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl",u,"origin"))
call QIe(CGe,.03125,true,function Itx)
endfunction
function Iux takes nothing returns boolean
local integer CGe=Qce()
set gtv[CGe]=gtv[CGe]-1
if gtv[CGe]<=0 or spe(gsv[CGe])then
call QDe()
call UnitRemoveAbility(gsv[CGe],'A0R1')
call Tje(gsv[CGe],4888,-gTv[CGe])
set gsv[CGe]=null
set LO[gSv[CGe]]=false
call jKe(CGe)
endif
return false
endfunction
function IUx takes unit u,integer i,real r returns nothing
local integer CGe=jke()
set gsv[CGe]=u
set gSv[CGe]=i
set gtv[CGe]=R2I(5/ .03125)
set gTv[CGe]=r
call tKe(u,'A0R1')
call Tje(gsv[CGe],4888,gTv[CGe])
call Qre(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl",u,"origin"))
call QIe(CGe,.03125,true,function Iux)
endfunction
function Iwx takes nothing returns boolean
local unit u=GetAttacker()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
local real IWx=TKe(u,so)
local real Iyx=TKe(u,4620)
if not lO[i]and IWx>0 and GetRandomReal(0,'d')<=$A then
set lO[i]=true
call ITx(u,i,IWx)
endif
if not LO[i]and Iyx>0 and GetRandomReal(0,'d')<=$A then
set LO[i]=true
call IUx(u,i,Iyx)
endif
set u=null
return false
endfunction
function IYx takes nothing returns boolean
return((IsUnitType((GetAttacker()),UNIT_TYPE_HERO))and Iwx())!=null
endfunction
function Izx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function ISx))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function IYx))
set t=null
endfunction
function IZx takes nothing returns boolean
local integer CGe=Qce()
if gZv[CGe]==g0v[CGe]then
call Tje(gWv[CGe],4888,-gyv[CGe])
call Tje(gWv[CGe],5319,-gzv[CGe])
call Tje(gWv[CGe],vx,-gzv[CGe])
call TPe(gWv[CGe],-gYv[CGe])
call UnitRemoveAbility(gWv[CGe],mO)
endif
set gZv[CGe]=gZv[CGe]-1
if gZv[CGe]<=0 then
call QDe()
set MO[g_v[CGe]]=false
set gWv[CGe]=null
call jJe(CGe)
endif
return false
endfunction
function I_x takes unit u,integer lv,integer i returns nothing
local integer CGe=jje()
set gWv[CGe]=u
set gyv[CGe]=I2R(R2I((.13+.02*lv)*TKe(u,4888)))
set gYv[CGe]=$D+2*lv
set gzv[CGe]=.16+.04*lv
set gZv[CGe]=52-2*lv
set g0v[CGe]=gZv[CGe]-$A
set g_v[CGe]=i
set MO[g_v[CGe]]=true
call Tje(gWv[CGe],5319,gzv[CGe])
call Tje(gWv[CGe],vx,gzv[CGe])
call Tje(gWv[CGe],4888,gyv[CGe])
call TPe(gWv[CGe],gYv[CGe])
call tKe(gWv[CGe],mO)
call QIe(CGe,1.,true,function IZx)
endfunction
function I0x takes nothing returns boolean
local unit u=GetAttacker()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
if not MO[i]then
call I_x(u,BUe[(i)*(20)+$A],i)
endif
set u=null
return false
endfunction
function I1x takes nothing returns boolean
return(GetUnitAbilityLevel((GetAttacker()),('A059'))>0)and I0x()
endfunction
function I2x takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function I1x))
set t=null
endfunction
function I3x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set g8v[CGe]=(((g8v[CGe])*1.)+((PO)*1.)*Cos(((Gxv[CGe])*1.)*bj_DEGTORAD))
set g9v[CGe]=(((g9v[CGe])*1.)+((PO)*1.)*Sin(((Gxv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(g6v[CGe],g8v[CGe],g9v[CGe],Gev[CGe])
call GroupEnumUnitsInRange(sv,g8v[CGe],g9v[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,g5v[CGe])then
call uee(g4v[CGe],n,true,Gvv[CGe],Gvv[CGe],THe(g4v[CGe]))
call yke(g4v[CGe],n,'d',2.)
call GroupAddUnit(g5v[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set g7v[CGe]=g7v[CGe]-1
if g7v[CGe]<=0 then
call QDe()
call Qre(g6v[CGe])
call Qne(g5v[CGe])
set g5v[CGe]=null
set g6v[CGe]=null
set g4v[CGe]=null
call jHe(CGe)
endif
return false
endfunction
function I4x takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=jhe()
set g4v[CGe]=u
set Gxv[CGe]=a
set g8v[CGe]=x
set g9v[CGe]=y
set g7v[CGe]=R2I(pO/ PO)
set g6v[CGe]=AddSpecialEffect("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveMissile.mdl",g8v[CGe],g9v[CGe])
set Gev[CGe]=sxe(g8v[CGe],g9v[CGe])+'d'
set Gvv[CGe]=d
set g5v[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((g6v[CGe]),((Gxv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((g6v[CGe]),((.7)*1.))
call BlzSetSpecialEffectZ(g6v[CGe],Gev[CGe])
call QIe(CGe,.03125,true,function I3x)
endfunction
function I5x takes nothing returns boolean
local integer CGe=Qce()
local integer rd=GetRandomInt(0,8)
local real x=(((GEv[CGe])*1.)+((rd*'d')*1.)*Cos(((GOv[CGe]+90)*1.)*bj_DEGTORAD))
local real y=(((GXv[CGe])*1.)+((rd*'d')*1.)*Sin(((GOv[CGe]+90)*1.)*bj_DEGTORAD))
call I4x(Gav[CGe],Gnv[CGe],x,y,GOv[CGe])
set GVv[CGe]=GVv[CGe]-1
if GVv[CGe]<=0 then
call QDe()
set Gav[CGe]=null
call jGe(CGe)
endif
return false
endfunction
function I6x takes unit u,real d returns nothing
local integer CGe=jge()
set Gav[CGe]=u
set GVv[CGe]=60
set Gnv[CGe]=d
set GOv[CGe]=GetUnitFacing(u)
set GEv[CGe]=(((GetUnitX(u))*1.)+((300)*1.)*Cos(((GOv[CGe]+$B4)*1.)*bj_DEGTORAD))
set GXv[CGe]=(((GetUnitY(u))*1.)+((300)*1.)*Sin(((GOv[CGe]+$B4)*1.)*bj_DEGTORAD))
set GEv[CGe]=(((GEv[CGe])*1.)+((400)*1.)*Cos(((GOv[CGe]-90)*1.)*bj_DEGTORAD))
set GXv[CGe]=(((GXv[CGe])*1.)+((400)*1.)*Sin(((GOv[CGe]-90)*1.)*bj_DEGTORAD))
call QIe(CGe,.12,true,function I5x)
endfunction
function I7x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Ggv[CGe]=Ggv[CGe]+1
if Ggv[CGe]>16 then
set GCv[CGe]=(((GCv[CGe])*1.)+((QO)*1.)*Cos(((GFv[CGe])*1.)*bj_DEGTORAD))
set Gdv[CGe]=(((Gdv[CGe])*1.)+((QO)*1.)*Sin(((GFv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(Gbv[CGe],GCv[CGe],Gdv[CGe],Gfv[CGe])
call BlzSetSpecialEffectPosition(GBv[CGe],GCv[CGe],Gdv[CGe],Gfv[CGe]-30)
call GroupEnumUnitsInRange(sv,GCv[CGe],Gdv[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,GGv[CGe])then
call GroupAddUnit(GGv[CGe],n)
call yke(GNv[CGe],n,'d',3.)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TYK_bangtamtientu2.mdl"),(n),"chest"))
call uee(GNv[CGe],n,true,GDv[CGe],GDv[CGe],THe(GNv[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set Gcv[CGe]=Gcv[CGe]-1
if Gcv[CGe]<=0 then
call QDe()
call BlzSetSpecialEffectScale((Gbv[CGe]),((.001)*1.))
call Qre(Gbv[CGe])
call Qre(GBv[CGe])
call Qne(GGv[CGe])
set GGv[CGe]=null
set GBv[CGe]=null
set Gbv[CGe]=null
set GNv[CGe]=null
call jFe(CGe)
endif
return false
endfunction
function I8x takes unit u,real x,real y,real d,real a returns nothing
local integer CGe=jfe()
set GNv[CGe]=u
set GCv[CGe]=x
set Gdv[CGe]=y
set GFv[CGe]=a
set GDv[CGe]=d
set Gfv[CGe]=sxe(GCv[CGe],Gdv[CGe])
set Gbv[CGe]=AddSpecialEffect("war3mapImported\\TYK_bangtamtientu4.mdl",GCv[CGe],Gdv[CGe])
set Gcv[CGe]=R2I(qO/ QO)
set Ggv[CGe]=0
set GGv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((Gbv[CGe]),((GFv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((Gbv[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(Gbv[CGe],Gfv[CGe])
set GBv[CGe]=AddSpecialEffect("war3mapImported\\TYK_bangtamtientu2.mdl",GCv[CGe],Gdv[CGe])
call BlzSetSpecialEffectYaw((GBv[CGe]),((GFv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((GBv[CGe]),((3.)*1.))
call BlzSetSpecialEffectZ(GBv[CGe],Gfv[CGe]-30)
call QIe(CGe,.03125,true,function I7x)
endfunction
function I9x takes nothing returns boolean
local integer CGe=Qce()
local real x=(((Gkv[CGe])*1.)+((600)*1.)*Cos(((0)*1.)*bj_DEGTORAD))
local real y=(((GKv[CGe])*1.)+((600)*1.)*Sin(((0)*1.)*bj_DEGTORAD))
call I8x(GLv[CGe],x,y,Glv[CGe],soe(x,y,Gkv[CGe],GKv[CGe]))
set x=(((Gkv[CGe])*1.)+((600)*1.)*Cos(((72)*1.)*bj_DEGTORAD))
set y=(((GKv[CGe])*1.)+((600)*1.)*Sin(((72)*1.)*bj_DEGTORAD))
call I8x(GLv[CGe],x,y,Glv[CGe],soe(x,y,Gkv[CGe],GKv[CGe]))
set x=(((Gkv[CGe])*1.)+((600)*1.)*Cos((($90)*1.)*bj_DEGTORAD))
set y=(((GKv[CGe])*1.)+((600)*1.)*Sin((($90)*1.)*bj_DEGTORAD))
call I8x(GLv[CGe],x,y,Glv[CGe],soe(x,y,Gkv[CGe],GKv[CGe]))
set x=(((Gkv[CGe])*1.)+((600)*1.)*Cos((($D8)*1.)*bj_DEGTORAD))
set y=(((GKv[CGe])*1.)+((600)*1.)*Sin((($D8)*1.)*bj_DEGTORAD))
call I8x(GLv[CGe],x,y,Glv[CGe],soe(x,y,Gkv[CGe],GKv[CGe]))
set x=(((Gkv[CGe])*1.)+((600)*1.)*Cos(((288)*1.)*bj_DEGTORAD))
set y=(((GKv[CGe])*1.)+((600)*1.)*Sin(((288)*1.)*bj_DEGTORAD))
call I8x(GLv[CGe],x,y,Glv[CGe],soe(x,y,Gkv[CGe],GKv[CGe]))
set GJv[CGe]=GJv[CGe]-1
if GJv[CGe]<=0 then
call QDe()
set GLv[CGe]=null
call jDe(CGe)
endif
return false
endfunction
function Avx takes unit u,real d,real x,real y returns nothing
local integer CGe=jde()
set GJv[CGe]=5
set GLv[CGe]=u
set Gkv[CGe]=x
set GKv[CGe]=y
set Glv[CGe]=d
call QIe(CGe,1.,true,function I9x)
endfunction
function Aex takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Gsv[CGe]=(((Gsv[CGe])*1.)+((SO)*1.)*Cos(((Guv[CGe])*1.)*bj_DEGTORAD))
set GSv[CGe]=(((GSv[CGe])*1.)+((SO)*1.)*Sin(((Guv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(Gqv[CGe],Gsv[CGe],GSv[CGe],GTv[CGe])
set GUv[CGe]=GUv[CGe]+1
if GUv[CGe]==30 then
set GUv[CGe]=0
call Qre(AddSpecialEffect(("war3mapImported\\NMK_effect1.mdl"),((Gsv[CGe])*1.),((GSv[CGe])*1.)))
call GroupEnumUnitsInRange(sv,Gsv[CGe],GSv[CGe],400,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yke(GPv[CGe],n,'d',3.)
call yHe(GPv[CGe],n,'d',1.5)
call uee(GPv[CGe],n,true,Gtv[CGe],Gtv[CGe],THe(GPv[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set GQv[CGe]=GQv[CGe]-1
if GQv[CGe]<=0 then
call QDe()
call BlzSetSpecialEffectScale((Gqv[CGe]),((.001)*1.))
call Qre(Gqv[CGe])
set Gqv[CGe]=null
set GPv[CGe]=null
call jCe(CGe)
endif
return false
endfunction
function Axx takes unit u,real d,real a returns nothing
local integer CGe=jce()
set GPv[CGe]=u
set Gsv[CGe]=GetUnitX(u)
set GSv[CGe]=GetUnitY(u)
set Guv[CGe]=a
set Gtv[CGe]=d
set GTv[CGe]=sxe(Gsv[CGe],GSv[CGe])+50
set Gqv[CGe]=AddSpecialEffect("war3mapImported\\EFF_hoasentim.mdl",Gsv[CGe],GSv[CGe])
set GQv[CGe]=R2I(sO/ SO)
set GUv[CGe]=0
call BlzSetSpecialEffectYaw((Gqv[CGe]),((Guv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((Gqv[CGe]),((2.)*1.))
call BlzSetSpecialEffectZ(Gqv[CGe],GTv[CGe])
call QIe(CGe,.03125,true,function Aex)
endfunction
function Aox takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
if not spe(G3v[CGe])then
set GZv[CGe]=soe(G0v[CGe],G1v[CGe],GetUnitX(G3v[CGe]),GetUnitY(G3v[CGe]))
call BlzSetSpecialEffectYaw((G5v[CGe]),((GZv[CGe])*1.)*bj_DEGTORAD)
endif
set G0v[CGe]=(((G0v[CGe])*1.)+((tO)*1.)*Cos(((GZv[CGe])*1.)*bj_DEGTORAD))
set G1v[CGe]=(((G1v[CGe])*1.)+((tO)*1.)*Sin(((GZv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(G5v[CGe],G0v[CGe],G1v[CGe],G_v[CGe])
call GroupEnumUnitsInRange(sv,G0v[CGe],G1v[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Gzv[CGe])then
if n==G3v[CGe]then
set G4v[CGe]=0
endif
call Qre(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\OrbOfDeath\\OrbOfDeathMissile.mdl",n,"chest"))
call GroupAddUnit(Gzv[CGe],n)
call uee(GYv[CGe],n,true,G2v[CGe],G2v[CGe],THe(GYv[CGe]))
call yke(GYv[CGe],n,'d',2.5)
endif
call GroupRemoveUnit(sv,n)
endloop
set G4v[CGe]=G4v[CGe]-1
if G4v[CGe]<=0 then
call QDe()
call Qre(G5v[CGe])
call Qne(Gzv[CGe])
set G3v[CGe]=null
set Gzv[CGe]=null
set G5v[CGe]=null
set GYv[CGe]=null
call jBe(CGe)
endif
return false
endfunction
function Arx takes unit u,real d,real x,real y,real a,unit v returns nothing
local integer CGe=jbe()
set GYv[CGe]=u
set G3v[CGe]=v
set GZv[CGe]=a
set G0v[CGe]=x
set G1v[CGe]=y
set G2v[CGe]=d
set G5v[CGe]=AddSpecialEffect("Abilities\\Spells\\Undead\\OrbOfDeath\\OrbOfDeathMissile.mdl",G0v[CGe],G1v[CGe])
set G_v[CGe]=sxe(G0v[CGe],G1v[CGe])+'d'
set G4v[CGe]=50
set Gzv[CGe]=CreateGroup()
call BlzSetSpecialEffectScale(G5v[CGe],1.)
call BlzSetSpecialEffectZ(G5v[CGe],G_v[CGe])
call BlzSetSpecialEffectYaw(G5v[CGe],GZv[CGe]*bj_DEGTORAD)
call QIe(CGe,.03125,true,function Aox)
endfunction
function Aix takes unit u,real d,unit v returns nothing
local real x0=GetUnitX(u)
local real y0=GetUnitY(u)
local real a=soe(x0,y0,GetUnitX(v),GetUnitY(v))
local real x=(((x0)*1.)+(('d')*1.)*Cos(((a)*1.)*bj_DEGTORAD))
local real y=(((y0)*1.)+(('d')*1.)*Sin(((a)*1.)*bj_DEGTORAD))
call Arx(u,d,x,y,a,v)
set x=(((x0)*1.)+(($C8)*1.)*Cos(((a+90)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+(($C8)*1.)*Sin(((a+90)*1.)*bj_DEGTORAD))
call Arx(u,d,x,y,a,v)
set x=(((x0)*1.)+(($C8)*1.)*Cos(((a-90)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+(($C8)*1.)*Sin(((a-90)*1.)*bj_DEGTORAD))
call Arx(u,d,x,y,a,v)
endfunction
function Aax takes nothing returns boolean
local integer CGe=Qce()
call uee(hev[CGe],hxv[CGe],true,0,hvv[CGe],'B007')
set G9v[CGe]=G9v[CGe]-1
if G9v[CGe]<=0 or spe(hxv[CGe])or spe(hev[CGe])then
call QDe()
set hev[CGe]=null
set hxv[CGe]=null
call jNe(CGe)
endif
return false
endfunction
function Anx takes unit u,unit v,real d returns nothing
local integer CGe=jAe()
set hev[CGe]=u
set hxv[CGe]=v
set hvv[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set G9v[CGe]=5
call QIe(CGe,1.,true,function Aax)
endfunction
function AVx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
if hEv[CGe]==$F then
call Qre(AddSpecialEffect(("war3mapImported\\NDD_chucapeffect.mdl"),((GetUnitX(hav[CGe]))*1.),((GetUnitY(hav[CGe]))*1.)))
call GroupEnumUnitsInRange(sv,GetUnitX(hav[CGe]),GetUnitY(hav[CGe]),400,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,hOv[CGe])and not spe(n)and not tOe(n)then
call Qre(AddSpecialEffectTarget(("war3mapImported\\NDD_vancoex.mdl"),(n),"origin"))
call uee(hav[CGe],n,true,hnv[CGe],hVv[CGe],THe(hav[CGe]))
call Anx(hav[CGe],n,hVv[CGe])
set c=c+1
if c>=$A then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set hEv[CGe]=hEv[CGe]-1
if hEv[CGe]<=0 then
call QDe()
set TO[hXv[CGe]]=false
set hav[CGe]=null
set hOv[CGe]=null
call jIe(CGe)
endif
return false
endfunction
function AEx takes unit u,integer lv,integer i returns nothing
local integer CGe=jRe()
set hav[CGe]=u
set hnv[CGe]=uBe(u,1.05+.45*lv)
set hVv[CGe]=uce(u,$AF0+$4B0*lv,'B007')
set hEv[CGe]=$F
set hOv[CGe]=GetOwningPlayer(u)
set hXv[CGe]=i
set TO[hXv[CGe]]=true
call QIe(CGe,1.,true,function AVx)
endfunction
function AXx takes nothing returns boolean
local unit u=GetTriggerUnit()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
if not TO[i]and GetRandomReal(0,'d')<=18+2*BUe[(i)*(20)+5]then
call AEx(u,BUe[(i)*(20)+5],i)
endif
set u=null
return false
endfunction
function AOx takes nothing returns boolean
return(GetUnitAbilityLevel((GetTriggerUnit()),('A06A'))>0)and AXx()
endfunction
function ARx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function AOx))
set t=null
endfunction
function AIx takes nothing returns boolean
local integer CGe=Qce()
set hNv[CGe]=hNv[CGe]-1
if hNv[CGe]<=0 or spe(hBv[CGe])then
call QDe()
if not spe(hBv[CGe])then
call uee(hbv[CGe],hBv[CGe],false,hcv[CGe],hCv[CGe],THe(hbv[CGe]))
endif
set hbv[CGe]=null
set hBv[CGe]=null
call jOe(CGe)
endif
return false
endfunction
function AAx takes unit u,unit v,real d1,real d2,integer t returns nothing
local integer CGe=jXe()
set hbv[CGe]=u
set hBv[CGe]=v
set hcv[CGe]=d1
set hCv[CGe]=d2
set hNv[CGe]=t
call QIe(CGe,.3,true,function AIx)
endfunction
function ANx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=1.
set hqv[CGe]=hqv[CGe]+1
if hqv[CGe]==$A then
set hqv[CGe]=0
if not spe(hgv[CGe])then
set hMv[CGe]=soe(hJv[CGe],hkv[CGe],GetUnitX(hgv[CGe]),GetUnitY(hgv[CGe]))
call BlzSetSpecialEffectYaw((hHv[CGe]),((hMv[CGe])*1.)*bj_DEGTORAD)
endif
endif
set hJv[CGe]=(((hJv[CGe])*1.)+((uO)*1.)*Cos(((hMv[CGe])*1.)*bj_DEGTORAD))
set hkv[CGe]=(((hkv[CGe])*1.)+((uO)*1.)*Sin(((hMv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(hHv[CGe],hJv[CGe],hkv[CGe],hmv[CGe])
if hPv[CGe]<7 then
call GroupEnumUnitsInRange(sv,hJv[CGe],hkv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,hGv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,hhv[CGe])then
call GroupAddUnit(hhv[CGe],n)
if BUe[(hQv[CGe])*(20)+$A]>0 and GetRandomReal(0,'d')<=6+2*BUe[(hQv[CGe])*(20)+$A]then
set r=1.14+.04*BUe[(hQv[CGe])*(20)+$A]
endif
call Qre(AddSpecialEffectTarget(("war3mapImported\\CBB_firetarget.mdl"),(n),"origin"))
if hsv[CGe]==1 then
call yKe(hFv[CGe],n,hLv[CGe],2)
call uee(hFv[CGe],n,false,hKv[CGe]*r,hlv[CGe]*r,THe(hFv[CGe]))
if(GetUnitAbilityLevel((hFv[CGe]),(ME))>0)and not(IsUnitType((n),UNIT_TYPE_TAUREN))and GetRandomReal(0,'d')<=(8+BUe[(hQv[CGe])*(20)+9])then
call s5e(n,$96,.3,hpv[CGe],false,false)
endif
else
call yHe(hFv[CGe],n,hLv[CGe],1)
call AAx(hFv[CGe],n,hKv[CGe]*r,hlv[CGe]*r,hsv[CGe])
endif
set hPv[CGe]=hPv[CGe]+1
if hPv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set hjv[CGe]=hjv[CGe]-1
if hjv[CGe]<=0 then
call QDe()
call Qre(hHv[CGe])
call Qne(hhv[CGe])
set hhv[CGe]=null
set hHv[CGe]=null
set hFv[CGe]=null
set hgv[CGe]=null
set hGv[CGe]=null
call jEe(CGe)
endif
return false
endfunction
function Abx takes unit u,unit v,real d1,real d2,real r,real x,real y,real a,real aQx,real b,integer s returns nothing
local integer CGe=jVe()
set hFv[CGe]=u
set hgv[CGe]=v
set hMv[CGe]=aQx
set hJv[CGe]=(((x)*1.)+((b)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set hkv[CGe]=(((y)*1.)+((b)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set hjv[CGe]=50
set hpv[CGe]=aQx
set hPv[CGe]=0
set hqv[CGe]=0
set hGv[CGe]=GetOwningPlayer(hFv[CGe])
set hhv[CGe]=CreateGroup()
set hHv[CGe]=AddSpecialEffect("war3mapImported\\CBB_bong.mdl",hJv[CGe],hkv[CGe])
set hmv[CGe]=sxe(hJv[CGe],hkv[CGe])+'d'
set hKv[CGe]=d1
set hlv[CGe]=d2
set hLv[CGe]=r
set hsv[CGe]=s
set hQv[CGe]=GetPlayerId(hGv[CGe])+1
call BlzSetSpecialEffectYaw((hHv[CGe]),((hMv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((hHv[CGe]),((1.7)*1.))
call BlzSetSpecialEffectZ(hHv[CGe],hmv[CGe])
call QIe(CGe,.03125,true,function ANx)
endfunction
function ABx takes unit u,real d,unit v,real r returns nothing
local real d1=uBe(u,ude(u,2.,.6,UO))
local real d2=uce(u,ude(u,$5DC,450,UO),'B009')
local real rz=ude(u,$A,2,UO)
local real x0=GetUnitX(u)
local real y0=GetUnitY(u)
local real a=soe(x0,y0,GetUnitX(v),GetUnitY(v))
local real x=(((x0)*1.)+((50)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
local real y=(((y0)*1.)+((50)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
call Qre(AddSpecialEffectTarget("war3mapImported\\CBB_thienhavocaucaster.mdl",u,"chest"))
set d1=d1*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A08R'))
set d2=d2*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A08R'))
if r>0 then
set d1=d
set d2=d
set rz=r
endif
call Abx(u,v,d1,d2,rz,x,y,a,a,$A,1)
call Abx(u,v,d1,d2,rz,x,y,a-90,a,70,2)
call Abx(u,v,d1,d2,rz,x,y,a+90,a,70,3)
endfunction
function Acx takes nothing returns boolean
local integer CGe=Qce()
if(GetUnitAbilityLevel((hyv[CGe]),(ln))>0)then
call uee(hwv[CGe],hyv[CGe],false,0,hUv[CGe]*(1.07+.03*BUe[(hWv[CGe])*(20)+5]),'B007')
else
call uee(hwv[CGe],hyv[CGe],false,0,hUv[CGe],'B007')
endif
set huv[CGe]=huv[CGe]-1
if huv[CGe]<=0 or spe(hyv[CGe])or spe(hwv[CGe])then
call QDe()
set hwv[CGe]=null
set hyv[CGe]=null
call jne(CGe)
endif
return false
endfunction
function ACx takes unit u,unit v,real d returns nothing
local integer CGe=jae()
set hwv[CGe]=u
set hyv[CGe]=v
set hUv[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set huv[CGe]=2
set hWv[CGe]=(GetPlayerId(GetOwningPlayer((hwv[CGe])))+1)
call QIe(CGe,1.,true,function Acx)
endfunction
function Adx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
if not spe(h0v[CGe])then
set Hxv[CGe]=soe(h1v[CGe],h2v[CGe],GetUnitX(h0v[CGe]),GetUnitY(h0v[CGe]))
call BlzSetSpecialEffectYaw((h7v[CGe]),((Hxv[CGe])*1.)*bj_DEGTORAD)
endif
set h1v[CGe]=(((h1v[CGe])*1.)+((wO)*1.)*Cos(((Hxv[CGe])*1.)*bj_DEGTORAD))
set h2v[CGe]=(((h2v[CGe])*1.)+((wO)*1.)*Sin(((Hxv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition((h7v[CGe]),((h1v[CGe])*1.),((h2v[CGe])*1.),((h8v[CGe])*1.))
if h9v[CGe]<7 then
call GroupEnumUnitsInRange(sv,h1v[CGe],h2v[CGe],90,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Hvv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Hev[CGe])then
call yHe(h_v[CGe],n,h5v[CGe],1.)
call GroupAddUnit(Hev[CGe],n)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\SkeletalMageMissile\\SkeletalMageMissile.mdl"),(n),"chest"))
call uee(h_v[CGe],n,false,h3v[CGe],h4v[CGe],THe(h_v[CGe]))
call ACx(h_v[CGe],n,h4v[CGe])
if n==h0v[CGe]then
set h6v[CGe]=5
endif
set h9v[CGe]=h9v[CGe]+1
if h9v[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
else
set h6v[CGe]=0
endif
set n=null
set h6v[CGe]=h6v[CGe]-1
if h6v[CGe]<=0 then
call QDe()
call Qre(h7v[CGe])
call Qne(Hev[CGe])
set Hev[CGe]=null
set h7v[CGe]=null
set h_v[CGe]=null
set h0v[CGe]=null
set Hvv[CGe]=null
call jie(CGe)
endif
return false
endfunction
function ADx takes unit u,real d,unit v,real r returns nothing
local integer CGe=jre()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real a=soe(x,y,GetUnitX(v),GetUnitY(v))
if spe(v)then
set a=GetUnitFacing(u)
endif
set h_v[CGe]=u
set h0v[CGe]=v
set h1v[CGe]=(((x)*1.)+((80)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set h2v[CGe]=(((y)*1.)+((80)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set h3v[CGe]=uBe(u,ude(u,1.,.3,WO))
set h4v[CGe]=uce(u,ude(u,$3E8,300,WO),'B007')
set h5v[CGe]=ude(u,$F,2,WO)
set h7v[CGe]=AddSpecialEffect("Abilities\\Weapons\\SkeletalMageMissile\\SkeletalMageMissile.mdl",h1v[CGe],h2v[CGe])
set h6v[CGe]=40
set h8v[CGe]=sxe(h1v[CGe],h2v[CGe])+'d'
set h9v[CGe]=0
set Hvv[CGe]=GetOwningPlayer(h_v[CGe])
set Hev[CGe]=CreateGroup()
set Hxv[CGe]=a
if r>0 then
set h3v[CGe]=d
set h4v[CGe]=d
set h5v[CGe]=r
endif
call BlzSetSpecialEffectScale((h7v[CGe]),((1.5)*1.))
call BlzSetSpecialEffectZ(h7v[CGe],h8v[CGe])
call BlzSetSpecialEffectYaw((h7v[CGe]),((a)*1.)*bj_DEGTORAD)
call QIe(CGe,.03125,true,function Adx)
endfunction
function Afx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=1.
local integer c=0
call GroupEnumUnitsInRange(sv,HRv[CGe],HIv[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,HEv[CGe])and not spe(n)and not tOe(n)then
call Qre(AddSpecialEffectTarget(("war3mapImported\\CLK_tranphai2.mdl"),(n),"chest"))
call yle(HVv[CGe],n,HOv[CGe],1.)
if(GetUnitAbilityLevel((n),(uE))>0)then
set r=1.26+.04*GetUnitAbilityLevel(HVv[CGe],TE)
endif
call uee(HVv[CGe],n,true,Hnv[CGe]*r,HXv[CGe]*r,THe(HVv[CGe]))
set c=c+1
if c>=5 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set Hav[CGe]=Hav[CGe]-1
if Hav[CGe]<=0 or spe(HVv[CGe])then
call QDe()
set HVv[CGe]=null
set HEv[CGe]=null
call joe(CGe)
endif
return false
endfunction
function AFx takes unit u,player p,real d1,real d2,real r,real x,real y returns nothing
local integer CGe=jxe()
set HVv[CGe]=u
set Hnv[CGe]=d1
set HXv[CGe]=d2
set HOv[CGe]=r
set HRv[CGe]=x
set HIv[CGe]=y
set HEv[CGe]=p
set Hav[CGe]=3
call Qre(AddSpecialEffect(("war3mapImported\\CLK_tranphai33.mdl"),((x)*1.),((y)*1.)))
call QIe(CGe,.25,true,function Afx)
endfunction
function Agx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set HDv[CGe]=(((HDv[CGe])*1.)+((YO)*1.)*Cos(((HHv[CGe])*1.)*bj_DEGTORAD))
set Hfv[CGe]=(((Hfv[CGe])*1.)+((YO)*1.)*Sin(((HHv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(HCv[CGe],HDv[CGe],Hfv[CGe],Hhv[CGe])
if Hjv[CGe]<7 then
call GroupEnumUnitsInRange(sv,HDv[CGe],Hfv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Hcv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,HJv[CGe])then
call GroupAddUnit(HJv[CGe],n)
call AFx(HBv[CGe],Hcv[CGe],HFv[CGe],Hgv[CGe],HGv[CGe],GetUnitX(n),GetUnitY(n))
set Hjv[CGe]=Hjv[CGe]+1
if Hjv[CGe]>=2 then
call GroupClear(sv)
set Hdv[CGe]=0
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set Hdv[CGe]=Hdv[CGe]-1
if Hdv[CGe]<=0 then
call QDe()
call Qre(HCv[CGe])
call Qne(HJv[CGe])
set HJv[CGe]=null
set HCv[CGe]=null
set HBv[CGe]=null
set Hcv[CGe]=null
call jee(CGe)
endif
return false
endfunction
function AGx takes unit u,real d1,real d2,real r,real x,real y,real a returns nothing
local integer CGe=jve()
set HBv[CGe]=u
set HHv[CGe]=a
set HDv[CGe]=x
set Hfv[CGe]=y
set Hdv[CGe]=R2I(zO/ YO)
set Hhv[CGe]=sxe(HDv[CGe],Hfv[CGe])+'d'
set HFv[CGe]=d1
set Hgv[CGe]=d2
set HGv[CGe]=r
set Hcv[CGe]=GetOwningPlayer(u)
set HJv[CGe]=CreateGroup()
set Hjv[CGe]=0
set HCv[CGe]=AddSpecialEffect("war3mapImported\\CLK_tranphai1.mdl",HDv[CGe],Hfv[CGe])
call BlzSetSpecialEffectYaw((HCv[CGe]),((HHv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((HCv[CGe]),((1.5)*1.))
call BlzSetSpecialEffectZ(HCv[CGe],Hhv[CGe])
call QIe(CGe,.03125,true,function Agx)
endfunction
function Ahx takes unit u,real d,unit v,real rz returns nothing
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real a=soe(x,y,GetUnitX(v),GetUnitY(v))
local real x2=(((x)*1.)+((60)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
local real y2=(((y)*1.)+((60)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
local real d1=uBe(u,ude(u,2.5,.75,yO))
local real d2=uce(u,ude(u,$9C4,750,yO),'B00A')
local real r=ude(u,20,2,yO)
set d1=d1*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A0BM'))
set d2=d2*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A0BM'))
call Qre(AddSpecialEffectTarget(("war3mapImported\\CLK_tranphai2.mdl"),(u),"chest"))
call Qre(AddSpecialEffectTarget("war3mapImported\\CLK_tranphai2.mdl",u,"hand right"))
if rz>0 then
set d1=d
set d2=d
set r=rz
endif
call AGx(u,d1,d2,r,x,y,a)
endfunction
function AHx takes nothing returns boolean
local integer CGe=Qce()
set HLv[CGe]=HLv[CGe]-1
if HLv[CGe]<=0 then
call QDe()
call Qre(Hmv[CGe])
set Hmv[CGe]=null
call H9e(CGe)
endif
return false
endfunction
function Ajx takes real x,real y,real a returns nothing
local integer CGe=H8e()
set HLv[CGe]=R2I(.35/ .03125)
set Hmv[CGe]=AddSpecialEffect("war3mapImported\\DTC_Img.mdx",x,y)
call BlzSetSpecialEffectScale((Hmv[CGe]),((.85)*1.))
call BlzSetSpecialEffectTimeScale((Hmv[CGe]),((1.5)*1.))
call BlzSetSpecialEffectAlpha((Hmv[CGe]),($96))
call BlzSetSpecialEffectYaw((Hmv[CGe]),((a)*1.)*bj_DEGTORAD)
call QIe(CGe,.03125,true,function AHx)
endfunction
function AJx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
if Hsv[CGe]==2 then
call Ajx(GetUnitX(Hqv[CGe]),GetUnitY(Hqv[CGe]),GetUnitFacing(Hqv[CGe]))
call Qre(AddSpecialEffectTarget("war3mapImported\\DTK_effect.mdl",Hqv[CGe],"hand right"))
call Qre(AddSpecialEffectTarget("war3mapImported\\DTK_effect.mdl",Hqv[CGe],"hand left"))
endif
call GroupEnumUnitsInRange(sv,HSv[CGe],Htv[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,HQv[CGe])and not spe(n)and not tOe(n)then
call yHe(Hqv[CGe],n,HUv[CGe],.5)
call yke(Hqv[CGe],n,HUv[CGe],2.)
call Qre(AddSpecialEffect(("war3mapImported\\DTC_tranphai22.mdl"),((GetUnitX(n))*1.),((GetUnitY(n))*1.)))
call uee(Hqv[CGe],n,false,HTv[CGe],Huv[CGe],THe(Hqv[CGe]))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set Hsv[CGe]=Hsv[CGe]-1
if Hsv[CGe]<=0 then
call QDe()
call Qre(Hwv[CGe])
set Hwv[CGe]=null
set Hqv[CGe]=null
set HQv[CGe]=null
call H7e(CGe)
endif
return false
endfunction
function Akx takes unit u,real d,unit v,real r returns nothing
local integer CGe=H6e()
set Hqv[CGe]=u
set HSv[CGe]=GetUnitX(v)
set Htv[CGe]=GetUnitY(v)
set Hsv[CGe]=3
set HTv[CGe]=uBe(u,ude(u,3.,.9,ZO))
set Huv[CGe]=uce(u,ude(u,$BB8,900,ZO),'B008')
set HUv[CGe]=ude(u,20,2,ZO)
set HQv[CGe]=GetOwningPlayer(Hqv[CGe])
set HTv[CGe]=HTv[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A0RI'))
set Huv[CGe]=Huv[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A0RI'))
set Hwv[CGe]=AddSpecialEffect("war3mapImported\\DTC_tranphai1.mdl",HSv[CGe],Htv[CGe])
call BlzSetSpecialEffectScale((Hwv[CGe]),((.5)*1.))
call BlzSetSpecialEffectZ(Hwv[CGe],sxe(HSv[CGe],Htv[CGe])+35)
if r>0 then
set HTv[CGe]=d
set Huv[CGe]=d
set HUv[CGe]=r
endif
call Ajx(GetUnitX(u),GetUnitY(u),GetUnitFacing(Hqv[CGe]))
call Qre(AddSpecialEffectTarget("war3mapImported\\DTK_effect.mdl",Hqv[CGe],"hand right"))
call Qre(AddSpecialEffectTarget("war3mapImported\\DTK_effect.mdl",Hqv[CGe],"hand left"))
call QIe(CGe,.1667,true,function AJx)
endfunction
function AKx takes nothing returns boolean
local integer CGe=Qce()
if spe(Hzv[CGe])or not(GetUnitAbilityLevel((Hzv[CGe]),(eR))>0)then
call QDe()
call UnitRemoveAbility(Hzv[CGe],eR)
call u_e(Hzv[CGe],-HZv[CGe])
call Tje(Hzv[CGe],7185,-H_v[CGe])
set Hzv[CGe]=null
call H5e(CGe)
endif
return false
endfunction
function Alx takes unit u,real r1,real r2 returns nothing
local integer CGe=H4e()
set Hzv[CGe]=u
set HZv[CGe]=r1
set H_v[CGe]=r2
set H0v[CGe]=(GetPlayerId(GetOwningPlayer((u)))+1)
call tKe(Hzv[CGe],eR)
call u_e(Hzv[CGe],HZv[CGe])
call Tje(Hzv[CGe],7185,H_v[CGe])
call QIe(CGe,.03125,true,function AKx)
endfunction
function ALx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real r1=ude(u,4,1,vR)
local real r2=ude(u,'d',20,vR)
if(GetUnitAbilityLevel((u),(eR))>0)then
call UnitRemoveAbility(u,eR)
else
call Alx(u,r1,r2)
endif
set u=null
return false
endfunction
function Amx takes nothing returns boolean
return GetSpellAbilityId()==vR and ALx()
endfunction
function AMx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function Amx))
set t=null
endfunction
function Apx takes nothing returns boolean
local integer CGe=Qce()
set H4v[CGe]=H4v[CGe]-1
if H4v[CGe]<=0 or spe(H5v[CGe])then
call QDe()
call UnitRemoveAbility(H5v[CGe],oR)
set H5v[CGe]=null
call H3e(CGe)
endif
return false
endfunction
function APx takes unit v returns nothing
local integer CGe=H2e()
set H5v[CGe]=v
set H4v[CGe]=R2I(10./ .03125)
call tKe(H5v[CGe],oR)
call QIe(CGe,.03125,true,function Apx)
endfunction
function Aqx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
local real r=1.
if jev[CGe]==4 then
call Qre(AddSpecialEffect(("war3mapImported\\TND_TNLTfire6.mdl"),((jxv[CGe])*1.),((jov[CGe])*1.)))
call GroupEnumUnitsInRange(sv,jxv[CGe],jov[CGe],$DC,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,jvv[CGe])and not spe(n)and not tOe(n)then
if(GetUnitAbilityLevel((n),(oR))>0)then
set r=1.17+.03*BUe[(jVv[CGe])*(20)+$A]
call yLe(H9v[CGe],n,($B+BUe[(jVv[CGe])*(20)+$A]),.5)
else
if BUe[(jVv[CGe])*(20)+$A]>0 then
call APx(n)
endif
endif
call yKe(H9v[CGe],n,jnv[CGe],2.)
call uee(H9v[CGe],n,true,jrv[CGe],jiv[CGe]*r,THe(H9v[CGe]))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
elseif jev[CGe]<4 then
if jev[CGe]==2 then
call Qre(AddSpecialEffect(("war3mapImported\\TND_TNLTfire6.mdl"),((jxv[CGe])*1.),((jov[CGe])*1.)))
endif
call GroupEnumUnitsInRange(sv,jxv[CGe],jov[CGe],$F0,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,jvv[CGe])and not spe(n)and not tOe(n)then
if(GetUnitAbilityLevel((n),(oR))>0)then
set r=1.17+.03*BUe[(jVv[CGe])*(20)+$A]
endif
call uee(H9v[CGe],n,true,jrv[CGe],jav[CGe]*r,THe(H9v[CGe]))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set jev[CGe]=jev[CGe]-1
if jev[CGe]<=0 then
call QDe()
set H9v[CGe]=null
set jvv[CGe]=null
call H1e(CGe)
endif
return false
endfunction
function AQx takes unit u,real d,unit v,real r returns nothing
local integer CGe=H0e()
set H9v[CGe]=u
set jxv[CGe]=GetUnitX(v)
set jov[CGe]=GetUnitY(v)
set jev[CGe]=4
set jrv[CGe]=uBe(u,ude(u,2.,.6,xR))
set jiv[CGe]=uce(u,ude(u,$BB8,900,xR),'B009')
set jav[CGe]=uce(u,ude(u,$7D0,600,xR),'B009')
set jnv[CGe]=ude(u,20,2,xR)
set jvv[CGe]=GetOwningPlayer(H9v[CGe])
set jVv[CGe]=GetPlayerId(jvv[CGe])+1
call Qre(AddSpecialEffect(("war3mapImported\\TND_thienngoailuutinhcaster3.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
set Tv=AddSpecialEffect("war3mapImported\\TND_TNLT_Stone3.mdl",jxv[CGe],jov[CGe])
call BlzSetSpecialEffectTimeScale(Tv,1.8)
call BlzSetSpecialEffectYaw((Tv),((270)*1.)*bj_DEGTORAD)
call Qre(Tv)
call Qre(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl",H9v[CGe],"weapon"))
set jrv[CGe]=jrv[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A093'))
set jiv[CGe]=jiv[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A093'))
if r>0 then
set jrv[CGe]=d
set jiv[CGe]=d
set jav[CGe]=d
set jnv[CGe]=r
endif
call QIe(CGe,.4,true,function Aqx)
endfunction
function Asx takes nothing returns boolean
local integer CGe=Qce()
set jcv[CGe]=jcv[CGe]-1
if jcv[CGe]<=0 or spe(jRv[CGe])or not(GetUnitAbilityLevel((jRv[CGe]),(iR))>0)then
call QDe()
call UnitRemoveAbility(jRv[CGe],iR)
if jCv[CGe]!=0 then
call Qre(yb[jCv[CGe]])
set yb[jCv[CGe]]=null
endif
if jIv[CGe]>0 then
call Tje(jRv[CGe],Fx,-jIv[CGe])
call Tje(jRv[CGe],gx,-jIv[CGe]/ 2)
endif
if jAv[CGe]>0 then
if not yJ[jdv[CGe]]then
call T_e(jRv[CGe],-jAv[CGe])
call T4e(jRv[CGe],-jAv[CGe])
endif
endif
if jNv[CGe]>0 then
call Tue(jRv[CGe],-jNv[CGe])
endif
if jbv[CGe]>0 then
call Twe(jRv[CGe],-jbv[CGe])
endif
if jBv[CGe]>0 then
call Tje(jRv[CGe],Vx,-jBv[CGe])
endif
set jRv[CGe]=null
call H_e(CGe)
endif
return false
endfunction
function ASx takes unit u,unit n returns nothing
local integer CGe=HZe()
local real r=1.
local integer lv=GetUnitAbilityLevel(u,rR)
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
local integer Atx=BUe[(i)*(20)+4]
local integer ATx=BUe[(i)*(20)+5]
local integer Aux=BUe[(i)*(20)+6]
local integer AUx=BUe[(i)*(20)+8]
local integer Awx=BUe[(i)*(20)+9]
if Atx>lv then
set Atx=lv
endif
if ATx>lv then
set ATx=lv
endif
if Aux>lv then
set Aux=lv
endif
if AUx>lv then
set AUx=lv
endif
if Awx>lv then
set Awx=lv
endif
if u!=n then
set r=.5
endif
set jIv[CGe]=0
set jAv[CGe]=0
set jNv[CGe]=0
set jbv[CGe]=0
set jBv[CGe]=0
set jRv[CGe]=n
set jdv[CGe]=(GetPlayerId(GetOwningPlayer((n)))+1)
set jcv[CGe]=R2I(600/ .03125)
if u==n then
set jCv[CGe]=i
if(bde[(GetPlayerId(GetOwningPlayer(((jRv[CGe])))))])and not(GetUnitAbilityLevel(((jRv[CGe])),('A0YV'))>0)then
set yb[jCv[CGe]]=UCe(bDe[jCv[CGe]],Yb[jCv[CGe]],"origin")
else
set yb[jCv[CGe]]=UCe(jRv[CGe],Yb[jCv[CGe]],"origin")
endif
endif
call tKe(jRv[CGe],iR)
if Atx>0 then
set jIv[CGe]=(.2+.1*Atx)*r
call Tje(jRv[CGe],Fx,jIv[CGe])
call Tje(jRv[CGe],gx,jIv[CGe]/ 2)
endif
if ATx>0 and not(GetUnitAbilityLevel((jRv[CGe]),('A07U'))>0)then
set jAv[CGe]=(.12+.02*ATx)*r
call T_e(jRv[CGe],jAv[CGe])
call T4e(jRv[CGe],jAv[CGe])
endif
if Aux>0 then
set jNv[CGe]=I2R(R2I(('d'+30*Aux)*r))
call Tue(jRv[CGe],jNv[CGe])
endif
if AUx>0 then
set jbv[CGe]=(.16+.04*AUx)*r
call Twe(jRv[CGe],jbv[CGe])
endif
if Awx>0 then
set jBv[CGe]=(.2+.04*Awx)*r
call Tje(jRv[CGe],Vx,jBv[CGe])
endif
call QIe(CGe,.03125,true,function Asx)
endfunction
function AWx takes nothing returns boolean
local integer CGe=Qce()
set jgv[CGe]=jgv[CGe]-1
if jgv[CGe]<=0 then
call QDe()
call ASx(jGv[CGe],jhv[CGe])
set jGv[CGe]=null
set jhv[CGe]=null
call Hze(CGe)
endif
return false
endfunction
function Ayx takes unit u,unit n returns nothing
local integer CGe=HYe()
set jGv[CGe]=u
set jhv[CGe]=n
set jgv[CGe]=$A
call UnitRemoveAbility(n,iR)
call QIe(CGe,.03125,true,function AWx)
endfunction
function AYx takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local unit n
call GroupEnumUnitsInRange(sv,GetUnitX(u),GetUnitY(u),800,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitAlly(n,p)and not spe(n)and not tOe(n)and(IsUnitType((n),UNIT_TYPE_HERO))and GetUnitTypeId(n)!='H00K' then
if not(GetUnitAbilityLevel((n),(iR))>0)then
call ASx(u,n)
else
call Ayx(u,n)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set u=null
set p=null
return false
endfunction
function Azx takes nothing returns boolean
return GetSpellAbilityId()==rR and AYx()
endfunction
function AZx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function Azx))
set t=null
endfunction
function A_x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
local real r=1.
local real x=GetRandomReal(jmv[CGe]-$B4,jmv[CGe]+$B4)
local real y=GetRandomReal(jMv[CGe]-$B4,jMv[CGe]+$B4)
call Qre(AddSpecialEffect(("war3mapImported\\CLK_thienloiz2.mdl"),((x)*1.),((y)*1.)))
set jQv[CGe]=jQv[CGe]+1
if jQv[CGe]==4 then
set jQv[CGe]=0
call GroupEnumUnitsInRange(sv,jmv[CGe],jMv[CGe],420,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,jpv[CGe])and not spe(n)and not tOe(n)then
call yle(jkv[CGe],n,jLv[CGe],1.)
call Qre(AddSpecialEffectTarget(("war3mapImported\\CLK_targetlight2.mdl"),(n),"chest"))
if(GetUnitAbilityLevel((n),('B031'))>0)then
set r=1.1+.04*BUe[(jqv[CGe])*(20)+8]
endif
if(GetUnitAbilityLevel((n),(uE))>0)then
set r=r+.26+.04*GetUnitAbilityLevel(jkv[CGe],TE)
endif
call uee(jkv[CGe],n,true,jKv[CGe]*r,jlv[CGe]*r,THe(jkv[CGe]))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set jPv[CGe]=jPv[CGe]-1
if jPv[CGe]<=0 then
call QDe()
set jkv[CGe]=null
set jpv[CGe]=null
call Hye(CGe)
endif
return false
endfunction
function A0x takes unit u,real d1,real d2,real r,real x,real y returns nothing
local integer CGe=HWe()
set jkv[CGe]=u
set jKv[CGe]=d1
set jlv[CGe]=d2
set jLv[CGe]=r
set jmv[CGe]=x
set jMv[CGe]=y
set jPv[CGe]=20
set jQv[CGe]=0
set jpv[CGe]=GetOwningPlayer(jkv[CGe])
set jqv[CGe]=GetPlayerId(jpv[CGe])+1
call QIe(CGe,.125,true,function A_x)
endfunction
function A1x takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,2.,.6,aR))
local real d2=uce(u,ude(u,$9C4,750,aR),'B00A')
local real r=ude(u,$F,2,aR)
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
call A0x(u,d1,d2,r,x,y)
set u=null
return false
endfunction
function A2x takes nothing returns boolean
return GetSpellAbilityId()==aR and A1x()
endfunction
function A3x takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function A2x))
set t=null
endfunction
function A4x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=0
set jyv[CGe]=(((jyv[CGe])*1.)+((VR)*1.)*Cos(((j2v[CGe])*1.)*bj_DEGTORAD))
set jYv[CGe]=(((jYv[CGe])*1.)+((VR)*1.)*Sin(((j2v[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(jwv[CGe],jyv[CGe],jYv[CGe],j1v[CGe])
if j0v[CGe]<7 then
call GroupEnumUnitsInRange(sv,jyv[CGe],jYv[CGe],$B4,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,juv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,jUv[CGe])then
call yHe(jTv[CGe],n,j_v[CGe],1.)
call GroupAddUnit(jUv[CGe],n)
if(GetUnitAbilityLevel((n),('A03D'))>0)then
set r=$C+4*GetUnitAbilityLevel(jTv[CGe],'A03B')
endif
if BUe[(j3v[CGe])*(20)+9]>0 and GetRandomReal(0,'d')<=($F+3*BUe[(j3v[CGe])*(20)+9]+r)then
call Qre(AddSpecialEffectTarget(("war3mapImported\\TLD_thientruccaster.mdl"),(n),"origin"))
call uee(jTv[CGe],n,false,jzv[CGe]*1.5,jZv[CGe]*1.5,THe(jTv[CGe]))
else
call Qre(AddSpecialEffectTarget(("war3mapImported\\TLD_blade_effect.mdl"),(n),"chest"))
call uee(jTv[CGe],n,false,jzv[CGe],jZv[CGe],THe(jTv[CGe]))
endif
set j0v[CGe]=j0v[CGe]+1
if j0v[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set jWv[CGe]=jWv[CGe]-1
if jWv[CGe]<=0 then
call QDe()
call Qre(jwv[CGe])
call Qne(jUv[CGe])
set jUv[CGe]=null
set jwv[CGe]=null
set jTv[CGe]=null
set juv[CGe]=null
call Hwe(CGe)
endif
return false
endfunction
function A5x takes unit u,real d1,real d2,real r,real x,real y,real a returns nothing
local integer CGe=HUe()
set jTv[CGe]=u
set j2v[CGe]=a
set jyv[CGe]=x
set jYv[CGe]=y
set jWv[CGe]=R2I(nR/ VR)
set jwv[CGe]=AddSpecialEffect("war3mapImported\\TLD_BladeBeamFinal3.mdl",jyv[CGe],jYv[CGe])
set j1v[CGe]=sxe(jyv[CGe],jYv[CGe])+'d'
set jzv[CGe]=d1
set jZv[CGe]=d2
set j_v[CGe]=r
set j0v[CGe]=0
set jUv[CGe]=CreateGroup()
set juv[CGe]=GetOwningPlayer(jTv[CGe])
set j3v[CGe]=GetPlayerId(juv[CGe])+1
call BlzSetSpecialEffectYaw((jwv[CGe]),((j2v[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((jwv[CGe]),((1.2)*1.))
call BlzSetSpecialEffectZ(jwv[CGe],j1v[CGe])
call BlzSetSpecialEffectColor((jwv[CGe]),($FF),($96),(0))
call QIe(CGe,.03125,true,function A4x)
endfunction
function A6x takes nothing returns boolean
local integer CGe=Qce()
set j8v[CGe]=j8v[CGe]-1
if j8v[CGe]<=0 then
call QDe()
call A5x(j7v[CGe],Jev[CGe],Jxv[CGe],Jov[CGe],j9v[CGe],Jvv[CGe],Jrv[CGe])
set j7v[CGe]=null
call Hue(CGe)
endif
return false
endfunction
function A7x takes unit u,real d,unit v,real r returns nothing
local integer CGe=HTe()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set j7v[CGe]=u
set Jrv[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set j9v[CGe]=(((x)*1.)+((50)*1.)*Cos(((Jrv[CGe])*1.)*bj_DEGTORAD))
set Jvv[CGe]=(((y)*1.)+((50)*1.)*Sin(((Jrv[CGe])*1.)*bj_DEGTORAD))
set j8v[CGe]=1
set Jev[CGe]=uBe(u,ude(u,2.,.6,ER))
set Jxv[CGe]=uce(u,ude(u,$7D0,600,ER),'B006')
set Jov[CGe]=ude(u,20,2,ER)
set Jev[CGe]=Jev[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A025'))
set Jxv[CGe]=Jxv[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A025'))
if r>0 then
set Jev[CGe]=d
set Jxv[CGe]=d
set Jov[CGe]=r
endif
call A5x(j7v[CGe],Jev[CGe],Jxv[CGe],Jov[CGe],j9v[CGe],Jvv[CGe],Jrv[CGe])
call QIe(CGe,.32,true,function A6x)
endfunction
function A8x takes nothing returns boolean
local integer CGe=Qce()
if JXv[CGe]>=JOv[CGe]then
call UnitRemoveBuffs(JVv[CGe],false,true)
endif
if JXv[CGe]==JOv[CGe]then
call UnitRemoveAbility(JVv[CGe],XR)
call Tje(JVv[CGe],5740,-.99)
call SetUnitVertexColor(JVv[CGe],$FF,$FF,$FF,$FF)
endif
set JXv[CGe]=JXv[CGe]-1
if JXv[CGe]<=0 then
call QDe()
set JVv[CGe]=null
set Bce[JEv[CGe]]=false
call Hte(CGe)
endif
return false
endfunction
function A9x takes unit u,integer i returns nothing
local integer CGe=HSe()
set JVv[CGe]=u
set JEv[CGe]=i
set Bce[JEv[CGe]]=true
set JXv[CGe]=55-2*BUe[(i)*(20)+5]
set JOv[CGe]=JXv[CGe]-8
call tKe(u,XR)
call Tje(u,5740,.99)
call SetUnitVertexColor(JVv[CGe],$FF,$FF,25,$FF)
call QIe(CGe,1.,true,function A8x)
endfunction
function Nvx takes nothing returns boolean
local integer CGe=Qce()
set JCv[CGe]=JCv[CGe]-1
if JCv[CGe]<=0 or spe(JNv[CGe])or not(GetUnitAbilityLevel((JNv[CGe]),(RR))>0)then
call QDe()
call UnitRemoveAbility(JNv[CGe],RR)
call TLe(JNv[CGe],-Jbv[CGe])
call Tje(JNv[CGe],4888,-JBv[CGe])
call Tje(JNv[CGe],6851,-Jcv[CGe])
set JNv[CGe]=null
call Hse(CGe)
endif
return false
endfunction
function Nex takes unit u,unit n returns nothing
local integer CGe=HQe()
local real r=1.
if u!=n then
set r=.5
endif
set Jbv[CGe]=I2R(R2I(ude(u,$C8,50,OR)*r))
set JBv[CGe]=I2R(R2I(ude(u,60,20,OR)*r))
set Jcv[CGe]=ude(u,.15,.02,OR)*r
set JNv[CGe]=n
set JCv[CGe]=R2I(300/ .03125)
call tKe(JNv[CGe],RR)
call TLe(JNv[CGe],Jbv[CGe])
call Tje(JNv[CGe],4888,JBv[CGe])
call Tje(JNv[CGe],6851,Jcv[CGe])
call QIe(CGe,.03125,true,function Nvx)
endfunction
function Nxx takes nothing returns boolean
local integer CGe=Qce()
set JFv[CGe]=JFv[CGe]-1
if JFv[CGe]<=0 then
call QDe()
call Nex(Jgv[CGe],JGv[CGe])
set Jgv[CGe]=null
set JGv[CGe]=null
call Hqe(CGe)
endif
return false
endfunction
function Nox takes unit u,unit n returns nothing
local integer CGe=HPe()
set Jgv[CGe]=u
set JGv[CGe]=n
set JFv[CGe]=$A
call UnitRemoveAbility(n,RR)
call QIe(CGe,.03125,true,function Nxx)
endfunction
function Nrx takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local unit n
call GroupEnumUnitsInRange(sv,GetUnitX(u),GetUnitY(u),$3E8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitAlly(n,p)and not spe(n)and not tOe(n)and(IsUnitType((n),UNIT_TYPE_HERO))and GetUnitTypeId(n)!='H00K' then
if not(GetUnitAbilityLevel((n),(RR))>0)then
call Nex(u,n)
else
call Nox(u,n)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set u=null
set p=null
return false
endfunction
function Nix takes nothing returns boolean
return GetSpellAbilityId()==OR and Nrx()
endfunction
function Nax takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function Nix))
set t=null
endfunction
function Nnx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set JJv[CGe]=JJv[CGe]-1
if JJv[CGe]<=0 then
call QDe()
call GroupEnumUnitsInRange(sv,Jlv[CGe],JLv[CGe],$FA,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yLe(JKv[CGe],n,'d',2.)
call uee(JKv[CGe],n,true,Jkv[CGe],Jkv[CGe],THe(JKv[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set JKv[CGe]=null
call Hpe(CGe)
endif
return false
endfunction
function NVx takes unit u,real d,real x,real y returns nothing
local integer CGe=HMe()
set JKv[CGe]=u
set Jkv[CGe]=d
set Jlv[CGe]=x
set JLv[CGe]=y
set JJv[CGe]=1
call QIe(CGe,.5,true,function Nnx)
endfunction
function NEx takes nothing returns boolean
local integer CGe=Qce()
local real x0=GetUnitX(Jqv[CGe])
local real y0=GetUnitY(Jqv[CGe])
local real x=GetRandomReal(x0-400,x0+400)
local real y=GetRandomReal(y0-400,y0+400)
call Qre(AddSpecialEffect(("war3mapImported\\NDC_amphong1.mdl"),((x)*1.),((y)*1.)))
call NVx(Jqv[CGe],JQv[CGe],x,y)
set JPv[CGe]=JPv[CGe]-1
if JPv[CGe]<=0 or spe(Jqv[CGe])then
call QDe()
set Jqv[CGe]=null
call Hme(CGe)
endif
return false
endfunction
function NXx takes unit u,real d returns nothing
local integer CGe=HLe()
set Jqv[CGe]=u
set JQv[CGe]=d
set JPv[CGe]=$F
call QIe(CGe,.3,true,function NEx)
endfunction
function NOx takes nothing returns boolean
local integer CGe=Qce()
if Juv[CGe]==$C then
call Tje(Jwv[CGe],ox,-JUv[CGe])
call UnitRemoveAbility(Jwv[CGe],IR)
endif
set Juv[CGe]=Juv[CGe]-1
if Juv[CGe]<=0 then
call QDe()
set AR[JTv[CGe]]=false
set Jwv[CGe]=null
call Hle(CGe)
endif
return false
endfunction
function NRx takes unit u,integer i returns nothing
local integer CGe=HKe()
set JUv[CGe]=.3+.03*BUe[(i)*(20)+6]
set JTv[CGe]=i
set AR[JTv[CGe]]=true
set Juv[CGe]=18
set Jwv[CGe]=u
call tKe(u,IR)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TYK_effectcast.mdx"),(u),"origin"))
call Tje(Jwv[CGe],ox,JUv[CGe])
call QIe(CGe,1.,true,function NOx)
endfunction
function NIx takes nothing returns boolean
local unit u=GetAttacker()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
if not AR[i]then
call NRx(u,i)
endif
set u=null
return false
endfunction
function NAx takes nothing returns boolean
return(GetUnitAbilityLevel((GetAttacker()),('A0RR'))>0)and NIx()
endfunction
function NNx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function NAx))
set t=null
endfunction
function Nbx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
if J_v[CGe]==5 then
call Qre(J5v[CGe])
endif
call GroupEnumUnitsInRange(sv,J2v[CGe],J3v[CGe],$8C,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,JZv[CGe])and not spe(n)and not tOe(n)then
call yKe(Jzv[CGe],n,J4v[CGe],1.)
call uee(Jzv[CGe],n,true,J0v[CGe],J1v[CGe],THe(Jzv[CGe]))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set J_v[CGe]=J_v[CGe]-1
if J_v[CGe]<=0 then
call QDe()
set J5v[CGe]=null
set Jzv[CGe]=null
set JZv[CGe]=null
call Hke(CGe)
endif
return false
endfunction
function NBx takes unit u,real d1,real d2,real r,real x,real y returns nothing
local integer CGe=HJe()
set Jzv[CGe]=u
set J2v[CGe]=x
set J3v[CGe]=y
set JZv[CGe]=GetOwningPlayer(Jzv[CGe])
set J0v[CGe]=d1
set J1v[CGe]=d2
set J_v[CGe]=6
set J5v[CGe]=AddSpecialEffect("war3mapImported\\TND_thoison.mdl",J2v[CGe],J3v[CGe])
set J4v[CGe]=r
call BlzSetSpecialEffectZ(J5v[CGe],sxe(J2v[CGe],J3v[CGe]))
call QIe(CGe,1.,true,function Nbx)
endfunction
function Ncx takes unit u,real d1,real d2,real r,real x0,real y0,real a,integer lv returns boolean
if lv>=9 then
call NBx(u,d1,d2,r,x0,y0)
call NBx(u,d1,d2,r,(((x0)*1.)+(($96)*1.)*Cos(((a+90)*1.)*bj_DEGTORAD)),(((y0)*1.)+(($96)*1.)*Sin(((a+90)*1.)*bj_DEGTORAD)))
call NBx(u,d1,d2,r,(((x0)*1.)+(($96)*1.)*Cos(((a-90)*1.)*bj_DEGTORAD)),(((y0)*1.)+(($96)*1.)*Sin(((a-90)*1.)*bj_DEGTORAD)))
call NBx(u,d1,d2,r,(((x0)*1.)+((300)*1.)*Cos(((a+90)*1.)*bj_DEGTORAD)),(((y0)*1.)+((300)*1.)*Sin(((a+90)*1.)*bj_DEGTORAD)))
call NBx(u,d1,d2,r,(((x0)*1.)+((300)*1.)*Cos(((a-90)*1.)*bj_DEGTORAD)),(((y0)*1.)+((300)*1.)*Sin(((a-90)*1.)*bj_DEGTORAD)))
elseif lv>=7 then
call NBx(u,d1,d2,r,(((x0)*1.)+((75)*1.)*Cos(((a+90)*1.)*bj_DEGTORAD)),(((y0)*1.)+((75)*1.)*Sin(((a+90)*1.)*bj_DEGTORAD)))
call NBx(u,d1,d2,r,(((x0)*1.)+((75)*1.)*Cos(((a-90)*1.)*bj_DEGTORAD)),(((y0)*1.)+((75)*1.)*Sin(((a-90)*1.)*bj_DEGTORAD)))
call NBx(u,d1,d2,r,(((x0)*1.)+(($E1)*1.)*Cos(((a+90)*1.)*bj_DEGTORAD)),(((y0)*1.)+(($E1)*1.)*Sin(((a+90)*1.)*bj_DEGTORAD)))
call NBx(u,d1,d2,r,(((x0)*1.)+(($E1)*1.)*Cos(((a-90)*1.)*bj_DEGTORAD)),(((y0)*1.)+(($E1)*1.)*Sin(((a-90)*1.)*bj_DEGTORAD)))
elseif lv>=5 then
call NBx(u,d1,d2,r,x0,y0)
call NBx(u,d1,d2,r,(((x0)*1.)+(($96)*1.)*Cos(((a+90)*1.)*bj_DEGTORAD)),(((y0)*1.)+(($96)*1.)*Sin(((a+90)*1.)*bj_DEGTORAD)))
call NBx(u,d1,d2,r,(((x0)*1.)+(($96)*1.)*Cos(((a-90)*1.)*bj_DEGTORAD)),(((y0)*1.)+(($96)*1.)*Sin(((a-90)*1.)*bj_DEGTORAD)))
elseif lv>=3 then
call NBx(u,d1,d2,r,(((x0)*1.)+((75)*1.)*Cos(((a+90)*1.)*bj_DEGTORAD)),(((y0)*1.)+((75)*1.)*Sin(((a+90)*1.)*bj_DEGTORAD)))
call NBx(u,d1,d2,r,(((x0)*1.)+((75)*1.)*Cos(((a-90)*1.)*bj_DEGTORAD)),(((y0)*1.)+((75)*1.)*Sin(((a-90)*1.)*bj_DEGTORAD)))
else
call NBx(u,d1,d2,r,x0,y0)
endif
return false
endfunction
function NCx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,1.5,.45,NR))
local real d2=uce(u,ude(u,$BB8,900,NR),'B009')
local real r=ude(u,20,2,NR)
local real x0=GetSpellTargetX()
local real y0=GetSpellTargetY()
local real a=soe(GetUnitX(u),GetUnitY(u),x0,y0)
local integer lv=GetUnitAbilityLevel(u,NR)
call Ncx(u,d1,d2,r,x0,y0,a,lv)
set u=null
return false
endfunction
function Ndx takes nothing returns boolean
return GetSpellAbilityId()==NR and NCx()
endfunction
function NDx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function Ndx))
set t=null
endfunction
function Nfx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set kov[CGe]=(((kov[CGe])*1.)+((BR)*1.)*Cos(((kEv[CGe])*1.)*bj_DEGTORAD))
set krv[CGe]=(((krv[CGe])*1.)+((BR)*1.)*Sin(((kEv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(kev[CGe],kov[CGe],krv[CGe],kVv[CGe])
if kOv[CGe]<7 then
call GroupEnumUnitsInRange(sv,kov[CGe],krv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,kvv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,kXv[CGe])then
call yke(J9v[CGe],n,knv[CGe],2.)
call GroupAddUnit(kXv[CGe],n)
call Qre(AddSpecialEffectTarget(("war3mapImported\\NMK_kiemanheffect.mdl"),(n),"chest"))
call uee(J9v[CGe],n,true,kiv[CGe],kav[CGe],THe(J9v[CGe]))
set kOv[CGe]=kOv[CGe]+1
if kOv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set kxv[CGe]=kxv[CGe]-1
if kxv[CGe]<=0 then
call QDe()
call Qre(kev[CGe])
call Qne(kXv[CGe])
set kXv[CGe]=null
set kev[CGe]=null
set J9v[CGe]=null
set kvv[CGe]=null
call Hje(CGe)
endif
return false
endfunction
function NFx takes unit u,real d1,real d2,real r,real x,real y,real a returns nothing
local integer CGe=HHe()
set J9v[CGe]=u
set kEv[CGe]=a
set kov[CGe]=x
set krv[CGe]=y
set kiv[CGe]=d1
set kav[CGe]=d2
set knv[CGe]=r
set kVv[CGe]=sxe(kov[CGe],krv[CGe])+'d'
set kev[CGe]=AddSpecialEffect("war3mapImported\\NMK_kiemanhphatquangmissile3.mdl",kov[CGe],krv[CGe])
set kxv[CGe]=R2I(bR/ BR)
set kXv[CGe]=CreateGroup()
set kvv[CGe]=GetOwningPlayer(J9v[CGe])
set kOv[CGe]=0
call BlzSetSpecialEffectYaw((kev[CGe]),((kEv[CGe]-8)*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((kev[CGe]),((1.2)*1.))
call BlzSetSpecialEffectZ(kev[CGe],kVv[CGe])
call QIe(CGe,.03125,true,function Nfx)
endfunction
function Ngx takes nothing returns boolean
local integer CGe=Qce()
call NFx(kNv[CGe],kCv[CGe],kdv[CGe],kDv[CGe],kBv[CGe],kcv[CGe],kfv[CGe])
set kbv[CGe]=kbv[CGe]-1
if kbv[CGe]<=0 then
call QDe()
set kNv[CGe]=null
call Hhe(CGe)
endif
return false
endfunction
function NGx takes unit u,real d,unit v,real r returns nothing
local integer CGe=HGe()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set kNv[CGe]=u
set kfv[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set kBv[CGe]=(((x)*1.)+((50)*1.)*Cos(((kfv[CGe])*1.)*bj_DEGTORAD))
set kcv[CGe]=(((y)*1.)+((50)*1.)*Sin(((kfv[CGe])*1.)*bj_DEGTORAD))
set kbv[CGe]=1
set kCv[CGe]=uBe(u,ude(u,1.,.3,cR))
set kdv[CGe]=uce(u,ude(u,$3E8,300,cR),'B008')
set kDv[CGe]=ude(u,20,3,cR)
call Qre(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl",kNv[CGe],"weapon"))
if r>0 then
set kCv[CGe]=d
set kdv[CGe]=d
set kDv[CGe]=r
endif
call NFx(kNv[CGe],kCv[CGe],kdv[CGe],kDv[CGe],kBv[CGe],kcv[CGe],kfv[CGe])
call QIe(CGe,.2,true,function Ngx)
endfunction
function Nhx takes nothing returns boolean
local integer CGe=Qce()
set kHv[CGe]=kHv[CGe]-1
if kHv[CGe]<=0 or spe(khv[CGe])or not(GetUnitAbilityLevel((khv[CGe]),(dR))>0)then
call QDe()
call UnitRemoveAbility(khv[CGe],dR)
call Tje(khv[CGe],xx,-kjv[CGe])
set khv[CGe]=null
call Hge(CGe)
endif
return false
endfunction
function NHx takes nothing returns boolean
local integer CGe=HFe()
set khv[CGe]=GetTriggerUnit()
set kHv[CGe]=R2I(ude(khv[CGe],9,1,CR)/ .03125)
set kjv[CGe]=ude(khv[CGe],.2,.03,CR)
set mv=(GetPlayerId(GetOwningPlayer((khv[CGe])))+1)
if BUe[(mv)*(20)+8]>0 then
set kjv[CGe]=kjv[CGe]+.08+.02*BUe[(mv)*(20)+8]
endif
call tKe(khv[CGe],dR)
call Tje(khv[CGe],xx,kjv[CGe])
call QIe(CGe,.03125,true,function Nhx)
return false
endfunction
function Njx takes nothing returns boolean
return GetSpellAbilityId()==CR and NHx()
endfunction
function NJx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function Njx))
set t=null
endfunction
function Nkx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set kpv[CGe]=(((kpv[CGe])*1.)+((fR)*1.)*Cos(((ksv[CGe])*1.)*bj_DEGTORAD))
set kPv[CGe]=(((kPv[CGe])*1.)+((fR)*1.)*Sin(((ksv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(kmv[CGe],kpv[CGe],kPv[CGe],kQv[CGe])
call GroupEnumUnitsInRange(sv,kpv[CGe],kPv[CGe],$A0,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,kLv[CGe])then
call Qre(AddSpecialEffectTarget(("war3mapImported\\TNK_vanlongeffecttarget.mdl"),(n),"chest"))
call uee(klv[CGe],n,false,kqv[CGe],kqv[CGe],THe(klv[CGe]))
call yHe(klv[CGe],n,'d',1.)
call GroupAddUnit(kLv[CGe],n)
call s5e(n,$96,.3,soe(kpv[CGe],kPv[CGe],GetUnitX(n),GetUnitY(n)),false,false)
endif
call GroupRemoveUnit(sv,n)
endloop
set kMv[CGe]=kMv[CGe]-1
if kMv[CGe]<=0 then
call QDe()
call Qre(kmv[CGe])
call Qne(kLv[CGe])
set kLv[CGe]=null
set kmv[CGe]=null
set klv[CGe]=null
call Hfe(CGe)
endif
return false
endfunction
function NKx takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=HDe()
set klv[CGe]=u
set ksv[CGe]=a
set kpv[CGe]=x
set kPv[CGe]=y
set kMv[CGe]=R2I(DR/ fR)
set kmv[CGe]=AddSpecialEffect("war3mapImported\\EFF_bongxz.mdl",kpv[CGe],kPv[CGe])
set kQv[CGe]=sxe(kpv[CGe],kPv[CGe])+'d'
set kqv[CGe]=d
set kLv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((kmv[CGe]),((ksv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((kmv[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(kmv[CGe],kQv[CGe])
call QIe(CGe,.03125,true,function Nkx)
endfunction
function Nlx takes nothing returns boolean
local integer CGe=Qce()
local integer rd=GetRandomInt(0,$A)
local real x=(((kWv[CGe])*1.)+((rd*'d')*1.)*Cos(((kYv[CGe]+90)*1.)*bj_DEGTORAD))
local real y=(((kyv[CGe])*1.)+((rd*'d')*1.)*Sin(((kYv[CGe]+90)*1.)*bj_DEGTORAD))
call NKx(kuv[CGe],kUv[CGe],x,y,kYv[CGe])
set kwv[CGe]=kwv[CGe]-1
if kwv[CGe]<=0 then
call QDe()
set kuv[CGe]=null
call Hde(CGe)
endif
return false
endfunction
function NLx takes unit u,real d returns nothing
local integer CGe=HCe()
set kuv[CGe]=u
set kwv[CGe]=50
set kUv[CGe]=d
set kYv[CGe]=GetUnitFacing(u)
set kWv[CGe]=(((GetUnitX(u))*1.)+((300)*1.)*Cos(((kYv[CGe]+$B4)*1.)*bj_DEGTORAD))
set kyv[CGe]=(((GetUnitY(u))*1.)+((300)*1.)*Sin(((kYv[CGe]+$B4)*1.)*bj_DEGTORAD))
set kWv[CGe]=(((kWv[CGe])*1.)+((500)*1.)*Cos(((kYv[CGe]-90)*1.)*bj_DEGTORAD))
set kyv[CGe]=(((kyv[CGe])*1.)+((500)*1.)*Sin(((kYv[CGe]-90)*1.)*bj_DEGTORAD))
call QIe(CGe,.1,true,function Nlx)
endfunction
function Nmx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set k8v[CGe]=k8v[CGe]+GetRandomReal(-45,45)
set k4v[CGe]=(((k4v[CGe])*1.)+((gR)*1.)*Cos(((k8v[CGe])*1.)*bj_DEGTORAD))
set k5v[CGe]=(((k5v[CGe])*1.)+((gR)*1.)*Sin(((k8v[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(k2v[CGe],k4v[CGe],k5v[CGe],k7v[CGe])
call GroupEnumUnitsInRange(sv,k4v[CGe],k5v[CGe],90,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,k1v[CGe])then
call Qre(AddSpecialEffect(("war3mapImported\\TNK_tanduongnhuhuyet3.mdl"),((k4v[CGe])*1.),((k5v[CGe])*1.)))
call uee(k0v[CGe],n,false,k6v[CGe],k6v[CGe],THe(k0v[CGe]))
call yle(k0v[CGe],n,'d',.5)
call GroupAddUnit(k1v[CGe],n)
call GroupClear(sv)
set k3v[CGe]=0
endif
call GroupRemoveUnit(sv,n)
endloop
set k3v[CGe]=k3v[CGe]-1
if k3v[CGe]<=0 then
call QDe()
call Qre(k2v[CGe])
call Qne(k1v[CGe])
set k1v[CGe]=null
set k2v[CGe]=null
set k0v[CGe]=null
call Hce(CGe)
endif
return false
endfunction
function NMx takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=HBe()
set k0v[CGe]=u
set k8v[CGe]=a
set k4v[CGe]=(((x)*1.)+(('d')*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set k5v[CGe]=(((y)*1.)+(('d')*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set k3v[CGe]=R2I(FR/ gR)
set k2v[CGe]=AddSpecialEffect("Abilities\\Weapons\\VengeanceMissile\\VengeanceMissile.mdl",k4v[CGe],k5v[CGe])
set k7v[CGe]=sxe(k4v[CGe],k5v[CGe])+'d'
set k6v[CGe]=d
set k1v[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((k2v[CGe]),((k8v[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((k2v[CGe]),((2.)*1.))
call BlzSetSpecialEffectZ(k2v[CGe],k7v[CGe])
call QIe(CGe,.03125,true,function Nmx)
endfunction
function Npx takes nothing returns boolean
local integer CGe=Qce()
local real a=GetUnitFacing(Kov[CGe])
local real x=GetUnitX(Kov[CGe])
local real y=GetUnitY(Kov[CGe])
call NMx(Kov[CGe],Krv[CGe],x,y,a)
call NMx(Kov[CGe],Krv[CGe],x,y,a+$F)
call NMx(Kov[CGe],Krv[CGe],x,y,a+30)
call NMx(Kov[CGe],Krv[CGe],x,y,a+45)
call NMx(Kov[CGe],Krv[CGe],x,y,a+60)
call NMx(Kov[CGe],Krv[CGe],x,y,a-$F)
call NMx(Kov[CGe],Krv[CGe],x,y,a-30)
call NMx(Kov[CGe],Krv[CGe],x,y,a-45)
call NMx(Kov[CGe],Krv[CGe],x,y,a-60)
set Kxv[CGe]=Kxv[CGe]-1
if Kxv[CGe]<=0 or spe(Kov[CGe])then
call QDe()
set Kov[CGe]=null
call Hbe(CGe)
endif
return false
endfunction
function NPx takes unit u,real d returns nothing
local integer CGe=HNe()
set Kov[CGe]=u
set Krv[CGe]=d
set Kxv[CGe]=5
call QIe(CGe,1.,true,function Npx)
endfunction
function Nqx takes nothing returns boolean
local integer CGe=Qce()
set KXv[CGe]=(((KXv[CGe])*1.)+((hR)*1.)*Cos(((KVv[CGe])*1.)*bj_DEGTORAD))
set KOv[CGe]=(((KOv[CGe])*1.)+((hR)*1.)*Sin(((KVv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(KIv[CGe],KXv[CGe],KOv[CGe],KEv[CGe])
set KRv[CGe]=KRv[CGe]-1
if KRv[CGe]<=0 then
call QDe()
call Qre(KIv[CGe])
set KIv[CGe]=null
call HAe(CGe)
endif
return false
endfunction
function NQx takes real x,real y,real sMe returns nothing
local integer CGe=HIe()
set KXv[CGe]=x
set KOv[CGe]=y
set KVv[CGe]=sMe
set KIv[CGe]=AddSpecialEffect("war3mapImported\\TVC_thualongquyet.mdl",KXv[CGe],KOv[CGe])
set KEv[CGe]=sxe(x,y)+50
set KRv[CGe]=R2I(GR/ hR)
call BlzSetSpecialEffectScale(KIv[CGe],.55)
call BlzSetSpecialEffectZ(KIv[CGe],KEv[CGe])
call BlzSetSpecialEffectYaw(KIv[CGe],KVv[CGe]*bj_DEGTORAD)
call QIe(CGe,.03125,true,function Nqx)
endfunction
function Nsx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
local integer rd=GetRandomInt(-3,3)
local real x=(((Kcv[CGe])*1.)+(('d')*1.)*Cos(((Kgv[CGe])*1.)*bj_DEGTORAD))
local real y=(((KCv[CGe])*1.)+(('d')*1.)*Sin(((Kgv[CGe])*1.)*bj_DEGTORAD))
call NQx(Kcv[CGe],KCv[CGe],Kgv[CGe]+$F*rd)
if KGv[CGe]==3 or KGv[CGe]==1 then
call GroupEnumUnitsInRange(sv,x,y,$DC,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Kdv[CGe])and not spe(n)and not tOe(n)then
call yHe(KBv[CGe],n,KFv[CGe],.7)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TVC_thualong_target2.mdl"),(n),"origin"))
call uee(KBv[CGe],n,false,KDv[CGe],Kfv[CGe],THe(KBv[CGe]))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set KGv[CGe]=KGv[CGe]-1
if KGv[CGe]<=0 then
call QDe()
set KBv[CGe]=null
set Kdv[CGe]=null
call HRe(CGe)
endif
return false
endfunction
function NSx takes unit u,real d,unit v,real r returns nothing
local integer CGe=HOe()
set KBv[CGe]=u
set Kcv[CGe]=GetUnitX(u)
set KCv[CGe]=GetUnitY(u)
set Kgv[CGe]=soe(Kcv[CGe],KCv[CGe],GetUnitX(v),GetUnitY(v))
set KFv[CGe]=ude(u,20,2,'A04K')
set KDv[CGe]=uBe(u,ude(u,2.,.6,'A04K'))
set Kfv[CGe]=uce(u,ude(u,$7D0,600,'A04K'),'B006')
set Kdv[CGe]=GetOwningPlayer(KBv[CGe])
set KDv[CGe]=KDv[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A04B'))
set Kfv[CGe]=Kfv[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A04B'))
set KGv[CGe]=4
call Qre(AddSpecialEffect(("war3mapImported\\TVC_thualongtarget.mdl"),((Kcv[CGe])*1.),((KCv[CGe])*1.)))
if r>0 then
set KDv[CGe]=d
set Kfv[CGe]=d
set KFv[CGe]=r
endif
call NQx(Kcv[CGe],KCv[CGe],Kgv[CGe])
call QIe(CGe,.12,true,function Nsx)
endfunction
function Ntx takes nothing returns boolean
local integer CGe=Qce()
set Kkv[CGe]=Kkv[CGe]-1
if Kkv[CGe]<=0 or spe(KJv[CGe])or not(GetUnitAbilityLevel((KJv[CGe]),(JR))>0)then
call QDe()
call UnitRemoveAbility(KJv[CGe],JR)
call Tje(KJv[CGe],4888,-999)
call Tje(KJv[CGe],xx,-.5)
set KJv[CGe]=null
call HXe(CGe)
endif
return false
endfunction
function NTx takes unit u,integer lv returns nothing
local integer CGe=HEe()
set KJv[CGe]=u
set Kkv[CGe]=R2I(10./ .03125)
call tKe(u,JR)
call Tje(u,4888,999)
call Tje(u,xx,.5)
call QIe(CGe,.03125,true,function Ntx)
endfunction
function Nux takes nothing returns boolean
local integer CGe=Qce()
set Kpv[CGe]=Kpv[CGe]-1
if Kpv[CGe]<=0 or spe(Kmv[CGe])or not(GetUnitAbilityLevel((Kmv[CGe]),(jR))>0)or kR[KMv[CGe]]<=0 then
call QDe()
set kR[KMv[CGe]]=0
call UnitRemoveAbility(Kmv[CGe],jR)
if BUe[(KMv[CGe])*(20)+$A]>0 then
call NTx(Kmv[CGe],BUe[(KMv[CGe])*(20)+$A])
endif
set Kmv[CGe]=null
call HVe(CGe)
endif
return false
endfunction
function NUx takes unit u,real r returns nothing
local integer CGe=Hne()
set Kmv[CGe]=u
set KMv[CGe]=(GetPlayerId(GetOwningPlayer((u)))+1)
set Kpv[CGe]=R2I(30/ .03125)
set kR[KMv[CGe]]=r
call tKe(Kmv[CGe],jR)
call QIe(CGe,.03125,true,function Nux)
endfunction
function Nwx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real TTe=GetUnitState(u,UNIT_STATE_MANA)
local real r=ude(u,2.,.5,HR)*TTe
local real m=ude(u,.9,-.05,HR)*TTe
call SetUnitState(u,UNIT_STATE_MANA,TTe-m)
call NUx(u,r)
set u=null
return false
endfunction
function NWx takes nothing returns boolean
return GetSpellAbilityId()==HR and Nwx()
endfunction
function Nyx takes nothing returns boolean
local unit u=GetTriggerUnit()
local unit v=GetAttacker()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
local real d1=uBe(u,ude(u,3.,.9,HR))
local real d2=uce(u,ude(u,$BB8,900,HR),'B00A')
if BUe[(i)*(20)+$A]>0 then
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\ChimaeraLightningMissile\\ChimaeraLightningMissile.mdl"),(v),"chest"))
call uee(u,v,true,d1,d2,THe(u))
endif
set u=null
set v=null
return false
endfunction
function NYx takes nothing returns boolean
return(GetUnitAbilityLevel((GetTriggerUnit()),(jR))>0)and Nyx()
endfunction
function Nzx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function NWx))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function NYx))
set t=null
endfunction
function NZx takes nothing returns boolean
local integer CGe=Qce()
if KTv[CGe]==20 then
call u_e(Ksv[CGe],-KSv[CGe])
call Tje(Ksv[CGe],Bx,-Ktv[CGe])
call UnitRemoveAbility(Ksv[CGe],KR)
endif
set KTv[CGe]=KTv[CGe]-1
if KTv[CGe]<=0 then
call QDe()
set lR[Kuv[CGe]]=false
set Ksv[CGe]=null
call Hae(CGe)
endif
return false
endfunction
function N_x takes unit u,integer lv,integer i returns nothing
local integer CGe=Hie()
set Ksv[CGe]=u
set KSv[CGe]=$C+1*lv
set Ktv[CGe]=.5+.5*lv
set KTv[CGe]=30
set Kuv[CGe]=i
set lR[Kuv[CGe]]=true
call tKe(Ksv[CGe],KR)
call u_e(Ksv[CGe],KSv[CGe])
call Tje(Ksv[CGe],Bx,Ktv[CGe])
call QIe(CGe,1.,true,function NZx)
endfunction
function N0x takes nothing returns boolean
local unit u=GetTriggerUnit()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
if not lR[i]then
call N_x(u,BUe[(i)*(20)+9],i)
endif
set u=null
return false
endfunction
function N1x takes nothing returns boolean
return(GetUnitAbilityLevel((GetTriggerUnit()),('A09E'))>0)and N0x()
endfunction
function N2x takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function N1x))
set t=null
endfunction
function N3x takes nothing returns boolean
local integer CGe=Qce()
if not spe(K_v[CGe])then
call uee(KZv[CGe],K_v[CGe],true,KYv[CGe],Kzv[CGe],THe(KZv[CGe]))
endif
set Kyv[CGe]=Kyv[CGe]-1
if Kyv[CGe]<=0 or spe(K_v[CGe])or spe(KZv[CGe])then
call QDe()
set KZv[CGe]=null
set K_v[CGe]=null
call Hre(CGe)
endif
return false
endfunction
function N4x takes unit u,unit v,real d1,real d2 returns nothing
local integer CGe=Hoe()
set KZv[CGe]=u
set K_v[CGe]=v
set KYv[CGe]=d1
set Kzv[CGe]=d2
set Kyv[CGe]=2
call QIe(CGe,.3,true,function N3x)
endfunction
function N5x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set K8v[CGe]=(((K8v[CGe])*1.)+((mR)*1.)*Cos(((lrv[CGe])*1.)*bj_DEGTORAD))
set K9v[CGe]=(((K9v[CGe])*1.)+((mR)*1.)*Sin(((lrv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(K5v[CGe],K8v[CGe],K9v[CGe],lov[CGe])
call BlzSetSpecialEffectPosition(K6v[CGe],K8v[CGe],K9v[CGe],lov[CGe])
if liv[CGe]<7 then
call GroupEnumUnitsInRange(sv,K8v[CGe],K9v[CGe],$DC,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,K4v[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,lav[CGe])then
call GroupAddUnit(lav[CGe],n)
call Qre(AddSpecialEffect(("war3mapImported\\TYK_effect2.mdl"),((GetUnitX(n))*1.),((GetUnitY(n))*1.)))
call N4x(K3v[CGe],n,lvv[CGe],lev[CGe])
call uee(K3v[CGe],n,true,lvv[CGe],lev[CGe],THe(K3v[CGe]))
call yke(K3v[CGe],n,lxv[CGe],2.)
set liv[CGe]=liv[CGe]+1
if liv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set K7v[CGe]=K7v[CGe]-1
if K7v[CGe]<=0 then
call QDe()
call BlzSetSpecialEffectScale((K6v[CGe]),((.001)*1.))
call Qre(K5v[CGe])
call Qne(lav[CGe])
call Qre(K6v[CGe])
set K6v[CGe]=null
set lav[CGe]=null
set K5v[CGe]=null
set K3v[CGe]=null
set K4v[CGe]=null
call Hxe(CGe)
endif
return false
endfunction
function N6x takes unit u,real d,unit v,real r returns nothing
local integer CGe=Hee()
set K3v[CGe]=u
set K8v[CGe]=GetUnitX(u)
set K9v[CGe]=GetUnitY(u)
set lrv[CGe]=soe(K8v[CGe],K9v[CGe],GetUnitX(v),GetUnitY(v))
set lvv[CGe]=uBe(u,ude(u,3.,.9,LR))
set lev[CGe]=uce(u,ude(u,$FA0,$4B0,LR),'B008')
set lxv[CGe]=ude(u,20,2,LR)
set lov[CGe]=sxe(K8v[CGe],K9v[CGe])
set K5v[CGe]=AddSpecialEffect("war3mapImported\\TYK_tranphai1.mdl",K8v[CGe],K9v[CGe])
set K7v[CGe]=R2I(MR/ mR)
set lav[CGe]=CreateGroup()
set K4v[CGe]=GetOwningPlayer(K3v[CGe])
set liv[CGe]=0
set lvv[CGe]=lvv[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A06R'))
set lev[CGe]=lev[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A06R'))
call BlzSetSpecialEffectYaw((K5v[CGe]),((lrv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((K5v[CGe]),((1.4)*1.))
call BlzSetSpecialEffectZ(K5v[CGe],lov[CGe])
set K6v[CGe]=AddSpecialEffect("war3mapImported\\TYK_bangtamtientu44.mdl",K8v[CGe],K9v[CGe])
call BlzSetSpecialEffectYaw((K6v[CGe]),((lrv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((K6v[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(K6v[CGe],lov[CGe])
call Qre(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl",K3v[CGe],"weapon"))
if r>0 then
set lvv[CGe]=d
set lev[CGe]=d
set lxv[CGe]=r
endif
call QIe(CGe,.03125,true,function N5x)
endfunction
function N7x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
call GroupEnumUnitsInRange(sv,lIv[CGe],lAv[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yKe(lXv[CGe],n,'d',2.5)
call yHe(lXv[CGe],n,'d',1.)
call uee(lXv[CGe],n,false,lRv[CGe],lRv[CGe],THe(lXv[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set lOv[CGe]=lOv[CGe]-1
if lOv[CGe]<=0 then
call QDe()
call Qre(lNv[CGe])
set lNv[CGe]=null
set lXv[CGe]=null
call Hve(CGe)
endif
return false
endfunction
function N8x takes unit u,real d,real x,real y returns nothing
local integer CGe=h9e()
set lXv[CGe]=u
set lRv[CGe]=d
set lIv[CGe]=x
set lAv[CGe]=y
set lOv[CGe]=3
set lNv[CGe]=AddSpecialEffect("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",lIv[CGe],lAv[CGe])
call BlzSetSpecialEffectScale((lNv[CGe]),((1.2)*1.))
call QIe(CGe,.5,true,function N7x)
endfunction
function N9x takes nothing returns boolean
local integer CGe=Qce()
set lDv[CGe]=(((lDv[CGe])*1.)+((pR)*1.)*Cos(((ldv[CGe])*1.)*bj_DEGTORAD))
set lfv[CGe]=(((lfv[CGe])*1.)+((pR)*1.)*Sin(((ldv[CGe])*1.)*bj_DEGTORAD))
call Qre(AddSpecialEffect(("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl"),((lDv[CGe])*1.),((lfv[CGe])*1.)))
call N8x(lCv[CGe],lFv[CGe],lDv[CGe],lfv[CGe])
set lgv[CGe]=lgv[CGe]-1
if lgv[CGe]<=0 then
call QDe()
set lCv[CGe]=null
call h8e(CGe)
endif
return false
endfunction
function bvx takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=h7e()
set lCv[CGe]=u
set ldv[CGe]=a
set lDv[CGe]=(((x)*1.)+((80)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set lfv[CGe]=(((y)*1.)+((80)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set lFv[CGe]=d
set lgv[CGe]=7
call QIe(CGe,.3,true,function N9x)
endfunction
function bex takes unit u,real d,real x,real y,real a returns nothing
call bvx(u,d,x,y,a+30)
call bvx(u,d,x,y,a+90)
call bvx(u,d,x,y,a+$96)
call bvx(u,d,x,y,a+$D2)
call bvx(u,d,x,y,a+270)
call bvx(u,d,x,y,a+330)
endfunction
function bxx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set lkv[CGe]=(((lkv[CGe])*1.)+((pR)*1.)*Cos(((lJv[CGe])*1.)*bj_DEGTORAD))
set lKv[CGe]=(((lKv[CGe])*1.)+((pR)*1.)*Sin(((lJv[CGe])*1.)*bj_DEGTORAD))
call Qre(AddSpecialEffect(("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl"),((lkv[CGe])*1.),((lKv[CGe])*1.)))
call N8x(ljv[CGe],llv[CGe],lkv[CGe],lKv[CGe])
call GroupEnumUnitsInRange(sv,lkv[CGe],lKv[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call GroupClear(sv)
set lLv[CGe]=0
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set lLv[CGe]=lLv[CGe]-1
if lLv[CGe]<=0 then
call QDe()
call bex(ljv[CGe],llv[CGe],lkv[CGe],lKv[CGe],lJv[CGe])
set ljv[CGe]=null
call h6e(CGe)
endif
return false
endfunction
function box takes unit u,real d,real a returns nothing
local integer CGe=h5e()
set ljv[CGe]=u
set llv[CGe]=d
set lJv[CGe]=a
set lkv[CGe]=GetUnitX(u)
set lKv[CGe]=GetUnitY(u)
set lLv[CGe]=$A
call QIe(CGe,.2,true,function bxx)
endfunction
function brx takes unit u,real d returns nothing
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local unit n=null
local real x2=0
local real y2=0
call GroupEnumUnitsInRange(sv,x,y,800,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yHe(u,n,'d',2.)
call uee(u,n,false,d,d,THe(u))
set x2=GetUnitX(n)
set y2=GetUnitY(n)
call s5e(n,sre(x,y,x2,y2),.4,soe(x2,y2,x,y),false,false)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
endfunction
function bix takes nothing returns boolean
local integer CGe=Qce()
call uee(lQv[CGe],lsv[CGe],false,0,lqv[CGe],'B007')
set lPv[CGe]=lPv[CGe]-1
if lPv[CGe]<=0 or spe(lsv[CGe])or spe(lQv[CGe])then
call QDe()
set lQv[CGe]=null
set lsv[CGe]=null
call h4e(CGe)
endif
return false
endfunction
function bax takes unit u,unit v,real d returns nothing
local integer CGe=h3e()
set lQv[CGe]=u
set lsv[CGe]=v
set lqv[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set lPv[CGe]=1
call QIe(CGe,1.,true,function bix)
endfunction
function bnx takes nothing returns boolean
local integer CGe=Qce()
local real x=0
local real y=0
local integer i=0
local integer QZe=4+2*lzv[CGe]
local real b='}'+50*lzv[CGe]
local unit n=null
local integer c=0
loop
exitwhen i>QZe
set x=(((lUv[CGe])*1.)+((b)*1.)*Cos(((360/ QZe*i)*1.)*bj_DEGTORAD))
set y=(((lwv[CGe])*1.)+((b)*1.)*Sin(((360/ QZe*i)*1.)*bj_DEGTORAD))
call Qre(AddSpecialEffect(("war3mapImported\\DMPD_tranphai111.mdl"),((x)*1.),((y)*1.)))
set i=i+1
endloop
call GroupEnumUnitsInRange(sv,lUv[CGe],lwv[CGe],b*2,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,lZv[CGe])and not spe(n)and not tOe(n)then
call yLe(luv[CGe],n,lYv[CGe],1.5)
call Qre(AddSpecialEffectTarget(("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl"),(n),"chest"))
call uee(luv[CGe],n,false,lWv[CGe],lyv[CGe],THe(luv[CGe]))
if lzv[CGe]==2 then
call bax(luv[CGe],n,lyv[CGe])
endif
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set lzv[CGe]=lzv[CGe]+1
if lzv[CGe]>=3 then
call QDe()
set luv[CGe]=null
set lZv[CGe]=null
call h2e(CGe)
endif
return false
endfunction
function bVx takes unit u,real d,unit v,real r returns nothing
local integer CGe=h1e()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set luv[CGe]=u
set lUv[CGe]=GetUnitX(v)
set lwv[CGe]=GetUnitY(v)
set lWv[CGe]=uBe(u,ude(u,3.,.9,PR))
set lyv[CGe]=uce(u,ude(u,$9C4,750,PR),'B007')
set lYv[CGe]=ude(u,20,3,PR)
set lzv[CGe]=0
set lZv[CGe]=GetOwningPlayer(luv[CGe])
set lWv[CGe]=lWv[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A05E'))
set lyv[CGe]=lyv[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A05E'))
call Qre(AddSpecialEffect(("war3mapImported\\DMPD_tranphai111.mdl"),((x)*1.),((y)*1.)))
call Qre(AddSpecialEffect(("war3mapImported\\DMPD_tranphai111.mdl"),((lUv[CGe])*1.),((lwv[CGe])*1.)))
if r>0 then
set lWv[CGe]=d
set lyv[CGe]=d
set lYv[CGe]=r
endif
call QIe(CGe,.2,true,function bnx)
endfunction
function bEx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set l5v[CGe]=(((l5v[CGe])*1.)+((QR)*1.)*Cos(((l9v[CGe])*1.)*bj_DEGTORAD))
set l6v[CGe]=(((l6v[CGe])*1.)+((QR)*1.)*Sin(((l9v[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(l3v[CGe],l5v[CGe],l6v[CGe],l8v[CGe])
call GroupEnumUnitsInRange(sv,l5v[CGe],l6v[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Lvv[CGe])then
call yke(l2v[CGe],n,'d',2.)
call GroupAddUnit(Lvv[CGe],n)
call Qre(AddSpecialEffectTarget(("war3mapImported\\DTK_tranphai222.mdl"),(n),"origin"))
call uee(l2v[CGe],n,true,l7v[CGe],l7v[CGe],THe(l2v[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set l4v[CGe]=l4v[CGe]-1
if l4v[CGe]<=0 then
call QDe()
call Qre(l3v[CGe])
call Qne(Lvv[CGe])
set Lvv[CGe]=null
set l3v[CGe]=null
set l2v[CGe]=null
call h0e(CGe)
endif
return false
endfunction
function bXx takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=h_e()
set l2v[CGe]=u
set l9v[CGe]=a
set l5v[CGe]=x
set l6v[CGe]=y
set l7v[CGe]=d
set l8v[CGe]=sxe(l5v[CGe],l6v[CGe])+'d'
set l3v[CGe]=AddSpecialEffect("war3mapImported\\DTK_missile.mdl",l5v[CGe],l6v[CGe])
set l4v[CGe]=R2I(qR/ QR)
set Lvv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((l3v[CGe]),((l9v[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((l3v[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(l3v[CGe],l8v[CGe])
call QIe(CGe,.03125,true,function bEx)
endfunction
function bOx takes nothing returns boolean
local integer CGe=Qce()
local real x0=GetUnitX(Liv[CGe])
local real y0=GetUnitY(Liv[CGe])
local real x=GetRandomReal(x0-800,x0+800)
local real y=GetRandomReal(y0-800,y0+800)
call bXx(Liv[CGe],Lav[CGe],x,y,GetRandomReal(0,360))
set Lrv[CGe]=Lrv[CGe]-1
if Lrv[CGe]<=0 or spe(Liv[CGe])then
call QDe()
set Liv[CGe]=null
call hZe(CGe)
endif
return false
endfunction
function bRx takes unit u,real d returns nothing
local integer CGe=hze()
set Liv[CGe]=u
set Lav[CGe]=d
set Lrv[CGe]=32
call QIe(CGe,.1,true,function bOx)
endfunction
function bIx takes unit u,real d,unit v returns nothing
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real x2=GetUnitX(v)
local real y2=GetUnitY(v)
call yHe(u,v,'d',3.)
call uee(u,v,false,d,d,THe(u))
call Qre(AddSpecialEffectTarget(("war3mapImported\\TNK_tanduongnhuhuyet3.mdl"),(v),"origin"))
call s5e(v,sre(x,y,x2,y2)-50,.5,soe(x2,y2,x,y),false,false)
endfunction
function bAx takes nothing returns boolean
local integer CGe=Qce()
call uee(LRv[CGe],LIv[CGe],false,0,LOv[CGe],'B007')
set LXv[CGe]=LXv[CGe]-1
if LXv[CGe]<=0 or spe(LIv[CGe])or spe(LRv[CGe])then
call QDe()
set LRv[CGe]=null
set LIv[CGe]=null
call hYe(CGe)
endif
return false
endfunction
function bNx takes unit u,unit v,real d returns nothing
local integer CGe=hye()
set LRv[CGe]=u
set LIv[CGe]=v
set LOv[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set LXv[CGe]=2
call QIe(CGe,1.,true,function bAx)
endfunction
function bbx takes unit u,player p,real x,real y,real d1,real d2,real r returns boolean
local integer c=0
local unit n=null
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
call GroupEnumUnitsInRange(sv,x,y,'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,p)and not spe(n)and not tOe(n)then
call yHe(u,n,r,1.)
call Qre(AddSpecialEffectTarget(("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl"),(n),"chest"))
if(GetUnitAbilityLevel((n),(LE))>0)then
call uee(u,n,false,d1*(1.17+.03*BUe[(i)*(20)+8]),d2*(1.17+.03*BUe[(i)*(20)+8]),THe(u))
call bNx(u,n,d2*(1.17+.03*BUe[(i)*(20)+8]))
else
call uee(u,n,false,d1,d2,THe(u))
call bNx(u,n,d2)
endif
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
return false
endfunction
function bBx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set LDv[CGe]=(((LDv[CGe])*1.)+((SR)*1.)*Cos(((LHv[CGe])*1.)*bj_DEGTORAD))
set Lfv[CGe]=(((Lfv[CGe])*1.)+((SR)*1.)*Sin(((LHv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(LCv[CGe],LDv[CGe],Lfv[CGe],Lhv[CGe])
call GroupEnumUnitsInRange(sv,LDv[CGe],Lfv[CGe],90,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Lcv[CGe])and not spe(n)and not tOe(n)then
call GroupClear(sv)
call bbx(LBv[CGe],Lcv[CGe],GetUnitX(n),GetUnitY(n),LFv[CGe],Lgv[CGe],LGv[CGe])
set Ldv[CGe]=0
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set Ldv[CGe]=Ldv[CGe]-1
if Ldv[CGe]<=0 then
call QDe()
call Qre(LCv[CGe])
set LCv[CGe]=null
set LBv[CGe]=null
set Lcv[CGe]=null
call hWe(CGe)
endif
return false
endfunction
function bcx takes unit u,real d,unit v,real r returns nothing
local integer CGe=hwe()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set LBv[CGe]=u
set LHv[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set LDv[CGe]=(((x)*1.)+((50)*1.)*Cos(((LHv[CGe])*1.)*bj_DEGTORAD))
set Lfv[CGe]=(((y)*1.)+((50)*1.)*Sin(((LHv[CGe])*1.)*bj_DEGTORAD))
set Ldv[CGe]=R2I(sR/ SR)
set LCv[CGe]=AddSpecialEffect("war3mapImported\\DMTT_baovucham3.mdl",LDv[CGe],Lfv[CGe])
set Lhv[CGe]=sxe(LDv[CGe],Lfv[CGe])+'d'
set LFv[CGe]=uBe(u,ude(u,1.,.3,tR))
set Lgv[CGe]=uce(u,ude(u,$3E8,300,tR),'B007')
set LGv[CGe]=ude(u,$F,2,tR)
set Lcv[CGe]=GetOwningPlayer(LBv[CGe])
if r>0 then
set LFv[CGe]=d
set Lgv[CGe]=d
set LGv[CGe]=r
endif
call BlzSetSpecialEffectYaw((LCv[CGe]),((LHv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((LCv[CGe]),((1.6)*1.))
call BlzSetSpecialEffectZ(LCv[CGe],Lhv[CGe])
call QIe(CGe,.03125,true,function bBx)
endfunction
function bCx takes nothing returns boolean
local integer CGe=Qce()
set LKv[CGe]=LKv[CGe]-1
if LKv[CGe]<=0 or spe(Llv[CGe])then
call QDe()
call UnitRemoveAbility(Llv[CGe],'A0XY')
set Llv[CGe]=null
call hUe(CGe)
endif
return false
endfunction
function bdx takes unit u returns nothing
local integer CGe=hue()
set Llv[CGe]=u
set LKv[CGe]=R2I($F/ .03125)
call UnitAddAbility(Llv[CGe],'A0XY')
call QIe(CGe,.03125,true,function bCx)
endfunction
function bDx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
call Qre(AddSpecialEffect(("war3mapImported\\VDQ_thiendia3.mdl"),((LQv[CGe])*1.),((Lsv[CGe])*1.)))
call GroupEnumUnitsInRange(sv,LQv[CGe],Lsv[CGe],300,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yle(LPv[CGe],n,70,.3)
call uee(LPv[CGe],n,true,Lqv[CGe],Lqv[CGe],THe(LPv[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set Lpv[CGe]=Lpv[CGe]-1
if Lpv[CGe]<=0 or spe(LPv[CGe])then
call QDe()
set LPv[CGe]=null
call hTe(CGe)
endif
return false
endfunction
function bfx takes unit u,real d,real x,real y returns nothing
local integer CGe=hte()
set LPv[CGe]=u
set Lqv[CGe]=d
set LQv[CGe]=x
set Lsv[CGe]=y
set Lpv[CGe]=6
call QIe(CGe,.5,true,function bDx)
endfunction
function bFx takes nothing returns boolean
local integer CGe=Qce()
local real x=GetRandomReal(LWv[CGe]-700,LWv[CGe]+700)
local real y=GetRandomReal(Lyv[CGe]-700,Lyv[CGe]+700)
local unit n=null
call Qre(AddSpecialEffect(("war3mapImported\\CLK_loidongcuuthien.mdl"),((x)*1.),((y)*1.)))
call GroupEnumUnitsInRange(sv,x,y,$F0,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yle(LUv[CGe],n,'d',2.)
if(GetUnitAbilityLevel((n),(uE))>0)then
call uee(LUv[CGe],n,true,Lwv[CGe]*3,Lwv[CGe]*3,THe(LUv[CGe]))
else
call uee(LUv[CGe],n,true,Lwv[CGe],Lwv[CGe],THe(LUv[CGe]))
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set Luv[CGe]=Luv[CGe]-1
if Luv[CGe]<=0 or spe(LUv[CGe])then
call QDe()
set LUv[CGe]=null
call hSe(CGe)
endif
return false
endfunction
function bgx takes unit u,real d returns nothing
local integer CGe=hse()
set LUv[CGe]=u
set Lwv[CGe]=d
set LWv[CGe]=GetUnitX(u)
set Lyv[CGe]=GetUnitY(u)
set Luv[CGe]=25
call QIe(CGe,.2,true,function bFx)
endfunction
function bGx takes nothing returns boolean
local integer CGe=Qce()
if spe(L_v[CGe])or not(GetUnitAbilityLevel((L_v[CGe]),(uR))>0)then
call QDe()
call UnitRemoveAbility(L_v[CGe],uR)
call Tje(L_v[CGe],lx,-L0v[CGe])
set L_v[CGe]=null
call hQe(CGe)
endif
return false
endfunction
function bhx takes unit u,real r returns nothing
local integer CGe=hqe()
set L_v[CGe]=u
set L0v[CGe]=r
call tKe(L_v[CGe],uR)
call Tje(L_v[CGe],lx,L0v[CGe])
call QIe(CGe,.03125,true,function bGx)
endfunction
function bHx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real r=ude(u,.2,.02,TR)
if(GetUnitAbilityLevel((u),(uR))>0)then
call UnitRemoveAbility(u,uR)
else
call bhx(u,r)
endif
set u=null
return false
endfunction
function bjx takes nothing returns boolean
return GetSpellAbilityId()==TR and bHx()
endfunction
function bJx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function bjx))
set t=null
endfunction
function bkx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set L7v[CGe]=(((L7v[CGe])*1.)+((wR)*1.)*Cos(((mev[CGe])*1.)*bj_DEGTORAD))
set L8v[CGe]=(((L8v[CGe])*1.)+((wR)*1.)*Sin(((mev[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(L5v[CGe],L7v[CGe],L8v[CGe],mvv[CGe])
call GroupEnumUnitsInRange(sv,L7v[CGe],L8v[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,mxv[CGe])then
call yKe(L4v[CGe],n,'d',2.)
call GroupAddUnit(mxv[CGe],n)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl"),(n),"chest"))
call uee(L4v[CGe],n,true,L9v[CGe],L9v[CGe],THe(L4v[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set L6v[CGe]=L6v[CGe]-1
if L6v[CGe]<=0 then
call QDe()
call Qre(L5v[CGe])
call Qne(mxv[CGe])
set mxv[CGe]=null
set L5v[CGe]=null
set L4v[CGe]=null
call hPe(CGe)
endif
return false
endfunction
function bKx takes unit u,real x,real y,real d,real a returns nothing
local integer CGe=hpe()
set L4v[CGe]=u
set mev[CGe]=a
set L7v[CGe]=x
set L8v[CGe]=y
set L9v[CGe]=d
set mvv[CGe]=sxe(L7v[CGe],L8v[CGe])+'d'
set L5v[CGe]=AddSpecialEffect("war3mapImported\\CBC_tranphai3.mdl",L7v[CGe],L8v[CGe])
set L6v[CGe]=R2I(UR/ wR)
set mxv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((L5v[CGe]),((mev[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((L5v[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(L5v[CGe],mvv[CGe])
call QIe(CGe,.03125,true,function bkx)
endfunction
function blx takes nothing returns boolean
local integer CGe=Qce()
local real a=GetUnitFacing(mav[CGe])
local real x=GetUnitX(mav[CGe])
local real y=GetUnitY(mav[CGe])
if mVv[CGe]>1 then
call bKx(mav[CGe],x,y,mnv[CGe],a)
call bKx(mav[CGe],x,y,mnv[CGe],a+$A)
call bKx(mav[CGe],x,y,mnv[CGe],a-$A)
call bKx(mav[CGe],x,y,mnv[CGe],a+20)
call bKx(mav[CGe],x,y,mnv[CGe],a-20)
call bKx(mav[CGe],x,y,mnv[CGe],a+30)
call bKx(mav[CGe],x,y,mnv[CGe],a-30)
endif
set mVv[CGe]=mVv[CGe]-1
if mVv[CGe]<=0 then
call QDe()
call bKx(mav[CGe],x,y,mnv[CGe],a)
call bKx(mav[CGe],x,y,mnv[CGe],a+20)
call bKx(mav[CGe],x,y,mnv[CGe],a+40)
call bKx(mav[CGe],x,y,mnv[CGe],a+60)
call bKx(mav[CGe],x,y,mnv[CGe],a+80)
call bKx(mav[CGe],x,y,mnv[CGe],a+'d')
call bKx(mav[CGe],x,y,mnv[CGe],a+'x')
call bKx(mav[CGe],x,y,mnv[CGe],a+$8C)
call bKx(mav[CGe],x,y,mnv[CGe],a+$A0)
call bKx(mav[CGe],x,y,mnv[CGe],a+$B4)
call bKx(mav[CGe],x,y,mnv[CGe],a+$C8)
call bKx(mav[CGe],x,y,mnv[CGe],a+$DC)
call bKx(mav[CGe],x,y,mnv[CGe],a+$F0)
call bKx(mav[CGe],x,y,mnv[CGe],a+260)
call bKx(mav[CGe],x,y,mnv[CGe],a+280)
call bKx(mav[CGe],x,y,mnv[CGe],a+300)
call bKx(mav[CGe],x,y,mnv[CGe],a+320)
call bKx(mav[CGe],x,y,mnv[CGe],a+340)
set mav[CGe]=null
call hMe(CGe)
endif
return false
endfunction
function bLx takes unit u,real d returns boolean
local integer CGe=hme()
set mav[CGe]=u
set mnv[CGe]=d
set mVv[CGe]=5
call QIe(CGe,.5,true,function blx)
return false
endfunction
function bmx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real x2=0
local real y2=0
call Qre(AddSpecialEffect(("war3mapImported\\EFF_nghiephoa.mdl"),((mAv[CGe])*1.),((mNv[CGe])*1.)))
call GroupEnumUnitsInRange(sv,mAv[CGe],mNv[CGe],300,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yKe(mRv[CGe],n,'d',2.)
call yHe(mRv[CGe],n,'d',.5)
call uee(mRv[CGe],n,true,mbv[CGe],mbv[CGe],THe(mRv[CGe]))
set x2=GetUnitX(n)
set y2=GetUnitY(n)
call s5e(n,sre(mAv[CGe],mNv[CGe],x2,y2)-'d',.7,soe(x2,y2,mAv[CGe],mNv[CGe]),false,false)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set mIv[CGe]=mIv[CGe]-1
if mIv[CGe]<=0 then
call QDe()
set mRv[CGe]=null
call hLe(CGe)
endif
return false
endfunction
function bMx takes unit u,real d,real x,real y returns nothing
local integer CGe=hle()
set mRv[CGe]=u
set mAv[CGe]=x
set mNv[CGe]=y
set mbv[CGe]=d
set mIv[CGe]=5
call QIe(CGe,1.,true,function bmx)
endfunction
function bpx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set mdv[CGe]=mdv[CGe]-1
if mdv[CGe]<=0 then
call QDe()
call GroupEnumUnitsInRange(sv,mFv[CGe],mgv[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yHe(mfv[CGe],n,'d',1.5)
call uee(mfv[CGe],n,true,mDv[CGe],mDv[CGe],THe(mfv[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set mfv[CGe]=null
call hKe(CGe)
endif
return false
endfunction
function bPx takes unit u,real d,real x,real y returns nothing
local integer CGe=hke()
set mfv[CGe]=u
set mDv[CGe]=d
set mFv[CGe]=x
set mgv[CGe]=y
set mdv[CGe]=1
call QIe(CGe,.5,true,function bpx)
endfunction
function bqx takes nothing returns boolean
local integer CGe=Qce()
local real x=GetRandomReal(mKv[CGe]-350,mKv[CGe]+350)
local real y=GetRandomReal(mlv[CGe]-350,mlv[CGe]+350)
call Qre(AddSpecialEffect(("war3mapImported\\TND_TNLT_Stone3.mdl"),((x)*1.),((y)*1.)))
call bPx(mJv[CGe],mkv[CGe],x,y)
set mjv[CGe]=mjv[CGe]-1
if mjv[CGe]<=0 or spe(mJv[CGe])then
call QDe()
set mJv[CGe]=null
call hJe(CGe)
endif
return false
endfunction
function bQx takes unit u,real d,real x,real y returns nothing
local integer CGe=hje()
set mJv[CGe]=u
set mkv[CGe]=d
set mKv[CGe]=x
set mlv[CGe]=y
set mjv[CGe]=30
call QIe(CGe,.1,true,function bqx)
endfunction
function bsx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set msv[CGe]=(((msv[CGe])*1.)+((yR)*1.)*Cos(((muv[CGe])*1.)*bj_DEGTORAD))
set mSv[CGe]=(((mSv[CGe])*1.)+((yR)*1.)*Sin(((muv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(mqv[CGe],msv[CGe],mSv[CGe],mTv[CGe])
call GroupEnumUnitsInRange(sv,msv[CGe],mSv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,mPv[CGe])then
call uee(mpv[CGe],n,false,mtv[CGe],mtv[CGe],THe(mpv[CGe]))
call yLe(mpv[CGe],n,50,.5)
call GroupAddUnit(mPv[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set mQv[CGe]=mQv[CGe]-1
if mQv[CGe]<=0 then
call QDe()
call Qre(mqv[CGe])
call Qne(mPv[CGe])
set mPv[CGe]=null
set mqv[CGe]=null
set mpv[CGe]=null
call hHe(CGe)
endif
return false
endfunction
function bSx takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=hhe()
set mpv[CGe]=u
set muv[CGe]=a
set msv[CGe]=(((x)*1.)+((50)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set mSv[CGe]=(((y)*1.)+((50)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set mQv[CGe]=R2I(WR/ yR)
set mqv[CGe]=AddSpecialEffect("war3mapImported\\DMTT_baovucham5.mdl",msv[CGe],mSv[CGe])
set mTv[CGe]=sxe(msv[CGe],mSv[CGe])+'d'
set mtv[CGe]=d
set mPv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((mqv[CGe]),((muv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((mqv[CGe]),((.5)*1.))
call BlzSetSpecialEffectZ(mqv[CGe],mTv[CGe])
call QIe(CGe,.03125,true,function bsx)
endfunction
function btx takes nothing returns boolean
local integer CGe=Qce()
local real a=GetUnitFacing(mYv[CGe])
local real x=GetUnitX(mYv[CGe])
local real y=GetUnitY(mYv[CGe])
call bSx(mYv[CGe],mzv[CGe],x,y,a)
call bSx(mYv[CGe],mzv[CGe],x,y,a+$F)
call bSx(mYv[CGe],mzv[CGe],x,y,a+30)
call bSx(mYv[CGe],mzv[CGe],x,y,a-$F)
call bSx(mYv[CGe],mzv[CGe],x,y,a-30)
set myv[CGe]=myv[CGe]-1
if myv[CGe]<=0 or spe(mYv[CGe])then
call QDe()
set mYv[CGe]=null
call hGe(CGe)
endif
return false
endfunction
function bTx takes unit u,real d returns nothing
local integer CGe=hge()
set mYv[CGe]=u
set mzv[CGe]=d
set myv[CGe]=4
call QIe(CGe,.5,true,function btx)
endfunction
function bux takes nothing returns boolean
local integer CGe=Qce()
set m4v[CGe]=m4v[CGe]-1
if m4v[CGe]<=0 or spe(m1v[CGe])then
call QDe()
call TLe(m1v[CGe],-m2v[CGe])
call Tje(m1v[CGe],Fx,-m3v[CGe])
call UnitRemoveAbility(m1v[CGe],'A04S')
set m1v[CGe]=null
call hFe(CGe)
endif
return false
endfunction
function bUx takes unit u,integer lv,integer i returns nothing
local integer CGe=hfe()
set m1v[CGe]=u
set m2v[CGe]=300+50*lv
set m3v[CGe]=.5+.05*lv
set m4v[CGe]=8
call TLe(m1v[CGe],m2v[CGe])
call Tje(m1v[CGe],Fx,m3v[CGe])
call tKe(m1v[CGe],'A04S')
call QIe(CGe,1.,true,function bux)
endfunction
function bwx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
call Qre(AddSpecialEffect(("war3mapImported\\TVC_tramlongeffect3.mdl"),((Mev[CGe])*1.),((Mxv[CGe])*1.)))
call GroupEnumUnitsInRange(sv,Mev[CGe],Mxv[CGe],300,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Mov[CGe])and not spe(n)and not tOe(n)then
call yHe(m8v[CGe],n,'d',1.)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TVC_thualong_target2.mdl"),(n),"origin"))
call uee(m8v[CGe],n,false,m9v[CGe],Mvv[CGe],THe(m8v[CGe]))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set Mrv[CGe]=Mrv[CGe]-1
if Mrv[CGe]<=0 or spe(m8v[CGe])then
call QDe()
set m8v[CGe]=null
set Mov[CGe]=null
call hDe(CGe)
endif
return false
endfunction
function bWx takes unit u,real x,real y,real d1,real d2 returns nothing
local integer CGe=hde()
set m8v[CGe]=u
set m9v[CGe]=d1
set Mvv[CGe]=d2
set Mev[CGe]=x
set Mxv[CGe]=y
set Mrv[CGe]=4
set Mov[CGe]=GetOwningPlayer(m8v[CGe])
call QIe(CGe,.3,true,function bwx)
endfunction
function byx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
set Qv=tMe(MNv[CGe],'e003',MEv[CGe],MXv[CGe],MAv[CGe],.2)
call SetUnitVertexColor(Qv,$FF,$FF,$FF,50)
call SetUnitAnimation(Qv,"attack")
set MEv[CGe]=(((MEv[CGe])*1.)+((YR)*1.)*Cos(((MAv[CGe])*1.)*bj_DEGTORAD))
set MXv[CGe]=(((MXv[CGe])*1.)+((YR)*1.)*Sin(((MAv[CGe])*1.)*bj_DEGTORAD))
if sZe(MEv[CGe],MXv[CGe])then
call SetUnitX(MVv[CGe],MEv[CGe])
call SetUnitY(MVv[CGe],MXv[CGe])
else
set MIv[CGe]=0
endif
set MIv[CGe]=MIv[CGe]-1
if MIv[CGe]<=0 then
call QDe()
call SetPlayerAbilityAvailable((MNv[CGe]),('A04L'),true)
call Qre(AddSpecialEffect(("war3mapImported\\TVC_tramlongeffect3.mdl"),((MEv[CGe])*1.),((MXv[CGe])*1.)))
call GroupEnumUnitsInRange(sv,MEv[CGe],MXv[CGe],300,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,MNv[CGe])and not spe(n)and not tOe(n)then
call yHe(MVv[CGe],n,'d',1.)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TVC_thualong_target2.mdl"),(n),"origin"))
call uee(MVv[CGe],n,false,MOv[CGe],MRv[CGe],THe(MVv[CGe]))
if not(IsUnitType((n),UNIT_TYPE_TAUREN))and not(GetUnitAbilityLevel((n),('A0NA'))>0)then
call s5e(n,$96,.3,soe(GetUnitX(n),GetUnitY(n),MEv[CGe],MXv[CGe]),false,false)
endif
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
call bWx(MVv[CGe],MEv[CGe],MXv[CGe],MOv[CGe],MRv[CGe])
set MVv[CGe]=null
set MNv[CGe]=null
call hCe(CGe)
endif
return false
endfunction
function bYx takes unit u,real d1,real d2,real x,real y returns nothing
local integer CGe=hce()
set MVv[CGe]=u
set MEv[CGe]=GetUnitX(u)
set MXv[CGe]=GetUnitY(u)
set MOv[CGe]=d1
set MRv[CGe]=d2
set MIv[CGe]=R2I(sre(MEv[CGe],MXv[CGe],x,y)/ YR)
set MAv[CGe]=soe(MEv[CGe],MXv[CGe],x,y)
set MNv[CGe]=GetOwningPlayer(MVv[CGe])
call Qre(AddSpecialEffectTarget(("war3mapImported\\TVC_tramlongeffect3.mdl"),(MVv[CGe]),"origin"))
call SetPlayerAbilityAvailable((MNv[CGe]),('A04L'),false)
call QIe(CGe,.03125,true,function byx)
endfunction
function bzx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,4.,1.2,'A04L'))*(1.+TKe(u,4857))
local real d2=uce(u,ude(u,$FA0,$4B0,'A04L'),'B006')*(1.+TKe(u,4857))
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
if BUe[(i)*(20)+$A]>0 then
call bUx(u,BUe[(i)*(20)+$A],i)
endif
call bYx(u,d1,d2,GetSpellTargetX(),GetSpellTargetY())
set u=null
return false
endfunction
function bZx takes nothing returns boolean
return GetSpellAbilityId()=='A04L' and bzx()
endfunction
function b_x takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Filter(function bZx))
set t=null
endfunction
function b0x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set MFv[CGe]=(((MFv[CGe])*1.)+((ZR)*1.)*Cos(((MHv[CGe])*1.)*bj_DEGTORAD))
set Mgv[CGe]=(((Mgv[CGe])*1.)+((ZR)*1.)*Sin(((MHv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(MDv[CGe],MFv[CGe],Mgv[CGe],Mhv[CGe])
call GroupEnumUnitsInRange(sv,MFv[CGe],Mgv[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Mdv[CGe])then
call uee(MCv[CGe],n,true,MGv[CGe],MGv[CGe],THe(MCv[CGe]))
call yle(MCv[CGe],n,'d',1.)
call GroupAddUnit(Mdv[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set Mfv[CGe]=Mfv[CGe]-1
if Mfv[CGe]<=0 then
call QDe()
call Qre(MDv[CGe])
call Qne(Mdv[CGe])
set Mdv[CGe]=null
set MDv[CGe]=null
set MCv[CGe]=null
call hBe(CGe)
endif
return false
endfunction
function b1x takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=hbe()
set MCv[CGe]=u
set MHv[CGe]=a
set MFv[CGe]=x
set Mgv[CGe]=y
set Mfv[CGe]=R2I(zR/ ZR)
set MDv[CGe]=AddSpecialEffect("war3mapImported\\VDK_nhankiemmissile.mdl",MFv[CGe],Mgv[CGe])
set Mhv[CGe]=sxe(MFv[CGe],Mgv[CGe])+'d'
set MGv[CGe]=d
set Mdv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((MDv[CGe]),((MHv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((MDv[CGe]),((.7)*1.))
call BlzSetSpecialEffectZ(MDv[CGe],Mhv[CGe])
call QIe(CGe,.03125,true,function b0x)
endfunction
function b2x takes nothing returns boolean
local integer CGe=Qce()
local real x=(((Mmv[CGe])*1.)+(('d')*1.)*Cos(((20*MLv[CGe])*1.)*bj_DEGTORAD))
local real y=(((MMv[CGe])*1.)+(('d')*1.)*Sin(((20*MLv[CGe])*1.)*bj_DEGTORAD))
call b1x(MKv[CGe],Mlv[CGe],Mmv[CGe],MMv[CGe],20*MLv[CGe])
set MLv[CGe]=MLv[CGe]+1
if MLv[CGe]>=44 or spe(MKv[CGe])then
call QDe()
set MKv[CGe]=null
call hNe(CGe)
endif
return false
endfunction
function b3x takes unit u,real d returns nothing
local integer CGe=hAe()
set MKv[CGe]=u
set Mmv[CGe]=GetUnitX(u)
set MMv[CGe]=GetUnitY(u)
set MLv[CGe]=1
set Mlv[CGe]=d
call QIe(CGe,.1,true,function b2x)
endfunction
function b4x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set MTv[CGe]=(((MTv[CGe])*1.)+((eI)*1.)*Cos(((MWv[CGe])*1.)*bj_DEGTORAD))
set Muv[CGe]=(((Muv[CGe])*1.)+((eI)*1.)*Sin(((MWv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(MSv[CGe],MTv[CGe],Muv[CGe],Mwv[CGe])
call GroupEnumUnitsInRange(sv,MTv[CGe],Muv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Msv[CGe])then
call uee(MQv[CGe],n,true,MUv[CGe],MUv[CGe],THe(MQv[CGe]))
call yle(MQv[CGe],n,'d',1.)
call GroupAddUnit(Msv[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set Mtv[CGe]=Mtv[CGe]-1
if Mtv[CGe]<=0 then
call QDe()
call Qre(MSv[CGe])
call Qne(Msv[CGe])
set Msv[CGe]=null
set MSv[CGe]=null
set MQv[CGe]=null
call hIe(CGe)
endif
return false
endfunction
function b5x takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=hRe()
set MQv[CGe]=u
set MWv[CGe]=a
set MTv[CGe]=(((x)*1.)+((50)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set Muv[CGe]=(((y)*1.)+((50)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set Mtv[CGe]=R2I(vI/ eI)
set MSv[CGe]=AddSpecialEffect("war3mapImported\\VDQ_thaicuc.mdl",MTv[CGe],Muv[CGe])
set Mwv[CGe]=sxe(MTv[CGe],Muv[CGe])
set MUv[CGe]=d
set Msv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((MSv[CGe]),((MWv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((MSv[CGe]),((.6)*1.))
call BlzSetSpecialEffectZ(MSv[CGe],Mwv[CGe])
call QIe(CGe,.03125,true,function b4x)
endfunction
function b6x takes nothing returns boolean
local integer CGe=Qce()
local real a=GetUnitFacing(M_v[CGe])
local real x=GetUnitX(M_v[CGe])
local real y=GetUnitY(M_v[CGe])
call b5x(M_v[CGe],M0v[CGe],x,y,a)
call b5x(M_v[CGe],M0v[CGe],x,y,a+$A)
call b5x(M_v[CGe],M0v[CGe],x,y,a+20)
call b5x(M_v[CGe],M0v[CGe],x,y,a+30)
call b5x(M_v[CGe],M0v[CGe],x,y,a+40)
call b5x(M_v[CGe],M0v[CGe],x,y,a-$A)
call b5x(M_v[CGe],M0v[CGe],x,y,a-20)
call b5x(M_v[CGe],M0v[CGe],x,y,a-30)
call b5x(M_v[CGe],M0v[CGe],x,y,a-40)
set MZv[CGe]=MZv[CGe]-1
if MZv[CGe]<=0 or spe(M_v[CGe])then
call QDe()
set M_v[CGe]=null
call hOe(CGe)
endif
return false
endfunction
function b7x takes unit u,real d returns nothing
local integer CGe=hXe()
set M_v[CGe]=u
set M0v[CGe]=d
set MZv[CGe]=4
call QIe(CGe,1.,true,function b6x)
endfunction
function b8x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
call GroupEnumUnitsInRange(sv,M7v[CGe],M8v[CGe],400,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call uee(M4v[CGe],n,true,M9v[CGe],M9v[CGe],THe(M4v[CGe]))
call yHe(M4v[CGe],n,'d',.6)
endif
call GroupRemoveUnit(sv,n)
endloop
set M6v[CGe]=M6v[CGe]-1
if M6v[CGe]<=0 then
call QDe()
call Qre(M5v[CGe])
set M5v[CGe]=null
set M4v[CGe]=null
call hEe(CGe)
endif
return false
endfunction
function b9x takes unit u,real d,real x,real y returns nothing
local integer CGe=hVe()
set M4v[CGe]=u
set M7v[CGe]=x
set M8v[CGe]=y
set M6v[CGe]=4
set M5v[CGe]=AddSpecialEffect("war3mapImported\\EFF_TL1.mdl",M7v[CGe],M8v[CGe])
set M9v[CGe]=d
call BlzSetSpecialEffectScale((M5v[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(M5v[CGe],sxe(M7v[CGe],M8v[CGe]))
call QIe(CGe,1.,true,function b8x)
endfunction
function Bvx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set pnv[CGe]=(((pnv[CGe])*1.)+((oI)*1.)*Cos(((pOv[CGe])*1.)*bj_DEGTORAD))
set pVv[CGe]=(((pVv[CGe])*1.)+((oI)*1.)*Sin(((pOv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(piv[CGe],pnv[CGe],pVv[CGe],pXv[CGe])
call GroupEnumUnitsInRange(sv,pnv[CGe],pVv[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,prv[CGe])then
call uee(pov[CGe],n,false,pEv[CGe],pEv[CGe],THe(pov[CGe]))
call yle(pov[CGe],n,'d',1.5)
call GroupAddUnit(prv[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set pav[CGe]=pav[CGe]-1
if pav[CGe]<=0 then
call QDe()
call Qre(piv[CGe])
call Qne(prv[CGe])
set prv[CGe]=null
set piv[CGe]=null
set pov[CGe]=null
call hne(CGe)
endif
return false
endfunction
function Bex takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=hae()
set pov[CGe]=u
set pOv[CGe]=a
set pnv[CGe]=(((x)*1.)+((50)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set pVv[CGe]=(((y)*1.)+((50)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set pav[CGe]=R2I(xI/ oI)
set piv[CGe]=AddSpecialEffect("war3mapImported\\CLD_gioloc2.mdl",pnv[CGe],pVv[CGe])
set pXv[CGe]=sxe(pnv[CGe],pVv[CGe])
set pEv[CGe]=d
set prv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((piv[CGe]),((pOv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((piv[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(piv[CGe],pXv[CGe])
call QIe(CGe,.03125,true,function Bvx)
endfunction
function Bxx takes unit u,real d returns nothing
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local integer i=1
loop
exitwhen i>24
call Bex(u,d,(((x)*1.)+(($5DC)*1.)*Cos(((i*$F)*1.)*bj_DEGTORAD)),(((y)*1.)+(($5DC)*1.)*Sin(((i*$F)*1.)*bj_DEGTORAD)),i*$F+$B4)
set i=i+1
endloop
endfunction
function Box takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set pCv[CGe]=(((pCv[CGe])*1.)+((iI)*1.)*Cos(((pFv[CGe])*1.)*bj_DEGTORAD))
set pdv[CGe]=(((pdv[CGe])*1.)+((iI)*1.)*Sin(((pFv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(pBv[CGe],pCv[CGe],pdv[CGe],pfv[CGe])
call GroupEnumUnitsInRange(sv,pCv[CGe],pdv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,pbv[CGe])then
call uee(pNv[CGe],n,true,pDv[CGe],pDv[CGe],THe(pNv[CGe]))
call yke(pNv[CGe],n,'d',2.5)
call GroupAddUnit(pbv[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set pcv[CGe]=pcv[CGe]-1
if pcv[CGe]<=0 then
call QDe()
call Qre(pBv[CGe])
call Qne(pbv[CGe])
set pbv[CGe]=null
set pBv[CGe]=null
set pNv[CGe]=null
call hie(CGe)
endif
return false
endfunction
function Brx takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=hre()
set pNv[CGe]=u
set pFv[CGe]=a
set pCv[CGe]=(((x)*1.)+((50)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set pdv[CGe]=(((y)*1.)+((50)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set pcv[CGe]=R2I(rI/ iI)
set pBv[CGe]=AddSpecialEffect("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",pCv[CGe],pdv[CGe])
set pfv[CGe]=sxe(pCv[CGe],pdv[CGe])+'d'
set pDv[CGe]=d
set pbv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((pBv[CGe]),((pFv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((pBv[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(pBv[CGe],pfv[CGe])
call QIe(CGe,.03125,true,function Box)
endfunction
function Bix takes nothing returns boolean
local integer CGe=Qce()
local real a=GetUnitFacing(pjv[CGe])
local real x=GetUnitX(pjv[CGe])
local real y=GetUnitY(pjv[CGe])
call Brx(pjv[CGe],pJv[CGe],x,y,a)
call Brx(pjv[CGe],pJv[CGe],x,y,a+$A)
call Brx(pjv[CGe],pJv[CGe],x,y,a+20)
call Brx(pjv[CGe],pJv[CGe],x,y,a+30)
call Brx(pjv[CGe],pJv[CGe],x,y,a+40)
call Brx(pjv[CGe],pJv[CGe],x,y,a-$A)
call Brx(pjv[CGe],pJv[CGe],x,y,a-20)
call Brx(pjv[CGe],pJv[CGe],x,y,a-30)
call Brx(pjv[CGe],pJv[CGe],x,y,a-40)
set pHv[CGe]=pHv[CGe]-1
if pHv[CGe]<=0 or spe(pjv[CGe])then
call QDe()
set pjv[CGe]=null
call hoe(CGe)
endif
return false
endfunction
function Bax takes unit u,real d returns nothing
local integer CGe=hxe()
set pjv[CGe]=u
set pJv[CGe]=d
set pHv[CGe]=3
call QIe(CGe,1.,true,function Bix)
endfunction
function Bnx takes nothing returns boolean
local integer CGe=Qce()
if ppv[CGe]>=$A then
call UnitRemoveBuffs(pLv[CGe],false,true)
endif
if ppv[CGe]==$A then
call Tje(pLv[CGe],4888,-pmv[CGe])
call u_e(pLv[CGe],-pMv[CGe])
call UnitRemoveAbility(pLv[CGe],aI)
endif
set ppv[CGe]=ppv[CGe]-1
if ppv[CGe]<=0 then
call QDe()
set nI[pPv[CGe]]=false
set pLv[CGe]=null
call hee(CGe)
endif
return false
endfunction
function BVx takes unit u,integer lv,integer i returns nothing
local integer CGe=hve()
set pLv[CGe]=u
set pmv[CGe]=80+20*lv
set pMv[CGe]=8+2*lv
set ppv[CGe]=$E
set pPv[CGe]=i
set nI[pPv[CGe]]=true
call Tje(pLv[CGe],4888,pmv[CGe])
call u_e(pLv[CGe],pMv[CGe])
call tKe(pLv[CGe],aI)
call QIe(CGe,1.,true,function Bnx)
endfunction
function BEx takes nothing returns boolean
local integer CGe=Qce()
call Tse(pSv[CGe],ptv[CGe])
call Qle("|cff7fff00"+"+"+I2S(R2I(ptv[CGe]))+"|r",GetUnitX(pSv[CGe]),GetUnitY(pSv[CGe]))
set pTv[CGe]=pTv[CGe]-1
if pTv[CGe]<=0 or spe(pSv[CGe])then
call QDe()
set pSv[CGe]=null
call G9e(CGe)
endif
return false
endfunction
function BXx takes unit u,real r returns nothing
local integer CGe=G8e()
set pSv[CGe]=u
set ptv[CGe]=r
set pTv[CGe]=3
call QIe(CGe,1.,true,function BEx)
endfunction
function BOx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d=ude(u,.05,.01,VI)*GetUnitState(u,UNIT_STATE_MAX_LIFE)
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local player p=GetOwningPlayer(u)
local unit n=null
call Qre(AddSpecialEffect(("war3mapImported\\NMK_tuhang.mdx"),((x)*1.),((y)*1.)))
call Qre(AddSpecialEffect(("war3mapImported\\NMK_tuhang2.mdl"),((x)*1.),((y)*1.)))
call GroupEnumUnitsInRange(sv,x,y,500,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitAlly(n,p)and not spe(n)and(IsUnitType((n),UNIT_TYPE_HERO))and GetUnitTypeId(n)!='H00K' then
call UnitRemoveBuffs(n,false,true)
call Qre(AddSpecialEffectTarget(("war3mapImported\\NMK_effect8.mdl"),(n),"origin"))
call BXx(n,d)
endif
call GroupRemoveUnit(sv,n)
endloop
set u=null
set p=null
return false
endfunction
function BRx takes nothing returns boolean
return GetSpellAbilityId()==VI and BOx()
endfunction
function BIx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function BRx))
set t=null
endfunction
function BAx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
if pYv[CGe]>1 then
call Qre(AddSpecialEffect(("war3mapImported\\TVC_tranphai5.mdl"),((GetRandomReal(pzv[CGe]-'d',pzv[CGe]+'d'))*1.),((GetRandomReal(pZv[CGe]-'d',pZv[CGe]+'d'))*1.)))
endif
call GroupEnumUnitsInRange(sv,pzv[CGe],pZv[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,pyv[CGe])and not spe(n)and not tOe(n)then
call yHe(pWv[CGe],n,p1v[CGe],1.)
call uee(pWv[CGe],n,false,p_v[CGe],p0v[CGe],THe(pWv[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set pYv[CGe]=pYv[CGe]-1
if pYv[CGe]<=0 then
call QDe()
set pWv[CGe]=null
set pyv[CGe]=null
call G7e(CGe)
endif
return false
endfunction
function BNx takes unit u,real d,unit v,real r returns nothing
local integer CGe=G6e()
local real a=GetUnitFacing(u)
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set pWv[CGe]=u
set pzv[CGe]=GetUnitX(v)
set pZv[CGe]=GetUnitY(v)
set pYv[CGe]=3
set p_v[CGe]=uBe(u,ude(u,3.,.9,EI))
set p0v[CGe]=uce(u,ude(u,$BB8,900,EI),'B006')
set p1v[CGe]=ude(u,$F,2,EI)
set pyv[CGe]=GetOwningPlayer(pWv[CGe])
set p2v[CGe]=GetPlayerId(pyv[CGe])+1
set p_v[CGe]=p_v[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A04K'))
set p0v[CGe]=p0v[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A04K'))
call Qre(AddSpecialEffect(("war3mapImported\\TVC_tranphai5.mdl"),((GetRandomReal(pzv[CGe]-'d',pzv[CGe]+'d'))*1.),((GetRandomReal(pZv[CGe]-'d',pZv[CGe]+'d'))*1.)))
call Qre(AddSpecialEffect(("war3mapImported\\TVC_tranphai4.mdl"),((x)*1.),((y)*1.)))
if r>0 then
set p_v[CGe]=d
set p0v[CGe]=d
set p1v[CGe]=r
endif
call QIe(CGe,.1667,true,function BAx)
endfunction
function Bbx takes nothing returns boolean
local integer CGe=Qce()
if spe(p6v[CGe])or not(GetUnitAbilityLevel((p6v[CGe]),(OI))>0)then
call QDe()
call UnitRemoveAbility(p6v[CGe],OI)
if not yJ[p7v[CGe]]then
call T_e(p6v[CGe],-p8v[CGe])
endif
call Tje(p6v[CGe],Ax,-p9v[CGe])
set p6v[CGe]=null
call G5e(CGe)
endif
return false
endfunction
function BBx takes unit u,real r1,real r2 returns nothing
local integer CGe=G4e()
set p6v[CGe]=u
set p8v[CGe]=r1
set p9v[CGe]=r2
set p7v[CGe]=(GetPlayerId(GetOwningPlayer((u)))+1)
call tKe(p6v[CGe],OI)
call T_e(p6v[CGe],p8v[CGe])
call Tje(p6v[CGe],Ax,p9v[CGe])
call QIe(CGe,.03125,true,function Bbx)
endfunction
function Bcx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real r1=ude(u,.2,.02,XI)
local real r2=ude(u,'d',30,XI)
if(GetUnitAbilityLevel((u),(OI))>0)then
call UnitRemoveAbility(u,OI)
else
call BBx(u,r1,r2)
endif
set u=null
return false
endfunction
function BCx takes nothing returns boolean
return GetSpellAbilityId()==XI and Bcx()
endfunction
function Bdx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function BCx))
set t=null
endfunction
function BDx takes nothing returns boolean
local integer CGe=Qce()
set Piv[CGe]=Piv[CGe]+1
if Piv[CGe]==2 then
set Piv[CGe]=0
if AI[Pav[CGe]]<$B+GetUnitAbilityLevel(Pov[CGe],RI)then
set AI[Pav[CGe]]=AI[Pav[CGe]]+1
call Qle("|cff0078d7"+"+"+I2S(R2I(AI[Pav[CGe]]*$A))+"%|r",GetUnitX(Pov[CGe]),GetUnitY(Pov[CGe]))
endif
endif
if spe(Pov[CGe])or not(GetUnitAbilityLevel((Pov[CGe]),(II))>0)then
call QDe()
call UnitRemoveAbility(Pov[CGe],II)
call Tje(Pov[CGe],572,-Prv[CGe])
call Tje(Pov[CGe],7896,-Prv[CGe])
call Tje(Pov[CGe],lx,-Prv[CGe])
call Tje(Pov[CGe],6210,-Prv[CGe])
set Pov[CGe]=null
call G3e(CGe)
endif
return false
endfunction
function Bfx takes unit u,real r1 returns nothing
local integer CGe=G2e()
set Pov[CGe]=u
set Prv[CGe]=r1
set Pav[CGe]=(GetPlayerId(GetOwningPlayer((u)))+1)
set Piv[CGe]=0
call tKe(Pov[CGe],II)
call Tje(Pov[CGe],572,Prv[CGe])
call Tje(Pov[CGe],7896,Prv[CGe])
call Tje(Pov[CGe],lx,Prv[CGe])
call Tje(Pov[CGe],6210,Prv[CGe])
call QIe(CGe,1.,true,function BDx)
endfunction
function BFx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real r1=ude(u,.16,.04,RI)
if(GetUnitAbilityLevel((u),(II))>0)then
call UnitRemoveAbility(u,II)
else
call Bfx(u,r1)
endif
set u=null
return false
endfunction
function Bgx takes nothing returns boolean
return GetSpellAbilityId()==RI and BFx()
endfunction
function BGx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function Bgx))
set t=null
endfunction
function Bhx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=0
local integer id=0
set PNv[CGe]=(((PNv[CGe])*1.)+((bI)*1.)*Cos(((PDv[CGe])*1.)*bj_DEGTORAD))
set Pbv[CGe]=(((Pbv[CGe])*1.)+((bI)*1.)*Sin(((PDv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(PIv[CGe],PNv[CGe],Pbv[CGe],Pdv[CGe])
if PFv[CGe]<4 then
call GroupEnumUnitsInRange(sv,PNv[CGe],Pbv[CGe],90,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,POv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,PRv[CGe])then
set id=GetHandleId(n)
if LoadInteger(la,id,Pfv[CGe])==0 then
call SaveInteger(la,id,Pfv[CGe],1)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl"),(n),"chest"))
call yke(PXv[CGe],n,PCv[CGe],2.)
call uee(PXv[CGe],n,true,PBv[CGe],Pcv[CGe],THe(PXv[CGe]))
endif
call GroupAddUnit(PRv[CGe],n)
set PFv[CGe]=PFv[CGe]+1
if PFv[CGe]>=4 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set PAv[CGe]=PAv[CGe]-1
if PAv[CGe]<=0 then
call QDe()
loop
set n=FirstOfGroup(PRv[CGe])
exitwhen n==null
call SaveInteger(la,GetHandleId(n),Pfv[CGe],0)
call GroupRemoveUnit(PRv[CGe],n)
endloop
call Qre(PIv[CGe])
call Qne(PRv[CGe])
set PRv[CGe]=null
set PIv[CGe]=null
set PXv[CGe]=null
set POv[CGe]=null
call G1e(CGe)
endif
return false
endfunction
function BHx takes unit u,real x,real y,real d1,real d2,real r,real a,integer K returns nothing
local integer CGe=G0e()
set PXv[CGe]=u
set PDv[CGe]=a
set PNv[CGe]=x
set Pbv[CGe]=y
set POv[CGe]=GetOwningPlayer(PXv[CGe])
set PAv[CGe]=R2I(NI/ bI)
set PIv[CGe]=AddSpecialEffect("war3mapImported\\NMC_tutuongmissile.mdl",PNv[CGe],Pbv[CGe])
set Pdv[CGe]=sxe(PNv[CGe],Pbv[CGe])+'d'
set PBv[CGe]=d1
set Pcv[CGe]=d2
set PFv[CGe]=0
set PCv[CGe]=r
set PRv[CGe]=CreateGroup()
set Pfv[CGe]=K
call BlzSetSpecialEffectYaw((PIv[CGe]),((PDv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((PIv[CGe]),((1.5)*1.))
call BlzSetSpecialEffectZ(PIv[CGe],Pdv[CGe])
call QIe(CGe,.03125,true,function Bhx)
endfunction
function Bjx takes nothing returns boolean
local integer CGe=Qce()
local integer c=0
local unit n=null
local integer rd=GetRandomInt($F4240,$98967F)
set Pjv[CGe]=Pjv[CGe]-1
if Pjv[CGe]==1 then
call GroupEnumUnitsInRange(sv,PJv[CGe],Pkv[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,PMv[CGe])and not spe(n)and not tOe(n)then
call yke(PHv[CGe],n,PLv[CGe],2.)
call uee(PHv[CGe],n,true,PKv[CGe],Plv[CGe],THe(PHv[CGe]))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
if Pjv[CGe]<=0 then
call QDe()
call BHx(PHv[CGe],PJv[CGe],Pkv[CGe],PKv[CGe],Plv[CGe],PLv[CGe],Pmv[CGe]+45,rd)
call BHx(PHv[CGe],PJv[CGe],Pkv[CGe],PKv[CGe],Plv[CGe],PLv[CGe],Pmv[CGe]+$87,rd)
call BHx(PHv[CGe],PJv[CGe],Pkv[CGe],PKv[CGe],Plv[CGe],PLv[CGe],Pmv[CGe]+$E1,rd)
call BHx(PHv[CGe],PJv[CGe],Pkv[CGe],PKv[CGe],Plv[CGe],PLv[CGe],Pmv[CGe]+315,rd)
set PMv[CGe]=null
set PHv[CGe]=null
call G_e(CGe)
endif
return false
endfunction
function BJx takes unit u,real d,unit v,real r returns nothing
local integer CGe=GZe()
set PHv[CGe]=u
set PJv[CGe]=GetUnitX(v)
set Pkv[CGe]=GetUnitY(v)
set Pjv[CGe]=2
set PKv[CGe]=uBe(u,ude(u,1.,.3,BI))
set Plv[CGe]=uce(u,ude(u,$3E8,300,BI),'B008')
set PLv[CGe]=ude(u,20,2,BI)
set PMv[CGe]=GetOwningPlayer(PHv[CGe])
set Pmv[CGe]=GetUnitFacing(PHv[CGe])
if r>0 then
set PKv[CGe]=d
set Plv[CGe]=d
set PLv[CGe]=r
endif
call Qre(AddSpecialEffect(("war3mapImported\\NMC_effect.mdl"),((PJv[CGe])*1.),((Pkv[CGe])*1.)))
call QIe(CGe,.15,true,function Bjx)
endfunction
function Bkx takes nothing returns boolean
local integer CGe=Qce()
if spe(PQv[CGe])or not(GetUnitAbilityLevel((PQv[CGe]),(CI))>0)then
call QDe()
call Qre(yb[PTv[CGe]])
set yb[PTv[CGe]]=null
call UnitRemoveAbility(PQv[CGe],CI)
call u_e(PQv[CGe],-Psv[CGe])
call Tje(PQv[CGe],7185,-PSv[CGe])
call Tje(PQv[CGe],6210,-Ptv[CGe])
set PQv[CGe]=null
call Gze(CGe)
endif
return false
endfunction
function BKx takes unit u,real r1,real r2,real r3 returns nothing
local integer CGe=GYe()
set PQv[CGe]=u
set Psv[CGe]=r1
set PSv[CGe]=r2
set Ptv[CGe]=r3
set PTv[CGe]=(GetPlayerId(GetOwningPlayer((u)))+1)
if(bde[(GetPlayerId(GetOwningPlayer(((PQv[CGe])))))])and not(GetUnitAbilityLevel(((PQv[CGe])),('A0YV'))>0)then
set yb[PTv[CGe]]=UCe(bDe[PTv[CGe]],Yb[PTv[CGe]],"origin")
else
set yb[PTv[CGe]]=UCe(PQv[CGe],Yb[PTv[CGe]],"origin")
endif
call tKe(PQv[CGe],CI)
call u_e(PQv[CGe],Psv[CGe])
call Tje(PQv[CGe],7185,PSv[CGe])
call Tje(PQv[CGe],6210,Ptv[CGe])
call QIe(CGe,.03125,true,function Bkx)
endfunction
function Blx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real r1=ude(u,4,1,cI)
local real r2=ude(u,'d',20,cI)
local real r3=ude(u,.2,.02,cI)
if(GetUnitAbilityLevel((u),(CI))>0)then
call UnitRemoveAbility(u,CI)
else
call BKx(u,r1,r2,r3)
endif
set u=null
return false
endfunction
function BLx takes nothing returns boolean
return GetSpellAbilityId()==cI and Blx()
endfunction
function Bmx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function BLx))
set t=null
endfunction
function BMx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set PWv[CGe]=PWv[CGe]-1
if PWv[CGe]<=0 then
call QDe()
call GroupEnumUnitsInRange(sv,Pzv[CGe],PZv[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yHe(PYv[CGe],n,'d',1.5)
call uee(PYv[CGe],n,true,Pyv[CGe],Pyv[CGe],THe(PYv[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set PYv[CGe]=null
call Gye(CGe)
endif
return false
endfunction
function Bpx takes unit u,real d,real x,real y returns nothing
local integer CGe=GWe()
set PYv[CGe]=u
set Pyv[CGe]=d
set Pzv[CGe]=x
set PZv[CGe]=y
set PWv[CGe]=1
call QIe(CGe,.5,true,function BMx)
endfunction
function BPx takes nothing returns boolean
local integer CGe=Qce()
local real x0=GetUnitX(P3v[CGe])
local real y0=GetUnitY(P3v[CGe])
local real x=GetRandomReal(x0-800,x0+800)
local real y=GetRandomReal(y0-800,y0+800)
call Qre(AddSpecialEffect(("war3mapImported\\TND_TNLT_Stone3.mdl"),((x)*1.),((y)*1.)))
call Bpx(P3v[CGe],P4v[CGe],x,y)
set P2v[CGe]=P2v[CGe]-1
if P2v[CGe]<=0 or spe(P3v[CGe])then
call QDe()
set P3v[CGe]=null
call Gwe(CGe)
endif
return false
endfunction
function Bqx takes unit u,real d returns nothing
local integer CGe=GUe()
set P3v[CGe]=u
set P4v[CGe]=d
set P2v[CGe]=50
call QIe(CGe,.1,true,function BPx)
endfunction
function BQx takes unit u,real d,real x,real y returns nothing
local unit n=null
call GroupEnumUnitsInRange(sv,x,y,$FA,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl"),(n),"chest"))
call yHe(u,n,'d',.5)
call uee(u,n,true,d,d,THe(u))
endif
call GroupRemoveUnit(sv,n)
endloop
endfunction
function Bsx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
if not spe(qav[CGe])then
set qiv[CGe]=soe(qev[CGe],qxv[CGe],GetUnitX(qav[CGe]),GetUnitY(qav[CGe]))
endif
set qev[CGe]=(((qev[CGe])*1.)+((dI)*1.)*Cos(((qiv[CGe])*1.)*bj_DEGTORAD))
set qxv[CGe]=(((qxv[CGe])*1.)+((dI)*1.)*Sin(((qiv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(P9v[CGe],qev[CGe],qxv[CGe],qrv[CGe])
call GroupEnumUnitsInRange(sv,qev[CGe],qxv[CGe],90,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call BQx(P8v[CGe],qov[CGe],qev[CGe],qxv[CGe])
call GroupClear(sv)
set qvv[CGe]=0
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set qvv[CGe]=qvv[CGe]-1
if qvv[CGe]<=0 then
call QDe()
call Qre(P9v[CGe])
set P9v[CGe]=null
set qav[CGe]=null
set P8v[CGe]=null
call Gue(CGe)
endif
return false
endfunction
function BSx takes unit u,real x,real y,real d,unit v returns nothing
local integer CGe=GTe()
set P8v[CGe]=u
set qiv[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set qev[CGe]=x
set qxv[CGe]=y
set qav[CGe]=v
set qov[CGe]=d
set qrv[CGe]=sxe(qev[CGe],qxv[CGe])+'d'
set P9v[CGe]=AddSpecialEffect("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl",qev[CGe],qxv[CGe])
set qvv[CGe]=$FA
call BlzSetSpecialEffectYaw((P9v[CGe]),((qiv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((P9v[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(P9v[CGe],qrv[CGe])
call QIe(CGe,.03125,true,function Bsx)
endfunction
function Btx takes unit u,real d returns nothing
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local unit n=null
call GroupEnumUnitsInRange(sv,x,y,$5DC,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and(IsUnitType((n),UNIT_TYPE_HERO))then
call BSx(u,x,y,d,n)
endif
call GroupRemoveUnit(sv,n)
endloop
endfunction
function BTx takes nothing returns boolean
local integer CGe=Qce()
set qXv[CGe]=qXv[CGe]-1
if qXv[CGe]<=0 or spe(qOv[CGe])or not(GetUnitAbilityLevel((qOv[CGe]),(DI))>0)then
call QDe()
call UnitRemoveAbility(qOv[CGe],DI)
call Tue(qOv[CGe],qRv[CGe])
set qOv[CGe]=null
call Gte(CGe)
endif
return false
endfunction
function Bux takes unit u,integer i,unit v returns nothing
local integer CGe=GSe()
set qOv[CGe]=v
set qRv[CGe]=80+20*BUe[(i)*(20)+4]
set qXv[CGe]=R2I(10./ .03125)
call tKe(qOv[CGe],DI)
call Tue(qOv[CGe],-qRv[CGe])
call QIe(CGe,.03125,true,function BTx)
endfunction
function BUx takes nothing returns boolean
local integer CGe=Qce()
if(GetUnitAbilityLevel((qdv[CGe]),(DI))>0)and TQe(qdv[CGe])<=30. then
call uee(qcv[CGe],qdv[CGe],false,0,qBv[CGe]*(1.07+.03*BUe[(qCv[CGe])*(20)+4]),'B007')
else
call uee(qcv[CGe],qdv[CGe],false,0,qBv[CGe],'B007')
endif
set qbv[CGe]=qbv[CGe]-1
if qbv[CGe]<=0 or spe(qdv[CGe])or spe(qcv[CGe])then
call QDe()
set qcv[CGe]=null
set qdv[CGe]=null
call Gse(CGe)
endif
return false
endfunction
function Bwx takes unit u,unit v,real d returns nothing
local integer CGe=GQe()
set qcv[CGe]=u
set qdv[CGe]=v
set qBv[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set qbv[CGe]=1
call QIe(CGe,1.,true,function BUx)
endfunction
function BWx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real x=GetUnitX(qgv[CGe])
local real y=GetUnitY(qgv[CGe])
local integer c=0
local real TTe=GetUnitState(qgv[CGe],UNIT_STATE_MANA)
local real z=0
if TTe>=qHv[CGe]then
call SetUnitState(qgv[CGe],UNIT_STATE_MANA,TTe-qHv[CGe])
call GroupEnumUnitsInRange(sv,x,y,400,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,qjv[CGe])and not spe(n)and not tOe(n)then
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\NightElf\\Immolation\\ImmolationDamage.mdl"),(n),"chest"))
call uee(qgv[CGe],n,false,qGv[CGe],qhv[CGe],THe(qgv[CGe]))
call Bwx(qgv[CGe],n,qhv[CGe])
if BUe[(qJv[CGe])*(20)+9]>0 then
set z=GetUnitState(n,UNIT_STATE_MANA)
call SetUnitState(n,UNIT_STATE_MANA,z-z*(.04+.02*BUe[(qJv[CGe])*(20)+9]))
endif
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
if spe(qgv[CGe])or not(GetUnitAbilityLevel((qgv[CGe]),(FI))>0)then
call QDe()
call UnitRemoveAbility(qgv[CGe],FI)
call Qre(yb[qJv[CGe]])
set yb[qJv[CGe]]=null
set qgv[CGe]=null
set qjv[CGe]=null
call Gqe(CGe)
endif
return false
endfunction
function Byx takes unit u,integer i,real d1,real d2,real m returns nothing
local integer CGe=GPe()
set qgv[CGe]=u
set qGv[CGe]=d1
set qhv[CGe]=d2
set qHv[CGe]=m
set qjv[CGe]=GetOwningPlayer(qgv[CGe])
set qJv[CGe]=i
if not(bde[(GetPlayerId(GetOwningPlayer(((qgv[CGe])))))])and not(GetUnitAbilityLevel(((qgv[CGe])),('A0YV'))>0)then
set yb[qJv[CGe]]=UCe(qgv[CGe],Yb[qJv[CGe]],"origin")
else
set yb[qJv[CGe]]=UCe(bDe[qJv[CGe]],Yb[qJv[CGe]],"origin")
endif
call tKe(qgv[CGe],FI)
call QIe(CGe,2.,true,function BWx)
endfunction
function BYx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,1.,.3,fI))
local real d2=uce(u,ude(u,$7D0,600,fI),'B007')
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
local real m=ude(u,'x',20,fI)-$A*BUe[(i)*(20)+9]
if m<=0 then
set m=$A
endif
if(GetUnitAbilityLevel((u),(FI))>0)then
call UnitRemoveAbility(u,FI)
else
call Byx(u,i,d1,d2,m)
endif
set u=null
return false
endfunction
function Bzx takes nothing returns boolean
return GetSpellAbilityId()==fI and BYx()
endfunction
function BZx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function Bzx))
set t=null
endfunction
function B_x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set qPv[CGe]=(((qPv[CGe])*1.)+((GI)*1.)*Cos(((qMv[CGe])*1.)*bj_DEGTORAD))
set qqv[CGe]=(((qqv[CGe])*1.)+((GI)*1.)*Sin(((qMv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(qSv[CGe],qPv[CGe],qqv[CGe],qpv[CGe])
call GroupEnumUnitsInRange(sv,qPv[CGe],qqv[CGe],$A0,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,qmv[CGe])then
call Qre(AddSpecialEffectTarget("war3mapImported\\CLD_effecttarget.mdl",n,"origin"))
call GroupAddUnit(qmv[CGe],n)
call uee(qLv[CGe],n,false,qQv[CGe],qQv[CGe],THe(qLv[CGe]))
call yHe(qLv[CGe],n,50,.5)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set qsv[CGe]=qsv[CGe]-1
if qsv[CGe]<=0 then
call QDe()
call Qre(qSv[CGe])
call Qne(qmv[CGe])
set qmv[CGe]=null
set qSv[CGe]=null
set qLv[CGe]=null
call Gpe(CGe)
endif
return false
endfunction
function B0x takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=GMe()
set qLv[CGe]=u
set qMv[CGe]=a
set qPv[CGe]=x
set qqv[CGe]=y
set qQv[CGe]=d
set qSv[CGe]=AddSpecialEffect("war3mapImported\\CMK_conguyet.mdl",qPv[CGe],qqv[CGe])
set qpv[CGe]=sxe(qPv[CGe],qqv[CGe])+60
set qsv[CGe]=R2I(gI/ GI)
set qmv[CGe]=CreateGroup()
call BlzSetSpecialEffectScale(qSv[CGe],.4)
call BlzSetSpecialEffectZ(qSv[CGe],qpv[CGe])
call BlzSetSpecialEffectYaw(qSv[CGe],qMv[CGe]*bj_DEGTORAD)
call QIe(CGe,.03125,true,function B_x)
endfunction
function B1x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set qYv[CGe]=(((qYv[CGe])*1.)+((GI)*1.)*Cos(((qWv[CGe])*1.)*bj_DEGTORAD))
set qzv[CGe]=(((qzv[CGe])*1.)+((GI)*1.)*Sin(((qWv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(q0v[CGe],qYv[CGe],qzv[CGe],qyv[CGe])
call GroupEnumUnitsInRange(sv,qYv[CGe],qzv[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,qwv[CGe])then
call Qre(AddSpecialEffectTarget("war3mapImported\\CLD_effecttarget.mdl",n,"origin"))
call GroupAddUnit(qwv[CGe],n)
call uee(qUv[CGe],n,false,qZv[CGe],qZv[CGe],THe(qUv[CGe]))
call yHe(qUv[CGe],n,50,.5)
endif
call GroupRemoveUnit(sv,n)
endloop
set q_v[CGe]=q_v[CGe]-1
if q_v[CGe]<=0 then
call QDe()
call B0x(qUv[CGe],qZv[CGe],qYv[CGe],qzv[CGe],qWv[CGe]+$B4)
call Qre(q0v[CGe])
call Qne(qwv[CGe])
set qwv[CGe]=null
set q0v[CGe]=null
set qUv[CGe]=null
call Gme(CGe)
endif
return false
endfunction
function B2x takes unit u,real d,unit v returns nothing
local integer CGe=GLe()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set qUv[CGe]=u
set qWv[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set qYv[CGe]=(((x)*1.)+((50)*1.)*Cos(((qWv[CGe])*1.)*bj_DEGTORAD))
set qzv[CGe]=(((y)*1.)+((50)*1.)*Sin(((qWv[CGe])*1.)*bj_DEGTORAD))
set qZv[CGe]=d
set q0v[CGe]=AddSpecialEffect("war3mapImported\\CMK_conguyet.mdl",qYv[CGe],qzv[CGe])
set qyv[CGe]=sxe(qYv[CGe],qzv[CGe])+60
set q_v[CGe]=R2I(gI/ GI)
set qwv[CGe]=CreateGroup()
call BlzSetSpecialEffectScale(q0v[CGe],.4)
call BlzSetSpecialEffectZ(q0v[CGe],qyv[CGe])
call BlzSetSpecialEffectYaw(q0v[CGe],qWv[CGe]*bj_DEGTORAD)
call QIe(CGe,.03125,true,function B1x)
endfunction
function B3x takes nothing returns boolean
local integer CGe=Qce()
local unit n
set Qvv[CGe]=(((Qvv[CGe])*1.)+((16)*1.)*Cos(((q9v[CGe])*1.)*bj_DEGTORAD))
set Qev[CGe]=(((Qev[CGe])*1.)+((16)*1.)*Sin(((q9v[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(q8v[CGe],Qvv[CGe],Qev[CGe],q7v[CGe])
call GroupEnumUnitsInRange(sv,Qvv[CGe],Qev[CGe],$A0,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Qxv[CGe])then
call GroupAddUnit(Qxv[CGe],n)
call uee(q4v[CGe],n,false,q5v[CGe],q5v[CGe],THe(q4v[CGe]))
call yHe(q4v[CGe],n,'d',1.)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set q6v[CGe]=q6v[CGe]-1
if q6v[CGe]<=0 then
call Qre(q8v[CGe])
call Qne(Qxv[CGe])
set q8v[CGe]=null
set Qxv[CGe]=null
set q4v[CGe]=null
call QDe()
call Gle(CGe)
endif
return false
endfunction
function B4x takes unit u,real d,real a returns nothing
local integer CGe=GKe()
set q4v[CGe]=u
set q5v[CGe]=d
set q9v[CGe]=a
set Qvv[CGe]=(((GetUnitX(u))*1.)+((40)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set Qev[CGe]=(((GetUnitY(u))*1.)+((40)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set q6v[CGe]=R2I(960/ 16)
set q8v[CGe]=AddSpecialEffect("Abilities\\Weapons\\VoidWalkerMissile\\VoidWalkerMissile.mdl",Qvv[CGe],Qev[CGe])
set q7v[CGe]=sxe(Qvv[CGe],Qev[CGe])+70
set Qxv[CGe]=CreateGroup()
call BlzSetSpecialEffectScale(q8v[CGe],2.)
call BlzSetSpecialEffectZ(q8v[CGe],q7v[CGe])
call BlzSetSpecialEffectYaw(q8v[CGe],q9v[CGe]*bj_DEGTORAD)
call QIe(CGe,.03125,true,function B3x)
endfunction
function B5x takes nothing returns boolean
local integer CGe=Qce()
local real a=GetUnitFacing(Qnv[CGe])
call B4x(Qnv[CGe],QVv[CGe],a+0)
call B4x(Qnv[CGe],QVv[CGe],a+$F)
call B4x(Qnv[CGe],QVv[CGe],a+30)
call B4x(Qnv[CGe],QVv[CGe],a+45)
call B4x(Qnv[CGe],QVv[CGe],a+60)
call B4x(Qnv[CGe],QVv[CGe],a-$F)
call B4x(Qnv[CGe],QVv[CGe],a-30)
call B4x(Qnv[CGe],QVv[CGe],a-45)
call B4x(Qnv[CGe],QVv[CGe],a-60)
set Qav[CGe]=Qav[CGe]-1
if Qav[CGe]<=0 then
call QDe()
set Qnv[CGe]=null
call Gke(CGe)
endif
return false
endfunction
function B6x takes unit u,real QPe returns nothing
local integer CGe=GJe()
set Qnv[CGe]=u
set QVv[CGe]=QPe
set Qav[CGe]=6
call QIe(CGe,1.,true,function B5x)
endfunction
function B7x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Qdv[CGe]=Qdv[CGe]+1
if Qdv[CGe]>16 then
set QNv[CGe]=(((QNv[CGe])*1.)+((HI)*1.)*Cos(((QCv[CGe])*1.)*bj_DEGTORAD))
set Qbv[CGe]=(((Qbv[CGe])*1.)+((HI)*1.)*Sin(((QCv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(QIv[CGe],QNv[CGe],Qbv[CGe],Qcv[CGe])
call GroupEnumUnitsInRange(sv,QNv[CGe],Qbv[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,QDv[CGe])then
call GroupAddUnit(QDv[CGe],n)
call yHe(QRv[CGe],n,'d',1.)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TNK_vanlong3.mdl"),(n),"chest"))
call uee(QRv[CGe],n,false,QBv[CGe],QBv[CGe],THe(QRv[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set QAv[CGe]=QAv[CGe]-1
if QAv[CGe]<=0 then
call QDe()
call BlzSetSpecialEffectScale((QIv[CGe]),((.001)*1.))
call Qre(QIv[CGe])
call Qne(QDv[CGe])
set QDv[CGe]=null
set QIv[CGe]=null
set QRv[CGe]=null
call Gje(CGe)
endif
return false
endfunction
function B8x takes unit u,real x,real y,real d,real a returns nothing
local integer CGe=GHe()
set QRv[CGe]=u
set QNv[CGe]=x
set Qbv[CGe]=y
set QCv[CGe]=a
set QBv[CGe]=d
set Qcv[CGe]=sxe(QNv[CGe],Qbv[CGe])+'d'
set QIv[CGe]=AddSpecialEffect("war3mapImported\\TNK_vanlong3.mdl",QNv[CGe],Qbv[CGe])
set QAv[CGe]=R2I(hI/ HI)
set Qdv[CGe]=0
set QDv[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((QIv[CGe]),((QCv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((QIv[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(QIv[CGe],Qcv[CGe])
call QIe(CGe,.03125,true,function B7x)
endfunction
function B9x takes nothing returns boolean
local integer CGe=Qce()
local real x=(((Qhv[CGe])*1.)+((400)*1.)*Cos((($C+60*QGv[CGe])*1.)*bj_DEGTORAD))
local real y=(((QHv[CGe])*1.)+((400)*1.)*Sin((($C+60*QGv[CGe])*1.)*bj_DEGTORAD))
call B8x(QJv[CGe],x,y,Qjv[CGe],soe(x,y,Qhv[CGe],QHv[CGe]))
set QGv[CGe]=QGv[CGe]-1
if QGv[CGe]<=0 then
call QDe()
set QJv[CGe]=null
call Ghe(CGe)
endif
return false
endfunction
function cvx takes unit u,real d,real x0,real y0 returns nothing
local integer CGe=GGe()
set Qhv[CGe]=x0
set QHv[CGe]=y0
set QJv[CGe]=u
set Qjv[CGe]=d
set QGv[CGe]=6
call QIe(CGe,.2,true,function B9x)
endfunction
function cex takes nothing returns boolean
local integer CGe=Qce()
set QLv[CGe]=QLv[CGe]-1
if QLv[CGe]<=0 or spe(QMv[CGe])then
call QDe()
call UnitRemoveAbility(Qmv[CGe],jI)
if not spe(QMv[CGe])then
call RemoveUnit(QMv[CGe])
endif
set QMv[CGe]=null
set Qmv[CGe]=null
call Gge(CGe)
endif
return false
endfunction
function cxx takes unit u returns nothing
local integer CGe=GFe()
set Qmv[CGe]=u
set QLv[CGe]=30
call UnitAddAbility(Qmv[CGe],jI)
set QMv[CGe]=CreateUnit(zv,'n06I',GetRectCenterX(bf),GetRectCenterY(bf),270)
call QIe(CGe,1.,true,function cex)
endfunction
function cox takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
set Qwv[CGe]=Qwv[CGe]-1
if Qwv[CGe]<=0 then
call QDe()
call GroupEnumUnitsInRange(sv,QSv[CGe],Qtv[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Qsv[CGe])and not spe(n)and not tOe(n)then
call yle(QQv[CGe],n,QUv[CGe],1.)
call Qre(AddSpecialEffect(("war3mapImported\\VDK_nhankiemtarget.mdl"),((GetUnitX(n))*1.),((GetUnitY(n))*1.)))
call uee(QQv[CGe],n,false,QTv[CGe],Quv[CGe],THe(QQv[CGe]))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
call Qre(QWv[CGe])
set QWv[CGe]=null
set QQv[CGe]=null
set Qsv[CGe]=null
call Gfe(CGe)
endif
return false
endfunction
function crx takes unit u,player p,real d1,real d2,real r,real x,real y returns nothing
local integer CGe=GDe()
set QQv[CGe]=u
set QSv[CGe]=x
set Qtv[CGe]=y
set QTv[CGe]=d1
set Quv[CGe]=d2
set QUv[CGe]=r
set Qwv[CGe]=1
set Qsv[CGe]=p
set QWv[CGe]=AddSpecialEffect("war3mapImported\\VDK_tranphaikiemroi8.mdl",QSv[CGe],Qtv[CGe])
call BlzSetSpecialEffectTimeScale((QWv[CGe]),((.85)*1.))
call BlzSetSpecialEffectScale(QWv[CGe],.5)
call BlzSetSpecialEffectZ(QWv[CGe],sxe(QSv[CGe],Qtv[CGe])+20)
call QIe(CGe,.1667,true,function cox)
endfunction
function cix takes nothing returns boolean
local integer CGe=Qce()
call crx(QZv[CGe],Q5v[CGe],Q1v[CGe],Q2v[CGe],Q3v[CGe],Q_v[CGe],Q0v[CGe])
set Q_v[CGe]=(((Q_v[CGe])*1.)+(($F)*1.)*Cos(((Q6v[CGe])*1.)*bj_DEGTORAD))
set Q0v[CGe]=(((Q0v[CGe])*1.)+(($F)*1.)*Sin(((Q6v[CGe])*1.)*bj_DEGTORAD))
set Q4v[CGe]=Q4v[CGe]-1
if Q4v[CGe]<=0 then
call QDe()
set QZv[CGe]=null
set Q5v[CGe]=null
call Gde(CGe)
endif
return false
endfunction
function cax takes unit u,real d,unit v,real r returns nothing
local integer CGe=GCe()
set Q6v[CGe]=GetUnitFacing(u)
set QZv[CGe]=u
set Q_v[CGe]=(((GetUnitX(v))*1.)+(($F)*1.)*Cos(((Q6v[CGe]+$B4)*1.)*bj_DEGTORAD))
set Q0v[CGe]=(((GetUnitY(v))*1.)+(($F)*1.)*Sin(((Q6v[CGe]+$B4)*1.)*bj_DEGTORAD))
set Q1v[CGe]=uBe(u,ude(u,3.,.9,'A0T3'))
set Q2v[CGe]=uce(u,ude(u,$BB8,900,'A0T3'),'B00A')
set Q3v[CGe]=ude(u,$F,2,'A0T3')
set Q4v[CGe]=3
set Q5v[CGe]=GetOwningPlayer(QZv[CGe])
set Q1v[CGe]=Q1v[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A0AA'))
set Q2v[CGe]=Q2v[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A0AA'))
call Qre(AddSpecialEffectTarget(("war3mapImported\\VDK_tranphaicasternew6.mdx"),(u),"origin"))
call Qre(AddSpecialEffect(("war3mapImported\\VDK_tranphaicasternew4.mdx"),((Q_v[CGe])*1.),((Q0v[CGe])*1.)))
if r>0 then
set Q1v[CGe]=d
set Q2v[CGe]=d
set Q3v[CGe]=r
endif
call QIe(CGe,.1667,true,function cix)
endfunction
function cnx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set srv[CGe]=(((srv[CGe])*1.)+((kI)*1.)*Cos(((sVv[CGe])*1.)*bj_DEGTORAD))
set siv[CGe]=(((siv[CGe])*1.)+((kI)*1.)*Sin(((sVv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(sxv[CGe],srv[CGe],siv[CGe],snv[CGe])
call GroupEnumUnitsInRange(sv,srv[CGe],siv[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,sev[CGe])then
call uee(svv[CGe],n,true,sav[CGe],sav[CGe],THe(svv[CGe]))
call yle(svv[CGe],n,'d',1.)
call GroupAddUnit(sev[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
set sov[CGe]=sov[CGe]-1
if sov[CGe]<=0 then
call QDe()
call Qre(sxv[CGe])
call Qne(sev[CGe])
set sev[CGe]=null
set sxv[CGe]=null
set svv[CGe]=null
call Gce(CGe)
endif
return false
endfunction
function cVx takes unit u,real d,real x,real y,real a returns nothing
local integer CGe=GBe()
set svv[CGe]=u
set sVv[CGe]=a
set srv[CGe]=x
set siv[CGe]=y
set sov[CGe]=R2I(JI/ kI)
set sxv[CGe]=AddSpecialEffect("war3mapImported\\VDK_nhankiemmissile.mdl",srv[CGe],siv[CGe])
set snv[CGe]=sxe(srv[CGe],siv[CGe])+'d'
set sav[CGe]=d
set sev[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((sxv[CGe]),((sVv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((sxv[CGe]),((.7)*1.))
call BlzSetSpecialEffectZ(sxv[CGe],snv[CGe])
call QIe(CGe,.03125,true,function cnx)
endfunction
function cEx takes nothing returns boolean
local integer CGe=Qce()
local integer rd=GetRandomInt(-4,4)
local integer r=GetRandomInt(-1,1)
local real x=(((sNv[CGe])*1.)+((-'d'+rd*$C8)*1.)*Cos(((sBv[CGe]+90*r)*1.)*bj_DEGTORAD))
local real y=(((sbv[CGe])*1.)+((-'d'+rd*$C8)*1.)*Sin(((sBv[CGe]+90*r)*1.)*bj_DEGTORAD))
call cVx(sRv[CGe],sIv[CGe],x,y,sBv[CGe])
set sAv[CGe]=sAv[CGe]-1
if sAv[CGe]<=0 then
call QDe()
set sRv[CGe]=null
call Gbe(CGe)
endif
return false
endfunction
function cXx takes unit u,real d returns nothing
local integer CGe=GNe()
set sRv[CGe]=u
set sAv[CGe]=50
set sIv[CGe]=d
set sBv[CGe]=GetUnitFacing(u)
set sNv[CGe]=(((GetUnitX(u))*1.)+((300)*1.)*Cos(((sBv[CGe]+$B4)*1.)*bj_DEGTORAD))
set sbv[CGe]=(((GetUnitY(u))*1.)+((300)*1.)*Sin(((sBv[CGe]+$B4)*1.)*bj_DEGTORAD))
call QIe(CGe,.1,true,function cEx)
endfunction
function cOx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set sHv[CGe]=sHv[CGe]-KI
call BlzSetSpecialEffectPosition(sfv[CGe],sgv[CGe],sGv[CGe],sHv[CGe])
if sFv[CGe]==$A then
call Qre(AddSpecialEffect(("war3mapImported\\VDQ_thiendia3.mdl"),((sgv[CGe])*1.),((sGv[CGe])*1.)))
call GroupEnumUnitsInRange(sv,sgv[CGe],sGv[CGe],400,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call uee(sDv[CGe],n,true,shv[CGe],shv[CGe],THe(sDv[CGe]))
call yle(sDv[CGe],n,'d',2.)
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set sFv[CGe]=sFv[CGe]-1
if sFv[CGe]<=0 then
call QDe()
call BlzSetSpecialEffectScale((sfv[CGe]),((.01)*1.))
call Qre(sfv[CGe])
set sfv[CGe]=null
set sDv[CGe]=null
call GAe(CGe)
endif
return false
endfunction
function cRx takes unit u,real d,real x,real y returns nothing
local integer CGe=GIe()
set sDv[CGe]=u
set sgv[CGe]=x
set sGv[CGe]=y
set sFv[CGe]=40
set sfv[CGe]=AddSpecialEffect("war3mapImported\\EFF_vongkiem.mdl",sgv[CGe],sGv[CGe])
set sHv[CGe]=sxe(sgv[CGe],sGv[CGe])+500
set shv[CGe]=d
call BlzSetSpecialEffectScale((sfv[CGe]),((.6)*1.))
call BlzSetSpecialEffectZ(sfv[CGe],sHv[CGe])
call QIe(CGe,.03125,true,function cOx)
endfunction
function cIx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real x=GetUnitX(slv[CGe])
local real y=GetUnitY(slv[CGe])
call cRx(slv[CGe],sLv[CGe],x+GetRandomReal(-800,800),y+GetRandomReal(-800,800))
set sKv[CGe]=sKv[CGe]-1
if sKv[CGe]<=0 then
call QDe()
set slv[CGe]=null
call GRe(CGe)
endif
return false
endfunction
function cAx takes unit u,real d returns nothing
local integer CGe=GOe()
set sKv[CGe]=24
set slv[CGe]=u
set sLv[CGe]=d
call QIe(CGe,.2,true,function cIx)
endfunction
function cNx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set sQv[CGe]=(((sQv[CGe])*1.)+((LI)*1.)*Cos(((sqv[CGe])*1.)*bj_DEGTORAD))
set ssv[CGe]=(((ssv[CGe])*1.)+((LI)*1.)*Sin(((sqv[CGe])*1.)*bj_DEGTORAD))
call Qre(AddSpecialEffect("war3mapImported\\VDQ_baccapnhiphuc.mdl",sQv[CGe],ssv[CGe]))
call GroupEnumUnitsInRange(sv,sQv[CGe],ssv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call uee(sPv[CGe],n,true,sSv[CGe],sSv[CGe],THe(sPv[CGe]))
call yle(sPv[CGe],n,'d',1.)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set stv[CGe]=stv[CGe]-1
if stv[CGe]<=0 then
call QDe()
set sPv[CGe]=null
call GXe(CGe)
endif
return false
endfunction
function cbx takes unit u,real x,real y,real QPe,real sMe returns nothing
local integer CGe=GEe()
set sPv[CGe]=u
set sQv[CGe]=(((x)*1.)+((40)*1.)*Cos(((sMe)*1.)*bj_DEGTORAD))
set ssv[CGe]=(((y)*1.)+((40)*1.)*Sin(((sMe)*1.)*bj_DEGTORAD))
set sSv[CGe]=QPe
set sqv[CGe]=sMe
set stv[CGe]=R2I(lI/ LI)
call QIe(CGe,.2,true,function cNx)
endfunction
function cBx takes unit u,real d,unit v returns nothing
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real a=soe(x,y,GetUnitX(v),GetUnitY(v))
call cbx(u,x,y,d,a)
call cbx(u,x,y,d,a+$F)
call cbx(u,x,y,d,a-$F)
call cbx(u,x,y,d,a+30)
call cbx(u,x,y,d,a-30)
endfunction
function ccx takes nothing returns boolean
local integer CGe=Qce()
if(GetUnitAbilityLevel((szv[CGe]),(ln))>0)then
call uee(syv[CGe],szv[CGe],false,0,sWv[CGe]*(1.07+.03*BUe[(sYv[CGe])*(20)+5]),'B007')
else
call uee(syv[CGe],szv[CGe],false,0,sWv[CGe],'B007')
endif
set swv[CGe]=swv[CGe]-1
if swv[CGe]<=0 or spe(szv[CGe])or spe(syv[CGe])then
call QDe()
set syv[CGe]=null
set szv[CGe]=null
call GVe(CGe)
endif
return false
endfunction
function cCx takes unit u,unit v,real d returns nothing
local integer CGe=Gne()
set syv[CGe]=u
set szv[CGe]=v
set sWv[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set swv[CGe]=5
set sYv[CGe]=(GetPlayerId(GetOwningPlayer((syv[CGe])))+1)
call QIe(CGe,.98,true,function ccx)
endfunction
function cdx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set s2v[CGe]=(((s2v[CGe])*1.)+((mI)*1.)*Cos(((Sev[CGe])*1.)*bj_DEGTORAD))
set s3v[CGe]=(((s3v[CGe])*1.)+((mI)*1.)*Sin(((Sev[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition((s7v[CGe]),((s2v[CGe])*1.),((s3v[CGe])*1.),((s8v[CGe])*1.))
call GroupEnumUnitsInRange(sv,s2v[CGe],s3v[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,s9v[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Svv[CGe])then
call GroupAddUnit(Svv[CGe],n)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\IllidanMissile\\IllidanMissile.mdl"),(n),"chest"))
call uee(s1v[CGe],n,false,s4v[CGe],s5v[CGe],THe(s1v[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set s6v[CGe]=s6v[CGe]-1
if s6v[CGe]<=0 then
call QDe()
call Qre(s7v[CGe])
call Qne(Svv[CGe])
set Svv[CGe]=null
set s7v[CGe]=null
set s1v[CGe]=null
set s9v[CGe]=null
call Gae(CGe)
endif
return false
endfunction
function cDx takes unit u,player p,real d1,real d2,real x,real y,real a returns nothing
local integer CGe=Gie()
set s1v[CGe]=u
set s2v[CGe]=x
set s3v[CGe]=y
set s4v[CGe]=d1
set s5v[CGe]=d2
set s7v[CGe]=AddSpecialEffect("Abilities\\Weapons\\IllidanMissile\\IllidanMissile.mdl",s2v[CGe],s3v[CGe])
set s6v[CGe]=$C
set s8v[CGe]=sxe(s2v[CGe],s3v[CGe])+'x'
set s9v[CGe]=p
set Sev[CGe]=a
set Svv[CGe]=CreateGroup()
call BlzSetSpecialEffectScale((s7v[CGe]),((1.5)*1.))
call BlzSetSpecialEffectZ(s7v[CGe],s8v[CGe])
call BlzSetSpecialEffectYaw((s7v[CGe]),((a)*1.)*bj_DEGTORAD)
call QIe(CGe,.03125,true,function cdx)
endfunction
function cfx takes nothing returns boolean
local integer CGe=Qce()
local real x=GetUnitX(SXv[CGe])
local real y=GetUnitY(SXv[CGe])
if not spe(SEv[CGe])and not spe(SXv[CGe])then
call cDx(SEv[CGe],SVv[CGe],Sav[CGe],Snv[CGe],(((x)*1.)+(('x')*1.)*Cos((('x'*Siv[CGe])*1.)*bj_DEGTORAD)),(((y)*1.)+(('x')*1.)*Sin((('x'*Siv[CGe])*1.)*bj_DEGTORAD)),'x'*Siv[CGe]+$B4)
endif
set Siv[CGe]=Siv[CGe]-1
if Siv[CGe]<=0 or spe(SEv[CGe])or spe(SXv[CGe])then
call QDe()
set SEv[CGe]=null
set SXv[CGe]=null
set SVv[CGe]=null
call Gre(CGe)
endif
return false
endfunction
function cFx takes unit u,player p,real d1,real d2,unit v returns nothing
local integer CGe=Goe()
set SEv[CGe]=u
set SVv[CGe]=p
set Sav[CGe]=d1
set Snv[CGe]=d2
set SXv[CGe]=v
set Siv[CGe]=3
call QIe(CGe,.3,true,function cfx)
endfunction
function cgx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real a=0
local real r=0
local real x=0
local real y=0
if not spe(SNv[CGe])then
set x=GetUnitX(SNv[CGe])
set y=GetUnitY(SNv[CGe])
set a=soe(Sbv[CGe],SBv[CGe],x,y)
set Sbv[CGe]=(((Sbv[CGe])*1.)+((mI)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set SBv[CGe]=(((SBv[CGe])*1.)+((mI)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition((Sfv[CGe]),((Sbv[CGe])*1.),((SBv[CGe])*1.),((SFv[CGe])*1.))
call BlzSetSpecialEffectYaw((Sfv[CGe]),((a)*1.)*bj_DEGTORAD)
if Sjv[CGe]==false then
if sre(Sbv[CGe],SBv[CGe],x,y)<50 then
set Sjv[CGe]=true
call cFx(SAv[CGe],SGv[CGe],Scv[CGe],SCv[CGe],SNv[CGe])
endif
endif
endif
if Sgv[CGe]<7 then
call GroupEnumUnitsInRange(sv,Sbv[CGe],SBv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,SGv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Shv[CGe])then
set r=sre(GetUnitX(SAv[CGe]),GetUnitY(SAv[CGe]),GetUnitX(n),GetUnitY(n))
set r=r/ 35*.1
if r>2. then
set r=2.
endif
if BUe[(SJv[CGe])*(20)+9]>0 then
set SHv[CGe]=SHv[CGe]+.1
endif
call yLe(SAv[CGe],n,Sdv[CGe],2.+r)
call GroupAddUnit(Shv[CGe],n)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\IllidanMissile\\IllidanMissile.mdl"),(n),"chest"))
call uee(SAv[CGe],n,false,Scv[CGe]*SHv[CGe],SCv[CGe],THe(SAv[CGe]))
call cCx(SAv[CGe],n,SCv[CGe])
set Sgv[CGe]=Sgv[CGe]+1
if Sgv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
else
set SDv[CGe]=0
endif
set n=null
set SDv[CGe]=SDv[CGe]-1
if SDv[CGe]<=0 then
call QDe()
call Qre(Sfv[CGe])
call Qne(Shv[CGe])
set Shv[CGe]=null
set Sfv[CGe]=null
set SAv[CGe]=null
set SNv[CGe]=null
set SGv[CGe]=null
call Gxe(CGe)
endif
return false
endfunction
function cGx takes unit u,real x,real y,real d1,real d2,real r,unit v returns nothing
local integer CGe=Gee()
local real a=soe(x,y,GetUnitX(v),GetUnitY(v))
set SAv[CGe]=u
set SNv[CGe]=v
set Sbv[CGe]=(((x)*1.)+((80)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set SBv[CGe]=(((y)*1.)+((80)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set Scv[CGe]=d1
set SCv[CGe]=d2
set SHv[CGe]=1.
set Sdv[CGe]=r
set Sfv[CGe]=AddSpecialEffect("Abilities\\Weapons\\IllidanMissile\\IllidanMissile.mdl",Sbv[CGe],SBv[CGe])
set SDv[CGe]=50
set SFv[CGe]=sxe(Sbv[CGe],SBv[CGe])+'x'
set Sgv[CGe]=0
set SGv[CGe]=GetOwningPlayer(SAv[CGe])
set Shv[CGe]=CreateGroup()
set SJv[CGe]=GetPlayerId(SGv[CGe])+1
set Sjv[CGe]=false
call BlzSetSpecialEffectScale((Sfv[CGe]),((1.5)*1.))
call BlzSetSpecialEffectZ(Sfv[CGe],SFv[CGe])
call BlzSetSpecialEffectYaw((Sfv[CGe]),((a)*1.)*bj_DEGTORAD)
call QIe(CGe,.03125,true,function cgx)
endfunction
function chx takes nothing returns boolean
local unit u=GetTriggerUnit()
local unit v=GetSpellTargetUnit()
local real d1=uBe(u,ude(u,3.,.9,MI))*(1.+TKe(u,4857))
local real d2=uce(u,ude(u,$9C4,750,MI),'B007')*(1.+TKe(u,4857))
local real r=ude(u,40,5,MI)
local real x=GetUnitX(u)
local real y=GetUnitY(u)
call cGx(u,x,y,d1,d2,r,v)
set v=null
set u=null
return false
endfunction
function cHx takes nothing returns boolean
return GetSpellAbilityId()==MI and chx()
endfunction
function cjx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function cHx))
set t=null
endfunction
function cJx takes player p,integer i returns boolean
local integer c=1
if tDe(i,5*SH,0)then
set c=$A
elseif tDe(i,4*SH,0)then
set c=9
elseif tDe(i,3*SH,0)then
set c=8
elseif tDe(i,2*SH,0)then
set c=7
elseif tDe(i,$F*sH,0)then
set c=6
elseif tDe(i,$A*sH,0)then
set c=5
elseif tDe(i,6*sH,0)then
set c=4
elseif tDe(i,3*sH,0)then
set c=3
elseif tDe(i,sH,0)then
set c=2
endif
set eB[i]=20
set vB[i]="war3mapImported\\DH_UyDanh_"+I2S(c)+".mdl"
call Qre(Zb[i])
set Zb[i]=AddSpecialEffect(vB[i],GetUnitX(XJ[i]),GetUnitY(XJ[i]))
set WJ[i]=true
return false
endfunction
function ckx takes integer s returns string
local string cKx="123456789"
local string n=""
local string m=""
local string clx=""
local integer i=1
local integer c=0
local integer rd=0
local integer k=0
loop
exitwhen i>s
set rd=GetRandomInt(1,StringLength(cKx))
set k=S2I(SubString(cKx,rd-1,rd))
set clx=clx+I2S(k)
set c=1
loop
exitwhen c>StringLength(cKx)
set n=SubString(cKx,c-1,c)
if S2I(n)!=k then
set m=m+n
endif
set c=c+1
endloop
set cKx=m
set n=""
set m=""
set i=i+1
endloop
set cKx=null
set n=null
set m=null
if s==2 then
set clx=clx+"0000"
elseif s==3 then
set clx=clx+"000"
elseif s==4 then
set clx=clx+"00"
elseif s==5 then
set clx=clx+"0"
endif
set uv=clx
set clx=null
return uv
endfunction
function cLx takes integer s,integer z returns string
if s==1 then
if z==1 then
return"|cff7fff00- Phá Không Trảm ảnh:|r |cffffff00tăng vật công, thời gian gây thọ thương|r"
elseif z==2 then
return"|cff7fff00- Phá Không Trảm ảnh:|r |cffffff00tăng độc công, thời gian gây bất động|r"
elseif z==3 then
return"|cff7fff00- Phá Không Trảm ảnh:|r |cffffff00tăng băng công, thời gian làm chậm|r"
elseif z==4 then
return"|cff7fff00- Phá Không Trảm ảnh:|r |cffffff00tăng hỏa công, thời gian gây bỏng|r"
elseif z==5 then
return"|cff7fff00- Phá Không Trảm ảnh:|r |cffffff00tăng lôi công, thời gian gây choáng|r"
endif
elseif s==2 then
if z==1 then
return"|cff7fff00- Ngũ Hành Vô Tướng:|r |cffffff00tăng kháng tất cả, kháng độc công|r"
elseif z==2 then
return"|cff7fff00- Ngũ Hành Vô Tướng:|r |cffffff00tăng kháng tất cả, kháng lôi công|r"
elseif z==3 then
return"|cff7fff00- Ngũ Hành Vô Tướng:|r |cffffff00tăng kháng tất cả, kháng hỏa công|r"
elseif z==4 then
return"|cff7fff00- Ngũ Hành Vô Tướng:|r |cffffff00tăng kháng tất cả, kháng vật công|r"
elseif z==5 then
return"|cff7fff00- Ngũ Hành Vô Tướng:|r |cffffff00tăng kháng tất cả, kháng băng công|r"
endif
elseif s==3 then
return"|cff7fff00- Kinh Hồng Nhất Kích:|r |cffffff00tăng chí mạng, sát thương chí mạng|r"
elseif s==4 then
return"|cff7fff00- Hư Không Thiểm ảnh:|r |cffffff00tăng né tránh, chịu sát thương chí mạng|r"
elseif s==5 then
if z==1 then
return"|cff7fff00- ích Thọ Âm Dương:|r |cffffff00tăng tỉ lệ sinh nội lực, kháng thời gian bị bất động|r"
elseif z==2 then
return"|cff7fff00- ích Thọ Âm Dương:|r |cffffff00tăng tỉ lệ sinh nội lực, kháng thời gian bị choáng|r"
elseif z==3 then
return"|cff7fff00- ích Thọ Âm Dương:|r |cffffff00tăng tỉ lệ sinh nội lực, kháng thời gian bị bỏng|r"
elseif z==4 then
return"|cff7fff00- ích Thọ Âm Dương:|r |cffffff00tăng tỉ lệ sinh nội lực, kháng thời gian bị thọ thương|r"
elseif z==5 then
return"|cff7fff00- ích Thọ Âm Dương:|r |cffffff00tăng tỉ lệ sinh nội lực, kháng thời gian bị chậm|r"
endif
elseif s==6 then
return"|cff7fff00- Cam Vũ Lâm Hoa:|r |cffffff00tăng hiệu suất hồi phục sinh nội lực|r"
elseif s==7 then
return"|cff7fff00- Vô Niệm Kinh:|r |cffffff00phát huy lực tấn công cơ bản, lực tấn công kỹ năng|r"
elseif s==8 then
return"|cff7fff00- Từ Bi Tế Vũ:|r |cffffff00tăng sinh nội lực tối đa|r"
elseif s==9 then
return"|cff7fff00- Hội Thần Tĩnh Tâm:|r |cffffff00khuếch đại sát thương gây ra, tăng tỉ lệ chính xác|r"
endif
return""
endfunction
function cmx takes integer cMx,integer cpx,real x,real y returns item
local item t=CreateItem('I052',x,y)
local string UHe=""
local string s="Loại: thiệp đồng hành"
local string n=ckx(cpx)
local integer uCe=GetRandomInt(1,5)
local integer cPx=GetRandomInt(1,3)
set s=s+"
Đồng hành: |cffffff00"+GetObjectName(Uj[cMx])+"|r"
set s=s+"
Ngũ hành: "+cie[(0)*(20)+uCe]+"
"
if cPx==1 then
set s=s+"
Tư chất:
|cffadd8e6Sức: 6   Thân: 6   Nội: 0|r"
elseif cPx==2 then
set s=s+"
Tư chất:
|cffadd8e6Sức: 0   Thân: 6   Nội: 6|r"
else
set s=s+"
Tư chất:
|cffadd8e6Sức: 6   Thân: 0   Nội: 6|r"
endif
call BlzSetItemDescription(t,s)
set s=s+"

|cff0078d7Kỹ năng đồng hành:|r
"
set s=s+cLx(S2I(SubString(n,0,1)),uCe)+"
"
set s=s+cLx(S2I(SubString(n,1,2)),uCe)+"
"
if cpx>=3 then
set s=s+cLx(S2I(SubString(n,2,3)),uCe)+"
"
endif
if cpx>=4 then
set s=s+cLx(S2I(SubString(n,3,4)),uCe)+"
"
endif
if cpx>=5 then
set s=s+cLx(S2I(SubString(n,4,5)),uCe)+"
"
endif
if cpx>=6 then
set s=s+cLx(S2I(SubString(n,5,6)),uCe)+"
"
endif
set s=s+"|cffadd8e6"+"
(Triệu hồi đồng hành tại NPC Diệp Bảo Bảo - Dương Châu)|r"
set UHe=I2S(cpx)+I2S(cMx+$A)+I2S(uCe)+I2S(cPx)+n
call BlzSetItemExtendedTooltip(t,s)
call BlzSetItemName(t,"|cff7fff00Thiệp Đồng Hành ("+I2S(cpx)+" kỹ năng)|r")
call SaveStr(IT,GetHandleId(t),4358,UHe)
call SetItemInvulnerable(t,true)
set Sv=t
set t=null
set UHe=null
set s=null
set n=null
return Sv
endfunction
function cqx takes unit u,integer a1,integer a2 returns nothing
local integer rd=GetRandomInt(a1,a2)
local player p=GetOwningPlayer(u)
if GetRandomReal(0,'d')<=$F then
if a1==a2 then
set Sv=cmx(GetRandomInt(1,2),a1,GetUnitX(u),GetUnitY(u))
else
set Sv=cmx(GetRandomInt(1,2),rd,GetUnitX(u),GetUnitY(u))
endif
call UnitAddItem(u,Sv)
call Qke(p,"|cffadd8e6"+"Nhận được Thiệp Đồng Hành, vật phẩm được chuyển về rương !",5)
endif
set p=null
endfunction
function cQx takes unit u,integer i,unit csx,integer c,integer s,integer lv,boolean cSx,real r,integer n returns nothing
set r=r*lv
if s==1 then
if cSx then
set Bfe[(i)*(6)+n]=cne[(s)*(20)+c]
call UnitAddAbility(csx,cne[(s)*(20)+c])
endif
if c==1 then
call Tje(u,7695,.3*r)
call Tje(u,6851,.03*r)
elseif c==2 then
call Tje(u,5724,.3*r)
call Tje(u,'o',.03*r)
elseif c==3 then
call Tje(u,bx,.3*r)
call Tje(u,Kx,.03*r)
elseif c==4 then
call Tje(u,Bx,.3*r)
call Tje(u,7537,.03*r)
elseif c==5 then
call Tje(u,cx,.3*r)
call Tje(u,4934,.03*r)
endif
if r>0 then
call SetUnitAbilityLevel(csx,cne[(s)*(20)+c],Bde[(i)*(20)+n])
elseif r<0 then
call UnitRemoveAbility(csx,cne[(s)*(20)+c])
endif
elseif s==2 then
if cSx then
set Bfe[(i)*(6)+n]=cne[(s)*(20)+c]
call UnitAddAbility(csx,cne[(s)*(20)+c])
endif
if c==1 then
call Tue(u,$F*r)
call Tje(u,611,20*r)
elseif c==2 then
call Tue(u,$F*r)
call Tje(u,Nx,20*r)
elseif c==3 then
call Tue(u,$F*r)
call Tje(u,7185,20*r)
elseif c==4 then
call Tue(u,$F*r)
call Tje(u,5034,20*r)
elseif c==5 then
call Tue(u,$F*r)
call Tje(u,Ax,20*r)
endif
if r>0 then
call SetUnitAbilityLevel(csx,cne[(s)*(20)+c],Bde[(i)*(20)+n])
elseif r<0 then
call UnitRemoveAbility(csx,cne[(s)*(20)+c])
endif
elseif s==3 then
if cSx then
set Bfe[(i)*(6)+n]=cne[(s)*(20)+0]
call UnitAddAbility(csx,cne[(s)*(20)+0])
endif
call Tje(u,4888,20*r)
call Tje(u,ax,.04*r)
if r>0 then
call SetUnitAbilityLevel(csx,cne[(s)*(20)+0],Bde[(i)*(20)+n])
elseif r<0 then
call UnitRemoveAbility(csx,cne[(s)*(20)+0])
endif
elseif s==4 then
if cSx then
set Bfe[(i)*(6)+n]=cne[(s)*(20)+0]
call UnitAddAbility(csx,cne[(s)*(20)+0])
endif
call Tje(u,5762,20*r)
call Tje(u,Vx,.04*r)
if r>0 then
call SetUnitAbilityLevel(csx,cne[(s)*(20)+0],Bde[(i)*(20)+n])
elseif r<0 then
call UnitRemoveAbility(csx,cne[(s)*(20)+0])
endif
elseif s==5 then
if cSx then
set Bfe[(i)*(6)+n]=cne[(s)*(20)+c]
call UnitAddAbility(csx,cne[(s)*(20)+c])
endif
call T_e(u,.04*r)
call T4e(u,.03*r)
if c==1 then
call Tje(u,7896,.04*r)
elseif c==2 then
call Tje(u,6491,.04*r)
elseif c==3 then
call Tje(u,6210,.04*r)
elseif c==4 then
call Tje(u,572,.04*r)
elseif c==5 then
call Tje(u,lx,.04*r)
endif
if r>0 then
call SetUnitAbilityLevel(csx,cne[(s)*(20)+c],Bde[(i)*(20)+n])
elseif r<0 then
call UnitRemoveAbility(csx,cne[(s)*(20)+c])
endif
elseif s==6 then
if cSx then
set Bfe[(i)*(6)+n]=cne[(s)*(20)+0]
call UnitAddAbility(csx,cne[(s)*(20)+0])
endif
call Tje(u,Fx,.08*r)
call Tje(u,gx,.08*r)
if r>0 then
call SetUnitAbilityLevel(csx,cne[(s)*(20)+0],Bde[(i)*(20)+n])
elseif r<0 then
call UnitRemoveAbility(csx,cne[(s)*(20)+0])
endif
elseif s==7 then
if cSx then
set Bfe[(i)*(6)+n]=cne[(s)*(20)+0]
call UnitAddAbility(csx,cne[(s)*(20)+0])
endif
call Tje(u,5319,.05*r)
call Tje(u,vx,.05*r)
if r>0 then
call SetUnitAbilityLevel(csx,cne[(s)*(20)+0],Bde[(i)*(20)+n])
elseif r<0 then
call UnitRemoveAbility(csx,cne[(s)*(20)+0])
endif
elseif s==8 then
if cSx then
set Bfe[(i)*(6)+n]=cne[(s)*(20)+0]
call UnitAddAbility(csx,cne[(s)*(20)+0])
endif
call TZe(u,$3E8*r)
call T3e(u,400*r)
if r>0 then
call SetUnitAbilityLevel(csx,cne[(s)*(20)+0],Bde[(i)*(20)+n])
elseif r<0 then
call UnitRemoveAbility(csx,cne[(s)*(20)+0])
endif
elseif s==9 then
if cSx then
set Bfe[(i)*(6)+n]=cne[(s)*(20)+0]
call UnitAddAbility(csx,cne[(s)*(20)+0])
endif
call Tje(u,xx,.04*r)
call Tje(u,Ze,.03*r)
if r>0 then
call SetUnitAbilityLevel(csx,cne[(s)*(20)+0],Bde[(i)*(20)+n])
elseif r<0 then
call UnitRemoveAbility(csx,cne[(s)*(20)+0])
endif
endif
endfunction
function ctx takes integer i returns nothing
local string s="|cffffcc00"+"Đồng hành "+I2S(pI[i])+" kỹ năng|r"
set s=s+"
Cấp độ: "+"|cffffcc00"+I2S(SI[i])+"|r"
set s=s+"
Ngũ hành: "+"|cffffcc00"+cie[(0)*(20)+qI[i]]+"|r
"
set s=s+"
Tài phú: "+"|cff7fff00"+I2S('d'*R2I(Pow(pI[i],2))*SI[i])+"|r
"
if PI[i]==1 then
set s=s+"
Tư chất:
|cffadd8e6Sức: "+I2S(SI[i]*6)+"   Thân: "+I2S(SI[i]*6)+"   Nội: 0|r"
elseif PI[i]==2 then
set s=s+"
Tư chất:
|cffadd8e6Sức: 0   Thân: "+I2S(SI[i]*6)+"   Nội: "+I2S(SI[i]*6)+"|r"
else
set s=s+"
Tư chất:
|cffadd8e6Sức: "+I2S(SI[i]*6)+"   Thân: 0   Nội: "+I2S(SI[i]*6)+"|r"
endif
call BlzSetAbilityExtendedTooltip('A0FE',s,i-1)
set s=null
endfunction
function cTx takes integer i,integer cpx,integer cMx,integer uCe,integer cPx,string cux returns nothing
set QI[i]=CreateUnit(Player(i-1),Uj[cMx],GetUnitX(XJ[i]),GetUnitY(XJ[i]),270)
set qI[i]=uCe
set PI[i]=cPx
set pI[i]=cpx
set sI[i]=cMx
set SI[i]=1
set BDe[(0)*(20)+i]=0
set tI[i]=0
if cPx==1 then
call T8e(XJ[i],6*SI[i],true)
call T9e(XJ[i],6*SI[i],true)
elseif cPx==2 then
call uve(XJ[i],6*SI[i],true)
call T9e(XJ[i],6*SI[i],true)
else
call T8e(XJ[i],6*SI[i],true)
call uve(XJ[i],6*SI[i],true)
endif
set BCe[(i)*(20)+1]=S2I(SubString(cux,0,1))
set BCe[(i)*(20)+2]=S2I(SubString(cux,1,2))
set BCe[(i)*(20)+3]=S2I(SubString(cux,2,3))
set BCe[(i)*(20)+4]=S2I(SubString(cux,3,4))
set BCe[(i)*(20)+5]=S2I(SubString(cux,4,5))
set BCe[(i)*(20)+6]=S2I(SubString(cux,5,6))
set Bde[(i)*(20)+1]=1
set Bde[(i)*(20)+2]=1
call cQx(XJ[i],i,QI[i],uCe,BCe[(i)*(20)+1],1,true,1,1)
call cQx(XJ[i],i,QI[i],uCe,BCe[(i)*(20)+2],1,true,1,2)
if BCe[(i)*(20)+3]>0 then
set Bde[(i)*(20)+3]=1
call cQx(XJ[i],i,QI[i],uCe,BCe[(i)*(20)+3],1,true,1,3)
endif
if BCe[(i)*(20)+4]>0 then
set Bde[(i)*(20)+4]=1
call cQx(XJ[i],i,QI[i],uCe,BCe[(i)*(20)+4],1,true,1,4)
endif
if BCe[(i)*(20)+5]>0 then
set Bde[(i)*(20)+5]=1
call cQx(XJ[i],i,QI[i],uCe,BCe[(i)*(20)+5],1,true,1,5)
endif
if BCe[(i)*(20)+6]>0 then
set Bde[(i)*(20)+6]=1
call cQx(XJ[i],i,QI[i],uCe,BCe[(i)*(20)+6],1,true,1,6)
endif
call SetUnitAbilityLevel(QI[i],'A0FE',i)
set mv=R2I('d'*Pow(pI[i],2)*SI[i])
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+mv*2
call tCe(i,mv,1)
call ctx(i)
set bke[(i)*(20)+1]=UnitAddItemById(QI[i],'I05A')
call YFe(i,1,bKe[(i)*(20)+1])
set bke[(i)*(20)+2]=UnitAddItemById(QI[i],'I05B')
call YFe(i,2,bKe[(i)*(20)+2])
set bke[(i)*(20)+3]=UnitAddItemById(QI[i],'I05C')
call YFe(i,3,bKe[(i)*(20)+3])
set bke[(i)*(20)+4]=UnitAddItemById(QI[i],'I05D')
call YFe(i,4,bKe[(i)*(20)+4])
set bke[(i)*(20)+5]=UnitAddItemById(QI[i],'I05E')
call YFe(i,5,bKe[(i)*(20)+5])
set bke[(i)*(20)+6]=UnitAddItemById(QI[i],'I05F')
call YFe(i,6,bKe[(i)*(20)+6])
endfunction
function cUx takes unit u,player p,integer i returns nothing
local item t=UnitItemInSlot(u,0)
local integer id=GetHandleId(t)
local string s=""
if GetItemTypeId(t)=='I052' then
set s=LoadStr(IT,id,4358)
call cTx(i,S2I(SubString(s,0,1)),S2I(SubString(s,1,3))-$A,S2I(SubString(s,3,4)),S2I(SubString(s,4,5)),SubString(s,5,$B))
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl"),((GetUnitX(QI[i]))*1.),((GetUnitY(QI[i]))*1.)))
call FlushChildHashtable(IT,id)
call RemoveItem(t)
call Qke(p,"|cffffcc00"+"Bạn đã triệu hồi linh thú !",5)
else
call Qke(p,"|cffffcc00"+"Cần phải đặt thiệp đồng hành ở ô đầu tiên trong hành trang",5)
endif
set s=null
set t=null
endfunction
function cwx takes unit u,player p,integer i returns nothing
local integer c=0
local real twe=0
local item t=null
local real r=$3E8*.5*pI[i]
local real n=Dj[SI[i]]
local real w0e=0
if QI[i]!=null then
loop
exitwhen c>5
set t=UnitItemInSlot(OJ[i],c)
if t!=null then
if GetWidgetLife(t)=='e' then
set w0e=Pow(3,I2R(LoadInteger(UH,GetItemTypeId(t),5710)-1))
set twe=twe+((w0e*n)/ r)
call RemoveItem(t)
call Qre(AddSpecialEffect("Abilities\\Spells\\Items\\AIlm\\AIlmTarget.mdl",GetUnitX(QI[i]),GetUnitY(QI[i])))
endif
endif
set c=c+1
endloop
set tI[i]=tI[i]+twe
call Qke(p,"|cffffcc00"+"Lĩnh ngộ: |r"+I2S(R2I(tI[i]))+"/100",5)
else
call Qke(p,"|cffffcc00"+"Bạn không sở hữu linh thú!",3)
endif
set t=null
endfunction
function cWx takes integer z,integer lv returns string
if z==1 then
return"Kỹ năng |cff7fff00Phá Không Trảm ảnh|r đạt cấp độ "+"|cffffcc00"+I2S(lv)+"|r"
elseif z==2 then
return"Kỹ năng |cff7fff00Ngũ Hành Vô Tướng|r đạt cấp độ "+"|cffffcc00"+I2S(lv)+"|r"
elseif z==3 then
return"Kỹ năng |cff7fff00Kinh Hồng Nhất Kích|r đạt cấp độ "+"|cffffcc00"+I2S(lv)+"|r"
elseif z==4 then
return"Kỹ năng |cff7fff00Hư Không Thiểm ảnh|r đạt cấp độ "+"|cffffcc00"+I2S(lv)+"|r"
elseif z==5 then
return"Kỹ năng |cff7fff00ích Thọ Âm Dương|r đạt cấp độ "+"|cffffcc00"+I2S(lv)+"|r"
elseif z==6 then
return"Kỹ năng |cff7fff00Cam Vũ Lâm Hoa|r đạt cấp độ "+"|cffffcc00"+I2S(lv)+"|r"
elseif z==7 then
return"Kỹ năng |cff7fff00Vô Niệm Kinh|r đạt cấp độ "+"|cffffcc00"+I2S(lv)+"|r"
elseif z==8 then
return"Kỹ năng |cff7fff00Từ Bi Tế Vũ|r đạt cấp độ "+"|cffffcc00"+I2S(lv)+"|r"
else
return"Kỹ năng |cff7fff00Hội Thần Tĩnh Tâm|r đạt cấp độ "+"|cffffcc00"+I2S(lv)+"|r"
endif
endfunction
function cyx takes unit u,player p,integer i returns boolean
local integer c=1
local integer n=0
loop
exitwhen c>300
set n=GetRandomInt(1,pI[i])
if Bde[(i)*(20)+n]<8 then
set Bde[(i)*(20)+n]=Bde[(i)*(20)+n]+1
call cQx(XJ[i],i,QI[i],qI[i],BCe[(i)*(20)+n],1,false,1,n)
call Qke(p,cWx(BCe[(i)*(20)+n],Bde[(i)*(20)+n]),4)
set c=300
endif
set c=c+1
endloop
return false
endfunction
function cYx takes unit u,player p,integer i returns boolean
local integer tAe=50*SI[i]*3
local integer Tre=$FA0*SI[i]*pI[i]
if BDe[(0)*(20)+i]!=BDe[(1)*(20)+i]/ 3 then
return false
endif
if SI[i]<30 then
if BDe[(0)*(20)+i]>=tAe and tI[i]>=100. then
if tHe(i,Tre,0)then
set Sv=Q0e(u,'I057')
if Sv!=null then
call RemoveItem(Sv)
call tHe(i,Tre,De)
set SI[i]=SI[i]+1
set tI[i]=0
set BDe[(0)*(20)+i]=BDe[(0)*(20)+i]-tAe
set BDe[(1)*(20)+i]=BDe[(0)*(20)+i]*3
if PI[i]==1 then
call T8e(XJ[i],6,true)
call T9e(XJ[i],6,true)
elseif PI[i]==2 then
call uve(XJ[i],6,true)
call T9e(XJ[i],6,true)
else
call T8e(XJ[i],6,true)
call uve(XJ[i],6,true)
endif
call Qre(AddSpecialEffect("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl",GetUnitX(QI[i]),GetUnitY(QI[i])))
call Qke(p,"|cffffcc00"+"Đồng hành đã tăng đến cấp độ: "+I2S(SI[i]),3)
if(Bde[(i)*(20)+1]+Bde[(i)*(20)+2]+Bde[(i)*(20)+3]+Bde[(i)*(20)+4]+Bde[(i)*(20)+5]+Bde[(i)*(20)+6])<(pI[i]+SI[i]-1)then
call cyx(u,p,i)
endif
set mv=R2I('d'*Pow(pI[i],2))
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+mv*2
call tCe(i,mv,1)
call ctx(i)
else
call Qke(p,"|cffffcc00"+"Không tìm thấy Tiến Cấp Đơn trong hành trang!",5)
endif
else
call Qke(p,"|cffffcc00"+"Bạc không đủ yêu cầu tăng cấp Đồng Hành: "+I2S(Tre),3)
endif
else
call Qke(p,"|cffffcc00"+"Lĩnh ngộ và kinh nghiệm Đồng Hành chưa đủ để tăng cấp",3)
endif
else
call Qke(p,"|cffffcc00"+"Đồng Hành đã đạt cấp độ tối đa",3)
endif
return false
endfunction
function czx takes player p,integer i,integer cpx,integer lv returns nothing
if cpx==2 then
if lv>=5 and lv<$A then
call UnitAddItemById(OJ[i],bj[4])
call UnitAddItemById(OJ[i],bj[4])
elseif lv>=$A and lv<$F then
call UnitAddItemById(OJ[i],bj[6])
elseif lv>=$F and lv<20 then
call UnitAddItemById(OJ[i],bj[7])
elseif lv>=20 and lv<25 then
call UnitAddItemById(OJ[i],bj[8])
call UnitAddItemById(OJ[i],bj[7])
call UnitAddItemById(OJ[i],bj[6])
elseif lv>=25 and lv<30 then
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],bj[8])
call UnitAddItemById(OJ[i],bj[7])
call UnitAddItemById(OJ[i],bj[7])
elseif lv>=30 then
call UnitAddItemById(OJ[i],bj[$A])
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],bj[8])
endif
endif
if cpx==3 then
if lv>=5 and lv<$A then
call UnitAddItemById(OJ[i],bj[5])
elseif lv>=$A and lv<$F then
call UnitAddItemById(OJ[i],bj[6])
call UnitAddItemById(OJ[i],bj[5])
call UnitAddItemById(OJ[i],bj[4])
elseif lv>=$F and lv<20 then
call UnitAddItemById(OJ[i],bj[7])
call UnitAddItemById(OJ[i],bj[7])
elseif lv>=20 and lv<25 then
call UnitAddItemById(OJ[i],bj[8])
call UnitAddItemById(OJ[i],bj[8])
call UnitAddItemById(OJ[i],bj[6])
call UnitAddItemById(OJ[i],bj[6])
elseif lv>=25 and lv<30 then
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],bj[7])
elseif lv>=30 then
call UnitAddItemById(OJ[i],bj[$A])
call UnitAddItemById(OJ[i],bj[$A])
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],bj[8])
call UnitAddItemById(OJ[i],bj[8])
call UnitAddItemById(OJ[i],bj[7])
endif
endif
if cpx==4 then
if lv>=5 and lv<$A then
call UnitAddItemById(OJ[i],bj[5])
call UnitAddItemById(OJ[i],bj[4])
elseif lv>=$A and lv<$F then
call UnitAddItemById(OJ[i],bj[6])
call UnitAddItemById(OJ[i],bj[6])
elseif lv>=$F and lv<20 then
call UnitAddItemById(OJ[i],bj[7])
call UnitAddItemById(OJ[i],bj[7])
call UnitAddItemById(OJ[i],bj[6])
call UnitAddItemById(OJ[i],bj[6])
elseif lv>=20 and lv<25 then
call UnitAddItemById(OJ[i],bj[9])
elseif lv>=25 and lv<30 then
call UnitAddItemById(OJ[i],bj[$A])
call UnitAddItemById(OJ[i],bj[7])
elseif lv>=30 then
call UnitAddItemById(OJ[i],bj[$B])
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],bj[8])
endif
endif
if cpx==5 then
if lv>=5 and lv<$A then
call UnitAddItemById(OJ[i],bj[5])
call UnitAddItemById(OJ[i],bj[4])
call UnitAddItemById(OJ[i],bj[4])
call UnitAddItemById(OJ[i],bj[3])
elseif lv>=$A and lv<$F then
call UnitAddItemById(OJ[i],bj[6])
call UnitAddItemById(OJ[i],bj[6])
call UnitAddItemById(OJ[i],bj[5])
call UnitAddItemById(OJ[i],bj[4])
call UnitAddItemById(OJ[i],bj[4])
elseif lv>=$F and lv<20 then
call UnitAddItemById(OJ[i],bj[8])
call UnitAddItemById(OJ[i],bj[5])
call UnitAddItemById(OJ[i],bj[5])
elseif lv>=20 and lv<25 then
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],bj[7])
call UnitAddItemById(OJ[i],bj[7])
call UnitAddItemById(OJ[i],bj[6])
call UnitAddItemById(OJ[i],bj[5])
elseif lv>=25 and lv<30 then
call UnitAddItemById(OJ[i],bj[$A])
call UnitAddItemById(OJ[i],bj[8])
call UnitAddItemById(OJ[i],bj[8])
call UnitAddItemById(OJ[i],bj[7])
call UnitAddItemById(OJ[i],bj[7])
elseif lv>=30 then
call UnitAddItemById(OJ[i],bj[$B])
call UnitAddItemById(OJ[i],bj[$A])
call UnitAddItemById(OJ[i],bj[9])
endif
endif
if cpx==6 then
if lv>=5 and lv<$A then
call UnitAddItemById(OJ[i],bj[5])
call UnitAddItemById(OJ[i],bj[5])
elseif lv>=$A and lv<$F then
call UnitAddItemById(OJ[i],bj[7])
call UnitAddItemById(OJ[i],bj[6])
elseif lv>=$F and lv<20 then
call UnitAddItemById(OJ[i],bj[8])
call UnitAddItemById(OJ[i],bj[7])
elseif lv>=20 and lv<25 then
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],bj[8])
call UnitAddItemById(OJ[i],bj[7])
call UnitAddItemById(OJ[i],bj[6])
call UnitAddItemById(OJ[i],bj[6])
elseif lv>=25 and lv<30 then
call UnitAddItemById(OJ[i],bj[$A])
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],bj[8])
call UnitAddItemById(OJ[i],bj[8])
elseif lv>=30 then
call UnitAddItemById(OJ[i],bj[$B])
call UnitAddItemById(OJ[i],bj[$A])
call UnitAddItemById(OJ[i],bj[$A])
call UnitAddItemById(OJ[i],bj[9])
endif
endif
endfunction
function cZx takes unit u,player p,integer i returns nothing
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl"),((GetUnitX(QI[i]))*1.),((GetUnitY(QI[i]))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã giải tán Đồng Hành !",5)
call RemoveUnit(QI[i])
set QI[i]=null
call czx(p,i,pI[i],SI[i])
if PI[i]==1 then
call T8e(XJ[i],-6*SI[i],true)
call T9e(XJ[i],-6*SI[i],true)
elseif PI[i]==2 then
call uve(XJ[i],-6*SI[i],true)
call T9e(XJ[i],-6*SI[i],true)
else
call T8e(XJ[i],-6*SI[i],true)
call uve(XJ[i],-6*SI[i],true)
endif
set PI[i]=0
call cQx(XJ[i],i,QI[i],qI[i],BCe[(i)*(20)+1],Bde[(i)*(20)+1],false,De,1)
call cQx(XJ[i],i,QI[i],qI[i],BCe[(i)*(20)+2],Bde[(i)*(20)+2],false,De,2)
if BCe[(i)*(20)+3]>0 then
call cQx(XJ[i],i,QI[i],qI[i],BCe[(i)*(20)+3],Bde[(i)*(20)+3],false,De,3)
endif
if BCe[(i)*(20)+4]>0 then
call cQx(XJ[i],i,QI[i],qI[i],BCe[(i)*(20)+4],Bde[(i)*(20)+4],false,De,4)
endif
if BCe[(i)*(20)+5]>0 then
call cQx(XJ[i],i,QI[i],qI[i],BCe[(i)*(20)+5],Bde[(i)*(20)+5],false,De,5)
endif
if BCe[(i)*(20)+6]>0 then
call cQx(XJ[i],i,QI[i],qI[i],BCe[(i)*(20)+6],Bde[(i)*(20)+6],false,De,6)
endif
set mv=R2I('d'*Pow(pI[i],2))*SI[i]
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]-mv*2
call tCe(i,mv,De)
set BCe[(i)*(20)+1]=0
set BCe[(i)*(20)+2]=0
set BCe[(i)*(20)+3]=0
set BCe[(i)*(20)+4]=0
set BCe[(i)*(20)+5]=0
set BCe[(i)*(20)+6]=0
set Bde[(i)*(20)+1]=0
set Bde[(i)*(20)+2]=0
set Bde[(i)*(20)+3]=0
set Bde[(i)*(20)+4]=0
set Bde[(i)*(20)+5]=0
set Bde[(i)*(20)+6]=0
set qI[i]=0
set pI[i]=0
set BDe[(0)*(20)+i]=0
set BDe[(1)*(20)+i]=0
set tI[i]=0
set sI[i]=0
set SI[i]=0
endfunction
function c_x takes unit u,player p,integer i,integer w5e returns nothing
if w5e=='I053' then
if QI[i]==null then
call cUx(u,p,i)
else
call Qke(p,"|cffffcc00"+"Bạn đã sở hữu đồng hành !",5)
endif
elseif w5e=='I055' then
call cwx(u,p,i)
elseif w5e=='I056' then
if QI[i]==null then
call Qke(p,"|cffffcc00"+"Bạn không sở hữu đồng hành !",5)
else
call cYx(u,p,i)
endif
elseif w5e=='I059' then
if QI[i]==null then
call Qke(p,"|cffffcc00"+"Bạn không sở hữu đồng hành !",5)
else
call cZx(u,p,i)
endif
endif
endfunction
function c0x takes unit u,player p,integer i returns nothing
local integer rd=GetRandomInt(2,5)
if QI[i]!=null then
if BDe[(0)*(20)+i]!=BDe[(1)*(20)+i]/ 3 then
else
set BDe[(0)*(20)+i]=BDe[(0)*(20)+i]+rd*3
set BDe[(1)*(20)+i]=BDe[(1)*(20)+i]+rd*9
call Qke(p,"|cffffcc00"+"Kinh nghiệm đồng hành hiện tại: "+I2S(BDe[(1)*(20)+i]/ 9)+"/"+I2S(SI[i]*50),3)
endif
else
call Qke(p,"|cffffcc00"+"Bạn không sở hữu đồng hành!",3)
endif
endfunction
function c1x takes integer i,integer s1,integer s2,integer s3,integer s4,integer s5,integer s6 returns nothing
set SI[i]=S2I(SubString(I2S(s1),1,3))
set PI[i]=S2I(SubString(I2S(s1),3,4))
set qI[i]=S2I(SubString(I2S(s1),4,5))
set pI[i]=S2I(SubString(I2S(s1),5,6))
set sI[i]=s2
set BDe[(0)*(20)+i]=s3
set BDe[(1)*(20)+i]=s3*3
set tI[i]=I2R(s4)
set BCe[(i)*(20)+1]=S2I(SubString(I2S(s5),1,2))
set BCe[(i)*(20)+2]=S2I(SubString(I2S(s5),2,3))
set BCe[(i)*(20)+3]=S2I(SubString(I2S(s5),3,4))
set BCe[(i)*(20)+4]=S2I(SubString(I2S(s5),4,5))
set BCe[(i)*(20)+5]=S2I(SubString(I2S(s5),5,6))
set BCe[(i)*(20)+6]=S2I(SubString(I2S(s5),6,7))
set Bde[(i)*(20)+1]=S2I(SubString(I2S(s6),1,2))
set Bde[(i)*(20)+2]=S2I(SubString(I2S(s6),2,3))
set Bde[(i)*(20)+3]=S2I(SubString(I2S(s6),3,4))
set Bde[(i)*(20)+4]=S2I(SubString(I2S(s6),4,5))
set Bde[(i)*(20)+5]=S2I(SubString(I2S(s6),5,6))
set Bde[(i)*(20)+6]=S2I(SubString(I2S(s6),6,7))
if SI[i]>0 then
set QI[i]=CreateUnit(Player(i-1),Uj[sI[i]],GetUnitX(XJ[i]),GetUnitY(XJ[i]),270)
if s2>=$C and s2<=29 and s2!=27 then
call PauseUnit(QI[i],true)
call ShowUnit(QI[i],false)
endif
if PI[i]==1 then
call T8e(XJ[i],6*SI[i],true)
call T9e(XJ[i],6*SI[i],true)
elseif PI[i]==2 then
call uve(XJ[i],6*SI[i],true)
call T9e(XJ[i],6*SI[i],true)
else
call T8e(XJ[i],6*SI[i],true)
call uve(XJ[i],6*SI[i],true)
endif
call cQx(XJ[i],i,QI[i],qI[i],BCe[(i)*(20)+1],Bde[(i)*(20)+1],true,1,1)
call cQx(XJ[i],i,QI[i],qI[i],BCe[(i)*(20)+2],Bde[(i)*(20)+2],true,1,2)
if BCe[(i)*(20)+3]>0 then
call cQx(XJ[i],i,QI[i],qI[i],BCe[(i)*(20)+3],Bde[(i)*(20)+3],true,1,3)
endif
if BCe[(i)*(20)+4]>0 then
call cQx(XJ[i],i,QI[i],qI[i],BCe[(i)*(20)+4],Bde[(i)*(20)+4],true,1,4)
endif
if BCe[(i)*(20)+5]>0 then
call cQx(XJ[i],i,QI[i],qI[i],BCe[(i)*(20)+5],Bde[(i)*(20)+5],true,1,5)
endif
if BCe[(i)*(20)+6]>0 then
call cQx(XJ[i],i,QI[i],qI[i],BCe[(i)*(20)+6],Bde[(i)*(20)+6],true,1,6)
endif
call SetUnitAbilityLevel(QI[i],'A0FE',i)
set mv=R2I('d'*Pow(pI[i],2)*SI[i])
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+mv*2
call tCe(i,mv,1)
call ctx(i)
set bke[(i)*(20)+1]=UnitAddItemById(QI[i],'I05A')
call YFe(i,1,bKe[(i)*(20)+1])
set bke[(i)*(20)+2]=UnitAddItemById(QI[i],'I05B')
call YFe(i,2,bKe[(i)*(20)+2])
set bke[(i)*(20)+3]=UnitAddItemById(QI[i],'I05C')
call YFe(i,3,bKe[(i)*(20)+3])
set bke[(i)*(20)+4]=UnitAddItemById(QI[i],'I05D')
call YFe(i,4,bKe[(i)*(20)+4])
set bke[(i)*(20)+5]=UnitAddItemById(QI[i],'I05E')
call YFe(i,5,bKe[(i)*(20)+5])
set bke[(i)*(20)+6]=UnitAddItemById(QI[i],'I05F')
call YFe(i,6,bKe[(i)*(20)+6])
endif
endfunction
function c2x takes player p,integer i,integer n returns nothing
set sI[i]=n
call SetItemPosition(bke[(i)*(20)+1],GetUnitX(QI[i]),GetUnitY(QI[i]))
call SetItemPosition(bke[(i)*(20)+2],GetUnitX(QI[i]),GetUnitY(QI[i]))
call SetItemPosition(bke[(i)*(20)+3],GetUnitX(QI[i]),GetUnitY(QI[i]))
call SetItemPosition(bke[(i)*(20)+4],GetUnitX(QI[i]),GetUnitY(QI[i]))
call SetItemPosition(bke[(i)*(20)+5],GetUnitX(QI[i]),GetUnitY(QI[i]))
call SetItemPosition(bke[(i)*(20)+6],GetUnitX(QI[i]),GetUnitY(QI[i]))
call RemoveUnit(QI[i])
set QI[i]=CreateUnit(Player(i-1),Uj[sI[i]],GetUnitX(XJ[i]),GetUnitY(XJ[i]),270)
call UnitAddAbility(QI[i],Bfe[(i)*(6)+1])
call SetUnitAbilityLevel(QI[i],Bfe[(i)*(6)+1],Bde[(i)*(20)+1])
call UnitAddAbility(QI[i],Bfe[(i)*(6)+2])
call SetUnitAbilityLevel(QI[i],Bfe[(i)*(6)+2],Bde[(i)*(20)+2])
if BCe[(i)*(20)+3]>0 then
call UnitAddAbility(QI[i],Bfe[(i)*(6)+3])
call SetUnitAbilityLevel(QI[i],Bfe[(i)*(6)+3],Bde[(i)*(20)+3])
endif
if BCe[(i)*(20)+4]>0 then
call UnitAddAbility(QI[i],Bfe[(i)*(6)+4])
call SetUnitAbilityLevel(QI[i],Bfe[(i)*(6)+4],Bde[(i)*(20)+4])
endif
if BCe[(i)*(20)+5]>0 then
call UnitAddAbility(QI[i],Bfe[(i)*(6)+5])
call SetUnitAbilityLevel(QI[i],Bfe[(i)*(6)+5],Bde[(i)*(20)+5])
endif
if BCe[(i)*(20)+6]>0 then
call UnitAddAbility(QI[i],Bfe[(i)*(6)+6])
call SetUnitAbilityLevel(QI[i],Bfe[(i)*(6)+6],Bde[(i)*(20)+6])
endif
call UnitAddItem(QI[i],bke[(i)*(20)+1])
call UnitAddItem(QI[i],bke[(i)*(20)+2])
call UnitAddItem(QI[i],bke[(i)*(20)+3])
call UnitAddItem(QI[i],bke[(i)*(20)+4])
call UnitAddItem(QI[i],bke[(i)*(20)+5])
call UnitAddItem(QI[i],bke[(i)*(20)+6])
call ctx(i)
call Qke(p,"|cffffcc00"+"Đồng hành đã được ảo hóa và mang ngoại hình mới !",5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl"),((GetUnitX(QI[i]))*1.),((GetUnitY(QI[i]))*1.)))
endfunction
function c3x takes player p,integer i returns integer
local integer a=0
if bGe[(i)*(20)+5]==1 then
set a=a+1
endif
if bhe[(i)*($A)+1]/ 2>=99000 then
set a=a+1
endif
if bhe[(i)*($A)+2]/ 2>=$C8 then
set a=a+1
endif
if(GetPlayerState((p),PLAYER_STATE_RESOURCE_LUMBER))-Bne[(i)*(5)+3]/ 2>=$2710 then
set a=a+1
endif
if bhe[(i)*($A)+3]/ 2>='d' then
set a=a+1
endif
if bhe[(i)*($A)+4]/ 2>=500 then
set a=a+1
endif
if bhe[(i)*($A)+5]/ 2>=500 then
set a=a+1
endif
if bGe[(i)*(20)+$C]==1 then
set a=a+1
endif
if bGe[(i)*(20)+$D]==1 then
set a=a+1
endif
if bGe[(i)*(20)+$E]==1 then
set a=a+1
endif
if cce[(i)*(20)+1]>=800 then
set a=a+1
endif
if bGe[(i)*(20)+16]==1 then
set a=a+1
endif
return a
endfunction
function c4x takes player p,integer i,item t returns boolean
local string s=BlzGetItemDescription(t)
local integer c=S2I(SubString(s,4,6))
local integer z=S2I(SubString(s,0,1))
call RemoveItem(t)
if SI[i]>0 then
if z==0 then
if c==$F then
set mv=c3x(p,i)
if mv>=6 and tHe(i,c*SH,0)then
call tHe(i,c*SH,De)
call c2x(p,i,S2I(SubString(s,2,4)))
else
call Qke(p,"|cffffcc00"+"Không đủ điều kiện !",5)
call Qke(p,"|cff7fff00"+"Thành tựu đặc biệt đã hoàn thành: "+I2S(mv),5)
endif
else
if bGe[(i)*(20)+1]>=c*'d' and tHe(i,c*SH,0)then
call tHe(i,c*SH,De)
call c2x(p,i,S2I(SubString(s,2,4)))
else
call Qke(p,"|cffffcc00"+"Không đủ điều kiện !",5)
endif
endif
elseif z==1 then
set c=S2I(SubString(s,1,3))
if not eox(XJ[i],c)then
set s=null
return false
endif
if UTe(i)then
set s=null
return false
endif
set c=S2I(SubString(s,3,5))
call c2x(p,i,c*mv)
elseif z==2 then
set c=S2I(SubString(s,1,2))
if UTe(i)then
set s=null
return false
endif
if not eox(XJ[i],3)then
set s=null
return false
endif
if not eox(XJ[i],8)then
if S2I(SubString(yH[N9e[(1+mv)*(6)+Ui[pv]]],4,5))<(c+1)then
set s=null
return false
endif
endif
set c=S2I(SubString(s,2,4))
call c2x(p,i,c*mv)
elseif z==3 then
if UTe(i)then
set s=null
return false
endif
if not eox(XJ[i],5)then
set s=null
return false
endif
if not eox(XJ[i],8)then
if S2I(SubString(Zi[Kk[i]],6,7))<4 then
set s=null
return false
endif
endif
call c2x(p,i,(z*9+1)*mv)
endif
else
call Qke(p,"|cffffcc00"+"Bạn vẫn chưa sở hữu đồng hành !",5)
endif
set s=null
return false
endfunction
function c5x takes player p,integer i,integer w0e returns nothing
local integer c=1
local integer a=0
local integer b=0
if w0e>0 and w0e<$C then
if cNe[(Ui[i])*(20)+w0e]>=3 and cNe[(Ui[i])*(20)+w0e+1]<99 then
set c=ModuloInteger(cNe[(Ui[i])*(20)+w0e],3)
set a=(cNe[(Ui[i])*(20)+w0e]-c)/ 3
set cNe[(Ui[i])*(20)+w0e]=cNe[(Ui[i])*(20)+w0e]-a*3
set cNe[(Ui[i])*(20)+w0e+1]=cNe[(Ui[i])*(20)+w0e+1]+a
set Yk[i]=Yk[i]+(a-a*3)*2
if cNe[(Ui[i])*(20)+w0e+1]>99 then
set b=cNe[(Ui[i])*(20)+w0e+1]-99
set cNe[(Ui[i])*(20)+w0e+1]=99
set cNe[(Ui[i])*(20)+w0e]=cNe[(Ui[i])*(20)+w0e]+b*3
set Yk[i]=Yk[i]-(b-b*3)*2
set a=a-b
endif
call Qke(p,"Ghép "+"|cffffcc00"+I2S(a*3)+"|r Huyền Tinh cấp "+I2S(w0e)+" thành "+"|cffffcc00"+I2S(a)+"|r Huyền Tinh cấp "+I2S(w0e+1),3)
endif
endif
endfunction
function c6x takes unit u,player p,integer i,item t returns boolean
local string s=BlzGetItemDescription(t)
local integer z=S2I(SubString(s,0,2))
local integer c7x=S2I(SubString(s,2,6))
local integer QZe=S2I(SubString(s,6,7))
local integer c=1
call RemoveItem(t)
if i==0 or u==null then
set s=null
return false
endif
if z==0 or c7x==0 then
set s=null
return false
endif
if t3e(XJ[i],c7x,0)then
set s=null
return false
endif
if not eox(XJ[i],1)then
set s=null
return false
endif
if UTe(i)then
set s=null
return false
endif
if z!=16 and z!=18 then
call t3e(XJ[i],c7x,De)
endif
if QZe>0 then
if z==16 then
if BFe[(i)*(4)+4]<9 then
call UnitAddItemById(u,Tj[z])
set BFe[(i)*(4)+4]=BFe[(i)*(4)+4]+1
call Qke(p,"|cffffcc00"+uj[4],5)
call t3e(XJ[i],c7x,De)
endif
else
loop
exitwhen c>QZe
call UnitAddItemById(u,Tj[z])
set c=c+1
endloop
call Qke(p,"|cffffcc00"+uj[4],5)
endif
else
if z>=1 and z<=3 then
set BFe[(i)*(4)+z]=BFe[(i)*(4)+z]+$708*mv
call Qke(p,"|cffffcc00"+uj[z]+I2S(BFe[(i)*(4)+z]/ 2),5)
endif
if z==5 then
set zI[i]=zI[i]+3*mv
call Qke(p,"|cffffff00"+uj[z]+I2S(zI[i]/ 3),5)
endif
if z==6 then
call tHe(i,mv*17*sH-$83E,1)
endif
if z==7 then
call tFe(i,mv*3*sH,1)
endif
if z>=$D and z<=$F then
set Bge[(i)*(3)+z*mv-$C]=$A*mv
call Qke(p,"|cffffcc00"+uj[z],5)
endif
if z==18 then
if uI[i]<300 then
set uI[i]=uI[i]+1
call tfe(i,(K1-$C8)*mv,1)
call t3e(XJ[i],c7x,De)
call Qke(p,"|cffffcc00"+uj[z],5)
endif
endif
endif
set s=null
return false
endfunction
function c8x takes unit u,player p,integer i,item t returns boolean
local string s=BlzGetItemDescription(t)
local integer z=S2I(SubString(s,0,2))
local integer ts=S2I(SubString(s,2,3))
local integer lv=S2I(SubString(s,3,6))
local integer ck=S2I(SubString(s,7,9))
local integer Tre=S2I(SubString(s,$A,$C))
local integer t0e=S2I(SubString(s,$D,$F))
local integer c9x=S2I(SubString(s,16,17))
local integer cccz=0
call RemoveItem(t)
if i==0 or u==null then
set s=null
return false
endif
if UTe(i)then
set s=null
return false
endif
if not eox(XJ[i],z)then
set s=null
return false
endif
if ts>0 then
if bJ[i]<ts then
set s=null
return false
endif
else
if rk[i]<lv then
set s=null
return false
endif
endif
if BGe[(i)*(3)+mv]!=z-mv then
set s=null
return false
endif
set BGe[(i)*(3)+mv]=z
call tDe(i,z*Mv*$A,mv)
call tHe(i,Tre*Mv*K1,mv)
call tFe(i,ck*Mv*K1,mv)
call tfe(i,t0e*Mv*$A,mv)
if z==1 then
call tje(i,$A*Mv,1,mv)
call UnitAddItemById(u,bj[6])
elseif z==2 then
call tje(i,$A*Mv,1,mv)
call UnitAddItemById(u,bj[6])
elseif z==3 then
call tje(i,$A*Mv,2,mv)
call UnitAddItemById(u,bj[6])
call UnitAddItemById(u,bj[6])
elseif z==4 then
call tje(i,$A*Mv,3,mv)
call UnitAddItemById(u,bj[6])
call UnitAddItemById(u,bj[6])
call UnitAddItemById(u,'I0BJ')
elseif z==5 then
call tje(i,$A*Mv,4,mv)
call UnitAddItemById(u,bj[6])
call UnitAddItemById(u,bj[6])
call UnitAddItemById(u,'I0BJ')
call UnitAddItemById(u,'I0BJ')
elseif z==6 then
call tje(i,$A*Mv,5,mv)
call UnitAddItemById(u,bj[7])
call UnitAddItemById(u,bj[7])
call UnitAddItemById(u,'I0BJ')
call UnitAddItemById(u,'I0BJ')
call UnitAddItemById(u,'I0BJ')
elseif z==7 then
call tje(i,$A*Mv,6,mv)
call UnitAddItemById(u,bj[7])
call UnitAddItemById(u,bj[7])
call UnitAddItemById(u,'I0BJ')
call UnitAddItemById(u,'I0BJ')
call UnitAddItemById(u,'I0BJ')
call UnitAddItemById(u,'I0BJ')
elseif z==8 then
call t2e(i,$A*Mv*mv)
call UnitAddItemById(u,bj[8])
call UnitAddItemById(u,'I0BK')
call UnitAddItemById(u,'I0BK')
call UnitAddItemById(u,'I0BK')
elseif z==9 then
call t2e(i,$A*Mv*mv)
call UnitAddItemById(u,bj[8])
call UnitAddItemById(u,bj[8])
call UnitAddItemById(u,'I0BK')
call UnitAddItemById(u,'I0BK')
call UnitAddItemById(u,'I0BK')
elseif z==$A then
call t2e(i,$A*Mv*mv)
call UnitAddItemById(u,bj[9])
call UnitAddItemById(u,'I0BK')
call UnitAddItemById(u,'I0BK')
call UnitAddItemById(u,'I0BK')
elseif z==$B then
call t2e(i,$A*Mv*mv)
call UnitAddItemById(u,bj[9])
call UnitAddItemById(u,bj[9])
call UnitAddItemById(u,'I0BK')
call UnitAddItemById(u,'I0BK')
call UnitAddItemById(u,'I0BK')
endif
call UnitAddItemById(u,Lj[c9x])
call QKe(rj[i]+"|cffffcc00"+uj[21],5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
set s=null
return false
endfunction
function Cvx takes unit u,player p,integer i,item t returns boolean
local string s=BlzGetItemDescription(t)
local integer z=S2I(SubString(s,0,1))
local integer c9x=S2I(SubString(s,1,2))
call RemoveItem(t)
if i==0 or u==null then
set s=null
return false
endif
if UTe(i)then
set s=null
return false
endif
if not eox(XJ[i],z+5)then
set s=null
return false
endif
if bJ[i]<z+3 then
set s=null
return false
endif
if BGe[(i)*(3)+mv+1]!=z-mv then
set s=null
return false
endif
set BGe[(i)*(3)+mv+1]=z
call tHe(i,2*Mv*sH,mv)
call tFe(i,Mv*sH,mv)
call tfe(i,(z+1)*Mv*'d',mv)
call t2e(i,$A*Mv*mv)
call UnitAddItemById(u,Lj[c9x])
call UnitAddItemById(u,bj[9])
call UnitAddItemById(u,bj[9])
call UnitAddItemById(u,'I0BK')
call UnitAddItemById(u,'I0BK')
call UnitAddItemById(u,'I0BK')
call UnitAddItemById(u,'I0BK')
call QKe(rj[i]+"|cffffcc00"+uj[21],5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
set s=null
return false
endfunction
function Cex takes integer a,integer b returns nothing
set UI="
"+"|cff6d6d6d"+"[ Nhiệm vụ giang hồ ]|r

"
if a==1 then
if b==1 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Trên đường ta có đi ngang qua quê hương Nhạc Phi, thấy một người thần sắc rầu rỉ, hỏi ra mới biết Nhạc Khả Sơn là hậu nhân Nhạc Gia Quân, thần sắc rầu rỉ là vì Mãn Giang Hồng đã bị cướp mất bởi hậu nhân Tần Cối là Tần Tri Lễ, ta muốn đòi lại công bằng cho Nhạc Gia Quân"
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 1/5 ]:|r
 Đánh bại |cffffff00Tần Tri Lễ|r ở Hoa Sơn lấy lại Mãn Giang Hồng"
endif
if b==2 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Tần Tri Lễ đã mang Mãn Giang Hồng dâng lên cho thái thú Dương Châu để lấy lòng"
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 2/5 ]:|r
 Tới Dương Châu tìm thái thú Vương Chi Vọng hỏi về Mãn Giang Hồng"
endif
if b==3 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Vương Chi Vọng ra điều kiện yêu cầu giúp ông ta xâm nhập vào Sát Thủ Đường và tiêu diệt tổ chức sát thủ, đổi lại ông ta sẽ giao Mãn Giang Hồng cho ta"
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 3/5 ]:|r
 Tiêu diệt thủ lĩnh Sát Thủ Đường |cffff0000Khổng Bất Dung|r"
endif
if b==4 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Vương Chi Vọng ra điều kiện yêu cầu giúp ông ta xâm nhập vào Sát Thủ Đường và tiêu diệt tổ chức sát thủ, đổi lại ông ta sẽ giao Mãn Giang Hồng cho ta"
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 4/5 ]:|r
 Quay trở về gặp Vương Chi Vọng phục mệnh"
endif
if b==5 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Vương Chi Vọng giao ra Mãn Giang Hồng"
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 5/5 ]:|r
 Mang theo Mãn Giang Hồng giao cho Nhạc Khả Sơn"
endif
if b==6 then
set UI=UI+"|cffadd8e6"+"Nhiệm vụ đã hoàn thành !"
endif
elseif a==2 then
if b==1 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Vũ Nương bị lạc mất hài tử khi đến bến tàu Hoài Thủy Sa Châu, ta quyết định sẽ giúp cô ấy tìm lại hài tử."
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 1/5 ]:|r
 Tìm thấy Đào Tử và Thanh Thanh bị thất lạc ở Hoài Thủy Sa Châu"
endif
if b==2 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Ta phát hiện Đào Tử đang đứng bên ngoài một sơn cốc khóc lóc, hỏi xem mới biết Thanh Thanh muội tử của y vì đuổi theo một con thỏ mà đi vào sơn cốc, mãi không thấy trở ra"
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 2/5 ]:|r
 Vào Vạn Hoa Cốc truy tìm tung tích của Thanh Thanh"
endif
if b==3 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Vạn Hoa Cốc cơ quan trùng trùng, sương mù phủ khắp bốn phía, người trong cốc đã phát hiện ra ta xâm nhập, phải nhanh chóng hỏi thăm tin tức"
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 3/5 ]:|r
 Vượt qua vòng vây, tìm trong cốc người biết tin tức về Thanh Thanh"
endif
if b==4 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Hoàng Tán Nhất đại phu bị bắt vào cốc để bào chế dược liệu cho Cốc Chủ, ông ta nhìn thấy một đứa trẻ lạc vào cốc bị bắt giữ cách đây không lâu, e rằng đã trở thành dược liệu bào chế Đồng Phúc Tửu của Túy Tăng"
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 4/5 ]:|r
 Đánh bại |cffff0000Túy Tăng|r giải cứu Thanh Thanh"
endif
if b==5 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Vạn Hoa Cốc gây nhiều chuyện ác, bắt cóc trẻ em làm dược liệu, sau khi tiêu hủy toàn bộ dược liệu ở đây, ta đưa Thanh Thanh và Đào Tử trở về với Vũ Nương"
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 5/5 ]:|r
 Trở về gặp Vũ Nương ở bến tàu Hoài Thủy Sa Châu"
endif
if b==6 then
set UI=UI+"|cffadd8e6"+"Nhiệm vụ đã hoàn thành !"
endif
elseif a==3 then
if b==1 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Kể từ khi Lâu Lan Cổ Thành xuất hiện sau giấc ngủ ngàn năm, nhân sĩ võ lâm đến thám hiểm vô số nhưng đa phần một đi không trở lại, Yến Tiểu Lâu nhờ ngươi tra rõ bí ẩn này."
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 1/1 ]:|r
 Đến Lâu Lan Cổ Thành điều tra, tìm về Lâu Lan Cổ Vật giao cho Yến Tiểu Lâu"
endif
if b==2 then
set UI=UI+"|cffadd8e6"+"Nhiệm vụ đã hoàn thành !"
endif
elseif a==4 then
if b==1 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Đêm nọ Long Ngũ Thái Gia coi thiên văn, thấy Hành Giả Sa Mạc xuất hiện tại nơi biên ải Long Môn Quan, tiên sinh liền sai người tìm hiểu sự tình, bất ngờ phát hiện ra nơi trú ẩn của Tào Công Công và âm mưu lật đổ hoàng đế của y."
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 1/5 ]:|r
 Tìm ông chủ Tiêu Cục Lục Tam Cần ở Ba Lăng Huyện hỏi thăm tin tức về Long Môn Tiêu Cục"
endif
if b==2 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Tổng đà Long Môn Tiêu Cục nằm trong một khu vực bí ẩn tại Long Môn Quan, rất khó để xâm nhập. Ngươi phải giả làm tiêu sư của Lục Tam Cần theo đoàn bảo tiêu đến Dương Châu gặp Lộ Trinh Phi, hắn sẽ đưa ngươi vào Long Môn Tiêu Cục để tránh tai mắt của Tào Công Công"
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 2/5 ]:|r
 Vận tiêu đến Dương Châu"
endif
if b==3 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Tổng đà Long Môn Tiêu Cục nằm trong một khu vực bí ẩn tại Long Môn Quan, rất khó để xâm nhập. Ngươi phải giả làm tiêu sư của Lục Tam Cần đi theo đoàn bảo tiêu đến Dương Châu gặp Lộ Trinh Phi, hắn sẽ đưa ngươi vào Long Môn Tiêu Cục để tránh tai mắt của Tào Công Công"
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 3/5 ]:|r
 Gặp Lộ Trinh Phi đứng gần Quan Quân Nhu ở Dương Châu"
endif
if b==4 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Lộ Trinh Phi chỉ đưa ngươi vào Long Môn Tiêu Cục, mọi việc còn lại phải tự lo liệu."
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 4/5 ]:|r
 Vào Long Môn Tiêu Cục tìm ra bằng chứng phản quốc"
endif
if b==5 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Lấy được mật thư Kim quốc gửi cho Lý Hậu trên người Mật Thám Kim Quốc, đây là một bí mật động trời liên quan tới triều chính Đại Tống, đưa mật thám và mang mật thư về giao cho Long Ngũ Thái Gia để giăng lưới bắt tất cả những kẻ nội gián."
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 5/5 ]:|r
 Trở về gặp Long Ngũ Thái Gia"
endif
if b==6 then
set UI=UI+"|cffadd8e6"+"Nhiệm vụ đã hoàn thành !"
endif
elseif a==5 then
if b==1 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Đệ tử của Lâm Yên Khanh đang ở cùng nghĩa quân tại một căn cứ Phong Lăng Độ thì bị những cao thủ thần bí tấn công, căn cứ đã bị phá hủy còn Tử Thư Thanh mất tích."
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 1/4 ]:|r
 Tới Phong Lăng Độ dò la tin tức của nghĩa quân và Tử Thư Thanh"
endif
if b==2 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Nghĩa quân theo dõi tung tích của những kẻ thần bí phát hiện ra bọn chúng đưa Tử Thư Thanh vào một sơn cốc gọi là Bích Lạc Cốc."
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 2/4 ]:|r
 Vào Bích Lạc Cốc tìm Tử Thư Thanh"
endif
if b==3 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Tìm thấy Tử Thư Thanh trong Bích Lạc Cốc, bọn chúng bắt cô ấy vào nhưng không gây tổn hại. Thư Thanh nghi ngờ Bích Lạc Cốc câu kết quân Kim muốn triệt hạ nghĩa quân."
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 3/4 ]:|r
 Phá tan vòng vây Bích Lạc Cốc đưa Tử Thư Thanh ra ngoài"
endif
if b==4 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+"- Sư phụ cô đang rất lo lắng, hãy nhanh chóng theo ta trở về
- Các hạ có thể đưa ta đến chỗ Thu Di được không, sư phụ lại bắt ta học các loại võ công khó nhằn mà không cho ta ra ngoài
- Không được, tại hạ đã nhận ủy thác của Lâm tiền bối sẽ đưa cô về
- Hứ, đáng ghét !"
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 4/4 ]:|r
 Cứu thoát Tử Thư Thanh, trở về gặp Lâm Yên Khanh ở Ba Lăng Huyện"
endif
if b==5 then
set UI=UI+"|cffadd8e6"+"Nhiệm vụ đã hoàn thành !"
endif
elseif a==6 then
if b==1 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Một đám tặc khấu tụ họp ở Lương Sơn Bạc lấy danh nghĩa thay trời hành đạo, ngươi hãy đến đó điều tra."
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 1/4 ]:|r
 Tới gặp Đới Tung ở Hoài Thủy Sa Châu"
endif
if b==2 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Đới Tung cho rằng Lương Sơn Bạc hành hiệp trượng nghĩa, tế thế cứu bần. Nếu triều đình tiến quân đánh dẹp, Lương Sơn sẽ chống lại đến cùng."
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 2/4 ]:|r
 Trở về gặp Tần Khuê báo cáo tình hình"
endif
if b==3 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Hiện nay cuộc chiến với quân Kim vẫn còn dai dẳng, ta nhận lời của Tần Khuê đến Lương Sơn chiêu an, để họ góp công vào công cuộc vệ quốc."
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 3/4 ]:|r
 Vào Lương Sơn Bạc chiêu an, trước tiên phải phá được vòng vây của quân Lương Sơn"
endif
if b==4 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Thủ lĩnh Tống Giang của Lương Sơn đã có ý định nhận chiêu an từ lâu, nay quân Kim lăm le bờ cõi, Lương Sơn quyết định góp sức giúp triều đình chống giặc ngoại xâm."
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 4/4 ]:|r
 Trở về báo với Tần Khuê"
endif
if b==5 then
set UI=UI+"|cffadd8e6"+"Nhiệm vụ đã hoàn thành !"
endif
elseif a==7 then
if b==1 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Ta gặp được thống lĩnh thị vệ Cốc Nam tại Dương Châu, y nói với ta chuyện liên quan Tử Mẫu Hoàn, một bảo vật được Tề Vương mua lại với giá cao chuẩn bị dâng lên hoàng thượng. Không ngờ trên đường vận chuyển bị một nhóm bịt mặt chặn cướp, khi biết chuyện Tề Vương đã nổi trận lôi đình hạ lệnh cho người phụ trách áp giải phải lấy lại cho bằng được, nếu không tất cả những người hộ tống phải rơi đầu. Sau nhiều lần nghe ngóng, Cốc Nam dò la được việc này có liên quan đến Ngũ Độc Giáo, nhưng nhiều lần xin yết kiến giáo chủ Cổ Yên Nhiên đều bị từ chối"
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 1/7 ]:|r
 Đến tìm đệ tử Ngũ Độc Giáo ở Ba Lăng Huyện dò la tin tức"
endif
if b==2 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Giáo chủ Ngũ Độc Giáo hiện tại không có trong bổn giáo mà đang phải xử lý nội vụ tại Trường Bạch Sơn"
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 2/7 ]:|r
 Đến Trường Bạch Sơn tìm giáo chủ Cổ Yên Nhiên"
endif
if b==3 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Ngũ Độc Giáo chúng ta tuy bị gọi là tà giáo nhưng không làm những chuyện cướp bóc, giết người tùy tiện đặc biệt là liên quan đến triều đình. Bổn giáo hiện nay đang có nhiều chuyện phức tạp, xin các hạ thứ lỗi mà rời khỏi nơi đây"
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 3/7 ]:|r
 Cổ Yên Nhiên phủi bỏ trách nhiệm, tìm Long Ngũ Thái Gia ở Ba Lăng Huyện nhờ giúp đỡ"
endif
if b==4 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Một trong ngũ đại kỳ chủ của Ngũ Độc Giáo bị quân Kim mua chuộc, đánh cắp bảo vận trấn giáo và nhiều bảo vật khác trên giang hồ nhằm lấy lòng hoàng đế nước Kim. Long Ngũ Thái Gia giao cho ta một phong thư mang đến cho Cổ Yên Nhiên, nhờ ta giúp đỡ họ lấy lại bảo vật"
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 4/7 ]:|r
 Trở lại gặp Cổ Yên Nhiên"
endif
if b==5 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Đích thần Long Ngũ Thái Gia lên tiếng, xin đa tạ sự giúp đỡ của các hạ mặc dù đây là chuyện của bổn giáo. Minh Linh kỳ chủ tách khỏi bổn giáo và trốn vào cung điện do y tạo ra ở Trường Bạch Sơn, do khí độc và cơ quan trùng trùng, người của bổn giáo vẫn chưa thể công phá."
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 5/7 ]:|r
 Giúp Ngũ Độc Giáo xâm nhập vào Minh Linh Đình Viện"
endif
if b==6 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Thiên Cơ Lão Nhân bị đánh bại, tìm lại được Tử Mẫu Hoàn và những bảo vật bị đánh cắp, trở lại gặp Cổ Yên Nhiên"
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 6/7 ]:|r
 Gặp Cổ Yên Nhiên ở Trường Bạch Sơn"
endif
if b==7 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+"- Việc của bổn giáo đã làm phiền đến các hạ và nghĩa quân, xin đa tạ. Từ nay nghĩa quân có việc gì cần giúp đỡ, Ngũ Độc Giáo chúng ta nghĩa bất từ nan.
 Giao lại bảo vật cho Cổ Yên Nhiên, mang Tử Mẫu Hoàn về cho Cốc Nam"
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 7/7 ]:|r
 Trở về gặp Cốc Nam"
endif
if b==8 then
set UI=UI+"|cffadd8e6"+"Nhiệm vụ đã hoàn thành !"
endif
elseif a==8 then
if b==1 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Ba mươi năm trước, khi còn tu hành ở Ngũ Đài Sơn. Trong một lần xuất sơn và bị kẹt tại hang động trong cơn bão tuyết, ta đã không kiềm được lòng trần mà phạm giới cùng một người con gái mà sau này mới hay biết nàng chính là thánh nữ ma giáo Lãnh Hương Lăng. Tự cho mình là chính giáo vì nghĩa diệt thân, ta đã bán đứng nàng khiến nàng cùng ma giáo bị diệt vong. Sau cùng ta cũng hay rằng nàng có một đứa con gái, cũng chính là còn gái của ta. Nhưng vì không đủ dũng khí đối mặt, ta đã giao con gái cho La Huyền nuôi dưỡng, bản thân mình tự giam ở đây để sám hối. Ta tự biết thời điểm của mình sắp tới, chỉ mong con gái ta được sống tốt."
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 1/7 ]:|r
 Tìm Dã Tẩu ở Ba Lăng Huyện hỏi thăm tin tức La Huyền"
endif
if b==2 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Dã Tẩu cho biết La Huyền đã tuyệt tích từ 20 năm trước, tông tích của y họa chăng chỉ người trong Trường Ca Tam Kiệt biết được"
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 2/7 ]:|r
 Tìm Hạ Hầu Nguyên Thao ở Dương Châu hỏi thăm tin của La Huyền"
endif
if b==3 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Trước khi La Huyền mất tích, ta đã nhận được một phong thư với nội dung rằng y đã làm một chuyện hổ thẹn không đáng sống trên đời và sẽ tự mình giải quyết chuyện này trước khi nó gây hại cho võ lâm. Khi ta tức tốc tìm đến La Gia Trang thì phát hiện chẳng còn gì ngoài một đống đổ nát, và La Huyền mất tích từ đó, ta đã tìm được một con dao ngắn là vật của Lãnh Hương Lăng ngày xưa, nghi ngờ rằng việc này có sự nhúng tay của ma giáo."
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 3/7 ]:|r
 Tìm Ca Thư Mạc là người còn lại của Trường Ca Tam Kiệt ở Ba Lăng Huyện"
endif
if b==4 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Cũng giống như Hạ Hầu Nguyên Thao, ta nghi ngờ có sự nhúng tay của ma giáo vào sự kiện đó. Trong nhiều năm điều tra, ta đã phát hiện một tổ chức thành lập sau 10 năm từ khi La Huyền mất tích, tổ chức đó bao gồm những phụ nữ là gia quyến của ma giáo ngày xưa, vì chúng chưa có hành động gì nên ta vẫn chưa thông cáo việc này cho toàn thể võ lâm. Thất đáng tiếc, khi xưa ta đã khuyên nên tận diệt bọn ma giáo để trừ hậu hoạn, nhưng La Huyền và Giác Sinh đại sư lại ngăn cản."
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 4/7 ]:|r
 Xâm nhập vào Thiên Quỳnh Cung thông qua nội gián của Ca Thư Mạc - Lý Hương Lan ở Dương Châu"
endif
if b==5 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Ta bị phát hiện khi xâm nhập vào Thiên Quỳnh Cung và tìm thấy danh xưng Cung Chủ trên một văn thư. Với cái tên thấy được, ta đã suy đoán ra khả năng cung chủ chính là con gái của Giác Sinh Đại Sư, không còn cách nào khác ngoài đánh hạ tất cả bọn họ để tới gặp cung chủ Lãnh Sương Nhiên"
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 5/7 ]:|r
 Vượt qua vòng vây tới gặp Lãnh Sương Nhiên"
endif
if b==6 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Ngươi thật to gan khi dám xông vào chốn này, muốn biết thân phận của ta thì phải đánh bại ta trước đã"
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 6/7 ]:|r
 Đánh bại Lãnh Sương Nhiên"
endif
if b==7 then
set UI=UI+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+" Lãnh Sương Nhiên đúng là con gái của Giác Sinh đại sư và Lãnh Hương Lăng, khi chứng kiến cái chết của mẹ và sự bỏ đi của Giác Sinh, bà ta đã ghim sâu thù hận chính phái vào lòng. Trong thời gian ở La Gia Trang, Lãnh Sương Nhiên cố tìm mọi cách mê hoặc La Huyền khiến ông ta đánh mất bản thân, bà ta đánh cắp Thiên Quỳnh Bảo Châu và các bí tịch võ công thượng thừa, giam La Huyền vào trong mật thất phía dưới La Gia Trang. Trong nhiều năm tụ họp gia quyến của ma giáo và rèn luyện võ công cho họ, cuối cùng thành lập nên Thiên Quỳnh Cung, thời điểm phục hận đã đến gần.
 Lãnh Sương Nhiên sức tàn lực kiệt vì tẩu hỏa nhập ma do luyện công không đúng cách, kể chuyện trước khi trút ra hơi thở cuối cùng, thật là một bi kịch."
set UI=UI+"

"+"|cffffcc00"+"[ Tiến trình 7/7 ]:|r
 Trở về gặp Giác Sinh. Nói dối về bi kịch đã xảy ra"
endif
if b==8 then
set UI=UI+"|cffadd8e6"+"Nhiệm vụ đã hoàn thành !"
endif
endif
endfunction
function Cxx takes unit u,integer i returns nothing
local player p=GetOwningPlayer(u)
if Bhe[(i)*(8)+1]>0 then
if Bhe[(i)*(8)+1]==6 then
set bBe[(i-1)*($C)+5]=2
set vC="war3mapImported\\BTNFrameUI_QuestButtons3.blp"
else
set bBe[(i-1)*($C)+5]=1
set vC="war3mapImported\\BTNFrameUI_QuestButtons2.blp"
endif
set bce[(i-1)*($C)+5]="Mãn Giang Hồng"
call Cex(1,Bhe[(i)*(8)+1])
set bCe[(i-1)*($C)+5]=UI
if GetLocalPlayer()==p then
call Uge(bbe[5],vC)
endif
endif
if Bhe[(i)*(8)+2]>0 then
if Bhe[(i)*(8)+2]==6 then
set bBe[(i-1)*($C)+6]=2
set vC="war3mapImported\\BTNFrameUI_QuestButtons3.blp"
else
set bBe[(i-1)*($C)+6]=1
set vC="war3mapImported\\BTNFrameUI_QuestButtons2.blp"
endif
set bce[(i-1)*($C)+6]="Hoa Cốc Lai Khách"
call Cex(2,Bhe[(i)*(8)+2])
set bCe[(i-1)*($C)+6]=UI
if GetLocalPlayer()==p then
call Uge(bbe[6],vC)
endif
endif
if Bhe[(i)*(8)+3]>0 then
if Bhe[(i)*(8)+3]==2 then
set bBe[(i-1)*($C)+7]=2
set vC="war3mapImported\\BTNFrameUI_QuestButtons3.blp"
else
set bBe[(i-1)*($C)+7]=1
set vC="war3mapImported\\BTNFrameUI_QuestButtons2.blp"
endif
set bce[(i-1)*($C)+7]="Đại Mạc Thương Lang"
call Cex(3,Bhe[(i)*(8)+3])
set bCe[(i-1)*($C)+7]=UI
if GetLocalPlayer()==p then
call Uge(bbe[7],vC)
endif
endif
if Bhe[(i)*(8)+4]>0 then
if Bhe[(i)*(8)+4]==6 then
set bBe[(i-1)*($C)+8]=2
set vC="war3mapImported\\BTNFrameUI_QuestButtons3.blp"
else
set bBe[(i-1)*($C)+8]=1
set vC="war3mapImported\\BTNFrameUI_QuestButtons2.blp"
endif
set bce[(i-1)*($C)+8]="Mật Thám Kim Quốc"
call Cex(4,Bhe[(i)*(8)+4])
set bCe[(i-1)*($C)+8]=UI
if GetLocalPlayer()==p then
call Uge(bbe[8],vC)
endif
endif
if Bhe[(i)*(8)+5]>0 then
if Bhe[(i)*(8)+5]==5 then
set bBe[(i-1)*($C)+9]=2
set vC="war3mapImported\\BTNFrameUI_QuestButtons3.blp"
else
set bBe[(i-1)*($C)+9]=1
set vC="war3mapImported\\BTNFrameUI_QuestButtons2.blp"
endif
set bce[(i-1)*($C)+9]="Nhân Sinh Vô Thường"
call Cex(5,Bhe[(i)*(8)+5])
set bCe[(i-1)*($C)+9]=UI
if GetLocalPlayer()==p then
call Uge(bbe[9],vC)
endif
endif
if Bhe[(i)*(8)+6]>0 then
if Bhe[(i)*(8)+6]==5 then
set bBe[(i-1)*($C)+$A]=2
set vC="war3mapImported\\BTNFrameUI_QuestButtons3.blp"
else
set bBe[(i-1)*($C)+$A]=1
set vC="war3mapImported\\BTNFrameUI_QuestButtons2.blp"
endif
set bce[(i-1)*($C)+$A]="Chiêu An"
call Cex(6,Bhe[(i)*(8)+6])
set bCe[(i-1)*($C)+$A]=UI
if GetLocalPlayer()==p then
call Uge(bbe[$A],vC)
endif
endif
if Bhe[(i)*(8)+7]>0 then
if Bhe[(i)*(8)+7]==8 then
set bBe[(i-1)*($C)+$B]=2
set vC="war3mapImported\\BTNFrameUI_QuestButtons3.blp"
else
set bBe[(i-1)*($C)+$B]=1
set vC="war3mapImported\\BTNFrameUI_QuestButtons2.blp"
endif
set bce[(i-1)*($C)+$B]="Đại án Tử Mẫu Hoàn"
call Cex(7,Bhe[(i)*(8)+7])
set bCe[(i-1)*($C)+$B]=UI
if GetLocalPlayer()==p then
call Uge(bbe[$B],vC)
endif
endif
if Bhe[(i)*(8)+8]>0 then
if Bhe[(i)*(8)+8]==8 then
set bBe[(i-1)*($C)+$C]=2
set vC="war3mapImported\\BTNFrameUI_QuestButtons3.blp"
else
set bBe[(i-1)*($C)+$C]=1
set vC="war3mapImported\\BTNFrameUI_QuestButtons2.blp"
endif
set bce[(i-1)*($C)+$C]="Cừu Hận"
call Cex(8,Bhe[(i)*(8)+8])
set bCe[(i-1)*($C)+$C]=UI
if GetLocalPlayer()==p then
call Uge(bbe[$C],vC)
endif
endif
set p=null
endfunction
function Cox takes integer i,integer a,integer b returns nothing
local integer lv=GetHeroLevel(XJ[i])
local integer tAe=(vk[lv+3]-vk[lv])
if lv<$C8 then
call tRe(XJ[i],tAe)
else
set tAe=0
endif
if a==1 and b==6 then
call tHe(i,$493E0,1)
call UnitAddItemById(OJ[i],bj[7])
call UnitAddItemById(OJ[i],bj[7])
set lJ[i]=lJ[i]+$A
call Qke(Player(i-1),"|cff7fff00"+"Nhận được "+I2S(tAe)+" kinh nghiệm và 300000 bạc, 2 huyền tinh cấp 7, 2 mảnh Hành Giả Sa Mạc !",5)
elseif a==2 and b==6 then
call tHe(i,$493E0,1)
call UnitAddItemById(OJ[i],bj[8])
set lJ[i]=lJ[i]+$A
call Qke(Player(i-1),"|cff7fff00"+"Nhận được "+I2S(tAe)+" kinh nghiệm và 300000 bạc, 1 huyền tinh cấp 8, 2 mảnh Hành Giả Sa Mạc !",5)
elseif a==3 and b==2 then
call tHe(i,$493E0,1)
call UnitAddItemById(OJ[i],bj[8])
call UnitAddItemById(OJ[i],bj[8])
set lJ[i]=lJ[i]+$A
call Qke(Player(i-1),"|cff7fff00"+"Nhận được "+I2S(tAe)+" kinh nghiệm và 300000 bạc, 2 huyền tinh cấp 8, 2 mảnh Hành Giả Sa Mạc !",5)
elseif a==4 and b==6 then
call tHe(i,$493E0,1)
call UnitAddItemById(OJ[i],bj[9])
set lJ[i]=lJ[i]+$A
call Qke(Player(i-1),"|cff7fff00"+"Nhận được "+I2S(tAe)+" kinh nghiệm và 300000 bạc, 1 huyền tinh cấp 9, 2 mảnh Hành Giả Sa Mạc !",5)
elseif a==5 and b==5 then
call tHe(i,$493E0,1)
call UnitAddItemById(OJ[i],bj[9])
set lJ[i]=lJ[i]+$A
call Qke(Player(i-1),"|cff7fff00"+"Nhận được "+I2S(tAe)+" kinh nghiệm và 300000 bạc, 1 huyền tinh cấp 9, 2 mảnh Hành Giả Sa Mạc !",5)
elseif a==6 and b==5 then
call tHe(i,$493E0,1)
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],bj[9])
set lJ[i]=lJ[i]+$A
call Qke(Player(i-1),"|cff7fff00"+"Nhận được "+I2S(tAe)+" kinh nghiệm và 300000 bạc, 2 huyền tinh cấp 9, 2 mảnh Hành Giả Sa Mạc !",5)
elseif a==7 and b==8 then
call tHe(i,$493E0,1)
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],bj[9])
set lJ[i]=lJ[i]+$A
call Qke(Player(i-1),"|cff7fff00"+"Nhận được "+I2S(tAe)+" kinh nghiệm và 300000 bạc, 3 huyền tinh cấp 9, 2 mảnh Hành Giả Sa Mạc !",5)
elseif a==8 and b==8 then
call tHe(i,$493E0,1)
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],bj[9])
set lJ[i]=lJ[i]+$A
call Qke(Player(i-1),"|cff7fff00"+"Nhận được "+I2S(tAe)+" kinh nghiệm và 300000 bạc, 3 huyền tinh cấp 9, 2 mảnh Hành Giả Sa Mạc !",5)
else
call tHe(i,$186A0,1)
call Qke(Player(i-1),"|cff7fff00"+"Nhận được "+I2S(tAe)+" kinh nghiệm và 100000 bạc !",5)
endif
endfunction
function Crx takes unit u,integer i,integer a,integer b returns nothing
local player p=GetOwningPlayer(u)
if a==1 then
if b==1 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Mãn Giang Hồng ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+1]=2
call Cex(1,2)
set bCe[(i-1)*($C)+5]=UI
call Cox(i,1,2)
endif
if b==4 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Mãn Giang Hồng ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+1]=4
call Cex(1,4)
set bCe[(i-1)*($C)+5]=UI
call Cox(i,1,4)
endif
elseif a==2 then
if b==2 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Hoa Cốc Lai Khách ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+2]=3
call Cex(2,3)
set bCe[(i-1)*($C)+6]=UI
call Cox(i,2,3)
endif
if b==4 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Hoa Cốc Lai Khách ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+2]=5
call Cex(2,5)
set bCe[(i-1)*($C)+6]=UI
call Cox(i,2,5)
endif
elseif a==4 then
if b==2 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Mật Thám Kim Quốc ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+4]=3
call Cex(4,3)
set bCe[(i-1)*($C)+8]=UI
call Cox(i,4,3)
endif
if b==4 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Mật Thám Kim Quốc ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+4]=5
call Cex(4,5)
set bCe[(i-1)*($C)+8]=UI
call Cox(i,4,5)
endif
elseif a==5 then
if b==3 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Nhân Sinh Vô Thường ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+5]=4
call Cex(5,4)
set bCe[(i-1)*($C)+9]=UI
call Cox(i,5,4)
endif
elseif a==6 then
if b==3 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Chiêu An ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+6]=4
call Cex(6,4)
set bCe[(i-1)*($C)+$A]=UI
call Cox(i,6,4)
endif
elseif a==7 then
if b==5 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Đại án Tử Mẫu Hoàn ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+7]=6
call Cex(7,6)
set bCe[(i-1)*($C)+$B]=UI
call Cox(i,7,6)
endif
elseif a==8 then
if b==4 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Cừu Hận ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+8]=5
call Cex(8,5)
set bCe[(i-1)*($C)+$C]=UI
call Cox(i,8,5)
elseif b==5 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Cừu Hận ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+8]=6
call Cex(8,6)
set bCe[(i-1)*($C)+$C]=UI
call Cox(i,8,6)
elseif b==6 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Cừu Hận ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+8]=7
call Cex(8,7)
set bCe[(i-1)*($C)+$C]=UI
call Cox(i,8,7)
endif
endif
set p=null
endfunction
function Cix takes nothing returns boolean
local unit u=GetBuyingUnit()
local unit v=GetSellingUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local integer Cax=GetUnitTypeId(v)
if Cax=='n0AH' then
if Bhe[(i)*(8)+1]==0 then
if bJ[i]>=1 then
call Qke(p,"|cffffcc00"+"Tiếp nhận nhiệm vụ giang hồ "+"|cff7fff00"+"[ Mãn Giang Hồng ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+1]=1
call Cex(1,1)
set bce[(i-1)*($C)+5]="Mãn Giang Hồng"
set bBe[(i-1)*($C)+5]=1
set bCe[(i-1)*($C)+5]=UI
set vC="war3mapImported\\BTNFrameUI_QuestButtons2.blp"
if GetLocalPlayer()==p then
call Uge(bbe[5],vC)
endif
else
call Qke(p,"|cffffcc00"+"Yêu cầu trùng sinh 1 để nhận nhiệm vụ Mãn Giang Hồng !",5)
endif
endif
if Bhe[(i)*(8)+1]==5 then
set Sv=Q0e(u,'I0JE')
if Sv!=null then
call Qke(p,"|cffffcc00"+"Hoàn thành nhiệm vụ giang hồ "+"|cff7fff00"+"[ Mãn Giang Hồng ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
call RemoveItem(Sv)
set Bhe[(i)*(8)+1]=6
call Cex(1,6)
set bCe[(i-1)*($C)+5]=UI
set bBe[(i-1)*($C)+5]=2
set vC="war3mapImported\\BTNFrameUI_QuestButtons3.blp"
if GetLocalPlayer()==p then
call Uge(bbe[5],vC)
endif
call Cox(i,1,6)
else
call Qke(p,"|cff7fff00"+"- Các hạ định lừa ta à, hậu nhân Nhạc Gia Quân há lại trở thành trò đùa của ngươi !",5)
endif
endif
elseif Cax=='n01E' then
if Bhe[(i)*(8)+1]==2 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Mãn Giang Hồng ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+1]=3
call Cex(1,3)
set bCe[(i-1)*($C)+5]=UI
call Cox(i,1,3)
endif
if Bhe[(i)*(8)+1]==4 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Mãn Giang Hồng ]",5)
call Qke(p,"|cffffcc00"+"Vật phẩm nhiệm vụ được chuyển về rương !",5)
call UnitAddItemById(OJ[i],'I0JE')
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+1]=5
call Cex(1,5)
set bCe[(i-1)*($C)+5]=UI
call Cox(i,1,5)
endif
elseif Cax=='n0AJ' then
if Bhe[(i)*(8)+2]==0 then
if bJ[i]>=2 then
call Qke(p,"|cffffcc00"+"Tiếp nhận nhiệm vụ giang hồ "+"|cff7fff00"+"[ Hoa Cốc Lai Khách ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+2]=1
call Cex(2,1)
set bce[(i-1)*($C)+6]="Hoa Cốc Lai Khách"
set bBe[(i-1)*($C)+6]=1
set bCe[(i-1)*($C)+6]=UI
set vC="war3mapImported\\BTNFrameUI_QuestButtons2.blp"
if GetLocalPlayer()==p then
call Uge(bbe[6],vC)
endif
else
call Qke(p,"|cffffcc00"+"Yêu cầu trùng sinh 2 để nhận nhiệm vụ Hoa Cốc Lai Khách !",5)
endif
endif
if Bhe[(i)*(8)+2]==5 then
call Qke(p,"|cffffcc00"+"Hoàn thành nhiệm vụ giang hồ "+"|cff7fff00"+"[ Hoa Cốc Lai Khách ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+2]=6
call Cex(2,6)
set bCe[(i-1)*($C)+6]=UI
set bBe[(i-1)*($C)+6]=2
set vC="war3mapImported\\BTNFrameUI_QuestButtons3.blp"
if GetLocalPlayer()==p then
call Uge(bbe[6],vC)
endif
call Cox(i,2,6)
endif
elseif Cax=='n02O' then
if Bhe[(i)*(8)+2]==1 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Hoa Cốc Lai Khách ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+2]=2
call Cex(2,2)
set bCe[(i-1)*($C)+6]=UI
call Cox(i,2,2)
endif
elseif Cax=='n02S' then
if Bhe[(i)*(8)+2]==3 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Hoa Cốc Lai Khách ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+2]=4
call Cex(2,4)
set bCe[(i-1)*($C)+6]=UI
call Cox(i,2,4)
endif
elseif Cax=='n01G' then
if Bhe[(i)*(8)+3]==0 then
if bJ[i]>=3 then
call Qke(p,"|cffffcc00"+"Tiếp nhận nhiệm vụ giang hồ "+"|cff7fff00"+"[ Đại Mạc Thương Lang ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+3]=1
call Cex(3,1)
set bce[(i-1)*($C)+7]="Đại Mạc Thương Lang"
set bBe[(i-1)*($C)+7]=1
set bCe[(i-1)*($C)+7]=UI
set vC="war3mapImported\\BTNFrameUI_QuestButtons2.blp"
if GetLocalPlayer()==p then
call Uge(bbe[7],vC)
endif
else
call Qke(p,"|cffffcc00"+"Yêu cầu trùng sinh 3 để nhận nhiệm vụ Đại Mạc Thương Lang !",5)
endif
endif
if Bhe[(i)*(8)+3]==1 then
set Sv=Q0e(u,'I0JF')
if Sv!=null then
call Qke(p,"|cffffcc00"+"Hoàn thành nhiệm vụ giang hồ "+"|cff7fff00"+"[ Đại Mạc Thương Lang ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
call RemoveItem(Sv)
set Bhe[(i)*(8)+3]=2
call Cex(3,2)
set bCe[(i-1)*($C)+7]=UI
set bBe[(i-1)*($C)+7]=2
set vC="war3mapImported\\BTNFrameUI_QuestButtons3.blp"
if GetLocalPlayer()==p then
call Uge(bbe[7],vC)
endif
call Cox(i,3,2)
else
call Qke(p,"|cff7fff00"+"- Ngươi vẫn chưa tìm ra được thứ gì ở Lâu Lan Cổ Thành sao !",5)
endif
endif
elseif Cax=='n08M' then
if Bhe[(i)*(8)+4]==0 then
if bJ[i]>=4 then
call Qke(p,"|cffffcc00"+"Tiếp nhận nhiệm vụ giang hồ "+"|cff7fff00"+"[ Mật Thám Kim Quốc ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+4]=1
call Cex(4,1)
set bce[(i-1)*($C)+8]="Mật Thám Kim Quốc"
set bBe[(i-1)*($C)+8]=1
set bCe[(i-1)*($C)+8]=UI
set vC="war3mapImported\\BTNFrameUI_QuestButtons2.blp"
if GetLocalPlayer()==p then
call Uge(bbe[8],vC)
endif
else
call Qke(p,"|cffffcc00"+"Yêu cầu trùng sinh 4 để nhận nhiệm vụ Mật Thám Kim Quốc !",5)
endif
endif
if Bhe[(i)*(8)+4]==5 then
call Qke(p,"|cffffcc00"+"Hoàn thành nhiệm vụ giang hồ "+"|cff7fff00"+"[ Mật Thám Kim Quốc ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+4]=6
call Cex(4,6)
set bCe[(i-1)*($C)+8]=UI
set bBe[(i-1)*($C)+8]=2
set vC="war3mapImported\\BTNFrameUI_QuestButtons3.blp"
if GetLocalPlayer()==p then
call Uge(bbe[8],vC)
endif
call Cox(i,4,6)
endif
if Bhe[(i)*(8)+7]==3 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Đại án Tử Mẫu Hoàn ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+7]=4
call Cex(7,4)
set bCe[(i-1)*($C)+$B]=UI
call Cox(i,7,4)
endif
elseif Cax=='n05H' then
if Bhe[(i)*(8)+4]==1 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Mật Thám Kim Quốc ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+4]=2
call Cex(4,2)
set bCe[(i-1)*($C)+8]=UI
call Cox(i,4,2)
endif
elseif Cax=='n03G' then
if Bhe[(i)*(8)+4]==3 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Mật Thám Kim Quốc ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+4]=4
call Cex(4,4)
set bCe[(i-1)*($C)+8]=UI
call Cox(i,4,4)
endif
elseif Cax=='n0AK' then
if Bhe[(i)*(8)+5]==0 then
if bJ[i]>=5 then
call Qke(p,"|cffffcc00"+"Tiếp nhận nhiệm vụ giang hồ "+"|cff7fff00"+"[ Nhân Sinh Vô Thường ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+5]=1
call Cex(5,1)
set bce[(i-1)*($C)+9]="Nhân Sinh Vô Thường"
set bBe[(i-1)*($C)+9]=1
set bCe[(i-1)*($C)+9]=UI
set vC="war3mapImported\\BTNFrameUI_QuestButtons2.blp"
if GetLocalPlayer()==p then
call Uge(bbe[9],vC)
endif
else
call Qke(p,"|cffffcc00"+"Yêu cầu trùng sinh 5 để nhận nhiệm vụ Nhân Sinh Vô Thường !",5)
endif
endif
if Bhe[(i)*(8)+5]==4 then
call Qke(p,"|cffffcc00"+"Hoàn thành nhiệm vụ giang hồ "+"|cff7fff00"+"[ Nhân Sinh Vô Thường ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+5]=5
call Cex(5,5)
set bCe[(i-1)*($C)+9]=UI
set bBe[(i-1)*($C)+9]=2
set vC="war3mapImported\\BTNFrameUI_QuestButtons3.blp"
if GetLocalPlayer()==p then
call Uge(bbe[9],vC)
endif
call Cox(i,5,5)
endif
elseif Cax=='n040' then
if Bhe[(i)*(8)+5]==1 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Nhân Sinh Vô Thường ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+5]=2
call Cex(5,2)
set bCe[(i-1)*($C)+9]=UI
call Cox(i,5,2)
endif
elseif Cax=='n0AE' then
if Bhe[(i)*(8)+5]==2 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Nhân Sinh Vô Thường ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+5]=3
call Cex(5,3)
set bCe[(i-1)*($C)+9]=UI
call Cox(i,5,3)
endif
elseif Cax=='n01C' then
if Bhe[(i)*(8)+6]==0 then
if bJ[i]>=6 then
call Qke(p,"|cffffcc00"+"Tiếp nhận nhiệm vụ giang hồ "+"|cff7fff00"+"[ Chiêu An ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+6]=1
call Cex(6,1)
set bce[(i-1)*($C)+$A]="Chiêu An"
set bBe[(i-1)*($C)+$A]=1
set bCe[(i-1)*($C)+$A]=UI
set vC="war3mapImported\\BTNFrameUI_QuestButtons2.blp"
if GetLocalPlayer()==p then
call Uge(bbe[$A],vC)
endif
else
call Qke(p,"|cffffcc00"+"Yêu cầu trùng sinh 6 để nhận nhiệm vụ Chiêu An !",5)
endif
endif
if Bhe[(i)*(8)+6]==2 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Chiêu An ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+6]=3
call Cex(6,3)
set bCe[(i-1)*($C)+$A]=UI
call Cox(i,6,3)
endif
if Bhe[(i)*(8)+6]==4 then
call Qke(p,"|cffffcc00"+"Hoàn thành nhiệm vụ giang hồ "+"|cff7fff00"+"[ Chiêu An ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+6]=5
call Cex(6,5)
set bCe[(i-1)*($C)+$A]=UI
set bBe[(i-1)*($C)+$A]=2
set vC="war3mapImported\\BTNFrameUI_QuestButtons3.blp"
if GetLocalPlayer()==p then
call Uge(bbe[$A],vC)
endif
call Cox(i,6,5)
endif
elseif Cax=='n08N' then
if Bhe[(i)*(8)+6]==1 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Chiêu An ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+6]=2
call Cex(6,2)
set bCe[(i-1)*($C)+$A]=UI
call Cox(i,6,2)
endif
elseif Cax=='n0AL' then
if Bhe[(i)*(8)+7]==0 then
if bJ[i]>=6 then
call Qke(p,"|cffffcc00"+"Tiếp nhận nhiệm vụ giang hồ "+"|cff7fff00"+"[ Đại án Tử Mẫu Hoàn ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+7]=1
call Cex(7,1)
set bce[(i-1)*($C)+$B]="Đại án Tử Mẫu Hoàn"
set bBe[(i-1)*($C)+$B]=1
set bCe[(i-1)*($C)+$B]=UI
set vC="war3mapImported\\BTNFrameUI_QuestButtons2.blp"
if GetLocalPlayer()==p then
call Uge(bbe[$B],vC)
endif
else
call Qke(p,"|cffffcc00"+"Yêu cầu trùng sinh 6 để nhận nhiệm vụ Chiêu An !",5)
endif
endif
if Bhe[(i)*(8)+7]==7 then
call Qke(p,"|cffadd8e6"+"- Ngài xem có phải đã mất đi vật này không",$A)
call Qke(p,"|cffadd8e6"+"- Để ta xem xem ... Đúng là Tử Mẫu Hoàn ! Lần này huynh đệ của ta được cứu rồi !",$A)
call Qke(p,"|cffffcc00"+"Hoàn thành nhiệm vụ giang hồ "+"|cff7fff00"+"[ Đại án Tử Mẫu Hoàn ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+7]=8
call Cex(7,8)
set bCe[(i-1)*($C)+$B]=UI
set bBe[(i-1)*($C)+$B]=2
set vC="war3mapImported\\BTNFrameUI_QuestButtons3.blp"
if GetLocalPlayer()==p then
call Uge(bbe[$B],vC)
endif
call Cox(i,7,8)
endif
elseif Cax=='n0AM' then
if Bhe[(i)*(8)+7]==1 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Đại án Tử Mẫu Hoàn ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+7]=2
call Cex(7,2)
set bCe[(i-1)*($C)+$B]=UI
call Cox(i,7,2)
endif
elseif Cax=='n04V' then
if Bhe[(i)*(8)+7]==2 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Đại án Tử Mẫu Hoàn ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+7]=3
call Cex(7,3)
set bCe[(i-1)*($C)+$B]=UI
call Cox(i,7,3)
endif
if Bhe[(i)*(8)+7]==4 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Đại án Tử Mẫu Hoàn ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+7]=5
call Cex(7,5)
set bCe[(i-1)*($C)+$B]=UI
call Cox(i,7,5)
endif
if Bhe[(i)*(8)+7]==6 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Đại án Tử Mẫu Hoàn ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+7]=7
call Cex(7,7)
set bCe[(i-1)*($C)+$B]=UI
call Cox(i,7,7)
endif
elseif Cax=='n0AN' then
if Bhe[(i)*(8)+8]==0 then
if bJ[i]>=7 then
call Qke(p,"|cffffcc00"+"Tiếp nhận nhiệm vụ giang hồ "+"|cff7fff00"+"[ Cừu Hận ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+8]=1
call Cex(8,1)
set bce[(i-1)*($C)+$C]="Cừu Hận"
set bBe[(i-1)*($C)+$C]=1
set bCe[(i-1)*($C)+$C]=UI
set vC="war3mapImported\\BTNFrameUI_QuestButtons2.blp"
if GetLocalPlayer()==p then
call Uge(bbe[$C],vC)
endif
else
call Qke(p,"|cffffcc00"+"Yêu cầu trùng sinh 7 để nhận nhiệm vụ Cừu Hận !",5)
endif
endif
if Bhe[(i)*(8)+8]==7 then
call Qke(p,"|cffffcc00"+"Hoàn thành nhiệm vụ giang hồ "+"|cff7fff00"+"[ Cừu Hận ]",5)
call Qke(p,"|cffadd8e6"+"- Thật đáng mừng, tuy ta không thể mang lại hạnh phúc cho Sương Nhiên nhưng nó vẫn có được một cuộc sống tốt tránh xa chốn giang hồ đẫm máu, như thế đã đủ cho người cha vô năng và một hòa thượng chưa dứt lòng trần như ta. Nhưng ta không hối hận vì đã gặp Hương Lăng, chỉ tiếc rằng ta không thể mang đến hạnh phúc cho nàng. Đa tạ thí chủ đã bỏ ra nhiều công sức chỉ để giúp lão tăng này !",$F)
call Qke(p,"|cffadd8e6"+"- Giác Sinh Đại Sư nhắm mắt hồi tưởng và viên tịch !",$F)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+8]=8
call Cex(8,8)
set bCe[(i-1)*($C)+$C]=UI
set bBe[(i-1)*($C)+$C]=2
set vC="war3mapImported\\BTNFrameUI_QuestButtons3.blp"
if GetLocalPlayer()==p then
call Uge(bbe[$C],vC)
endif
call Cox(i,8,8)
endif
elseif Cax=='n01D' then
if Bhe[(i)*(8)+8]==1 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Cừu Hận ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+8]=2
call Cex(8,2)
set bCe[(i-1)*($C)+$C]=UI
call Cox(i,8,2)
endif
elseif Cax=='n06A' then
if Bhe[(i)*(8)+8]==2 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Cừu Hận ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+8]=3
call Cex(8,3)
set bCe[(i-1)*($C)+$C]=UI
call Cox(i,8,3)
endif
elseif Cax=='n0AO' then
if Bhe[(i)*(8)+8]==3 then
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ giang hồ "+"|cff7fff00"+"[ Cừu Hận ]",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set Bhe[(i)*(8)+8]=4
call Cex(8,4)
set bCe[(i-1)*($C)+$C]=UI
call Cox(i,8,4)
endif
endif
call RemoveItem(GetSoldItem())
set u=null
set v=null
set p=null
return false
endfunction
function Cnx takes nothing returns boolean
return GetItemTypeId(GetSoldItem())=='I0JD' and Cix()
endfunction
function CVx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddCondition(t,Filter(function Cnx))
set t=null
endfunction
function CEx takes integer id returns string
return"war3mapImported\\BTNFrameUI_Empty.blp"
endfunction
function CXx takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local framehandle f=BlzGetTriggerFrame()
if f!=null then
call BlzFrameSetVisible(f,false)
call BlzFrameSetVisible(f,true)
endif
if not EC then
set f=null
set p=null
return false
endif
if ti[id]then
call Qke(p,"|cffff0000"+"Xin đừng thao tác quá nhanh !",5)
set f=null
set p=null
return false
endif
call UMe(id,1.)
if not Ub[id+1]or B2e[id]or BQe[id]or bNe[id]or bye[id]or bLe[id]or b5e[id]or bQe[id]or b1e[id]or b9e[id]then
set f=null
set p=null
return false
endif
if BHe[id]==false then
if GetLocalPlayer()==p then
call BlzFrameSetVisible(WI,true)
endif
set BHe[id]=true
set BJe[id+1]=true
else
if Bke[(id)*(4)+4]!=0 then
if IsUnitSelected(XJ[id+1],p)and not QYe(XJ[id+1])then
call UnitAddItem(XJ[id+1],Bi[id+1])
else
call Qke(p,"|cffffcc00"+"Vật phẩm được chuyển về rương !",5)
call UnitAddItem(OJ[id+1],Bi[id+1])
endif
set BKe[(id)*(4)+1]=null
set Ble[(id)*(4)+1]=null
set Bke[(id)*(4)+1]=0
if GetLocalPlayer()==p then
call Uge(Bje[1],CEx(1))
endif
set BKe[(id)*(4)+2]=null
set Ble[(id)*(4)+2]=null
set Bke[(id)*(4)+2]=0
if GetLocalPlayer()==p then
call Uge(Bje[2],CEx(2))
endif
set BKe[(id)*(4)+3]=null
set Ble[(id)*(4)+3]=null
set Bke[(id)*(4)+3]=0
if GetLocalPlayer()==p then
call Uge(Bje[3],CEx(3))
endif
set Bi[id+1]=null
set BKe[(id)*(4)+4]=null
set Ble[(id)*(4)+4]=null
set Bke[(id)*(4)+4]=0
if GetLocalPlayer()==p then
call Uge(Bje[4],CEx(4))
call BlzFrameSetVisible(yc,true)
call BlzFrameSetVisible(yc,false)
endif
endif
set BHe[id]=false
set BJe[id+1]=false
if GetLocalPlayer()==p then
call BlzFrameSetVisible(WI,false)
endif
endif
set f=null
set p=null
return false
endfunction
function COx takes nothing returns nothing
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local integer yae=LoadInteger(ht,5423,GetHandleId(f))
local real x=.2322
local real y=.263
local real w=.245
local real h=.26
if Bke[(id)*(4)+yae]!=0 then
if yae!=4 then
set h=.09
endif
if GetLocalPlayer()==p then
set zc=BKe[(id)*(4)+yae]
set Zc=Ble[(id)*(4)+yae]
set rC=x
set iC=y
set aC=w
set nC=h
endif
if GetLocalPlayer()==p then
call BlzFrameSetAbsPoint(yc,FRAMEPOINT_BOTTOMLEFT,rC,iC)
call BlzFrameSetSize(yc,aC,nC)
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextTitle",0),zc)
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,true)
endif
endif
set f=null
set p=null
endfunction
function CRx takes nothing returns nothing
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,false)
call BlzFrameSetVisible(yI,false)
endif
set f=null
set p=null
endfunction
function CIx takes nothing returns boolean
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local integer yae=LoadInteger(ht,5423,GetHandleId(f))
if GetLocalPlayer()==p then
call BlzFrameSetVisible(f,false)
call BlzFrameSetVisible(f,true)
endif
if ti[id]then
call Qke(p,"|cffff0000"+"Xin đừng thao tác quá nhanh !",5)
set f=null
set p=null
return false
endif
call UMe(id,.5)
if Bke[(id)*(4)+yae]!=0 then
if yae==4 then
if IsUnitSelected(XJ[id+1],p)and not QYe(XJ[id+1])then
call UnitAddItem(XJ[id+1],Bi[id+1])
else
call Qke(p,"|cffffcc00"+"Vật phẩm được chuyển về rương !",5)
call SetItemPosition(Bi[id+1],GetUnitX(OJ[id+1]),GetUnitY(OJ[id+1]))
call UnitAddItem(OJ[id+1],Bi[id+1])
endif
set BKe[(id)*(4)+1]=null
set Ble[(id)*(4)+1]=null
set Bke[(id)*(4)+1]=0
if GetLocalPlayer()==p then
call Uge(Bje[1],CEx(1))
endif
set BKe[(id)*(4)+2]=null
set Ble[(id)*(4)+2]=null
set Bke[(id)*(4)+2]=0
if GetLocalPlayer()==p then
call Uge(Bje[2],CEx(2))
endif
set BKe[(id)*(4)+3]=null
set Ble[(id)*(4)+3]=null
set Bke[(id)*(4)+3]=0
if GetLocalPlayer()==p then
call Uge(Bje[3],CEx(3))
endif
set Bi[id+1]=null
set BKe[(id)*(4)+yae]=null
set Ble[(id)*(4)+yae]=null
set Bke[(id)*(4)+yae]=0
if GetLocalPlayer()==p then
call Uge(Bje[yae],CEx(yae))
call BlzFrameSetVisible(yc,true)
call BlzFrameSetVisible(yc,false)
endif
else
set wv=false
if yae>=2 and zI[id+1]>=3 then
set wv=true
set zI[id+1]=zI[id+1]-3
call Qke(p,"|cffffff00"+uj[5]+I2S(zI[id+1]/ 3),5)
elseif yae==1 then
set wv=true
endif
if wv then
set YI[1]=6119
set YI[2]=6036
set YI[3]=5621
call vnx(XJ[id+1],id+1,yae)
set BKe[(id)*(4)+yae]=null
set Ble[(id)*(4)+yae]=null
set Bke[(id)*(4)+yae]=0
if GetLocalPlayer()==p then
call Uge(Bje[yae],CEx(yae))
call BlzFrameSetVisible(yc,true)
call BlzFrameSetVisible(yc,false)
endif
else
call Qke(p,"|cffffcc00"+"Vị trí này cần có Giải Ngọc Chùy để tách !",5)
endif
endif
endif
set f=null
set p=null
return false
endfunction
function CAx takes integer i,real x,real y returns nothing
set Bje[i]=Uhe(CEx(i))
call Ude(Bje[i],52,x,y)
call Uke(Bje[i],function CIx)
call Ule(Bje[i],function COx)
call ULe(Bje[i],function CRx)
call SaveInteger(ht,5423,GetHandleId(Bje[i]),i)
call BlzFrameSetParent(Bje[i],WI)
endfunction
function CNx takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
if BHe[id] then
if Bke[(id)*(4)+4]!=0 then
if IsUnitSelected(XJ[id+1],p)and not QYe(XJ[id+1])then
call UnitAddItem(XJ[id+1],Bi[id+1])
else
call Qke(p,"|cffffcc00"+"Vật phẩm được chuyển về rương !",5)
call SetItemPosition(Bi[id+1],GetUnitX(OJ[id+1]),GetUnitY(OJ[id+1]))
call UnitAddItem(OJ[id+1],Bi[id+1])
endif
set BKe[(id)*(4)+1]=null
set Ble[(id)*(4)+1]=null
set Bke[(id)*(4)+1]=0
if GetLocalPlayer()==p then
call Uge(Bje[1],CEx(1))
endif
set BKe[(id)*(4)+2]=null
set Ble[(id)*(4)+2]=null
set Bke[(id)*(4)+2]=0
if GetLocalPlayer()==p then
call Uge(Bje[2],CEx(2))
endif
set BKe[(id)*(4)+3]=null
set Ble[(id)*(4)+3]=null
set Bke[(id)*(4)+3]=0
if GetLocalPlayer()==p then
call Uge(Bje[3],CEx(3))
endif
set Bi[id+1]=null
set BKe[(id)*(4)+4]=null
set Ble[(id)*(4)+4]=null
set Bke[(id)*(4)+4]=0
if GetLocalPlayer()==p then
call Uge(Bje[4],CEx(4))
call BlzFrameSetVisible(yc,true)
call BlzFrameSetVisible(yc,false)
endif
endif
set BHe[id]=false
set BJe[id+1]=false
if GetLocalPlayer()==p then
call BlzFrameSetVisible(WI,false)
endif
endif
set p=null
return false
endfunction
function Cbx takes nothing returns nothing
local real z=.01
local real y=.02
set WI=UJe("war3mapImported\\FrameUI_KhamTBBackground.tga")
call UFe(WI,408,505,.005,.275)
call CAx(1,z+.0445,y+.305)
call CAx(2,z+.0945,y+.305)
call CAx(3,z+.1445,y+.305)
call CAx(4,z+.0945,y+.378)
set yc=BlzCreateFrame("BoxedText",BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI,0),0,0)
call BlzFrameSetVisible(WI,false)
call BlzFrameSetVisible(yc,false)
endfunction
function CBx takes nothing returns nothing
local trigger t=CreateTrigger()
call BlzTriggerRegisterPlayerKeyEvent(t,Player(0),OSKEY_P,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(1),OSKEY_P,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(2),OSKEY_P,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(3),OSKEY_P,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(4),OSKEY_P,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(5),OSKEY_P,0,true)
call TriggerAddAction(t,function CXx)
set wI=Uhe("war3mapImported\\bt13.tga")
call UFe(wI,58,58,.48,.137)
call Uke(wI,function CXx)
set t=CreateTrigger()
call TriggerRegisterPlayerEvent(t,Player(0),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(1),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(2),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(3),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(4),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(5),EVENT_PLAYER_END_CINEMATIC)
call TriggerAddAction(t,function CNx)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,17.,false)
call TriggerAddAction(t,function Cbx)
set t=null
endfunction
function Ccx takes unit u,integer id,integer CCx,integer r1,integer r2,integer r3,integer r4,integer lv,integer z,integer tJe returns nothing
local player p=GetOwningPlayer(u)
local integer i=0
local string s=BlzGetAbilityResearchExtendedTooltip(CCx,0)
local integer n=StringLength(s)
local string x=""
local string m=""
local string d=I2S(z)
loop
exitwhen i>n
set x=SubString(s,i,i+1)
if x=="!" then
set x=I2S(r1)
endif
if x=="@" then
set x=I2S(r2)
endif
if x=="#" then
set x=I2S(r3)
endif
if x=="$" then
set x=I2S(r4)
endif
set m=m+x
set i=i+1
endloop
if z=='x' then
set d="200"
elseif z==$8C then
set d="Trùng sinh 1"
endif
if lv==0 then
set eA="|cff7fff00Cấp độ: "+d+"
"+"Điểm kỹ năng: 4

|r"+m
set vA=BlzGetAbilityResearchTooltip(CCx,0)+" |cff6d6d6d[ chưa học ]|r"
set ZI=BlzGetAbilityIcon(CCx)
else
if lv==$A then
if z==$A0 or z==$B4 then
set eA="|cff7fff00Kỹ năng mật tịch|r

"+m
elseif z==$C8 then
set eA="|cff7fff00Kỹ năng trấn phái|r

"+m
else
set eA="|cff7fff00Cấp độ: "+d+"

|r"+m
endif
else
if z==$A0 or z==$B4 then
set eA="|cff7fff00Kỹ năng mật tịch|r

"+m
elseif z==$C8 then
set eA="|cff7fff00Kỹ năng trấn phái|r

"+m
else
set eA="|cff7fff00Cấp độ: "+d+"
"+"Điểm kỹ năng: 4

|r"+m
endif
endif
set vA=BlzGetAbilityResearchTooltip(CCx,0)+" |cff9370db[ Cấp "+I2S(lv)+"/10 ]|r"
set ZI=BlzGetAbilityIcon(CCx)
endif
if CCx>0 then
call BlzSetAbilityExtendedTooltip(CCx,m,lv-1)
call BlzSetAbilityTooltip(CCx,BlzGetAbilityResearchTooltip(CCx,0)+" |cff9370db[ Cấp "+I2S(lv)+"/10 ]|r",lv-1)
endif
set BSe[(id)*(16)+tJe]=tJe
set Bte[(id)*(16)+tJe]=vA
set BTe[(id)*(16)+tJe]="
"+eA
if GetLocalPlayer()==p then
call Uge(Bse[tJe],ZI)
endif
set xA=true
set x=null
set m=null
set s=null
set p=null
set d=null
endfunction
function Cdx takes player p,integer i,integer z,boolean b,integer lv returns nothing
local integer CDx=qb[i]
local unit u=XJ[i]
if CDx==1 then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],700+300*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,4888,60)
call Tje(u,7695,.8)
call Tje(u,6780,$A0)
endif
call Tje(u,4888,20*lv)
call Tje(u,7695,.2*lv)
call Tje(u,6780,40*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],60+20*BUe[(i)*(20)+z],$A0+40*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],35+5*BUe[(i)*(20)+z],35+5*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
if BUe[(i)*(20)+z]==1 or not b then
call T_e(u,.03)
call Tje(u,611,40)
endif
call T_e(u,.02*lv)
call Tje(u,611,20*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],3+2*BUe[(i)*(20)+z],40+20*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,Fx,.1)
call UnitAddAbility(u,'A03X')
call Tje(u,Dx,.27)
endif
call Tje(u,Fx,.05*lv)
call Tje(u,Dx,.03*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],$A+5*BUe[(i)*(20)+z],$C+3*BUe[(i)*(20)+z],47-2*BUe[(i)*(20)+z],27+3*BUe[(i)*(20)+z],BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$96+50*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],40+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$41A+450*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'x',7)
elseif z==8 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],400+$C8*BUe[(i)*(20)+z],$FA0+$7D0*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
call Ccx(u,i-1,Bwe[(i)*(20)+z],6+1*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$A+1*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],$F+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==2 then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],84+36*BUe[(i)*(20)+z],840+360*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,4888,60)
call Tje(u,7695,.8)
call Tje(u,6780,$A0)
endif
call Tje(u,4888,20*lv)
call Tje(u,7695,.2*lv)
call Tje(u,6780,40*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],60+20*BUe[(i)*(20)+z],$A0+40*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],35+5*BUe[(i)*(20)+z],35+5*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
if BUe[(i)*(20)+z]==1 or not b then
call T_e(u,.03)
call Tje(u,611,40)
endif
call T_e(u,.02*lv)
call Tje(u,611,20*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],3+2*BUe[(i)*(20)+z],40+20*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,Fx,.1)
call Tje(u,7614,40)
call UnitAddAbility(u,'A04E')
call Tje(u,Dx,.27)
endif
call Tje(u,Fx,.05*lv)
call Tje(u,7614,20*lv)
call Tje(u,Dx,.03*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],$A+5*BUe[(i)*(20)+z],40+20*BUe[(i)*(20)+z],47-2*BUe[(i)*(20)+z],27+3*BUe[(i)*(20)+z],BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],'d'+30*BUe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$578+600*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'x',7)
elseif z==8 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],280+'x'*BUe[(i)*(20)+z],$AF0+$4B0*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,'A04N')
endif
call Ccx(u,i-1,Bwe[(i)*(20)+z],$A+2*BUe[(i)*(20)+z],16+4*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
call Ccx(u,i-1,Bwe[(i)*(20)+z],300+50*BUe[(i)*(20)+z],50+5*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==3 then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],700+300*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call TPe(u,8)
call Tje(u,7695,.8)
call Tje(u,6780,$A0)
endif
call TPe(u,1*lv)
call Tje(u,7695,.2*lv)
call Tje(u,6780,40*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],$A0+40*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call T_e(u,.07)
call TZe(u,$7D0)
call Tje(u,Dx,.27)
endif
call T_e(u,.03*lv)
call TZe(u,$3E8*lv)
call Tje(u,Dx,.03*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],7+3*BUe[(i)*(20)+z],$7D0+$3E8*BUe[(i)*(20)+z],27+3*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
if BUe[(i)*(20)+z]==1 or not b then
call tKe(u,'A02Y')
call Tje(u,6729,.08)
set Yb[i]="war3mapImported\\TLD_Aura_lahantran.mdx"
set yb[i]=UCe(u,Yb[i],"origin")
endif
call SetUnitAbilityLevel(u,'A02Y',BUe[(i)*(20)+z])
call Tje(u,6729,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],6+2*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$F+5*BUe[(i)*(20)+z],40+20*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5319,.15)
call Tje(u,vx,.15)
call Tje(u,6851,.08)
call Tje(u,909,.08)
endif
call Tje(u,5319,.05*lv)
call Tje(u,vx,.05*lv)
call Tje(u,6851,.02*lv)
call Tje(u,909,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],$F+5*BUe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$578+600*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'x',7)
elseif z==8 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$F+5*BUe[(i)*(20)+z],40+$A*BUe[(i)*(20)+z],16+2*BUe[(i)*(20)+z],20+3*BUe[(i)*(20)+z],BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,jx,.08)
call Tje(u,7255,.08)
call Tje(u,Jx,.08)
call Tje(u,kx,.08)
call Tje(u,6282,.08)
call UnitAddAbility(u,'A038')
endif
call Tje(u,jx,.02*lv)
call Tje(u,7255,.02*lv)
call Tje(u,Jx,.02*lv)
call Tje(u,kx,.02*lv)
call Tje(u,6282,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],$F+3*BUe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],16+4*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],20+$A*BUe[(i)*(20)+z],$C+4*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==4 then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],700+300*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call TPe(u,8)
call Tje(u,7695,.8)
call Tje(u,6780,$A0)
endif
call TPe(u,1*lv)
call Tje(u,7695,.2*lv)
call Tje(u,6780,40*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],$A0+40*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call T_e(u,.07)
call TZe(u,$7D0)
call Tje(u,Dx,.27)
endif
call T_e(u,.03*lv)
call TZe(u,$3E8*lv)
call Tje(u,Dx,.03*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],7+3*BUe[(i)*(20)+z],$7D0+$3E8*BUe[(i)*(20)+z],27+3*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
if BUe[(i)*(20)+z]==1 or not b then
call tKe(u,'A02Y')
call Tje(u,6729,.08)
set Yb[i]="war3mapImported\\TLD_Aura_lahantran.mdx"
set yb[i]=UCe(u,Yb[i],"origin")
endif
call SetUnitAbilityLevel(u,'A02Y',BUe[(i)*(20)+z])
call Tje(u,6729,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],6+2*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$578+600*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$578+600*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'x',7)
elseif z==8 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],8+4*BUe[(i)*(20)+z],$F+5*BUe[(i)*(20)+z],BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,6780,$A0)
call Tje(u,6851,.07)
endif
call Tje(u,6780,40*lv)
call Tje(u,6851,.03*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],32+4*BUe[(i)*(20)+z],$A0+40*BUe[(i)*(20)+z],7+3*BUe[(i)*(20)+z],BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$6D6+750*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],280+'x'*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==5 then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],700+300*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call TPe(u,8)
call Tje(u,6780,$A0)
call Tje(u,5724,.8)
endif
call TPe(u,1*lv)
call Tje(u,6780,40*lv)
call Tje(u,5724,.2*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],$A0+40*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],270+30*BUe[(i)*(20)+z],$F+5*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,4888,40)
call Tje(u,ax,.08)
call Tje(u,5724,.8)
endif
call Tje(u,4888,20*lv)
call Tje(u,ax,.02*lv)
call Tje(u,5724,.2*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],40+20*BUe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],35+5*BUe[(i)*(20)+z],7+3*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5762,'n')
call Tje(u,ax,.08)
call Tje(u,kx,.13)
call Tje(u,6491,.13)
endif
call Tje(u,5762,40*lv)
call Tje(u,ax,.02*lv)
call Tje(u,kx,.02*lv)
call Tje(u,6491,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],'n'+40*BUe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$41A+450*BUe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'x',7)
elseif z==8 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$6D6+750*BUe[(i)*(20)+z],35+5*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
call Ccx(u,i-1,Bwe[(i)*(20)+z],60+30*BUe[(i)*(20)+z],3+1*BUe[(i)*(20)+z],'d'+30*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,'A059')
endif
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],$A+2*BUe[(i)*(20)+z],42-2*BUe[(i)*(20)+z],16+4*BUe[(i)*(20)+z],BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$6D6+750*BUe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==6 then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],700+300*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call TPe(u,8)
call Tje(u,6780,$A0)
call Tje(u,5724,.8)
endif
call TPe(u,1*lv)
call Tje(u,6780,40*lv)
call Tje(u,5724,.2*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],$A0+40*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],270+30*BUe[(i)*(20)+z],$F+5*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,4888,40)
call Tje(u,ax,.08)
call Tje(u,5724,1.)
endif
call Tje(u,4888,20*lv)
call Tje(u,ax,.02*lv)
call Tje(u,5724,.2*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],40+20*BUe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],'d'+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],'i'+45*BUe[(i)*(20)+z],$6D6+750*BUe[(i)*(20)+z],22+3*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5762,'n')
call Tje(u,ax,.08)
call Tje(u,kx,.13)
call Tje(u,6491,.13)
endif
call Tje(u,5762,40*lv)
call Tje(u,ax,.02*lv)
call Tje(u,kx,.02*lv)
call Tje(u,6491,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],'n'+40*BUe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$AF+75*BUe[(i)*(20)+z],$6D6+750*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'x',7)
elseif z==8 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,4251,.02)
call Tje(u,5529,.08)
call Tje(u,5319,.16)
call Tje(u,vx,.16)
endif
call Tje(u,4251,.01*lv)
call Tje(u,5529,.02*lv)
call Tje(u,5319,.04*lv)
call Tje(u,vx,.04*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],2+1*BUe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],16+4*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],'x'+30*BUe[(i)*(20)+z],$C+3*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$6D6+750*BUe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==7 then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],700+300*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call TPe(u,8)
call Tje(u,6780,$A0)
call Tje(u,5724,.8)
endif
call TPe(u,1*lv)
call Tje(u,6780,40*lv)
call Tje(u,5724,.2*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],$A0+40*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],$578+600*BUe[(i)*(20)+z],'d'+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
call Ccx(u,i-1,Bwe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],7+3*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],$6D6+750*BUe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5724,.8)
call Tje(u,Cx,.13)
call Tje(u,6491,.13)
call Tje(u,kx,.13)
endif
call Tje(u,5724,.2*lv)
call Tje(u,Cx,.02*lv)
call Tje(u,6491,.02*lv)
call Tje(u,kx,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$578+600*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'x',7)
elseif z==8 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$578+600*BUe[(i)*(20)+z],36+4*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
call Ccx(u,i-1,Bwe[(i)*(20)+z],$A*BUe[(i)*(20)+z],4+2*BUe[(i)*(20)+z],2+1*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,'A05Z')
call T_e(u,.04)
endif
call T_e(u,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],4+2*BUe[(i)*(20)+z],$A+3*BUe[(i)*(20)+z],$F+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$F5+'i'*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==8 then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],49+21*BUe[(i)*(20)+z],$41A+450*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call TPe(u,8)
call Tje(u,4888,40)
call Tje(u,5724,.8)
endif
call TPe(u,1*lv)
call Tje(u,4888,20*lv)
call Tje(u,5724,.2*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],40+20*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,Cx,.1)
call Tje(u,Nx,80)
endif
call Tje(u,Cx,.01*lv)
call Tje(u,Nx,20*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],$A+1*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
call Ccx(u,i-1,Bwe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,'A06A')
endif
call Ccx(u,i-1,Bwe[(i)*(20)+z],'i'+45*BUe[(i)*(20)+z],$AF0+$4B0*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5724,.8)
call Tje(u,Cx,.13)
call Tje(u,6491,.13)
call Tje(u,kx,.13)
endif
call Tje(u,5724,.2*lv)
call Tje(u,Cx,.02*lv)
call Tje(u,6491,.02*lv)
call Tje(u,kx,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$41A+450*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'x',7)
elseif z==8 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$578+600*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,4888,80)
endif
call Tje(u,4888,20*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],$C+3*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,vx,.2)
call Tje(u,Cx,.2)
call Tje(u,5529,.08)
call Tje(u,'o',.08)
endif
call Tje(u,vx,.03*lv)
call Tje(u,Cx,.02*lv)
call Tje(u,5529,.02*lv)
call Tje(u,'o',.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],20+3*BUe[(i)*(20)+z],20+2*BUe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$AF+75*BUe[(i)*(20)+z],$6D6+750*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==9 then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],700+300*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call TPe(u,8)
call Tje(u,4888,40)
call Tje(u,bx,.8)
endif
call TPe(u,1*lv)
call Tje(u,4888,20*lv)
call Tje(u,bx,.2*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],40+20*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5762,80)
call T_e(u,.1)
endif
call Tje(u,5762,20*lv)
call T_e(u,.01*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],$A+1*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],3+1*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],36+4*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,Fx,.15)
call Tje(u,gx,.15)
call Tje(u,bx,.7)
call Tje(u,4562,.13)
endif
call Tje(u,Fx,.05*lv)
call Tje(u,gx,.05*lv)
call Tje(u,bx,.3*lv)
call Tje(u,4562,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],$F+5*BUe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$AF+75*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],BUe[(i)*(20)+z],'x',7)
elseif z==8 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],36+4*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5319,.16)
call Tje(u,vx,.16)
call Tje(u,Kx,.18)
endif
call Tje(u,5319,.04*lv)
call Tje(u,vx,.04*lv)
call Tje(u,Kx,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],16+4*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$96+50*BUe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$AF0+$4B0*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==$A then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
if BUe[(i)*(20)+z]>=8 then
set mv=3
elseif BUe[(i)*(20)+z]>=4 then
set mv=2
else
set mv=1
endif
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],700+300*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],mv,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call TPe(u,8)
call Tje(u,6780,$A0)
call Tje(u,bx,.8)
endif
call TPe(u,1*lv)
call Tje(u,6780,40*lv)
call Tje(u,bx,.2*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],$A0+40*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],3+1*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,Fx,.25)
call Tje(u,gx,.25)
call Tje(u,bx,.7)
call Tje(u,4562,.13)
endif
call Tje(u,Fx,.05*lv)
call Tje(u,gx,.05*lv)
call Tje(u,bx,.3*lv)
call Tje(u,4562,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],25+5*BUe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$41A+450*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'x',7)
elseif z==8 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5319,.15)
call Tje(u,vx,.15)
call Tje(u,ax,.18)
call TPe(u,8)
endif
call Tje(u,5319,.05*lv)
call Tje(u,vx,.05*lv)
call Tje(u,ax,.02*lv)
call TPe(u,1*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],$F+5*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,'A07A')
endif
call Ccx(u,i-1,Bwe[(i)*(20)+z],23+7*BUe[(i)*(20)+z],500+60*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$C+4*BUe[(i)*(20)+z],$B+1*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$6D6+750*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==$B then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],700+300*BUe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],4+1*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],1*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
call Ccx(u,i-1,Bwe[(i)*(20)+z],20+$A*BUe[(i)*(20)+z],$A+5*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
call Ccx(u,i-1,Bwe[(i)*(20)+z],$C+2*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],80,5)
elseif z==6 then
call Ccx(u,i-1,Bwe[(i)*(20)+z],'d'+30*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$578+600*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'x',7)
elseif z==8 then
call Ccx(u,i-1,Bwe[(i)*(20)+z],16+4*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
call Ccx(u,i-1,Bwe[(i)*(20)+z],20+4*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5319,.15)
call Tje(u,vx,.15)
call TPe(u,4)
call u_e(u,4)
call Tje(u,bx,1.)
endif
call Tje(u,5319,.05*lv)
call Tje(u,vx,.05*lv)
call TPe(u,2*lv)
call u_e(u,2*lv)
call Tje(u,bx,.5*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],$F+5*BUe[(i)*(20)+z],4+2*BUe[(i)*(20)+z],'d'+50*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],350+$96*BUe[(i)*(20)+z],$DAC+$5DC*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==$C then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],700+300*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call TPe(u,8)
call Tje(u,4888,40)
call Tje(u,bx,.8)
endif
call TPe(u,1*lv)
call Tje(u,4888,20*lv)
call Tje(u,bx,.2*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],40+20*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],9+1*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,Fx,.16)
call Tje(u,gx,.16)
call UnitAddAbility(u,'A07Y')
endif
call Tje(u,Fx,.04*lv)
call Tje(u,gx,.04*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],16+4*BUe[(i)*(20)+z],3+1*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,bx,.6)
call Tje(u,4562,.13)
call Tje(u,Kx,.13)
endif
call Tje(u,bx,.4*lv)
call Tje(u,4562,.02*lv)
call Tje(u,Kx,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],60+40*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5319,.16)
call Tje(u,vx,.16)
call Tje(u,Jx,.18)
call Tje(u,6210,.18)
endif
call Tje(u,5319,.04*lv)
call Tje(u,vx,.04*lv)
call Tje(u,Jx,.02*lv)
call Tje(u,6210,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],16+4*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$578+600*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'x',7)
elseif z==8 then
call Ccx(u,i-1,Bwe[(i)*(20)+z],$AF+75*BUe[(i)*(20)+z],$6D6+750*BUe[(i)*(20)+z],27+3*BUe[(i)*(20)+z],27+3*BUe[(i)*(20)+z],BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$96+50*BUe[(i)*(20)+z],$E+2*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,'A087')
call Tje(u,jx,.09)
call Tje(u,6282,.09)
call Tje(u,Jx,.09)
call Tje(u,7255,.09)
endif
call Tje(u,jx,.03*lv)
call Tje(u,6282,.03*lv)
call Tje(u,Jx,.03*lv)
call Tje(u,7255,.03*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],9+3*BUe[(i)*(20)+z],$96+30*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],'i'+45*BUe[(i)*(20)+z],$578+600*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==$E then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
if BUe[(i)*(20)+z]>=5 then
set mv=BUe[(i)*(20)+z]-3
else
set mv=1
endif
call Ccx(u,i-1,Bwe[(i)*(20)+z],49+21*BUe[(i)*(20)+z],700+300*BUe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],mv,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call TPe(u,8)
call Tje(u,4888,40)
call Tje(u,Bx,.8)
endif
call TPe(u,1*lv)
call Tje(u,4888,20*lv)
call Tje(u,Bx,.2*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],40+20*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5762,60)
endif
call Tje(u,5762,40*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],60+40*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],3+1*BUe[(i)*(20)+z],$C+3*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],9+1*BUe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,894,.2)
call Tue(u,70)
endif
call Tje(u,894,.05*lv)
call Tue(u,30*lv)
call Tje(u,4251,1*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],20+5*BUe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],1*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],'i'+45*BUe[(i)*(20)+z],$578+600*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'x',7)
elseif z==8 then
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],$C+4*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],5+2*BUe[(i)*(20)+z],$A*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,'A08N')
endif
call Ccx(u,i-1,Bwe[(i)*(20)+z],20+5*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$AF+75*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==$D then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
if BUe[(i)*(20)+z]>=8 then
set mv=3
elseif BUe[(i)*(20)+z]>=4 then
set mv=2
else
set mv=1
endif
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],700+300*BUe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],mv,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call TPe(u,8)
call Tje(u,6780,$A0)
call TLe(u,70)
endif
call TPe(u,1*lv)
call Tje(u,6780,40*lv)
call TLe(u,30*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],$A0+40*BUe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,6780,$A0)
call Tje(u,5762,70)
call T_e(u,.1)
endif
call Tje(u,6780,40*lv)
call Tje(u,5762,30*lv)
call T_e(u,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],$A0+40*BUe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],$A+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],3+1*BUe[(i)*(20)+z],$C+3*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],35+5*BUe[(i)*(20)+z],35+5*BUe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,894,.2)
call Tue(u,70)
endif
call Tje(u,894,.05*lv)
call Tue(u,30*lv)
call Tje(u,4251,1*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],20+5*BUe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],1*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$41A+450*BUe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'x',7)
elseif z==8 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5319,.16)
call Tje(u,vx,.16)
call Tje(u,7537,.08)
call Tje(u,jx,.13)
endif
call Tje(u,5319,.04*lv)
call Tje(u,vx,.04*lv)
call Tje(u,7537,.02*lv)
call Tje(u,jx,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],16+4*BUe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],7+1*BUe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],16+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,ax,.13)
endif
call Tje(u,ax,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],6+2*BUe[(i)*(20)+z],$E+4*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$41A+450*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==$F then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],$41A+450*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call TPe(u,8)
call Tje(u,4888,40)
call Tje(u,Bx,.8)
endif
call TPe(u,1*lv)
call Tje(u,4888,20*lv)
call Tje(u,Bx,.2*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],40+20*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5762,60)
call Tje(u,5034,70)
call Tje(u,572,.18)
endif
call Tje(u,5762,40*lv)
call Tje(u,5034,30*lv)
call Tje(u,572,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],60+40*BUe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
if BUe[(i)*(20)+z]>=9 then
set mv=5
elseif BUe[(i)*(20)+z]>=7 then
set mv=4
elseif BUe[(i)*(20)+z]>=5 then
set mv=3
elseif BUe[(i)*(20)+z]>=3 then
set mv=2
else
set mv=1
endif
call Ccx(u,i-1,Bwe[(i)*(20)+z],'i'+45*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],mv,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],270+30*BUe[(i)*(20)+z],35+5*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],$578+600*BUe[(i)*(20)+z],BUe[(i)*(20)+z],'x',7)
elseif z==8 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5319,.26)
call Tje(u,vx,.26)
call Tje(u,6443,.13)
call Tje(u,jx,.13)
endif
call Tje(u,5319,.04*lv)
call Tje(u,vx,.04*lv)
call Tje(u,6443,.02*lv)
call Tje(u,jx,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],26+4*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,'A09E')
call Tje(u,894,.2)
endif
call Tje(u,894,.05*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],20+5*BUe[(i)*(20)+z],$C+1*BUe[(i)*(20)+z],50+50*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
call Ccx(u,i-1,Bwe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],$B+1*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==16 then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],'i'+45*BUe[(i)*(20)+z],$41A+450*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call TPe(u,8)
call Tje(u,4888,40)
call Tje(u,Bx,.8)
endif
call TPe(u,1*lv)
call Tje(u,4888,20*lv)
call Tje(u,Bx,.2*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],40+20*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5762,60)
call Tje(u,5034,70)
call Tje(u,572,.18)
endif
call Tje(u,5762,40*lv)
call Tje(u,5034,30*lv)
call Tje(u,572,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],60+40*BUe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,'A09Q')
endif
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],$A0+40*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],4+2*BUe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],420+$B4*BUe[(i)*(20)+z],4200+$708*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],5+1*BUe[(i)*(20)+z],BUe[(i)*(20)+z],'x',7)
elseif z==8 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],350+$96*BUe[(i)*(20)+z],$DAC+$5DC*BUe[(i)*(20)+z],27+3*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5319,.25)
call Tje(u,vx,.25)
call Tje(u,6443,.18)
call Tje(u,jx,.18)
call Tje(u,kx,.18)
call Tje(u,894,.2)
call TPe(u,8)
endif
call Tje(u,5319,.05*lv)
call Tje(u,vx,.05*lv)
call Tje(u,6443,.02*lv)
call Tje(u,jx,.02*lv)
call Tje(u,kx,.02*lv)
call Tje(u,894,.05*lv)
call TPe(u,1*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],25+5*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],20+5*BUe[(i)*(20)+z],BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
call Ccx(u,i-1,Bwe[(i)*(20)+z],339+66*BUe[(i)*(20)+z],25+5*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],280+'x'*BUe[(i)*(20)+z],$992+$41A*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],5+1*BUe[(i)*(20)+z],BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==17 then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],490+$D2*BUe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call TPe(u,8)
call Tje(u,6780,$A0)
call Tje(u,cx,.8)
endif
call TPe(u,1*lv)
call Tje(u,6780,40*lv)
call Tje(u,cx,.2*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],$A0+40*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
if BUe[(i)*(20)+z]==1 or not b then
call u_e(u,4)
call Tje(u,7255,.18)
call Tje(u,gx,.26)
endif
call u_e(u,1*lv)
call Tje(u,7255,.02*lv)
call Tje(u,gx,.04*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],4+1*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],26+4*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],35+5*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5762,70)
call Tje(u,4251,2)
call Tje(u,6780,$A0)
call Tje(u,ax,.08)
set Yb[i]="war3mapImported\\VDK_thattinhbuff2.mdx"
set yb[i]=UCe(u,Yb[i],"origin")
endif
call Tje(u,5762,30*lv)
call Tje(u,4251,1*lv)
call Tje(u,6780,40*lv)
call Tje(u,ax,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],2+1*BUe[(i)*(20)+z],$A0+40*BUe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$41A+450*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'x',7)
elseif z==8 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5762,70)
call T4e(u,.18)
call Icx(u)
call Tje(u,5319,.3)
endif
call Tje(u,5762,30*lv)
call T4e(u,.02*lv)
call Tje(u,5319,.05*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],$F-1*BUe[(i)*(20)+z],30+5*BUe[(i)*(20)+z],BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
call Ccx(u,i-1,Bwe[(i)*(20)+z],35+5*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==18 then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],700+300*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call TPe(u,8)
call Tje(u,4888,40)
call Tje(u,cx,.8)
endif
call TPe(u,1*lv)
call Tje(u,4888,20*lv)
call Tje(u,cx,.2*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],40+20*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
if BUe[(i)*(20)+z]==1 or not b then
call u_e(u,4)
call Tje(u,7255,.18)
call Tje(u,gx,.26)
endif
call u_e(u,1*lv)
call Tje(u,7255,.02*lv)
call Tje(u,gx,.04*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],4+1*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],26+4*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$96+50*BUe[(i)*(20)+z],95-5*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call T4e(u,.13)
call TLe(u,$A0)
call UnitAddAbility(u,'A0OR')
endif
call T4e(u,.02*lv)
call TLe(u,40*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],$A0+40*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$578+600*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'x',7)
elseif z==8 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],280+'x'*BUe[(i)*(20)+z],$AF0+$4B0*BUe[(i)*(20)+z],26+4*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,7656,.18)
endif
call Tje(u,7656,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],$4B0-50*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5319,.14)
call Tje(u,vx,.14)
endif
call Tje(u,5319,.04*lv)
call Tje(u,vx,.04*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],$F+5*BUe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$AF+75*BUe[(i)*(20)+z],$6D6+750*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==19 then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],700+300*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call TPe(u,8)
call Tje(u,6780,$A0)
call Tje(u,cx,.8)
endif
call TPe(u,1*lv)
call Tje(u,6780,40*lv)
call Tje(u,cx,.2*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],$A0+40*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],3+1*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$A0+40*BUe[(i)*(20)+z],$96+50*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5319,.17)
call Tje(u,vx,.17)
call Tje(u,7656,.13)
call Tje(u,7255,.13)
call TPe(u,8)
endif
call Tje(u,5319,.03*lv)
call Tje(u,vx,.03*lv)
call Tje(u,7656,.02*lv)
call Tje(u,7255,.02*lv)
call TPe(u,1*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$6D6+750*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'x',7)
elseif z==8 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],36+4*BUe[(i)*(20)+z],BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,'A0BB')
endif
call Ccx(u,i-1,Bwe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],16+4*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
call Ccx(u,i-1,Bwe[(i)*(20)+z],50+5*BUe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$F5+'i'*BUe[(i)*(20)+z],$992+$41A*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==20 then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$578+600*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call TPe(u,8)
call Tje(u,4888,40)
call Tje(u,cx,.8)
endif
call TPe(u,1*lv)
call Tje(u,4888,20*lv)
call Tje(u,cx,.2*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],40+20*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],3+1*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$6D6+750*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5319,.2)
call Tje(u,vx,.2)
call Tje(u,7656,.13)
call Tje(u,7255,.13)
call Tje(u,ax,.08)
endif
call Tje(u,5319,.04*lv)
call Tje(u,vx,.04*lv)
call Tje(u,7656,.02*lv)
call Tje(u,7255,.02*lv)
call Tje(u,ax,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],20+4*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],420+$B4*BUe[(i)*(20)+z],6600+$960*BUe[(i)*(20)+z],27+3*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'x',7)
elseif z==8 then
if BUe[(i)*(20)+z]==1 or not b then
call tKe(u,'A0BP')
endif
call Ccx(u,i-1,Bwe[(i)*(20)+z],$A+4*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,894,.17)
call UnitAddAbility(u,'A0BR')
endif
call Tje(u,894,.03*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],$3E8-40*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],50+4*BUe[(i)*(20)+z],26+4*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$AF+75*BUe[(i)*(20)+z],$6D6+750*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==21 then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
set mv=1
if BUe[(i)*(20)+z]>=9 then
set mv=5
elseif BUe[(i)*(20)+z]>=7 then
set mv=4
elseif BUe[(i)*(20)+z]>=5 then
set mv=3
elseif BUe[(i)*(20)+z]>=3 then
set mv=2
endif
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],700+300*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],mv,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call TPe(u,8)
call Tje(u,4888,40)
call Tje(u,bx,.8)
endif
call TPe(u,1*lv)
call Tje(u,4888,20*lv)
call Tje(u,bx,.2*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],40+20*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],3+1*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5740,.13)
call Tje(u,jx,.13)
call Tje(u,7255,.13)
call Tje(u,Jx,.13)
call Tje(u,6282,.13)
set Yb[i]="war3mapImported\\DTK_bacminhaura3.mdl"
set yb[i]=UCe(u,Yb[i],"origin")
endif
call Tje(u,5740,.01*lv)
call Tje(u,jx,.02*lv)
call Tje(u,7255,.02*lv)
call Tje(u,Jx,.02*lv)
call Tje(u,6282,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D+1*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,'A0R9')
endif
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,bx,1.7)
call Tje(u,Kx,.18)
call tKe(u,'A0RB')
endif
call Tje(u,bx,.3*lv)
call Tje(u,Kx,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],$AA+30*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],84+36*BUe[(i)*(20)+z],840+360*BUe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'x',7)
elseif z==8 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5319,.16)
call Tje(u,vx,.16)
call Tje(u,6210,.17)
call Tje(u,4888,60)
call TPe(u,7)
endif
call Tje(u,5319,.04*lv)
call Tje(u,vx,.04*lv)
call Tje(u,6210,.03*lv)
call Tje(u,4888,20*lv)
call TPe(u,1*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],60+20*BUe[(i)*(20)+z],7+1*BUe[(i)*(20)+z],16+4*BUe[(i)*(20)+z],BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
if BUe[(i)*(20)+z]==1 or not b then
call Erx(i)
endif
call Ccx(u,i-1,Bwe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],$AA+30*BUe[(i)*(20)+z],$E+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,572,.12)
call Tje(u,lx,.12)
call Tje(u,6210,.12)
call Tje(u,7896,.12)
call Tje(u,6491,.12)
endif
call Tje(u,572,.03*lv)
call Tje(u,lx,.03*lv)
call Tje(u,6210,.03*lv)
call Tje(u,7896,.03*lv)
call Tje(u,6491,.03*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],20+5*BUe[(i)*(20)+z],$C+3*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==22 then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],700+300*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,4888,60)
call Tje(u,bx,.8)
call Tje(u,6780,$A0)
endif
call Tje(u,4888,20*lv)
call Tje(u,bx,.2*lv)
call Tje(u,6780,40*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],60+20*BUe[(i)*(20)+z],$A0+40*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$AF0+$4B0*BUe[(i)*(20)+z],45+5*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],16+4*BUe[(i)*(20)+z],50+5*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,'A0RP')
endif
call Ccx(u,i-1,Bwe[(i)*(20)+z],16+4*BUe[(i)*(20)+z],50+5*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,'A0RR')
endif
call Ccx(u,i-1,Bwe[(i)*(20)+z],30+3*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$AF+75*BUe[(i)*(20)+z],$578+600*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'x',7)
elseif z==8 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],37+3*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
call Ccx(u,i-1,Bwe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],30+5*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
call Ccx(u,i-1,Bwe[(i)*(20)+z],40+5*BUe[(i)*(20)+z],3+1*BUe[(i)*(20)+z],5+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==23 then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],700+300*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call TPe(u,8)
call Tje(u,7695,.8)
call Tje(u,6780,$A0)
endif
call TPe(u,1*lv)
call Tje(u,7695,.2*lv)
call Tje(u,6780,40*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],$A0+40*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],27+3*BUe[(i)*(20)+z],'x'+30*BUe[(i)*(20)+z],BUe[(i)*(20)+z],40,3)
elseif z==4 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,'A0S7')
endif
call Ccx(u,i-1,Bwe[(i)*(20)+z],4+2*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],850-50*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5319,.16)
call Tje(u,vx,.16)
call Tje(u,909,.18)
call Tje(u,7896,.17)
call Tje(u,6491,.17)
endif
call Tje(u,5319,.04*lv)
call Tje(u,vx,.04*lv)
call Tje(u,909,.02*lv)
call Tje(u,7896,.03*lv)
call Tje(u,6491,.03*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],16+4*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],'i'+45*BUe[(i)*(20)+z],$578+600*BUe[(i)*(20)+z],$41A+450*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],BUe[(i)*(20)+z],'x',7)
elseif z==8 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],37+3*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
call Ccx(u,i-1,Bwe[(i)*(20)+z],20+5*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
call Ccx(u,i-1,Bwe[(i)*(20)+z],40+$A*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$AF+75*BUe[(i)*(20)+z],$6D6+750*BUe[(i)*(20)+z],$6D6+750*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==25 then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],700+300*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5724,.8)
call Tje(u,5529,.13)
endif
call Tje(u,5724,.2*lv)
call Tje(u,5529,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call u_e(u,4)
call Tje(u,Ex,4)
endif
call u_e(u,1*lv)
call Tje(u,Ex,1*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],4+1*BUe[(i)*(20)+z],4+1*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$578+600*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],35+5*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,Cx,.13)
call Tje(u,6491,.17)
endif
call Tje(u,Cx,.02*lv)
call Tje(u,6491,.03*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$6D6+750*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'x',7)
elseif z==8 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],R2I(7.5+.5*BUe[(i)*(20)+z]),0,0,0,BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
call Ccx(u,i-1,Bwe[(i)*(20)+z],$A+1*BUe[(i)*(20)+z],20+4*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,5319,.21)
call Tje(u,vx,.21)
call Tje(u,kx,.17)
call Tje(u,6491,.17)
endif
call Tje(u,5319,.04*lv)
call Tje(u,vx,.04*lv)
call Tje(u,kx,.03*lv)
call Tje(u,6491,.03*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],21+4*BUe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],33+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==26 then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],700+300*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call TPe(u,8)
call Tje(u,6780,$A0)
call Tje(u,5724,.8)
endif
call TPe(u,1*lv)
call Tje(u,6780,40*lv)
call Tje(u,5724,.2*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],$A0+40*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$578+600*BUe[(i)*(20)+z],26+4*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],40,3)
elseif z==4 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$6D6+750*BUe[(i)*(20)+z],45+5*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call Tue(u,70)
call Tje(u,6491,.13)
call Tje(u,lx,.13)
call Tje(u,6210,.13)
call Tje(u,7896,.13)
endif
call Tue(u,30*lv)
call Tje(u,6491,.02*lv)
call Tje(u,lx,.02*lv)
call Tje(u,6210,.02*lv)
call Tje(u,7896,.02*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],$D+2*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],280+'x'*BUe[(i)*(20)+z],$578+600*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'x',7)
elseif z==8 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+2*BUe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],0,0,BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,'A0W0')
call T_e(u,.12)
endif
call T_e(u,.03*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],$C+3*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,Ex,.11)
call Tje(u,Xx,.11)
endif
call Tje(u,Ex,.01*lv)
call Tje(u,Xx,.01*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],$B+1*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],280+'x'*BUe[(i)*(20)+z],$6D6+750*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$C8,$B)
endif
elseif CDx==24 then
if z==1 then
if BUe[(i)*(20)+z]==1 or not b then
if wJ[i]then
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+z]),false)
endif
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],70+30*BUe[(i)*(20)+z],700+300*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],1,1)
elseif z==2 then
if BUe[(i)*(20)+z]==1 or not b then
call TPe(u,8)
call Tje(u,7695,.8)
call Tje(u,6780,$A0)
endif
call TPe(u,1*lv)
call Tje(u,7695,.2*lv)
call Tje(u,6780,40*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],8+1*BUe[(i)*(20)+z],$A0+40*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],20,2)
elseif z==3 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$D2+90*BUe[(i)*(20)+z],$834+900*BUe[(i)*(20)+z],35+5*BUe[(i)*(20)+z],26+4*BUe[(i)*(20)+z],BUe[(i)*(20)+z],40,3)
elseif z==4 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],4+2*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],60,4)
elseif z==5 then
if BUe[(i)*(20)+z]==1 or not b then
call TPe(u,9)
call Tje(u,4888,40)
call Tje(u,611,80)
call Tje(u,7896,.17)
endif
call TPe(u,1*lv)
call Tje(u,4888,20*lv)
call Tje(u,611,20*lv)
call Tje(u,7896,.03*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],9+1*BUe[(i)*(20)+z],40+20*BUe[(i)*(20)+z],80+20*BUe[(i)*(20)+z],17+3*BUe[(i)*(20)+z],BUe[(i)*(20)+z],80,5)
elseif z==6 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$C+2*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],'d',6)
elseif z==7 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$8C+60*BUe[(i)*(20)+z],$578+600*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],'x',7)
elseif z==8 then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],280+'x'*BUe[(i)*(20)+z],$AF0+$4B0*BUe[(i)*(20)+z],27+3*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$8C,8)
elseif z==9 then
if BUe[(i)*(20)+z]==1 or not b then
call Tje(u,vx,.25)
call Tje(u,5319,.25)
endif
call Tje(u,vx,.25*lv)
call Tje(u,5319,.25*lv)
call Ccx(u,i-1,Bwe[(i)*(20)+z],25+5*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],$A0,9)
elseif z==$A then
call Ccx(u,i-1,Bwe[(i)*(20)+z],$A+2*BUe[(i)*(20)+z],0,0,0,BUe[(i)*(20)+z],$B4,$A)
elseif z==$B then
if BUe[(i)*(20)+z]==1 or not b then
call UnitAddAbility(u,Bwe[(i)*(20)+z])
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
endif
call SetUnitAbilityLevel(u,Bwe[(i)*(20)+z],BUe[(i)*(20)+z])
call Ccx(u,i-1,Bwe[(i)*(20)+z],$AF+75*BUe[(i)*(20)+z],$578+600*BUe[(i)*(20)+z],18+2*BUe[(i)*(20)+z],0,BUe[(i)*(20)+z],$C8,$B)
endif
endif
set u=null
endfunction
function Cfx takes integer uDe returns integer
if uDe==1 then
return 1
else
return uDe*20-20
endif
endfunction
function CFx takes unit u,player p,integer i,integer CCx returns boolean
if CCx>0 and CCx<=8 then
if tbe(i,4,0)then
if BUe[(i)*(20)+CCx]<$A then
if CCx<=6 then
if rk[i]>=Cfx(CCx)then
set BUe[(i)*(20)+CCx]=BUe[(i)*(20)+CCx]+1
call Cdx(p,i,CCx,true,1)
call tbe(i,4,De)
call Qke(p,"|cffffcc00"+"Kỹ năng "+BlzGetAbilityResearchTooltip(Bwe[(i)*(20)+CCx],0)+" đã tăng 1 cấp độ !",5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
else
call Qke(p,"|cffffcc00"+"Không đủ cấp độ !",5)
endif
elseif CCx==7 then
if rk[i]>=$C8 then
if Bme[(i)*(20)+1]>=nj[BUe[(i)*(20)+CCx]]*2 then
set BUe[(i)*(20)+CCx]=BUe[(i)*(20)+CCx]+1
call Cdx(p,i,CCx,true,1)
call tbe(i,4,De)
call Qke(p,"|cffffcc00"+"Kỹ năng "+BlzGetAbilityResearchTooltip(Bwe[(i)*(20)+CCx],0)+" đã tăng 1 cấp độ !",5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
else
call Qke(p,"|cffffcc00"+"Độ luyện: |r"+I2S(R2I(Bme[(i)*(20)+CCx-6])/ 2)+"/"+I2S(nj[BUe[(i)*(20)+CCx]]),5)
endif
else
call Qke(p,"|cffffcc00"+"Không đủ cấp độ !",5)
endif
elseif CCx==8 then
if bJ[i]>=1 then
if Bme[(i)*(20)+2]>=nj[BUe[(i)*(20)+CCx]]*2 then
set BUe[(i)*(20)+CCx]=BUe[(i)*(20)+CCx]+1
call Cdx(p,i,CCx,true,1)
call tbe(i,4,De)
call Qke(p,"|cffffcc00"+"Kỹ năng "+BlzGetAbilityResearchTooltip(Bwe[(i)*(20)+CCx],0)+" đã tăng 1 cấp độ !",5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
else
call Qke(p,"|cffffcc00"+"Độ luyện: |r"+I2S(R2I(Bme[(i)*(20)+CCx-6])/ 2)+"/"+I2S(nj[BUe[(i)*(20)+CCx]]),5)
endif
else
call Qke(p,"|cffffcc00"+"Kỹ năng yêu cầu đạt cấp Trùng Sinh 1",5)
endif
endif
else
call Qke(p,"|cffffcc00"+"Kỹ năng đã đạt cấp độ tối đa !",5)
endif
else
call Qke(p,"|cffffcc00"+"Tăng cấp yêu cầu 4 điểm kỹ năng !",5)
endif
elseif CCx==9 then
if BUe[(i)*(20)+CCx]<$A then
if So[i]>=BUe[(i)*(20)+CCx]+1 and bJ[i]>=2 then
set BUe[(i)*(20)+CCx]=BUe[(i)*(20)+CCx]+1
call Cdx(p,i,CCx,true,1)
call Qke(p,"|cffffcc00"+"Kỹ năng "+BlzGetAbilityResearchTooltip(Bwe[(i)*(20)+CCx],0)+" đã tăng 1 cấp độ !",5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
else
call Qke(p,"|cffffcc00"+"Cần tăng cấp mật tịch !",5)
endif
else
call Qke(p,"|cffffcc00"+"Kỹ năng đã đạt cấp độ tối đa !",5)
endif
elseif CCx==$A then
if BUe[(i)*(20)+CCx]<$A then
if So[i]>=BUe[(i)*(20)+CCx]+$B and bJ[i]>=3 then
set BUe[(i)*(20)+CCx]=BUe[(i)*(20)+CCx]+1
call Cdx(p,i,CCx,true,1)
call Qke(p,"|cffffcc00"+"Kỹ năng "+BlzGetAbilityResearchTooltip(Bwe[(i)*(20)+CCx],0)+" đã tăng 1 cấp độ !",5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
else
call Qke(p,"|cffffcc00"+"Cần tăng cấp mật tịch !",5)
endif
else
call Qke(p,"|cffffcc00"+"Kỹ năng đã đạt cấp độ tối đa !",5)
endif
elseif CCx==$B then
if BUe[(i)*(20)+CCx]<$A then
if So[i]>=BUe[(i)*(20)+CCx]+21 and bJ[i]>=5 then
set BUe[(i)*(20)+CCx]=BUe[(i)*(20)+CCx]+1
call Cdx(p,i,CCx,true,1)
call Qke(p,"|cffffcc00"+"Kỹ năng "+BlzGetAbilityResearchTooltip(Bwe[(i)*(20)+CCx],0)+" đã tăng 1 cấp độ !",5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
else
call Qke(p,"|cffffcc00"+"Cần tăng cấp mật tịch !",5)
endif
else
call Qke(p,"|cffffcc00"+"Kỹ năng đã đạt cấp độ tối đa !",5)
endif
endif
set u=null
set p=null
return false
endfunction
function Cgx takes unit u,integer i returns nothing
local player p=GetOwningPlayer(u)
if BMe[(i)*(20)+1]+BMe[(i)*(20)+2]+BMe[(i)*(20)+3]==0 then
if NA[i]=='t' then
set BMe[(i)*(20)+1]=1
set BMe[(i)*(20)+2]=1
set BMe[(i)*(20)+3]=1
set GJ[i]=$98
call T8e(XJ[i],1,true)
call T9e(XJ[i],1,true)
call uve(XJ[i],1,true)
call Qke(p,"|cffffcc00"+"Bạn đã kích hoạt mã bài, có thể tiến hành nâng cấp bằng Căn Cốt Đơn và mua Thú Cưỡi tại Mã Phu !",5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call ybe(i)
set B4e[(i-1)*(23)+19]=19
set B5e[(i-1)*(23)+19]=rA
set B6e[(i-1)*(23)+19]="
"+oA
if GetLocalPlayer()==p then
call Uge(B3e[19],iA)
endif
else
call Qke(p,"|cffffcc00"+"Bạn vẫn chưa hoàn thành nhiệm vụ tân thủ (-nv để theo dõi) !",5)
endif
else
call Qke(p,"|cffffcc00"+"Bạn đã kích hoạt mã bài trước đó !",5)
endif
set p=null
endfunction
function CGx takes unit u,integer i returns nothing
local player p=GetOwningPlayer(u)
local integer rd=GetRandomInt(1,3)
if tQe(i)then
if BMe[(i)*(20)+rd]>=$C8 then
call Qke(p,"|cffffcc00"+"Nâng cấp thất bại, thuộc tính căn cốt này đã đạt mức tối đa !",5)
else
set BMe[(i)*(20)+rd]=BMe[(i)*(20)+rd]+1
if rd==1 then
call Qke(p,"|cffffcc00"+"Căn cốt sức mạnh của thú cưỡi đã tăng 1 điểm !",5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call T8e(XJ[i],1,true)
elseif rd==2 then
call Qke(p,"|cffffcc00"+"Căn cốt thân pháp của thú cưỡi đã tăng 1 điểm !",5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call T9e(XJ[i],1,true)
elseif rd==3 then
call Qke(p,"|cffffcc00"+"Căn cốt nội công của thú cưỡi đã tăng 1 điểm !",5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call uve(XJ[i],1,true)
endif
set mv=BMe[(i)*(20)+1]+BMe[(i)*(20)+2]+BMe[(i)*(20)+3]
if mv=='d' then
call TZe(u,5000)
elseif mv==$C8 then
call Tje(u,Vx,.2)
elseif mv==300 then
call Tje(u,5762,$C8)
elseif mv==400 then
call Tue(u,'d')
elseif mv==500 then
call Tje(u,ox,.3)
elseif mv==600 then
call Tje(u,xx,.3)
endif
call ybe(i)
set B4e[(i-1)*(23)+19]=19
set B5e[(i-1)*(23)+19]=rA
set B6e[(i-1)*(23)+19]="
"+oA
if GetLocalPlayer()==p then
call Uge(B3e[19],iA)
set zc=rA
set Zc="
"+oA
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextTitle",0),zc)
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
endif
else
call Qke(p,"|cffffcc00"+"Bạn vẫn chưa kích hoạt Mã Bài !",5)
endif
set p=null
endfunction
function Chx takes integer i returns nothing
call T8e(XJ[i],BMe[(i)*(20)+1],true)
call T9e(XJ[i],BMe[(i)*(20)+2],true)
call uve(XJ[i],BMe[(i)*(20)+3],true)
set mv=BMe[(i)*(20)+1]+BMe[(i)*(20)+2]+BMe[(i)*(20)+3]
if mv>='d' then
call TZe(XJ[i],5000)
endif
if mv>=$C8 then
call Tje(XJ[i],Vx,.2)
endif
if mv>=300 then
call Tje(XJ[i],5762,$C8)
endif
if mv>=400 then
call Tue(XJ[i],'d')
endif
if mv>=500 then
call Tje(XJ[i],ox,.3)
endif
if mv>=600 then
call Tje(XJ[i],xx,.3)
endif
call ybe(i)
set B4e[(i-1)*(23)+19]=19
set B5e[(i-1)*(23)+19]=rA
set B6e[(i-1)*(23)+19]="
"+oA
endfunction
function CHx takes player p,integer i,item t returns boolean
local string s=BlzGetItemDescription(t)
local integer z=S2I(SubString(s,0,1))
local integer c=0
call RemoveItem(t)
if BMe[(i)*(20)+1]+BMe[(i)*(20)+2]+BMe[(i)*(20)+3]<3 then
call Qke(p,"|cffffcc00"+"Bạn vẫn chưa kích hoạt mã bài tại mã phu Ba Lăng Huyện !",5)
set s=null
return false
endif
if(bde[(GetPlayerId(GetOwningPlayer(((XJ[i])))))])then
call Qke(p,"|cffffcc00"+"Không thể thay đổi thú cưỡi khi đang cưỡi !",5)
set s=null
return false
endif
if z==0 then
set c=S2I(SubString(s,2,4))
if(bJ[i]+bEe[i])<c then
call Qke(p,"|cffffcc00"+"Không đủ điều kiện !",5)
set s=null
return false
endif
set mv=1
set c=S2I(SubString(s,5,7))
set GJ[i]=(($96+(c)*2)*mv)
call ybe(i)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã nhận được thú cưỡi mới !",5)
elseif z==1 then
set c=S2I(SubString(s,2,4))
if t4e(i)<c then
call Qke(p,"|cffffcc00"+"Không đủ điều kiện !",5)
set s=null
return false
endif
set mv=1
set c=S2I(SubString(s,5,7))
set GJ[i]=(($96+(c)*2)*mv)
call ybe(i)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã nhận được thú cưỡi mới !",5)
elseif z==2 then
if not tGe(i,600,0)then
call Qke(p,"|cffffcc00"+"Không đủ điều kiện !",5)
set s=null
return false
endif
set mv=1
set GJ[i]=(($96+($D)*2)*mv)
call ybe(i)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã nhận được thú cưỡi mới !",5)
elseif z==6 then
set c=S2I(SubString(s,2,3))
if c==1 then
if Oi[i]<$C6 or bJ[i]<4 then
call Qke(p,"|cffffcc00"+"Không đủ điều kiện !",5)
set s=null
return false
endif
set mv=1
set GJ[i]=(($96+($E)*2)*mv)
call ybe(i)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã nhận được thú cưỡi mới !",5)
elseif c==2 then
if Ei[i]<25 or bJ[i]<6 then
call Qke(p,"|cffffcc00"+"Không đủ điều kiện !",5)
set s=null
return false
endif
set mv=1
set GJ[i]=(($96+($F)*2)*mv)
call ybe(i)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã nhận được thú cưỡi mới !",5)
elseif c==3 then
if lJ[i]<500 or bJ[i]<6 then
call Qke(p,"|cffffcc00"+"Không đủ điều kiện !",5)
call Qke(p,"|cff7fff00"+yj[20]+I2S(lJ[i]/ 5),5)
set s=null
return false
endif
set mv=1
set GJ[i]=(($96+(16)*2)*mv)
call ybe(i)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã nhận được thú cưỡi mới !",5)
endif
elseif z==3 then
set c=S2I(SubString(s,2,3))
if bJ[i]<c then
call Qke(p,"|cffffcc00"+"Không đủ điều kiện !",5)
set s=null
return false
endif
set c=S2I(SubString(s,4,6))
if not eox(XJ[i],c)then
set s=null
return false
endif
if UTe(i)then
set s=null
return false
endif
set c=S2I(SubString(s,7,9))
set Ti[i]=true
set GJ[i]=(($96+(c)*2)*mv)
call ybe(i)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã nhận được thú cưỡi mới !",5)
elseif z==4 then
set c=S2I(SubString(s,2,3))
if bJ[i]<c then
call Qke(p,"|cffffcc00"+"Không đủ điều kiện !",5)
set s=null
return false
endif
set c=S2I(SubString(s,4,5))
if not eox(XJ[i],3)then
set s=null
return false
endif
if UTe(i)then
set s=null
return false
endif
if not eox(XJ[i],8)then
if S2I(SubString(yH[N9e[(1+mv)*(6)+Ui[pv]]],5,6))<c then
set s=null
return false
endif
endif
set c=S2I(SubString(s,6,8))
set Ti[i]=true
set GJ[i]=(($96+(c)*2)*mv)
call ybe(i)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã nhận được thú cưỡi mới !",5)
elseif z==5 then
set c=S2I(SubString(s,2,3))
if not eox(XJ[i],1)then
set s=null
return false
endif
if UTe(i)then
set s=null
return false
endif
if c==1 then
if S2I(SubString(yH[N9e[(1+mv)*(6)+Ui[pv]]],0,1))<2 then
set s=null
return false
endif
set GJ[i]=(($96+(35)*2)*mv)
call ybe(i)
set Ti[i]=true
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã nhận được thú cưỡi mới !",5)
elseif c==2 then
if bJ[i]<3 then
call Qke(p,"|cffffcc00"+"Không đủ điều kiện !",5)
set s=null
return false
endif
if S2I(SubString(yH[N9e[(1+mv)*(6)+Ui[pv]]],0,1))<3 then
set s=null
return false
endif
set GJ[i]=(($96+(36)*2)*mv)
set Ti[i]=true
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã nhận được thú cưỡi mới !",5)
endif
elseif z==7 then
set c=S2I(SubString(s,2,3))
if bJ[i]<c then
call Qke(p,"|cffffcc00"+"Không đủ điều kiện !",5)
set s=null
return false
endif
set c=S2I(SubString(s,4,5))
if not eox(XJ[i],3)then
set s=null
return false
endif
if UTe(i)then
set s=null
return false
endif
if not eox(XJ[i],8)then
if S2I(SubString(Zi[Kk[i]],6,7))<c then
set s=null
return false
endif
endif
set c=S2I(SubString(s,6,8))
set Ti[i]=true
set GJ[i]=(($96+(c)*2)*mv)
call ybe(i)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã nhận được thú cưỡi mới !",5)
endif
set s=null
return false
endfunction
function Cjx takes integer i returns boolean
local integer h=(che[(256)*(6)+i]-$96)/ 2
local integer c=cAe[(1)*(40)+h]
local integer t=S2I(SubString(I2S(c),0,1))
local integer ts=S2I(SubString(I2S(c),1,3))
if t==1 then
if bJ[i]+bEe[i]<ts then
set GJ[i]=0
return false
endif
elseif t==2 then
if t4e(i)<ts then
set GJ[i]=0
return false
endif
elseif t==3 then
if cce[(i)*(20)+1]<600 then
set GJ[i]=0
return false
endif
elseif t==4 then
if Oi[i]<$C6 or bJ[i]<ts then
set GJ[i]=0
return false
endif
elseif t==5 then
if Ei[i]<25 or bJ[i]<ts then
set GJ[i]=0
return false
endif
elseif t==6 then
if lJ[i]<500 or bJ[i]<ts then
set GJ[i]=0
return false
endif
endif
return false
endfunction
function CJx takes unit u,integer i,integer lv,integer r returns nothing
call T8e(u,50*r*lv,true)
call T9e(u,50*r*lv,true)
call uve(u,50*r*lv,true)
call Tje(u,sx,.05*r*lv)
if lv==2 then
call Tje(u,vx,.1*r)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+7000*2*r
call tCe(i,7000*r,1)
set EA=7000
elseif lv==3 then
call Tje(u,vx,.2*r)
call Tje(u,7614,'d'*r)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+$2EE0*2*r
call tCe(i,$2EE0*r,1)
set EA=$2EE0
elseif lv==4 then
call Tje(u,vx,.3*r)
call Tje(u,7614,$96*r)
call Twe(u,.1*r)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+$4268*2*r
call tCe(i,$4268*r,1)
set EA=$4268
elseif lv==5 then
call Tje(u,vx,.4*r)
call Tje(u,7614,$C8*r)
call Twe(u,.2*r)
call Tje(u,xx,.15*r)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+$55F0*2*r
call tCe(i,$55F0*r,1)
set EA=$55F0
else
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+$7D0*2*r
call tCe(i,$7D0*r,1)
set EA=$7D0
endif
endfunction
function Ckx takes integer i returns nothing
local string s="Loại: mặt nạ
"
set s=s+"Cấp độ: "+I2S(nA[i])+"/5
"
set s=s+"Tài phú: "+"|cff7fff00"+I2S(EA)+"|r

"
if kJ[i]>0 then
if KJ[i]==0 then
set s=s+"|cffadd8e6"+"Biến thân: |r"+GetObjectName(cRe[(kJ[i])*(20)+1])+" (bật)

"
else
set s=s+"|cffadd8e6"+"Biến thân: |r"+GetObjectName(cRe[(kJ[i])*(20)+1])+" (tắt)

"
endif
endif
set s=s+"|cffadd8e6Thuộc tính mặt nạ|r
"+"|cff7fff00"
if nA[i]==1 then
set s=s+"- Tất cả thuộc tính + 50
"
set s=s+"- Kinh nghiệm luyện công + 5%
"
set eC="|cff9370dbMặt Nạ Hiệp Khách|r"
elseif nA[i]==2 then
set s=s+"- Tất cả thuộc tính + 100
"
set s=s+"- Kinh nghiệm luyện công + 10%
"
set s=s+"- Phát huy lực tấn công kỹ năng 10%
"
set eC="|cffffa500Võ Lâm Quán|r"
elseif nA[i]==3 then
set s=s+"- Tất cả thuộc tính + 150
"
set s=s+"- Kinh nghiệm luyện công + 15%
"
set s=s+"- Phát huy lực tấn công kỹ năng 20%
"
set s=s+"- Kháng chí mạng + 100
"
set eC="|cffffa500Tuyệt Thế Quán|r"
elseif nA[i]==4 then
set s=s+"- Tất cả thuộc tính + 200
"
set s=s+"- Kinh nghiệm luyện công + 20%
"
set s=s+"- Phát huy lực tấn công kỹ năng 30%
"
set s=s+"- Kháng chí mạng + 150
"
set s=s+"- Thời gian bị trạng thái ngũ hành - 10%
"
set eC="|cffffff00Quân Lâm Miện|r"
elseif nA[i]==5 then
set s=s+"- Tất cả thuộc tính + 250
"
set s=s+"- Kinh nghiệm luyện công + 25%
"
set s=s+"- Phát huy lực tấn công kỹ năng 40%
"
set s=s+"- Kháng chí mạng + 200
"
set s=s+"- Thời gian bị trạng thái ngũ hành - 20%
"
set s=s+"- Sát thương gây ra, khuếch đại 15%
"
set eC="|cffffff00Thông Thiên Quán|r"
endif
set oC="war3mapImported\\BTNMatna_"+I2S(nA[i])+".blp"
set xC=s
set s=null
endfunction
function CKx takes unit u,integer i,item t returns boolean
local player p=GetOwningPlayer(u)
local string s=BlzGetItemDescription(t)
local integer lv=S2I(SubString(s,0,1))
local integer Tre=S2I(SubString(s,2,4))
local integer w0e=S2I(SubString(s,5,7))
if not tHe(i,Tre*SH,0)then
call Qke(p,"|cffffcc00"+"Không đủ bạc để chế tạo !",5)
set s=null
set p=null
call RemoveItem(t)
return false
endif
if nA[i]!=lv-1 then
call Qke(p,"|cffffcc00"+"Cấp độ chế tạo không đúng !",5)
set s=null
set p=null
call RemoveItem(t)
return false
endif
if cFe[(i)*(5)+lv]<$96 then
call Qke(p,"|cffffcc00"+"Số lượng mảnh mặt nạ không đủ yêu cầu: "+I2S(cFe[(i)*(5)+lv]/ 3)+"/50 !",5)
set s=null
set p=null
call RemoveItem(t)
return false
endif
set Sv=Q0e(u,bj[w0e])
if Sv!=null then
call RemoveItem(Sv)
call tHe(i,Tre*SH,De)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),(u),"origin"))
call Qke(p,"|cffffcc00"+"Bạn đã chế tạo Mặt Nạ mới !",5)
set nA[i]=nA[i]+1
if nA[i]>1 then
call CJx(XJ[i],i,nA[i]-1,-1)
endif
call CJx(XJ[i],i,nA[i],1)
call Ckx(i)
set B4e[(i-1)*(23)+18]=18
set B5e[(i-1)*(23)+18]=eC
set B6e[(i-1)*(23)+18]="
"+xC
if GetLocalPlayer()==p then
call Uge(B3e[18],oC)
endif
else
call Qke(p,"|cffffcc00"+"Yêu cầu mang theo huyền tinh tương ứng để chế tạo !",5)
endif
set s=null
set p=null
call RemoveItem(t)
return false
endfunction
function Clx takes integer i,integer a returns integer
local integer c=-1
if not eox(XJ[i],a-8)then
return 0
else
set c=c+1
endif
if UTe(i)then
return 0
else
set c=c+1
endif
set VA=a*mv*c
return VA
endfunction
function CLx takes unit u,integer i,integer z returns boolean
local player p=GetOwningPlayer(u)
local boolean b=false
if nA[i]==0 then
call Qke(p,"|cffffcc00"+"Bạn không sở hữu mặt nạ !",5)
set p=null
return false
endif
if z=='I0K4' then
if Bhe[(i)*(8)+1]==6 and rJ[i]>=20 then
set rJ[i]=rJ[i]-20
set kJ[i]=1
set b=true
endif
elseif z=='I0K5' then
if Bhe[(i)*(8)+2]==6 and rJ[i]>=20 then
set rJ[i]=rJ[i]-20
set kJ[i]=2
set b=true
endif
elseif z=='I0K6' then
if Bhe[(i)*(8)+3]==2 and rJ[i]>=20 then
set rJ[i]=rJ[i]-20
set kJ[i]=3
set b=true
endif
elseif z=='I0K7' then
if Bhe[(i)*(8)+4]==6 and rJ[i]>=40 then
set rJ[i]=rJ[i]-40
set kJ[i]=4
set b=true
endif
elseif z=='I0K8' then
if Bhe[(i)*(8)+5]==5 and rJ[i]>=40 then
set rJ[i]=rJ[i]-40
set kJ[i]=5
set b=true
endif
elseif z=='I0K9' then
if Bhe[(i)*(8)+7]==8 and rJ[i]>=40 then
set rJ[i]=rJ[i]-40
set kJ[i]=6
set b=true
endif
elseif z=='I0KA' then
if Bhe[(i)*(8)+8]==8 and rJ[i]>=40 then
set rJ[i]=rJ[i]-40
set kJ[i]=7
set b=true
endif
elseif z=='I0KB' then
if Bhe[(i)*(8)+6]==5 and rJ[i]>=60 then
set rJ[i]=rJ[i]-60
set kJ[i]=8
set b=true
endif
elseif z=='I0KC' then
if cIe[(i)*(4)+1]==1 and rJ[i]>=60 then
set rJ[i]=rJ[i]-60
set kJ[i]=9
set b=true
endif
elseif z=='I0KD' then
if cIe[(i)*(4)+2]==1 and rJ[i]>=60 then
set rJ[i]=rJ[i]-60
set kJ[i]=$A
set b=true
endif
elseif z=='I0KE' then
if cIe[(i)*(4)+3]==1 and rJ[i]>=60 then
set rJ[i]=rJ[i]-60
set kJ[i]=$B
set b=true
endif
elseif z=='I0KF' then
if cIe[(i)*(4)+4]==1 and rJ[i]>=60 then
set rJ[i]=rJ[i]-60
set kJ[i]=$C
set b=true
endif
elseif z=='I0KT' then
if Clx(i,$D)>0 then
set kJ[i]=VA
set b=true
endif
elseif z=='I0KM' then
if Clx(i,$E)>0 then
set kJ[i]=VA
set b=true
endif
elseif z=='I0KN' then
if Clx(i,$F)>0 then
set kJ[i]=VA
set b=true
endif
elseif z=='I0KP' then
if Clx(i,16)>0 then
set kJ[i]=VA
set b=true
endif
elseif z=='I0KQ' then
if Clx(i,17)>0 then
set kJ[i]=VA
set b=true
endif
elseif z=='I0KR' then
if Clx(i,18)>0 then
set kJ[i]=VA
set b=true
endif
elseif z=='I0KS' then
if Clx(i,19)>0 then
set kJ[i]=VA
set b=true
endif
elseif z=='I0KG' and kJ[i]!=0 then
if KJ[i]==0 then
set KJ[i]=1
call Qke(p,"|cffff0000"+"Bạn đã tắt ảo hóa mặt nạ nhân vật hiện tại, sau khi Save/Load nhân vật sẽ trở lại ngoại hình vốn có !",$A)
else
set KJ[i]=0
call Qke(p,"|cffffff00"+"Bạn đã bật ảo hóa mặt nạ nhân vật hiện tại, sau khi Save/Load nhân vật sẽ trở thành ngoại hình mới !",$A)
endif
call Ckx(i)
set B4e[(i-1)*(23)+18]=18
set B5e[(i-1)*(23)+18]=eC
set B6e[(i-1)*(23)+18]="
"+xC
if GetLocalPlayer()==p then
call Uge(B3e[18],oC)
endif
endif
if b then
set KJ[i]=0
call Qke(p,"|cffffcc00"+"Bạn đã tiến hành ảo hoá mặt nạ nhân vật, sau khi Save/Load sẽ thay đổi hình ảnh nhân vật !",$A)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),(u),"origin"))
call Ckx(i)
set B4e[(i-1)*(23)+18]=18
set B5e[(i-1)*(23)+18]=eC
set B6e[(i-1)*(23)+18]="
"+xC
if GetLocalPlayer()==p then
call Uge(B3e[18],oC)
endif
endif
call Qke(p,"|cffadd8e6"+"Tiền xu cổ: "+I2S(rJ[i]/ 4),$A)
set p=null
return false
endfunction
function Cmx takes unit u,integer i returns nothing
local player p=GetOwningPlayer(u)
call CJx(XJ[i],i,nA[i],1)
call Ckx(i)
set B4e[(i-1)*(23)+18]=18
set B5e[(i-1)*(23)+18]=eC
set B6e[(i-1)*(23)+18]="
"+xC
if GetLocalPlayer()==p then
call Uge(B3e[18],oC)
endif
set p=null
endfunction
function CMx takes integer i,integer v returns nothing
local integer c=1
loop
exitwhen c>v
call tje(i,$A,GetRandomInt(1,6),1)
set c=c+1
endloop
endfunction
function Cpx takes integer i returns nothing
if S2I(SubString(Zi[Kk[i]],6,7))>=2 then
call UnitAddItemById(OJ[i],bj[5])
call tfe(i,$C8,1)
endif
endfunction
function CPx takes unit u,player p,integer i,item t returns boolean
local string s=BlzGetItemDescription(t)
local integer lv=S2I(SubString(s,0,1))
local integer nd=S2I(SubString(s,1,3))*$C8
local integer ts=bJ[i]+1
local integer ck=S2I(SubString(s,1,3))*$960
local real T0e=1.
if S2I(s)==99999 then
if IA[i]>=5 then
call Qke(p,"|cffffcc00"+"Bạn đã nhận hết các mốc thưởng !",5)
set s=null
return false
endif
if JJ[i]/ 3+XA[i]/ 2>=(IA[i]+1)*sH then
call tHe(i,$7A120,1)
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],'I0BK')
set IA[i]=IA[i]+1
call Qke(p,"|cffffcc00"+"Bạn nhận được phần thưởng tích lũy năng động "+I2S(IA[i]*sH),5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
endif
set s=null
return false
endif
if eox(XJ[i],wi[Ui[i]])then
set T0e=T0e+.08+.02*wi[Ui[i]]
endif
if OA[i]<lv-1 then
call Qke(p,"|cffffcc00"+"Không đúng thứ tự nhận thưởng !",5)
call RemoveItem(t)
set s=null
return false
endif
if OA[i]>lv-1 then
call Qke(p,"|cffffcc00"+"Bạn đã nhận phần thưởng này rồi !",5)
call RemoveItem(t)
set s=null
return false
endif
if XA[i]<nd then
if lv<=4 and Ok[i]>=$AF0*lv then
else
call Qke(p,"|cffffcc00"+"Điểm năng động chưa đủ để nhận thưởng !",5)
call RemoveItem(t)
set s=null
return false
endif
endif
if lv==6 and(JJ[i]/ 3+XA[i]/ 2)<$2710 then
call Qke(p,"|cffffcc00"+"Yêu cầu tích lũy năng động đạt 10000 !",5)
call RemoveItem(t)
set s=null
return false
endif
if lv==7 and(JJ[i]/ 3+XA[i]/ 2)<$7530 then
call Qke(p,"|cffffcc00"+"Yêu cầu tích lũy năng động đạt 30000 !",5)
call RemoveItem(t)
set s=null
return false
endif
if ts>6 then
set ts=6
endif
if lv==7 and MC<='x' then
set bGe[(i)*(20)+5]=1
endif
call Qke(p,"|cffffcc00"+"Bạn đã nhận phần thưởng năng động mốc "+I2S(nd/ 2),5)
set OA[i]=lv
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
if lv==1 then
call tge(i,R2I(T0e*$96*ts),1)
call tHe(i,$C350,1)
call tDe(i,'d',1)
call tfe(i,500,1)
call tFe(i,$2710,1)
call UnitAddItemById(OJ[i],iJ[2])
call UnitAddItemById(OJ[i],'I08U')
call UnitAddItemById(OJ[i],bj[5])
call CMx(i,2)
call tke(i,GetRandomInt(1,$A),300,1)
call Cpx(i)
elseif lv==2 then
call tge(i,R2I(T0e*$C8*ts),1)
call tHe(i,$C350,1)
call tDe(i,'d',1)
call tfe(i,700,1)
call tFe(i,$3A98,1)
call UnitAddItemById(OJ[i],iJ[2])
call UnitAddItemById(OJ[i],'I08U')
call UnitAddItemById(OJ[i],bj[5])
call UnitAddItemById(OJ[i],bj[5])
call CMx(i,3)
call tke(i,GetRandomInt(1,$A),500,1)
call Cpx(i)
elseif lv==3 then
call tge(i,R2I(T0e*$FA*ts),1)
call tHe(i,$186A0,1)
call tDe(i,$96,1)
call tfe(i,900,1)
call tFe(i,$4E20,1)
call UnitAddItemById(OJ[i],iJ[2])
call UnitAddItemById(OJ[i],'I08U')
call UnitAddItemById(OJ[i],bj[6])
call CMx(i,4)
call tke(i,GetRandomInt(1,$A),700,1)
call Cpx(i)
elseif lv==4 then
call tge(i,R2I(T0e*300*ts),1)
call tHe(i,$186A0,1)
call tDe(i,$C8,1)
call tfe(i,$44C,1)
call tFe(i,$61A8,1)
call UnitAddItemById(OJ[i],iJ[2])
call UnitAddItemById(OJ[i],'I08U')
call CMx(i,5)
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BU')
call UnitAddItemById(OJ[i],bj[6])
call UnitAddItemById(OJ[i],bj[6])
call Cpx(i)
elseif lv==5 then
call tge(i,R2I(T0e*350*ts),1)
call tHe(i,$186A0,1)
call tDe(i,$FA,1)
call tfe(i,$514,1)
call tFe(i,$7530,1)
call UnitAddItemById(OJ[i],iJ[2])
call UnitAddItemById(OJ[i],'I08U')
call CMx(i,6)
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BU')
call UnitAddItemById(OJ[i],bj[7])
call Cpx(i)
elseif lv==6 then
call tge(i,R2I(T0e*400*ts),1)
call tHe(i,$30D40,1)
call tDe(i,300,1)
call tfe(i,$5DC,1)
call tFe(i,$9C40,1)
call UnitAddItemById(OJ[i],iJ[2])
call UnitAddItemById(OJ[i],iJ[4])
call UnitAddItemById(OJ[i],'I08U')
call CMx(i,7)
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BU')
call UnitAddItemById(OJ[i],bj[7])
call UnitAddItemById(OJ[i],bj[7])
call Cpx(i)
elseif lv==7 then
call tge(i,R2I(T0e*500*ts),1)
call tHe(i,$493E0,1)
call tDe(i,400,1)
call tfe(i,$7D0,1)
call tFe(i,$C350,1)
call UnitAddItemById(OJ[i],iJ[2])
call UnitAddItemById(OJ[i],iJ[4])
call UnitAddItemById(OJ[i],'I08U')
call CMx(i,8)
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BU')
call UnitAddItemById(OJ[i],bj[8])
call Cpx(i)
endif
call RemoveItem(t)
set s=null
return false
endfunction
function Cqx takes unit u,player p,integer i returns nothing
if gA[i]<5 then
if FA[i]>=60 then
set FA[i]=FA[i]-60
set gA[i]=gA[i]+1
call Qke(p,"|cffffcc00"+"Bạn đã đổi 20 Địa Đồ Thần Bí lấy phần thưởng, số lần đổi còn lại "+I2S(5-gA[i]),5)
call tze(i,1,4,400)
call UnitAddItemById(OJ[i],bj[5])
call UnitAddItemById(OJ[i],bj[5])
call tfe(i,300+'d'*gA[i],1)
call tHe(i,$4E20+$2710*gA[i],1)
call tDe(i,'d'+50*gA[i],1)
call tFe(i,7000+$BB8*gA[i],1)
call tke(i,8,400+$C8*gA[i],1)
call UnitAddItemById(OJ[i],'I08U')
if gA[i]==5 then
call UnitAddItemById(OJ[i],'I090')
call Qke(p,"|cffffcc00"+"Đổi 5 lần Địa Đồ Thần Bí nhận được 1 Hạt Giống Cây Bát Nhã, vật phẩm được chuyển về rương !",5)
endif
else
call Qke(p,"|cffffcc00"+"Không đủ yêu cầu !",5)
endif
else
call Qke(p,"|cffffcc00"+"Mỗi trận chỉ có thể đổi tối đa 5 lần !",5)
endif
endfunction
function CQx takes unit u,player p,integer i,item t returns boolean
local string s=BlzGetItemDescription(t)
local integer lv=S2I(SubString(s,0,1))
if RA[i]<lv-1 then
call Qke(p,"|cffffcc00"+"Không đúng thứ tự nhận thưởng !",5)
call RemoveItem(t)
set s=null
return false
endif
if RA[i]>lv-1 then
call Qke(p,"|cffffcc00"+"Bạn đã nhận phần thưởng này rồi !",5)
call RemoveItem(t)
set s=null
return false
endif
if bJ[i]<lv then
call Qke(p,"|cffffcc00"+"Chưa đáp ứng điều kiện nhận thưởng !",5)
call RemoveItem(t)
set s=null
return false
endif
call Qke(p,"|cffffcc00"+"Bạn đã nhận phần thưởng trùng sinh "+I2S(lv),5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
set RA[i]=lv
if lv==1 then
call tHe(i,2*SH,1)
call tFe(i,5*sH,1)
call t2e(i,'d')
call tfe(i,2*K1,1)
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BJ')
elseif lv==2 then
call tHe(i,3*SH,1)
call tFe(i,7*sH,1)
call t2e(i,'d')
call tfe(i,3*K1,1)
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BJ')
elseif lv==3 then
call tHe(i,4*SH,1)
call tFe(i,9*sH,1)
call t2e(i,'d')
call tfe(i,4*K1,1)
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BJ')
call UnitAddItemById(OJ[i],'I0BJ')
elseif lv==4 then
call tHe(i,5*SH,1)
call tFe(i,$B*sH,1)
call t2e(i,'d')
call tfe(i,6*K1,1)
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
elseif lv==5 then
call tHe(i,6*SH,1)
call tFe(i,$D*sH,1)
call t2e(i,'d')
call tfe(i,8*K1,1)
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
elseif lv==6 then
call tHe(i,7*SH,1)
call tFe(i,$F*sH,1)
call t2e(i,$96)
call tfe(i,$A*K1,1)
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
elseif lv==7 then
call tHe(i,8*SH,1)
call tFe(i,20*sH,1)
call t2e(i,$96)
call tfe(i,$C*K1,1)
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
elseif lv==8 then
call tHe(i,9*SH,1)
call tFe(i,25*sH,1)
call t2e(i,$96)
call tfe(i,$E*K1,1)
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
elseif lv==9 then
call tHe(i,$A*SH,1)
call tFe(i,30*sH,1)
call t2e(i,$96)
call tfe(i,16*K1,1)
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
call UnitAddItemById(OJ[i],'I0BK')
endif
call RemoveItem(t)
set s=null
return false
endfunction
function Csx takes player p,integer i,integer z,item t returns boolean
local string s=BlzGetItemDescription(t)
call RemoveItem(t)
if z==1 then
if bJ[i]<Bpe[(1)*(6)+i]then
set s=null
return false
endif
if Bpe[(1)*(6)+i]>=6 then
set s=null
return false
endif
if not eox(XJ[i],Bpe[(1)*(6)+i]+1)then
set s=null
return false
endif
if eix()==0 then
set s=null
return false
endif
set Bpe[(1)*(6)+i]=mv
if Bpe[(1)*(6)+i]==1 then
call TZe(XJ[i],$5DC)
else
call TZe(XJ[i],500)
endif
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+$640
call tCe(i,800,1)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
call Qke(p,"|cffffcc00"+"Ngoại trang tăng đến cấp "+I2S(Bpe[(1)*(6)+i]),5)
else
if not eox(XJ[i],S2I(s))then
set s=null
return false
endif
if eax()==0 then
set s=null
return false
endif
if kJ[i]!=0 and KJ[i]==0 then
set s=null
return false
endif
call UnitRemoveAbility(XJ[i],cOe[(zb[i]+mv)*($B)+Bpe[(2)*(6)+i]/ 2])
set Bpe[(2)*(6)+i]=S2I(s)*(Mv-8)
call UnitAddAbility(XJ[i],cOe[(zb[i]+mv)*($B)+Bpe[(2)*(6)+i]/ 2*mv])
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
call Qke(p,"|cffffcc00"+"Thay đổi ngoại trang !",5)
endif
set s=null
return false
endfunction
function CSx takes player p,integer i,item t returns boolean
local string s=BlzGetItemDescription(t)
local integer z=S2I(SubString(s,0,1))
local integer c=S2I(SubString(s,1,2))
call RemoveItem(t)
if not eox(XJ[i],c)then
set s=null
return false
endif
if UTe(i)then
set s=null
return false
endif
if kJ[i]!=0 and KJ[i]==0 then
set s=null
return false
endif
if Bpe[(3)*(6)+i]!=0 then
call UnitRemoveAbility(XJ[i],Bpe[(3)*(6)+i])
endif
set Bpe[(4)*(6)+i]=S2I(s)
set Bpe[(3)*(6)+i]=Bye[(i)*(4)+Tne(z)]
call UnitAddAbility(XJ[i],Bpe[(3)*(6)+i])
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
set s=null
return false
endfunction
function Ctx takes player p,integer i,item t returns boolean
local string s=BlzGetItemDescription(t)
local integer z=S2I(SubString(s,0,1))
local integer c=S2I(SubString(s,1,3))
call RemoveItem(t)
if z==8 then
if not eox(XJ[i],5)then
set s=null
return false
endif
if S2I(SubString(Zi[i-1],1,2))==0 then
set s=null
return false
endif
set eB[i]=0
set vB[i]="war3mapImported\\DHCN_"+I2S(Bne[(i)*(5)+5])+".mdl"
call Qre(Zb[i])
set Zb[i]=AddSpecialEffect(vB[i],GetUnitX(XJ[i]),GetUnitY(XJ[i]))
set WJ[i]=true
else
if not eox(XJ[i],c)then
set s=null
return false
endif
if UTe(i)then
set s=null
return false
endif
if BPe[(1)*(6)+i]!=0 then
call UnitRemoveAbility(XJ[i],wj[BPe[(1)*(6)+i]])
endif
set BPe[(1)*(6)+i]=z*mv*(Mv-9)
call UnitAddAbility(XJ[i],wj[BPe[(1)*(6)+i]])
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
set eB[i]=0
if z==7 then
set vB[i]="war3mapImported\\DHV_"+I2S(z)+"_"+I2S(ub[i])+".mdl"
else
set vB[i]="war3mapImported\\DHV_"+I2S(z)+".mdl"
endif
call Qre(Zb[i])
set Zb[i]=AddSpecialEffect(vB[i],GetUnitX(XJ[i]),GetUnitY(XJ[i]))
set WJ[i]=true
endif
set s=null
return false
endfunction
function CTx takes integer id,string s1,integer Cax,integer Cux,integer CUx,integer tAe,integer Tre,integer dv returns nothing
call SaveStr(AA,id,BA,s1)
call SaveInteger(AA,id,4605,Cax)
call SaveInteger(AA,id,6658,Cux)
call SaveInteger(AA,id,539,CUx)
call SaveInteger(AA,id,cA,tAe*sH)
call SaveInteger(AA,id,5385,Tre*$3E8)
call SaveInteger(AA,id,CA,dv)
endfunction
function Cwx takes nothing returns nothing
call CTx('d',"Chào mừng bạn đến với Kiếm Vũ Cửu Thiên, trước tiên hãy đến gặp Dã Tẩu ở Ba Lăng Huyện để bắt đầu chuỗi nhiệm vụ tân thủ",'n01D',0,0,83,20,50)
call CTx('e',"Đánh 10 Hồ Ly ở Tây Tháp Lâm",'n01D','n000',$A,$F4,20,60)
call CTx('f',"Đánh 20 Phạm Giới Tăng Nhân ở Tây Tháp Lâm",'n01D','n002',20,404,20,70)
call CTx('g',"Đánh 40 Cá Sấu ở Hoài Thủy Sa Châu",'n01D','n003',40,564,20,80)
call CTx('h',"Tới Dương Châu tìm Vương Chi Vọng",'n01E',0,0,724,30,90)
call CTx('i',"Đánh 50 Đà Thủ Tào Bang ở Phong Lăng Độ",'n01E','n00B',50,422,30,'d')
call CTx('j',"Đánh 50 Hổ Kỵ Hoành Sơn ở Phong Lăng Độ",'n01E','n00A',50,462,30,'n')
call CTx('k',"Tìm Hoa Sơn Lão Tẩu ở Hoa Sơn",'n00V',0,0,502,35,'x')
call CTx('l',"Đánh 100 Dị Nhân Kiếm Khách ở Hoa Sơn",'n00V','n00E','d',542,35,$82)
call CTx('m',"Tới Mông Cổ Vương Đỉnh tìm Thiết Mộc Chân",'n01F',0,0,582,40,$8C)
call CTx('n',"Đánh 100 Võ Sĩ Mông Cổ ở Mông Cổ Vương Đỉnh",'n01F','n006','d',622,40,$96)
call CTx('o',"Trở về gặp Dã Tẩu ở Ba Lăng Huyện",'n01D',0,0,662,45,$A0)
call CTx('p',"Đánh 100 Hàn Thương ở Trường Bạch Sơn",'n01D','n00J','d',346,45,$AA)
call CTx('q',"Tới Đôn Hoàng Cổ Thành tìm Yến Tiểu Lâu",'n01G',0,0,356,50,$B4)
call CTx('r',"Đánh 200 Hoang Nguyên Đao Khách ở Đôn Hoàng Cổ Thành",'n01G','n00F',$C8,366,50,$BE)
call CTx('s',"Trở về gặp Dã Tẩu hoàn thành nhiệm vụ tân thủ",'n01D',0,0,366,50,$C8)
call CTx('t',"Bạn đã hoàn thành nhiệm vụ tân thủ !",0,0,0,0,0,0)
endfunction
function CWx takes unit u,integer i returns nothing
local player p=GetOwningPlayer(u)
set bce[(i-1)*($C)+1]="Nhiệm vụ tân thủ"
if NA[i]>='t' then
set bBe[(i-1)*($C)+1]=2
set bCe[(i-1)*($C)+1]="|cff6d6d6d"+"
Đã hoàn thành tất cả nhiệm vụ tân thủ !"
set vC="war3mapImported\\BTNFrameUI_QuestButtons3.blp"
else
set bBe[(i-1)*($C)+1]=1
set uv="
"+"|cffffcc00"+"[ Nội dung ]:|r
"+"|cffadd8e6"+LoadStr(AA,NA[i],BA)+"|r"
set uv=uv+"|cffffcc00"+"

[ NPC ]:|r "+"|cffffff00"+GetObjectName((LoadInteger(AA,(NA[i]),(4605))))+"|r"
set bCe[(i-1)*($C)+1]=uv
set vC="war3mapImported\\BTNFrameUI_QuestButtons2.blp"
endif
if GetLocalPlayer()==p then
call Uge(bbe[1],vC)
endif
set p=null
endfunction
function Cyx takes unit u,player p,integer i,integer dv,integer tAe,integer Tre returns nothing
call tHe(i,Tre,1)
call tDe(i,dv,1)
call tRe(u,tAe)
call Qre(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl",u,"origin"))
call Qke(p,"|cffffcc00"+"Hoàn thành nhiệm vụ tân thủ "+I2S(NA[i]-99)+", nhận được phần thưởng "+I2S(dv)+" uy danh, "+I2S(tAe)+" kinh nghiệm, "+I2S(Tre)+" bạc.",5)
set NA[i]=NA[i]+1
call CWx(XJ[i],i)
set bA[i]=0
endfunction
function CYx takes unit u,player p,integer i,integer Cax returns nothing
local integer c=0
if Cax==LoadInteger(AA,NA[i],4605)then
if LoadInteger(AA,NA[i],6658)>0 then
if bA[i]>=LoadInteger(AA,NA[i],539)then
call Cyx(u,p,i,(LoadInteger(AA,(NA[i]),(CA))),(LoadInteger(AA,(NA[i]),(cA))),(LoadInteger(AA,(NA[i]),(5385))))
endif
else
call Cyx(u,p,i,(LoadInteger(AA,(NA[i]),(CA))),(LoadInteger(AA,(NA[i]),(cA))),(LoadInteger(AA,(NA[i]),(5385))))
endif
endif
endfunction
function Czx takes unit u,integer i returns nothing
local player p=GetOwningPlayer(u)
set bce[(i-1)*($C)+2]="Nhiệm vụ thương hội"
set uv="
"+"|cffadd8e6"+"- Tích lũy thương hội: "+I2S(cce[(i)*(20)+1])
set uv=uv+"
- Nhiệm vụ đã hoàn thành: "+I2S(DA[i]+1)+"/30|r"
if dA[i]==0 then
set bBe[(i-1)*($C)+2]=2
set uv=uv+"|cff6d6d6d"+"

Chưa tiếp nhận nhiệm vụ !"
set vC="war3mapImported\\BTNFrameUI_QuestButtons1.blp"
else
set bBe[(i-1)*($C)+2]=1
set uv=uv+"|cffffcc00"+"

[ Nội dung ]:|r
Tìm vật phẩm "+"|cffadd8e6"+GetObjectName(cj[dA[i]])+"|r giao cho Chủ Thương Hội|r"
set vC="war3mapImported\\BTNFrameUI_QuestButtons2.blp"
endif
set bCe[(i-1)*($C)+2]=uv
if GetLocalPlayer()==p then
call Uge(bbe[2],vC)
endif
set p=null
endfunction
function CZx takes integer tl returns integer
local integer rd=GetRandomInt(1,4)
if rd==1 then
return GetRandomInt(50,55)
else
if tl<=50 then
return GetRandomInt(1,20)
elseif tl<='d' then
return GetRandomInt(1,30)
elseif tl<=$96 then
return GetRandomInt(1,40)
else
return GetRandomInt(1,43)
endif
endif
endfunction
function C_x takes player p,integer i returns nothing
local integer r=R2I(cce[(i)*(20)+1]/ 50)
local integer Tre=0
local integer dv=0
local integer Tie=50+DA[i]*5
local integer t0e=0
local integer nd=2
local real T0e=1.
if eox(XJ[i],wi[Ui[i]])then
set T0e=T0e+.12+.03*wi[Ui[i]]
endif
if r>16 then
set r=16
endif
set Tre=$2710+$3E8*r
set dv=$A+r
set t0e=30+r*$A
if DA[i]==$A then
set Tre=Tre+$7530
set dv=dv+50
set t0e=t0e+300
call UnitAddItemById(OJ[i],'I0G9')
call UnitAddItemById(OJ[i],bj[5])
call UnitAddItemById(OJ[i],'I05Z')
call UnitAddItemById(OJ[i],'I08U')
set nd=nd+5
call t2e(i,$F)
call Qke(p,"|cffffcc00"+"Hoàn thành nhiệm vụ thương hội mốc 10 trong trận, nhận được thêm phần thưởng và 1 Tàng Bảo Đồ",5)
elseif DA[i]==20 then
set Tre=Tre+$EA60
set dv=dv+'d'
set t0e=t0e+400
set nd=nd+5
call t2e(i,$F)
call UnitAddItemById(OJ[i],'I0G9')
call UnitAddItemById(OJ[i],bj[5])
call UnitAddItemById(OJ[i],bj[5])
call UnitAddItemById(OJ[i],'I05Z')
call UnitAddItemById(OJ[i],'I08U')
call Qke(p,"|cffffcc00"+"Hoàn thành nhiệm vụ thương hội mốc 20 trong trận, nhận được thêm phần thưởng và 1 Tàng Bảo Đồ",5)
elseif DA[i]==30 then
if cce[(i)*(20)+1]>=$C8 then
call UnitAddItemById(OJ[i],'I09X')
endif
call UnitAddItemById(OJ[i],'I0HO')
set Tre=Tre+90000
set dv=dv+$C8
set t0e=t0e+500
set nd=nd+5
call t2e(i,$F)
call UnitAddItemById(OJ[i],'I0G9')
call UnitAddItemById(OJ[i],bj[6])
call UnitAddItemById(OJ[i],'I05Z')
call UnitAddItemById(OJ[i],'I08U')
call Qke(p,"|cffffcc00"+"Hoàn thành nhiệm vụ thương hội mốc 30 trong trận, nhận được thêm phần thưởng và 1 Tàng Bảo Đồ",5)
endif
if GetRandomReal(0,'d')<=$A then
call UnitAddItemById(OJ[i],'I0BJ')
call QKe(rj[i]+"|cffffcc00"+" hoàn thành nhiệm vụ thương hội may mắn nhận được Tiểu Du Long Lệnh, xin chúc mừng !",5)
endif
set Tre=R2I(Tre*T0e)
set dv=R2I(dv*T0e)
set t0e=R2I(t0e*T0e)
set Tie=R2I(Tie*T0e)
call tze(i,1,3,80)
call tye(i,nd)
call tje(i,3,GetRandomInt(1,6),1)
call tfe(i,t0e,1)
call tHe(i,Tre,1)
call tDe(i,dv,1)
call tke(i,9,Tie,1)
call Qke(p,"|cffffcc00"+"Bạn đã hoàn thành nhiệm vụ thương hội và nhận được phần thưởng "+(I2S((t0e))+" "+("NHHT"))+", "+(I2S((Tre))+" "+("bạc"))+", "+(I2S((dv))+" "+("uy danh"))+", "+(I2S((Tie))+" "+("danh vọng phù")),5)
call Czx(XJ[i],i)
if cce[(i)*(20)+1]==50 then
if GA[i]<1 then
set GA[i]=1
call tfe(i,$BB8,1)
call t2e(i,'d')
call UnitAddItemById(OJ[i],bj[7])
call Qke(p,"|cffffcc00"+"Nhận thưởng mốc 50 nhiệm vụ thương hội được 1 Huyền Tinh cấp 7, 3000 NHHT",5)
endif
elseif cce[(i)*(20)+1]=='d' then
if GA[i]<2 then
set GA[i]=2
call tfe(i,$FA0,1)
call t2e(i,'d')
call UnitAddItemById(OJ[i],bj[7])
call UnitAddItemById(OJ[i],bj[7])
call Qke(p,"|cffffcc00"+"Nhận thưởng mốc 100 nhiệm vụ thương hội được 2 Huyền Tinh cấp 7, 4000 NHHT",5)
endif
elseif cce[(i)*(20)+1]==$96 then
if GA[i]<3 then
set GA[i]=3
call tfe(i,5000,1)
call t2e(i,'d')
call UnitAddItemById(OJ[i],bj[8])
call Qke(p,"|cffffcc00"+"Nhận thưởng mốc 150 nhiệm vụ thương hội được 1 Huyền Tinh cấp 8, 5000 NHHT",5)
endif
elseif cce[(i)*(20)+1]==$C8 then
if GA[i]<4 then
set GA[i]=4
call tfe(i,6000,1)
call t2e(i,'d')
call UnitAddItemById(OJ[i],bj[8])
call UnitAddItemById(OJ[i],bj[8])
call Qke(p,"|cffffcc00"+"Nhận thưởng mốc 200 nhiệm vụ thương hội được 2 Huyền Tinh cấp 8, 6000 NHHT",5)
endif
elseif cce[(i)*(20)+1]==$FA then
if GA[i]<5 then
set GA[i]=5
call tfe(i,8000,1)
call t2e(i,'d')
call UnitAddItemById(OJ[i],bj[9])
call Qke(p,"|cffffcc00"+"Nhận thưởng mốc 250 nhiệm vụ thương hội được 1 Huyền Tinh cấp 9, 8000 NHHT",5)
endif
elseif cce[(i)*(20)+1]==300 then
if GA[i]<6 then
set GA[i]=6
call tfe(i,$2710,1)
call t2e(i,'d')
call UnitAddItemById(OJ[i],bj[9])
call UnitAddItemById(OJ[i],bj[9])
call Qke(p,"|cffffcc00"+"Nhận thưởng mốc 300 nhiệm vụ thương hội được 2 Huyền Tinh cấp 9, 10000 NHHT",5)
endif
elseif cce[(i)*(20)+1]==350 then
if GA[i]<7 then
set GA[i]=7
call tfe(i,$2710,1)
call t2e(i,'d')
call UnitAddItemById(OJ[i],bj[$A])
call Qke(p,"|cffffcc00"+"Nhận thưởng mốc 350 nhiệm vụ thương hội được 1 Huyền Tinh cấp 10, 10000 NHHT",5)
endif
elseif cce[(i)*(20)+1]==400 then
if GA[i]<8 then
set GA[i]=8
call tfe(i,$2710,1)
call t2e(i,'d')
call UnitAddItemById(OJ[i],bj[$A])
call Qke(p,"|cffffcc00"+"Nhận thưởng mốc 400 nhiệm vụ thương hội được 1 Huyền Tinh cấp 10, 10000 NHHT",5)
endif
elseif cce[(i)*(20)+1]==500 then
if GA[i]<9 then
set GA[i]=9
call tfe(i,$2710,1)
call t2e(i,'d')
call UnitAddItemById(OJ[i],bj[$A])
call Qke(p,"|cffffcc00"+"Nhận thưởng mốc 450 nhiệm vụ thương hội được 1 Huyền Tinh cấp 10, 10000 NHHT",5)
endif
elseif cce[(i)*(20)+1]==600 then
if GA[i]<$A then
set GA[i]=$A
call tfe(i,$2710,1)
call t2e(i,'d')
call UnitAddItemById(OJ[i],bj[$A])
call Qke(p,"|cffffcc00"+"Nhận thưởng mốc 500 nhiệm vụ thương hội được 1 Huyền Tinh cấp 10, 10000 NHHT",5)
endif
elseif cce[(i)*(20)+1]==700 then
if GA[i]<$B then
set GA[i]=$B
call tfe(i,$3A98,1)
call t2e(i,'d')
call UnitAddItemById(OJ[i],bj[$B])
call Qke(p,"|cffffcc00"+"Nhận thưởng mốc 700 nhiệm vụ thương hội được 1 Huyền Tinh cấp 11, 15000 NHHT",5)
endif
elseif cce[(i)*(20)+1]==800 then
if GA[i]<$C then
set GA[i]=$C
call tfe(i,$4E20,1)
call t2e(i,$C8)
call UnitAddItemById(OJ[i],bj[$B])
call UnitAddItemById(OJ[i],bj[$B])
call Qke(p,"|cffffcc00"+"Nhận thưởng mốc 800 nhiệm vụ thương hội được 2 Huyền Tinh cấp 11, 20000 NHHT",5)
endif
endif
endfunction
function C0x takes unit u,player p,integer i returns nothing
if dA[i]==0 then
if DA[i]<30 then
set dA[i]=CZx(cce[(i)*(20)+1])
call Qke(p,"|cffffcc00"+"Tiếp nhận nhiệm vụ thương hội, tìm vật phẩm "+"|cff7fff00"+GetObjectName(cj[dA[i]]),5)
call Czx(XJ[i],i)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
else
call Qke(p,"|cffffcc00"+"Bạn đã hoàn thành toàn bộ nhiệm vụ trong trận !",5)
endif
else
set Sv=Q0e(u,cj[dA[i]])
if Sv!=null then
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
set dA[i]=0
set DA[i]=DA[i]+1
call tGe(i,1,1)
call RemoveItem(Sv)
call C_x(p,i)
else
call Qke(p,"|cffffcc00"+"Bạn vẫn chưa tìm được vật phẩm yêu cầu !",5)
endif
endif
endfunction
function C1x takes player p,integer i returns nothing
if dA[i]!=0 then
set dA[i]=0
if fA[i]>0 then
set fA[i]=fA[i]-1
call Qke(p,"|cffffcc00"+"Bạn đã hủy nhiệm vụ thương hội, số lần hủy còn lại "+I2S(fA[i]),5)
else
if cce[(i)*(20)+1]>0 then
call tGe(i,1,De)
endif
call Qke(p,"|cffffcc00"+"Bạn đã hủy nhiệm vụ thương hội, điểm tích lũy nhiệm vụ giảm đi 1",5)
endif
else
call Qke(p,"|cffffcc00"+"Bạn vẫn chưa nhận nhiệm vụ !",5)
endif
endfunction
function C2x takes player p,integer i returns nothing
if Bqe[(i)*(2)+1]==0 then
set Bqe[(i)*(2)+1]=1
call Qke(p,"|cffffcc00"+"Bạn đã nhận nhiệm vụ Xà Huyệt Thoát Hiểm, tiêu diệt 200 Mãng Xà ở Thần Long Đảo !",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(XJ[i]),"origin"))
elseif Bqe[(i)*(2)+1]==1 then
if Bqe[(i)*(2)+2]<$C8 then
call Qke(p,"|cffffcc00"+"Vẫn chưa tiêu diệt đủ số Mãng Xà yêu cầu: "+I2S(Bqe[(i)*(2)+2])+"/200",5)
else
set Bqe[(i)*(2)+2]=0
call Qke(p,"|cffffcc00"+"Hoàn thành nhiệm vụ Xà Huyệt Thoát Hiểm và nhận được phần thưởng !",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(XJ[i]),"origin"))
set Bqe[(i)*(2)+1]=2
call tHe(i,SH,1)
call tfe(i,300,1)
call tge(i,$C8*(bJ[i]+1),1)
call tje(i,30,GetRandomInt(1,6),1)
call the(i,300,1)
call tDe(i,$C8,1)
call UnitAddItemById(OJ[i],bj[4])
call UnitAddItemById(OJ[i],bj[4])
call UnitAddItemById(OJ[i],bj[4])
endif
else
call Qke(p,"|cffffcc00"+"Mỗi trận chỉ có thể hoàn thành một lần nhiệm vụ !",5)
endif
endfunction
function C3x takes nothing returns boolean
local unit u=GetBuyingUnit()
local unit v=GetSellingUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
call CYx(u,p,i,GetUnitTypeId(v))
call RemoveItem(GetSoldItem())
set u=null
set v=null
set p=null
return false
endfunction
function C4x takes nothing returns boolean
return GetItemTypeId(GetSoldItem())=='I06H' and C3x()
endfunction
function C5x takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddCondition(t,Filter(function C4x))
set t=null
endfunction
function C6x takes unit u,real d,unit v returns nothing
call yle(u,v,'d',1.)
call uee(u,v,false,d,d,THe(u))
endfunction
function C7x takes unit u,real d returns nothing
local real x=GetUnitX(u)
local real y=GetUnitY(u)
call A5x(u,d,d,80,x,y,0)
call A5x(u,d,d,80,x,y,40)
call A5x(u,d,d,80,x,y,80)
call A5x(u,d,d,80,x,y,'x')
call A5x(u,d,d,80,x,y,$A0)
call A5x(u,d,d,80,x,y,$C8)
call A5x(u,d,d,80,x,y,$F0)
call A5x(u,d,d,80,x,y,280)
call A5x(u,d,d,80,x,y,320)
endfunction
function C8x takes unit u,real d,real a returns nothing
call OEx(u,d,d,a)
call OEx(u,d,d,a+30)
call OEx(u,d,d,a-30)
call OEx(u,d,d,a+60)
call OEx(u,d,d,a-60)
endfunction
function C9x takes unit u,real d,unit v returns nothing
local unit n=null
local real x=GetUnitX(v)
local real y=GetUnitY(v)
call GroupEnumUnitsInRange(sv,x,y,$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yHe(u,n,'d',2.)
call uee(u,n,false,d,d,THe(u))
endif
call GroupRemoveUnit(sv,n)
endloop
endfunction
function dvx takes unit u returns nothing
local unit n=null
local real x=GetUnitX(u)
local real y=GetUnitY(u)
call GroupEnumUnitsInRange(sv,x,y,$3E8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitAlly(n,zv)and not spe(n)and not tOe(n)then
call SetUnitLifePercentBJ(n,GetUnitLifePercent(n)+15.)
endif
call GroupRemoveUnit(sv,n)
endloop
endfunction
function dex takes unit u,real d returns nothing
local unit n=null
local real x=GetUnitX(u)
local real y=GetUnitY(u)
call GroupEnumUnitsInRange(sv,x,y,$7D0,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call A0x(u,d,d,65,GetUnitX(n),GetUnitY(n))
endif
call GroupRemoveUnit(sv,n)
endloop
endfunction
function dxx takes unit u,integer i returns nothing
local player p=GetOwningPlayer(u)
set bce[(i-1)*($C)+3]="Nhiệm vụ truy nã"
set uv="|cffadd8e6"+"
Nhiệm vụ đã hoàn thành: "+I2S(jA[i])+"/20|r"
if HA[i]==0 then
set bBe[(i-1)*($C)+3]=2
set uv=uv+"|cff6d6d6d"+"

Chưa tiếp nhận nhiệm vụ !"
set vC="war3mapImported\\BTNFrameUI_QuestButtons1.blp"
else
if not hA[i]then
set bBe[(i-1)*($C)+3]=1
set uv=uv+"|cffffcc00"+"

[ Nội dung ]:|r
 Tiêu diệt hải tặc "+"|cffff0000"+GetObjectName(HA[i])+"|r"
set vC="war3mapImported\\BTNFrameUI_QuestButtons2.blp"
endif
endif
set bCe[(i-1)*($C)+3]=uv
if GetLocalPlayer()==p then
call Uge(bbe[3],vC)
endif
set p=null
endfunction
function dox takes unit u,player p,integer i,integer id returns boolean
local real T0e=1.
if id=='I0G7' then
if HA[i]!=0 then
set HA[i]=0
call Qke(p,"|cffffcc00"+"Bạn đã hủy nhiệm vụ truy nã hiện tại !",5)
else
call Qke(p,"|cffffcc00"+"Bạn vẫn chưa nhận nhiệm vụ !",5)
endif
return false
endif
if HA[i]==0 then
if jA[i]<20 then
if id=='I091' then
set HA[i]='n05Z'
elseif id=='I092' then
set HA[i]='n060'
elseif id=='I093' then
set HA[i]='n061'
elseif id=='I094' then
set HA[i]='n062'
endif
call Qke(p,"|cffffcc00"+"[ Truy Nã ] tiếp nhận nhiệm vụ, truy nã hải tặc "+GetObjectName(HA[i]),5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set jA[i]=jA[i]+1
call dxx(XJ[i],i)
else
call Qke(p,"|cffffcc00"+"Mỗi trận chỉ có thể nhận 20 lần nhiệm vụ truy nã !",5)
endif
else
if eox(XJ[i],wi[Ui[i]])then
set T0e=T0e+.12+.03*wi[Ui[i]]
endif
if hA[i]then
if HA[i]=='n05Z' and id=='I091' then
call Qke(p,"|cffffcc00"+"[ Truy Nã ] hoàn thành nhiệm vụ và nhận được phần thưởng !",5)
set bhe[(i)*($A)+4]=bhe[(i)*($A)+4]+2
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set hA[i]=false
set HA[i]=0
if jA[i]==20 then
call UnitAddItemById(OJ[i],'I0HO')
endif
set kA[i]=kA[i]+$C
call tze(i,1,2,80)
call tye(i,3)
call UnitAddItemById(OJ[i],bj[4])
if GetRandomReal(0,'d')<=$A then
call UnitAddItemById(OJ[i],'I0BJ')
call QKe(rj[i]+"|cffffcc00"+" hoàn thành nhiệm vụ truy nã may mắn nhận được Tiểu Du Long Lệnh, xin chúc mừng !",5)
endif
call tje(i,6,GetRandomInt(1,6),1)
call tge(i,R2I(T0e*'d'),1)
call tFe(i,$FA0,1)
call tDe(i,30,1)
call tHe(i,$4E20,1)
call tke(i,6,300,1)
call Toe(p,$4E20,30,$FA0,0,300,6)
call dxx(XJ[i],i)
elseif HA[i]=='n060' and id=='I092' then
call Qke(p,"|cffffcc00"+"[ Truy Nã ] hoàn thành nhiệm vụ và nhận được phần thưởng !",5)
set bhe[(i)*($A)+4]=bhe[(i)*($A)+4]+2
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set hA[i]=false
set HA[i]=0
if jA[i]==20 then
call UnitAddItemById(OJ[i],'I0HO')
endif
if GetRandomReal(0,'d')<=$C then
call UnitAddItemById(OJ[i],'I0BJ')
call QKe(rj[i]+"|cffffcc00"+" hoàn thành nhiệm vụ truy nã may mắn nhận được Tiểu Du Long Lệnh, xin chúc mừng !",5)
endif
set kA[i]=kA[i]+$E
call tze(i,1,2,80)
call tye(i,3)
call UnitAddItemById(OJ[i],bj[4])
call UnitAddItemById(OJ[i],bj[4])
call tje(i,7,GetRandomInt(1,6),1)
call tge(i,R2I(T0e*$C8),1)
call tFe(i,5000,1)
call tDe(i,35,1)
call tHe(i,$61A8,1)
call tke(i,6,500,1)
call Toe(p,$61A8,35,5000,0,500,6)
call dxx(XJ[i],i)
elseif HA[i]=='n061' and id=='I093' then
call Qke(p,"|cffffcc00"+"[ Truy Nã ] hoàn thành nhiệm vụ và nhận được phần thưởng !",5)
set bhe[(i)*($A)+4]=bhe[(i)*($A)+4]+2
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set hA[i]=false
set HA[i]=0
if jA[i]==20 then
call UnitAddItemById(OJ[i],'I0HO')
endif
if GetRandomReal(0,'d')<=$E then
call UnitAddItemById(OJ[i],'I0BJ')
call QKe(rj[i]+"|cffffcc00"+" hoàn thành nhiệm vụ truy nã may mắn nhận được Tiểu Du Long Lệnh, xin chúc mừng !",5)
endif
set kA[i]=kA[i]+16
call tze(i,1,2,80)
call tye(i,3)
call UnitAddItemById(OJ[i],bj[5])
call tje(i,8,GetRandomInt(1,6),1)
call tge(i,R2I(T0e*300),1)
call tFe(i,6000,1)
call tDe(i,40,1)
call tHe(i,$7530,1)
call tke(i,6,700,1)
call Toe(p,$7530,40,6000,0,700,6)
call dxx(XJ[i],i)
elseif HA[i]=='n062' and id=='I094' then
call Qke(p,"|cffffcc00"+"[ Truy Nã ] hoàn thành nhiệm vụ và nhận được phần thưởng !",5)
set bhe[(i)*($A)+4]=bhe[(i)*($A)+4]+2
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(u),"origin"))
set hA[i]=false
set HA[i]=0
if jA[i]==20 then
call UnitAddItemById(OJ[i],'I0HO')
endif
if GetRandomReal(0,'d')<=16 then
call UnitAddItemById(OJ[i],'I0BJ')
call QKe(rj[i]+"|cffffcc00"+" hoàn thành nhiệm vụ truy nã may mắn nhận được Tiểu Du Long Lệnh, xin chúc mừng !",5)
endif
set kA[i]=kA[i]+18
call tze(i,1,2,80)
call tye(i,3)
call UnitAddItemById(OJ[i],bj[5])
call UnitAddItemById(OJ[i],bj[5])
call tje(i,9,GetRandomInt(1,6),1)
call tge(i,R2I(T0e*400),1)
call tFe(i,7000,1)
call tDe(i,45,1)
call tHe(i,$88B8,1)
call tke(i,6,900,1)
call Toe(p,$88B8,45,7000,0,900,6)
call dxx(XJ[i],i)
endif
else
call Qke(p,"|cffffcc00"+"Bạn vẫn chưa hoàn thành nhiệm vụ !",5)
endif
endif
return false
endfunction
function drx takes player p,integer i returns nothing
if JA[i]<20 then
if kA[i]>=600 then
set kA[i]=kA[i]-600
set JA[i]=JA[i]+2
call Qke(p,"|cffffcc00"+"Bạn đã dùng 300 Danh Bổ Lệnh đổi Tẩy Tủy Kinh và nhận được 30 điểm tiềm năng !",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"),(XJ[i]),"origin"))
set boe[i]=boe[i]+30
set bre[i]=bre[i]+20
else
call Qke(p,"|cffffcc00"+"Yêu cầu 300 Danh Bổ Lệnh !",5)
endif
else
call Qke(p,"|cffffcc00"+"Mỗi nhân vật chỉ có thể đổi 10 lần !",5)
endif
endfunction
function dix takes nothing returns boolean
local integer CGe=Qce()
call uee(SMv[CGe],Spv[CGe],true,0,Smv[CGe],'B007')
set SLv[CGe]=SLv[CGe]-1
if SLv[CGe]<=0 or spe(Spv[CGe])or spe(SMv[CGe])then
call QDe()
set SMv[CGe]=null
set Spv[CGe]=null
call Gve(CGe)
endif
return false
endfunction
function dax takes unit u,unit v,real d returns nothing
local integer CGe=g9e()
set SMv[CGe]=u
set Spv[CGe]=v
set Smv[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set SLv[CGe]=4
call QIe(CGe,1.,true,function dix)
endfunction
function dnx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
call GroupEnumUnitsInRange(sv,Swv[CGe],SWv[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,SSv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,S_v[CGe])then
call GroupAddUnit(S_v[CGe],n)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\KeeperGroveMissile\\KeeperGroveMissile.mdl"),(n),"chest"))
call yLe(Ssv[CGe],n,Szv[CGe],1.)
if not(GetUnitAbilityLevel((n),(sa))>0)and BUe[(SZv[CGe])*(20)+4]>0 and GetRandomReal(0,'d')<=18+2*BUe[(SZv[CGe])*(20)+4]then
call xwx(Ssv[CGe],n)
endif
call uee(Ssv[CGe],n,true,Syv[CGe],SYv[CGe],THe(Ssv[CGe]))
call dax(Ssv[CGe],n,SYv[CGe])
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set SUv[CGe]=SUv[CGe]-1
if SUv[CGe]<=0 then
call QDe()
call Qre(Stv[CGe])
call Qre(Suv[CGe])
call Qre(STv[CGe])
call Qne(S_v[CGe])
set S_v[CGe]=null
set STv[CGe]=null
set Suv[CGe]=null
set Stv[CGe]=null
set Ssv[CGe]=null
set SSv[CGe]=null
call g8e(CGe)
endif
return false
endfunction
function dVx takes unit u,real d,unit v,real r returns nothing
local integer CGe=g7e()
set Ssv[CGe]=u
set Swv[CGe]=GetUnitX(v)
set SWv[CGe]=GetUnitY(v)
set SUv[CGe]=3
set Stv[CGe]=AddSpecialEffect("war3mapImported\\NDC_amphong1.mdl",Swv[CGe],SWv[CGe])
set Suv[CGe]=AddSpecialEffect("war3mapImported\\NDC_amphong3.mdl",Swv[CGe],SWv[CGe])
set STv[CGe]=AddSpecialEffect("war3mapImported\\NDC_effect2.mdl",Swv[CGe],SWv[CGe])
set Syv[CGe]=uBe(u,ude(u,2.,.6,KA))
set SYv[CGe]=uce(u,ude(u,$5DC,450,KA),'B007')
set Szv[CGe]=ude(u,$F,2,KA)
set SSv[CGe]=GetOwningPlayer(Ssv[CGe])
set SZv[CGe]=GetPlayerId(SSv[CGe])+1
set S_v[CGe]=CreateGroup()
set Syv[CGe]=Syv[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A063'))
set SYv[CGe]=SYv[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A063'))
call Qre(AddSpecialEffectTarget(("war3mapImported\\NDC_amphongcasst.mdl"),(u),"origin"))
if BUe[(SZv[CGe])*(20)+9]>0 then
if not nI[SZv[CGe]]and GetRandomReal(0,'d')<=$C+3*BUe[(SZv[CGe])*(20)+9]then
call BVx(Ssv[CGe],BUe[(SZv[CGe])*(20)+9],SZv[CGe])
endif
endif
call Qre(AddSpecialEffectTarget("Abilities\\Weapons\\SkeletalMageMissile\\SkeletalMageMissile.mdl",u,"hand right"))
call Qre(AddSpecialEffectTarget("Abilities\\Weapons\\SkeletalMageMissile\\SkeletalMageMissile.mdl",u,"hand left"))
if r>0 then
set Syv[CGe]=d
set SYv[CGe]=d
set Szv[CGe]=r
endif
call BlzSetSpecialEffectScale((Stv[CGe]),((2.)*1.))
call BlzSetSpecialEffectYaw((Suv[CGe]),((270)*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((Suv[CGe]),((3.5)*1.))
call BlzSetSpecialEffectZ(Suv[CGe],sxe(Swv[CGe],SWv[CGe]))
call BlzSetSpecialEffectTimeScale(Suv[CGe],1.25)
call BlzSetSpecialEffectScale((STv[CGe]),((2.)*1.))
call QIe(CGe,.5,true,function dnx)
endfunction
function dEx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
call Qre(AddSpecialEffect(("war3mapImported\\NDD_effect3.mdl"),((S5v[CGe])*1.),((S6v[CGe])*1.)))
call GroupEnumUnitsInRange(sv,S5v[CGe],S6v[CGe],400,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yLe(S3v[CGe],n,'d',.5)
call uee(S3v[CGe],n,false,S4v[CGe],S4v[CGe],THe(S3v[CGe]))
call s5e(n,$96,.3,soe(GetUnitX(n),GetUnitY(n),S5v[CGe],S6v[CGe]),false,false)
endif
call GroupRemoveUnit(sv,n)
endloop
set S7v[CGe]=S7v[CGe]-1
if S7v[CGe]<=0 or spe(S3v[CGe])then
call QDe()
set S3v[CGe]=null
call g6e(CGe)
endif
return false
endfunction
function dXx takes unit u,real x,real y,real d returns nothing
local integer CGe=g5e()
set S3v[CGe]=u
set S4v[CGe]=d
set S5v[CGe]=x
set S6v[CGe]=y
set S7v[CGe]=6
call QIe(CGe,.5,true,function dEx)
endfunction
function dOx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set txv[CGe]=(((txv[CGe])*1.)+((lA)*1.)*Cos(((tav[CGe])*1.)*bj_DEGTORAD))
set tov[CGe]=(((tov[CGe])*1.)+((lA)*1.)*Sin(((tav[CGe])*1.)*bj_DEGTORAD))
if sZe(txv[CGe],tov[CGe])then
call SetUnitX(tev[CGe],txv[CGe])
call SetUnitY(tev[CGe],tov[CGe])
else
set tiv[CGe]=0
endif
set tiv[CGe]=tiv[CGe]-1
if tiv[CGe]<=0 then
call QDe()
call Qre(AddSpecialEffect(("war3mapImported\\NDD_effect3.mdl"),((txv[CGe])*1.),((tov[CGe])*1.)))
call GroupEnumUnitsInRange(sv,txv[CGe],tov[CGe],400,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yHe(tev[CGe],n,'d',1.)
call uee(tev[CGe],n,false,trv[CGe],trv[CGe],THe(tev[CGe]))
call s5e(n,$96,.3,soe(GetUnitX(n),GetUnitY(n),txv[CGe],tov[CGe]),false,false)
endif
call GroupRemoveUnit(sv,n)
endloop
call dXx(tev[CGe],txv[CGe],tov[CGe],trv[CGe])
set tev[CGe]=null
call g4e(CGe)
endif
return false
endfunction
function dRx takes unit u,real d,real x,real y returns nothing
local integer CGe=g3e()
set tev[CGe]=u
set txv[CGe]=GetUnitX(u)
set tov[CGe]=GetUnitY(u)
set trv[CGe]=d
set tiv[CGe]=R2I(sre(txv[CGe],tov[CGe],x,y)/ lA)
set tav[CGe]=soe(txv[CGe],tov[CGe],x,y)
call oHx(u,d,d,'d',txv[CGe],tov[CGe])
call QIe(CGe,.03125,true,function dOx)
endfunction
function dIx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
set tcv[CGe]=tcv[CGe]+3
set tIv[CGe]=(((GetUnitX(tXv[CGe]))*1.)+((400)*1.)*Cos(((tcv[CGe])*1.)*bj_DEGTORAD))
set tAv[CGe]=(((GetUnitY(tXv[CGe]))*1.)+((400)*1.)*Sin(((tcv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectYaw((tOv[CGe]),((tcv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectPosition(tOv[CGe],tIv[CGe],tAv[CGe],tbv[CGe])
set tRv[CGe]=tRv[CGe]-1
set tBv[CGe]=tBv[CGe]-1
if tBv[CGe]==0 then
set tBv[CGe]=45
call GroupEnumUnitsInRange(sv,tIv[CGe],tAv[CGe],$3E8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call cGx(tXv[CGe],tIv[CGe],tAv[CGe],tNv[CGe],tNv[CGe],'d',n)
set c=c+1
if c==3 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
if tRv[CGe]<=0 then
call QDe()
call Qre(tOv[CGe])
set tOv[CGe]=null
set tXv[CGe]=null
call g2e(CGe)
endif
return false
endfunction
function dAx takes unit u,real d,real a returns nothing
local integer CGe=g1e()
set tXv[CGe]=u
set tcv[CGe]=a
set tIv[CGe]=(((GetUnitX(u))*1.)+((400)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set tAv[CGe]=(((GetUnitY(u))*1.)+((400)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set tRv[CGe]=360
set tOv[CGe]=AddSpecialEffect("war3mapImported\\NDC_luyennguchucot.mdl",tIv[CGe],tAv[CGe])
set tbv[CGe]=sxe(tIv[CGe],tAv[CGe])+'d'
set tNv[CGe]=d
set tBv[CGe]=45
call BlzSetSpecialEffectYaw((tOv[CGe]),((tcv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((tOv[CGe]),((1.3)*1.))
call BlzSetSpecialEffectZ(tOv[CGe],tbv[CGe])
call QIe(CGe,.03125,true,function dIx)
endfunction
function dNx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
call GroupEnumUnitsInRange(sv,tGv[CGe],thv[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,tFv[CGe])and not spe(n)and not tOe(n)then
call yle(tfv[CGe],n,tJv[CGe],1.)
call uee(tfv[CGe],n,true,tHv[CGe],tjv[CGe],THe(tfv[CGe]))
if tgv[CGe]==2 then
call Qre(AddSpecialEffect(("war3mapImported\\VDQ_baccapnhiphuc2.mdl"),((GetUnitX(n))*1.),((GetUnitY(n))*1.)))
endif
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set tgv[CGe]=tgv[CGe]-1
if tgv[CGe]<=0 then
call QDe()
set tfv[CGe]=null
set tFv[CGe]=null
call g0e(CGe)
endif
return false
endfunction
function dbx takes unit u,real d,unit v,real r returns nothing
local integer CGe=g_e()
set tfv[CGe]=u
set tGv[CGe]=GetUnitX(v)
set thv[CGe]=GetUnitY(v)
set tgv[CGe]=2
set tHv[CGe]=uBe(u,ude(u,1.,.3,LA))*Iox(u)
set tjv[CGe]=uce(u,ude(u,$3E8,300,LA),'B00A')*Iox(u)
set tJv[CGe]=ude(u,20,2,LA)
set tFv[CGe]=GetOwningPlayer(tfv[CGe])
if(GetUnitAbilityLevel((tfv[CGe]),(fO))>0)then
call Iix(tfv[CGe])
endif
call Qre(AddSpecialEffect(("war3mapImported\\VDQ_baccapnhiphuc2.mdl"),((tGv[CGe])*1.),((thv[CGe])*1.)))
call Qre(AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl",tfv[CGe],"weapon"))
if r>0 then
set tHv[CGe]=d
set tjv[CGe]=d
set tJv[CGe]=r
endif
call QIe(CGe,.2,true,function dNx)
endfunction
function dBx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set tqv[CGe]=(((tqv[CGe])*1.)+((MA)*1.)*Cos(((tpv[CGe])*1.)*bj_DEGTORAD))
set tQv[CGe]=(((tQv[CGe])*1.)+((MA)*1.)*Sin(((tpv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(tuv[CGe],tqv[CGe],tQv[CGe],tPv[CGe])
if tUv[CGe]<4 then
call GroupEnumUnitsInRange(sv,tqv[CGe],tQv[CGe],70,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,tmv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,tMv[CGe])then
call yke(tLv[CGe],n,ttv[CGe],1.5)
call yHe(tLv[CGe],n,ttv[CGe],.5)
call GroupAddUnit(tMv[CGe],n)
call Qre(AddSpecialEffect(("war3mapImported\\TYD_hoasen3.mdl"),((GetUnitX(n))*1.),((GetUnitY(n))*1.)))
call uee(tLv[CGe],n,false,tsv[CGe],tSv[CGe],THe(tLv[CGe]))
if not tWv[CGe]then
call GroupClear(sv)
set tTv[CGe]=0
else
set tUv[CGe]=tUv[CGe]+1
if tUv[CGe]>=4 then
call GroupClear(sv)
endif
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set tTv[CGe]=tTv[CGe]-1
if tTv[CGe]<=0 then
call QDe()
call Qre(tuv[CGe])
call Qne(tMv[CGe])
set tMv[CGe]=null
set tuv[CGe]=null
set tLv[CGe]=null
set tmv[CGe]=null
call gZe(CGe)
endif
return false
endfunction
function dcx takes unit u,real d1,real d2,real r,real a returns nothing
local integer CGe=gze()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set tLv[CGe]=u
set tpv[CGe]=a
set tqv[CGe]=(((x)*1.)+((50)*1.)*Cos(((tpv[CGe])*1.)*bj_DEGTORAD))
set tQv[CGe]=(((y)*1.)+((50)*1.)*Sin(((tpv[CGe])*1.)*bj_DEGTORAD))
set tsv[CGe]=d1
set tSv[CGe]=d2
set ttv[CGe]=r
set tuv[CGe]=AddSpecialEffect("war3mapImported\\TYD_bangtungmissile.mdl",tqv[CGe],tQv[CGe])
set tPv[CGe]=sxe(tqv[CGe],tQv[CGe])+60
set tTv[CGe]=R2I(mA/ MA)
set tmv[CGe]=GetOwningPlayer(u)
set tMv[CGe]=CreateGroup()
set tUv[CGe]=0
set twv[CGe]=GetPlayerId(tmv[CGe])+1
set tWv[CGe]=false
if BUe[(twv[CGe])*(20)+9]>0 then
if GetRandomReal(0,'d')<=23+7*BUe[(twv[CGe])*(20)+9]then
set tWv[CGe]=true
endif
endif
call BlzSetSpecialEffectScale(tuv[CGe],1.2)
call BlzSetSpecialEffectZ(tuv[CGe],tPv[CGe])
call BlzSetSpecialEffectYaw(tuv[CGe],tpv[CGe]*bj_DEGTORAD)
call QIe(CGe,.03125,true,function dBx)
endfunction
function dCx takes unit u,real d,unit v,real r returns nothing
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
local real d1=uBe(u,ude(u,2.,.6,'A077'))*(1.+.1*AI[i])
local real d2=uce(u,ude(u,$5DC,450,'A077'),'B008')*(1.+.1*AI[i])
local real rz=ude(u,20,2,'A077')
local real a=soe(GetUnitX(u),GetUnitY(u),GetUnitX(v),GetUnitY(v))
set d1=d1*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A06Z'))
set d2=d2*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A06Z'))
call Qre(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl",u,"weapon"))
set AI[i]=0
if(GetUnitAbilityLevel((u),(yE))>0)then
call UnitRemoveAbility(u,'BOwk')
call UnitRemoveAbility(u,yE)
call XFx(u)
endif
if r>0 then
set d1=d
set d2=d
set rz=r
endif
call dcx(u,d1,d2,rz,a)
call dcx(u,d1,d2,rz,a+$D)
call dcx(u,d1,d2,rz,a-$D)
call dcx(u,d1,d2,rz,a+26)
call dcx(u,d1,d2,rz,a-26)
endfunction
function ddx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set t2v[CGe]=(((t2v[CGe])*1.)+((PA)*1.)*Cos(((t9v[CGe])*1.)*bj_DEGTORAD))
set t3v[CGe]=(((t3v[CGe])*1.)+((PA)*1.)*Sin(((t9v[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(t0v[CGe],t2v[CGe],t3v[CGe],t7v[CGe])
if Tvv[CGe]<7 then
call GroupEnumUnitsInRange(sv,t2v[CGe],t3v[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,t_v[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,t8v[CGe])then
call yke(tZv[CGe],n,t6v[CGe],1.5)
call yHe(tZv[CGe],n,t6v[CGe],.5)
call GroupAddUnit(t8v[CGe],n)
call Qre(AddSpecialEffect(("war3mapImported\\TYD_hoasen33.mdl"),((GetUnitX(n))*1.),((GetUnitY(n))*1.)))
call uee(tZv[CGe],n,false,t4v[CGe],t5v[CGe],THe(tZv[CGe]))
set Tvv[CGe]=Tvv[CGe]+1
if Tvv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set t1v[CGe]=t1v[CGe]-1
if t1v[CGe]<=0 then
call QDe()
call Qre(t0v[CGe])
call Qne(t8v[CGe])
set t8v[CGe]=null
set t0v[CGe]=null
set tZv[CGe]=null
set t_v[CGe]=null
call gYe(CGe)
endif
return false
endfunction
function dDx takes unit u,player p,real d1,real d2,real x,real y,real r,real a returns nothing
local integer CGe=gye()
set tZv[CGe]=u
set t9v[CGe]=a
set t2v[CGe]=x
set t3v[CGe]=y
set t1v[CGe]=R2I(pA/ PA)
if t9v[CGe]>=-90 and t9v[CGe]<=90 then
set t0v[CGe]=AddSpecialEffect("war3mapImported\\TYD_tranphai331.mdl",t2v[CGe],t3v[CGe])
else
set t0v[CGe]=AddSpecialEffect("war3mapImported\\TYD_tranphai332.mdl",t2v[CGe],t3v[CGe])
endif
set t7v[CGe]=sxe(t2v[CGe],t3v[CGe])+'d'
set t4v[CGe]=d1
set t5v[CGe]=d2
set t6v[CGe]=r
set t_v[CGe]=p
set t8v[CGe]=CreateGroup()
set Tvv[CGe]=0
call BlzSetSpecialEffectYaw((t0v[CGe]),((t9v[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((t0v[CGe]),((.7)*1.))
call BlzSetSpecialEffectZ(t0v[CGe],t7v[CGe])
call QIe(CGe,.03125,true,function ddx)
endfunction
function dfx takes unit u,player p,real x,real y,real d1,real d2,real r,real a returns boolean
call dDx(u,p,d1,d2,x,y,r,a)
call dDx(u,p,d1,d2,x,y,r,a+$F)
call dDx(u,p,d1,d2,x,y,r,a-$F)
call dDx(u,p,d1,d2,x,y,r,a+30)
call dDx(u,p,d1,d2,x,y,r,a-30)
return false
endfunction
function dFx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set TVv[CGe]=(((TVv[CGe])*1.)+((PA)*1.)*Cos(((TAv[CGe])*1.)*bj_DEGTORAD))
set TEv[CGe]=(((TEv[CGe])*1.)+((PA)*1.)*Sin(((TAv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(Tav[CGe],TVv[CGe],TEv[CGe],TIv[CGe])
call GroupEnumUnitsInRange(sv,TVv[CGe],TEv[CGe],90,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Tiv[CGe])and not spe(n)and not tOe(n)then
call dfx(Trv[CGe],Tiv[CGe],TVv[CGe],TEv[CGe],TXv[CGe],TOv[CGe],TRv[CGe],TAv[CGe])
set Tnv[CGe]=0
call GroupClear(sv)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set Tnv[CGe]=Tnv[CGe]-1
if Tnv[CGe]<=0 then
call QDe()
call Qre(Tav[CGe])
set Tav[CGe]=null
set Trv[CGe]=null
set Tiv[CGe]=null
call gWe(CGe)
endif
return false
endfunction
function dgx takes unit u,real d,unit v,real r returns nothing
local integer CGe=gwe()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local integer i=0
set Trv[CGe]=u
set TAv[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set TVv[CGe]=(((x)*1.)+((50)*1.)*Cos(((TAv[CGe])*1.)*bj_DEGTORAD))
set TEv[CGe]=(((y)*1.)+((50)*1.)*Sin(((TAv[CGe])*1.)*bj_DEGTORAD))
set Tnv[CGe]=R2I(pA/ PA)
if TAv[CGe]>=-90 and TAv[CGe]<=90 then
set Tav[CGe]=AddSpecialEffect("war3mapImported\\TYD_tranphai331.mdl",TVv[CGe],TEv[CGe])
else
set Tav[CGe]=AddSpecialEffect("war3mapImported\\TYD_tranphai332.mdl",TVv[CGe],TEv[CGe])
endif
set TIv[CGe]=sxe(TVv[CGe],TEv[CGe])+'d'
set Tiv[CGe]=GetOwningPlayer(Trv[CGe])
set i=GetPlayerId(Tiv[CGe])+1
set TXv[CGe]=uBe(u,ude(u,3.,.9,qA))*(1.+.1*AI[i])
set TOv[CGe]=uce(u,ude(u,$9C4,750,qA),'B008')*(1.+.1*AI[i])
set TRv[CGe]=ude(u,20,2,qA)
set TXv[CGe]=TXv[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A077'))
set TOv[CGe]=TOv[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A077'))
call Qre(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl",u,"weapon"))
set AI[i]=0
if(GetUnitAbilityLevel((u),(yE))>0)then
call UnitRemoveAbility(u,'BOwk')
call UnitRemoveAbility(u,yE)
call XFx(u)
endif
if r>0 then
set TXv[CGe]=d
set TOv[CGe]=d
set TRv[CGe]=r
endif
call BlzSetSpecialEffectYaw((Tav[CGe]),((TAv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((Tav[CGe]),((.7)*1.))
call BlzSetSpecialEffectZ(Tav[CGe],TIv[CGe])
call QIe(CGe,.03125,true,function dFx)
endfunction
function dGx takes nothing returns boolean
local integer CGe=Qce()
set Tcv[CGe]=Tcv[CGe]-1
if Tcv[CGe]<=0 then
call QDe()
call Qre(TCv[CGe])
set TCv[CGe]=null
call gUe(CGe)
endif
return false
endfunction
function dhx takes real x,real y,real a returns nothing
local integer CGe=gue()
set Tcv[CGe]=R2I(.35/ .03125)
set TCv[CGe]=AddSpecialEffect("war3mapImported\\TVT_bavuongimg.mdl",x,y)
call BlzSetSpecialEffectScale((TCv[CGe]),((1.15)*1.))
call BlzSetSpecialEffectTimeScale((TCv[CGe]),((1.5)*1.))
call BlzSetSpecialEffectAlpha((TCv[CGe]),('d'))
call BlzSetSpecialEffectYaw((TCv[CGe]),((a)*1.)*bj_DEGTORAD)
call QIe(CGe,.03125,true,function dGx)
endfunction
function dHx takes nothing returns boolean
local integer CGe=Qce()
set TGv[CGe]=(((TGv[CGe])*1.)+((30)*1.)*Cos(((TFv[CGe])*1.)*bj_DEGTORAD))
set Thv[CGe]=(((Thv[CGe])*1.)+((30)*1.)*Sin(((TFv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(Tjv[CGe],TGv[CGe],Thv[CGe],Tgv[CGe])
set THv[CGe]=THv[CGe]-1
if THv[CGe]<=0 then
call QDe()
call Qre(Tjv[CGe])
set Tjv[CGe]=null
call gTe(CGe)
endif
return false
endfunction
function djx takes real x,real y,real a returns nothing
local integer CGe=gte()
set TGv[CGe]=(((x)*1.)+((80)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set Thv[CGe]=(((y)*1.)+((80)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set TFv[CGe]=a
set Tjv[CGe]=AddSpecialEffect("war3mapImported\\DTC_nhatduongwave.mdl",TGv[CGe],Thv[CGe])
set Tgv[CGe]=sxe(x,y)+GetRandomReal(30,$A0)
set THv[CGe]=GetRandomInt(6,$D)
call BlzSetSpecialEffectColor((Tjv[CGe]),($FF),($FF),('d'))
call BlzSetSpecialEffectScale((Tjv[CGe]),((.2)*1.))
call BlzSetSpecialEffectZ(Tjv[CGe],Tgv[CGe])
call BlzSetSpecialEffectYaw(Tjv[CGe],TFv[CGe]*bj_DEGTORAD)
call QIe(CGe,.03125,true,function dHx)
endfunction
function dJx takes nothing returns boolean
local integer CGe=Qce()
call djx(TLv[CGe],Tmv[CGe],TMv[CGe]+GetRandomReal(-30,30))
set Tlv[CGe]=Tlv[CGe]-1
if Tlv[CGe]<=0 then
call QDe()
call gSe(CGe)
endif
return false
endfunction
function dkx takes real x,real y,real a returns nothing
local integer CGe=gse()
set Tlv[CGe]=8
set TLv[CGe]=x
set Tmv[CGe]=y
set TMv[CGe]=a
call djx(x,y,a+GetRandomReal(-45,45))
call QIe(CGe,.04,true,function dJx)
endfunction
function dKx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
if BUe[(Tyv[CGe])*(20)+9]>0 then
call i4x(TQv[CGe],BUe[(Tyv[CGe])*(20)+9],Tyv[CGe])
endif
if TSv[CGe]==2 then
call dhx(GetUnitX(TQv[CGe]),GetUnitY(TQv[CGe]),GetUnitFacing(TQv[CGe]))
endif
if TWv[CGe]<7 then
call GroupEnumUnitsInRange(sv,Ttv[CGe],TTv[CGe],$FA,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Tsv[CGe])and not spe(n)and not tOe(n)then
call yHe(TQv[CGe],n,Twv[CGe],1.)
if TSv[CGe]==2 then
call Qre(AddSpecialEffect(("war3mapImported\\TVT_bavuongtramkim_target.mdl"),((GetUnitX(n))*1.),((GetUnitY(n))*1.)))
endif
call uee(TQv[CGe],n,false,Tuv[CGe],TUv[CGe],THe(TQv[CGe]))
set TWv[CGe]=TWv[CGe]+1
if TWv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set TSv[CGe]=TSv[CGe]-1
if TSv[CGe]<=0 then
call QDe()
set TQv[CGe]=null
set Tsv[CGe]=null
call gQe(CGe)
endif
return false
endfunction
function dlx takes unit u,real d,unit v,real r returns nothing
local integer CGe=gqe()
local real a=GetUnitFacing(u)
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set TQv[CGe]=u
set Ttv[CGe]=(((x)*1.)+(($96)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set TTv[CGe]=(((y)*1.)+(($96)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set TSv[CGe]=3
set Tuv[CGe]=uBe(u,ude(u,3.,.9,QA))
set TUv[CGe]=uce(u,ude(u,$BB8,900,QA),'B006')
set Twv[CGe]=ude(u,$F,2,QA)
set TWv[CGe]=0
set Tsv[CGe]=GetOwningPlayer(TQv[CGe])
set Tyv[CGe]=GetPlayerId(Tsv[CGe])+1
set Tuv[CGe]=Tuv[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A043'))
set TUv[CGe]=TUv[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A043'))
call dkx(x,y,a)
if r>0 then
set Tuv[CGe]=d
set TUv[CGe]=d
set Twv[CGe]=r
endif
call QIe(CGe,.1667,true,function dKx)
endfunction
function dLx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set T2v[CGe]=(((T2v[CGe])*1.)+((SA)*1.)*Cos(((T6v[CGe])*1.)*bj_DEGTORAD))
set T3v[CGe]=(((T3v[CGe])*1.)+((SA)*1.)*Sin(((T6v[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(T0v[CGe],T2v[CGe],T3v[CGe],T5v[CGe])
call GroupEnumUnitsInRange(sv,T2v[CGe],T3v[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)and not IsUnitInGroup(n,T7v[CGe])then
call GroupAddUnit(T7v[CGe],n)
call Oix(T_v[CGe],T4v[CGe],n,'d')
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set T1v[CGe]=T1v[CGe]-1
if T1v[CGe]<=0 then
call QDe()
call Qre(T0v[CGe])
call Qne(T7v[CGe])
set T7v[CGe]=null
set T0v[CGe]=null
set T_v[CGe]=null
call gPe(CGe)
endif
return false
endfunction
function dmx takes unit u,real d,real x,real y returns nothing
local integer CGe=gpe()
set T_v[CGe]=u
set T2v[CGe]=GetUnitX(u)
set T3v[CGe]=GetUnitY(u)
set T6v[CGe]=soe(T2v[CGe],T3v[CGe],x,y)
set T4v[CGe]=d
set T5v[CGe]=sxe(T2v[CGe],T3v[CGe])+'d'
set T0v[CGe]=AddSpecialEffect("war3mapImported\\DMTT_xuyenvantientarget.mdl",T2v[CGe],T3v[CGe])
set T1v[CGe]=R2I(sA/ SA)
set T7v[CGe]=CreateGroup()
call BlzSetSpecialEffectYaw((T0v[CGe]),((T6v[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((T0v[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(T0v[CGe],T5v[CGe])
call QIe(CGe,.03125,true,function dLx)
endfunction
function dMx takes unit u,real d returns nothing
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local integer i=1
loop
exitwhen i>6
set Qv=tTe(zv,'n06H',(((x)*1.)+((600)*1.)*Cos(((60*i)*1.)*bj_DEGTORAD)),(((y)*1.)+((600)*1.)*Sin(((60*i)*1.)*bj_DEGTORAD)),270,$F)
call Tje(Qv,6729,1.5)
set i=i+1
endloop
endfunction
function dpx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=1.
set uav[CGe]=(((uav[CGe])*1.)+((TA)*1.)*Cos(((uIv[CGe])*1.)*bj_DEGTORAD))
set unv[CGe]=(((unv[CGe])*1.)+((TA)*1.)*Sin(((uIv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(urv[CGe],uav[CGe],unv[CGe],uRv[CGe])
if uOv[CGe]<7 then
call GroupEnumUnitsInRange(sv,uav[CGe],unv[CGe],$A0,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,uxv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,uov[CGe])then
call yHe(uev[CGe],n,uXv[CGe],1.)
call GroupAddUnit(uov[CGe],n)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TDBD_targeteffect.mdl"),(n),"origin"))
if BUe[(uAv[CGe])*(20)+$A]>0 and tle(n)<=50 then
set r=1.+.1+.02*BUe[(uAv[CGe])*(20)+$A]
endif
call uee(uev[CGe],n,false,uVv[CGe]*r,uEv[CGe]*r,THe(uev[CGe]))
set uOv[CGe]=uOv[CGe]+1
if uOv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set uiv[CGe]=uiv[CGe]-1
if uiv[CGe]<=0 then
call QDe()
call Qre(urv[CGe])
call Qne(uov[CGe])
set uov[CGe]=null
set urv[CGe]=null
set uev[CGe]=null
set uxv[CGe]=null
call gMe(CGe)
endif
return false
endfunction
function dPx takes unit u,real d,unit v,real r returns nothing
local integer CGe=gme()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set uev[CGe]=u
set uIv[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set uav[CGe]=(((x)*1.)+((50)*1.)*Cos(((uIv[CGe])*1.)*bj_DEGTORAD))
set unv[CGe]=(((y)*1.)+((50)*1.)*Sin(((uIv[CGe])*1.)*bj_DEGTORAD))
set uiv[CGe]=R2I(tA/ TA)
set urv[CGe]=AddSpecialEffect("war3mapImported\\TDBD_phaphu.mdl",uav[CGe],unv[CGe])
set uRv[CGe]=sxe(uav[CGe],unv[CGe])+50
set uVv[CGe]=uBe(u,ude(u,1.,.3,uA))
set uEv[CGe]=uce(u,ude(u,$3E8,300,uA),'B006')
set uXv[CGe]=ude(u,20,2,uA)
set uOv[CGe]=0
set uov[CGe]=CreateGroup()
set uxv[CGe]=GetOwningPlayer(u)
set uAv[CGe]=GetPlayerId(uxv[CGe])+1
set uVv[CGe]=uVv[CGe]*Rqx(u,uAv[CGe])
set uEv[CGe]=uEv[CGe]*Rqx(u,uAv[CGe])
if(GetUnitAbilityLevel((u),('B05A'))>0)then
set Pv=ude(u,.06,.02,'A0WB')*(uVv[CGe]+uEv[CGe])
call Tse(uev[CGe],Pv)
call Qle("|cff7fff00"+"+"+I2S(R2I(Pv))+"|r",GetUnitX(uev[CGe]),GetUnitY(uev[CGe]))
endif
if r>0 then
set uVv[CGe]=d
set uEv[CGe]=d
set uXv[CGe]=r
endif
call BlzSetSpecialEffectYaw((urv[CGe]),((uIv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((urv[CGe]),((.6)*1.))
call BlzSetSpecialEffectZ(urv[CGe],uRv[CGe])
call QIe(CGe,.03125,true,function dpx)
endfunction
function dqx takes unit u,player p,real d1,real d2,real r,real x,real y returns boolean
local unit n=null
call GroupEnumUnitsInRange(sv,x,y,'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,p)and not spe(n)and not tOe(n)then
call yKe(u,n,r,2.)
call yHe(u,n,r,1.)
call uee(u,n,false,d1,d2,THe(u))
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\LavaSpawnMissile\\LavaSpawnMissile.mdl"),(n),"chest"))
endif
call GroupRemoveUnit(sv,n)
endloop
return false
endfunction
function dQx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set uDv[CGe]=(((uDv[CGe])*1.)+((wA)*1.)*Cos(((uJv[CGe])*1.)*bj_DEGTORAD))
set ufv[CGe]=(((ufv[CGe])*1.)+((wA)*1.)*Sin(((uJv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(uCv[CGe],uDv[CGe],ufv[CGe],uHv[CGe])
if not ujv[CGe]then
call GroupEnumUnitsInRange(sv,uDv[CGe],ufv[CGe],90,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,uhv[CGe])and not spe(n)and not tOe(n)then
call GroupClear(sv)
set udv[CGe]=5
call dqx(ucv[CGe],uhv[CGe],uFv[CGe],ugv[CGe],uGv[CGe],uDv[CGe],ufv[CGe])
set ujv[CGe]=true
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set udv[CGe]=udv[CGe]-1
if udv[CGe]<=0 then
call QDe()
call Qre(uCv[CGe])
set uhv[CGe]=null
set uCv[CGe]=null
set ucv[CGe]=null
call gLe(CGe)
endif
return false
endfunction
function dsx takes unit u,real d1,real d2,real r,real x,real y,real a,real aQx,real b returns nothing
local integer CGe=gle()
set ucv[CGe]=u
set uJv[CGe]=aQx
set uDv[CGe]=(((x)*1.)+((b)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set ufv[CGe]=(((y)*1.)+((b)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set uFv[CGe]=d1
set ugv[CGe]=d2
set uGv[CGe]=r
set uHv[CGe]=sxe(uDv[CGe],ufv[CGe])+80
set uCv[CGe]=AddSpecialEffect("war3mapImported\\CBB_bong.mdl",uDv[CGe],ufv[CGe])
set udv[CGe]=R2I(UA/ wA)
set uhv[CGe]=GetOwningPlayer(u)
set ujv[CGe]=false
call BlzSetSpecialEffectYaw((uCv[CGe]),((uJv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((uCv[CGe]),((1.7)*1.))
call BlzSetSpecialEffectZ(uCv[CGe],uHv[CGe])
call QIe(CGe,.03125,true,function dQx)
endfunction
function dSx takes unit u,real d,unit v,real r returns nothing
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
local real d1=uBe(u,ude(u,1.,.3,WA))
local real d2=uce(u,ude(u,$3E8,300,WA),'B009')
local real rz=ude(u,$A,2,WA)
local real x0=GetUnitX(u)
local real y0=GetUnitY(u)
local real a=soe(x0,y0,GetUnitX(v),GetUnitY(v))
local real x=(((x0)*1.)+((50)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
local real y=(((y0)*1.)+((50)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
if r>0 then
set d1=d
set d2=d
set rz=r
endif
if GetUnitAbilityLevel(u,WA)>=8 then
call dsx(u,d1,d2,rz,x,y,a,a,$A)
call dsx(u,d1,d2,rz,x,y,a-90,a,70)
call dsx(u,d1,d2,rz,x,y,a+90,a,70)
elseif GetUnitAbilityLevel(u,WA)>=4 then
call dsx(u,d1,d2,rz,x,y,a-90,a,60)
call dsx(u,d1,d2,rz,x,y,a+90,a,60)
else
call dsx(u,d1,d2,rz,x,y,a,a,$A)
endif
call Qre(AddSpecialEffectTarget("Abilities\\Weapons\\LavaSpawnMissile\\LavaSpawnMissile.mdl",u,"weapon"))
endfunction
function dtx takes unit u,player p,real x,real y,real d1,real d2 returns nothing
local unit n=null
local integer QZe=0
call Qre(AddSpecialEffect(("war3mapImported\\TVT_effecttarget.mdl"),((x)*1.),((y)*1.)))
call GroupEnumUnitsInRange(sv,x,y,$FA,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,p)and not spe(n)and not tOe(n)then
call yHe(u,n,'d',1.)
call uee(u,n,false,d1,d2,THe(u))
set QZe=QZe+1
if QZe>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endfunction
function dTx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real x=GetUnitX(uLv[CGe])
local real y=GetUnitY(uLv[CGe])
local real x2=0
local real y2=0
local boolean b=false
if BUe[(usv[CGe])*(20)+9]>0 then
call i4x(uLv[CGe],BUe[(usv[CGe])*(20)+9],usv[CGe])
endif
set Qv=tMe(umv[CGe],'e002',x,y,GetUnitFacing(uLv[CGe]),.5)
call SetUnitVertexColor(Qv,$FF,$FF,$FF,50)
call SetUnitAnimation(Qv,"attack")
call SetUnitAnimation(uLv[CGe],"attack")
call GroupEnumUnitsInRange(sv,x,y,$3E8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,umv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,uqv[CGe])then
call GroupAddUnit(uqv[CGe],n)
set x2=GetUnitX(n)
set y2=GetUnitY(n)
set Pv=soe(x,y,x2,y2)
call SetUnitFacing(uLv[CGe],Pv)
call UnitRemoveBuffs(uLv[CGe],false,true)
call s5e(uLv[CGe],sre(x,y,x2,y2),.45,Pv,false,false)
call dtx(uLv[CGe],umv[CGe],x2,y2,uMv[CGe],upv[CGe])
call GroupClear(sv)
set b=true
endif
call GroupRemoveUnit(sv,n)
endloop
if not b then
set uPv[CGe]=0
endif
set n=null
set uPv[CGe]=uPv[CGe]-1
if uPv[CGe]<=0 or spe(uLv[CGe])then
call QDe()
call Tje(uLv[CGe],5740,-.999)
call Qre(uQv[CGe])
call Qne(uqv[CGe])
set uQv[CGe]=null
set uqv[CGe]=null
set uLv[CGe]=null
set umv[CGe]=null
call gKe(CGe)
endif
return false
endfunction
function dux takes unit u,real d1,real d2 returns nothing
local integer CGe=gke()
set uLv[CGe]=u
set umv[CGe]=GetOwningPlayer(u)
set usv[CGe]=GetPlayerId(umv[CGe])+1
set uMv[CGe]=d1
set upv[CGe]=d2
set uPv[CGe]=7
set uqv[CGe]=CreateGroup()
set uQv[CGe]=AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl",uLv[CGe],"weapon")
call Tje(uLv[CGe],5740,.999)
call QIe(CGe,.5,true,function dTx)
endfunction
function dUx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,6.,2.,'A044'))*(1.+TKe(u,4857))
local real d2=uce(u,ude(u,6000,$7D0,'A044'),'B006')*(1.+TKe(u,4857))
call dux(u,d1,d2)
set u=null
return false
endfunction
function dwx takes nothing returns boolean
return GetSpellAbilityId()=='A044' and dUx()
endfunction
function dWx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function dwx))
set t=null
endfunction
function dyx takes nothing returns boolean
local integer CGe=Qce()
if not spe(uWv[CGe])then
call Qre(AddSpecialEffectTarget(("war3mapImported\\VDQ_baccapnhiphuc.mdl"),(uWv[CGe]),"chest"))
call uee(uwv[CGe],uWv[CGe],true,uUv[CGe],uyv[CGe],THe(uwv[CGe]))
endif
set uuv[CGe]=uuv[CGe]-1
if uuv[CGe]<=0 or spe(uWv[CGe])or spe(uwv[CGe])then
call QDe()
set uwv[CGe]=null
set uWv[CGe]=null
call gJe(CGe)
endif
return false
endfunction
function dYx takes unit u,real d1,real d2,unit v returns nothing
local integer CGe=gje()
set uwv[CGe]=u
set uWv[CGe]=v
set uUv[CGe]=d1
set uyv[CGe]=d2
set uuv[CGe]=2
call QIe(CGe,.3,true,function dyx)
endfunction
function dzx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set u3v[CGe]=(((u3v[CGe])*1.)+((YA)*1.)*Cos(((u9v[CGe])*1.)*bj_DEGTORAD))
set u4v[CGe]=(((u4v[CGe])*1.)+((YA)*1.)*Sin(((u9v[CGe])*1.)*bj_DEGTORAD))
set Uov[CGe]=Uov[CGe]+.02
call BlzSetSpecialEffectScale((u1v[CGe]),((Uov[CGe])*1.))
call BlzSetSpecialEffectPosition(u1v[CGe],u3v[CGe],u4v[CGe],u8v[CGe])
call BlzSetSpecialEffectScale((Urv[CGe]),((Uov[CGe]-.4)*1.))
set Unv[CGe]=Unv[CGe]+5
call BlzSetSpecialEffectPosition(Urv[CGe],u3v[CGe],u4v[CGe],Unv[CGe])
call BlzSetSpecialEffectPosition(Uiv[CGe],u3v[CGe],u4v[CGe],u8v[CGe])
set Uxv[CGe]=Uxv[CGe]+1
if Uxv[CGe]==$A then
set Uxv[CGe]=0
call Qre(AddSpecialEffect(("war3mapImported\\VDQ_thiendia4.mdl"),((u3v[CGe])*1.),((u4v[CGe])*1.)))
endif
if u2v[CGe]==20 then
call Qre(Uav[CGe])
set Uav[CGe]=null
endif
if Uvv[CGe]<7 then
call GroupEnumUnitsInRange(sv,u3v[CGe],u4v[CGe],$FA,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,u0v[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Uev[CGe])then
call GroupAddUnit(Uev[CGe],n)
call Qre(AddSpecialEffectTarget(("war3mapImported\\VDQ_baccapnhiphuc.mdl"),(n),"chest"))
call yle(u_v[CGe],n,u7v[CGe],1.)
call uee(u_v[CGe],n,true,u5v[CGe],u6v[CGe],THe(u_v[CGe]))
call dYx(u_v[CGe],u5v[CGe],u6v[CGe],n)
set Uvv[CGe]=Uvv[CGe]+1
if Uvv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set u2v[CGe]=u2v[CGe]-1
if u2v[CGe]<=0 then
call QDe()
call Qne(Uev[CGe])
call Qre(u1v[CGe])
call Qre(Urv[CGe])
call Qre(Uiv[CGe])
set u1v[CGe]=null
set Urv[CGe]=null
set Uiv[CGe]=null
set Uev[CGe]=null
set u_v[CGe]=null
set u0v[CGe]=null
call gHe(CGe)
endif
return false
endfunction
function dZx takes unit u,player p,real x,real y,real d1,real d2,real r,real a returns nothing
local integer CGe=ghe()
set u_v[CGe]=u
set u3v[CGe]=x
set u4v[CGe]=y
set u9v[CGe]=a
set u5v[CGe]=d1
set u6v[CGe]=d2
set u7v[CGe]=r
set u8v[CGe]=sxe(u3v[CGe],u4v[CGe])+30
set u1v[CGe]=AddSpecialEffect("war3mapImported\\VDQ_aura.mdl",u3v[CGe],u4v[CGe])
set u2v[CGe]=R2I(zA/ YA)
set Uev[CGe]=CreateGroup()
set u0v[CGe]=p
set Uvv[CGe]=0
set Uxv[CGe]=0
set Uov[CGe]=.5
set Unv[CGe]=u8v[CGe]
call BlzSetSpecialEffectYaw((u1v[CGe]),((u9v[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((u1v[CGe]),((.5)*1.))
call BlzSetSpecialEffectZ(u1v[CGe],u8v[CGe])
set Urv[CGe]=AddSpecialEffect("war3mapImported\\VDQ_aura.mdl",u3v[CGe],u4v[CGe])
call BlzSetSpecialEffectYaw((Urv[CGe]),((u9v[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((Urv[CGe]),((.1)*1.))
call BlzSetSpecialEffectZ(Urv[CGe],Unv[CGe])
set Uiv[CGe]=AddSpecialEffect("war3mapImported\\VDQ_thiendia2.mdl",u3v[CGe],u4v[CGe])
set Uav[CGe]=AddSpecialEffect("war3mapImported\\VDQ_aura.mdl",GetUnitX(u),GetUnitY(u))
call BlzSetSpecialEffectScale((Uav[CGe]),((.55)*1.))
call QIe(CGe,.03125,true,function dzx)
endfunction
function d_x takes unit u,real d,unit v,real rz returns nothing
local real x=GetUnitX(v)
local real y=GetUnitY(v)
local real x0=GetUnitX(u)
local real y0=GetUnitY(u)
local real a=soe(x0,y0,x,y)
local real x1=(((x)*1.)+(($96)*1.)*Cos(((a-$B4)*1.)*bj_DEGTORAD))
local real y1=(((y)*1.)+(($96)*1.)*Sin(((a-$B4)*1.)*bj_DEGTORAD))
local real d1=uBe(u,ude(u,2.5,.75,yA))*Iox(u)
local real d2=uce(u,ude(u,$9C4,750,yA),'B00A')*Iox(u)
local real r=ude(u,$F,2,yA)
local player p=GetOwningPlayer(u)
set d1=d1*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A0AO'))
set d2=d2*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A0AO'))
if(GetUnitAbilityLevel((u),(fO))>0)then
call Iix(u)
endif
call Qre(AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl",u,"weapon"))
if rz>0 then
set d1=d
set d2=d
set r=rz
endif
call dZx(u,p,x1,y1,d1,d2,r,a)
endfunction
function d0x takes nothing returns boolean
local integer CGe=Qce()
if not spe(UNv[CGe])then
call uee(UAv[CGe],UNv[CGe],false,URv[CGe],UIv[CGe],THe(UAv[CGe]))
endif
set UOv[CGe]=UOv[CGe]-1
if UOv[CGe]<=0 or spe(UNv[CGe])or spe(UAv[CGe])then
call QDe()
call Qre(Ubv[CGe])
set Ubv[CGe]=null
set UAv[CGe]=null
set UNv[CGe]=null
call gGe(CGe)
endif
return false
endfunction
function d1x takes unit u,unit v,real d1,real d2 returns nothing
local integer CGe=gge()
set UAv[CGe]=u
set UNv[CGe]=v
set URv[CGe]=d1
set UIv[CGe]=d2
set UOv[CGe]=2
set Ubv[CGe]=AddSpecialEffect("war3mapImported\\CLD_gioloc2.mdl",GetUnitX(v),GetUnitY(v))
call BlzSetSpecialEffectScale((Ubv[CGe]),((1.)*1.))
call QIe(CGe,.24,true,function d0x)
endfunction
function d2x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real x=0
local real y=0
set UGv[CGe]=(((UGv[CGe])*1.)+((vN)*1.)*Cos(((UKv[CGe])*1.)*bj_DEGTORAD))
set Uhv[CGe]=(((Uhv[CGe])*1.)+((vN)*1.)*Sin(((UKv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(Ufv[CGe],UGv[CGe],Uhv[CGe],Ukv[CGe])
if Ulv[CGe]<7 then
call GroupEnumUnitsInRange(sv,UGv[CGe],Uhv[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,UDv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,ULv[CGe])then
call yle(Udv[CGe],n,UJv[CGe],1.)
call GroupAddUnit(ULv[CGe],n)
set x=GetUnitX(n)
set y=GetUnitY(n)
call uee(Udv[CGe],n,false,UHv[CGe],Ujv[CGe],THe(Udv[CGe]))
call d1x(Udv[CGe],n,UHv[CGe],Ujv[CGe])
if Umv[CGe]and BUe[(UMv[CGe])*(20)+$A]>0 and(GetRandomReal(0,'d')<=(17+3*BUe[(UMv[CGe])*(20)+$A]))then
set Umv[CGe]=false
call Xox(Udv[CGe],x,y,UHv[CGe],Ujv[CGe],UMv[CGe])
endif
set Ulv[CGe]=Ulv[CGe]+1
if Ulv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set Ugv[CGe]=Ugv[CGe]-1
if Ugv[CGe]<=0 then
call QDe()
call Qre(Ufv[CGe])
call Qne(ULv[CGe])
call Qre(UFv[CGe])
set UFv[CGe]=null
set ULv[CGe]=null
set Ufv[CGe]=null
set Udv[CGe]=null
set UDv[CGe]=null
call gFe(CGe)
endif
return false
endfunction
function d3x takes unit u,real d,unit v,real r returns nothing
local integer CGe=gfe()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set Udv[CGe]=u
set UKv[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set UGv[CGe]=(((x)*1.)+((60)*1.)*Cos(((UKv[CGe])*1.)*bj_DEGTORAD))
set Uhv[CGe]=(((y)*1.)+((60)*1.)*Sin(((UKv[CGe])*1.)*bj_DEGTORAD))
set Ugv[CGe]=R2I(eN/ vN)
set UHv[CGe]=uBe(u,ude(u,3.5,1.05,ZA))
set Ujv[CGe]=uce(u,ude(u,$DAC,$41A,ZA),'B00A')
set Ukv[CGe]=sxe(UGv[CGe],Uhv[CGe])+30
set UJv[CGe]=ude(u,$F,2,ZA)
set UDv[CGe]=GetOwningPlayer(u)
set ULv[CGe]=CreateGroup()
set UMv[CGe]=GetPlayerId(UDv[CGe])+1
set Ulv[CGe]=0
set UHv[CGe]=UHv[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A0B7'))
set Ujv[CGe]=Ujv[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A0B7'))
set Umv[CGe]=true
if r>0 then
set UHv[CGe]=d
set Ujv[CGe]=d
set UJv[CGe]=r
endif
set Ufv[CGe]=AddSpecialEffect("war3mapImported\\CLD_gioloctranphai.mdl",UGv[CGe],Uhv[CGe])
call BlzSetSpecialEffectYaw((Ufv[CGe]),((UKv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((Ufv[CGe]),((2.)*1.))
call BlzSetSpecialEffectZ(Ufv[CGe],Ukv[CGe])
set UFv[CGe]=AddSpecialEffect("war3mapImported\\CLD_ngaotuyetcast.mdl",x,y)
call BlzSetSpecialEffectYaw((UFv[CGe]),((UKv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((UFv[CGe]),((.5)*1.))
call BlzSetSpecialEffectZ(UFv[CGe],sxe(UGv[CGe],Uhv[CGe])+50)
call QIe(CGe,.03125,true,function d2x)
endfunction
function d4x takes unit u,real d,real r,real x,real y returns nothing
local unit n=null
call GroupEnumUnitsInRange(sv,x,y,$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call yle(u,n,r,.5)
call uee(u,n,true,d,d,THe(u))
endif
call GroupRemoveUnit(sv,n)
endloop
endfunction
function d5x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real x=GetUnitX(Usv[CGe])
local real y=GetUnitY(Usv[CGe])
if not spe(Usv[CGe])then
set Uyv[CGe]=soe(UTv[CGe],Uuv[CGe],x,y)
call BlzSetSpecialEffectYaw((USv[CGe]),((Uyv[CGe])*1.)*bj_DEGTORAD)
endif
set UTv[CGe]=(((UTv[CGe])*1.)+((xN)*1.)*Cos(((Uyv[CGe])*1.)*bj_DEGTORAD))
set Uuv[CGe]=(((Uuv[CGe])*1.)+((xN)*1.)*Sin(((Uyv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(USv[CGe],UTv[CGe],Uuv[CGe],UWv[CGe])
if spe(Usv[CGe])then
call GroupEnumUnitsInRange(sv,UTv[CGe],Uuv[CGe],50,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call GroupClear(sv)
set Utv[CGe]=0
endif
call GroupRemoveUnit(sv,n)
endloop
endif
if sre(UTv[CGe],Uuv[CGe],x,y)<=50 then
set Utv[CGe]=0
endif
set Utv[CGe]=Utv[CGe]-1
if Utv[CGe]<=0 then
call QDe()
call Qre(AddSpecialEffect(("war3mapImported\\EFF_FlowerBurst.mdl"),((UTv[CGe])*1.),((Uuv[CGe])*1.)))
call d4x(UQv[CGe],UUv[CGe],Uwv[CGe],UTv[CGe],Uuv[CGe])
call BlzSetSpecialEffectScale((USv[CGe]),((.001)*1.))
call Qre(USv[CGe])
set USv[CGe]=null
set Usv[CGe]=null
set UQv[CGe]=null
call gDe(CGe)
endif
return false
endfunction
function d6x takes unit u,real d,unit v,real r returns nothing
local integer CGe=gde()
set UQv[CGe]=u
set Usv[CGe]=v
set UTv[CGe]=GetUnitX(u)
set Uuv[CGe]=GetUnitY(u)
set Uyv[CGe]=soe(UTv[CGe],Uuv[CGe],GetUnitX(v),GetUnitY(v))
set Utv[CGe]=60
set USv[CGe]=AddSpecialEffect("war3mapImported\\EFF_butterfly.mdl",UTv[CGe],Uuv[CGe])
set UWv[CGe]=sxe(UTv[CGe],Uuv[CGe])+$96
set UUv[CGe]=d
set Uwv[CGe]=r
call BlzSetSpecialEffectYaw((USv[CGe]),((Uyv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((USv[CGe]),((1.8)*1.))
call BlzSetSpecialEffectZ(USv[CGe],UWv[CGe])
call QIe(CGe,.03125,true,function d5x)
endfunction
function d7x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set U3v[CGe]=(((U3v[CGe])*1.)+((iN)*1.)*Cos(((wvv[CGe])*1.)*bj_DEGTORAD))
set U4v[CGe]=(((U4v[CGe])*1.)+((iN)*1.)*Sin(((wvv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(U1v[CGe],U3v[CGe],U4v[CGe],U8v[CGe])
if wev[CGe]<7 then
call GroupEnumUnitsInRange(sv,U3v[CGe],U4v[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,U0v[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,U9v[CGe])then
call yHe(U_v[CGe],n,U7v[CGe],1.)
call GroupAddUnit(U9v[CGe],n)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TLBD_effect3.mdl"),(n),"chest"))
call uee(U_v[CGe],n,true,U5v[CGe],U6v[CGe],THe(U_v[CGe]))
set wev[CGe]=wev[CGe]+1
if wev[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set U2v[CGe]=U2v[CGe]-1
if U2v[CGe]<=0 then
call QDe()
call Qre(U1v[CGe])
call Qne(U9v[CGe])
set U9v[CGe]=null
set U1v[CGe]=null
set U_v[CGe]=null
set U0v[CGe]=null
call gCe(CGe)
endif
return false
endfunction
function d8x takes unit u,real d1,real d2,real r,real x,real y,real a returns nothing
local integer CGe=gce()
set U_v[CGe]=u
set wvv[CGe]=a
set U3v[CGe]=x
set U4v[CGe]=y
set U2v[CGe]=R2I(rN/ iN)
set U1v[CGe]=AddSpecialEffect("war3mapImported\\TLBD_thietky2.mdl",U3v[CGe],U4v[CGe])
set U8v[CGe]=sxe(U3v[CGe],U4v[CGe])
set U5v[CGe]=d1
set U6v[CGe]=d2
set U7v[CGe]=r
set U0v[CGe]=GetOwningPlayer(u)
set U9v[CGe]=CreateGroup()
set wev[CGe]=0
call BlzSetSpecialEffectYaw((U1v[CGe]),((wvv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((U1v[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(U1v[CGe],U8v[CGe])
call QIe(CGe,.03125,true,function d7x)
endfunction
function d9x takes nothing returns boolean
local integer CGe=Qce()
local integer r=GetRandomInt(1,9)
local real x=(((wVv[CGe])*1.)+((r*50)*1.)*Cos(((wRv[CGe]+90)*1.)*bj_DEGTORAD))
local real y=(((wEv[CGe])*1.)+((r*50)*1.)*Sin(((wRv[CGe]+90)*1.)*bj_DEGTORAD))
call d8x(wiv[CGe],wXv[CGe],wOv[CGe],wnv[CGe],x,y,wRv[CGe])
set wav[CGe]=wav[CGe]-1
if wav[CGe]<=0 then
call QDe()
set wiv[CGe]=null
call gBe(CGe)
endif
return false
endfunction
function Dvx takes unit u,real d1,real d2,real r,real x,real y,real a returns nothing
local integer CGe=gbe()
set wiv[CGe]=u
set wnv[CGe]=r
set wXv[CGe]=d1
set wOv[CGe]=d2
set wVv[CGe]=(((x)*1.)+(($FA)*1.)*Cos(((a-90)*1.)*bj_DEGTORAD))
set wEv[CGe]=(((y)*1.)+(($FA)*1.)*Sin(((a-90)*1.)*bj_DEGTORAD))
set wRv[CGe]=a
set wav[CGe]=18
call QIe(CGe,.2,true,function d9x)
endfunction
function Dex takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,3.,.9,oN))*(1.+TKe(u,4857))
local real d2=uce(u,ude(u,$BB8,900,oN),'B006')*(1.+TKe(u,4857))
local real r=ude(u,30,3,oN)
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real a=GetUnitFacing(u)
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
local real d=x9x(u,i)
set d1=d1*d
set d2=d2*d
call Dvx(u,d1,d2,r,x,y,a)
set u=null
return false
endfunction
function Dxx takes nothing returns boolean
return GetSpellAbilityId()==oN and Dex()
endfunction
function Dox takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function Dxx))
set t=null
endfunction
function Drx takes nothing returns boolean
local integer CGe=Qce()
call uee(wcv[CGe],wCv[CGe],true,0,wBv[CGe],'B007')
set wbv[CGe]=wbv[CGe]-1
if wbv[CGe]<=0 or spe(wCv[CGe])or spe(wcv[CGe])then
call QDe()
set wcv[CGe]=null
set wCv[CGe]=null
call gNe(CGe)
endif
return false
endfunction
function Dix takes unit u,unit v,real d returns nothing
local integer CGe=gAe()
set wcv[CGe]=u
set wCv[CGe]=v
set wBv[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set wbv[CGe]=4
call QIe(CGe,1.,true,function Drx)
endfunction
function Dax takes unit u,player p,real x,real y,real d1,real d2 returns boolean
local integer c=0
local unit n=null
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
call Qre(AddSpecialEffect(("war3mapImported\\NDC_effect1.mdl"),((x)*1.),((y)*1.)))
call GroupEnumUnitsInRange(sv,x,y,$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,p)and not spe(n)and not tOe(n)then
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\GreenDragonMissile\\GreenDragonMissile.mdl"),(n),"chest"))
if not(GetUnitAbilityLevel((n),(sa))>0)and BUe[(i)*(20)+4]>0 and GetRandomReal(0,'d')<=18+2*BUe[(i)*(20)+4]then
call xwx(u,n)
endif
call uee(u,n,true,d1,d2,THe(u))
call Dix(u,n,d2)
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
return false
endfunction
function Dnx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set wHv[CGe]=(((wHv[CGe])*1.)+((nN)*1.)*Cos(((wlv[CGe])*1.)*bj_DEGTORAD))
set wjv[CGe]=(((wjv[CGe])*1.)+((nN)*1.)*Sin(((wlv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(wGv[CGe],wHv[CGe],wjv[CGe],wKv[CGe])
call GroupEnumUnitsInRange(sv,wHv[CGe],wjv[CGe],70,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,wgv[CGe])and not spe(n)and not tOe(n)then
call GroupClear(sv)
call Dax(wFv[CGe],wgv[CGe],GetUnitX(n),GetUnitY(n),wJv[CGe],wkv[CGe])
set whv[CGe]=0
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set whv[CGe]=whv[CGe]-1
if whv[CGe]<=0 then
call QDe()
call Qre(wGv[CGe])
set wGv[CGe]=null
set wFv[CGe]=null
set wgv[CGe]=null
call gIe(CGe)
endif
return false
endfunction
function DVx takes unit u,real d,unit v,real r returns nothing
local integer CGe=gRe()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set wFv[CGe]=u
set wlv[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set wHv[CGe]=(((x)*1.)+((30)*1.)*Cos(((wlv[CGe])*1.)*bj_DEGTORAD))
set wjv[CGe]=(((y)*1.)+((30)*1.)*Sin(((wlv[CGe])*1.)*bj_DEGTORAD))
set whv[CGe]=R2I(aN/ nN)
set wGv[CGe]=AddSpecialEffect("Abilities\\Spells\\NightElf\\CorrosiveBreath\\CorrosiveBreathMissile.mdl",wHv[CGe],wjv[CGe])
set wKv[CGe]=sxe(wHv[CGe],wjv[CGe])+'d'
set wJv[CGe]=uBe(u,ude(u,.7,.21,VN))
set wkv[CGe]=uce(u,ude(u,$5DC,450,VN),'B007')
set wgv[CGe]=GetOwningPlayer(wFv[CGe])
call Qre(AddSpecialEffectTarget("Abilities\\Weapons\\SkeletalMageMissile\\SkeletalMageMissile.mdl",u,"hand right"))
call Qre(AddSpecialEffectTarget("Abilities\\Weapons\\SkeletalMageMissile\\SkeletalMageMissile.mdl",u,"hand left"))
set mv=GetPlayerId(wgv[CGe])+1
if BUe[(mv)*(20)+9]>0 then
if not nI[mv]and GetRandomReal(0,'d')<=$C+3*BUe[(mv)*(20)+9]then
call BVx(wFv[CGe],BUe[(mv)*(20)+9],mv)
endif
endif
if r>0 then
set wJv[CGe]=d
set wkv[CGe]=d
endif
call BlzSetSpecialEffectYaw((wGv[CGe]),((wlv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((wGv[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(wGv[CGe],wKv[CGe])
call QIe(CGe,.03125,true,function Dnx)
endfunction
function DEx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set wSv[CGe]=(((wSv[CGe])*1.)+((ON)*1.)*Cos(((wyv[CGe])*1.)*bj_DEGTORAD))
set wtv[CGe]=(((wtv[CGe])*1.)+((ON)*1.)*Sin(((wyv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(wQv[CGe],wSv[CGe],wtv[CGe],wWv[CGe])
if wwv[CGe]<7 then
call GroupEnumUnitsInRange(sv,wSv[CGe],wtv[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,wPv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,wqv[CGe])then
call yHe(wpv[CGe],n,wUv[CGe],1.)
call yKe(wpv[CGe],n,wUv[CGe],2.)
call GroupAddUnit(wqv[CGe],n)
call Qre(AddSpecialEffect(("war3mapImported\\TNK_tranphai2.mdl"),((GetUnitX(n))*1.),((GetUnitY(n))*1.)))
call uee(wpv[CGe],n,false,wTv[CGe],wuv[CGe],THe(wpv[CGe]))
if not(GetUnitAbilityLevel((n),(Ua))>0)and(GetUnitAbilityLevel((wpv[CGe]),(wa))>0)then
call oex(wpv[CGe],n)
endif
set wwv[CGe]=wwv[CGe]+1
if wwv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set wsv[CGe]=wsv[CGe]-1
if wsv[CGe]<=0 then
call QDe()
call Qre(wQv[CGe])
call Qne(wqv[CGe])
set wqv[CGe]=null
set wQv[CGe]=null
set wpv[CGe]=null
set wPv[CGe]=null
call gOe(CGe)
endif
return false
endfunction
function DXx takes unit u,real x,real y,real d1,real d2,real r,real a,real db returns nothing
local integer CGe=gXe()
set wpv[CGe]=u
set wyv[CGe]=a
set wSv[CGe]=x
set wtv[CGe]=y
set wsv[CGe]=R2I(db/ ON)
if wyv[CGe]>=-90 and wyv[CGe]<=90 then
set wQv[CGe]=AddSpecialEffect("war3mapImported\\TNK_tranphai111.mdl",wSv[CGe],wtv[CGe])
else
set wQv[CGe]=AddSpecialEffect("war3mapImported\\TNK_tranphai1111.mdl",wSv[CGe],wtv[CGe])
endif
set wWv[CGe]=sxe(wSv[CGe],wtv[CGe])
set wTv[CGe]=d1
set wuv[CGe]=d2
set wUv[CGe]=r
set wwv[CGe]=0
set wqv[CGe]=CreateGroup()
set wPv[CGe]=GetOwningPlayer(wpv[CGe])
call BlzSetSpecialEffectYaw((wQv[CGe]),((wyv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((wQv[CGe]),((1.3)*1.))
call BlzSetSpecialEffectZ(wQv[CGe],wWv[CGe])
call QIe(CGe,.03125,true,function DEx)
endfunction
function DOx takes nothing returns boolean
local integer CGe=Qce()
set w_v[CGe]=w_v[CGe]-1
if w_v[CGe]<=0 then
call QDe()
call Qre(w0v[CGe])
set w0v[CGe]=null
call gEe(CGe)
endif
return false
endfunction
function DRx takes real x,real y,real a returns nothing
local integer CGe=gVe()
set w_v[CGe]=1
set w0v[CGe]=AddSpecialEffect("war3mapImported\\TNK_vanlongcast4.mdl",x,y)
call BlzSetSpecialEffectYaw((w0v[CGe]),((a)*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((w0v[CGe]),((.4)*1.))
call BlzSetSpecialEffectZ(w0v[CGe],sxe(x,y)+70)
call QIe(CGe,.3,true,function DOx)
endfunction
function DIx takes unit u,real d,unit v,real r returns nothing
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real a=soe(x,y,GetUnitX(v),GetUnitY(v))
local real d1=uBe(u,ude(u,4.,1.2,EN))
local real d2=uce(u,ude(u,$DAC,$41A,EN),'B009')
local real zr=ude(u,20,2,EN)
set d1=d1*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A09U'))
set d2=d2*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A09U'))
call DRx(x,y,a)
set x=(((x)*1.)+((50)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set y=(((y)*1.)+((50)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set Pv=d1*ude(u,.06,.01,EN)
if Pv>$7530 then
set Pv=$7530
endif
call Tse(u,Pv)
if r>0 then
set zr=r
set d1=d
set d2=d
endif
call DXx(u,x,y,d1,d2,zr,a,XN)
call DXx(u,x,y,d1,d2,zr,a-24,XN)
call DXx(u,x,y,d1,d2,zr,a+24,XN)
endfunction
function DAx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=1.
set w9v[CGe]=(((w9v[CGe])*1.)+((IN)*1.)*Cos(((Wav[CGe])*1.)*bj_DEGTORAD))
set Wvv[CGe]=(((Wvv[CGe])*1.)+((IN)*1.)*Sin(((Wav[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(w7v[CGe],w9v[CGe],Wvv[CGe],Wiv[CGe])
if Wrv[CGe]<7 then
call GroupEnumUnitsInRange(sv,w9v[CGe],Wvv[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,w5v[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,w6v[CGe])then
call yHe(w4v[CGe],n,Wov[CGe],2.)
call GroupAddUnit(w6v[CGe],n)
call Qre(AddSpecialEffectTarget(("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl"),(n),"chest"))
if BUe[(Wnv[CGe])*(20)+$A]>0 and tle(n)<=50 then
set r=1.+.1+.02*BUe[(Wnv[CGe])*(20)+$A]
endif
call uee(w4v[CGe],n,false,Wev[CGe]*r,Wxv[CGe]*r,THe(w4v[CGe]))
call Tse(w4v[CGe],(Wev[CGe]+Wxv[CGe])*.15)
call Qle("|cff7fff00"+"+"+I2S(R2I((Wev[CGe]+Wxv[CGe])*.15))+"|r",GetUnitX(w4v[CGe]),GetUnitY(w4v[CGe]))
set Wrv[CGe]=Wrv[CGe]+1
if Wrv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set w8v[CGe]=w8v[CGe]-1
if w8v[CGe]<=0 then
call QDe()
call BlzSetSpecialEffectAlpha((w7v[CGe]),(0))
call Qre(w7v[CGe])
call Qne(w6v[CGe])
set w6v[CGe]=null
set w7v[CGe]=null
set w4v[CGe]=null
set w5v[CGe]=null
call gne(CGe)
endif
return false
endfunction
function DNx takes unit u,real d1,real d2,real r,real x,real y,real a returns nothing
local integer CGe=gae()
set w4v[CGe]=u
set Wav[CGe]=a
set w9v[CGe]=(((x)*1.)+(('d')*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set Wvv[CGe]=(((y)*1.)+(('d')*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set w8v[CGe]=R2I(RN/ IN)
set w7v[CGe]=AddSpecialEffect("war3mapImported\\TDBD_hoahuyetkq.mdl",w9v[CGe],Wvv[CGe])
set Wiv[CGe]=sxe(w9v[CGe],Wvv[CGe])+70
set Wev[CGe]=d1
set Wxv[CGe]=d2
set Wov[CGe]=r
set Wrv[CGe]=0
set w6v[CGe]=CreateGroup()
set w5v[CGe]=GetOwningPlayer(w4v[CGe])
set Wnv[CGe]=GetPlayerId(w5v[CGe])+1
call BlzSetSpecialEffectYaw((w7v[CGe]),((Wav[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((w7v[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(w7v[CGe],Wiv[CGe])
call QIe(CGe,.03125,true,function DAx)
endfunction
function Dbx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,4.,1.2,AN))*(1.+TKe(u,4857))
local real d2=uce(u,ude(u,$FA0,$4B0,AN),'B006')*(1.+TKe(u,4857))
local real r=ude(u,30,3,AN)
local real a=GetUnitFacing(u)
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
set d1=d1*Rqx(u,i)
set d2=d2*Rqx(u,i)
call DNx(u,d1,d2,r,x,y,a)
call DNx(u,d1,d2,r,x,y,a+45)
call DNx(u,d1,d2,r,x,y,a-45)
call DNx(u,d1,d2,r,x,y,a+90)
call DNx(u,d1,d2,r,x,y,a-90)
call DNx(u,d1,d2,r,x,y,a+$87)
call DNx(u,d1,d2,r,x,y,a-$87)
call DNx(u,d1,d2,r,x,y,a+$B4)
set u=null
return false
endfunction
function DBx takes nothing returns boolean
return GetSpellAbilityId()==AN and Dbx()
endfunction
function Dcx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function DBx))
set t=null
endfunction
function DCx takes nothing returns boolean
local integer CGe=Qce()
if(GetUnitAbilityLevel((WNv[CGe]),(DI))>0)and TQe(WNv[CGe])<=30. then
call uee(WIv[CGe],WNv[CGe],false,0,WRv[CGe]*(1.07+.03*BUe[(WAv[CGe])*(20)+4]),'B007')
else
call uee(WIv[CGe],WNv[CGe],false,0,WRv[CGe],'B007')
endif
set WOv[CGe]=WOv[CGe]-1
if WOv[CGe]<=0 or spe(WNv[CGe])or spe(WIv[CGe])then
call QDe()
set WIv[CGe]=null
set WNv[CGe]=null
call gie(CGe)
endif
return false
endfunction
function Ddx takes unit u,unit v,real d returns nothing
local integer CGe=gre()
local effect e=AddSpecialEffect("war3mapImported\\NDD_poidamage3.mdl",GetUnitX(v),GetUnitY(v))
set WIv[CGe]=u
set WNv[CGe]=v
set WRv[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set WOv[CGe]=2
set WAv[CGe]=(GetPlayerId(GetOwningPlayer((WIv[CGe])))+1)
call BlzSetSpecialEffectScale((e),((.65)*1.))
call Qre(e)
set e=null
call QIe(CGe,1.,true,function DCx)
endfunction
function DDx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set WFv[CGe]=(((WFv[CGe])*1.)+((bN)*1.)*Cos(((WJv[CGe])*1.)*bj_DEGTORAD))
set Wgv[CGe]=(((Wgv[CGe])*1.)+((bN)*1.)*Sin(((WJv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(WDv[CGe],WFv[CGe],Wgv[CGe],Wjv[CGe])
if WKv[CGe]<7 then
call GroupEnumUnitsInRange(sv,WFv[CGe],Wgv[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Wdv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Wkv[CGe])then
if WLv[CGe]==1 then
call yHe(WCv[CGe],n,WHv[CGe],1.)
call Ddx(WCv[CGe],n,Whv[CGe])
if not(GetUnitAbilityLevel((n),(DI))>0)and BUe[(Wlv[CGe])*(20)+4]>0 then
call Bux(WCv[CGe],Wlv[CGe],n)
endif
endif
call uee(WCv[CGe],n,false,WGv[CGe],Whv[CGe],THe(WCv[CGe]))
call GroupAddUnit(Wkv[CGe],n)
set WKv[CGe]=WKv[CGe]+1
if WKv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
else
set Wfv[CGe]=0
endif
set n=null
set Wfv[CGe]=Wfv[CGe]-1
if Wfv[CGe]<=0 then
call QDe()
call Qre(WDv[CGe])
call Qne(Wkv[CGe])
set Wkv[CGe]=null
set WDv[CGe]=null
set WCv[CGe]=null
set Wdv[CGe]=null
call goe(CGe)
endif
return false
endfunction
function Dfx takes unit u,real x,real y,real d1,real d2,real r,real a,integer b returns nothing
local integer CGe=gxe()
set WCv[CGe]=u
set WFv[CGe]=(((x)*1.)+(('d')*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set Wgv[CGe]=(((y)*1.)+(('d')*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set WJv[CGe]=a
set WGv[CGe]=d1
set Whv[CGe]=d2
set WLv[CGe]=b
set WHv[CGe]=r
set WKv[CGe]=0
set Wjv[CGe]=sxe(WFv[CGe],Wgv[CGe])+'d'
set WDv[CGe]=AddSpecialEffect("war3mapImported\\NDD_DeathCoilMissile.mdl",WFv[CGe],Wgv[CGe])
set Wfv[CGe]=R2I(NN/ bN)
set Wkv[CGe]=CreateGroup()
set Wdv[CGe]=GetOwningPlayer(WCv[CGe])
set Wlv[CGe]=GetPlayerId(Wdv[CGe])+1
call BlzSetSpecialEffectYaw((WDv[CGe]),((WJv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((WDv[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(WDv[CGe],Wjv[CGe])
call QIe(CGe,.03125,true,function DDx)
endfunction
function DFx takes nothing returns boolean
local integer CGe=Qce()
set WPv[CGe]=WPv[CGe]-1
if WPv[CGe]<=0 then
call QDe()
call Dfx(Wuv[CGe],WQv[CGe],Wsv[CGe],WSv[CGe],Wtv[CGe],WTv[CGe],Wqv[CGe],WPv[CGe])
set Wuv[CGe]=null
call gee(CGe)
endif
return false
endfunction
function Dgx takes unit u,real d,unit v,real r returns nothing
local integer CGe=gve()
set Wuv[CGe]=u
set WQv[CGe]=GetUnitX(u)
set Wsv[CGe]=GetUnitY(u)
set WPv[CGe]=1
set WSv[CGe]=uBe(u,ude(u,2.,.6,BN))
set Wtv[CGe]=uce(u,ude(u,$7D0,600,BN),'B007')
set WTv[CGe]=ude(u,20,2,BN)
set Wqv[CGe]=soe(WQv[CGe],Wsv[CGe],GetUnitX(v),GetUnitY(v))
set WSv[CGe]=WSv[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A05M'))
set Wtv[CGe]=Wtv[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A05M'))
set mv=(GetPlayerId(GetOwningPlayer((u)))+1)
if BUe[(mv)*(20)+9]>0 then
set Pv=WSv[CGe]*(.02+.01*BUe[(mv)*(20)+9])
if Pv>$2904 then
set Pv=$2904
endif
call Tse(Wuv[CGe],Pv)
endif
if r>0 then
set WSv[CGe]=d
set Wtv[CGe]=d
set WTv[CGe]=r
endif
call Qre(AddSpecialEffect(("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl"),((WQv[CGe])*1.),((Wsv[CGe])*1.)))
call Dfx(Wuv[CGe],WQv[CGe],Wsv[CGe],WSv[CGe],Wtv[CGe],WTv[CGe],Wqv[CGe],WPv[CGe])
call QIe(CGe,.32,true,function DFx)
endfunction
function DGx takes nothing returns boolean
local integer CGe=Qce()
if(GetUnitAbilityLevel((W_v[CGe]),(DI))>0)and TQe(W_v[CGe])<=30. then
call uee(Wzv[CGe],W_v[CGe],false,0,WYv[CGe]*(1.07+.03*BUe[(WZv[CGe])*(20)+4]),'B007')
else
call uee(Wzv[CGe],W_v[CGe],false,0,WYv[CGe],'B007')
endif
set Wyv[CGe]=Wyv[CGe]-1
if Wyv[CGe]<=0 or spe(W_v[CGe])or spe(Wzv[CGe])then
call QDe()
set Wzv[CGe]=null
set W_v[CGe]=null
call F9e(CGe)
endif
return false
endfunction
function Dhx takes unit u,unit v,real d returns nothing
local integer CGe=F8e()
set Wzv[CGe]=u
set W_v[CGe]=v
set WYv[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set Wyv[CGe]=2
call QIe(CGe,1.,true,function DGx)
endfunction
function DHx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=1.
set W7v[CGe]=(((W7v[CGe])*1.)+((CN)*1.)*Cos(((yov[CGe])*1.)*bj_DEGTORAD))
set W8v[CGe]=(((W8v[CGe])*1.)+((CN)*1.)*Sin(((yov[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(W5v[CGe],W7v[CGe],W8v[CGe],yxv[CGe])
if yiv[CGe]<7 then
call GroupEnumUnitsInRange(sv,W7v[CGe],W8v[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,W4v[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,yrv[CGe])then
call yHe(W3v[CGe],n,yev[CGe],1.)
call GroupAddUnit(yrv[CGe],n)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\GargoyleMissile\\GargoyleMissile.mdl"),(n),"chest"))
if not(GetUnitAbilityLevel((n),(DI))>0)and BUe[(yav[CGe])*(20)+4]>0 then
call Bux(W3v[CGe],yav[CGe],n)
endif
call uee(W3v[CGe],n,false,W9v[CGe],yvv[CGe],THe(W3v[CGe]))
call Dhx(W3v[CGe],n,yvv[CGe])
set yiv[CGe]=yiv[CGe]+1
if yiv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
else
set W6v[CGe]=0
endif
set n=null
set W6v[CGe]=W6v[CGe]-1
if W6v[CGe]<=0 then
call QDe()
call Qre(W5v[CGe])
call Qne(yrv[CGe])
set yrv[CGe]=null
set W5v[CGe]=null
set W3v[CGe]=null
set W4v[CGe]=null
call F7e(CGe)
endif
return false
endfunction
function Djx takes unit u,real d,unit v,real r returns nothing
local integer CGe=F6e()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set W3v[CGe]=u
set yov[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set W7v[CGe]=(((x)*1.)+((50)*1.)*Cos(((yov[CGe])*1.)*bj_DEGTORAD))
set W8v[CGe]=(((y)*1.)+((50)*1.)*Sin(((yov[CGe])*1.)*bj_DEGTORAD))
set W9v[CGe]=uBe(u,ude(u,1.,.3,dN))
set yvv[CGe]=uce(u,ude(u,$3E8,300,dN),'B007')
set yev[CGe]=ude(u,$F,2,dN)
set yiv[CGe]=0
set yxv[CGe]=sxe(W7v[CGe],W8v[CGe])+'d'
set W5v[CGe]=AddSpecialEffect("war3mapImported\\NDD_huyetdao.mdl",W7v[CGe],W8v[CGe])
set W6v[CGe]=R2I(cN/ CN)
set yrv[CGe]=CreateGroup()
set W4v[CGe]=GetOwningPlayer(W3v[CGe])
set yav[CGe]=GetPlayerId(W4v[CGe])+1
if BUe[(yav[CGe])*(20)+9]>0 then
set Pv=W9v[CGe]*(.02+.01*BUe[(yav[CGe])*(20)+9])
if Pv>$708 then
set Pv=$708
endif
call Tse(W3v[CGe],Pv)
endif
call BlzSetSpecialEffectYaw((W5v[CGe]),((yov[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((W5v[CGe]),((1.5)*1.))
call BlzSetSpecialEffectZ(W5v[CGe],yxv[CGe])
if r>0 then
set W9v[CGe]=d
set yvv[CGe]=d
set yev[CGe]=r
endif
call QIe(CGe,.03125,true,function DHx)
endfunction
function DJx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set yNv[CGe]=(((yNv[CGe])*1.)+((fN)*1.)*Cos(((yfv[CGe])*1.)*bj_DEGTORAD))
set ybv[CGe]=(((ybv[CGe])*1.)+((fN)*1.)*Sin(((yfv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(yIv[CGe],yNv[CGe],ybv[CGe],yDv[CGe])
if ydv[CGe]<7 then
call GroupEnumUnitsInRange(sv,yNv[CGe],ybv[CGe],$A0,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,yOv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,yRv[CGe])then
call yHe(yXv[CGe],n,yCv[CGe],1.)
call GroupAddUnit(yRv[CGe],n)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TLBD_effect3.mdl"),(n),"chest"))
call uee(yXv[CGe],n,true,yBv[CGe],ycv[CGe],THe(yXv[CGe]))
set ydv[CGe]=ydv[CGe]+1
if ydv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set yAv[CGe]=yAv[CGe]-1
if yAv[CGe]<=0 then
call QDe()
call Qre(yIv[CGe])
call Qne(yRv[CGe])
set yRv[CGe]=null
set yIv[CGe]=null
set yXv[CGe]=null
set yOv[CGe]=null
call F5e(CGe)
endif
return false
endfunction
function Dkx takes unit u,real d,unit v,real r returns nothing
local integer CGe=F4e()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local integer i=0
local real rz=0
set yXv[CGe]=u
set yfv[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set yNv[CGe]=(((x)*1.)+((50)*1.)*Cos(((yfv[CGe])*1.)*bj_DEGTORAD))
set ybv[CGe]=(((y)*1.)+((50)*1.)*Sin(((yfv[CGe])*1.)*bj_DEGTORAD))
set yAv[CGe]=R2I(DN/ fN)
set yIv[CGe]=AddSpecialEffect("war3mapImported\\TLBD_vongxoay2.mdl",yNv[CGe],ybv[CGe])
set yDv[CGe]=sxe(yNv[CGe],ybv[CGe])+40
set yBv[CGe]=uBe(u,ude(u,1.,.3,FN))
set ycv[CGe]=uce(u,ude(u,$3E8,300,FN),'B006')
set yCv[CGe]=ude(u,20,2,FN)
set ydv[CGe]=0
set yRv[CGe]=CreateGroup()
set yOv[CGe]=GetOwningPlayer(yXv[CGe])
set i=GetPlayerId(yOv[CGe])+1
set rz=x9x(u,i)
set yBv[CGe]=yBv[CGe]*rz
set ycv[CGe]=ycv[CGe]*rz
if r>0 then
set yBv[CGe]=d
set ycv[CGe]=d
set yCv[CGe]=r
endif
call BlzSetSpecialEffectYaw((yIv[CGe]),((yfv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((yIv[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(yIv[CGe],yDv[CGe])
call QIe(CGe,.03125,true,function DJx)
endfunction
function DKx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set ykv[CGe]=(((ykv[CGe])*1.)+((GN)*1.)*Cos(((ypv[CGe])*1.)*bj_DEGTORAD))
set yKv[CGe]=(((yKv[CGe])*1.)+((GN)*1.)*Sin(((ypv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(yjv[CGe],ykv[CGe],yKv[CGe],yMv[CGe])
if yqv[CGe]<7 then
call GroupEnumUnitsInRange(sv,ykv[CGe],yKv[CGe],90,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,yHv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,yPv[CGe])then
call yKe(yhv[CGe],n,ymv[CGe],1)
call GroupAddUnit(yPv[CGe],n)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl"),(n),"chest"))
call uee(yhv[CGe],n,true,ylv[CGe],yLv[CGe],THe(yhv[CGe]))
set yqv[CGe]=yqv[CGe]+1
if yqv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set yJv[CGe]=yJv[CGe]-1
if yJv[CGe]<=0 then
call QDe()
call Qre(yjv[CGe])
call Qne(yPv[CGe])
set yPv[CGe]=null
set yjv[CGe]=null
set yhv[CGe]=null
set yHv[CGe]=null
call F3e(CGe)
endif
return false
endfunction
function Dlx takes unit u,real d1,real d2,real r,real a returns nothing
local integer CGe=F2e()
set yhv[CGe]=u
set ypv[CGe]=a
set ykv[CGe]=(((GetUnitX(u))*1.)+((60)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set yKv[CGe]=(((GetUnitY(u))*1.)+((60)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set ylv[CGe]=d1
set yLv[CGe]=d2
set ymv[CGe]=r
set yMv[CGe]=sxe(ykv[CGe],yKv[CGe])+'d'
set yjv[CGe]=AddSpecialEffect("war3mapImported\\CBC_hanglong.mdl",ykv[CGe],yKv[CGe])
set yJv[CGe]=R2I(gN/ GN)
set yPv[CGe]=CreateGroup()
set yHv[CGe]=GetOwningPlayer(yhv[CGe])
set yqv[CGe]=0
call BlzSetSpecialEffectYaw((yjv[CGe]),((ypv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((yjv[CGe]),((2.2)*1.))
call BlzSetSpecialEffectZ(yjv[CGe],yMv[CGe])
call QIe(CGe,.03125,true,function DKx)
endfunction
function DLx takes unit u,real d,unit v,real r returns nothing
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
local real d1=uBe(u,ude(u,.7,.21,hN))
local real d2=uce(u,ude(u,$3E8,300,hN),'B009')
local real rz=ude(u,$A,2,hN)
local real a=soe(GetUnitX(u),GetUnitY(u),GetUnitX(v),GetUnitY(v))
local integer lv=GetUnitAbilityLevel(u,hN)
if(GetUnitAbilityLevel((u),('A08N'))>0)then
call xux(u,BUe[(i)*(20)+$A],i)
endif
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl"),(u),"chest"))
if r>0 then
set lv=$A
set d1=d
set d2=d
set rz=r
endif
if lv==$A then
call Dlx(u,d1,d2,rz,a+45)
call Dlx(u,d1,d2,rz,a-45)
call Dlx(u,d1,d2,rz,a+30)
call Dlx(u,d1,d2,rz,a-30)
call Dlx(u,d1,d2,rz,a+$F)
call Dlx(u,d1,d2,rz,a-$F)
call Dlx(u,d1,d2,rz,a)
elseif lv==9 then
call Dlx(u,d1,d2,rz,a+35)
call Dlx(u,d1,d2,rz,a-35)
call Dlx(u,d1,d2,rz,a+21)
call Dlx(u,d1,d2,rz,a-21)
call Dlx(u,d1,d2,rz,a+7)
call Dlx(u,d1,d2,rz,a-7)
elseif lv==8 then
call Dlx(u,d1,d2,rz,a+30)
call Dlx(u,d1,d2,rz,a-30)
call Dlx(u,d1,d2,rz,a+$F)
call Dlx(u,d1,d2,rz,a-$F)
call Dlx(u,d1,d2,rz,a)
elseif lv==7 then
call Dlx(u,d1,d2,rz,a+30)
call Dlx(u,d1,d2,rz,a-30)
call Dlx(u,d1,d2,rz,a+$A)
call Dlx(u,d1,d2,rz,a-$A)
elseif lv==6 then
call Dlx(u,d1,d2,rz,a+$F)
call Dlx(u,d1,d2,rz,a-$F)
call Dlx(u,d1,d2,rz,a)
elseif lv==5 then
call Dlx(u,d1,d2,rz,a+8)
call Dlx(u,d1,d2,rz,a-8)
else
call Dlx(u,d1,d2,rz,a)
endif
call Qre(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl",u,"weapon"))
endfunction
function Dmx takes nothing returns boolean
local integer CGe=Qce()
if not spe(ywv[CGe])then
if yUv[CGe]>0 and GetRandomReal(0,'d')<=($A+yUv[CGe])then
call uee(yuv[CGe],ywv[CGe],true,0,yTv[CGe]*(1.2+.04*yUv[CGe]),'B007')
else
call uee(yuv[CGe],ywv[CGe],true,0,yTv[CGe],'B007')
endif
endif
set ytv[CGe]=ytv[CGe]-1
if ytv[CGe]<=0 or spe(ywv[CGe])or spe(yuv[CGe])then
call QDe()
set yuv[CGe]=null
set ywv[CGe]=null
call F1e(CGe)
endif
return false
endfunction
function DMx takes unit u,unit v,real d returns nothing
local integer CGe=F0e()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
set yUv[CGe]=BUe[(i)*(20)+9]
set yuv[CGe]=u
set ywv[CGe]=v
set yTv[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set ytv[CGe]=8
set p=null
call QIe(CGe,1.,true,function Dmx)
endfunction
function Dpx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
local real x=GetRandomReal(y1v[CGe]-$C8,y1v[CGe]+$C8)
local real y=GetRandomReal(y2v[CGe]-$C8,y2v[CGe]+$C8)
local real lv=I2R(GetUnitAbilityLevel(yzv[CGe],'A0VD'))
call Qre(AddSpecialEffect(("war3mapImported\\MGK_kiemdangbh3.mdl"),((x)*1.),((y)*1.)))
set x=GetRandomReal(y1v[CGe]-$C8,y1v[CGe]+$C8)
set y=GetRandomReal(y2v[CGe]-$C8,y2v[CGe]+$C8)
call Qre(AddSpecialEffect(("war3mapImported\\MGK_kiemdangbh3.mdl"),((x)*1.),((y)*1.)))
if y4v[CGe]<=5 then
call GroupEnumUnitsInRange(sv,y1v[CGe],y2v[CGe],400,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,y3v[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,y6v[CGe])then
call yLe(yzv[CGe],n,y0v[CGe],2.)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Other\\AcidBomb\\BottleImpact.mdl"),(n),"chest"))
call uee(yzv[CGe],n,true,yZv[CGe],y_v[CGe],THe(yzv[CGe]))
call DMx(yzv[CGe],n,y_v[CGe])
if(GetUnitAbilityLevel((yzv[CGe]),('B050'))>0)and GetRandomReal(0,'d')<=35+5*lv then
call Tse(yzv[CGe],(yZv[CGe]+y_v[CGe])*(.08+.02*lv))
endif
call GroupAddUnit(y6v[CGe],n)
set c=c+1
if c>=$A then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set y4v[CGe]=y4v[CGe]-1
if y4v[CGe]<=0 then
call QDe()
call Qne(y6v[CGe])
set y6v[CGe]=null
set yzv[CGe]=null
set y3v[CGe]=null
call F_e(CGe)
endif
return false
endfunction
function DPx takes unit u,real d1,real d2,real r,real x,real y returns nothing
local integer CGe=FZe()
set yzv[CGe]=u
set yZv[CGe]=d1
set y_v[CGe]=d2
set y0v[CGe]=r
set y1v[CGe]=x
set y2v[CGe]=y
set y4v[CGe]=8
set y3v[CGe]=GetOwningPlayer(yzv[CGe])
set y5v[CGe]=GetPlayerId(y3v[CGe])+1
set y6v[CGe]=CreateGroup()
call QIe(CGe,.1,true,function Dpx)
endfunction
function Dqx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,3.,.9,HN))*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A0VF'))
local real d2=uce(u,ude(u,$BB8,900,HN),'B007')*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A0VF'))
local real r=ude(u,35,2,HN)
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl"),(u),"origin"))
if(GetUnitAbilityLevel((u),('A0VI'))>0)then
call Ifx(u,HN)
endif
call DPx(u,d1,d2,r,x,y)
set u=null
return false
endfunction
function DQx takes nothing returns boolean
return GetSpellAbilityId()==HN and Dqx()
endfunction
function Dsx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function DQx))
set t=null
endfunction
function DSx takes unit u,real d,real a returns nothing
local real x=GetUnitX(u)
local real y=GetUnitY(u)
call Rmx(u,x,y,d,d,'d',a)
call Rmx(u,x,y,d,d,'d',a-$F)
call Rmx(u,x,y,d,d,'d',a+$F)
call Rmx(u,x,y,d,d,'d',a-30)
call Rmx(u,x,y,d,d,'d',a+30)
call Rmx(u,x,y,d,d,'d',a-45)
call Rmx(u,x,y,d,d,'d',a+45)
call Rmx(u,x,y,d,d,'d',a-60)
call Rmx(u,x,y,d,d,'d',a+60)
endfunction
function Dtx takes nothing returns boolean
local integer CGe=Qce()
call V3x(YVv[CGe],Yav[CGe],Yrv[CGe],Yiv[CGe],Yxv[CGe],Yov[CGe],Yev[CGe],Ynv[CGe]+GetRandomInt(-3,3)*25,500,Ynv[CGe])
set Yvv[CGe]=Yvv[CGe]-1
if Yvv[CGe]<=0 then
call QDe()
set YVv[CGe]=null
set Yav[CGe]=null
call Fze(CGe)
endif
return false
endfunction
function DTx takes unit u,player p,real d1,real d2,real r,real x,real y,unit v returns nothing
local integer CGe=FYe()
set YVv[CGe]=u
set Yxv[CGe]=d1
set Yov[CGe]=d2
set Yev[CGe]=r
set Yrv[CGe]=x
set Yiv[CGe]=y
set Yav[CGe]=p
set Ynv[CGe]=soe(Yrv[CGe],Yiv[CGe],GetUnitX(v),GetUnitY(v))
set Yvv[CGe]=6
call QIe(CGe,.1,true,function Dtx)
endfunction
function Dux takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set Ybv[CGe]=(((Ybv[CGe])*1.)+((kN)*1.)*Cos(((Yfv[CGe])*1.)*bj_DEGTORAD))
set YBv[CGe]=(((YBv[CGe])*1.)+((kN)*1.)*Sin(((Yfv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(YAv[CGe],Ybv[CGe],YBv[CGe],YDv[CGe])
if Ygv[CGe]<5 then
call GroupEnumUnitsInRange(sv,Ybv[CGe],YBv[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,YIv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,YFv[CGe])then
call DTx(YRv[CGe],YIv[CGe],Ycv[CGe],YCv[CGe],Ydv[CGe],Ybv[CGe],YBv[CGe],n)
if not(IsUnitType((n),UNIT_TYPE_TAUREN))then
call s5e(n,$C8,.5,soe(Ybv[CGe],YBv[CGe],GetUnitX(n),GetUnitY(n)),false,false)
endif
call GroupAddUnit(YFv[CGe],n)
set Ygv[CGe]=Ygv[CGe]+1
if Ygv[CGe]>=5 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set YNv[CGe]=YNv[CGe]-1
if YNv[CGe]<=0 then
call QDe()
call Qre(YAv[CGe])
call Qne(YFv[CGe])
set YFv[CGe]=null
set YAv[CGe]=null
set YRv[CGe]=null
set YIv[CGe]=null
call Fye(CGe)
endif
return false
endfunction
function DUx takes unit u,real d1,real d2,real r,real a returns nothing
local integer CGe=FWe()
set YRv[CGe]=u
set Yfv[CGe]=a
set Ybv[CGe]=GetUnitX(u)
set YBv[CGe]=GetUnitY(u)
set Ycv[CGe]=d1
set YCv[CGe]=d2
set Ydv[CGe]=r
set YDv[CGe]=sxe(Ybv[CGe],YBv[CGe])+'d'
set YAv[CGe]=AddSpecialEffect("war3mapImported\\DTK_missile.mdl",Ybv[CGe],YBv[CGe])
set YNv[CGe]=R2I(JN/ kN)
set YFv[CGe]=CreateGroup()
set YIv[CGe]=GetOwningPlayer(YRv[CGe])
set Ygv[CGe]=0
call BlzSetSpecialEffectYaw((YAv[CGe]),((Yfv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((YAv[CGe]),((2.)*1.))
call BlzSetSpecialEffectZ(YAv[CGe],YDv[CGe])
call QIe(CGe,.03125,true,function Dux)
endfunction
function Dwx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,3.,.9,jN))*(1.+TKe(u,4857))
local real d2=uce(u,ude(u,$BB8,900,jN),'B008')*(1.+TKe(u,4857))
local real r=ude(u,20,2,jN)
local real a=soe(GetUnitX(u),GetUnitY(u),GetSpellTargetX(),GetSpellTargetY())
call DUx(u,d1,d2,r,a)
set u=null
return false
endfunction
function DWx takes nothing returns boolean
return GetSpellAbilityId()==jN and Dwx()
endfunction
function Dyx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function DWx))
set t=null
endfunction
function DYx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=1.
set YLv[CGe]=(((YLv[CGe])*1.)+((lN)*1.)*Cos(((YQv[CGe])*1.)*bj_DEGTORAD))
set Ymv[CGe]=(((Ymv[CGe])*1.)+((lN)*1.)*Sin(((YQv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(YKv[CGe],YLv[CGe],Ymv[CGe],Yqv[CGe])
if YPv[CGe]<4 then
call GroupEnumUnitsInRange(sv,YLv[CGe],Ymv[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,YJv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Ykv[CGe])then
call GroupAddUnit(Ykv[CGe],n)
if BUe[(Ysv[CGe])*(20)+$A]>0 and tle(n)<=50 then
set r=1.+.1+.02*BUe[(Ysv[CGe])*(20)+$A]
endif
call uee(Yjv[CGe],n,false,YMv[CGe]*r,Ypv[CGe]*r,THe(Yjv[CGe]))
set YPv[CGe]=YPv[CGe]+1
if YPv[CGe]>=4 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set Ylv[CGe]=Ylv[CGe]-1
if Ylv[CGe]<=0 then
call QDe()
call Qre(YKv[CGe])
call Qne(Ykv[CGe])
set Ykv[CGe]=null
set YKv[CGe]=null
set Yjv[CGe]=null
set YJv[CGe]=null
call Fwe(CGe)
endif
return false
endfunction
function Dzx takes unit u,real d1,real d2,player p,real x,real y,real a returns nothing
local integer CGe=FUe()
set Yjv[CGe]=u
set YQv[CGe]=a
set YLv[CGe]=x
set Ymv[CGe]=y
set Ylv[CGe]=R2I(KN/ lN)
set YKv[CGe]=AddSpecialEffect("war3mapImported\\TDBD_lacnhatwave.mdl",YLv[CGe],Ymv[CGe])
set Yqv[CGe]=sxe(YLv[CGe],Ymv[CGe])+'d'
set YMv[CGe]=d1
set Ypv[CGe]=d2
set YPv[CGe]=0
set Ykv[CGe]=CreateGroup()
set YJv[CGe]=p
set Ysv[CGe]=GetPlayerId(YJv[CGe])+1
call Qxe((YKv[CGe]),((30*I2R(GetRandomInt(-1,1)))*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectYaw((YKv[CGe]),((YQv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((YKv[CGe]),((.4)*1.))
call BlzSetSpecialEffectZ(YKv[CGe],Yqv[CGe])
call QIe(CGe,.03125,true,function DYx)
endfunction
function DZx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=1.
set YYv[CGe]=(((YYv[CGe])*1.)+((lN)*1.)*Cos(((Y3v[CGe])*1.)*bj_DEGTORAD))
set Yzv[CGe]=(((Yzv[CGe])*1.)+((lN)*1.)*Sin(((Y3v[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(YWv[CGe],YYv[CGe],Yzv[CGe],Y2v[CGe])
if Y1v[CGe]<4 then
call GroupEnumUnitsInRange(sv,YYv[CGe],Yzv[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,YUv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,Ywv[CGe])then
call yHe(Yuv[CGe],n,Y0v[CGe],1.)
call GroupAddUnit(Ywv[CGe],n)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TDBD_targeteffect.mdl"),(n),"origin"))
if BUe[(Y4v[CGe])*(20)+$A]>0 and tle(n)<=50 then
set r=1.+.1+.02*BUe[(Y4v[CGe])*(20)+$A]
endif
call uee(Yuv[CGe],n,false,YZv[CGe]*r,Y_v[CGe]*r,THe(Yuv[CGe]))
if not Y5v[CGe]and GetRandomReal(0,'d')<=20 then
set Y5v[CGe]=true
call Dzx(Yuv[CGe],YZv[CGe],Y_v[CGe],YUv[CGe],YYv[CGe],Yzv[CGe],Y3v[CGe]+30*GetRandomInt(-1,1))
endif
set Y1v[CGe]=Y1v[CGe]+1
if Y1v[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set Yyv[CGe]=Yyv[CGe]-1
if Yyv[CGe]<=0 then
call QDe()
call Qre(YWv[CGe])
call Qne(Ywv[CGe])
set Ywv[CGe]=null
set YWv[CGe]=null
set Yuv[CGe]=null
set YUv[CGe]=null
call Fue(CGe)
endif
return false
endfunction
function D_x takes unit u,real d1,real d2,real r,real x,real y,real a returns nothing
local integer CGe=FTe()
set Yuv[CGe]=u
set Y3v[CGe]=a
set YYv[CGe]=x
set Yzv[CGe]=y
set Yyv[CGe]=R2I(KN/ lN)
set YWv[CGe]=AddSpecialEffect("war3mapImported\\TDBD_lacnhatwave.mdl",YYv[CGe],Yzv[CGe])
set Y2v[CGe]=sxe(YYv[CGe],Yzv[CGe])+'d'
set YZv[CGe]=d1
set Y_v[CGe]=d2
set Y0v[CGe]=r
set Y1v[CGe]=0
set Ywv[CGe]=CreateGroup()
set YUv[CGe]=GetOwningPlayer(Yuv[CGe])
set Y4v[CGe]=GetPlayerId(YUv[CGe])+1
set YZv[CGe]=YZv[CGe]*Rqx(u,Y4v[CGe])
set Y_v[CGe]=Y_v[CGe]*Rqx(u,Y4v[CGe])
set Y5v[CGe]=false
call Qxe((YWv[CGe]),((30*I2R(GetRandomInt(-1,1)))*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectYaw((YWv[CGe]),((Y3v[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((YWv[CGe]),((.4)*1.))
call BlzSetSpecialEffectZ(YWv[CGe],Y2v[CGe])
call QIe(CGe,.03125,true,function DZx)
endfunction
function D0x takes nothing returns boolean
local integer CGe=Qce()
call D_x(Y9v[CGe],zov[CGe],zrv[CGe],ziv[CGe],zev[CGe],zxv[CGe],zav[CGe])
set zvv[CGe]=zvv[CGe]-1
if zvv[CGe]<=0 then
call QDe()
set Y9v[CGe]=null
call Fte(CGe)
endif
return false
endfunction
function D1x takes unit u,real d,unit v,real r returns nothing
local integer CGe=FSe()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set Y9v[CGe]=u
set zav[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set zev[CGe]=(((x)*1.)+((50)*1.)*Cos(((zav[CGe])*1.)*bj_DEGTORAD))
set zxv[CGe]=(((y)*1.)+((50)*1.)*Sin(((zav[CGe])*1.)*bj_DEGTORAD))
set zvv[CGe]=2
set zov[CGe]=uBe(u,ude(u,2.5,.75,LN))
set zrv[CGe]=uce(u,ude(u,$7D0,600,LN),'B006')
set ziv[CGe]=ude(u,20,2,LN)
set zov[CGe]=zov[CGe]*(1.+.03*GetUnitAbilityLevel(u,'A0WG'))*(1.+TKe(u,qx))
set zrv[CGe]=zrv[CGe]*(1.+.03*GetUnitAbilityLevel(u,'A0WG'))*(1.+TKe(u,qx))
if(GetUnitAbilityLevel((u),('B05A'))>0)then
set Pv=ude(u,.06,.02,'A0WB')*(zov[CGe]+zrv[CGe])
call Tse(Y9v[CGe],Pv)
call Qle("|cff7fff00"+"+"+I2S(R2I(Pv))+"|r",GetUnitX(Y9v[CGe]),GetUnitY(Y9v[CGe]))
endif
if r>0 then
set zov[CGe]=d
set zrv[CGe]=d
set ziv[CGe]=r
endif
call D_x(Y9v[CGe],zov[CGe],zrv[CGe],ziv[CGe],zev[CGe],zxv[CGe],zav[CGe])
call QIe(CGe,.2,true,function D0x)
endfunction
function D2x takes nothing returns boolean
local integer CGe=Qce()
local real x=0
local real y=0
local integer i=1
local integer QZe=2+zRv[CGe]*2
loop
exitwhen i>QZe
set x=(((zIv[CGe])*1.)+(('d')*1.)*Cos(((360/ QZe*i)*1.)*bj_DEGTORAD))
set y=(((zAv[CGe])*1.)+(('d')*1.)*Sin(((360/ QZe*i)*1.)*bj_DEGTORAD))
call A5x(zXv[CGe],zOv[CGe],zOv[CGe],80,x,y,360/ QZe*i)
set i=i+1
endloop
set zRv[CGe]=zRv[CGe]+1
if zRv[CGe]>=6 or spe(zXv[CGe])then
call QDe()
set zXv[CGe]=null
call Fse(CGe)
endif
return false
endfunction
function D3x takes unit u,real d returns nothing
local integer CGe=FQe()
set zXv[CGe]=u
set zIv[CGe]=GetUnitX(u)
set zAv[CGe]=GetUnitY(u)
set zRv[CGe]=1
set zOv[CGe]=d
call QIe(CGe,.5,true,function D2x)
endfunction
function D4x takes nothing returns boolean
local integer CGe=Qce()
if not spe(zDv[CGe])then
call uee(zdv[CGe],zDv[CGe],true,zCv[CGe],zfv[CGe],THe(zdv[CGe]))
endif
set zcv[CGe]=zcv[CGe]-1
if zcv[CGe]<=0 or spe(zDv[CGe])or spe(zdv[CGe])then
call QDe()
set zdv[CGe]=null
set zDv[CGe]=null
call Fqe(CGe)
endif
return false
endfunction
function D5x takes unit u,real d1,real d2,unit v returns nothing
local integer CGe=FPe()
set zdv[CGe]=u
set zDv[CGe]=v
set zCv[CGe]=d1
set zfv[CGe]=d2
set zcv[CGe]=1
call QIe(CGe,.2,true,function D4x)
endfunction
function D6x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set zkv[CGe]=(((zkv[CGe])*1.)+((MN)*1.)*Cos(((zpv[CGe])*1.)*bj_DEGTORAD))
set zKv[CGe]=(((zKv[CGe])*1.)+((MN)*1.)*Sin(((zpv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(zjv[CGe],zkv[CGe],zKv[CGe],zMv[CGe])
if zPv[CGe]<7 then
call GroupEnumUnitsInRange(sv,zkv[CGe],zKv[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zHv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,zqv[CGe])then
call GroupAddUnit(zqv[CGe],n)
if zQv[CGe]then
call Qre(AddSpecialEffect(("war3mapImported\\CBC_tranphai1.mdl"),((GetUnitX(n))*1.),((GetUnitY(n))*1.)))
else
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl"),(n),"chest"))
endif
call yKe(zhv[CGe],n,zmv[CGe],2.)
call uee(zhv[CGe],n,true,zlv[CGe],zLv[CGe],THe(zhv[CGe]))
call D5x(zhv[CGe],zlv[CGe],zLv[CGe],n)
set zPv[CGe]=zPv[CGe]+1
if zPv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set zJv[CGe]=zJv[CGe]-1
if zJv[CGe]<=0 then
call QDe()
call Qre(zjv[CGe])
call Qne(zqv[CGe])
set zqv[CGe]=null
set zjv[CGe]=null
set zhv[CGe]=null
set zHv[CGe]=null
call Fpe(CGe)
endif
return false
endfunction
function D7x takes unit u,player p,real x,real y,real d1,real d2,real r,real a,boolean b returns nothing
local integer CGe=FMe()
set zhv[CGe]=u
set zkv[CGe]=x
set zKv[CGe]=y
set zpv[CGe]=a
set zlv[CGe]=d1
set zLv[CGe]=d2
set zmv[CGe]=r
set zMv[CGe]=sxe(zkv[CGe],zKv[CGe])
set zjv[CGe]=AddSpecialEffect("war3mapImported\\CBC_tranphai3.mdl",zkv[CGe],zKv[CGe])
set zJv[CGe]=R2I(pN/ MN)
set zqv[CGe]=CreateGroup()
set zHv[CGe]=p
set zPv[CGe]=0
set zQv[CGe]=b
call BlzSetSpecialEffectYaw((zjv[CGe]),((zpv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((zjv[CGe]),((.85)*1.))
call BlzSetSpecialEffectZ(zjv[CGe],zMv[CGe])
call QIe(CGe,.03125,true,function D6x)
endfunction
function D8x takes nothing returns boolean
local integer CGe=Qce()
call D7x(zZv[CGe],zzv[CGe],zUv[CGe],zwv[CGe],zWv[CGe],zyv[CGe],zYv[CGe],zuv[CGe]+GetRandomReal(-8,8),z_v[CGe])
set zTv[CGe]=zTv[CGe]-1
if zTv[CGe]<=0 then
call QDe()
set zZv[CGe]=null
set zzv[CGe]=null
call Fme(CGe)
endif
return false
endfunction
function D9x takes unit u,real d,unit v,real r returns nothing
local integer CGe=FLe()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
local boolean c=false
set zZv[CGe]=u
set zUv[CGe]=GetUnitX(u)
set zwv[CGe]=GetUnitY(u)
set zTv[CGe]=1
set zWv[CGe]=uBe(u,ude(u,2.5,.75,mN))
set zyv[CGe]=uce(u,ude(u,$BB8,900,mN),'B009')
set zYv[CGe]=ude(u,20,2,mN)
set zzv[CGe]=GetOwningPlayer(u)
set zuv[CGe]=soe(zUv[CGe],zwv[CGe],GetUnitX(v),GetUnitY(v))
set zWv[CGe]=zWv[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A08B'))
set zyv[CGe]=zyv[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A08B'))
set z_v[CGe]=false
if r>0 then
set zWv[CGe]=d
set zyv[CGe]=d
set zYv[CGe]=r
endif
if(GetUnitAbilityLevel((u),('A08N'))>0)then
call xux(u,BUe[(i)*(20)+$A],i)
endif
if TQe(u)<=50. then
set c=true
endif
if BUe[(i)*(20)+9]>0 and GetRandomReal(0,'d')<=(5+2*BUe[(i)*(20)+9])then
set c=true
endif
if BUe[(i)*(20)+8]>0 and c then
set zWv[CGe]=zWv[CGe]*(1.16+.04*BUe[(i)*(20)+8])
set zyv[CGe]=zyv[CGe]*(1.16+.04*BUe[(i)*(20)+8])
set z_v[CGe]=true
call Qre(AddSpecialEffect(("war3mapImported\\CBC_tranphai1.mdl"),((zUv[CGe])*1.),((zwv[CGe])*1.)))
endif
call Qre(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl",u,"hand right"))
call Qre(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl",u,"hand left"))
call D7x(zZv[CGe],zzv[CGe],zUv[CGe],zwv[CGe],zWv[CGe],zyv[CGe],zYv[CGe],zuv[CGe],z_v[CGe])
call QIe(CGe,.25,true,function D8x)
endfunction
function fvx takes nothing returns boolean
local integer CGe=Qce()
set z5v[CGe]=z5v[CGe]-1
if z5v[CGe]<=0 or spe(z3v[CGe])or not(GetUnitAbilityLevel((z3v[CGe]),('A0WA'))>0)then
call QDe()
call u_e(z3v[CGe],-30)
call Tje(z3v[CGe],ox,-z4v[CGe])
call UnitRemoveAbility(z3v[CGe],'A0WA')
set z3v[CGe]=null
call Fle(CGe)
endif
return false
endfunction
function fex takes unit u,real r returns nothing
local integer CGe=FKe()
set z3v[CGe]=u
set z5v[CGe]=R2I(5./ .03125)
set z4v[CGe]=r
call u_e(z3v[CGe],30)
call Tje(z3v[CGe],ox,z4v[CGe])
call tKe(z3v[CGe],'A0WA')
call QIe(CGe,.03125,true,function fvx)
endfunction
function fxx takes nothing returns boolean
local integer CGe=Qce()
if not spe(Zxv[CGe])then
call uee(Zev[CGe],Zxv[CGe],false,Zvv[CGe],Zov[CGe],THe(Zev[CGe]))
endif
set z9v[CGe]=z9v[CGe]-1
if z9v[CGe]<=0 or spe(Zxv[CGe])or spe(Zev[CGe])then
call QDe()
set Zev[CGe]=null
set Zxv[CGe]=null
call Fke(CGe)
endif
return false
endfunction
function fox takes unit u,real d1,real d2,unit v returns nothing
local integer CGe=FJe()
set Zev[CGe]=u
set Zxv[CGe]=v
set Zvv[CGe]=d1
set Zov[CGe]=d2
set z9v[CGe]=3
call QIe(CGe,.3,true,function fxx)
endfunction
function frx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=1.
set ZRv[CGe]=(((ZRv[CGe])*1.)+((20)*1.)*Cos(((ZCv[CGe])*1.)*bj_DEGTORAD))
set ZIv[CGe]=(((ZIv[CGe])*1.)+((20)*1.)*Sin(((ZCv[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(ZXv[CGe],ZRv[CGe],ZIv[CGe],Zcv[CGe])
if ZBv[CGe]<7 then
call GroupEnumUnitsInRange(sv,ZRv[CGe],ZIv[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,ZVv[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,ZEv[CGe])then
call yHe(Znv[CGe],n,Zbv[CGe],2.)
call GroupAddUnit(ZEv[CGe],n)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TDBD_longtuong.mdl"),(n),"chest"))
if BUe[(Zdv[CGe])*(20)+$A]>0 and tle(n)<=50 then
set r=1.+.1+.02*BUe[(Zdv[CGe])*(20)+$A]
endif
call uee(Znv[CGe],n,false,ZAv[CGe]*r,ZNv[CGe]*r,THe(Znv[CGe]))
call fox(Znv[CGe],ZAv[CGe],ZNv[CGe],n)
set ZBv[CGe]=ZBv[CGe]+1
if ZBv[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set ZOv[CGe]=ZOv[CGe]-1
if ZOv[CGe]<=0 then
call QDe()
call Qre(ZXv[CGe])
call Qne(ZEv[CGe])
set ZEv[CGe]=null
set ZXv[CGe]=null
set Znv[CGe]=null
set ZVv[CGe]=null
call Fje(CGe)
endif
return false
endfunction
function fix takes unit u,player p,real x,real y,real d1,real d2,real r,real a returns nothing
local integer CGe=FHe()
set Znv[CGe]=u
set ZCv[CGe]=a
set ZRv[CGe]=x
set ZIv[CGe]=y
set ZOv[CGe]=30
set ZXv[CGe]=AddSpecialEffect("war3mapImported\\TDBD_longtuong.mdl",ZRv[CGe],ZIv[CGe])
set Zcv[CGe]=sxe(ZRv[CGe],ZIv[CGe])+'d'
set ZAv[CGe]=d1
set ZNv[CGe]=d2
set Zbv[CGe]=r
set ZBv[CGe]=0
set ZEv[CGe]=CreateGroup()
set ZVv[CGe]=p
set Zdv[CGe]=GetPlayerId(p)+1
set ZAv[CGe]=ZAv[CGe]*Rqx(u,Zdv[CGe])
set ZNv[CGe]=ZNv[CGe]*Rqx(u,Zdv[CGe])
call BlzSetSpecialEffectYaw((ZXv[CGe]),((ZCv[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((ZXv[CGe]),((1.5)*1.))
call BlzSetSpecialEffectZ(ZXv[CGe],Zcv[CGe])
call QIe(CGe,.03125,true,function frx)
endfunction
function fax takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer QZe=0
set Zhv[CGe]=(((Zhv[CGe])*1.)+((PN)*1.)*Cos(((ZLv[CGe])*1.)*bj_DEGTORAD))
set ZHv[CGe]=(((ZHv[CGe])*1.)+((PN)*1.)*Sin(((ZLv[CGe])*1.)*bj_DEGTORAD))
if sZe(Zhv[CGe],ZHv[CGe])then
call SetUnitX(Zgv[CGe],Zhv[CGe])
call SetUnitY(Zgv[CGe],ZHv[CGe])
else
set Zlv[CGe]=0
endif
set Zlv[CGe]=Zlv[CGe]-1
if Zlv[CGe]<=0 then
call QDe()
call SetPlayerAbilityAvailable((ZGv[CGe]),('A0W8'),true)
call fix(Zgv[CGe],ZGv[CGe],Zhv[CGe],ZHv[CGe],Zkv[CGe],ZKv[CGe],Zjv[CGe],ZLv[CGe])
call fex(Zgv[CGe],ZJv[CGe])
set n=null
call Qre(Zmv[CGe])
set Zmv[CGe]=null
set Zgv[CGe]=null
set ZGv[CGe]=null
call Fhe(CGe)
endif
return false
endfunction
function fnx takes unit u,real d1,real d2,real r1,real r2,real x,real y returns nothing
local integer CGe=FGe()
set Zgv[CGe]=u
set ZGv[CGe]=GetOwningPlayer(u)
set Zhv[CGe]=GetUnitX(u)
set ZHv[CGe]=GetUnitY(u)
set Zjv[CGe]=r1
set ZJv[CGe]=r2
set Zkv[CGe]=d1
set ZKv[CGe]=d2
set Zlv[CGe]=R2I(sre(Zhv[CGe],ZHv[CGe],x,y)/ PN)
set ZLv[CGe]=soe(Zhv[CGe],ZHv[CGe],x,y)
set Zmv[CGe]=AddSpecialEffectTarget("war3mapImported\\WindwalkFire.mdl",Zgv[CGe],"origin")
call SetPlayerAbilityAvailable((ZGv[CGe]),('A0W8'),false)
call QIe(CGe,.03125,true,function fax)
endfunction
function fVx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,3.,.9,'A0W8'))
local real d2=uce(u,ude(u,$BB8,900,'A0W8'),'B006')
local real r1=ude(u,40,5,'A0W8')
local real r2=ude(u,.3,.04,'A0W8')
call fnx(u,d1,d2,r1,r2,GetSpellTargetX(),GetSpellTargetY())
set u=null
return false
endfunction
function fEx takes nothing returns boolean
return GetSpellAbilityId()=='A0W8' and fVx()
endfunction
function fXx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Filter(function fEx))
set t=null
endfunction
function fOx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real x=GetUnitX(Zqv[CGe])
local real y=GetUnitY(Zqv[CGe])
local real x2=0
local real y2=0
local real a=0
local integer c=0
if not spe(Zqv[CGe])then
call GroupEnumUnitsInRange(sv,x,y,800,Wv)
loop
set n=sue(sv)
exitwhen n==null
if IsUnitEnemy(n,ZQv[CGe])and not spe(n)and not tOe(n)then
set x2=GetUnitX(n)
set y2=GetUnitY(n)
set a=soe(x2,y2,x,y)
call XPx(Zqv[CGe],ZSv[CGe],Ztv[CGe],Zsv[CGe],(((x2)*1.)+((50)*1.)*Cos(((a+$B4)*1.)*bj_DEGTORAD)),(((y2)*1.)+((50)*1.)*Sin(((a+$B4)*1.)*bj_DEGTORAD)),a,false)
if not(IsUnitType((n),UNIT_TYPE_TAUREN))and not(GetUnitAbilityLevel((n),('A0NA'))>0)then
call s5e(n,70,.2,a,false,false)
endif
set c=c+1
if c==2 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set ZTv[CGe]=ZTv[CGe]-1
if ZTv[CGe]<=0 or spe(Zqv[CGe])then
call QDe()
set Zqv[CGe]=null
set ZQv[CGe]=null
call Fge(CGe)
endif
return false
endfunction
function fRx takes unit u,real d1,real d2,real r returns nothing
local integer CGe=FFe()
set Zqv[CGe]=u
set ZSv[CGe]=d1
set Ztv[CGe]=d2
set ZQv[CGe]=GetOwningPlayer(u)
set Zsv[CGe]=r
set ZTv[CGe]=24
call QIe(CGe,.5,true,function fOx)
endfunction
function fIx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,3.,.9,'A0AB'))*(1.+TKe(u,4857))
local real d2=uce(u,ude(u,$BB8,900,'A0AB'),'B00A')*(1.+TKe(u,4857))
local real r=ude(u,$A,2,'A0AB')
call fRx(u,d1,d2,r)
set u=null
return false
endfunction
function fAx takes nothing returns boolean
return GetSpellAbilityId()=='A0AB' and fIx()
endfunction
function fNx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function fAx))
set t=null
endfunction
function fbx takes nothing returns boolean
local integer CGe=Qce()
set Zyv[CGe]=Zyv[CGe]-1
if Zyv[CGe]<=0 or spe(ZWv[CGe])or not(GetUnitAbilityLevel((ZWv[CGe]),('A0AH'))>0)then
call QDe()
call UnitRemoveAbility(ZWv[CGe],'A0AH')
call Tje(ZWv[CGe],5319,-ZYv[CGe])
call Tje(ZWv[CGe],4934,-Zzv[CGe])
call Tje(ZWv[CGe],5323,-ZZv[CGe])
set ZWv[CGe]=null
call Ffe(CGe)
endif
return false
endfunction
function fBx takes unit u,integer lv,integer i,real r returns nothing
local integer CGe=FDe()
set ZWv[CGe]=u
set ZYv[CGe]=(.35+.05*I2R(lv))+r*.03
set Zzv[CGe]=(.13+.02*I2R(lv))
set ZZv[CGe]=(17+3*I2R(lv))+r*2
set Zyv[CGe]=R2I(6./ .03125)
call tKe(ZWv[CGe],'A0AH')
call Tje(ZWv[CGe],5319,ZYv[CGe])
call Tje(ZWv[CGe],4934,Zzv[CGe])
call Tje(ZWv[CGe],5323,ZZv[CGe])
call QIe(CGe,.03125,true,function fbx)
endfunction
function fcx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real QZe=0
local real x=0
local real y=0
call Qre(AddSpecialEffect(("war3mapImported\\VDK_nhankiemcast.mdl"),((Z4v[CGe])*1.),((Z5v[CGe])*1.)))
set Qv=tMe(Z3v[CGe],'e006',Z4v[CGe],Z5v[CGe],vve[CGe],.2)
call SetUnitVertexColor(Qv,$FF,$FF,$FF,$96)
call SetUnitAnimation(Qv,"attack")
set Z4v[CGe]=(((Z4v[CGe])*1.)+((qN)*1.)*Cos(((vve[CGe])*1.)*bj_DEGTORAD))
set Z5v[CGe]=(((Z5v[CGe])*1.)+((qN)*1.)*Sin(((vve[CGe])*1.)*bj_DEGTORAD))
if sZe(Z4v[CGe],Z5v[CGe])then
call SetUnitX(Z2v[CGe],Z4v[CGe])
call SetUnitY(Z2v[CGe],Z5v[CGe])
else
set Z9v[CGe]=0
endif
set Z9v[CGe]=Z9v[CGe]-1
if Z9v[CGe]<=0 then
call QDe()
call GroupEnumUnitsInRange(sv,Z4v[CGe],Z5v[CGe],300,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,Z3v[CGe])and not spe(n)and not tOe(n)then
call yle(Z2v[CGe],n,Z6v[CGe],2.)
call uee(Z2v[CGe],n,false,Z7v[CGe],Z8v[CGe],THe(Z2v[CGe]))
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIlb\\AIlbSpecialArt.mdl"),(n),"chest"))
set QZe=QZe+1
if BUe[(vee[CGe])*(20)+$A]>0 then
call XPx(Z2v[CGe],Z7v[CGe],Z8v[CGe],Z6v[CGe],Z4v[CGe],Z5v[CGe],soe(Z4v[CGe],Z5v[CGe],GetUnitX(n),GetUnitY(n)),true)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
if BUe[(vee[CGe])*(20)+$A]>0 then
call fBx(Z2v[CGe],BUe[(vee[CGe])*(20)+$A],vee[CGe],QZe)
endif
call SetPlayerAbilityAvailable((Z3v[CGe]),('A0A9'),true)
set Z2v[CGe]=null
set Z3v[CGe]=null
call Fde(CGe)
endif
return false
endfunction
function fCx takes unit u,real d1,real d2,real r,real x,real y returns nothing
local integer CGe=FCe()
set Z2v[CGe]=u
set Z7v[CGe]=d1
set Z8v[CGe]=d2
set Z3v[CGe]=GetOwningPlayer(u)
set Z4v[CGe]=GetUnitX(u)
set Z5v[CGe]=GetUnitY(u)
set Z6v[CGe]=r
set Z9v[CGe]=R2I(sre(Z4v[CGe],Z5v[CGe],x,y)/ qN)
set vve[CGe]=soe(Z4v[CGe],Z5v[CGe],x,y)
set vee[CGe]=GetPlayerId(Z3v[CGe])+1
call SetPlayerAbilityAvailable((Z3v[CGe]),('A0A9'),false)
call QIe(CGe,.03125,true,function fcx)
endfunction
function fdx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,3.,.9,'A0A9'))
local real d2=uce(u,ude(u,$BB8,900,'A0A9'),'B00A')
local real r=ude(u,40,5,'A0A9')
call fCx(u,d1,d2,r,GetSpellTargetX(),GetSpellTargetY())
set u=null
return false
endfunction
function fDx takes nothing returns boolean
return GetSpellAbilityId()=='A0A9' and fdx()
endfunction
function ffx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Filter(function fDx))
set t=null
endfunction
function fFx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set vEe[CGe]=(((vEe[CGe])*1.)+((sN)*1.)*Cos(((vNe[CGe])*1.)*bj_DEGTORAD))
set vXe[CGe]=(((vXe[CGe])*1.)+((sN)*1.)*Sin(((vNe[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(vne[CGe],vEe[CGe],vXe[CGe],vAe[CGe])
if vBe[CGe]<4 then
call GroupEnumUnitsInRange(sv,vEe[CGe],vXe[CGe],90,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,vae[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,vbe[CGe])then
call yke(vie[CGe],n,vIe[CGe],2)
call GroupAddUnit(vbe[CGe],n)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl"),(n),"chest"))
call uee(vie[CGe],n,false,vOe[CGe],vRe[CGe],THe(vie[CGe]))
set vBe[CGe]=vBe[CGe]+1
if vBe[CGe]>=4 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set vVe[CGe]=vVe[CGe]-1
if vVe[CGe]<=0 then
call QDe()
call Qre(vne[CGe])
call Qne(vbe[CGe])
set vbe[CGe]=null
set vne[CGe]=null
set vie[CGe]=null
set vae[CGe]=null
call Fce(CGe)
endif
return false
endfunction
function fgx takes unit u,real d1,real d2,real r,real a returns nothing
local integer CGe=FBe()
set vie[CGe]=u
set vNe[CGe]=a
set vEe[CGe]=(((GetUnitX(u))*1.)+((40)*1.)*Cos(((vNe[CGe])*1.)*bj_DEGTORAD))
set vXe[CGe]=(((GetUnitY(u))*1.)+((40)*1.)*Sin(((vNe[CGe])*1.)*bj_DEGTORAD))
set vOe[CGe]=d1
set vRe[CGe]=d2
set vIe[CGe]=r
set vAe[CGe]=sxe(vEe[CGe],vXe[CGe])+80
set vne[CGe]=AddSpecialEffect("war3mapImported\\TYD_mucda.mdl",vEe[CGe],vXe[CGe])
set vVe[CGe]=R2I(QN/ sN)
set vbe[CGe]=CreateGroup()
set vae[CGe]=GetOwningPlayer(vie[CGe])
set vBe[CGe]=0
call BlzSetSpecialEffectYaw((vne[CGe]),((vNe[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((vne[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(vne[CGe],vAe[CGe])
call QIe(CGe,.03125,true,function fFx)
endfunction
function fGx takes unit u,real d,unit v,real r returns nothing
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
local real d1=uBe(u,ude(u,1.,.3,SN))*(1.+.1*AI[i])
local real d2=uce(u,ude(u,$3E8,300,SN),'B008')*(1.+.1*AI[i])
local real rz=ude(u,20,2,SN)
local real a=soe(GetUnitX(u),GetUnitY(u),GetUnitX(v),GetUnitY(v))
set AI[i]=0
if(GetUnitAbilityLevel((u),(yE))>0)then
call UnitRemoveAbility(u,'BOwk')
call UnitRemoveAbility(u,yE)
call XFx(u)
endif
if r>0 then
set d1=d
set d2=d
set rz=r
endif
if GetUnitAbilityLevel(u,SN)>=8 then
call fgx(u,d1,d2,rz,a+20)
call fgx(u,d1,d2,rz,a-20)
call fgx(u,d1,d2,rz,a)
elseif GetUnitAbilityLevel(u,SN)>=4 then
call fgx(u,d1,d2,rz,a-8)
call fgx(u,d1,d2,rz,a+8)
else
call fgx(u,d1,d2,rz,a)
endif
call Qre(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl",u,"weapon"))
endfunction
function fhx takes unit u,real d returns boolean
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real a=GetUnitFacing(u)
call AGx(u,d,d,80,x,y,a)
call AGx(u,d,d,80,x,y,a-$C)
call AGx(u,d,d,80,x,y,a+$C)
call AGx(u,d,d,80,x,y,a-24)
call AGx(u,d,d,80,x,y,a+24)
call AGx(u,d,d,80,x,y,a-36)
call AGx(u,d,d,80,x,y,a+36)
call AGx(u,d,d,80,x,y,a-48)
call AGx(u,d,d,80,x,y,a+48)
return false
endfunction
function fHx takes nothing returns boolean
local integer CGe=Qce()
local real x=0
local real y=0
local integer i=1
local integer QZe=6+vFe[CGe]*2
loop
exitwhen i>QZe
set x=(((vge[CGe])*1.)+(($C8*vFe[CGe])*1.)*Cos(((360/ QZe*i)*1.)*bj_DEGTORAD))
set y=(((vGe[CGe])*1.)+(($C8*vFe[CGe])*1.)*Sin(((360/ QZe*i)*1.)*bj_DEGTORAD))
call NBx(vDe[CGe],vfe[CGe],vfe[CGe],'d',x,y)
set i=i+1
endloop
set vFe[CGe]=vFe[CGe]+1
if vFe[CGe]>=6 or spe(vDe[CGe])then
call QDe()
set vDe[CGe]=null
call Fbe(CGe)
endif
return false
endfunction
function fjx takes unit u,real d returns nothing
local integer CGe=FNe()
set vDe[CGe]=u
set vge[CGe]=GetUnitX(u)
set vGe[CGe]=GetUnitY(u)
set vFe[CGe]=1
set vfe[CGe]=d
call QIe(CGe,.5,true,function fHx)
endfunction
function fJx takes nothing returns boolean
local integer CGe=Qce()
local real x0=GetUnitX(vke[CGe])
local real y0=GetUnitY(vke[CGe])
local real x=GetRandomReal(x0-600,x0+600)
local real y=GetRandomReal(y0-600,y0+600)
call O5x(vke[CGe],vKe[CGe],vKe[CGe],70,x,y)
set vJe[CGe]=vJe[CGe]-1
if vJe[CGe]<=0 or spe(vke[CGe])then
call QDe()
set vke[CGe]=null
call FAe(CGe)
endif
return false
endfunction
function fkx takes unit u,real d returns nothing
local integer CGe=FIe()
set vke[CGe]=u
set vKe[CGe]=d
set vJe[CGe]=$E
call QIe(CGe,.3,true,function fJx)
endfunction
function fKx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real db=0
local real x=0
local real y=0
if not spe(vpe[CGe])and not v_e[CGe]then
set x=GetUnitX(vpe[CGe])
set y=GetUnitY(vpe[CGe])
set db=sre(vse[CGe],vSe[CGe],x,y)
if db<=50 then
if BUe[(vYe[CGe])*(20)+8]>0 and GetRandomReal(0,'d')<=(27+3*BUe[(vYe[CGe])*(20)+8])and not WX[vYe[CGe]]then
call Rxx(vMe[CGe],vYe[CGe],vse[CGe],vSe[CGe])
endif
set vwe[CGe]=vwe[CGe]+GetRandomInt(-1,1)*30
call BlzSetSpecialEffectYaw((vqe[CGe]),((vwe[CGe])*1.)*bj_DEGTORAD)
set vQe[CGe]=$C
set vZe[CGe]=true
set v_e[CGe]=true
else
if vQe[CGe]<=24 then
set vwe[CGe]=soe(vse[CGe],vSe[CGe],x,y)
call BlzSetSpecialEffectYaw((vqe[CGe]),((vwe[CGe])*1.)*bj_DEGTORAD)
endif
endif
endif
set vse[CGe]=(((vse[CGe])*1.)+((TN)*1.)*Cos(((vwe[CGe])*1.)*bj_DEGTORAD))
set vSe[CGe]=(((vSe[CGe])*1.)+((TN)*1.)*Sin(((vwe[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(vqe[CGe],vse[CGe],vSe[CGe],vUe[CGe])
if vye[CGe]<7 then
call GroupEnumUnitsInRange(sv,vse[CGe],vSe[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,vPe[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,vWe[CGe])then
if vze[CGe]==3 then
call Qre(AddSpecialEffect(("war3mapImported\\NMC_tranphai1.mdl"),((GetUnitX(n))*1.),((GetUnitY(n))*1.)))
endif
call yke(vMe[CGe],n,vue[CGe],2.)
call uee(vMe[CGe],n,true,vte[CGe],vTe[CGe],THe(vMe[CGe]))
call GroupAddUnit(vWe[CGe],n)
set vye[CGe]=vye[CGe]+1
if vye[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set vQe[CGe]=vQe[CGe]-1
if vQe[CGe]==0 and vZe[CGe]then
set vwe[CGe]=vwe[CGe]+$B4
call BlzSetSpecialEffectYaw((vqe[CGe]),((vwe[CGe])*1.)*bj_DEGTORAD)
set vQe[CGe]=$C
set vZe[CGe]=false
endif
if vQe[CGe]<=0 and not vZe[CGe]then
call QDe()
call GroupEnumUnitsInRange(sv,vse[CGe],vSe[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,vPe[CGe])and not spe(n)and not tOe(n)then
call yke(vMe[CGe],n,vue[CGe],2.)
call uee(vMe[CGe],n,true,vte[CGe],vTe[CGe],THe(vMe[CGe]))
endif
call GroupRemoveUnit(sv,n)
endloop
call Qre(vqe[CGe])
call Qne(vWe[CGe])
set vWe[CGe]=null
set vqe[CGe]=null
set vMe[CGe]=null
set vPe[CGe]=null
set vpe[CGe]=null
call FRe(CGe)
endif
return false
endfunction
function flx takes unit u,player p,real d1,real d2,real r,real x,real y,real a,unit v,integer b returns nothing
local integer CGe=FOe()
set vMe[CGe]=u
set vpe[CGe]=v
set vse[CGe]=x
set vSe[CGe]=y
set vwe[CGe]=a
set vye[CGe]=0
set vze[CGe]=b
set vte[CGe]=d1
set vTe[CGe]=d2
set vue[CGe]=r
set vZe[CGe]=false
set v_e[CGe]=false
set vUe[CGe]=sxe(vse[CGe],vSe[CGe])+'d'
set vqe[CGe]=AddSpecialEffect("war3mapImported\\NMC_tranphaix1.mdl",vse[CGe],vSe[CGe])
set vQe[CGe]=R2I(uN/ TN)
set vWe[CGe]=CreateGroup()
set vPe[CGe]=GetOwningPlayer(vMe[CGe])
set vYe[CGe]=GetPlayerId(vPe[CGe])+1
call BlzSetSpecialEffectYaw((vqe[CGe]),((vwe[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((vqe[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(vqe[CGe],vUe[CGe])
call QIe(CGe,.03125,true,function fKx)
endfunction
function fLx takes nothing returns boolean
local integer CGe=Qce()
local real a=exe[CGe]
if eve[CGe]==2 then
set a=exe[CGe]+30
else
set a=exe[CGe]-30
endif
call flx(v3e[CGe],eee[CGe],v7e[CGe],v8e[CGe],v9e[CGe],v5e[CGe],v6e[CGe],a,v4e[CGe],eve[CGe])
set eve[CGe]=eve[CGe]-1
if eve[CGe]<=0 then
call QDe()
set v3e[CGe]=null
set v4e[CGe]=null
set eee[CGe]=null
call FXe(CGe)
endif
return false
endfunction
function fmx takes unit u,real d,unit v,real r returns nothing
local integer CGe=FEe()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real a=soe(x,y,GetUnitX(v),GetUnitY(v))
if spe(v)then
set a=GetUnitFacing(u)
endif
set v3e[CGe]=u
set v4e[CGe]=v
set v5e[CGe]=(((x)*1.)+(('d')*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set v6e[CGe]=(((y)*1.)+(('d')*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set v7e[CGe]=uBe(u,ude(u,1.5,.45,tN))
set v8e[CGe]=uce(u,ude(u,$7D0,600,tN),'B008')
set v9e[CGe]=ude(u,20,2,tN)
set eve[CGe]=2
set eee[CGe]=GetOwningPlayer(v3e[CGe])
set exe[CGe]=a
set v7e[CGe]=v7e[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A081'))
set v8e[CGe]=v8e[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A081'))
call Qre(AddSpecialEffect(("war3mapImported\\NMC_tranphai1.mdl"),((x)*1.),((y)*1.)))
if r>0 then
set v7e[CGe]=d
set v8e[CGe]=d
set v9e[CGe]=r
endif
call flx(v3e[CGe],eee[CGe],v7e[CGe],v8e[CGe],v9e[CGe],v5e[CGe],v6e[CGe],exe[CGe],v4e[CGe],3)
call QIe(CGe,.2,true,function fLx)
endfunction
function fMx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set eXe[CGe]=(((eXe[CGe])*1.)+((wN)*1.)*Cos(((eBe[CGe])*1.)*bj_DEGTORAD))
set eOe[CGe]=(((eOe[CGe])*1.)+((wN)*1.)*Sin(((eBe[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(eVe[CGe],eXe[CGe],eOe[CGe],eNe[CGe])
if ece[CGe]<7 then
call GroupEnumUnitsInRange(sv,eXe[CGe],eOe[CGe],$A0,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,ene[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,ebe[CGe])then
call yHe(eae[CGe],n,eAe[CGe],1.)
call GroupAddUnit(ebe[CGe],n)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TLBD_effect3.mdl"),(n),"chest"))
call uee(eae[CGe],n,true,eRe[CGe],eIe[CGe],THe(eae[CGe]))
set ece[CGe]=ece[CGe]+1
if ece[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set eEe[CGe]=eEe[CGe]-1
if eEe[CGe]<=0 then
call QDe()
call Qre(eVe[CGe])
call Qne(ebe[CGe])
set ebe[CGe]=null
set eVe[CGe]=null
set eae[CGe]=null
set ene[CGe]=null
call FVe(CGe)
endif
return false
endfunction
function fpx takes unit u,player p,real d1,real d2,real x,real y,real r,real a returns nothing
local integer CGe=Fne()
set eae[CGe]=u
set eBe[CGe]=a
set eXe[CGe]=x
set eOe[CGe]=y
set eEe[CGe]=R2I(UN/ wN)
set eVe[CGe]=AddSpecialEffect("war3mapImported\\TLBD_thietky2.mdl",eXe[CGe],eOe[CGe])
set eNe[CGe]=sxe(eXe[CGe],eOe[CGe])
set eRe[CGe]=d1
set eIe[CGe]=d2
set eAe[CGe]=r
set ene[CGe]=p
set ebe[CGe]=CreateGroup()
set ece[CGe]=0
call BlzSetSpecialEffectYaw((eVe[CGe]),((eBe[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((eVe[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(eVe[CGe],eNe[CGe])
call QIe(CGe,.03125,true,function fMx)
endfunction
function fPx takes unit u,player p,real x,real y,real d1,real d2,real d3,real r,real a returns boolean
local integer c=0
local unit n=null
call GroupEnumUnitsInRange(sv,x,y,$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,p)and not spe(n)and not tOe(n)then
call uee(u,n,true,d1,d2,THe(u))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
call fpx(u,p,d1,d3,x,y,r,a)
call fpx(u,p,d1,d3,x,y,r,a+30)
call fpx(u,p,d1,d3,x,y,r,a-30)
return false
endfunction
function fqx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set ehe[CGe]=(((ehe[CGe])*1.)+((WN)*1.)*Cos(((eLe[CGe])*1.)*bj_DEGTORAD))
set eHe[CGe]=(((eHe[CGe])*1.)+((WN)*1.)*Sin(((eLe[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(ege[CGe],ehe[CGe],eHe[CGe],ele[CGe])
call GroupEnumUnitsInRange(sv,ehe[CGe],eHe[CGe],$A0,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,eFe[CGe])and not spe(n)and not tOe(n)then
call fPx(efe[CGe],eFe[CGe],ehe[CGe],eHe[CGe],eje[CGe],eJe[CGe],eke[CGe],eKe[CGe],eLe[CGe])
set eGe[CGe]=0
call GroupClear(sv)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set eGe[CGe]=eGe[CGe]-1
if eGe[CGe]<=0 then
call QDe()
call Qre(ege[CGe])
set ege[CGe]=null
set efe[CGe]=null
set eFe[CGe]=null
call Fae(CGe)
endif
return false
endfunction
function fQx takes unit u,real d,unit v,real r returns nothing
local integer CGe=Fie()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local integer i=0
local real rz=0
set efe[CGe]=u
set eLe[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set ehe[CGe]=(((x)*1.)+((50)*1.)*Cos(((eLe[CGe])*1.)*bj_DEGTORAD))
set eHe[CGe]=(((y)*1.)+((50)*1.)*Sin(((eLe[CGe])*1.)*bj_DEGTORAD))
set eGe[CGe]=R2I(UN/ wN)
set ege[CGe]=AddSpecialEffect("war3mapImported\\TLBD_thietky2.mdl",ehe[CGe],eHe[CGe])
set ele[CGe]=sxe(ehe[CGe],eHe[CGe])
set eje[CGe]=uBe(u,ude(u,1.5,.45,yN))
set eJe[CGe]=uce(u,ude(u,$7D0,600,yN),'B006')
set eke[CGe]=uce(u,ude(u,$5DC,450,yN),'B006')
set eKe[CGe]=ude(u,$F,2,yN)
set eFe[CGe]=GetOwningPlayer(efe[CGe])
set eje[CGe]=eje[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A0S1'))
set eJe[CGe]=eJe[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A0S1'))
set eke[CGe]=eke[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A0S1'))
set i=GetPlayerId(eFe[CGe])+1
set rz=x9x(u,i)
set eje[CGe]=eje[CGe]*rz
set eJe[CGe]=eJe[CGe]*rz
set eke[CGe]=eke[CGe]*rz
if r>0 then
set eje[CGe]=d
set eJe[CGe]=d
set eke[CGe]=d
set eKe[CGe]=r
endif
call BlzSetSpecialEffectYaw((ege[CGe]),((eLe[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((ege[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(ege[CGe],ele[CGe])
call QIe(CGe,.03125,true,function fqx)
endfunction
function fsx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=1.
set ete[CGe]=(((ete[CGe])*1.)+((zN)*1.)*Cos(((eYe[CGe])*1.)*bj_DEGTORAD))
set eTe[CGe]=(((eTe[CGe])*1.)+((zN)*1.)*Sin(((eYe[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(ese[CGe],ete[CGe],eTe[CGe],eye[CGe])
if eWe[CGe]<7 then
call GroupEnumUnitsInRange(sv,ete[CGe],eTe[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,eqe[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,eQe[CGe])then
call yHe(ePe[CGe],n,ewe[CGe],1.)
call GroupAddUnit(eQe[CGe],n)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TDBD_targeteffect.mdl"),(n),"origin"))
if BUe[(eze[CGe])*(20)+$A]>0 and tle(n)<=50 then
set r=1.+.1+.02*BUe[(eze[CGe])*(20)+$A]
endif
call uee(ePe[CGe],n,false,eue[CGe]*r,eUe[CGe]*r,THe(ePe[CGe]))
set eWe[CGe]=eWe[CGe]+1
if eWe[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set eSe[CGe]=eSe[CGe]-1
if eSe[CGe]<=0 then
call QDe()
call BlzSetSpecialEffectAlpha((ese[CGe]),(0))
call Qre(ese[CGe])
call Qne(eQe[CGe])
set eQe[CGe]=null
set ese[CGe]=null
set ePe[CGe]=null
set eqe[CGe]=null
call Fre(CGe)
endif
return false
endfunction
function fSx takes unit u,real d1,real d2,real r,real x,real y,real a returns nothing
local integer CGe=Foe()
set ePe[CGe]=u
set eYe[CGe]=a
set ete[CGe]=x
set eTe[CGe]=y
set eSe[CGe]=R2I(YN/ zN)
set ese[CGe]=AddSpecialEffect("war3mapImported\\TDBD_phaphu4.mdl",ete[CGe],eTe[CGe])
set eye[CGe]=sxe(ete[CGe],eTe[CGe])+50
set eue[CGe]=d1
set eUe[CGe]=d2
set ewe[CGe]=r
set eWe[CGe]=0
set eQe[CGe]=CreateGroup()
set eqe[CGe]=GetOwningPlayer(ePe[CGe])
set eze[CGe]=GetPlayerId(eqe[CGe])+1
set eue[CGe]=eue[CGe]*Rqx(u,eze[CGe])
set eUe[CGe]=eUe[CGe]*Rqx(u,eze[CGe])
call BlzSetSpecialEffectYaw((ese[CGe]),((eYe[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((ese[CGe]),((.5)*1.))
call BlzSetSpecialEffectZ(ese[CGe],eye[CGe])
call QIe(CGe,.03125,true,function fsx)
endfunction
function ftx takes nothing returns boolean
local integer CGe=Qce()
call fSx(e1e[CGe],e5e[CGe],e6e[CGe],e7e[CGe],e3e[CGe],e4e[CGe],e8e[CGe])
set e2e[CGe]=e2e[CGe]-1
if e2e[CGe]<=0 then
call QDe()
set e1e[CGe]=null
call Fxe(CGe)
endif
return false
endfunction
function fTx takes unit u,real d,unit v,real r returns nothing
local integer CGe=Fee()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set e1e[CGe]=u
set e8e[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set e3e[CGe]=(((x)*1.)+((50)*1.)*Cos(((e8e[CGe])*1.)*bj_DEGTORAD))
set e4e[CGe]=(((y)*1.)+((50)*1.)*Sin(((e8e[CGe])*1.)*bj_DEGTORAD))
set e2e[CGe]=2
set e5e[CGe]=uBe(u,ude(u,2.,.6,ZN))
set e6e[CGe]=uce(u,ude(u,$7D0,600,ZN),'B006')
set e7e[CGe]=ude(u,20,2,ZN)
set e5e[CGe]=e5e[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A0W6'))
set e6e[CGe]=e6e[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A0W6'))
if(GetUnitAbilityLevel((u),('B05A'))>0)then
set Pv=ude(u,.06,.02,'A0WB')*(e5e[CGe]+e6e[CGe])
call Tse(e1e[CGe],Pv)
call Qle("|cff7fff00"+"+"+I2S(R2I(Pv))+"|r",GetUnitX(e1e[CGe]),GetUnitY(e1e[CGe]))
endif
if r>0 then
set e5e[CGe]=d
set e6e[CGe]=d
set e7e[CGe]=r
endif
call fSx(e1e[CGe],e5e[CGe],e6e[CGe],e7e[CGe],e3e[CGe],e4e[CGe],e8e[CGe])
call QIe(CGe,.2,true,function ftx)
endfunction
function fux takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set xre[CGe]=(((xre[CGe])*1.)+((18)*1.)*Cos(((xne[CGe])*1.)*bj_DEGTORAD))
set xie[CGe]=(((xie[CGe])*1.)+((18)*1.)*Sin(((xne[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(xxe[CGe],xre[CGe],xie[CGe],xae[CGe])
set xoe[CGe]=xoe[CGe]-1
if xoe[CGe]<=0 then
call QDe()
call Qre(xxe[CGe])
set xxe[CGe]=null
call Fve(CGe)
endif
return false
endfunction
function fUx takes real x,real y,real a returns nothing
local integer CGe=f9e()
set xre[CGe]=x
set xie[CGe]=y
set xne[CGe]=a
set xae[CGe]=sxe(xre[CGe],xie[CGe])+30
set xxe[CGe]=AddSpecialEffect("war3mapImported\\CBC_hanglong.mdl",xre[CGe],xie[CGe])
set xoe[CGe]=8
call BlzSetSpecialEffectYaw((xxe[CGe]),((xne[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((xxe[CGe]),((2.)*1.))
call BlzSetSpecialEffectZ(xxe[CGe],xae[CGe])
call QIe(CGe,.03125,true,function fux)
endfunction
function fwx takes unit u,player p,real d1,real d2,real r,real x,real y,boolean b,boolean fWx returns nothing
local integer i=GetPlayerId(p)+1
local integer c=0
local unit n=null
local real r2=ude(u,$A,1,'A08F')
local real fyx='d'
local real x0=GetUnitX(u)
local real y0=GetUnitY(u)
if BUe[(i)*(20)+9]>0 and b then
set fyx=fyx+$A*BUe[(i)*(20)+9]
endif
call GroupEnumUnitsInRange(sv,x,y,fyx,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,p)and not spe(n)and not tOe(n)then
call yKe(u,n,r,2.)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl"),(n),"chest"))
call uee(u,n,true,d1,d2,THe(u))
if(GetUnitAbilityLevel((u),('A08H'))>0)then
call yLe(u,n,r2,1.)
endif
if fWx and BUe[(i)*(20)+9]>0 and not(IsUnitType((n),UNIT_TYPE_TAUREN))and GetRandomReal(0,'d')<=(8+BUe[(i)*(20)+9])and not(GetUnitAbilityLevel((n),('A0NA'))>0)then
call s5e(n,$C8,.3,soe(x0,y0,GetUnitX(n),GetUnitY(n)),false,false)
endif
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endfunction
function fYx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real x=GetUnitX(xRe[CGe])
local real y=GetUnitY(xRe[CGe])
if not spe(xRe[CGe])then
set xDe[CGe]=soe(xNe[CGe],xbe[CGe],x,y)
call BlzSetSpecialEffectYaw((xIe[CGe]),((xDe[CGe])*1.)*bj_DEGTORAD)
endif
set xNe[CGe]=(((xNe[CGe])*1.)+((vb)*1.)*Cos(((xDe[CGe])*1.)*bj_DEGTORAD))
set xbe[CGe]=(((xbe[CGe])*1.)+((vb)*1.)*Sin(((xDe[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(xIe[CGe],xNe[CGe],xbe[CGe],xde[CGe])
if spe(xRe[CGe])then
call GroupEnumUnitsInRange(sv,xNe[CGe],xbe[CGe],50,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,xge[CGe])and not spe(n)and not tOe(n)then
call GroupClear(sv)
set xAe[CGe]=0
endif
call GroupRemoveUnit(sv,n)
endloop
endif
if sre(xNe[CGe],xbe[CGe],x,y)<=50 then
set xAe[CGe]=0
endif
set xAe[CGe]=xAe[CGe]-1
if xAe[CGe]<=0 then
call QDe()
if xfe[CGe]and xFe[CGe]then
call Qre(AddSpecialEffect(("war3mapImported\\VolcanoMissile.mdl"),((xNe[CGe])*1.),((xbe[CGe])*1.)))
call fUx(xNe[CGe],xbe[CGe],'x')
call fUx(xNe[CGe],xbe[CGe],$D2)
call fUx(xNe[CGe],xbe[CGe],300)
call fUx(xNe[CGe],xbe[CGe],30)
endif
call fwx(xOe[CGe],xge[CGe],xBe[CGe],xce[CGe],xCe[CGe],xNe[CGe],xbe[CGe],xfe[CGe],xFe[CGe])
call Qre(xIe[CGe])
set xge[CGe]=null
set xIe[CGe]=null
set xRe[CGe]=null
set xOe[CGe]=null
call f8e(CGe)
endif
return false
endfunction
function fzx takes unit u,unit v,real d1,real d2,real r,real x,real y,real a,real aQx,real db,boolean b,boolean fWx returns nothing
local integer CGe=f7e()
set xOe[CGe]=u
set xRe[CGe]=v
set xDe[CGe]=aQx
set xNe[CGe]=(((x)*1.)+((db)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set xbe[CGe]=(((y)*1.)+((db)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set xAe[CGe]=40
set xIe[CGe]=AddSpecialEffect("war3mapImported\\CBC_hanglong.mdl",xNe[CGe],xbe[CGe])
set xde[CGe]=sxe(xNe[CGe],xbe[CGe])+'d'
set xBe[CGe]=d1
set xce[CGe]=d2
set xCe[CGe]=r
set xfe[CGe]=b
set xFe[CGe]=fWx
set xge[CGe]=GetOwningPlayer(u)
call BlzSetSpecialEffectYaw((xIe[CGe]),((xDe[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((xIe[CGe]),((2.2)*1.))
call BlzSetSpecialEffectZ(xIe[CGe],xde[CGe])
call QIe(CGe,.03125,true,function fYx)
endfunction
function fZx takes unit u,real d,unit v,real r returns nothing
local real d1=uBe(u,ude(u,1.5,.45,eb))
local real d2=uce(u,ude(u,$7D0,600,eb),'B009')
local real rz=ude(u,20,2,eb)
local real x0=GetUnitX(u)
local real y0=GetUnitY(u)
local real a=soe(x0,y0,GetUnitX(v),GetUnitY(v))
local real x=(((x0)*1.)+((40)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
local real y=(((y0)*1.)+((40)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
local boolean b=false
local boolean c=false
set d1=d1*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A08A'))
set d2=d2*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A08A'))
if(GetUnitAbilityLevel((u),('A08N'))>0)then
call xux(u,BUe[(i)*(20)+$A],i)
endif
if TQe(u)<=50. then
set c=true
endif
if BUe[(i)*(20)+9]>0 and GetRandomReal(0,'d')<=(5+2*BUe[(i)*(20)+9])then
set c=true
endif
if BUe[(i)*(20)+8]>0 and c then
set d1=d1*(1.16+.04*BUe[(i)*(20)+8])
set d2=d2*(1.16+.04*BUe[(i)*(20)+8])
set b=true
endif
call Qre(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl",u,"hand right"))
call Qre(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl",u,"hand left"))
if r>0 then
set d1=d
set d2=d
set rz=r
endif
call fzx(u,v,d1,d2,rz,x,y,a+90,a,70,b,true)
call fzx(u,v,d1,d2,rz,x,y,a-90,a,70,b,false)
call fzx(u,v,d1,d2,rz,x,y,a-90,a,$D2,b,false)
call fzx(u,v,d1,d2,rz,x,y,a+90,a,$D2,b,false)
endfunction
function f_x takes nothing returns boolean
local integer CGe=Qce()
local real x=GetUnitX(xJe[CGe])
local real y=GetUnitY(xJe[CGe])
local real a=GetUnitFacing(xJe[CGe])
call xix(xJe[CGe],xke[CGe],xke[CGe],50,x,y,a)
call xix(xJe[CGe],xke[CGe],xke[CGe],50,x,y,a+$A)
call xix(xJe[CGe],xke[CGe],xke[CGe],50,x,y,a+20)
call xix(xJe[CGe],xke[CGe],xke[CGe],50,x,y,a+30)
call xix(xJe[CGe],xke[CGe],xke[CGe],50,x,y,a+40)
call xix(xJe[CGe],xke[CGe],xke[CGe],50,x,y,a-$A)
call xix(xJe[CGe],xke[CGe],xke[CGe],50,x,y,a-20)
call xix(xJe[CGe],xke[CGe],xke[CGe],50,x,y,a-30)
call xix(xJe[CGe],xke[CGe],xke[CGe],50,x,y,a-40)
set xje[CGe]=xje[CGe]-1
if xje[CGe]<=0 or spe(xJe[CGe])then
call QDe()
set xJe[CGe]=null
call f6e(CGe)
endif
return false
endfunction
function f0x takes unit u,real d,real a returns nothing
local integer CGe=f5e()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
call xix(u,d,d,50,x,y,a)
call xix(u,d,d,50,x,y,a+$A)
call xix(u,d,d,50,x,y,a+20)
call xix(u,d,d,50,x,y,a+30)
call xix(u,d,d,50,x,y,a+40)
call xix(u,d,d,50,x,y,a-$A)
call xix(u,d,d,50,x,y,a-20)
call xix(u,d,d,50,x,y,a-30)
call xix(u,d,d,50,x,y,a-40)
set xJe[CGe]=u
set xke[CGe]=d
set xje[CGe]=2
call QIe(CGe,.6,true,function f_x)
endfunction
function f1x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set xpe[CGe]=xpe[CGe]-1
if xpe[CGe]<=0 then
call QDe()
if xTe[CGe]<7 then
call GroupEnumUnitsInRange(sv,xPe[CGe],xqe[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,xMe[CGe])and not spe(n)and not tOe(n)then
call yHe(xme[CGe],n,xSe[CGe],1.)
call yKe(xme[CGe],n,xSe[CGe],2.)
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl"),(n),"chest"))
call uee(xme[CGe],n,false,xQe[CGe],xse[CGe],THe(xme[CGe]))
if not(GetUnitAbilityLevel((n),(Ua))>0)and(GetUnitAbilityLevel((xme[CGe]),(wa))>0)then
call oex(xme[CGe],n)
endif
set xTe[CGe]=xTe[CGe]+1
if xTe[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
call Qre(xte[CGe])
set xte[CGe]=null
set xme[CGe]=null
set xMe[CGe]=null
call f4e(CGe)
endif
return false
endfunction
function f2x takes unit u,real d,unit v,real r returns nothing
local integer CGe=f3e()
set xme[CGe]=u
set xPe[CGe]=GetUnitX(v)
set xqe[CGe]=GetUnitY(v)
set xpe[CGe]=1
set xQe[CGe]=uBe(u,ude(u,1.5,.45,xb))
set xse[CGe]=uce(u,ude(u,$5DC,450,xb),'B009')
set xSe[CGe]=ude(u,$F,2,xb)
set xTe[CGe]=0
set xMe[CGe]=GetOwningPlayer(xme[CGe])
set xte[CGe]=AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",xme[CGe],"weapon")
call Qre(AddSpecialEffectTarget(("war3mapImported\\TNK_tanduongnhuhuyet.mdl"),(v),"chest"))
if r>0 then
set xQe[CGe]=d
set xse[CGe]=d
set xSe[CGe]=r
endif
call QIe(CGe,.03125,true,function f1x)
endfunction
function f3x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real x=GetUnitX(xye[CGe])
local real y=GetUnitY(xye[CGe])
call GroupEnumUnitsInRange(sv,x,y,$3E8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
call VXx(xye[CGe],x,y,xYe[CGe],xYe[CGe],'d',soe(x,y,GetUnitX(n),GetUnitY(n)))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set xWe[CGe]=xWe[CGe]-1
if xWe[CGe]<=0 or spe(xye[CGe])then
call QDe()
set xye[CGe]=null
call f2e(CGe)
endif
return false
endfunction
function f4x takes unit u,real d returns nothing
local integer CGe=f1e()
set xye[CGe]=u
set xYe[CGe]=d
set xWe[CGe]=20
call QIe(CGe,.2,true,function f3x)
endfunction
function f5x takes nothing returns boolean
local integer CGe=Qce()
if not spe(x4e[CGe])then
if x3e[CGe]>0 and GetRandomReal(0,'d')<=($A+x3e[CGe])then
call uee(x2e[CGe],x4e[CGe],true,0,x1e[CGe]*(1.2+.04*x3e[CGe]),'B007')
else
call uee(x2e[CGe],x4e[CGe],true,0,x1e[CGe],'B007')
endif
endif
set x0e[CGe]=x0e[CGe]-1
if x0e[CGe]<=0 or spe(x4e[CGe])or spe(x2e[CGe])then
call QDe()
set x2e[CGe]=null
set x4e[CGe]=null
call f0e(CGe)
endif
return false
endfunction
function f6x takes unit u,unit v,real d returns nothing
local integer CGe=f_e()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
set x3e[CGe]=BUe[(i)*(20)+9]
set x2e[CGe]=u
set x4e[CGe]=v
set x1e[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set x0e[CGe]=5
set p=null
call QIe(CGe,1.,true,function f5x)
endfunction
function f7x takes nothing returns boolean
local integer CGe=Qce()
set ove[CGe]=ove[CGe]-rb
call BlzSetSpecialEffectZ(x9e[CGe],ove[CGe])
set x8e[CGe]=x8e[CGe]-1
if x8e[CGe]<=0 then
call QDe()
call Qre(AddSpecialEffect(("war3mapImported\\MGK_effect1.mdl"),((oee[CGe])*1.),((oxe[CGe])*1.)))
call Qre(x9e[CGe])
set x9e[CGe]=null
call fZe(CGe)
endif
return false
endfunction
function f8x takes real x,real y returns nothing
local integer CGe=fze()
set x8e[CGe]=$D
set x9e[CGe]=AddSpecialEffect("war3mapImported\\MGK_thanhhoaln.mdl",x,y)
set ove[CGe]=sxe(x,y)+500
set oee[CGe]=x
set oxe[CGe]=y
call BlzSetSpecialEffectScale((x9e[CGe]),((1.5)*1.))
call BlzSetSpecialEffectZ(x9e[CGe],ove[CGe])
call BlzSetSpecialEffectYaw(x9e[CGe],270*bj_DEGTORAD)
call QIe(CGe,.03125,true,function f7x)
endfunction
function f9x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
local real x=GetRandomReal(oXe[CGe]-$C8,oXe[CGe]+$C8)
local real y=GetRandomReal(oOe[CGe]-$C8,oOe[CGe]+$C8)
local real lv=I2R(GetUnitAbilityLevel(oae[CGe],'A0VD'))
call f8x(x,y)
set x=GetRandomReal(oXe[CGe]-$C8,oXe[CGe]+$C8)
set y=GetRandomReal(oOe[CGe]-$C8,oOe[CGe]+$C8)
call f8x(x,y)
set x=GetRandomReal(oXe[CGe]-$C8,oXe[CGe]+$C8)
set y=GetRandomReal(oOe[CGe]-$C8,oOe[CGe]+$C8)
call f8x(x,y)
if oIe[CGe]<=5 then
call GroupEnumUnitsInRange(sv,oXe[CGe],oOe[CGe],400,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,oRe[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,oNe[CGe])then
call yLe(oae[CGe],n,oEe[CGe],2.)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Other\\AcidBomb\\BottleImpact.mdl"),(n),"chest"))
call uee(oae[CGe],n,true,one[CGe],oVe[CGe],THe(oae[CGe]))
call f6x(oae[CGe],n,oVe[CGe])
if(GetUnitAbilityLevel((oae[CGe]),('B050'))>0)and GetRandomReal(0,'d')<=35+5*lv then
call Tse(oae[CGe],(one[CGe]+oVe[CGe])*(.08+.02*lv))
endif
call GroupAddUnit(oNe[CGe],n)
set c=c+1
if c>=$A then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set oIe[CGe]=oIe[CGe]-1
if oIe[CGe]<=0 then
call QDe()
call Qne(oNe[CGe])
set oNe[CGe]=null
set oae[CGe]=null
set oRe[CGe]=null
call fYe(CGe)
endif
return false
endfunction
function Fvx takes unit u,real d1,real d2,real r,real x,real y returns nothing
local integer CGe=fye()
set oae[CGe]=u
set one[CGe]=d1
set oVe[CGe]=d2
set oEe[CGe]=r
set oXe[CGe]=x
set oOe[CGe]=y
set oIe[CGe]=$A
set oRe[CGe]=GetOwningPlayer(oae[CGe])
set oAe[CGe]=GetPlayerId(oRe[CGe])+1
set oNe[CGe]=CreateGroup()
call QIe(CGe,.1,true,function f9x)
endfunction
function Fex takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,3.,.9,ob))*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A0V9'))
local real d2=uce(u,ude(u,$9C4,750,ob),'B007')*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A0V9'))
local real r=ude(u,20,2,ob)
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
call Qre(AddSpecialEffectTarget(("war3mapImported\\NDC_amphong1.mdl"),(u),"origin"))
if(GetUnitAbilityLevel((u),('A0VI'))>0)then
call Ifx(u,ob)
endif
call Fvx(u,d1,d2,r,x,y)
set u=null
return false
endfunction
function Fxx takes nothing returns boolean
return GetSpellAbilityId()==ob and Fex()
endfunction
function Fox takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function Fxx))
set t=null
endfunction
function Frx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
call GroupEnumUnitsInRange(sv,oGe[CGe],ohe[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,oFe[CGe])and not spe(n)and not tOe(n)then
if oje[CGe]>0 and GetRandomReal(0,'d')<=($A+oje[CGe])then
call uee(oHe[CGe],n,true,ode[CGe],oDe[CGe]*(1.2+.04*oje[CGe]),'B007')
else
call uee(oHe[CGe],n,true,ode[CGe],oDe[CGe],'B007')
endif
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set oCe[CGe]=oCe[CGe]-1
if oCe[CGe]<=0 then
call QDe()
call Qre(oge[CGe])
set oge[CGe]=null
set oHe[CGe]=null
set oFe[CGe]=null
call fWe(CGe)
endif
return false
endfunction
function Fix takes unit u,real d,unit v,real r returns nothing
local integer CGe=fwe()
local integer c=0
local unit n=null
set oHe[CGe]=u
set oFe[CGe]=GetOwningPlayer(u)
set oGe[CGe]=GetUnitX(v)
set ohe[CGe]=GetUnitY(v)
set ode[CGe]=uBe(u,ude(u,1.,.3,ib))
set oDe[CGe]=uce(u,ude(u,$3E8,300,ib),'B007')
set ofe[CGe]=r
set oge[CGe]=AddSpecialEffect("war3mapImported\\MGK_thanhhoapt.mdl",oGe[CGe],ohe[CGe])
set oCe[CGe]=3
set oje[CGe]=BUe[(GetPlayerId(oFe[CGe])+1)*(20)+9]
call BlzSetSpecialEffectZ(oge[CGe],sxe(oGe[CGe],ohe[CGe]))
call GroupEnumUnitsInRange(sv,oGe[CGe],ohe[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,oFe[CGe])and not spe(n)and not tOe(n)then
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\SkeletalMageMissile\\SkeletalMageMissile.mdl"),(n),"chest"))
call uee(oHe[CGe],n,true,ode[CGe],oDe[CGe],THe(oHe[CGe]))
if(GetUnitAbilityLevel((u),('B050'))>0)then
call Tse(u,(ode[CGe]+oDe[CGe])*(.08+.02*GetUnitAbilityLevel(u,'A0VD')))
endif
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
call QIe(CGe,1.,true,function Frx)
endfunction
function Fax takes nothing returns boolean
local integer CGe=Qce()
set oLe[CGe]=oLe[CGe]-1
if oLe[CGe]<=0 then
call QDe()
call UnitRemoveAbility(ole[CGe],Eb)
call Tje(ole[CGe],7695,-ome[CGe])
set ole[CGe]=null
call fUe(CGe)
endif
return false
endfunction
function Fnx takes unit u returns nothing
local integer CGe=fue()
set ole[CGe]=u
set ome[CGe]=ude(u,1.5,.3,Vb)
set oLe[CGe]=R2I($F/ .03125)
call tKe(ole[CGe],Eb)
call Tje(ole[CGe],7695,ome[CGe])
call QIe(CGe,.03125,true,function Fax)
endfunction
function FVx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
call GroupEnumUnitsInRange(sv,oue[CGe],oUe[CGe],280,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,ote[CGe])and not spe(n)and not tOe(n)then
call yHe(owe[CGe],n,oSe[CGe],1.)
call uee(owe[CGe],n,true,oQe[CGe],ose[CGe],THe(owe[CGe]))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set oqe[CGe]=oqe[CGe]-1
if oqe[CGe]<=0 then
call QDe()
call Qre(oTe[CGe])
set oTe[CGe]=null
set owe[CGe]=null
set ote[CGe]=null
call fTe(CGe)
endif
return false
endfunction
function FEx takes unit u,player p,real x,real y,real d1,real d2,real r returns boolean
local integer CGe=fte()
local integer c=0
local unit n=null
set owe[CGe]=u
set ote[CGe]=p
set oue[CGe]=x
set oUe[CGe]=y
set oQe[CGe]=d1
set ose[CGe]=d2
set oSe[CGe]=r
set oTe[CGe]=AddSpecialEffect("war3mapImported\\TLBD_nghiephoalong.mdl",oue[CGe],oUe[CGe])
set oqe[CGe]=6
call BlzSetSpecialEffectZ(oTe[CGe],sxe(oue[CGe],oUe[CGe]))
call GroupEnumUnitsInRange(sv,x,y,280,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,p)and not spe(n)and not tOe(n)then
call yHe(u,n,r,1.)
call uee(u,n,true,d1,d2,THe(u))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
call QIe(CGe,1.,true,function FVx)
return false
endfunction
function FXx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set o1e[CGe]=(((o1e[CGe])*1.)+((Ob)*1.)*Cos(((o7e[CGe])*1.)*bj_DEGTORAD))
set o2e[CGe]=(((o2e[CGe])*1.)+((Ob)*1.)*Sin(((o7e[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(o_e[CGe],o1e[CGe],o2e[CGe],o6e[CGe])
call GroupEnumUnitsInRange(sv,o1e[CGe],o2e[CGe],90,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,oZe[CGe])and not spe(n)and not tOe(n)then
call FEx(oze[CGe],oZe[CGe],o1e[CGe],o2e[CGe],o3e[CGe],o4e[CGe],o5e[CGe])
call GroupClear(sv)
set o0e[CGe]=0
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set o0e[CGe]=o0e[CGe]-1
if o0e[CGe]<=0 then
call QDe()
call Qre(o_e[CGe])
set o_e[CGe]=null
set oze[CGe]=null
set oZe[CGe]=null
call fSe(CGe)
endif
return false
endfunction
function FOx takes unit u,real d1,real d2,real r,real x,real y,real a returns nothing
local integer CGe=fse()
set oze[CGe]=u
set o7e[CGe]=a
set o1e[CGe]=x
set o2e[CGe]=y
set o3e[CGe]=d1
set o4e[CGe]=d2
set o5e[CGe]=r
set o6e[CGe]=sxe(o1e[CGe],o2e[CGe])+'d'
set o_e[CGe]=AddSpecialEffect("war3mapImported\\TDBD_longtuong.mdl",x,y)
set o0e[CGe]=R2I(Xb/ Ob)
set oZe[CGe]=GetOwningPlayer(oze[CGe])
call BlzSetSpecialEffectYaw((o_e[CGe]),((o7e[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((o_e[CGe]),((1.5)*1.))
call BlzSetSpecialEffectZ(o_e[CGe],o6e[CGe])
call QIe(CGe,.03125,true,function FXx)
endfunction
function FRx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,3.,.9,Vb))
local real d2=uce(u,ude(u,$BB8,900,Vb),'B006')
local real r=ude(u,30,3,Vb)
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real a=soe(x,y,GetSpellTargetX(),GetSpellTargetY())
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
local real d=x9x(u,i)
set d1=d1*d
set d2=d2*d
call FOx(u,d1,d2,r,x,y,a)
if not(GetUnitAbilityLevel((u),(Eb))>0)then
call Fnx(u)
endif
set u=null
return false
endfunction
function FIx takes nothing returns boolean
return GetSpellAbilityId()==Vb and FRx()
endfunction
function FAx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function FIx))
set t=null
endfunction
function FNx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
if roe[CGe]==3 then
call Qre(rEe[CGe])
else
call Qre(AddSpecialEffect(("war3mapImported\\VDQ_thiendia.mdl"),((rre[CGe])*1.),((rie[CGe])*1.)))
endif
call GroupEnumUnitsInRange(sv,rre[CGe],rie[CGe],$FA,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,rxe[CGe])and not spe(n)and not tOe(n)then
call yle(ree[CGe],n,rVe[CGe],.5)
call uee(ree[CGe],n,true,rae[CGe],rne[CGe],THe(ree[CGe]))
call Qre(AddSpecialEffect(("war3mapImported\\VDQ_baccapnhiphuc.mdl"),((GetUnitX(n))*1.),((GetUnitY(n))*1.)))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set roe[CGe]=roe[CGe]-1
if roe[CGe]<=0 then
call QDe()
call Qre(rXe[CGe])
set rEe[CGe]=null
set rXe[CGe]=null
set ree[CGe]=null
set rxe[CGe]=null
call fQe(CGe)
endif
return false
endfunction
function Fbx takes unit u,real d,unit v,real r returns nothing
local integer CGe=fqe()
set ree[CGe]=u
set rre[CGe]=GetUnitX(v)
set rie[CGe]=GetUnitY(v)
set roe[CGe]=3
set rae[CGe]=uBe(u,ude(u,2.,.6,Rb))*Iox(u)
set rne[CGe]=uce(u,ude(u,$7D0,600,Rb),'B00A')*Iox(u)
set rVe[CGe]=ude(u,$F,2,Rb)
set rxe[CGe]=GetOwningPlayer(ree[CGe])
set rEe[CGe]=AddSpecialEffect("war3mapImported\\VDQ_thaicuc.mdl",rre[CGe],rie[CGe])
set rXe[CGe]=AddSpecialEffect("war3mapImported\\VDQ_thiendia2.mdl",rre[CGe],rie[CGe])
set rae[CGe]=rae[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A0AI'))
set rne[CGe]=rne[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A0AI'))
if(GetUnitAbilityLevel((ree[CGe]),(fO))>0)then
call Iix(ree[CGe])
endif
call Qre(AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl",ree[CGe],"weapon"))
if r>0 then
set rae[CGe]=d
set rne[CGe]=d
set rVe[CGe]=r
endif
call BlzSetSpecialEffectScale((rEe[CGe]),((1.5)*1.))
call BlzSetSpecialEffectScale((rXe[CGe]),((1.5)*1.))
call QIe(CGe,.32,true,function FNx)
endfunction
function FBx takes unit u,real d returns nothing
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local unit n=null
call GroupEnumUnitsInRange(sv,x,y,$3E8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and(IsUnitType((n),UNIT_TYPE_HERO))then
call yLe(u,n,'d',3.)
call Qre(AddSpecialEffect(("war3mapImported\\NDC_hoacotmienchuong2.mdl"),((GetUnitX(n))*1.),((GetUnitY(n))*1.)))
call iGx(u,n,d)
endif
call GroupRemoveUnit(sv,n)
endloop
endfunction
function Fcx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set rce[CGe]=(((rce[CGe])*1.)+((Ab)*1.)*Cos(((rGe[CGe])*1.)*bj_DEGTORAD))
set rCe[CGe]=(((rCe[CGe])*1.)+((Ab)*1.)*Sin(((rGe[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(rbe[CGe],rce[CGe],rCe[CGe],rFe[CGe])
if rhe[CGe]<7 then
call GroupEnumUnitsInRange(sv,rce[CGe],rCe[CGe],$A0,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,rNe[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,rge[CGe])then
call yHe(rAe[CGe],n,rfe[CGe],1.)
call GroupAddUnit(rge[CGe],n)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TLBD_tranphai1.mdl"),(n),"origin"))
call uee(rAe[CGe],n,true,rde[CGe],rDe[CGe],THe(rAe[CGe]))
set rhe[CGe]=rhe[CGe]+1
if rhe[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set rBe[CGe]=rBe[CGe]-1
if rBe[CGe]<=0 then
call QDe()
call Qre(rbe[CGe])
call Qne(rge[CGe])
set rge[CGe]=null
set rbe[CGe]=null
set rAe[CGe]=null
set rNe[CGe]=null
call fPe(CGe)
endif
return false
endfunction
function FCx takes unit u,player p,real d1,real d2,real x,real y,real r,real a returns nothing
local integer CGe=fpe()
set rAe[CGe]=u
set rGe[CGe]=a
set rce[CGe]=x
set rCe[CGe]=y
set rBe[CGe]=R2I(Ib/ Ab)
set rbe[CGe]=AddSpecialEffect("war3mapImported\\TLBD_transicaotuongzzz.mdl",rce[CGe],rCe[CGe])
set rFe[CGe]=sxe(rce[CGe],rCe[CGe])+'d'
set rde[CGe]=d1
set rDe[CGe]=d2
set rfe[CGe]=r
set rNe[CGe]=p
set rge[CGe]=CreateGroup()
set rhe[CGe]=0
call BlzSetSpecialEffectYaw((rbe[CGe]),((rGe[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((rbe[CGe]),((1.3)*1.))
call BlzSetSpecialEffectZ(rbe[CGe],rFe[CGe])
call QIe(CGe,.03125,true,function Fcx)
endfunction
function Fdx takes unit u,player p,real x,real y,real d1,real d2,real d3,real r,real a returns boolean
local integer c=0
local unit n=null
call GroupEnumUnitsInRange(sv,x,y,$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,p)and not spe(n)and not tOe(n)then
call uee(u,n,true,d1,d2,THe(u))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
call FCx(u,p,d1,d3,x,y,r,a)
call FCx(u,p,d1,d3,x,y,r,a+30)
call FCx(u,p,d1,d3,x,y,r,a-30)
return false
endfunction
function FDx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set rme[CGe]=(((rme[CGe])*1.)+((Nb)*1.)*Cos(((rSe[CGe])*1.)*bj_DEGTORAD))
set rMe[CGe]=(((rMe[CGe])*1.)+((Nb)*1.)*Sin(((rSe[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(rle[CGe],rme[CGe],rMe[CGe],rse[CGe])
call GroupEnumUnitsInRange(sv,rme[CGe],rMe[CGe],$A0,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,rKe[CGe])and not spe(n)and not tOe(n)then
call Fdx(rke[CGe],rKe[CGe],rme[CGe],rMe[CGe],rpe[CGe],rPe[CGe],rqe[CGe],rQe[CGe],rSe[CGe])
set rLe[CGe]=0
call GroupClear(sv)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set rLe[CGe]=rLe[CGe]-1
if rLe[CGe]<=0 then
call QDe()
call Qre(rle[CGe])
set rle[CGe]=null
set rke[CGe]=null
set rKe[CGe]=null
call fMe(CGe)
endif
return false
endfunction
function Ffx takes unit u,real d,unit v,real r returns nothing
local integer CGe=fme()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local integer i=0
local real rz=0
set rke[CGe]=u
set rSe[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set rme[CGe]=(((x)*1.)+((50)*1.)*Cos(((rSe[CGe])*1.)*bj_DEGTORAD))
set rMe[CGe]=(((y)*1.)+((50)*1.)*Sin(((rSe[CGe])*1.)*bj_DEGTORAD))
set rLe[CGe]=R2I(Ib/ Ab)
set rle[CGe]=AddSpecialEffect("war3mapImported\\TLBD_transicaotuongzzz.mdl",rme[CGe],rMe[CGe])
set rse[CGe]=sxe(rme[CGe],rMe[CGe])+'d'
set rpe[CGe]=uBe(u,ude(u,2.5,.75,bb))
set rPe[CGe]=uce(u,ude(u,$9C4,750,bb),'B006')
set rqe[CGe]=uce(u,ude(u,$9C4,750,bb),'B006')
set rQe[CGe]=ude(u,20,2,bb)
set rKe[CGe]=GetOwningPlayer(rke[CGe])
set rpe[CGe]=rpe[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A0SC'))
set rPe[CGe]=rPe[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A0SC'))
set rqe[CGe]=rqe[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A0SC'))
set i=GetPlayerId(rKe[CGe])+1
set rz=x9x(u,i)
set rpe[CGe]=rpe[CGe]*rz
set rPe[CGe]=rPe[CGe]*rz
set rqe[CGe]=rqe[CGe]*rz
if r>0 then
set rpe[CGe]=d
set rPe[CGe]=d
set rqe[CGe]=d
set rQe[CGe]=r
endif
call Qre(AddSpecialEffectTarget(("war3mapImported\\TLBD_tranphai1.mdl"),(u),"origin"))
call BlzSetSpecialEffectYaw((rle[CGe]),((rSe[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((rle[CGe]),((1.3)*1.))
call BlzSetSpecialEffectZ(rle[CGe],rse[CGe])
call QIe(CGe,.03125,true,function FDx)
endfunction
function FFx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
set rWe[CGe]=rWe[CGe]-Bb
call BlzSetSpecialEffectZ(rwe[CGe],rWe[CGe])
set rUe[CGe]=rUe[CGe]-1
if rUe[CGe]==2 then
call Qre(AddSpecialEffect(("war3mapImported\\VDK_tranphai5.mdl"),((rye[CGe])*1.),((rYe[CGe])*1.)))
endif
if rUe[CGe]<=0 then
call QDe()
call GroupEnumUnitsInRange(sv,rye[CGe],rYe[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,rZe[CGe])and not spe(n)and not tOe(n)then
call yle(rze[CGe],n,r_e[CGe],1.)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Items\\AIlb\\AIlbSpecialArt.mdl"),(n),"chest"))
call Qre(AddSpecialEffect(("war3mapImported\\VDK_nhankiemtarget.mdl"),((GetUnitX(n))*1.),((GetUnitY(n))*1.)))
call uee(rze[CGe],n,false,r0e[CGe],r1e[CGe],THe(rze[CGe]))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set rze[CGe]=null
set rZe[CGe]=null
call Qre(rwe[CGe])
set rwe[CGe]=null
call fLe(CGe)
endif
return false
endfunction
function Fgx takes unit u,player p,real d1,real d2,real r,real x,real y returns nothing
local integer CGe=fle()
set rUe[CGe]=$A
set rwe[CGe]=AddSpecialEffect("war3mapImported\\NMK_kiemanh.mdl",x,y)
set rWe[CGe]=sxe(x,y)+450
set rye[CGe]=x
set rYe[CGe]=y
set rze[CGe]=u
set rZe[CGe]=p
set r0e[CGe]=d1
set r1e[CGe]=d2
set r_e[CGe]=r
call BlzSetSpecialEffectScale((rwe[CGe]),((.7)*1.))
call BlzSetSpecialEffectPitch((rwe[CGe]),((90)*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectZ(rwe[CGe],rWe[CGe])
call BlzSetSpecialEffectYaw(rwe[CGe],270*bj_DEGTORAD)
call QIe(CGe,.03125,true,function FFx)
endfunction
function FGx takes nothing returns boolean
local integer CGe=Qce()
local real x0=GetUnitX(r6e[CGe])
local real y0=GetUnitY(r6e[CGe])
local real x=GetRandomReal(x0-600,x0+600)
local real y=GetRandomReal(y0-600,y0+600)
call Fgx(r6e[CGe],zv,r7e[CGe],r7e[CGe],'d',x,y)
set x=GetRandomReal(x0-600,x0+600)
set y=GetRandomReal(y0-600,y0+600)
call Fgx(r6e[CGe],zv,r7e[CGe],r7e[CGe],'d',x,y)
set r5e[CGe]=r5e[CGe]-1
if r5e[CGe]<=0 or spe(r6e[CGe])then
call QDe()
set r6e[CGe]=null
call fKe(CGe)
endif
return false
endfunction
function Fhx takes unit u,real d returns nothing
local integer CGe=fke()
set r6e[CGe]=u
set r7e[CGe]=d
set r5e[CGe]=40
call QIe(CGe,.1,true,function FGx)
endfunction
function FHx takes nothing returns boolean
local integer CGe=Qce()
local real x=GetUnitX(ixe[CGe])
local real y=GetUnitY(ixe[CGe])
local real a=GetUnitFacing(ixe[CGe])
call AGx(ixe[CGe],ioe[CGe],ioe[CGe],80,x,y,a)
call AGx(ixe[CGe],ioe[CGe],ioe[CGe],80,x,y,a+$A)
call AGx(ixe[CGe],ioe[CGe],ioe[CGe],80,x,y,a-$A)
call AGx(ixe[CGe],ioe[CGe],ioe[CGe],80,x,y,a+20)
call AGx(ixe[CGe],ioe[CGe],ioe[CGe],80,x,y,a-20)
call AGx(ixe[CGe],ioe[CGe],ioe[CGe],80,x,y,a+30)
call AGx(ixe[CGe],ioe[CGe],ioe[CGe],80,x,y,a-30)
set iee[CGe]=iee[CGe]-1
if iee[CGe]<=0 or spe(ixe[CGe])then
call QDe()
set ixe[CGe]=null
call fJe(CGe)
endif
return false
endfunction
function Fjx takes unit u,real d,real a returns nothing
local integer CGe=fje()
set ixe[CGe]=u
set ioe[CGe]=d
set iee[CGe]=4
call QIe(CGe,.5,true,function FHx)
endfunction
function FJx takes nothing returns boolean
local integer CGe=Qce()
set iEe[CGe]=(((iEe[CGe])*1.)+((25)*1.)*Cos(((ine[CGe])*1.)*bj_DEGTORAD))
set iXe[CGe]=(((iXe[CGe])*1.)+((25)*1.)*Sin(((ine[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(iRe[CGe],iEe[CGe],iXe[CGe],iVe[CGe])
set iOe[CGe]=iOe[CGe]-1
if iOe[CGe]<=0 then
call QDe()
call Qre(iRe[CGe])
set iRe[CGe]=null
call fHe(CGe)
endif
return false
endfunction
function Fkx takes real x,real y,real a,real db returns nothing
local integer CGe=fhe()
set iEe[CGe]=(((x)*1.)+((30)*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set iXe[CGe]=(((y)*1.)+((30)*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set ine[CGe]=a
set iRe[CGe]=AddSpecialEffect("war3mapImported\\TVT_truytinhtarget.mdl",iEe[CGe],iXe[CGe])
set iVe[CGe]=sxe(x,y)+88
set iOe[CGe]=R2I(db/ 25)
call BlzSetSpecialEffectScale((iRe[CGe]),((.5)*1.))
call BlzSetSpecialEffectZ(iRe[CGe],iVe[CGe])
call BlzSetSpecialEffectYaw(iRe[CGe],ine[CGe]*bj_DEGTORAD)
call QIe(CGe,.03125,true,function FJx)
endfunction
function FKx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real x=GetUnitX(ibe[CGe])
local real y=GetUnitY(ibe[CGe])
if BUe[(iHe[CGe])*(20)+9]>0 then
call i4x(ibe[CGe],BUe[(iHe[CGe])*(20)+9],iHe[CGe])
endif
call Fkx(x,y,GetUnitFacing(ibe[CGe])+GetRandomReal(-$F,$F),sre(x,y,iCe[CGe],ide[CGe]))
if ige[CGe]<7 then
call GroupEnumUnitsInRange(sv,iCe[CGe],ide[CGe],'d',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,iBe[CGe])and not spe(n)and not tOe(n)then
call yHe(ibe[CGe],n,iFe[CGe],.5)
if ice[CGe]==2 then
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\HydraliskImpact\\HydraliskImpact.mdl"),(n),"chest"))
endif
call uee(ibe[CGe],n,false,iDe[CGe],ife[CGe],THe(ibe[CGe]))
set ige[CGe]=ige[CGe]+1
if ige[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set ice[CGe]=ice[CGe]-1
if ice[CGe]<=0 then
call QDe()
call BlzSetSpecialEffectScale((iGe[CGe]),((.001)*1.))
call Qre(iGe[CGe])
set ihe[CGe]=null
set iGe[CGe]=null
set ibe[CGe]=null
set iBe[CGe]=null
call fGe(CGe)
endif
return false
endfunction
function Flx takes unit u,real d,unit v,real r returns nothing
local integer CGe=fge()
local real a=GetUnitFacing(u)
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set ibe[CGe]=u
set iCe[CGe]=GetUnitX(v)
set ide[CGe]=GetUnitY(v)
set ihe[CGe]=v
set ice[CGe]=2
set iDe[CGe]=uBe(u,ude(u,2.,.6,cb))
set ife[CGe]=uce(u,ude(u,$5DC,450,cb),'B006')
set iFe[CGe]=ude(u,$F,2,cb)
set ige[CGe]=0
set iBe[CGe]=GetOwningPlayer(ibe[CGe])
set iHe[CGe]=GetPlayerId(iBe[CGe])+1
set iDe[CGe]=iDe[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A03Q'))
set ife[CGe]=ife[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A03Q'))
set iGe[CGe]=AddSpecialEffect("war3mapImported\\VDK_caster.mdl",x,y)
call BlzSetSpecialEffectYaw((iGe[CGe]),((a)*1.)*bj_DEGTORAD)
call Fkx(x,y,a+GetRandomReal(-$F,$F),sre(x,y,iCe[CGe],ide[CGe]))
if r>0 then
set iDe[CGe]=d
set ife[CGe]=d
set iFe[CGe]=r
endif
call QIe(CGe,.25,true,function FKx)
endfunction
function FLx takes nothing returns boolean
local integer CGe=Qce()
if(GetUnitAbilityLevel((iMe[CGe]),(DI))>0)and TQe(iMe[CGe])<=30. then
call uee(iLe[CGe],iMe[CGe],false,0,ile[CGe]*(1.07+.03*BUe[(ime[CGe])*(20)+4]),'B007')
else
call uee(iLe[CGe],iMe[CGe],false,0,ile[CGe],'B007')
endif
set iKe[CGe]=iKe[CGe]-1
if iKe[CGe]<=0 or spe(iMe[CGe])or spe(iLe[CGe])then
call QDe()
set iLe[CGe]=null
set iMe[CGe]=null
call fFe(CGe)
endif
return false
endfunction
function Fmx takes unit u,unit v,real d returns nothing
local integer CGe=ffe()
set iLe[CGe]=u
set iMe[CGe]=v
set ile[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set iKe[CGe]=2
set ime[CGe]=(GetPlayerId(GetOwningPlayer((iLe[CGe])))+1)
call QIe(CGe,1.,true,function FLx)
endfunction
function FMx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real db=0
if not spe(ise[CGe])and not i3e[CGe]then
set db=sre(iue[CGe],iUe[CGe],GetUnitX(ise[CGe]),GetUnitY(ise[CGe]))
if db<=50 then
set ize[CGe]=ize[CGe]+GetRandomInt(-1,1)*30
call BlzSetSpecialEffectYaw((ite[CGe]),((ize[CGe])*1.)*bj_DEGTORAD)
set iTe[CGe]=$A
set i2e[CGe]=true
set i3e[CGe]=true
endif
endif
set iue[CGe]=(((iue[CGe])*1.)+((Db)*1.)*Cos(((ize[CGe])*1.)*bj_DEGTORAD))
set iUe[CGe]=(((iUe[CGe])*1.)+((Db)*1.)*Sin(((ize[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(ite[CGe],iue[CGe],iUe[CGe],iYe[CGe])
if i_e[CGe]<7 then
call GroupEnumUnitsInRange(sv,iue[CGe],iUe[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,iSe[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,iZe[CGe])then
if i1e[CGe]==1 then
call yHe(iQe[CGe],n,iye[CGe],1.)
call Fmx(iQe[CGe],n,iWe[CGe])
if not(GetUnitAbilityLevel((n),(DI))>0)and BUe[(i0e[CGe])*(20)+4]>0 then
call Bux(iQe[CGe],i0e[CGe],n)
endif
endif
call Qre(AddSpecialEffectTarget(("war3mapImported\\NDD_tranphai11.mdl"),(n),"chest"))
call uee(iQe[CGe],n,false,iwe[CGe],iWe[CGe],THe(iQe[CGe]))
call GroupAddUnit(iZe[CGe],n)
set i_e[CGe]=i_e[CGe]+1
if i_e[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set iTe[CGe]=iTe[CGe]-1
if iTe[CGe]==0 and i2e[CGe]then
set ize[CGe]=ize[CGe]+$B4
call BlzSetSpecialEffectYaw((ite[CGe]),((ize[CGe])*1.)*bj_DEGTORAD)
set iTe[CGe]=$A
set i2e[CGe]=false
endif
if iTe[CGe]<=0 and not i2e[CGe]then
call QDe()
call Qre(ite[CGe])
call Qne(iZe[CGe])
set iZe[CGe]=null
set ite[CGe]=null
set iQe[CGe]=null
set iSe[CGe]=null
set ise[CGe]=null
call fDe(CGe)
endif
return false
endfunction
function Fpx takes unit u,player p,real d1,real d2,real r,real x,real y,real a,unit v,integer b returns nothing
local integer CGe=fde()
set iQe[CGe]=u
set ise[CGe]=v
set iue[CGe]=x
set iUe[CGe]=y
set ize[CGe]=a
set i_e[CGe]=0
set i1e[CGe]=b
set iwe[CGe]=d1
set iWe[CGe]=d2
set iye[CGe]=r
set i2e[CGe]=false
set i3e[CGe]=false
set iYe[CGe]=sxe(iue[CGe],iUe[CGe])+'x'
set ite[CGe]=AddSpecialEffect("Abilities\\Spells\\Undead\\Possession\\PossessionMissile.mdl",iue[CGe],iUe[CGe])
set iTe[CGe]=R2I(fb/ Db)
set iZe[CGe]=CreateGroup()
set iSe[CGe]=GetOwningPlayer(iQe[CGe])
set i0e[CGe]=GetPlayerId(iSe[CGe])+1
call BlzSetSpecialEffectYaw((ite[CGe]),((ize[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((ite[CGe]),((1.35)*1.))
call BlzSetSpecialEffectZ(ite[CGe],iYe[CGe])
call QIe(CGe,.03125,true,function FMx)
endfunction
function FPx takes nothing returns boolean
local integer CGe=Qce()
call Fpx(i7e[CGe],aae[CGe],aee[CGe],axe[CGe],are[CGe],i9e[CGe],ave[CGe],ane[CGe],i8e[CGe],aie[CGe])
set aie[CGe]=aie[CGe]-1
if aie[CGe]<=0 then
call QDe()
set i7e[CGe]=null
set i8e[CGe]=null
set aae[CGe]=null
call fCe(CGe)
endif
return false
endfunction
function Fqx takes unit u,real d,unit v,real r returns nothing
local integer CGe=fce()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real a=soe(x,y,GetUnitX(v),GetUnitY(v))
if spe(v)then
set a=GetUnitFacing(u)
endif
set i7e[CGe]=u
set i8e[CGe]=v
set i9e[CGe]=(((x)*1.)+(('d')*1.)*Cos(((a)*1.)*bj_DEGTORAD))
set ave[CGe]=(((y)*1.)+(('d')*1.)*Sin(((a)*1.)*bj_DEGTORAD))
set aee[CGe]=uBe(u,ude(u,3.5,1.05,Cb))
set axe[CGe]=uce(u,ude(u,$BB8,900,Cb),'B007')
set are[CGe]=ude(u,20,3,Cb)
set aie[CGe]=1
set aae[CGe]=GetOwningPlayer(i7e[CGe])
set ane[CGe]=a
set aee[CGe]=aee[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A05W'))
set axe[CGe]=axe[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A05W'))
set mv=(GetPlayerId(GetOwningPlayer((u)))+1)
if BUe[(mv)*(20)+9]>0 then
set Pv=aee[CGe]*(.02+.01*BUe[(mv)*(20)+9])
if Pv>$4E20 then
set Pv=$4E20
endif
call Tse(i7e[CGe],Pv)
endif
call Qre(AddSpecialEffectTarget(("war3mapImported\\NDD_tranphai11.mdl"),(u),"chest"))
if r>0 then
set aee[CGe]=d
set axe[CGe]=d
set are[CGe]=r
endif
call Fpx(i7e[CGe],aae[CGe],aee[CGe],axe[CGe],are[CGe],i9e[CGe],ave[CGe],ane[CGe],i8e[CGe],0)
call QIe(CGe,.25,true,function FPx)
endfunction
function FQx takes nothing returns boolean
local integer CGe=Qce()
call uee(aIe[CGe],aAe[CGe],true,0,aRe[CGe],'B007')
set aOe[CGe]=aOe[CGe]-1
if aOe[CGe]<=0 or spe(aAe[CGe])or spe(aIe[CGe])then
call QDe()
set aIe[CGe]=null
set aAe[CGe]=null
call fBe(CGe)
endif
return false
endfunction
function Fsx takes unit u,unit v,real d returns nothing
local integer CGe=fbe()
set aIe[CGe]=u
set aAe[CGe]=v
set aRe[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set aOe[CGe]=4
call QIe(CGe,1.,true,function FQx)
endfunction
function FSx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local integer c=0
call GroupEnumUnitsInRange(sv,aDe[CGe],afe[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,aCe[CGe])and not spe(n)and not tOe(n)then
if not(GetUnitAbilityLevel((n),(sa))>0)and BUe[(ahe[CGe])*(20)+4]>0 and GetRandomReal(0,'d')<=18+2*BUe[(ahe[CGe])*(20)+4]then
call xwx(ace[CGe],n)
endif
if ade[CGe]==2 then
call Qre(AddSpecialEffectTarget(("Abilities\\Weapons\\GreenDragonMissile\\GreenDragonMissile.mdl"),(n),"chest"))
call yLe(ace[CGe],n,aGe[CGe],1.)
else
call Fsx(ace[CGe],n,age[CGe])
endif
call uee(ace[CGe],n,true,aFe[CGe],age[CGe],THe(ace[CGe]))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set ade[CGe]=ade[CGe]-1
if ade[CGe]<=0 then
call QDe()
set ace[CGe]=null
set aCe[CGe]=null
call fNe(CGe)
endif
return false
endfunction
function Ftx takes unit u,real d,unit v,real r returns nothing
local integer CGe=fAe()
set ace[CGe]=u
set aDe[CGe]=GetUnitX(v)
set afe[CGe]=GetUnitY(v)
set ade[CGe]=2
set aFe[CGe]=uBe(u,ude(u,2.5,.75,Fb))
set age[CGe]=uce(u,ude(u,$9C4,750,Fb),'B007')
set aGe[CGe]=ude(u,$F,2,Fb)
set aCe[CGe]=GetOwningPlayer(ace[CGe])
set ahe[CGe]=GetPlayerId(aCe[CGe])+1
set aFe[CGe]=aFe[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A06B'))
set age[CGe]=age[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A06B'))
call Qre(AddSpecialEffectTarget(("war3mapImported\\NDC_amphongcasst.mdl"),(u),"origin"))
call Qre(AddSpecialEffect(("war3mapImported\\NDC_tranphai33.mdl"),((aDe[CGe])*1.),((afe[CGe])*1.)))
if BUe[(ahe[CGe])*(20)+9]>0 then
if not nI[ahe[CGe]]and GetRandomReal(0,'d')<=$C+3*BUe[(ahe[CGe])*(20)+9]then
call BVx(ace[CGe],BUe[(ahe[CGe])*(20)+9],ahe[CGe])
endif
endif
call Qre(AddSpecialEffectTarget("Abilities\\Weapons\\SkeletalMageMissile\\SkeletalMageMissile.mdl",u,"hand right"))
call Qre(AddSpecialEffectTarget("Abilities\\Weapons\\SkeletalMageMissile\\SkeletalMageMissile.mdl",u,"hand left"))
call Qre(AddSpecialEffectTarget(("war3mapImported\\NDC_quytrao2.mdl"),(u),"chest"))
if r>0 then
set aFe[CGe]=d
set age[CGe]=d
set aGe[CGe]=r
endif
call QIe(CGe,.5,true,function FSx)
endfunction
function FTx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set aMe[CGe]=(((aMe[CGe])*1.)+((Gb)*1.)*Cos(((ate[CGe])*1.)*bj_DEGTORAD))
set ape[CGe]=(((ape[CGe])*1.)+((Gb)*1.)*Sin(((ate[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(aLe[CGe],aMe[CGe],ape[CGe],aSe[CGe])
if ase[CGe]<7 then
call GroupEnumUnitsInRange(sv,aMe[CGe],ape[CGe],'x',Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,aKe[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,ale[CGe])then
call yHe(ake[CGe],n,aQe[CGe],1.)
call yKe(ake[CGe],n,aQe[CGe],2.)
call GroupAddUnit(ale[CGe],n)
call Qre(AddSpecialEffect(("war3mapImported\\TNK_tanduongnhuhuyet3.mdl"),((GetUnitX(n))*1.),((GetUnitY(n))*1.)))
call uee(ake[CGe],n,false,aPe[CGe],aqe[CGe],THe(ake[CGe]))
if not(GetUnitAbilityLevel((n),(Ua))>0)and(GetUnitAbilityLevel((ake[CGe]),(wa))>0)then
call oex(ake[CGe],n)
endif
set ase[CGe]=ase[CGe]+1
if ase[CGe]>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set ame[CGe]=ame[CGe]-1
if ame[CGe]<=0 then
call QDe()
call Qre(aLe[CGe])
call Qre(aTe[CGe])
call Qne(ale[CGe])
set aTe[CGe]=null
set ale[CGe]=null
set aLe[CGe]=null
set ake[CGe]=null
set aKe[CGe]=null
call fIe(CGe)
endif
return false
endfunction
function Fux takes unit u,real d,unit v,real r returns nothing
local integer CGe=fRe()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
set ake[CGe]=u
set ate[CGe]=soe(x,y,GetUnitX(v),GetUnitY(v))
set aMe[CGe]=(((x)*1.)+((60)*1.)*Cos(((ate[CGe])*1.)*bj_DEGTORAD))
set ape[CGe]=(((y)*1.)+((60)*1.)*Sin(((ate[CGe])*1.)*bj_DEGTORAD))
set ame[CGe]=R2I(gb/ Gb)
set aLe[CGe]=AddSpecialEffect("war3mapImported\\TNK_vanlong11.mdl",aMe[CGe],ape[CGe])
set aSe[CGe]=sxe(aMe[CGe],ape[CGe])+70
set aPe[CGe]=uBe(u,ude(u,6.,1.8,hb))
set aqe[CGe]=uce(u,ude(u,6000,$708,hb),'B009')
set aQe[CGe]=ude(u,20,2,hb)
set ase[CGe]=0
set ale[CGe]=CreateGroup()
set aKe[CGe]=GetOwningPlayer(ake[CGe])
set aTe[CGe]=AddSpecialEffect("war3mapImported\\TNK_vanlongcast4.mdl",x,y)
set aPe[CGe]=aPe[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A09K'))
set aqe[CGe]=aqe[CGe]*(1.+TKe(u,690))*(1.+.03*GetUnitAbilityLevel(u,'A09K'))
set Pv=aPe[CGe]*ude(ake[CGe],.06,.01,hb)
if Pv>$4650 then
set Pv=$4650
endif
call Tse(ake[CGe],Pv)
if r>0 then
set aPe[CGe]=d
set aqe[CGe]=d
set aQe[CGe]=r
endif
call BlzSetSpecialEffectYaw((aLe[CGe]),((ate[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((aLe[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(aLe[CGe],aSe[CGe])
call BlzSetSpecialEffectYaw((aTe[CGe]),((ate[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((aTe[CGe]),((.4)*1.))
call BlzSetSpecialEffectZ(aTe[CGe],aSe[CGe])
call QIe(CGe,.03125,true,function FTx)
endfunction
function FUx takes nothing returns boolean
local integer CGe=Qce()
if not spe(aze[CGe])then
if aZe[CGe]>0 and GetRandomReal(0,'d')<=($A+aZe[CGe])then
call uee(aYe[CGe],aze[CGe],true,0,aye[CGe]*(1.2+.04*aZe[CGe]),'B007')
else
call uee(aYe[CGe],aze[CGe],true,0,aye[CGe],'B007')
endif
endif
set aWe[CGe]=aWe[CGe]-1
if aWe[CGe]<=0 or spe(aze[CGe])or spe(aYe[CGe])then
call QDe()
set aYe[CGe]=null
set aze[CGe]=null
call fOe(CGe)
endif
return false
endfunction
function Fwx takes unit u,unit v,real d returns nothing
local integer CGe=fXe()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
set aZe[CGe]=BUe[(i)*(20)+9]
set aYe[CGe]=u
set aze[CGe]=v
set aye[CGe]=d*((1.+TKe(u,Cx))/(1.+TKe(v,Dx)))
set aWe[CGe]=4
set p=null
call QIe(CGe,1.,true,function FUx)
endfunction
function FWx takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
local real r=0
local integer id=0
local real lv=I2R(GetUnitAbilityLevel(a2e[CGe],'A0VD'))
set a7e[CGe]=(((a7e[CGe])*1.)+((jb)*1.)*Cos(((noe[CGe])*1.)*bj_DEGTORAD))
set a8e[CGe]=(((a8e[CGe])*1.)+((jb)*1.)*Sin(((noe[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(a5e[CGe],a7e[CGe],a8e[CGe],nxe[CGe])
if nie[CGe]<4 then
call GroupEnumUnitsInRange(sv,a7e[CGe],a8e[CGe],$96,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,a3e[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,a4e[CGe])then
set id=GetHandleId(n)
if LoadInteger(la,id,nre[CGe])==0 then
call SaveInteger(la,id,nre[CGe],1)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Other\\AcidBomb\\BottleImpact.mdl"),(n),"chest"))
call yLe(a2e[CGe],n,nee[CGe],2.)
call uee(a2e[CGe],n,true,a9e[CGe],nve[CGe],THe(a2e[CGe]))
call Fwx(a2e[CGe],n,nve[CGe])
if(GetUnitAbilityLevel((a2e[CGe]),('B050'))>0)and GetRandomReal(0,'d')<=35+5*lv then
call Tse(a2e[CGe],(a9e[CGe]+nve[CGe])*(.08+.02*lv))
endif
set nie[CGe]=nie[CGe]+1
if nie[CGe]>=4 then
call GroupClear(sv)
endif
endif
call GroupAddUnit(a4e[CGe],n)
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set a6e[CGe]=a6e[CGe]-1
if a6e[CGe]<=0 then
call QDe()
loop
set n=FirstOfGroup(a4e[CGe])
exitwhen n==null
call SaveInteger(la,GetHandleId(n),nre[CGe],0)
call GroupRemoveUnit(a4e[CGe],n)
endloop
call Qre(a5e[CGe])
call Qne(a4e[CGe])
set a4e[CGe]=null
set a5e[CGe]=null
set a2e[CGe]=null
set a3e[CGe]=null
call fEe(CGe)
endif
return false
endfunction
function Fyx takes unit u,real x,real y,real d1,real d2,real r,real a,integer K returns nothing
local integer CGe=fVe()
set a2e[CGe]=u
set noe[CGe]=a
set a7e[CGe]=x
set a8e[CGe]=y
set a3e[CGe]=GetOwningPlayer(a2e[CGe])
set a6e[CGe]=R2I(Hb/ jb)
set a5e[CGe]=AddSpecialEffect("Abilities\\Spells\\NightElf\\Immolation\\ImmolationTarget.mdl",a7e[CGe],a8e[CGe])
set nxe[CGe]=sxe(a7e[CGe],a8e[CGe])+30
set a9e[CGe]=d1
set nve[CGe]=d2
set nie[CGe]=0
set nee[CGe]=r
set a4e[CGe]=CreateGroup()
set nre[CGe]=K
call BlzSetSpecialEffectYaw((a5e[CGe]),((noe[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((a5e[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(a5e[CGe],nxe[CGe])
call QIe(CGe,.03125,true,function FWx)
endfunction
function FYx takes nothing returns boolean
local integer CGe=Qce()
local integer c=0
local unit n=null
local integer rd=GetRandomInt($F4240,$98967F)
local real lv=I2R(GetUnitAbilityLevel(nEe[CGe],'A0VD'))
set nXe[CGe]=nXe[CGe]-1
if nXe[CGe]==1 then
call GroupEnumUnitsInRange(sv,nOe[CGe],nRe[CGe],$C8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,nBe[CGe])and not spe(n)and not tOe(n)then
call yLe(nEe[CGe],n,nNe[CGe],2.)
call uee(nEe[CGe],n,true,nIe[CGe],nAe[CGe],THe(nEe[CGe]))
if(GetUnitAbilityLevel((nEe[CGe]),('B050'))>0)and GetRandomReal(0,'d')<=35+5*lv then
call Tse(nEe[CGe],(nIe[CGe]+nAe[CGe])*(.08+.02*lv))
endif
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
if nXe[CGe]<=0 then
call QDe()
call Fyx(nEe[CGe],nOe[CGe],nRe[CGe],nIe[CGe],nAe[CGe],nNe[CGe],nbe[CGe]+30,rd)
call Fyx(nEe[CGe],nOe[CGe],nRe[CGe],nIe[CGe],nAe[CGe],nNe[CGe],nbe[CGe]+90,rd)
call Fyx(nEe[CGe],nOe[CGe],nRe[CGe],nIe[CGe],nAe[CGe],nNe[CGe],nbe[CGe]+$96,rd)
call Fyx(nEe[CGe],nOe[CGe],nRe[CGe],nIe[CGe],nAe[CGe],nNe[CGe],nbe[CGe]+$D2,rd)
call Fyx(nEe[CGe],nOe[CGe],nRe[CGe],nIe[CGe],nAe[CGe],nNe[CGe],nbe[CGe]+270,rd)
call Fyx(nEe[CGe],nOe[CGe],nRe[CGe],nIe[CGe],nAe[CGe],nNe[CGe],nbe[CGe]+330,rd)
set nBe[CGe]=null
set nEe[CGe]=null
call fne(CGe)
endif
return false
endfunction
function Fzx takes unit u,real d1,real d2,real r,real x,real y returns nothing
local integer CGe=fae()
set nEe[CGe]=u
set nOe[CGe]=x
set nRe[CGe]=y
set nXe[CGe]=2
set nIe[CGe]=d1
set nAe[CGe]=d2
set nNe[CGe]=r
set nBe[CGe]=GetOwningPlayer(nEe[CGe])
set nbe[CGe]=GetUnitFacing(nEe[CGe])
call Qre(AddSpecialEffect(("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl"),((nOe[CGe])*1.),((nRe[CGe])*1.)))
call QIe(CGe,.2,true,function FYx)
endfunction
function FZx takes nothing returns boolean
local unit u=GetTriggerUnit()
local real d1=uBe(u,ude(u,2.,.6,Jb))
local real d2=uce(u,ude(u,$7D0,600,Jb),'B007')
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local real r=ude(u,$F,2,Jb)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl"),(u),"origin"))
if(GetUnitAbilityLevel((u),('A0VI'))>0)then
call Ifx(u,Jb)
endif
call Fzx(u,d1,d2,r,x,y)
set u=null
return false
endfunction
function F_x takes nothing returns boolean
return GetSpellAbilityId()==Jb and FZx()
endfunction
function F0x takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function F_x))
set t=null
endfunction
function F1x takes nothing returns boolean
local integer CGe=Qce()
local integer c=0
local unit n=null
call Qre(AddSpecialEffect(("war3mapImported\\TLQ_casternew.mdl"),((nFe[CGe])*1.),((nge[CGe])*1.)))
call GroupEnumUnitsInRange(sv,nFe[CGe],nge[CGe],$B4,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,nje[CGe])and not spe(n)and not tOe(n)then
call yHe(nDe[CGe],n,nHe[CGe],1.)
call Qre(AddSpecialEffectTarget(("war3mapImported\\TLD_thientruccaster.mdl"),(n),"origin"))
call uee(nDe[CGe],n,false,nGe[CGe],nhe[CGe],THe(nDe[CGe]))
set c=c+1
if c>=7 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
set nfe[CGe]=nfe[CGe]-1
if nfe[CGe]<=0 then
call QDe()
set nje[CGe]=null
set nDe[CGe]=null
call fie(CGe)
endif
return false
endfunction
function F2x takes unit u,real d,unit v,real r returns nothing
local integer CGe=fre()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local unit n=null
local integer c=0
set nDe[CGe]=u
set nFe[CGe]=GetUnitX(v)
set nge[CGe]=GetUnitY(v)
set nfe[CGe]=3
set nje[CGe]=GetOwningPlayer(u)
set nGe[CGe]=uBe(u,ude(u,4.,1.2,kb))
set nhe[CGe]=uce(u,ude(u,$BB8,900,kb),'B006')
set nHe[CGe]=ude(u,20,2,kb)
set nGe[CGe]=nGe[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A03K'))
set nhe[CGe]=nhe[CGe]*(1.+TKe(u,qx))*(1.+.03*GetUnitAbilityLevel(u,'A03K'))
call Qre(AddSpecialEffectTarget(("war3mapImported\\TLQ_casternew.mdl"),(nDe[CGe]),"origin"))
call Qre(AddSpecialEffect(("war3mapImported\\TLQ_casternew.mdl"),((nFe[CGe])*1.),((nge[CGe])*1.)))
if r>0 then
set nGe[CGe]=d
set nhe[CGe]=d
set nHe[CGe]=r
endif
if GetRandomReal(0,'d')<=$F then
call Onx(nDe[CGe],nje[CGe],nGe[CGe],nhe[CGe],nHe[CGe],nFe[CGe],nge[CGe],GetUnitFacing(nDe[CGe]))
call Qre(AddSpecialEffect(("war3mapImported\\TLQ_phateffect.mdl"),((x)*1.),((y)*1.)))
endif
call QIe(CGe,.1667,true,function F1x)
endfunction
function F3x takes nothing returns boolean
local integer CGe=Qce()
call A5x(nLe[CGe],nme[CGe],nme[CGe],50,nMe[CGe],npe[CGe],nPe[CGe]+GetRandomReal(-30,30))
set nle[CGe]=nle[CGe]-1
if nle[CGe]<=0 or spe(nLe[CGe])then
call QDe()
set nLe[CGe]=null
call foe(CGe)
endif
return false
endfunction
function F4x takes unit u,real d,real x,real y returns nothing
local integer CGe=fxe()
set nLe[CGe]=u
set nme[CGe]=d
set nMe[CGe]=GetUnitX(u)
set npe[CGe]=GetUnitY(u)
set nPe[CGe]=soe(nMe[CGe],npe[CGe],x,y)
set nle[CGe]=$A
call QIe(CGe,.18,true,function F3x)
endfunction
function F5x takes nothing returns boolean
local integer CGe=Qce()
local unit n=null
set nUe[CGe]=(((nUe[CGe])*1.)+((lb)*1.)*Cos(((nZe[CGe])*1.)*bj_DEGTORAD))
set nwe[CGe]=(((nwe[CGe])*1.)+((lb)*1.)*Sin(((nZe[CGe])*1.)*bj_DEGTORAD))
call BlzSetSpecialEffectPosition(nTe[CGe],nUe[CGe],nwe[CGe],nze[CGe])
if n0e[CGe]<4 then
call GroupEnumUnitsInRange(sv,nUe[CGe],nwe[CGe],80,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,nte[CGe])and not spe(n)and not tOe(n)and not IsUnitInGroup(n,n_e[CGe])then
call yke(nSe[CGe],n,nYe[CGe],3.)
call GroupAddUnit(n_e[CGe],n)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorDamage.mdl"),(n),"chest"))
call uee(nSe[CGe],n,false,nWe[CGe],nye[CGe],THe(nSe[CGe]))
set n0e[CGe]=n0e[CGe]+1
if n0e[CGe]>=4 then
call GroupClear(sv)
endif
endif
call GroupRemoveUnit(sv,n)
endloop
endif
set n=null
set nue[CGe]=nue[CGe]-1
if nue[CGe]<=0 then
call QDe()
call Qre(nTe[CGe])
call Qne(n_e[CGe])
set n_e[CGe]=null
set nTe[CGe]=null
set nSe[CGe]=null
set nte[CGe]=null
call fee(CGe)
endif
return false
endfunction
function F6x takes unit u,real x,real y,real d1,real d2,real r,real a returns nothing
local integer CGe=fve()
set nSe[CGe]=u
set nZe[CGe]=a
set nUe[CGe]=x
set nwe[CGe]=y
set nWe[CGe]=d1
set nye[CGe]=d2
set nYe[CGe]=r
set nze[CGe]=sxe(nUe[CGe],nwe[CGe])+80
set nTe[CGe]=AddSpecialEffect("war3mapImported\\TYD_vudalehoa.mdl",nUe[CGe],nwe[CGe])
set nue[CGe]=R2I(Kb/ lb)
set n_e[CGe]=CreateGroup()
set nte[CGe]=GetOwningPlayer(nSe[CGe])
set n0e[CGe]=0
call BlzSetSpecialEffectYaw((nTe[CGe]),((nZe[CGe])*1.)*bj_DEGTORAD)
call BlzSetSpecialEffectScale((nTe[CGe]),((.8)*1.))
call BlzSetSpecialEffectZ(nTe[CGe],nze[CGe])
call QIe(CGe,.03125,true,function F5x)
endfunction
function F7x takes nothing returns boolean
local integer CGe=Qce()
set n5e[CGe]=n5e[CGe]-20
call F6x(Vee[CGe],n6e[CGe],n7e[CGe],n8e[CGe],n9e[CGe],Vve[CGe],n5e[CGe])
set n4e[CGe]=n4e[CGe]-1
if n4e[CGe]<=0 then
call QDe()
set Vee[CGe]=null
call D9e(CGe)
endif
return false
endfunction
function F8x takes unit u,real d1,real d2,real r returns nothing
local integer CGe=D8e()
set Vee[CGe]=u
set n6e[CGe]=GetUnitX(u)
set n7e[CGe]=GetUnitY(u)
set n4e[CGe]=18
set n8e[CGe]=d1
set n9e[CGe]=d2
set Vve[CGe]=r
set n5e[CGe]=315
call QIe(CGe,.04,true,function F7x)
endfunction
function F9x takes nothing returns boolean
local unit u=GetTriggerUnit()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
local real d1=uBe(u,ude(u,2.,.6,Lb))*(1.+.05*AI[i])
local real d2=uce(u,ude(u,$BB8,900,Lb),'B008')*(1.+.05*AI[i])
local real r=ude(u,20,2,Lb)
set AI[i]=0
if(GetUnitAbilityLevel((u),(yE))>0)then
call UnitRemoveAbility(u,'BOwk')
call UnitRemoveAbility(u,yE)
call XFx(u)
endif
call F8x(u,d1,d2,r)
set u=null
return false
endfunction
function gvx takes nothing returns boolean
return GetSpellAbilityId()==Lb and F9x()
endfunction
function gex takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function gvx))
set t=null
endfunction
function gxx takes integer id returns string
if id==9 then
return"war3mapImported\\BTNMattichtrungcap.blp"
elseif id==$A then
return"war3mapImported\\BTNMattichcaocap.blp"
elseif id==$B then
return"war3mapImported\\BTNMattichtranphai-abi.blp"
elseif id>=$D and id<=16 then
return"war3mapImported\\BTNFrameUI_Empty.blp"
else
return"war3mapImported\\BTNFrameUI_item_trong.blp"
endif
return null
endfunction
function gox takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local framehandle f=BlzGetTriggerFrame()
if f!=null then
call BlzFrameSetVisible(f,false)
call BlzFrameSetVisible(f,true)
endif
if not EC then
set f=null
set p=null
return false
endif
if ti[id]then
call Qke(p,"|cffff0000"+"Xin đừng thao tác quá nhanh !",5)
set f=null
set p=null
return false
endif
call UMe(id,1.)
if not Ub[id+1]or B2e[id]or bNe[id]or bye[id]or bLe[id]or b5e[id]or bQe[id]or b1e[id]or BHe[id]or b9e[id]then
set f=null
set p=null
return false
endif
if BQe[id]==false then
if GetLocalPlayer()==p then
call BlzFrameSetVisible(Mb,true)
endif
set BQe[id]=true
else
set BQe[id]=false
if GetLocalPlayer()==p then
call BlzFrameSetVisible(Mb,false)
endif
endif
set f=null
set p=null
return false
endfunction
function grx takes nothing returns nothing
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local integer yae=LoadInteger(ht,pb,GetHandleId(f))
local real x=.2452
local real y=.308
local real w=.24
local real h=.22
local string sVe=BTe[(id)*(16)+yae]
if BSe[(id)*(16)+yae]!=0 then
if yae>=$D and yae<=16 then
set x=.2552
set y=.268
set w=.18
set h=.08
endif
if yae>=7 and yae<=8 then
set sVe=sVe+"|cffadd8e6"+"

Độ luyện: "+I2S(Bme[(id+1)*(20)+yae-6]/ 2)+"/"+I2S(nj[BUe[(id+1)*(20)+yae]])+"|r"
endif
if GetLocalPlayer()==p then
set zc=Bte[(id)*(16)+yae]
set Zc=sVe
set rC=x
set iC=y
set aC=w
set nC=h
endif
if GetLocalPlayer()==p then
call BlzFrameSetAbsPoint(yc,FRAMEPOINT_BOTTOMLEFT,rC,iC)
call BlzFrameSetSize(yc,aC,nC)
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextTitle",0),zc)
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,true)
endif
endif
set f=null
set sVe=null
set p=null
endfunction
function gix takes nothing returns nothing
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,false)
call BlzFrameSetVisible(Pb,false)
endif
set f=null
set p=null
endfunction
function gax takes nothing returns boolean
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local integer yae=LoadInteger(ht,pb,GetHandleId(f))
local string sVe=""
if GetLocalPlayer()==p then
call BlzFrameSetVisible(f,false)
call BlzFrameSetVisible(f,true)
endif
if BSe[(id)*(16)+yae]>0 and yae!=$C then
set xA=false
call CFx(XJ[id+1],p,id+1,yae)
set sVe=BTe[(id)*(16)+yae]
if yae>=7 and yae<=8 then
set sVe=sVe+"|cffadd8e6"+"

Độ luyện: "+I2S(Bme[(id+1)*(20)+yae-6]/ 2)+"/"+I2S(nj[BUe[(id+1)*(20)+yae]])+"|r"
endif
if xA then
if GetLocalPlayer()==p then
set zc=Bte[(id)*(16)+yae]
set Zc=sVe
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextTitle",0),zc)
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,true)
endif
endif
endif
set sVe=null
set f=null
set p=null
return false
endfunction
function gnx takes integer i,real x,real y returns nothing
set Bse[i]=Uhe(gxx(i))
call Ude(Bse[i],52,x,y)
call Uke(Bse[i],function gax)
call Ule(Bse[i],function grx)
call ULe(Bse[i],function gix)
call SaveInteger(ht,pb,GetHandleId(Bse[i]),i)
call BlzFrameSetParent(Bse[i],Mb)
endfunction
function gVx takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
if BQe[id] then
set BQe[id]=false
if GetLocalPlayer()==p then
call BlzFrameSetVisible(Mb,false)
endif
endif
set p=null
return false
endfunction
function gEx takes nothing returns nothing
local real z=.01
local real y=.02
set Mb=UJe("war3mapImported\\FrameUI_Ability.tga")
call UFe(Mb,755,514,.005,.255)
call gnx(1,z+.065,y+.4323)
call gnx(4,z+.10184,y+.4323)
call gnx(2,z+.065,y+.3923)
call gnx(5,z+.10184,y+.3923)
call gnx(3,z+.065,y+.3523)
call gnx(6,z+.10184,y+.3523)
call gnx(7,z+.14498,y+.4323)
call gnx(9,z+.18182,y+.4323)
call gnx(8,z+.14498,y+.3923)
call gnx($A,z+.18182,y+.3923)
call gnx($C,z+.14498,y+.3523)
call gnx($B,z+.18182,y+.3523)
call gnx(16,z+.3452,y+.3403)
call gnx($F,z+.3102,y+.3403)
call gnx($E,z+.2752,y+.3403)
call gnx($D,z+.2402,y+.3403)
set yc=BlzCreateFrame("BoxedText",BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI,0),0,0)
call BlzFrameSetVisible(Mb,false)
call BlzFrameSetVisible(yc,false)
endfunction
function gXx takes nothing returns nothing
local trigger t=CreateTrigger()
call BlzTriggerRegisterPlayerKeyEvent(t,Player(0),OSKEY_K,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(1),OSKEY_K,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(2),OSKEY_K,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(3),OSKEY_K,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(4),OSKEY_K,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(5),OSKEY_K,0,true)
call TriggerAddAction(t,function gox)
set mb=Uhe("war3mapImported\\bt6.tga")
call UFe(mb,58,58,.27,.137)
call Uke(mb,function gox)
set t=CreateTrigger()
call TriggerRegisterPlayerEvent(t,Player(0),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(1),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(2),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(3),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(4),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(5),EVENT_PLAYER_END_CINEMATIC)
call TriggerAddAction(t,function gVx)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,3.,false)
call TriggerAddAction(t,function gEx)
set t=null
endfunction
function gOx takes unit u,integer i,real r returns nothing
local real x=(((GetUnitX(u))*1.)+(($96)*1.)*Cos(((r-'x')*1.)*bj_DEGTORAD))
local real y=(((GetUnitY(u))*1.)+(($96)*1.)*Sin(((r-'x')*1.)*bj_DEGTORAD))
local real db=sre(GetUnitX(QI[i]),GetUnitY(QI[i]),x,y)
if db>800 then
call SetUnitX(QI[i],x)
call SetUnitY(QI[i],y)
call sge(QI[i])
call SetUnitFacing(QI[i],GetUnitFacing(u))
else
call IssuePointOrderById(QI[i],$D0012,x,y)
endif
endfunction
function gRx takes nothing returns boolean
local integer CGe=Qce()
local real x=GetUnitX(Vae[CGe])
local real y=GetUnitY(Vae[CGe])
local real z=sie(Vae[CGe])
call BlzSetSpecialEffectPosition(Hi[Vie[CGe]],x,y,z+$A0)
call BlzSetSpecialEffectPosition(Zb[Vie[CGe]],x,y,z+$FA+eB[Vie[CGe]])
if Vae[CGe]==null then
call QDe()
set Vae[CGe]=null
call D7e(CGe)
endif
return false
endfunction
function gIx takes unit u,integer i returns nothing
local integer CGe=D6e()
set Vae[CGe]=u
set Vie[CGe]=i
call QIe(CGe,.015625,true,function gRx)
endfunction
function gAx takes nothing returns boolean
local integer CGe=Qce()
local real r=GetUnitFacing(XJ[VRe[CGe]])
if qb[VRe[CGe]]==1 and(GetUnitAbilityLevel((XJ[VRe[CGe]]),('A03X'))>0)then
if not BAe[VRe[CGe]]and TQe(XJ[VRe[CGe]])<=40. and not(GetUnitAbilityLevel((XJ[VRe[CGe]]),('A0ID'))>0)and not(GetUnitAbilityLevel((XJ[VRe[CGe]]),('A0EB'))>0)then
if not spe(XJ[VRe[CGe]])then
call nzx(XJ[VRe[CGe]],VRe[CGe])
endif
endif
endif
if qb[VRe[CGe]]==2 and(GetUnitAbilityLevel((XJ[VRe[CGe]]),('A04E'))>0)then
if not Bce[VRe[CGe]]and TQe(XJ[VRe[CGe]])<=40. and not(GetUnitAbilityLevel((XJ[VRe[CGe]]),('A0ID'))>0)and not(GetUnitAbilityLevel((XJ[VRe[CGe]]),('A0EB'))>0)then
if not spe(XJ[VRe[CGe]])then
call A9x(XJ[VRe[CGe]],VRe[CGe])
endif
endif
endif
if qb[VRe[CGe]]==23 and(GetUnitAbilityLevel((XJ[VRe[CGe]]),('A0S7'))>0)then
if not BXe[VRe[CGe]]and TQe(XJ[VRe[CGe]])<=40. then
if not spe(XJ[VRe[CGe]])then
call x8x(XJ[VRe[CGe]],VRe[CGe])
endif
endif
endif
if cLe[VRe[CGe]]<20 then
set cLe[VRe[CGe]]=cLe[VRe[CGe]]+1
endif
if QI[VRe[CGe]]!=null then
call QVe(QI[VRe[CGe]],GetUnitMoveSpeed(XJ[VRe[CGe]]))
call gOx(XJ[VRe[CGe]],VRe[CGe],r)
endif
set VXe[CGe]=VXe[CGe]-1
if VXe[CGe]<=0 then
set VXe[CGe]=5
set mv=GetHeroLevel(VOe[CGe])
set BYe[(VRe[CGe])*(2)+1]=(TKe(VOe[CGe],6951)*(bJ[VRe[CGe]]*$C8+mv))*(1.+TKe(VOe[CGe],Fx))
set BYe[(VRe[CGe])*(2)+2]=(TKe(VOe[CGe],fx)*(bJ[VRe[CGe]]*$C8+mv))*(1.+TKe(VOe[CGe],gx))
call Tse(VOe[CGe],BYe[(VRe[CGe])*(2)+1])
call Tte(VOe[CGe],BYe[(VRe[CGe])*(2)+2])
endif
if VOe[CGe]==null then
call QDe()
set VOe[CGe]=null
call D5e(CGe)
endif
return Yv
endfunction
function gNx takes unit u returns nothing
local integer CGe=D4e()
set VOe[CGe]=u
set VRe[CGe]=(GetPlayerId(GetOwningPlayer((u))))+1
set VXe[CGe]=5
call QIe(CGe,1.,yv,function gAx)
endfunction
function gbx takes unit u,player p,integer i returns nothing
local integer id=GetHandleId(u)
if(GetUnitAbilityLevel((u),('A0WL'))>0)then
set qb[i]=1
set Qb[i]=3
set sb[i]="Thiên Vương"
set Sb[i]=1
set ub[i]=1
call SaveBoolean(UH,id,ge,false)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,.5,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Thương Thiên)")
endif
call TJe(u,4346,$96)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,7614,60)
call Tje(u,Vx,.25)
set wb[i]=false
set Wb[i]=0
set BWe[(i)*(20)+1]=2
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=0
set Bpe[(3)*(6)+i]='A002'
set Bye[(i)*(4)+1]='A0Q8'
set Bye[(i)*(4)+2]='A0Q9'
set Bye[(i)*(4)+3]='A0QA'
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_thienvuong.blp")
set Tb="war3mapImported\\IconTGA_thienvuong.tga"
set Bwe[(i)*(20)+1]='A03Q'
set Bwe[(i)*(20)+2]='A03R'
set Bwe[(i)*(20)+3]='A03S'
set Bwe[(i)*(20)+4]='A03V'
set Bwe[(i)*(20)+5]='A03W'
set Bwe[(i)*(20)+6]='A040'
set Bwe[(i)*(20)+7]='A043'
set Bwe[(i)*(20)+8]='A044'
set Bwe[(i)*(20)+9]='A045'
set Bwe[(i)*(20)+$A]='A048'
set Bwe[(i)*(20)+$B]='A0SN'
call Tje(u,6951,.7)
call Tje(u,fx,.3)
call Ccx(u,i-1,Bwe[(i)*(20)+1],'d',$3E8,$F,0,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],80,$C8,'d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],40,40,0,0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],5,60,0,0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],$F,$F,45,30,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],$C8,$F,60,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],$C8,$5DC,$F,0,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],600,6000,0,0,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0WM'))>0)then
set qb[i]=2
set Qb[i]=4
call SaveBoolean(UH,id,ge,false)
set sb[i]="Thiên Vương"
set Sb[i]=1
set ub[i]=1
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,.5,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Chùy Thiên)")
endif
call TJe(u,4346,$96)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,7614,60)
call Tje(u,Vx,.25)
set wb[i]=false
set Wb[i]=0
set BWe[(i)*(20)+1]=2
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=0
set Bpe[(3)*(6)+i]='A001'
set Bye[(i)*(4)+1]='A0PU'
set Bye[(i)*(4)+2]='A0PV'
set Bye[(i)*(4)+3]='A0PW'
call Tje(u,6951,.7)
call Tje(u,fx,.3)
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_thienvuong.blp")
set Tb="war3mapImported\\IconTGA_thienvuong.tga"
set Bwe[(i)*(20)+1]='A04B'
set Bwe[(i)*(20)+2]='A04C'
set Bwe[(i)*(20)+3]='A03S'
set Bwe[(i)*(20)+4]='A03V'
set Bwe[(i)*(20)+5]='A04D'
set Bwe[(i)*(20)+6]='A04H'
set Bwe[(i)*(20)+7]='A04K'
set Bwe[(i)*(20)+8]='A04L'
set Bwe[(i)*(20)+9]='A04M'
set Bwe[(i)*(20)+$A]='A04Q'
set Bwe[(i)*(20)+$B]='A0SO'
call Ccx(u,i-1,Bwe[(i)*(20)+1],'x',$4B0,20,0,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],80,$C8,'d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],40,40,0,0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],5,60,0,0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],$F,60,45,30,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],$82,$A,0,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],$C8,$7D0,20,0,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],400,$FA0,0,0,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0WN'))>0)then
set qb[i]=3
set Qb[i]=2
set sb[i]="Thiếu Lâm"
set Sb[i]=1
set ub[i]=1
call SaveBoolean(UH,id,ge,false)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,1.45,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Đao Thiếu)")
endif
call TJe(u,4346,55)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,7614,60)
call Tje(u,Vx,.25)
set wb[i]=true
set Wb[i]=0
set BWe[(i)*(20)+1]=2
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=0
set Bpe[(3)*(6)+i]='A000'
set Bye[(i)*(4)+1]='A0PM'
set Bye[(i)*(4)+2]='A0PN'
set Bye[(i)*(4)+3]='A0PO'
call Tje(u,6951,.7)
call Tje(u,fx,.3)
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_thieulam.blp")
set Tb="war3mapImported\\IconTGA_thieulam.tga"
set Bwe[(i)*(20)+1]='A025'
set Bwe[(i)*(20)+2]='A02B'
set Bwe[(i)*(20)+3]='A02M'
set Bwe[(i)*(20)+4]='A02N'
set Bwe[(i)*(20)+5]='A02Z'
set Bwe[(i)*(20)+6]='A032'
set Bwe[(i)*(20)+7]='A033'
set Bwe[(i)*(20)+8]='A034'
set Bwe[(i)*(20)+9]='A037'
set Bwe[(i)*(20)+$A]='A03B'
set Bwe[(i)*(20)+$B]='A0SP'
call Ccx(u,i-1,Bwe[(i)*(20)+1],'d',$3E8,20,0,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],9,$C8,'d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],$A,$BB8,30,0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],$A,8,0,0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],20,60,0,0,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],20,$A,0,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],$C8,$7D0,20,0,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],20,50,18,23,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0WO'))>0)then
set qb[i]=4
set Qb[i]=5
set sb[i]="Thiếu Lâm"
set Sb[i]=1
set ub[i]=1
call SaveBoolean(UH,id,ge,false)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,1.45,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Quyền Thiếu)")
endif
call TJe(u,4346,55)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,7614,60)
call Tje(u,Vx,.25)
set wb[i]=false
set Wb[i]=0
set BWe[(i)*(20)+1]=2
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=0
set Bpe[(3)*(6)+i]=0
set Bye[(i)*(4)+1]='A0Q0'
set Bye[(i)*(4)+2]='A0Q3'
set Bye[(i)*(4)+3]='A0Q4'
call Tje(u,6951,.7)
call Tje(u,fx,.3)
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_thieulam.blp")
set Tb="war3mapImported\\IconTGA_thieulam.tga"
set Bwe[(i)*(20)+1]='A03E'
set Bwe[(i)*(20)+2]='A03F'
set Bwe[(i)*(20)+3]='A02M'
set Bwe[(i)*(20)+4]='A02N'
set Bwe[(i)*(20)+5]='A03G'
set Bwe[(i)*(20)+6]='A03J'
set Bwe[(i)*(20)+7]='A03K'
set Bwe[(i)*(20)+8]='A03L'
set Bwe[(i)*(20)+9]='A03O'
set Bwe[(i)*(20)+$A]='A03P'
set Bwe[(i)*(20)+$B]='A0SQ'
call Ccx(u,i-1,Bwe[(i)*(20)+1],'d',$3E8,20,0,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],9,$C8,'d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],$A,$BB8,30,0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],$A,8,0,0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],20,'d',0,0,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],$C8,$7D0,0,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],300,$7D0,20,0,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],$A,$A,$C,20,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0WP'))>0)then
set qb[i]=5
set Qb[i]=7
set sb[i]="Đường Môn"
set Sb[i]=2
set ub[i]=1
call SaveBoolean(UH,id,ge,false)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,1.45,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Tụ Tiễn)")
endif
call TJe(u,4346,55)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,5319,.2)
call Tje(u,vx,.2)
set wb[i]=true
set Wb[i]=8
set BWe[(i)*(20)+1]=1
set BWe[(i)*(20)+2]=2
set BWe[(i)*(20)+3]=0
set Bpe[(3)*(6)+i]=0
set Bye[(i)*(4)+1]='A0Q0'
set Bye[(i)*(4)+2]='A0Q3'
set Bye[(i)*(4)+3]='A0Q5'
call Tje(u,6951,.6)
call Tje(u,fx,.4)
set Yb[i]="war3mapImported\\DMTT_aura2.mdx"
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_duongmon.blp")
set Tb="war3mapImported\\IconTGA_duongmon.tga"
set Bwe[(i)*(20)+1]='A04T'
set Bwe[(i)*(20)+2]='A04U'
set Bwe[(i)*(20)+3]='A04V'
set Bwe[(i)*(20)+4]='A04Y'
set Bwe[(i)*(20)+5]='A04Z'
set Bwe[(i)*(20)+6]='A052'
set Bwe[(i)*(20)+7]='A053'
set Bwe[(i)*(20)+8]='A054'
set Bwe[(i)*(20)+9]='A055'
set Bwe[(i)*(20)+$A]='A058'
set Bwe[(i)*(20)+$B]='A0SR'
call Ccx(u,i-1,Bwe[(i)*(20)+1],'d',$3E8,$F,0,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],9,$C8,'d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],300,20,0,0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],60,$A,'d',0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],40,$A,0,0,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],$96,$A,$F,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],$96,$5DC,20,0,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],300,$9C4,40,0,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0WQ'))>0)then
set qb[i]=6
set Qb[i]=8
set sb[i]="Đường Môn"
set Sb[i]=2
set ub[i]=1
call SaveBoolean(UH,id,ge,false)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,1.45,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Phi Đao)")
endif
call TJe(u,4346,55)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,5319,.2)
call Tje(u,vx,.2)
set wb[i]=false
set Wb[i]=0
set BWe[(i)*(20)+1]=1
set BWe[(i)*(20)+2]=2
set BWe[(i)*(20)+3]=0
set Bpe[(3)*(6)+i]=0
set Bye[(i)*(4)+1]='A0Q0'
set Bye[(i)*(4)+2]='A0Q3'
set Bye[(i)*(4)+3]='A0Q5'
call Tje(u,6951,.6)
call Tje(u,fx,.4)
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_duongmon.blp")
set Tb="war3mapImported\\IconTGA_duongmon.tga"
set Bwe[(i)*(20)+1]='A05C'
set Bwe[(i)*(20)+2]='A04U'
set Bwe[(i)*(20)+3]='A04V'
set Bwe[(i)*(20)+4]='A04Y'
set Bwe[(i)*(20)+5]='A05D'
set Bwe[(i)*(20)+6]='A052'
set Bwe[(i)*(20)+7]='A05E'
set Bwe[(i)*(20)+8]='A05F'
set Bwe[(i)*(20)+9]='A05I'
set Bwe[(i)*(20)+$A]='A05J'
set Bwe[(i)*(20)+$B]='A0SS'
call Ccx(u,i-1,Bwe[(i)*(20)+1],'d',$3E8,$F,0,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],9,$C8,'d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],300,20,0,0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],60,$A,'x',0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],$96,$9C4,25,0,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],$96,$A,$F,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],$FA,$9C4,20,0,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],20,$F,0,0,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0WR'))>0)then
set qb[i]=7
set Qb[i]=2
set sb[i]="Ngũ Độc"
set Sb[i]=2
set ub[i]=1
call SaveBoolean(UH,id,ge,false)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,1.45,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Đao Độc)")
endif
call TJe(u,4346,55)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,5319,.2)
call Tje(u,vx,.2)
set wb[i]=true
set Wb[i]=-5
set BWe[(i)*(20)+1]=2
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=0
set Bpe[(3)*(6)+i]='A005'
set Bye[(i)*(4)+1]='A0PM'
set Bye[(i)*(4)+2]='A0PN'
set Bye[(i)*(4)+3]='A0PO'
call Tje(u,6951,.6)
call Tje(u,fx,.4)
set Yb[i]="war3mapImported\\NDD_sauvohinh2.mdx"
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_ngudoc.blp")
set Tb="war3mapImported\\IconTGA_ngudoc-nam.tga"
set Bwe[(i)*(20)+1]='A05M'
set Bwe[(i)*(20)+2]='A05N'
set Bwe[(i)*(20)+3]='A05O'
set Bwe[(i)*(20)+4]='A05R'
set Bwe[(i)*(20)+5]='A05U'
set Bwe[(i)*(20)+6]='A05V'
set Bwe[(i)*(20)+7]='A05W'
set Bwe[(i)*(20)+8]='A05X'
set Bwe[(i)*(20)+9]='A05Y'
set Bwe[(i)*(20)+$A]='A060'
set Bwe[(i)*(20)+$B]='A0ST'
call Ccx(u,i-1,Bwe[(i)*(20)+1],'d',$3E8,$F,0,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],9,$C8,'d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],'d',$7D0,'x',0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],'d',$A,0,0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],'d',$9C4,20,0,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],'d',$F,$F,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],$B4,$7D0,$F,0,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],$C8,$7D0,40,0,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0WS'))>0)then
set qb[i]=8
set Qb[i]=5
set sb[i]="Ngũ Độc"
set Sb[i]=2
set ub[i]=2
call SaveBoolean(UH,id,ge,true)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,1.45,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Chưởng Độc)")
endif
call TJe(u,4346,55)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,5319,.2)
call Tje(u,vx,.2)
set wb[i]=false
set Wb[i]=-25
set BWe[(i)*(20)+1]=0
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=2
set Bpe[(3)*(6)+i]=0
set Bye[(i)*(4)+1]='A0Q0'
set Bye[(i)*(4)+2]='A0Q2'
set Bye[(i)*(4)+3]='A0Q6'
call Tje(u,6951,.3)
call Tje(u,fx,.7)
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_ngudoc.blp")
set Tb="war3mapImported\\IconTGA_ngudoc-nu.tga"
set Bwe[(i)*(20)+1]='A063'
set Bwe[(i)*(20)+2]='A064'
set Bwe[(i)*(20)+3]='A065'
set Bwe[(i)*(20)+4]='A066'
set Bwe[(i)*(20)+5]='A069'
set Bwe[(i)*(20)+6]='A05V'
set Bwe[(i)*(20)+7]='A06B'
set Bwe[(i)*(20)+8]='A06C'
set Bwe[(i)*(20)+9]='A06D'
set Bwe[(i)*(20)+$A]='A06G'
set Bwe[(i)*(20)+$B]='A0SU'
call Ccx(u,i-1,Bwe[(i)*(20)+1],70,$5DC,0,0,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],9,60,'d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],$B,'d',0,0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],'d','d',20,0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],$96,$BB8,20,0,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],'d',$F,$F,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],$C8,$5DC,$F,0,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],$C8,$7D0,0,0,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0WT'))>0)then
set qb[i]=9
set Qb[i]=1
set sb[i]="Thúy Yên"
set Sb[i]=3
set ub[i]=2
call SaveBoolean(UH,id,ge,true)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,1.45,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Kiếm Thúy)")
endif
call TJe(u,4346,55)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,jx,.2)
call Tje(u,6282,.2)
call Tje(u,7255,.2)
call Tje(u,Jx,.2)
call Tje(u,572,.2)
call Tje(u,7896,.2)
call Tje(u,lx,.2)
call Tje(u,6210,.2)
set wb[i]=false
set Wb[i]=0
set BWe[(i)*(20)+1]=0
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=2
set Bpe[(3)*(6)+i]='A007'
set Bye[(i)*(4)+1]='A0PG'
set Bye[(i)*(4)+2]='A0PH'
set Bye[(i)*(4)+3]='A0PI'
call Tje(u,6951,.3)
call Tje(u,fx,.7)
set Yb[i]="war3mapImported\\TYK_aura3.mdx"
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_thuyyen.blp")
set Tb="war3mapImported\\IconTGA_thuyyen.tga"
set Bwe[(i)*(20)+1]='A06H'
set Bwe[(i)*(20)+2]='A06I'
set Bwe[(i)*(20)+3]='A06J'
set Bwe[(i)*(20)+4]='A06K'
set Bwe[(i)*(20)+5]='A06N'
set Bwe[(i)*(20)+6]='A06Q'
set Bwe[(i)*(20)+7]='A06R'
set Bwe[(i)*(20)+8]='A06S'
set Bwe[(i)*(20)+9]='A06T'
set Bwe[(i)*(20)+$A]='A06W'
set Bwe[(i)*(20)+$B]='A0SV'
call Ccx(u,i-1,Bwe[(i)*(20)+1],'d',$3E8,20,0,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],9,60,'d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],'d',$B,0,0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],4,'d',20,0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],$C8,$7D0,40,0,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],20,'d',$F,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],$FA,$BB8,$BB8,20,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],300,$BB8,40,0,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0WU'))>0)then
set qb[i]=$A
set Qb[i]=2
set sb[i]="Thúy Yên"
set Sb[i]=3
set ub[i]=2
call SaveBoolean(UH,id,ge,false)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,1.45,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Đao Thúy)")
endif
call TJe(u,4346,55)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,jx,.2)
call Tje(u,6282,.2)
call Tje(u,7255,.2)
call Tje(u,Jx,.2)
call Tje(u,572,.2)
call Tje(u,7896,.2)
call Tje(u,lx,.2)
call Tje(u,6210,.2)
set wb[i]=false
set Wb[i]=0
set BWe[(i)*(20)+1]=2
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=0
set Bpe[(3)*(6)+i]='A00C'
set Bye[(i)*(4)+1]='A0PP'
set Bye[(i)*(4)+2]='A0PQ'
set Bye[(i)*(4)+3]='A0PR'
call Tje(u,6951,.7)
call Tje(u,fx,.3)
set Yb[i]="war3mapImported\\TYK_aura3.mdx"
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_thuyyen.blp")
set Tb="war3mapImported\\IconTGA_thuyyen.tga"
set Bwe[(i)*(20)+1]='A06Z'
set Bwe[(i)*(20)+2]='A070'
set Bwe[(i)*(20)+3]='A071'
set Bwe[(i)*(20)+4]='A06K'
set Bwe[(i)*(20)+5]='A075'
set Bwe[(i)*(20)+6]='A076'
set Bwe[(i)*(20)+7]='A077'
set Bwe[(i)*(20)+8]='A078'
set Bwe[(i)*(20)+9]='A079'
set Bwe[(i)*(20)+$A]='A07D'
set Bwe[(i)*(20)+$B]='A0SW'
call Ccx(u,i-1,Bwe[(i)*(20)+1],'d',$3E8,20,1,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],9,$C8,'d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],'d',0,0,0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],4,'d',20,0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],$C8,$BB8,20,0,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],30,'d',$F,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],$C8,$5DC,20,0,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],9,20,20,0,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0WV'))>0)then
set qb[i]=$B
set Qb[i]=1
set sb[i]="Nga My"
set Sb[i]=3
set ub[i]=2
call SaveBoolean(UH,id,ge,true)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,1.45,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Kiếm Nga)")
endif
call TJe(u,4346,55)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,jx,.2)
call Tje(u,6282,.2)
call Tje(u,7255,.2)
call Tje(u,Jx,.2)
call Tje(u,572,.2)
call Tje(u,7896,.2)
call Tje(u,lx,.2)
call Tje(u,6210,.2)
set wb[i]=false
set Wb[i]=0
set BWe[(i)*(20)+1]=0
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=2
set Bpe[(3)*(6)+i]='A0G7'
set Bye[(i)*(4)+1]='A0PG'
set Bye[(i)*(4)+2]='A0PH'
set Bye[(i)*(4)+3]='A0PI'
call Tje(u,6951,.5)
call Tje(u,fx,.5)
set Yb[i]="war3mapImported\\NMK_aura2.mdx"
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_ngami.blp")
set Tb="war3mapImported\\IconTGA_ngami.tga"
set Bwe[(i)*(20)+1]='A07G'
set Bwe[(i)*(20)+2]='A07H'
set Bwe[(i)*(20)+3]='A07I'
set Bwe[(i)*(20)+4]='A07L'
set Bwe[(i)*(20)+5]='A07M'
set Bwe[(i)*(20)+6]='A07N'
set Bwe[(i)*(20)+7]='A07R'
set Bwe[(i)*(20)+8]='A07O'
set Bwe[(i)*(20)+9]='A07P'
set Bwe[(i)*(20)+$A]='A07Q'
set Bwe[(i)*(20)+$B]='A0SX'
call Ccx(u,i-1,Bwe[(i)*(20)+1],'d',$3E8,20,1,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],5,0,0,0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],1,0,0,0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],30,$F,0,0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],$E,0,0,0,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],$82,0,0,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],$C8,$7D0,20,0,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],20,0,0,0,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0WW'))>0)then
set qb[i]=$C
set Qb[i]=5
set sb[i]="Nga My"
set Sb[i]=3
set zb[i]=1
set ub[i]=2
call SaveBoolean(UH,id,ge,true)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,1.45,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Chưởng Nga)")
endif
call TJe(u,4346,55)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,jx,.2)
call Tje(u,6282,.2)
call Tje(u,7255,.2)
call Tje(u,Jx,.2)
call Tje(u,572,.2)
call Tje(u,7896,.2)
call Tje(u,lx,.2)
call Tje(u,6210,.2)
set wb[i]=false
set Wb[i]=0
set BWe[(i)*(20)+1]=0
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=2
set Bpe[(3)*(6)+i]=0
set Bye[(i)*(4)+1]='A0Q0'
set Bye[(i)*(4)+2]='A0Q2'
set Bye[(i)*(4)+3]='A0Q7'
call Tje(u,6951,.4)
call Tje(u,fx,.6)
set Yb[i]="war3mapImported\\NMC_phatamaura.mdx"
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_ngami.blp")
set Tb="war3mapImported\\IconTGA_ngami.tga"
set Bwe[(i)*(20)+1]='A07S'
set Bwe[(i)*(20)+2]='A07T'
set Bwe[(i)*(20)+3]='A07U'
set Bwe[(i)*(20)+4]='A07X'
set Bwe[(i)*(20)+5]='A07Z'
set Bwe[(i)*(20)+6]='A080'
set Bwe[(i)*(20)+7]='A081'
set Bwe[(i)*(20)+8]='A082'
set Bwe[(i)*(20)+9]='A083'
set Bwe[(i)*(20)+$A]='A086'
set Bwe[(i)*(20)+$B]='A0SY'
call Ccx(u,i-1,Bwe[(i)*(20)+1],'d',$3E8,20,0,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],9,60,'d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],20,$A,0,0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],20,4,0,0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],'d',$F,0,0,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],20,20,0,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],$C8,$7D0,20,0,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],$FA,$9C4,30,30,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0WX'))>0)then
set qb[i]=$D
set Qb[i]=6
set sb[i]="Cái Bang"
set Sb[i]=4
set ub[i]=1
call SaveBoolean(UH,id,ge,false)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,1.45,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Bổng Cái)")
endif
call TJe(u,4346,55)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,4888,60)
call Tje(u,ax,.2)
set wb[i]=false
set Wb[i]=0
set BWe[(i)*(20)+1]=2
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=0
set Bpe[(3)*(6)+i]='A008'
set Bye[(i)*(4)+1]='A0PX'
set Bye[(i)*(4)+2]='A0PY'
set Bye[(i)*(4)+3]='A0PZ'
call Tje(u,6951,.7)
call Tje(u,fx,.3)
set Yb[i]="war3mapImported\\CBC_hoatbatluuthu.mdx"
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_caibang.blp")
set Tb="war3mapImported\\IconTGA_caibang.tga"
set Bwe[(i)*(20)+1]='A08R'
set Bwe[(i)*(20)+2]='A08S'
set Bwe[(i)*(20)+3]='A08T'
set Bwe[(i)*(20)+4]='A08C'
set Bwe[(i)*(20)+5]='A08U'
set Bwe[(i)*(20)+6]='A08Q'
set Bwe[(i)*(20)+7]='A08X'
set Bwe[(i)*(20)+8]='A08Y'
set Bwe[(i)*(20)+9]='A08Z'
set Bwe[(i)*(20)+$A]='A092'
set Bwe[(i)*(20)+$B]='A0SZ'
call Ccx(u,i-1,Bwe[(i)*(20)+1],'d',$3E8,$A,1,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],9,$C8,'d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],$C8,'d',$C,0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],4,$F,0,0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],40,40,20,0,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],25,'d',1,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],$C8,$5DC,$A,0,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],20,$A,$F,0,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0WY'))>0)then
set qb[i]=$E
set Qb[i]=5
set sb[i]="Cái Bang"
set Sb[i]=4
set zb[i]=1
set ub[i]=1
call SaveBoolean(UH,id,ge,true)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,1.45,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Chưởng Cái)")
endif
call TJe(u,4346,55)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,4888,60)
call Tje(u,ax,.2)
set wb[i]=false
set Wb[i]=-5
set BWe[(i)*(20)+1]=0
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=2
set Bpe[(3)*(6)+i]=0
set Bye[(i)*(4)+1]='A0Q1'
set Bye[(i)*(4)+2]='A0Q3'
set Bye[(i)*(4)+3]='A0QB'
call Tje(u,6951,.3)
call Tje(u,fx,.7)
set Yb[i]="war3mapImported\\CBC_hoatbatluuthu.mdx"
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_caibang.blp")
set Tb="war3mapImported\\IconTGA_caibang.tga"
set Bwe[(i)*(20)+1]='A08A'
set Bwe[(i)*(20)+2]='A08O'
set Bwe[(i)*(20)+3]='A08P'
set Bwe[(i)*(20)+4]='A08C'
set Bwe[(i)*(20)+5]='A08F'
set Bwe[(i)*(20)+6]='A08Q'
set Bwe[(i)*(20)+7]='A08B'
set Bwe[(i)*(20)+8]='A08I'
set Bwe[(i)*(20)+9]='A08J'
set Bwe[(i)*(20)+$A]='A08K'
set Bwe[(i)*(20)+$B]='A0T0'
call Ccx(u,i-1,Bwe[(i)*(20)+1],70,$3E8,$A,1,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],9,60,'d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],'d',0,0,0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],4,$F,0,0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],20,$A,9,0,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],25,'d',1,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],$96,$578,20,0,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],$A,16,0,0,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0WZ'))>0)then
set qb[i]=$F
set Qb[i]=2
set sb[i]="Thiên Nhẫn"
set Sb[i]=4
set ub[i]=1
call SaveBoolean(UH,id,ge,true)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,1.45,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Ma Nhẫn)")
endif
call TJe(u,4346,55)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,4888,60)
call Tje(u,ax,.2)
set wb[i]=false
set Wb[i]=0
set BWe[(i)*(20)+1]=0
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=2
set Bpe[(3)*(6)+i]='A00B'
set Bye[(i)*(4)+1]='A0PM'
set Bye[(i)*(4)+2]='A0PS'
set Bye[(i)*(4)+3]='A0PT'
call Tje(u,6951,.3)
call Tje(u,fx,.7)
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_minhgiao.blp")
set Tb="war3mapImported\\IconTGA_thiennhan.tga"
set Bwe[(i)*(20)+1]='A093'
set Bwe[(i)*(20)+2]='A094'
set Bwe[(i)*(20)+3]='A095'
set Bwe[(i)*(20)+4]='A096'
set Bwe[(i)*(20)+5]='A097'
set Bwe[(i)*(20)+6]='A098'
set Bwe[(i)*(20)+7]='A09B'
set Bwe[(i)*(20)+8]='A09C'
set Bwe[(i)*(20)+9]='A09D'
set Bwe[(i)*(20)+$A]='A09H'
set Bwe[(i)*(20)+$B]='A0T2'
call Ccx(u,i-1,Bwe[(i)*(20)+1],'d',$5DC,20,0,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],9,60,'d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],'d','d',20,0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],$96,$BB8,20,1,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],300,40,0,0,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],20,0,0,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],$C8,$BB8,20,$7D0,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],30,$F,$F,0,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0X0'))>0)then
set qb[i]=16
set Qb[i]=3
set sb[i]="Thiên Nhẫn"
set Sb[i]=4
set ub[i]=1
call SaveBoolean(UH,id,ge,false)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,1.45,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Chiến Nhẫn)")
endif
call TJe(u,4346,55)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,4888,60)
call Tje(u,ax,.2)
set wb[i]=true
set Wb[i]=0
set BWe[(i)*(20)+1]=2
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=0
set Bpe[(3)*(6)+i]='A00A'
set Bye[(i)*(4)+1]='A0Q8'
set Bye[(i)*(4)+2]='A0Q9'
set Bye[(i)*(4)+3]='A0QA'
call Tje(u,6951,.7)
call Tje(u,fx,.3)
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_minhgiao.blp")
set Tb="war3mapImported\\IconTGA_thiennhan.tga"
set Bwe[(i)*(20)+1]='A09K'
set Bwe[(i)*(20)+2]='A09L'
set Bwe[(i)*(20)+3]='A095'
set Bwe[(i)*(20)+4]='A09M'
set Bwe[(i)*(20)+5]='A09N'
set Bwe[(i)*(20)+6]='A09R'
set Bwe[(i)*(20)+7]='A09U'
set Bwe[(i)*(20)+8]='A09V'
set Bwe[(i)*(20)+9]='A09W'
set Bwe[(i)*(20)+$A]='A09X'
set Bwe[(i)*(20)+$B]='A0T1'
call Ccx(u,i-1,Bwe[(i)*(20)+1],$96,$5DC,$F,0,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],9,'d','d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],'d','d',20,0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],300,$BB8,20,0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],'d',$C8,'d',0,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],6,'d',$F,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],600,6000,20,3,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],500,5000,30,0,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0X1'))>0)then
set qb[i]=17
set Qb[i]=1
set sb[i]="Võ Đang"
set Sb[i]=5
set ub[i]=1
call SaveBoolean(UH,id,ge,false)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,1.45,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Kiếm Võ)")
endif
call TJe(u,4346,55)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,5762,60)
call Tje(u,6780,$C8)
set wb[i]=false
set Wb[i]=0
set BWe[(i)*(20)+1]=1
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=1
set Bpe[(3)*(6)+i]='A0A1'
set Bye[(i)*(4)+1]='A0PJ'
set Bye[(i)*(4)+2]='A0PK'
set Bye[(i)*(4)+3]='A0Z7'
call Tje(u,6951,.5)
call Tje(u,fx,.5)
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_vodang.blp")
set Tb="war3mapImported\\IconTGA_vodang.tga"
set Bwe[(i)*(20)+1]='A0A0'
set Bwe[(i)*(20)+2]='A0A2'
set Bwe[(i)*(20)+3]='A0A3'
set Bwe[(i)*(20)+4]='A0A6'
set Bwe[(i)*(20)+5]='A0A9'
set Bwe[(i)*(20)+6]='A0A7'
set Bwe[(i)*(20)+7]='A0AA'
set Bwe[(i)*(20)+8]='A0AB'
set Bwe[(i)*(20)+9]='A0AC'
set Bwe[(i)*(20)+$A]='A0AF'
set Bwe[(i)*(20)+$B]='A0T3'
call Ccx(u,i-1,Bwe[(i)*(20)+1],'d',700,$A,0,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],9,$C8,'d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],20,20,0,0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],5,20,30,0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],$C8,$7D0,40,0,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],'d',3,$C8,$A,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],$C8,$5DC,$F,0,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],300,$BB8,$F,0,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0X2'))>0)then
set qb[i]=18
set Qb[i]=1
set sb[i]="Võ Đang"
set Sb[i]=5
set zb[i]=1
set ub[i]=1
call SaveBoolean(UH,id,ge,true)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,1.45,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Khí Võ)")
endif
call TJe(u,4346,55)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,5762,60)
call Tje(u,6780,$C8)
set wb[i]=false
set Wb[i]=-20
set BWe[(i)*(20)+1]=0
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=2
set Bpe[(3)*(6)+i]='A006'
set Bye[(i)*(4)+1]='A0PD'
set Bye[(i)*(4)+2]='A0PE'
set Bye[(i)*(4)+3]='A0PF'
call Tje(u,6951,.3)
call Tje(u,fx,.7)
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_vodang.blp")
set Tb="war3mapImported\\IconTGA_vodang.tga"
set Bwe[(i)*(20)+1]='A0AI'
set Bwe[(i)*(20)+2]='A0AJ'
set Bwe[(i)*(20)+3]='A0A3'
set Bwe[(i)*(20)+4]='A0A6'
set Bwe[(i)*(20)+5]='A0AK'
set Bwe[(i)*(20)+6]='A0AN'
set Bwe[(i)*(20)+7]='A0AO'
set Bwe[(i)*(20)+8]='A0AP'
set Bwe[(i)*(20)+9]='A0AS'
set Bwe[(i)*(20)+$A]='A0AT'
set Bwe[(i)*(20)+$B]='A0T4'
call Ccx(u,i-1,Bwe[(i)*(20)+1],'d',$3E8,20,0,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],9,60,'d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],20,20,0,0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],5,20,30,0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],$C8,90,0,0,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],$F,$C8,20,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],$C8,$7D0,$F,0,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],400,$FA0,30,0,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0X3'))>0)then
set qb[i]=19
set Qb[i]=2
set sb[i]="Côn Lôn"
set Sb[i]=5
set ub[i]=1
call SaveBoolean(UH,id,ge,false)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,1.45,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Đao Côn)")
endif
call TJe(u,4346,55)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,5762,60)
call Tje(u,6780,$C8)
set wb[i]=false
set Wb[i]=0
set BWe[(i)*(20)+1]=2
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=0
set Bpe[(3)*(6)+i]='A009'
set Bye[(i)*(4)+1]='A0PP'
set Bye[(i)*(4)+2]='A0PQ'
set Bye[(i)*(4)+3]='A0PR'
call Tje(u,6951,.7)
call Tje(u,fx,.3)
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_conlon.blp")
set Tb="war3mapImported\\IconTGA_conlon.tga"
set Bwe[(i)*(20)+1]='A0AW'
set Bwe[(i)*(20)+2]='A0AX'
set Bwe[(i)*(20)+3]='A0AY'
set Bwe[(i)*(20)+4]='A0B1'
set Bwe[(i)*(20)+5]='A0B4'
set Bwe[(i)*(20)+6]='A0B8'
set Bwe[(i)*(20)+7]='A0B7'
set Bwe[(i)*(20)+8]='A0B9'
set Bwe[(i)*(20)+9]='A0BA'
set Bwe[(i)*(20)+$A]='A0BE'
set Bwe[(i)*(20)+$B]='A0T5'
call Ccx(u,i-1,Bwe[(i)*(20)+1],'d',$3E8,20,0,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],9,$C8,'d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],4,20,0,0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],20,'d',0,0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],$C8,$C8,0,0,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],20,$F,9,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],300,$9C4,$F,0,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],300,$BB8,20,40,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0X4'))>0)then
set qb[i]=20
set Qb[i]=1
set sb[i]="Côn Lôn"
set Sb[i]=5
set ub[i]=1
call SaveBoolean(UH,id,ge,true)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,1.45,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Kiếm Côn)")
endif
call TJe(u,4346,55)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,5762,60)
call Tje(u,6780,$C8)
set wb[i]=false
set Wb[i]=0
set BWe[(i)*(20)+1]=0
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=2
set Bpe[(3)*(6)+i]='A00D'
set Bye[(i)*(4)+1]='A0PD'
set Bye[(i)*(4)+2]='A0PE'
set Bye[(i)*(4)+3]='A0PF'
call Tje(u,6951,.3)
call Tje(u,fx,.7)
set Yb[i]="war3mapImported\\CLK_daocot.mdx"
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_conlon.blp")
set Tb="war3mapImported\\IconTGA_conlon.tga"
set Bwe[(i)*(20)+1]='A0BF'
set Bwe[(i)*(20)+2]='A0BG'
set Bwe[(i)*(20)+3]='A0AY'
set Bwe[(i)*(20)+4]='A0BH'
set Bwe[(i)*(20)+5]='A0BI'
set Bwe[(i)*(20)+6]='A0BL'
set Bwe[(i)*(20)+7]='A0BM'
set Bwe[(i)*(20)+8]='A0BN'
set Bwe[(i)*(20)+9]='A0BQ'
set Bwe[(i)*(20)+$A]='A0BU'
set Bwe[(i)*(20)+$B]='A0T6'
call Ccx(u,i-1,Bwe[(i)*(20)+1],$C8,$7D0,20,0,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],9,60,'d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],4,20,0,0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],$C8,$9C4,$F,0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],'d',0,0,0,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],24,$F,$A,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],600,9000,30,0,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],$D,0,0,0,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0X5'))>0)then
set qb[i]=21
set Qb[i]=1
set sb[i]="Đoàn Thị"
set Sb[i]=3
set ub[i]=2
call SaveBoolean(UH,id,ge,true)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,1.45,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Khí Đoàn)")
endif
call TJe(u,4346,55)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,jx,.2)
call Tje(u,6282,.2)
call Tje(u,7255,.2)
call Tje(u,Jx,.2)
call Tje(u,572,.2)
call Tje(u,7896,.2)
call Tje(u,lx,.2)
call Tje(u,6210,.2)
set wb[i]=false
set Wb[i]=0
set BWe[(i)*(20)+1]=0
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=2
set zb[i]=1
set Bpe[(3)*(6)+i]='A0TA'
set Bye[(i)*(4)+1]='A0PG'
set Bye[(i)*(4)+2]='A0PH'
set Bye[(i)*(4)+3]='A0PI'
call Tje(u,6951,.3)
call Tje(u,fx,.7)
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_hoason.blp")
set Tb="war3mapImported\\IconTGA_doanthi-nu.tga"
set Bwe[(i)*(20)+1]='A0R2'
set Bwe[(i)*(20)+2]='A0R3'
set Bwe[(i)*(20)+3]='A0R4'
set Bwe[(i)*(20)+4]='A0R7'
set Bwe[(i)*(20)+5]='A0R8'
set Bwe[(i)*(20)+6]='A0RA'
set Bwe[(i)*(20)+7]='A0RC'
set Bwe[(i)*(20)+8]='A0RD'
set Bwe[(i)*(20)+9]='A0RE'
set Bwe[(i)*(20)+$A]='A0RF'
set Bwe[(i)*(20)+$B]='A0T7'
call Ccx(u,i-1,Bwe[(i)*(20)+1],'d',$3E8,20,1,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],9,60,'d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],4,'d',0,0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],$E,$F,0,0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],$C8,$BB8,0,0,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],$C8,20,0,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],'x',$4B0,$A,0,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],300,$BB8,20,0,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0X6'))>0)then
set qb[i]=22
set Qb[i]=5
set sb[i]="Đoàn Thị"
set Sb[i]=3
set ub[i]=1
call SaveBoolean(UH,id,ge,false)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,.5,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Chỉ Đoàn)")
endif
call TJe(u,4346,$96)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,jx,.2)
call Tje(u,6282,.2)
call Tje(u,7255,.2)
call Tje(u,Jx,.2)
call Tje(u,572,.2)
call Tje(u,7896,.2)
call Tje(u,lx,.2)
call Tje(u,6210,.2)
set wb[i]=false
set Wb[i]=20
set BWe[(i)*(20)+1]=2
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=0
set zb[i]=1
set Bpe[(3)*(6)+i]=0
set Bye[(i)*(4)+1]='A0UX'
set Bye[(i)*(4)+2]='A0UY'
set Bye[(i)*(4)+3]='A0UZ'
call Tje(u,6951,.7)
call Tje(u,fx,.3)
set Yb[i]="Abilities\\Spells\\Other\\Drain\\ManaDrainCaster.mdl"
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_hoason.blp")
set Tb="war3mapImported\\IconTGA_doanthi-nam.tga"
set Bwe[(i)*(20)+1]='A0RI'
set Bwe[(i)*(20)+2]='A0RJ'
set Bwe[(i)*(20)+3]='A0RK'
set Bwe[(i)*(20)+4]='A0RL'
set Bwe[(i)*(20)+5]='A0RO'
set Bwe[(i)*(20)+6]='A0RQ'
set Bwe[(i)*(20)+7]='A0RU'
set Bwe[(i)*(20)+8]='A0RV'
set Bwe[(i)*(20)+9]='A0RW'
set Bwe[(i)*(20)+$A]='A0RZ'
set Bwe[(i)*(20)+$B]='A0T8'
call Ccx(u,i-1,Bwe[(i)*(20)+1],'d',$3E8,$F,0,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],80,$C8,'d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],$C8,$BB8,50,0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],20,55,0,0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],20,55,0,0,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],33,0,0,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],$FA,$7D0,$F,0,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],300,$BB8,40,0,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0X7'))>0)then
set qb[i]=23
set Qb[i]=9
set sb[i]="Bá Đao"
set Sb[i]=1
set ub[i]=1
call SaveBoolean(UH,id,ge,true)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,1.45,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Thiên La)")
endif
call TJe(u,4346,55)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,7614,60)
call Tje(u,Vx,.25)
set wb[i]=true
set Wb[i]=$A
set BWe[(i)*(20)+1]=0
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=2
set Bpe[(3)*(6)+i]='A0S0'
set Bye[(i)*(4)+1]='A0V0'
set Bye[(i)*(4)+2]='A0V1'
set Bye[(i)*(4)+3]='A0V2'
call Tje(u,6951,.7)
call Tje(u,fx,.3)
set Yb[i]="war3mapImported\\TLBD_buff2.mdl"
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_badao.blp")
set Tb="war3mapImported\\IconTGA_badao.tga"
set Bwe[(i)*(20)+1]='A0S1'
set Bwe[(i)*(20)+2]='A0S2'
set Bwe[(i)*(20)+3]='A0S3'
set Bwe[(i)*(20)+4]='A0S6'
set Bwe[(i)*(20)+5]='A0S8'
set Bwe[(i)*(20)+6]='A0SB'
set Bwe[(i)*(20)+7]='A0SC'
set Bwe[(i)*(20)+8]='A0SD'
set Bwe[(i)*(20)+9]='A0SE'
set Bwe[(i)*(20)+$A]='A0SF'
set Bwe[(i)*(20)+$B]='A0T9'
call Ccx(u,i-1,Bwe[(i)*(20)+1],'d',$3E8,20,0,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],9,$C8,'d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],300,$BB8,30,$96,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],6,0,0,0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],800,0,0,0,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],20,20,20,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],$96,$7D0,$5DC,$F,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],300,$BB8,40,0,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0X8'))>0)then
set qb[i]=24
set Qb[i]=9
set sb[i]="Bá Đao"
set Sb[i]=1
set ub[i]=1
call SaveBoolean(UH,id,ge,false)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,1.45,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Tử Dương)")
endif
call TJe(u,4346,55)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,7614,60)
call Tje(u,Vx,.25)
set wb[i]=false
set Wb[i]=$A
set BWe[(i)*(20)+1]=2
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=0
set Bpe[(3)*(6)+i]='A0W5'
set Bye[(i)*(4)+1]='A0V0'
set Bye[(i)*(4)+2]='A0V1'
set Bye[(i)*(4)+3]='A0V2'
call Tje(u,6951,.7)
call Tje(u,fx,.3)
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_badao.blp")
set Tb="war3mapImported\\IconTGA_badao.tga"
set Bwe[(i)*(20)+1]='A0W6'
set Bwe[(i)*(20)+2]='A0W7'
set Bwe[(i)*(20)+3]='A0W8'
set Bwe[(i)*(20)+4]='A0WB'
set Bwe[(i)*(20)+5]='A0WC'
set Bwe[(i)*(20)+6]='A0WD'
set Bwe[(i)*(20)+7]='A0WG'
set Bwe[(i)*(20)+8]='A0WH'
set Bwe[(i)*(20)+9]='A0WI'
set Bwe[(i)*(20)+$A]='A0WJ'
set Bwe[(i)*(20)+$B]='A0WK'
call Ccx(u,i-1,Bwe[(i)*(20)+1],'d',$3E8,20,0,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],9,$C8,'d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],300,$BB8,40,30,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],6,0,0,0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],$A,60,'d',20,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],$E,0,0,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],$C8,$7D0,20,0,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],400,$FA0,30,0,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0X9'))>0)then
set qb[i]=25
set Qb[i]=1
set sb[i]="Minh Giáo"
set zb[i]=1
set Wb[i]=20
set Sb[i]=2
set ub[i]=2
call SaveBoolean(UH,id,ge,true)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,1.45,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Kiếm Minh)")
endif
call TJe(u,4346,55)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,5319,.2)
call Tje(u,vx,.2)
set wb[i]=false
set Wb[i]=0
set BWe[(i)*(20)+1]=0
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=2
set Bpe[(3)*(6)+i]='A0V8'
set Bye[(i)*(4)+1]='A0PD'
set Bye[(i)*(4)+2]='A0PE'
set Bye[(i)*(4)+3]='A0Z2'
call Tje(u,6951,.3)
call Tje(u,fx,.7)
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_minhgiao2.blp")
set Tb="war3mapImported\\IconTGA_minhgiao-nu.tga"
set Bwe[(i)*(20)+1]='A0V9'
set Bwe[(i)*(20)+2]='A0VA'
set Bwe[(i)*(20)+3]='A0VB'
set Bwe[(i)*(20)+4]='A0VC'
set Bwe[(i)*(20)+5]='A0VD'
set Bwe[(i)*(20)+6]='A0VE'
set Bwe[(i)*(20)+7]='A0VF'
set Bwe[(i)*(20)+8]='A0VG'
set Bwe[(i)*(20)+9]='A0VJ'
set Bwe[(i)*(20)+$A]='A0VK'
set Bwe[(i)*(20)+$B]='A0VM'
call Ccx(u,i-1,Bwe[(i)*(20)+1],'d',$3E8,0,0,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],'d',$F,0,0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],5,5,0,0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],$C8,$7D0,$F,0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],$A,40,0,0,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],20,$F,0,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],300,$9C4,20,0,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],8,0,0,0,0,$8C,8)
endif
if(GetUnitAbilityLevel((u),('A0XA'))>0)then
set qb[i]=26
set Qb[i]=4
set sb[i]="Minh Giáo"
set Sb[i]=2
set ub[i]=1
call SaveBoolean(UH,id,ge,false)
if kJ[i]>0 and KJ[i]==0 then
call BlzSetUnitAttackCooldown(u,1.45,0)
call UnitAddAbility(u,Vj[Sb[i]])
call BlzSetUnitName(u,GetUnitName(u)+" (Chùy Minh)")
endif
call TJe(u,4346,55)
call TJe(u,5363,$F0)
call TJe(u,5781,$F0)
call Tje(u,5319,.2)
call Tje(u,vx,.2)
set wb[i]=true
set Wb[i]=0
set BWe[(i)*(20)+1]=2
set BWe[(i)*(20)+2]=1
set BWe[(i)*(20)+3]=0
set Bpe[(3)*(6)+i]='A001'
set Bye[(i)*(4)+1]='A0PU'
set Bye[(i)*(4)+2]='A0PV'
set Bye[(i)*(4)+3]='A0PW'
call Tje(u,6951,.7)
call Tje(u,fx,.3)
set Yb[i]="war3mapImported\\MGC_kimquathietma.mdx"
call MultiboardSetItemStyleBJ(mC,1,i+1,Yv,yv)
call MultiboardSetItemIconBJ(mC,1,i+1,"war3mapImported\\BTNclassicon_minhgiao2.blp")
set Tb="war3mapImported\\IconTGA_minhgiao.tga"
set Bwe[(i)*(20)+1]='A0VN'
set Bwe[(i)*(20)+2]='A0VO'
set Bwe[(i)*(20)+3]='A0VP'
set Bwe[(i)*(20)+4]='A0VQ'
set Bwe[(i)*(20)+5]='A0VR'
set Bwe[(i)*(20)+6]='A0VU'
set Bwe[(i)*(20)+7]='A0VV'
set Bwe[(i)*(20)+8]='A0VW'
set Bwe[(i)*(20)+9]='A0VZ'
set Bwe[(i)*(20)+$A]='A0W3'
set Bwe[(i)*(20)+$B]='A0W4'
call Ccx(u,i-1,Bwe[(i)*(20)+1],'d',$3E8,$F,0,0,1,1)
call Ccx(u,i-1,Bwe[(i)*(20)+2],9,$C8,'d',0,0,20,2)
call Ccx(u,i-1,Bwe[(i)*(20)+3],$C8,$7D0,30,0,0,40,3)
call Ccx(u,i-1,Bwe[(i)*(20)+4],300,$9C4,50,0,0,60,4)
call Ccx(u,i-1,Bwe[(i)*(20)+5],'d',20,20,0,0,80,5)
call Ccx(u,i-1,Bwe[(i)*(20)+6],'d',$F,0,0,0,'d',6)
call Ccx(u,i-1,Bwe[(i)*(20)+7],400,$7D0,20,0,0,'x',7)
call Ccx(u,i-1,Bwe[(i)*(20)+8],$A,20,0,0,0,$8C,8)
endif
set u=null
set p=null
endfunction
function gBx takes unit u returns nothing
local player p=GetOwningPlayer(u)
if GetLocalPlayer()==p then
call Uge(B3e[23],Tb)
endif
set p=null
endfunction
function gcx takes player p,unit u,boolean b returns nothing
local integer id=GetHandleId(u)
local integer i=GetPlayerId(p)+1
call UnitAddAbility(u,'A003')
set OJ[i]=CreateUnit(p,'H00K',GetRectCenterX(RJ[i]),GetRectCenterY(RJ[i]),270)
call BlzSetHeroProperName(u,GetPlayerName(p))
call tKe(u,'A0QR')
set mJ[i]=GetRectCenterX(uC)
set MJ[i]=GetRectCenterY(uC)
call MultiboardSetItemValueBJ(mC,3,(i+1),"1 ("+I2S(bJ[i]+bEe[i])+")")
set rk[i]=1
call UnitAddAbility(u,'A0YT')
set BJ[i]=1
set bxe[i]=1
set boe[i]=3
set bre[i]=2
call Tje(u,5267,'d')
call SaveReal(UH,id,705,$C8)
call T8e(u,$A,true)
call T9e(u,$A,true)
call uve(u,$A,true)
if b then
call tde(i,7,1)
endif
call SetUnitLifePercentBJ(u,'d')
call SetUnitManaPercentBJ(u,'d')
call gbx(u,p,i)
call gNx(u)
set NA[i]='d'
set Bue[(1)*(20)+i]=GetHeroXP(u)*2+qH
set Bue[(3)*(20)+i]=qH
set Bue[(4)*(20)+i]=qH
set Bue[(5)*(20)+i]=qH
set Bue[(6)*(20)+i]=qH
set Bue[(7)*(20)+i]=qH
set Bue[(8)*(20)+i]=qH
set Bue[(9)*(20)+i]=qH
set cce[(i)*(20)+2]=qH
set cCe[(i)*(20)+2]=qH
set cDe[(i)*(20)+1]=qH
set cDe[(i)*(20)+2]=qH
set cDe[(i)*(20)+3]=qH
set cDe[(i)*(20)+4]=qH
set cDe[(i)*(20)+5]=qH
set cDe[(i)*(20)+6]=qH
set cDe[(i)*(20)+7]=qH
set cDe[(i)*(20)+8]=qH
set cDe[(i)*(20)+9]=qH
set cDe[(i)*(20)+$A]=qH
set cge[i]=qH
set Hi[i]=AddSpecialEffect("war3mapImported\\dummy.mdx",GetUnitX(XJ[i]),GetUnitY(XJ[i]))
set Zb[i]=AddSpecialEffect("war3mapImported\\dummy.mdx",GetUnitX(XJ[i]),GetUnitY(XJ[i]))
call gIx(XJ[i],i)
set BSe[(i-1)*(16)+9]=9
set Bte[(i-1)*(16)+9]="Kỹ Năng |cffffcc00[ Mật Tịch Trung Cấp ]|r"
set BTe[(i-1)*(16)+9]="
|cff7fff00Yêu cầu trùng sinh 2 và đã hoàn thành nhiệm vụ mật tịch trung cấp để kích hoạt|r"
set BSe[(i-1)*(16)+$A]=$A
set Bte[(i-1)*(16)+$A]="Kỹ Năng |cffffcc00[ Mật Tịch Cao Cấp ]|r"
set BTe[(i-1)*(16)+$A]="
|cff7fff00Yêu cầu trùng sinh 3 và đã hoàn thành nhiệm vụ mật tịch cao cấp để kích hoạt|r"
set BSe[(i-1)*(16)+$B]=$B
set Bte[(i-1)*(16)+$B]="Kỹ Năng |cffffcc00[ Mật Tịch Trấn Phái ]|r"
set BTe[(i-1)*(16)+$B]="
|cff7fff00Yêu cầu trùng sinh 5 và đã hoàn thành nhiệm vụ mật tịch trấn phái để kích hoạt|r"
if b then
set bSe[(i-1)*(9)+1]="|cff7fff00"+"Càn"
set bSe[(i-1)*(9)+2]="|cff7fff00"+"Khôn"
set bSe[(i-1)*(9)+3]="|cff7fff00"+"Cấn"
set bSe[(i-1)*(9)+4]="|cff7fff00"+"Chấn"
set bSe[(i-1)*(9)+5]="|cff7fff00"+"Khảm"
set bSe[(i-1)*(9)+6]="|cff7fff00"+"Tốn"
set bSe[(i-1)*(9)+7]="|cff7fff00"+"Ly"
set bSe[(i-1)*(9)+8]="|cff7fff00"+"Đoài"
set bSe[(i-1)*(9)+9]="|cff7fff00"+"Hóa Cảnh"
call wQe(i)
call CWx(XJ[i],i)
call The(i)
call t5e(i)
endif
set B4e[(i-1)*(23)+23]=23
set B7e[(i-1)*(23)+23]=Tb
set B5e[(i-1)*(23)+23]="|cffffcc00"+"Thông Tin Nhân Vật"
call gBx(u)
set p=null
set u=null
endfunction
function gCx takes nothing returns boolean
local integer CGe=Qce()
set Vce[CGe]=Vce[CGe]-1
if Vce[CGe]<=0 then
call QDe()
call ReviveHero(XJ[VBe[CGe]],VCe[CGe],Vde[CGe],Yv)
if GetLocalPlayer()==Vbe[CGe]then
call ClearSelection()
call PanCameraToTimed(VCe[CGe],Vde[CGe],0)
call SelectUnit(XJ[VBe[CGe]],yv)
endif
call Qke(Vbe[CGe],"|cffff0000Hệ Thống:|r bạn đã hồi sinh.",5)
call SetUnitFlyHeight((XJ[VBe[CGe]]),((0)*1.),.0)
call SetUnitLifePercentBJ(XJ[VBe[CGe]],'d')
call SetUnitManaPercentBJ(XJ[VBe[CGe]],'d')
call Qre(AddSpecialEffect("Abilities\\Spells\\Human\\ReviveHuman\\ReviveHuman.mdl",VCe[CGe],Vde[CGe]))
set Vbe[CGe]=null
call D3e(CGe)
endif
return Yv
endfunction
function gdx takes unit u,player p,integer i,boolean b returns nothing
local integer CGe=D2e()
set Vbe[CGe]=p
set Vce[CGe]=R2I(5./ .03125)
set VBe[CGe]=i
set VCe[CGe]=mJ[i]
set Vde[CGe]=MJ[i]
call QIe(CGe,.03125,yv,function gCx)
endfunction
function gDx takes unit u,player p,integer i,boolean b returns nothing
call PauseUnit(u,false)
call gdx(u,p,i,b)
endfunction
function gfx takes player p,integer i returns boolean
if not xB[i]then
set xB[i]=true
call Qke(p,"|cffffcc00"+"Bạn đã chọn chuyển đổi hệ phái hiện tại, môn phái sẽ được chuyển đổi sau khi Save/Load !",5)
else
set xB[i]=false
call Qke(p,"|cffffcc00"+"Hủy bỏ chuyển đổi hệ phái !",5)
endif
return false
endfunction
function gFx takes integer i,integer lv returns string
local integer dv=cde[(i)*(20)+lv]
local string s="|cff7fff00"+I2S(dv)+"|r"+"|cffadd8e6"+" [Cấp "
if dv>=485*K1 then
set s=s+"6/6]|r"
elseif dv>=$E1*K1 then
set s=s+"5/6]|r"
elseif dv>=75*K1 then
set s=s+"4/6]|r"
elseif dv>=25*K1 then
set s=s+"3/6]|r"
elseif dv>=5*K1 then
set s=s+"2/6]|r"
elseif dv>=K1 then
set s=s+"1/6]|r"
else
set s=s+"0/6]|r"
endif
set uv=s
set s=null
return uv
endfunction
function ggx takes integer dv returns integer
if dv==$7A120 then
return $A
elseif dv>=$61A80 then
return 9
elseif dv>=$493E0 then
return 8
elseif dv>=$30D40 then
return 7
elseif dv>=$249F0 then
return 6
elseif dv>=$186A0 then
return 5
elseif dv>=$EA60 then
return 4
elseif dv>=$7530 then
return 3
elseif dv>=$2710 then
return 2
else
return 1
endif
endfunction
function gGx takes integer i returns nothing
local string s="- Môn phái: "+"|cffffcc00"+sb[i]+"|r - Ngũ hành: "+"|cffffcc00"+cie[(0)*(20)+Sb[i]]+"|r"
set s=s+"
- Vũ khí sử dụng: "+"|cffadd8e6"+cre[(Qb[i])*(20)+8]+"|r"
set s=s+"
- Xưng hiệu: "+"|cffadd8e6"+eJ[ggx(dJ[i])]+"|r"
set s=s+"
- Công trạng: "+"|cff7fff00"+I2S(hJ[i])+"|r"
set s=s+"
- Danh Bổ Lệnh: "+"|cff7fff00"+I2S(kA[i]/ 2)+"|r - Tẩy Tủy Kinh: "+"|cff7fff00"+I2S(JA[i]/ 2)+"/10|r"
set s=s+"
- Địa đồ thần bí: "+"|cff7fff00"+I2S(FA[i]/ 3)+"|r ["+I2S(5-gA[i])+"/5]"
set s=s+"
- Quái vật tiêu diệt trong trận: "+"|cff7fff00"+I2S(Ok[i]/ 2)+"|r

"
set s=s+"|cffffff00"+"Danh Vọng Trang Bị:|r
"
set s=s+"- Danh vọng - nón   : "+gFx(i,1)
set s=s+"
- Danh vọng - áo     : "+gFx(i,2)
set s=s+"
- Danh vọng - lưng  : "+gFx(i,3)
set s=s+"
- Danh vọng - tay    : "+gFx(i,4)
set s=s+"
- Danh vọng - giày   : "+gFx(i,5)
set s=s+"
- Danh vọng - liên    : "+gFx(i,6)
set s=s+"
- Danh vọng - nhẫn  : "+gFx(i,7)
set s=s+"
- Danh vọng - bội    : "+gFx(i,8)
set s=s+"
- Danh vọng - phù    : "+gFx(i,9)
set s=s+"
- Danh vọng - vũ khí: "+gFx(i,$A)
set s=s+"|cffffff00"+"

Thuộc Tính khác:|r
"
set s=s+"- Kháng tỉ lệ thọ thương "+"|cffffcc00"+I2S(R2I(TKe(XJ[i],jx)*'d'))+"%|r"
set s=s+"
- Kháng tỉ lệ bất động "+"|cffffcc00"+I2S(R2I(TKe(XJ[i],6282)*'d'))+"%|r"
set s=s+"
- Kháng tỉ lệ làm chậm "+"|cffffcc00"+I2S(R2I(TKe(XJ[i],7255)*'d'))+"%|r"
set s=s+"
- Kháng tỉ lệ bỏng "+"|cffffcc00"+I2S(R2I(TKe(XJ[i],Jx)*'d'))+"%|r"
set s=s+"
- Kháng tỉ lệ choáng "+"|cffffcc00"+I2S(R2I(TKe(XJ[i],kx)*'d'))+"%|r"
set s=s+"
- Kháng thời gian thọ thương "+"|cffffcc00"+I2S(R2I(TKe(XJ[i],572)*'d'))+"%|r"
set s=s+"
- Kháng thời gian bất động "+"|cffffcc00"+I2S(R2I(TKe(XJ[i],7896)*'d'))+"%|r"
set s=s+"
- Kháng thời gian làm chậm "+"|cffffcc00"+I2S(R2I(TKe(XJ[i],lx)*'d'))+"%|r"
set s=s+"
- Kháng thời gian bỏng "+"|cffffcc00"+I2S(R2I(TKe(XJ[i],6210)*'d'))+"%|r"
set s=s+"
- Kháng thời gian choáng "+"|cffffcc00"+I2S(R2I(TKe(XJ[i],6491)*'d'))+"%|r"
set s=s+"
- Độc sát tăng thêm "+"|cffffcc00"+I2S(R2I(TKe(XJ[i],Cx)*'d'))+"%|r"
set s=s+"
- Sát thương phản đòn "+"|cffffcc00"+I2S(R2I(TKe(XJ[i],4487)*'d'))+"|r"
set s=s+"
- Kháng phản đòn "+"|cffffcc00"+I2S(R2I(TKe(XJ[i],894)*'d'))+"%|r"
set B6e[(i-1)*(23)+23]="
"+s
set s=null
endfunction
function ghx takes nothing returns nothing
loop
call ExecuteFunc("ghx")
endloop
endfunction
function gHx takes integer x,integer y returns boolean
if x<=$4B0*K1 then
if y<=$4B0*K1 then
return true
elseif y>$4B0*K1 and y<=$708*K1 then
if x>=900*K1 then
return true
endif
endif
endif
if x>$4B0*K1 then
if y>$4B0*K1 then
return true
elseif y>=900*K1 and y<=$4B0*K1 then
if x<=$708*K1 then
return true
endif
endif
endif
return false
endfunction
function gjx takes integer i returns nothing
local integer c=1
set iB[i]=cJ[i]
loop
exitwhen c>6
if i!=c and XJ[c]!=null then
if bJ[i]-bJ[c]>4 then
call ghx()
endif
if bJ[c]-bJ[i]>4 then
call ghx()
endif
if not gHx(iB[i],iB[c])then
call ghx()
endif
endif
set c=c+1
endloop
endfunction
function gJx takes unit u,player p,rect r returns nothing
local real x=GetRectCenterX(r)
local real y=GetRectCenterY(r)
call SetUnitX(u,x)
call SetUnitY(u,y)
call IssueImmediateOrderById(u,$D0004)
if p==GetLocalPlayer()then
call ClearSelection()
call PanCameraToTimed(x,y,0)
call SelectUnit(u,true)
endif
endfunction
function gkx takes unit u,player p,real x,real y returns nothing
call SetUnitX(u,x)
call SetUnitY(u,y)
call IssueImmediateOrderById(u,$D0004)
if p==GetLocalPlayer()then
call ClearSelection()
call PanCameraToTimed(x,y,0)
call SelectUnit(u,true)
endif
endfunction
function gKx takes unit u,rect r returns nothing
local player p=GetOwningPlayer(u)
local real x=GetRectCenterX(r)
local real y=GetRectCenterY(r)
call SetUnitX(u,x)
call SetUnitY(u,y)
call IssueImmediateOrderById(u,$D0004)
if p==GetLocalPlayer()then
call ClearSelection()
call PanCameraToTimed(x,y,0)
call SelectUnit(u,true)
endif
set p=null
endfunction
function glx takes unit u,player p,integer i,integer w5e returns nothing
if w5e=='I06Q' then
if rk[i]>=$A and tHe(i,'d',0)then
call tHe(i,'d',De)
call gJx(u,p,Fd)
call Qke(p,"|cff7fff00"+"--- Tây Tháp Lâm ---",3)
else
call Qke(p,"|cffffcc00"+"Bạn không đủ bạc hoặc cấp độ yêu cầu !",5)
endif
elseif w5e=='I06R' then
if rk[i]>=30 and tHe(i,$C8,0)then
call tHe(i,$C8,De)
call gJx(u,p,gd)
call Qke(p,"|cff7fff00"+"--- Hoài Thủy Sa Châu ---",3)
else
call Qke(p,"|cffffcc00"+"Bạn không đủ bạc hoặc cấp độ yêu cầu !",5)
endif
elseif w5e=='I06S' then
if rk[i]>=50 and tHe(i,300,0)then
call tHe(i,300,De)
call gJx(u,p,Gd)
call Qke(p,"|cff7fff00"+"--- Phong Lăng Độ ---",3)
else
call Qke(p,"|cffffcc00"+"Bạn không đủ bạc hoặc cấp độ yêu cầu !",5)
endif
elseif w5e=='I06T' then
if rk[i]>=70 and tHe(i,400,0)then
call tHe(i,400,De)
call gJx(u,p,jd)
call Qke(p,"|cff7fff00"+"--- Hoa Sơn ---",3)
else
call Qke(p,"|cffffcc00"+"Bạn không đủ bạc hoặc cấp độ yêu cầu !",5)
endif
elseif w5e=='I06U' then
if rk[i]>=90 and tHe(i,500,0)then
call tHe(i,500,De)
call gJx(u,p,Jd)
call Qke(p,"|cff7fff00"+"--- Mông Cổ Vương Đỉnh ---",3)
else
call Qke(p,"|cffffcc00"+"Bạn không đủ bạc hoặc cấp độ yêu cầu !",5)
endif
elseif w5e=='I06V' then
if rk[i]>='n' and tHe(i,600,0)then
call tHe(i,600,De)
call gJx(u,p,hd)
call Qke(p,"|cff7fff00"+"--- Trường Bạch Sơn ---",3)
else
call Qke(p,"|cffffcc00"+"Bạn không đủ bạc hoặc cấp độ yêu cầu !",5)
endif
elseif w5e=='I06W' then
if rk[i]>=$82 and tHe(i,700,0)then
call tHe(i,700,De)
call gJx(u,p,Hd)
call Qke(p,"|cff7fff00"+"--- Đôn Hoàng Cổ Thành ---",3)
else
call Qke(p,"|cffffcc00"+"Bạn không đủ bạc hoặc cấp độ yêu cầu !",5)
endif
elseif w5e=='I06X' then
if rk[i]>=$96 and tHe(i,800,0)then
call tHe(i,800,De)
call gJx(u,p,kd)
call Qke(p,"|cff7fff00"+"--- Lối Vào Tần Lăng ---",3)
else
call Qke(p,"|cffffcc00"+"Bạn không đủ bạc hoặc cấp độ yêu cầu !",5)
endif
elseif w5e=='I08L' then
set Sv=Q0e(u,'I08M')
if rk[i]>=$C8 and tHe(i,$3E8,0)and Sv!=null then
call tHe(i,$3E8,De)
call RemoveItem(Sv)
call gJx(u,p,XF)
call Qke(p,"|cff7fff00"+"--- Thần Long Đảo ---",3)
else
call Qke(p,"|cffffcc00"+"Bạn không đủ bạc hoặc cấp độ và vật phẩm yêu cầu !",5)
endif
elseif w5e=='I08N' then
if bJ[i]>=1 and tHe(i,$5DC,0)then
call tHe(i,$5DC,De)
call gJx(u,p,RF)
call Qke(p,"|cff7fff00"+"--- Phong Lăng Thủy Trại ---",3)
else
call Qke(p,"|cffffcc00"+"Bạn không đủ bạc hoặc cấp độ yêu cầu !",5)
endif
elseif w5e=='I071' then
if tHe(i,300,0)then
call tHe(i,300,De)
call gJx(u,p,ld)
call Qke(p,"|cff7fff00"+"--- Phong Lăng Độ - Bắc ---",3)
else
call Qke(p,"|cffffcc00"+"Bạn không đủ bạc hoặc cấp độ yêu cầu !",5)
endif
elseif w5e=='I072' then
if tHe(i,300,0)then
call tHe(i,300,De)
call gJx(u,p,Ld)
call Qke(p,"|cff7fff00"+"--- Phong Lăng Độ - Nam ---",3)
else
call Qke(p,"|cffffcc00"+"Bạn không đủ bạc hoặc cấp độ yêu cầu !",5)
endif
elseif w5e=='I08V' then
call gJx(u,p,kg)
call Qke(p,"|cff7fff00"+"--- Động Thần Bí ---",3)
elseif w5e=='I06Y' then
call gJx(u,p,uC)
call Qke(p,"|cff7fff00"+"--- Ba Lăng Huyện ---",3)
elseif w5e=='I06Z' then
call gJx(u,p,Kd)
call Qke(p,"|cff7fff00"+"--- Dương Châu ---",3)
elseif w5e=='I08Z' then
call gJx(u,p,Ug)
call Qke(p,"|cff7fff00"+"--- Lãnh Địa Bang Hội ---",3)
elseif w5e=='I0HP' then
call gJx(u,p,Oh)
call Qke(p,"|cff7fff00"+"--- Tẩy Tủy Đảo ---",3)
elseif w5e=='I070' then
set mJ[i]=GetUnitX(u)
set MJ[i]=GetUnitY(u)
call gJx(u,p,IJ[i])
call Qke(p,"|cff7fff00"+"--- Thủ Khố ---",3)
elseif w5e=='I076' then
if JB then
set wv=false
if kB==1 and rk[i]>='d' then
set wv=true
elseif kB==2 and bJ[i]>=1 then
set wv=true
elseif kB==3 and bJ[i]>=4 then
set wv=true
endif
if vo[i]then
set wv=false
call Qke(p,"|cffff0000"+"Không thể vào phụ bản khi đang bật PK !",5)
endif
if wv then
call gJx(u,p,Md)
call Qke(p,"|cff7fff00"+"--- Đào Chu Công Mộ ---",3)
else
call Qke(p,"|cffffcc00"+"Phụ bản này rất nguy hiểm, luyện cấp thêm rồi hãy quay lại !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản vẫn chưa được khiêu chiến !",5)
endif
elseif w5e=='I07A' then
if Rc then
set wv=false
if Ic==1 and rk[i]>='d' then
set wv=true
elseif Ic==2 and bJ[i]>=2 then
set wv=true
elseif Ic==3 and bJ[i]>=5 then
set wv=true
endif
if vo[i]then
set wv=false
call Qke(p,"|cffff0000"+"Không thể vào phụ bản khi đang bật PK !",5)
endif
if wv then
call gJx(u,p,Wd)
call Qke(p,"|cff7fff00"+"--- Sát Thủ Đường ---",3)
else
call Qke(p,"|cffffcc00"+"Phụ bản này rất nguy hiểm, luyện cấp thêm rồi hãy quay lại !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản vẫn chưa được khiêu chiến !",5)
endif
elseif w5e=='I07H' then
if Pc then
set wv=false
if qc==1 and bJ[i]>=1 then
set wv=true
elseif qc==2 and bJ[i]>=3 then
set wv=true
elseif qc==3 and bJ[i]>=6 then
set wv=true
endif
if vo[i]then
set wv=false
call Qke(p,"|cffff0000"+"Không thể vào phụ bản khi đang bật PK !",5)
endif
if wv then
call gJx(u,p,ED)
call Qke(p,"|cff7fff00"+"--- Vạn Hoa Cốc ---",3)
if Bhe[(i)*(8)+2]==2 then
call Crx(u,i,2,2)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản này rất nguy hiểm, luyện cấp thêm rồi hãy quay lại !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản vẫn chưa được khiêu chiến !",5)
endif
elseif w5e=='I07L' then
if GC then
set wv=false
if hC==1 and bJ[i]>=1 then
set wv=true
elseif hC==2 and bJ[i]>=4 then
set wv=true
elseif hC==3 and bJ[i]>=7 then
set wv=true
endif
if vo[i]then
set wv=false
call Qke(p,"|cffff0000"+"Không thể vào phụ bản khi đang bật PK !",5)
endif
if wv then
call gJx(u,p,kD)
call Qke(p,"|cff7fff00"+"--- Lâu Lan Tầm Bảo ---",3)
else
call Qke(p,"|cffffcc00"+"Phụ bản này rất nguy hiểm, luyện cấp thêm rồi hãy quay lại !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản vẫn chưa được khiêu chiến !",5)
endif
elseif w5e=='I07P' then
if pB then
set wv=false
if PB==1 and bJ[i]>=2 then
set wv=true
elseif PB==2 and bJ[i]>=4 then
set wv=true
elseif PB==3 and bJ[i]>=6 then
set wv=true
endif
if vo[i]then
set wv=false
call Qke(p,"|cffff0000"+"Không thể vào phụ bản khi đang bật PK !",5)
endif
if wv then
call gJx(u,p,MD)
call Qke(p,"|cff7fff00"+"--- Hoạt Tử Nhân Mộ ---",3)
else
call Qke(p,"|cffffcc00"+"Phụ bản này rất nguy hiểm, luyện cấp thêm rồi hãy quay lại !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản vẫn chưa được khiêu chiến !",5)
endif
elseif w5e=='I07Z' then
if WB then
set wv=false
if yB==1 and bJ[i]>=2 then
set wv=true
elseif yB==2 and bJ[i]>=5 then
set wv=true
elseif yB==3 and bJ[i]>=8 then
set wv=true
endif
if vo[i]then
set wv=false
call Qke(p,"|cffff0000"+"Không thể vào phụ bản khi đang bật PK !",5)
endif
if wv then
call gJx(u,p,PD)
call Qke(p,"|cff7fff00"+"--- Long Môn Phi Kiếm ---",3)
else
call Qke(p,"|cffffcc00"+"Phụ bản này rất nguy hiểm, luyện cấp thêm rồi hãy quay lại !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản vẫn chưa được khiêu chiến !",5)
endif
elseif w5e=='I083' then
if AB then
set wv=false
if NB==1 and bJ[i]>=3 then
set wv=true
elseif NB==2 and bJ[i]>=6 then
set wv=true
elseif NB==3 and bJ[i]>=8 then
set wv=true
endif
if vo[i]then
set wv=false
call Qke(p,"|cffff0000"+"Không thể vào phụ bản khi đang bật PK !",5)
endif
if wv then
call gJx(u,p,df)
call Qke(p,"|cff7fff00"+"--- Bích Lạc Cốc ---",3)
else
call Qke(p,"|cffffcc00"+"Phụ bản này rất nguy hiểm, luyện cấp thêm rồi hãy quay lại !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản vẫn chưa được khiêu chiến !",5)
endif
elseif w5e=='I0C0' then
if jr and not vo[i]then
if bJ[i]>=1 then
if Jr then
call gJx(u,p,OG)
call Qke(p,"|cff7fff00"+"--- Bạch Hổ Đường ---",3)
else
call Qke(p,"|cffffcc00"+"Thời gian báo danh đã kết thúc !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản này rất nguy hiểm, luyện cấp thêm rồi hãy quay lại !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản vẫn chưa được khiêu chiến !",5)
endif
elseif w5e=='I08C' then
if FB then
set wv=false
if gB==1 and bJ[i]>=4 then
set wv=true
elseif gB==2 and bJ[i]>=7 then
set wv=true
elseif gB==3 and bJ[i]>=9 then
set wv=true
endif
if vo[i]then
set wv=false
call Qke(p,"|cffff0000"+"Không thể vào phụ bản khi đang bật PK !",5)
endif
if wv then
call gJx(u,p,Ff)
call Qke(p,"|cff7fff00"+"--- Bách Man Sơn ---",3)
else
call Qke(p,"|cffffcc00"+"Phụ bản này rất nguy hiểm, luyện cấp thêm rồi hãy quay lại !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản vẫn chưa được khiêu chiến !",5)
endif
elseif w5e=='I08G' then
if nc then
set wv=false
if Vc==1 and bJ[i]>=5 then
set wv=true
elseif Vc==2 and bJ[i]>=7 then
set wv=true
elseif Vc==3 and bJ[i]>=8 then
set wv=true
endif
if vo[i]then
set wv=false
call Qke(p,"|cffff0000"+"Không thể vào phụ bản khi đang bật PK !",5)
endif
if wv then
call gJx(u,p,oF)
call Qke(p,"|cff7fff00"+"--- Minh Linh Đình Viện ---",3)
else
call Qke(p,"|cffffcc00"+"Phụ bản này rất nguy hiểm, luyện cấp thêm rồi hãy quay lại !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản vẫn chưa được khiêu chiến !",5)
endif
elseif w5e=='I0HB' then
if vc then
set wv=false
if ec==1 and bJ[i]>=4 then
set wv=true
elseif ec==2 and bJ[i]>=6 then
set wv=true
elseif ec==3 and bJ[i]>=8 then
set wv=true
endif
if vo[i]then
set wv=false
call Qke(p,"|cffff0000"+"Không thể vào phụ bản khi đang bật PK !",5)
endif
if wv then
call gJx(u,p,MG)
call Qke(p,"|cff7fff00"+"--- Lương Sơn Bạc ---",3)
else
call Qke(p,"|cffffcc00"+"Phụ bản này rất nguy hiểm, luyện cấp thêm rồi hãy quay lại !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản vẫn chưa được khiêu chiến !",5)
endif
elseif w5e=='I0JC' then
if bJ[i]>=3 then
call gJx(u,p,zh)
call Qke(p,"|cff7fff00"+"--- Vạn Kiếm Trũng ---",3)
else
call Qke(p,"|cffffcc00"+"Yêu cầu trùng sinh 3 để vào phụ bản !",5)
endif
elseif w5e=='I08K' then
if cC then
set wv=false
if dC[i]<5 then
if CC==1 and bJ[i]>=7 then
set wv=true
elseif CC==2 and bJ[i]>=8 then
set wv=true
elseif CC==3 and bJ[i]>=9 then
set wv=true
endif
else
call Qke(p,"|cffffcc00"+"Bạn đã hết số lần vào Hoa Sơn Luận Kiếm !",5)
endif
if vo[i]then
set wv=false
call Qke(p,"|cffff0000"+"Không thể vào phụ bản khi đang bật PK !",5)
endif
if wv then
call gJx(u,p,VF)
set dC[i]=dC[i]+1
call Qke(p,"|cff7fff00"+"--- Hoa Sơn Luận Kiếm ---",3)
call Qke(p,"|cffffcc00"+"Số lần vào phụ bản: "+I2S(dC[i])+"/5",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản vẫn chưa được khiêu chiến !",5)
endif
elseif w5e=='I0J3' then
if gc then
set wv=false
if Gc==1 and bJ[i]>=6 then
set wv=true
elseif Gc==2 and bJ[i]>=8 then
set wv=true
elseif Gc==3 and bJ[i]>=9 and bEe[i]>=1 then
set wv=true
endif
if vo[i]then
set wv=false
call Qke(p,"|cffff0000"+"Không thể vào phụ bản khi đang bật PK !",5)
endif
if wv then
call gJx(u,p,Ih)
call Qke(p,"|cff7fff00"+"--- Thiên Quỳnh Cung ---",3)
if Bhe[(i)*(8)+8]==4 then
call Crx(u,i,8,4)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản này rất nguy hiểm, luyện cấp thêm rồi hãy quay lại !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản vẫn chưa được khiêu chiến !",5)
endif
elseif w5e=='I0J7' then
if Cc then
set wv=false
if Dc==1 and bJ[i]>=5 then
set wv=true
elseif Dc==2 and bJ[i]>=8 then
set wv=true
elseif Dc==3 and bJ[i]>=9 and bEe[i]>=2 then
set wv=true
endif
if vo[i]then
set wv=false
call Qke(p,"|cffff0000"+"Không thể vào phụ bản khi đang bật PK !",5)
endif
if wv then
call gJx(u,p,hh)
call Qke(p,"|cff7fff00"+"--- Thái Thạch Cơ ---",3)
else
call Qke(p,"|cffffcc00"+"Phụ bản này rất nguy hiểm, luyện cấp thêm rồi hãy quay lại !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản vẫn chưa được khiêu chiến !",5)
endif
elseif w5e=='I0HD' then
if Jc then
set wv=false
if kc[i]<3 and bJ[i]>=3 then
set wv=true
else
call Qke(p,"|cffffcc00"+"Bạn đã hết số lần vào Thông Thiên Tháp !",5)
endif
if vo[i]then
set wv=false
call Qke(p,"|cffff0000"+"Không thể vào phụ bản khi đang bật PK !",5)
endif
if wv then
call gJx(u,p,vh)
set kc[i]=kc[i]+1
call Qke(p,"|cff7fff00"+"--- Thông Thiên Tháp ---",3)
call Qke(p,"|cffffcc00"+"Số lần vào phụ bản: "+I2S(kc[i])+"/3",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản vẫn chưa được khiêu chiến !",5)
endif
elseif w5e=='I0HF' then
if bJ[i]>=9 and not vo[i]and t4e(i)>=40 then
call gJx(u,p,rh)
call Qke(p,"|cff7fff00"+"--- Bá Đao Sơn Trang ---",3)
else
call Qke(p,"|cffffcc00"+"Phía trước là vùng cấm địa của Bá Đao Môn, tu luyện chưa đạt hoặc đang ở chế độ PK không thể vào !",5)
endif
endif
endfunction
function gLx takes nothing returns nothing
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
call gkx(u,p,mJ[i],MJ[i])
set p=null
set u=null
endfunction
function gmx takes nothing returns nothing
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
call gkx(u,p,Fo,go)
set p=null
set u=null
endfunction
function gMx takes nothing returns nothing
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
call gJx(u,p,Yg)
set p=null
set u=null
endfunction
function gpx takes nothing returns nothing
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
call gJx(u,p,oh)
set p=null
set u=null
endfunction
function gPx takes nothing returns nothing
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
if not spe(XC)then
call SetUnitLifePercentBJ(XC,100.)
call Qke(p,"|cffffcc00"+"Bách Thắng Đao Vương đã hồi phục 100% sinh lực !",5)
call UnitRemoveAbility(XC,'A0JP')
endif
call gJx(u,p,Eh)
set p=null
set u=null
endfunction
function gqx takes nothing returns nothing
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
if not spe(Qc)then
call SetUnitLifePercentBJ(Qc,100.)
call Qke(p,"|cffff0000"+"Rời khỏi phụ bản khi đang khiêu chiến sẽ khiến kẻ địch hồi phục 100% sinh lực !",5)
call UnitRemoveAbility(Qc,'A0JP')
endif
call gJx(u,p,eH)
set p=null
set u=null
endfunction
function gQx takes nothing returns nothing
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
if Bhe[(i)*(8)+8]==5 then
call Crx(u,i,8,5)
endif
set p=null
set u=null
endfunction
function gsx takes nothing returns boolean
return(IsUnitType((GetTriggerUnit()),UNIT_TYPE_HERO))!=null
endfunction
function gSx takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,Vd)
call TriggerRegisterEnterRectSimple(t,Ed)
call TriggerRegisterEnterRectSimple(t,Xd)
call TriggerRegisterEnterRectSimple(t,Od)
call TriggerRegisterEnterRectSimple(t,Rd)
call TriggerRegisterEnterRectSimple(t,Id)
call TriggerAddCondition(t,Filter(function gsx))
call TriggerAddAction(t,function gLx)
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,Kg)
call TriggerAddCondition(t,Filter(function gsx))
call TriggerAddAction(t,function gmx)
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,yg)
call TriggerAddCondition(t,Filter(function gsx))
call TriggerAddAction(t,function gMx)
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,xh)
call TriggerAddCondition(t,Filter(function gsx))
call TriggerAddAction(t,function gpx)
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,Vh)
call TriggerAddCondition(t,Filter(function gsx))
call TriggerAddAction(t,function gPx)
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,Zh)
call TriggerAddCondition(t,Filter(function gsx))
call TriggerAddAction(t,function gqx)
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,xH)
call TriggerAddCondition(t,Filter(function gsx))
call TriggerAddAction(t,function gQx)
set t=null
endfunction
function gtx takes nothing returns boolean
local integer CGe=Qce()
call FCx(VGe[CGe],zv,Vhe[CGe],Vhe[CGe],VHe[CGe],Vje[CGe],'d',VJe[CGe])
set VJe[CGe]=VJe[CGe]+20
set Vge[CGe]=Vge[CGe]-1
if Vge[CGe]<=0 or spe(VGe[CGe])then
call QDe()
set VGe[CGe]=null
call D1e(CGe)
endif
return false
endfunction
function gTx takes unit u,real d,real a returns nothing
local integer CGe=D0e()
set VGe[CGe]=u
set Vhe[CGe]=d
set VHe[CGe]=GetUnitX(u)
set Vje[CGe]=GetUnitY(u)
set VJe[CGe]=a
set Vge[CGe]=40
call QIe(CGe,.15,true,function gtx)
endfunction
function gux takes nothing returns boolean
local integer CGe=Qce()
local real a=GetUnitFacing(Vme[CGe])+GetRandomReal(-30,30)
local real x=GetUnitX(Vme[CGe])
local real y=GetUnitY(Vme[CGe])
call Dfx(Vme[CGe],x,y,VMe[CGe],VMe[CGe],50,a,1)
set VLe[CGe]=VLe[CGe]-1
if VLe[CGe]<=0 or spe(Vme[CGe])then
call QDe()
set Vme[CGe]=null
call D_e(CGe)
endif
return false
endfunction
function gUx takes unit u,real d returns nothing
local integer CGe=DZe()
set Vme[CGe]=u
set VMe[CGe]=d
set VLe[CGe]=$F
call QIe(CGe,.15,true,function gux)
endfunction
function gwx takes nothing returns boolean
local integer CGe=Qce()
local real x=GetUnitX(Vse[CGe])
local real y=GetUnitY(Vse[CGe])
local real a=GetUnitFacing(Vse[CGe])
call Dfx(Vse[CGe],x,y,VSe[CGe],VSe[CGe],50,a,1)
call Dfx(Vse[CGe],x,y,VSe[CGe],VSe[CGe],50,a+$A,1)
call Dfx(Vse[CGe],x,y,VSe[CGe],VSe[CGe],50,a+20,1)
call Dfx(Vse[CGe],x,y,VSe[CGe],VSe[CGe],50,a+30,1)
call Dfx(Vse[CGe],x,y,VSe[CGe],VSe[CGe],50,a+40,1)
call Dfx(Vse[CGe],x,y,VSe[CGe],VSe[CGe],50,a-$A,1)
call Dfx(Vse[CGe],x,y,VSe[CGe],VSe[CGe],50,a-20,1)
call Dfx(Vse[CGe],x,y,VSe[CGe],VSe[CGe],50,a-30,1)
call Dfx(Vse[CGe],x,y,VSe[CGe],VSe[CGe],50,a-40,1)
set VQe[CGe]=VQe[CGe]-1
if VQe[CGe]<=0 or spe(Vse[CGe])then
call QDe()
set Vse[CGe]=null
call Dze(CGe)
endif
return false
endfunction
function gWx takes unit u,real d,real a returns nothing
local integer CGe=DYe()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
call Dfx(u,x,y,d,d,50,a,1)
call Dfx(u,x,y,d,d,50,a+$A,1)
call Dfx(u,x,y,d,d,50,a+20,1)
call Dfx(u,x,y,d,d,50,a+30,1)
call Dfx(u,x,y,d,d,50,a+40,1)
call Dfx(u,x,y,d,d,50,a-$A,1)
call Dfx(u,x,y,d,d,50,a-20,1)
call Dfx(u,x,y,d,d,50,a-30,1)
call Dfx(u,x,y,d,d,50,a-40,1)
set Vse[CGe]=u
set VSe[CGe]=d
set VQe[CGe]=2
call QIe(CGe,.5,true,function gwx)
endfunction
function gyx takes rect r returns nothing
local unit n
local player p
call GroupEnumUnitsInRect(sv,r,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
set p=GetOwningPlayer(n)
if p==zv then
call FlushChildHashtable(UH,GetHandleId(n))
call FlushChildHashtable(ht,GetHandleId(n))
call RemoveUnit(n)
endif
call GroupRemoveUnit(sv,n)
endloop
set p=null
set n=null
endfunction
function gYx takes integer id,rect r,integer gzx returns nothing
local integer i=1
loop
exitwhen i>gzx
set Qv=CreateUnit(zv,id,tse(r),tSe(r),270)
call uHe(Qv,0,0,0,NB-1,NB)
set i=i+1
endloop
endfunction
function gZx takes boolean b returns nothing
local integer i=1
if b then
loop
exitwhen i>5
if spe(VB[i])then
set VB[i]=CreateUnit(zv,RB[i],GetRectCenterX(OB[i]),GetRectCenterY(OB[i]),270)
call uHe(VB[i],0,0,0,NB-1,NB)
endif
set i=i+1
endloop
else
loop
exitwhen i>5
set VB[i]=CreateUnit(zv,RB[i],GetRectCenterX(OB[i]),GetRectCenterY(OB[i]),270)
call uHe(VB[i],0,0,0,NB-1,NB)
set i=i+1
endloop
endif
endfunction
function g_x takes integer a,integer dv returns nothing
local integer c=1
local integer g0x=0
set dv=R2I(I2R(dv)*(1.+.5*NB)*oj)
loop
exitwhen c>6
if XJ[c]!=null then
if s1e(XJ[c],xf)then
set Uv=Player(c-1)
call tze(c,4,3,800)
if NB==1 then
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],bj[4])
endif
if NB==2 then
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],bj[5])
if GetRandomReal(0,'d')<=30 and a==3 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=1
endif
if NB==3 then
call UnitAddItemById(OJ[c],bj[6])
if GetRandomReal(0,'d')<=40 and a==3 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=2
endif
if a==3 then
call UnitAddItemById(OJ[c],'I0G9')
endif
call t_e(c,$C8,NB)
call tFe(c,6000+6000*NB,1)
call tDe(c,R2I(('d'+50*NB)*oj),1)
call tHe(c,$3A98+5000*NB,1)
call tke(c,9,dv,1)
call tye(c,$F+g0x)
call Toe(Uv,$3A98+5000*NB,R2I(('d'+50*NB)*oj),6000+6000*NB,TH,dv,9)
endif
endif
set c=c+1
endloop
endfunction
function g1x takes unit u,integer i,unit v,integer id,real x,real y returns nothing
if id=='n03P' then
call tUe('I054',x,y,5.)
set aB=aB-1
if aB==0 then
call QKe("|cffff0000"+"[ Bích Lạc Cốc ] Tịch Diệm xuất hiện !",5)
call QKe("|cffff0000"+"- Tịch Diệm: Kẻ nào to gan dám xâm nhập vào thánh địa, để ta cho người biết sự lợi hại !",5)
set Qv=CreateUnit(zv,'n03S',GetRectCenterX(rf),GetRectCenterY(rf),270)
call uke(Qv,$87*tH,790,$9664,320*tH,$406,$D2F0,NB,3,6,8)
set nB=2
endif
elseif id=='n03S' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call tUe(Zj[4],x,y,30)
call tWe('I05Z',x,y,GetRandomInt(2,4)+NB-1)
call cqx(OJ[i],3,5)
call g_x(1,500)
if NB==1 then
call tWe('I015',x,y,GetRandomInt(1,2))
if GetRandomReal(0,'d')<=50 then
call Wue(1,GetRandomInt(1,$B),x,y)
endif
call tWe(bj[4],x,y,GetRandomInt(3,4))
call tWe(bj[5],x,y,2)
endif
if NB==2 then
call tUe('I01O',x,y,30)
if GetRandomReal(0,'d')<=50 then
call Wue(2,GetRandomInt(1,$B),x,y)
endif
call CreateItem(bj[5],x,y)
call tWe(bj[6],x,y,2)
endif
if NB==3 then
if GetRandomReal(0,'d')<=50 then
call Wue(3,GetRandomInt(1,$B),x,y)
endif
call tWe(bj[5],x,y,GetRandomInt(1,2))
call tWe(bj[6],x,y,GetRandomInt(1,2))
call CreateItem(bj[7],x,y)
endif
call QKe("|cffff0000"+"[ Bích Lạc Cốc ] Một đám hộ vệ xuất hiện cản đường !",5)
call gYx('n03Q',af,$F)
set aB=$F
set nB=3
elseif id=='n03Q' then
call tUe('I054',x,y,5.)
set aB=aB-1
if aB==0 then
call QKe("|cffff0000"+"[ Bích Lạc Cốc ] Phương Tây Bạch xuất hiện nhưng đang trong trạng thái Kim Cang Bất Hoại, để phá trạng thái của hắn cần đập vỡ 5 Kim Cang Thạch theo thứ tự|r Thủy Hỏa Địa Phong Lôi",5)
set EB=CreateUnit(zv,'n03T',GetRectCenterX(nf),GetRectCenterY(nf),270)
call uke(EB,$C3*tH,910,$B3B0,360*tH,$42E,$EA60,NB,4,7,8)
call UnitAddAbility(EB,'A0HH')
set nB=4
call gZx(false)
endif
elseif id==RB[1]or id==RB[2]or id==RB[3]or id==RB[4]or id==RB[5]then
if id==RB[1]then
if XB!=0 then
call QKe("|cffffcc00"+"Thứ tự mở cơ quan không đúng !",5)
call gZx(true)
set XB=0
else
set XB=1
call QKe("|cffffcc00"+"Kim Cang Thạch - Thủy đã được mở !",5)
endif
elseif id==RB[2]then
if XB!=1 then
call QKe("|cffffcc00"+"Thứ tự mở cơ quan không đúng !",5)
call gZx(true)
set XB=0
else
set XB=2
call QKe("|cffffcc00"+"Kim Cang Thạch - Hỏa đã được mở !",5)
endif
elseif id==RB[3]then
if XB!=2 then
call QKe("|cffffcc00"+"Thứ tự mở cơ quan không đúng !",5)
call gZx(true)
set XB=0
else
set XB=3
call QKe("|cffffcc00"+"Kim Cang Thạch - Địa đã được mở !",5)
endif
elseif id==RB[4]then
if XB!=3 then
call QKe("|cffffcc00"+"Thứ tự mở cơ quan không đúng !",5)
call gZx(true)
set XB=0
else
set XB=4
call QKe("|cffffcc00"+"Kim Cang Thạch - Phong đã được mở !",5)
endif
elseif id==RB[5]then
if XB!=4 then
call QKe("|cffffcc00"+"Thứ tự mở cơ quan không đúng !",5)
call gZx(true)
set XB=0
else
set XB=5
call QKe("|cffffcc00"+"Kim Cang Thạch - Lôi đã được mở !",5)
call UnitRemoveAbility(EB,'A0HH')
call QKe("|cffff0000"+"[ Bích Lạc Cốc ] Trạng thái Kim Thân của Phương Tây Bạch đã bị phá vỡ !",5)
call QKe("|cffff0000"+"- Phương Tây Bạch: các ngươi tưởng có thể phá vỡ Kim Thể của ta thì xong à, không dễ thế đâu !",5)
set aB=3
set nB=5
endif
endif
elseif id=='n03T' then
set aB=aB-1
if aB==0 then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call tUe(Zj[4],x,y,50)
call tWe('I05Z',x,y,GetRandomInt(3,5)+NB-1)
call cqx(OJ[i],3,6)
call g_x(2,$3E8)
if NB==1 then
call tWe('I016',x,y,GetRandomInt(1,2))
call Wue(1,GetRandomInt(1,$B),x,y)
call tWe(bj[4],x,y,GetRandomInt(3,4))
call tWe(bj[5],x,y,3)
endif
if NB==2 then
call CreateItem('I01O',x,y)
call Wue(2,GetRandomInt(1,$B),x,y)
call tWe(bj[4],x,y,GetRandomInt(2,3))
call tWe(bj[6],x,y,2)
endif
if NB==3 then
call Wue(3,GetRandomInt(1,$B),x,y)
call tWe(bj[5],x,y,GetRandomInt(1,2))
call tWe(bj[6],x,y,GetRandomInt(2,3))
call CreateItem(bj[7],x,y)
endif
call QKe("|cffff0000"+"[ Bích Lạc Cốc ] Tìm khắp cốc và phá vợ 5 Phệ Hồn Đăng để chiêu dụ kẻ địch cuối cùng",5)
set Qv=CreateUnit(zv,'n03R',GetRectCenterX(If),GetRectCenterY(If),270)
call uHe(Qv,0,0,0,NB-1,NB)
set Qv=CreateUnit(zv,'n03R',GetRectCenterX(Af),GetRectCenterY(Af),270)
call uHe(Qv,0,0,0,NB-1,NB)
set Qv=CreateUnit(zv,'n03R',GetRectCenterX(Nf),GetRectCenterY(Nf),270)
call uHe(Qv,0,0,0,NB-1,NB)
set Qv=CreateUnit(zv,'n03R',GetRectCenterX(bf),GetRectCenterY(bf),270)
call uHe(Qv,0,0,0,NB-1,NB)
set Qv=CreateUnit(zv,'n03R',GetRectCenterX(Bf),GetRectCenterY(Bf),270)
call uHe(Qv,0,0,0,NB-1,NB)
set aB=5
set nB=6
else
call QKe("|cffff0000"+"[ Bích Lạc Cốc ] Chỉ là thế thân của Phương Tây Bạch",5)
set Qv=CreateUnit(zv,'n03T',GetRectCenterX(nf),GetRectCenterY(nf),270)
call uke(Qv,$C3*tH,910,$B3B0,360*tH,$42E,$EA60,NB,4,7,8)
endif
elseif id=='n03R' then
if nB==6 then
set aB=aB-1
if aB==0 then
call QKe("|cffff0000"+"[ Bích Lạc Cốc ] Võ Thi Văn xuất hiện !",5)
set EB=CreateUnit(zv,'n03U',GetRectCenterX(cf),GetRectCenterY(cf),270)
call UnitAddAbility(EB,Ej[GetRandomInt(1,5)])
call uke(EB,$FA*tH,970,$C15C,660*tH,$49C,77000,NB,5,7,9)
if NB>=2 then
call uJe(EB)
endif
set nB=7
endif
elseif nB==7 then
call UnitRemoveAbility(EB,'A0HH')
endif
elseif id=='n03U' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v)+" kết thúc vượt ải Bích Lạc Cốc",5)
if Bhe[(i)*(8)+5]==3 then
call Crx(u,i,5,3)
endif
call CreateItem(Zj[4],x,y)
call tWe('I05Z',x,y,GetRandomInt(3,6)+NB-1)
call cqx(OJ[i],3,6)
if NB==1 then
call CreateItem(mj[3],x,y)
call CreateItem('I04A',x,y)
call tWe('I01N',x,y,GetRandomInt(1,2))
call Wue(1,GetRandomInt(1,$B),x,y)
call tWe(bj[4],x,y,GetRandomInt(3,4))
call tWe(bj[5],x,y,2)
call CreateItem(bj[6],x,y)
call t6e(i,7,1)
endif
if NB==2 then
call CreateItem(mj[4],x,y)
call CreateItem('I0JN',x,y)
call UnitAddItemById(OJ[i],'I09Q')
call CreateItem('I01Q',x,y)
call CreateItem('I04H',x,y)
call CreateItem('I01O',x,y)
call Wue(2,GetRandomInt(1,$B),x,y)
call tWe(bj[5],x,y,GetRandomInt(1,2))
call tWe(bj[6],x,y,2)
call tWe(bj[7],x,y,2)
call t6e(i,7,2)
endif
if NB==3 then
call CreateItem(mj[6],x,y)
call CreateItem('I0JN',x,y)
call Wue(3,GetRandomInt(1,$B),x,y)
call CreateItem(bj[6],x,y)
call CreateItem(bj[7],x,y)
call CreateItem(bj[8],x,y)
call t6e(i,7,3)
endif
call g_x(3,$7D0)
set nB=8
endif
endfunction
function g2x takes nothing returns boolean
local integer CGe=Qce()
set VUe[CGe]=VUe[CGe]-1
if VUe[CGe]<=0 then
call QDe()
set tv=xf
call Txe(tv)
set mv=1
loop
exitwhen mv>6
if XJ[mv]!=null and s1e(XJ[mv],tv)then
call gKx(XJ[mv],Kd)
endif
set mv=mv+1
endloop
call Dye(CGe)
endif
return false
endfunction
function g3x takes nothing returns nothing
local integer CGe=DWe()
set VUe[CGe]=30
call QIe(CGe,1.,true,function g2x)
endfunction
function g4x takes nothing returns boolean
local integer CGe=Qce()
set VYe[CGe]=VYe[CGe]-1
if VYe[CGe]<=0 or nB==8 then
call QDe()
set nB=0
set AB=false
call QKe("|cffff0000"+"[ Hoạt Động ] Phụ bản Bích Lạc Cốc đã kết thúc !",5)
call gyx(xf)
call g3x()
call DestroyTimerDialog(VZe[CGe])
call DestroyTimer(Vze[CGe])
set Vze[CGe]=null
set VZe[CGe]=null
set OB[1]=null
set OB[2]=null
set OB[3]=null
set OB[4]=null
set OB[5]=null
call Dwe(CGe)
endif
return false
endfunction
function g5x takes integer lv returns nothing
local integer CGe=DUe()
set OB[1]=Xf
set OB[2]=Vf
set OB[3]=Rf
set OB[4]=Of
set OB[5]=Ef
set RB[1]='n03V'
set RB[2]='n03W'
set RB[3]='n03X'
set RB[4]='n03Y'
set RB[5]='n03Z'
set NB=lv
set AB=true
set Vze[CGe]=CreateTimer()
set VYe[CGe]=$708
call TimerStart(Vze[CGe],VYe[CGe],false,null)
set VZe[CGe]=CreateTimerDialog(Vze[CGe])
call TimerDialogSetTitle(VZe[CGe],"["+I2S(lv)+"*] Bích Lạc Cốc")
call TimerDialogDisplay(VZe[CGe],true)
call gYx('n03P',of,20)
set aB=20
set nB=1
call QIe(CGe,1.,true,function g4x)
endfunction
function g6x takes player p,integer i,item t returns boolean
local integer lv=S2I(BlzGetItemDescription(t))
if not IB then
if not AB then
set IB=true
call g5x(lv)
call QKe(rj[i]+"|cffffcc00"+" đã khiêu chiến Bích Lạc Cốc - "+Fj[lv],5)
else
call Qke(p,"|cffffcc00"+"Phụ bản đã được khiêu chiến trước đó !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản này chỉ có thể mở 1 lần trong mỗi trận !",5)
endif
call RemoveItem(t)
return false
endfunction
function g7x takes nothing returns boolean
local integer CGe=Qce()
set V2e[CGe]=V2e[CGe]-1
if V2e[CGe]<=0 then
call QDe()
if V6e[CGe]==BB then
set Qv=CreateUnit(zv,V5e[CGe],V3e[CGe],V4e[CGe],270)
call uHe(Qv,0,0,0,gB-1,gB)
endif
call Due(CGe)
endif
return false
endfunction
function g8x takes integer id,integer s returns nothing
local integer CGe=DTe()
set V2e[CGe]=R2I($A/ .03125)
set V5e[CGe]=id
if id=='n045' then
set V3e[CGe]=tse(gf)
set V4e[CGe]=tSe(gf)
else
set V3e[CGe]=tse(kf)
set V4e[CGe]=tSe(kf)
endif
set V6e[CGe]=s
call QIe(CGe,.03125,true,function g7x)
endfunction
function g9x takes rect r returns nothing
local unit n
local player p
call GroupEnumUnitsInRect(sv,r,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
set p=GetOwningPlayer(n)
if p==zv then
call FlushChildHashtable(UH,GetHandleId(n))
call FlushChildHashtable(ht,GetHandleId(n))
call RemoveUnit(n)
endif
call GroupRemoveUnit(sv,n)
endloop
set p=null
set n=null
endfunction
function Gvx takes integer id returns nothing
local unit n
call GroupEnumUnitsInRect(sv,Df,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if GetUnitTypeId(n)==id then
call FlushChildHashtable(UH,GetHandleId(n))
call FlushChildHashtable(ht,GetHandleId(n))
call RemoveUnit(n)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
endfunction
function Gex takes integer id,rect r,integer Gxx returns nothing
local integer i=1
loop
exitwhen i>Gxx
set Qv=CreateUnit(zv,id,tse(r),tSe(r),270)
call uHe(Qv,0,0,0,gB-1,gB)
set i=i+1
endloop
endfunction
function Gox takes boolean b returns nothing
local integer i=1
if b then
loop
exitwhen i>5
if spe(cB[i])then
set cB[i]=CreateUnit(zv,Gj[i],GetRectCenterX(gj[i]),GetRectCenterY(gj[i]),270)
call uHe(cB[i],0,0,0,gB-1,gB)
endif
set i=i+1
endloop
else
loop
exitwhen i>5
set cB[i]=CreateUnit(zv,Gj[i],GetRectCenterX(gj[i]),GetRectCenterY(gj[i]),270)
call uHe(cB[i],0,0,0,gB-1,gB)
set i=i+1
endloop
endif
endfunction
function Grx takes integer i returns nothing
local integer b=0
local integer rd=GetRandomInt(1,4)
loop
exitwhen b!=0
if not dB[rd]then
set b=rd
else
set rd=GetRandomInt(1,4)
endif
endloop
if b==1 then
set gj[i]=Lf
elseif b==2 then
set gj[i]=mf
elseif b==3 then
set gj[i]=Mf
elseif b==4 then
set gj[i]=pf
endif
set dB[b]=true
endfunction
function Gix takes nothing returns nothing
local integer i=0
local integer rd=GetRandomInt(1,4)
set gj[5]=Pf
if rd==1 then
set gj[1]=Lf
elseif rd==2 then
set gj[1]=mf
elseif rd==3 then
set gj[1]=Mf
elseif rd==4 then
set gj[1]=pf
endif
set dB[rd]=true
call Grx(2)
call Grx(3)
call Grx(4)
endfunction
function Gax takes integer a,integer dv returns nothing
local integer c=1
local integer g0x=0
set dv=R2I(I2R(dv)*(1.+.5*gB)*oj)
loop
exitwhen c>6
if XJ[c]!=null then
if s1e(XJ[c],Df)then
set Uv=Player(c-1)
if gB==1 then
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],bj[5])
endif
if gB==2 then
call UnitAddItemById(OJ[c],bj[6])
if GetRandomReal(0,'d')<=30 and a==5 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=1
endif
if gB==3 then
call UnitAddItemById(OJ[c],bj[6])
call UnitAddItemById(OJ[c],bj[5])
if GetRandomReal(0,'d')<=40 and a==5 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=2
endif
if a==5 then
call UnitAddItemById(OJ[c],'I0G9')
endif
call tze(c,4,4,500)
call t_e(c,$C8,gB)
call tFe(c,$2710+5000*gB,1)
call tDe(c,R2I(($8C+60*gB)*oj),1)
call tHe(c,$4E20+5000*gB,1)
call tke(c,4,dv,1)
call tye(c,$A+g0x)
call Toe(Uv,$4E20+5000*gB,R2I(($8C+60*gB)*oj),$2710+5000*gB,TH,dv,4)
endif
endif
set c=c+1
endloop
endfunction
function Gnx takes unit u,integer i,unit v,integer id,real x,real y returns nothing
if id=='n045' then
if GetRandomReal(0,'d')<=$F then
call CreateItem('I084',x,y)
endif
call g8x('n045',1)
elseif id=='n047' then
if GetRandomReal(0,'d')<=$F then
call CreateItem('I085',x,y)
endif
call g8x('n047',$B)
elseif id=='n046' then
call tUe('I054',x,y,5.)
set bB=bB-1
elseif id=='n04B' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call tUe(Zj[5],x,y,20)
call cqx(OJ[i],2,6)
call Gax(1,$C8)
call Wee(2,GetRandomInt(1,$F),x,y)
if gB==1 then
call tWe(bj[4],x,y,GetRandomInt(1,2))
call tWe(bj[5],x,y,2)
endif
if gB==2 then
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[6],x,y)
endif
if gB==3 then
call tWe(bj[5],x,y,GetRandomInt(1,2))
call tWe(bj[6],x,y,2)
endif
call tWe('I05Z',x,y,GetRandomInt(2,3)+(gB-1))
call QKe("|cffff0000"+"[ Bách Man Sơn ] nhanh chóng tiến về phía trước Bích Ngô Phong !",5)
set Qv=CreateUnit(zv,'n048',GetRectCenterX(hf),GetRectCenterY(hf),270)
call Tje(Qv,6729,.1)
call uHe(Qv,0,0,0,gB-1,gB)
set BB=3
elseif id=='n048' then
call QKe("|cffff0000"+"[ Bách Man Sơn ] Bích Ngô Sứ xuất hiện !",5)
set Qv=CreateUnit(zv,'n04C',GetRectCenterX(Hf),GetRectCenterY(Hf),270)
call uke(Qv,$D2*tH,930,$B798,500*tH,$460,67000,gB,4,7,9)
set BB=4
elseif id=='n04C' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call tUe(Zj[5],x,y,25)
if gB==1 then
call tWe(bj[4],x,y,GetRandomInt(2,3))
call tWe(bj[5],x,y,2)
endif
if gB==2 then
call tWe(bj[5],x,y,GetRandomInt(1,2))
call tWe(bj[6],x,y,2)
endif
if gB==3 then
call tWe(bj[5],x,y,GetRandomInt(2,3))
call tWe(bj[6],x,y,2)
endif
call cqx(OJ[i],2,6)
call Gax(2,400)
call Wee(2,GetRandomInt(1,$F),x,y)
call tWe('I05Z',x,y,GetRandomInt(2,3)+(gB-1))
call QKe("|cffff0000"+"[ Bách Man Sơn ] Gióng trống ở Thần Thù Phong !",5)
set BB=5
elseif id=='n04D' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call tUe(Zj[5],x,y,30)
if gB==1 then
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
endif
if gB==2 then
call tWe(bj[5],x,y,GetRandomInt(2,3))
call tWe(bj[6],x,y,2)
endif
if gB==3 then
call tWe(bj[5],x,y,GetRandomInt(2,3))
call tWe(bj[6],x,y,2)
endif
call cqx(OJ[i],2,6)
call Gax(3,600)
call Wee(2,GetRandomInt(1,$F),x,y)
call tWe('I05Z',x,y,GetRandomInt(2,4)+(gB-1))
call QKe("|cffff0000"+"[ Bách Man Sơn ] Có thể tiến về Linh Bích Phong khiêu chiến Linh Hạt Sứ !",5)
call QKe("|cff7fff00"+"[ Bách Man Sơn ] Tiếng gáy của Thiết Trảo Kim Kê có thể khiến Linh Hạt Sứ bị vô hiệu Kim Chung Tráo !",5)
call Gex('n047',kf,$A)
set CB=CreateUnit(zv,'n04E',GetRectCenterX(Kf),GetRectCenterY(Kf),270)
call uke(CB,340*tH,$41A,$DAC0,560*tH,$47E,72000,gB,6,8,9)
call UnitAddAbility(CB,'A0HH')
set BB=$B
elseif id=='n04E' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call tUe(Zj[5],x,y,50)
if gB==1 then
call tWe(bj[4],x,y,GetRandomInt(1,2))
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
call w8e($C,GetRandomInt(1,5),x,y)
endif
if gB==2 then
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
call CreateItem(bj[7],x,y)
endif
if gB==3 then
call tWe(bj[5],x,y,GetRandomInt(1,2))
call tWe(bj[6],x,y,2)
call CreateItem(bj[7],x,y)
endif
call cqx(OJ[i],3,6)
call Gax(4,800)
call Wee(2,GetRandomInt(1,$F),x,y)
call tWe('I05Z',x,y,GetRandomInt(2,4)+(gB-1))
call QKe("|cffff0000"+"[ Bách Man Sơn ] Tìm khắp Bách Man Sơn các Trưởng Lão Hộ Pháp và phá hủy Huyễn ảnh Phù Đăng theo thứ tự|r Kim Mộc Thổ Thủy Hỏa",5)
set BB=$C
call Gix()
call Gox(false)
elseif id==Gj[1]or id==Gj[2]or id==Gj[3]or id==Gj[4]or id==Gj[5]then
if id==Gj[1]then
if DB!=0 then
call QKe("|cffffcc00"+"Thứ tự mở không đúng !",5)
call Gox(true)
set DB=0
else
set DB=1
call QKe("|cffffcc00"+"Huyễn ảnh Phù Đăng - Kim đã được mở !",5)
endif
elseif id==Gj[2]then
if DB!=1 then
call QKe("|cffffcc00"+"Thứ tự mở không đúng !",5)
call Gox(true)
set DB=0
else
set DB=2
call QKe("|cffffcc00"+"Huyễn ảnh Phù Đăng - Mộc đã được mở !",5)
endif
elseif id==Gj[3]then
if DB!=2 then
call QKe("|cffffcc00"+"Thứ tự mở không đúng !",5)
call Gox(true)
set DB=0
else
set DB=3
call QKe("|cffffcc00"+"Huyễn ảnh Phù Đăng - Thổ đã được mở !",5)
endif
elseif id==Gj[4]then
if DB!=3 then
call QKe("|cffffcc00"+"Thứ tự mở không đúng !",5)
call Gox(true)
set DB=0
else
set DB=4
call QKe("|cffffcc00"+"Huyễn ảnh Phù Đăng - Thủy đã được mở !",5)
endif
elseif id==Gj[5]then
if DB!=4 then
call QKe("|cffffcc00"+"Thứ tự mở không đúng !",5)
call Gox(true)
set DB=0
else
set DB=5
call QKe("|cffffcc00"+"Huyễn ảnh Phù Đăng - Hỏa đã được mở !",5)
call QKe("|cffff0000"+"[ Bách Man Sơn ] Khí độc lan tỏa khắp Bách Man Sơn, Cổ Vương xuất hiện tại Thiên Tuyệt Phong !",5)
set Qv=CreateUnit(zv,'n04F',GetRectCenterX(lf),GetRectCenterY(lf),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,420*tH,$442,$F618,700*tH,$4A6,78000,gB,6,8,9)
if gB>=3 then
call uJe(Qv)
endif
set BB=$D
endif
endif
elseif id=='n04F' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v)+" kết thúc vượt ải Bách Man Sơn",5)
call CreateItem(Zj[5],x,y)
call cqx(OJ[i],3,6)
if gB==1 then
call CreateItem('I04B',x,y)
call CreateItem(mj[3],x,y)
call tWe(bj[4],x,y,GetRandomInt(2,3))
call tWe(bj[5],x,y,2)
call tWe(bj[6],x,y,2)
call w8e($C,GetRandomInt(1,5),x,y)
call t6e(i,8,1)
endif
if gB==2 then
call UnitAddItemById(OJ[i],'I09R')
call CreateItem(mj[5],x,y)
call tWe(bj[5],x,y,GetRandomInt(1,2))
call tWe(bj[6],x,y,2)
call tWe(bj[7],x,y,2)
call t6e(i,8,2)
endif
if gB==3 then
call tWe(bj[6],x,y,GetRandomInt(1,2))
call CreateItem(bj[7],x,y)
call CreateItem(bj[8],x,y)
call t6e(i,8,3)
endif
call Wee(2,GetRandomInt(1,$F),x,y)
call tWe('I05Z',x,y,GetRandomInt(2,5)+(gB-1))
call Gax(5,$3E8)
set BB=$E
endif
endfunction
function GVx takes nothing returns boolean
local integer CGe=Qce()
set Eve[CGe]=Eve[CGe]-1
if Eve[CGe]<=0 then
call QDe()
set tv=Df
call Txe(tv)
set mv=1
loop
exitwhen mv>6
if XJ[mv]!=null and s1e(XJ[mv],tv)then
call gKx(XJ[mv],Kd)
endif
set mv=mv+1
endloop
call Dte(CGe)
endif
return false
endfunction
function GEx takes nothing returns nothing
local integer CGe=DSe()
set Eve[CGe]=30
call QIe(CGe,1.,true,function GVx)
endfunction
function GXx takes nothing returns boolean
local integer CGe=Qce()
set Ere[CGe]=Ere[CGe]-1
if Ere[CGe]<=0 or BB==$E then
call QDe()
set BB=0
set FB=false
call QKe("|cffff0000"+"[ Hoạt Động ] Phụ bản Bách Man Sơn đã kết thúc !",5)
call g9x(Df)
call GEx()
call DestroyTimerDialog(Eae[CGe])
call DestroyTimer(Eie[CGe])
set Eie[CGe]=null
set Eae[CGe]=null
call Dse(CGe)
endif
return false
endfunction
function GOx takes integer lv returns nothing
local integer CGe=DQe()
set gB=lv
set FB=true
set Eie[CGe]=CreateTimer()
set Ere[CGe]=$708
call TimerStart(Eie[CGe],Ere[CGe],false,null)
set Eae[CGe]=CreateTimerDialog(Eie[CGe])
call TimerDialogSetTitle(Eae[CGe],"["+I2S(lv)+"*] Bách Man Sơn")
call TimerDialogDisplay(Eae[CGe],true)
call Gex('n045',gf,8)
set BB=1
call QIe(CGe,1.,true,function GXx)
endfunction
function GRx takes player p,integer i,item t returns boolean
local integer lv=S2I(BlzGetItemDescription(t))
if not fB then
if not FB then
set fB=true
call GOx(lv)
call QKe(rj[i]+"|cffffcc00"+" đã khiêu chiến Bách Man Sơn - "+Fj[lv],5)
else
call Qke(p,"|cffffcc00"+"Phụ bản đã được khiêu chiến trước đó !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản này chỉ có thể mở 1 lần trong mỗi trận !",5)
endif
call RemoveItem(t)
return false
endfunction
function GIx takes unit u returns nothing
local item t=null
local integer i=0
local integer b=0
if BB==1 then
loop
exitwhen i>5
set t=UnitItemInSlot(u,i)
if GetItemTypeId(t)=='I084' then
set b=b+1
endif
set i=i+1
endloop
endif
if b==6 then
set i=0
loop
exitwhen i>5
set t=UnitItemInSlot(u,i)
call RemoveItem(t)
set i=i+1
endloop
call Gvx('n045')
call QKe("|cffff0000"+"[ Bách Man Sơn ] Bầy rắn độc tại Bách Man Sơn đã bị diệt trừ, Đào Hoa Sứ xuất hiện !",5)
call QKe("|cffff0000"+"- Đào Hoa Sứ: kẻ nào dám giết bầy rắn yêu quí của ta",5)
set Qv=CreateUnit(zv,'n04B',GetRectCenterX(Gf),GetRectCenterY(Gf),270)
call uke(Qv,$C8*tH,920,$B5A4,480*tH,$456,66000,gB,4,7,9)
set BB=2
endif
set t=null
endfunction
function GAx takes unit u returns nothing
local item t=null
local integer i=0
local integer b=0
if not spe(CB)then
loop
exitwhen i>5
set t=UnitItemInSlot(u,i)
if GetItemTypeId(t)=='I085' then
set b=b+1
endif
set i=i+1
endloop
endif
if b==6 then
set i=0
loop
exitwhen i>5
set t=UnitItemInSlot(u,i)
call RemoveItem(t)
set i=i+1
endloop
call Gvx('n047')
call QKe("|cffff0000"+"[ Bách Man Sơn ] Trạng thái Kim Chung Tráo của Linh Hạt Sứ đã bị phá vỡ !",5)
call UnitRemoveAbility(CB,'A0HH')
endif
set t=null
endfunction
function GNx takes nothing returns nothing
local integer i=1
if BB>=5 and BB<$A and bB==0 then
set BB=BB+1
if BB<$A then
loop
exitwhen i>$C
set Qv=CreateUnit(zv,'n046',(((GetRectCenterX(jf))*1.)+((400)*1.)*Cos(((30*i)*1.)*bj_DEGTORAD)),(((GetRectCenterY(jf))*1.)+((400)*1.)*Sin(((30*i)*1.)*bj_DEGTORAD)),270)
call uHe(Qv,0,0,0,gB-1,gB)
set i=i+1
endloop
set bB=$C
elseif BB==$A then
call QKe("|cffff0000"+"[ Bách Man Sơn ] Thần Chu Sứ xuất hiện !",5)
call QKe("|cffff0000"+"- Thần Chu Sứ: kẻ nào dám náo loạn ở Bách Man Sơn !",5)
set Qv=CreateUnit(zv,'n04D',GetRectCenterX(Jf),GetRectCenterY(Jf),270)
call uke(Qv,260*tH,980,$C350,540*tH,$474,71000,gB,5,7,9)
endif
endif
endfunction
function Gbx takes rect r returns nothing
local unit n
local player p
call GroupEnumUnitsInRect(sv,r,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
set p=GetOwningPlayer(n)
if p==zv then
call FlushChildHashtable(UH,GetHandleId(n))
call FlushChildHashtable(ht,GetHandleId(n))
call RemoveUnit(n)
endif
call GroupRemoveUnit(sv,n)
endloop
set p=null
set n=null
endfunction
function GBx takes integer id,rect r,integer Gcx returns nothing
local integer i=1
loop
exitwhen i>Gcx
set Qv=CreateUnit(zv,id,tse(r),tSe(r),270)
call uHe(Qv,0,0,0,kB-1,kB)
set i=i+1
endloop
endfunction
function GCx takes integer a,integer dv returns nothing
local integer c=1
local integer g0x=0
set dv=R2I(I2R(dv)*(1.+1.*kB)*oj)
loop
exitwhen c>6
if XJ[c]!=null then
if s1e(XJ[c],md)then
set Uv=Player(c-1)
call tze(c,2,1,$C8)
if kB==1 then
call UnitAddItemById(OJ[c],bj[4])
call UnitAddItemById(OJ[c],bj[4])
endif
if kB==2 then
call UnitAddItemById(OJ[c],bj[5])
if GetRandomReal(0,'d')<=$F and a==2 then
call UnitAddItemById(OJ[c],iJ[6])
endif
endif
if kB==3 then
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],bj[4])
if GetRandomReal(0,'d')<=25 and a==2 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=1
endif
if a==2 then
call UnitAddItemById(OJ[c],'I0G9')
endif
call t_e(c,'d',kB)
call tFe(c,$7D0+$7D0*kB,1)
call tDe(c,R2I((70+30*kB)*oj),1)
call tHe(c,5000+5000*kB,1)
call tke(c,3,dv,1)
call tye(c,5+g0x)
call Toe(Uv,5000+5000*kB,R2I((70+30*kB)*oj),$7D0+$7D0*kB,TH,dv,3)
endif
endif
set c=c+1
endloop
endfunction
function Gdx takes unit u,integer i,unit v,integer id,real x,real y returns nothing
if id=='n01Y' then
call tUe('I054',x,y,5.)
set GB=GB-1
if GB==0 then
call QKe("|cffff0000"+"[ Đào Chu Công Mộ ] tiêu diệt Đạo Mộ Tặc Lý Thanh và Chiêu Hồn Sư Bàng Chiếu !",5)
set Qv=CreateUnit(zv,'n021',GetRectCenterX(td),GetRectCenterY(td),270)
call uke(Qv,$A*tH,$FA,8000,45.5*tH,530,$55F0,kB,0,1,4)
set Qv=CreateUnit(zv,'n022',GetRectCenterX(Td),GetRectCenterY(Td),270)
call uke(Qv,$A*tH,$FA,8000,45.5*tH,530,$55F0,kB,0,1,4)
call GBx('n01Z',Sd,$A)
set GB=2
set hB=2
endif
elseif id=='n021' or id=='n022' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call GCx(1,'d')
call cqx(OJ[i],2,3)
if kB==1 then
call tUe('I067',x,y,35)
call tWe(bj[3],x,y,GetRandomInt(1,2))
call CreateItem(bj[4],x,y)
endif
if kB==2 then
call tUe('I068',x,y,28)
call tWe(bj[3],x,y,GetRandomInt(3,4))
call tWe(bj[4],x,y,2)
endif
if kB==3 then
call tUe('I069',x,y,28)
call tWe(bj[4],x,y,GetRandomInt(1,2))
call tWe(bj[5],x,y,2)
endif
set GB=GB-1
if GB==0 then
call QKe("|cffff0000"+"[ Đào Chu Công Mộ ] Trịnh Thi xuất hiện !",5)
set Qv=CreateUnit(zv,'n023',GetRectCenterX(ud),GetRectCenterY(ud),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,16.5*tH,300,$2904,77*tH,620,$7148,kB,1,2,5)
call GBx('n020',Ud,6)
set hB=3
endif
elseif id=='n023' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
set hB=4
call cqx(OJ[i],2,4)
call GCx(2,300)
if kB==1 then
call CreateItem('I067',x,y)
call CreateItem(mj[1],x,y)
call tWe(bj[3],x,y,GetRandomInt(3,4))
call tWe(bj[4],x,y,2)
call t6e(i,1,1)
endif
if kB==2 then
call tUe('I068',x,y,50)
call CreateItem(mj[2],x,y)
call tWe(bj[3],x,y,GetRandomInt(1,2))
call tWe(bj[4],x,y,2)
call CreateItem(bj[5],x,y)
call t6e(i,1,2)
endif
if kB==3 then
call tUe('I069',x,y,50)
call CreateItem(mj[3],x,y)
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[6],x,y)
call t6e(i,1,3)
endif
elseif id=='n01Z' or id=='n020' then
call tUe('I054',x,y,5.)
endif
endfunction
function GDx takes nothing returns boolean
local integer CGe=Qce()
set EXe[CGe]=EXe[CGe]-1
if EXe[CGe]<=0 then
call QDe()
set tv=md
call Txe(tv)
set mv=1
loop
exitwhen mv>6
if XJ[mv]!=null and s1e(XJ[mv],tv)then
call gKx(XJ[mv],Kd)
endif
set mv=mv+1
endloop
call Dqe(CGe)
endif
return false
endfunction
function Gfx takes nothing returns nothing
local integer CGe=DPe()
set EXe[CGe]=30
call QIe(CGe,1.,true,function GDx)
endfunction
function GFx takes nothing returns boolean
local integer CGe=Qce()
set EAe[CGe]=EAe[CGe]-1
if EAe[CGe]<=0 or hB==4 then
call QDe()
set hB=0
set jB=false
set JB=false
call QKe("|cffff0000"+"[ Hoạt Động ] Phụ bản Đào Chu Công Mộ đã kết thúc !",5)
call Gbx(md)
call Gfx()
set KB=EAe[CGe]+HB
call DestroyTimerDialog(Ebe[CGe])
call DestroyTimer(ENe[CGe])
set ENe[CGe]=null
set Ebe[CGe]=null
call Dpe(CGe)
endif
return false
endfunction
function Ggx takes integer lv returns nothing
local integer CGe=DMe()
set kB=lv
set JB=true
set ENe[CGe]=CreateTimer()
set EAe[CGe]=540
set HB=KB+$A
set KB=EAe[CGe]
call TimerStart(ENe[CGe],EAe[CGe],false,null)
set Ebe[CGe]=CreateTimerDialog(ENe[CGe])
call TimerDialogSetTitle(Ebe[CGe],"["+I2S(lv)+"*] Đào Chu Công Mộ")
call TimerDialogDisplay(Ebe[CGe],true)
call GBx('n01Y',Pd,4)
call GBx('n01Y',qd,4)
call GBx('n01Y',Qd,4)
call GBx('n01Y',sd,4)
set GB=16
set hB=1
call QIe(CGe,1.,true,function GFx)
endfunction
function GGx takes player p,integer i,item t returns boolean
local integer lv=S2I(BlzGetItemDescription(t))
if jB then
if not JB then
call Ggx(lv)
call QKe(rj[i]+"|cffffcc00"+" đã khiêu chiến Đào Chu Công Mộ - "+Fj[lv],5)
else
call Qke(p,"|cffffcc00"+"Phụ bản đã được khiêu chiến trước đó !",5)
endif
else
call Qke(p,"|cffffcc00"+"Hoạt động vẫn chưa mở !",5)
endif
call RemoveItem(t)
return false
endfunction
function Ghx takes nothing returns boolean
local integer CGe=Qce()
set Ede[CGe]=Ede[CGe]-1
if Ede[CGe]<=0 then
call QDe()
set jB=false
if HB==0 then
set KB=550
endif
call Dme(CGe)
endif
return false
endfunction
function GHx takes nothing returns boolean
local integer CGe=DLe()
set Ede[CGe]=530
set HB=0
set jB=true
call QKe("|cffff0000"+"[ Hoạt Động ] Lối vào Đào Chu Công Mộ đã mở, tới Tây Tháp Lâm tìm Quan Nhất Đao để tham gia !",5)
set KB=530
call QIe(CGe,1.,true,function Ghx)
return false
endfunction
function Gjx takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$438,true)
call TriggerAddCondition(t,Filter(function GHx))
set t=null
endfunction
function GJx takes nothing returns boolean
local integer CGe=Qce()
call FCx(EGe[CGe],zv,Ehe[CGe],Ehe[CGe],EHe[CGe],Eje[CGe],'d',EJe[CGe]+GetRandomReal(-30,30))
set Ege[CGe]=Ege[CGe]-1
if Ege[CGe]<=0 or spe(EGe[CGe])then
call QDe()
set EGe[CGe]=null
call Dle(CGe)
endif
return false
endfunction
function Gkx takes unit u,real d,real a returns nothing
local integer CGe=DKe()
set EGe[CGe]=u
set Ehe[CGe]=d
set EHe[CGe]=GetUnitX(u)
set Eje[CGe]=GetUnitY(u)
set EJe[CGe]=a
set Ege[CGe]=$C
call QIe(CGe,.18,true,function GJx)
endfunction
function GKx takes rect r returns nothing
local unit n
local player p
call GroupEnumUnitsInRect(sv,r,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
set p=GetOwningPlayer(n)
if p==zv then
call FlushChildHashtable(UH,GetHandleId(n))
call FlushChildHashtable(ht,GetHandleId(n))
call RemoveUnit(n)
endif
call GroupRemoveUnit(sv,n)
endloop
set p=null
set n=null
endfunction
function Glx takes integer id,rect r,integer GLx returns nothing
local integer i=1
loop
exitwhen i>GLx
set Qv=CreateUnit(zv,id,tse(r),tSe(r),270)
call uHe(Qv,0,0,0,PB-1,PB)
set i=i+1
endloop
endfunction
function Gmx takes integer a,integer dv returns nothing
local integer c=1
local integer g0x=0
set dv=R2I(I2R(dv)*(1.*PB)*oj)
loop
exitwhen c>6
if XJ[c]!=null then
if s1e(XJ[c],KD)then
set Uv=Player(c-1)
call tze(c,3,1,400)
if PB==1 then
call UnitAddItemById(OJ[c],bj[4])
call UnitAddItemById(OJ[c],bj[4])
endif
if PB==2 then
call UnitAddItemById(OJ[c],bj[5])
if GetRandomReal(0,'d')<=20 and a==2 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=1
endif
if PB==3 then
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],bj[5])
if GetRandomReal(0,'d')<=30 and a==2 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=2
endif
if a==2 then
call UnitAddItemById(OJ[c],'I0G9')
endif
call tfe(c,'d'+50*PB,1)
call tFe(c,5000+5000*PB,1)
call tDe(c,R2I(('d'+50*PB)*oj),1)
call tHe(c,$2710+5000*PB,1)
call tke(c,7,dv,1)
call tye(c,8+g0x)
call Toe(Uv,$2710+5000*PB,R2I(('d'+50*PB)*oj),5000+5000*PB,'d'+50*PB,dv,7)
endif
endif
set c=c+1
endloop
endfunction
function GMx takes unit u,integer i,unit v,integer id,real x,real y returns nothing
if id=='n033' then
call tUe('I054',x,y,5.)
set lB=lB-1
if lB==0 then
call QKe("|cffff0000"+"[ Hoạt Tử Nhân Mộ ] Hồng Lăng Ba đã xuất hiện !",5)
set Qv=CreateUnit(zv,'n034',GetRectCenterX(LD),GetRectCenterY(LD),270)
call uke(Qv,45.5*tH,530,$55F0,'x'*tH,760,$8CA0,PB,2,4,6)
set LB=2
endif
elseif id=='n034' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
if PB==1 then
call tWe(bj[3],x,y,GetRandomInt(1,2))
call CreateItem(bj[5],x,y)
endif
if PB==2 then
call tWe(bj[4],x,y,GetRandomInt(1,2))
call tWe(bj[5],x,y,2)
endif
if PB==3 then
call tWe(bj[4],x,y,GetRandomInt(1,2))
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[6],x,y)
endif
call Gmx(1,300)
call cqx(OJ[i],2,4)
call QKe("|cffff0000"+"[ Hoạt Tử Nhân Mộ] làm kinh động đến Xích Luyện Tiên Tử Lý Mạc Sầu !",5)
set Qv=CreateUnit(zv,'n035',GetRectCenterX(mD),GetRectCenterY(mD),270)
call uke(Qv,55*tH,580,$61A8,$91*tH,810,$9A4C,PB,2,4,6)
set LB=3
elseif id=='n035' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
set LB=4
call cqx(OJ[i],3,5)
call Gmx(2,700)
if So[i]==0 or So[i]==$A then
call UnitAddItemById(OJ[i],'I09V')
call QKe(rj[i]+" đánh bại |cffff0000Lý Mạc Sầu|r nhận được Võ Lâm Mật Tịch !",5)
endif
if PB==1 then
call tUe('I05N',x,y,50)
call CreateItem(mj[2],x,y)
call CreateItem(bj[3],x,y)
call CreateItem(bj[4],x,y)
call tWe(bj[5],x,y,2)
call t6e(i,5,1)
endif
if PB==2 then
call tUe('I09X',x,y,50)
call CreateItem(mj[3],x,y)
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[6],x,y)
call t6e(i,5,2)
endif
if PB==3 then
call CreateItem('I0J9',x,y)
call CreateItem('I09X',x,y)
call CreateItem(mj[3],x,y)
call tWe(bj[4],x,y,GetRandomInt(2,3))
call tWe(bj[5],x,y,GetRandomInt(2,3))
call tWe(bj[6],x,y,2)
call t6e(i,5,3)
endif
endif
endfunction
function Gpx takes nothing returns boolean
local integer CGe=Qce()
set ELe[CGe]=ELe[CGe]-1
if ELe[CGe]<=0 then
call QDe()
set tv=KD
call Txe(tv)
set mv=1
loop
exitwhen mv>6
if XJ[mv]!=null and s1e(XJ[mv],tv)then
call gKx(XJ[mv],Kd)
endif
set mv=mv+1
endloop
call Dke(CGe)
endif
return false
endfunction
function GPx takes nothing returns nothing
local integer CGe=DJe()
set ELe[CGe]=30
call QIe(CGe,1.,true,function Gpx)
endfunction
function Gqx takes nothing returns boolean
local integer CGe=Qce()
set EPe[CGe]=EPe[CGe]-1
if EPe[CGe]<=0 or LB==4 then
call QDe()
set LB=0
set MB=false
set pB=false
call QKe("|cffff0000"+"[ Hoạt Động ] Phụ bản Hoạt Tử Nhân Mộ đã kết thúc !",5)
call GKx(KD)
call GPx()
set qB=EPe[CGe]+mB
call DestroyTimerDialog(EQe[CGe])
call DestroyTimer(Eqe[CGe])
set Eqe[CGe]=null
set EQe[CGe]=null
call Dje(CGe)
endif
return false
endfunction
function GQx takes integer lv returns nothing
local integer CGe=DHe()
set PB=lv
set pB=true
set Eqe[CGe]=CreateTimer()
set EPe[CGe]=570
set mB=qB+30
set qB=EPe[CGe]
call TimerStart(Eqe[CGe],EPe[CGe],false,null)
set EQe[CGe]=CreateTimerDialog(Eqe[CGe])
call TimerDialogSetTitle(EQe[CGe],"["+I2S(lv)+"*] Hoạt Tử Nhân Mộ")
call TimerDialogDisplay(EQe[CGe],true)
call Glx('n033',lD,25)
set lB=25
set LB=1
call QIe(CGe,1.,true,function Gqx)
endfunction
function Gsx takes player p,integer i,item t returns boolean
local integer lv=S2I(BlzGetItemDescription(t))
if MB then
if not pB then
call GQx(lv)
call QKe(rj[i]+"|cffffcc00"+" đã khiêu chiến Hoạt Tử Nhân Mộ - "+Fj[lv],5)
else
call Qke(p,"|cffffcc00"+"Phụ bản đã được khiêu chiến trước đó !",5)
endif
else
call Qke(p,"|cffffcc00"+"Hoạt động vẫn chưa mở !",5)
endif
call RemoveItem(t)
return false
endfunction
function GSx takes nothing returns boolean
local integer CGe=Qce()
set ETe[CGe]=ETe[CGe]-1
if ETe[CGe]<=0 then
call QDe()
set MB=false
if mB==0 then
set qB=600
endif
call Dhe(CGe)
endif
return false
endfunction
function Gtx takes nothing returns boolean
local integer CGe=DGe()
set ETe[CGe]=600
set mB=0
set qB=600
set MB=true
call QKe("|cffff0000"+"[ Hoạt Động ] Lối vào Hoạt Tử Nhân Mộ đã mở, thuyền phu ở Hoa Sơn biết cách vào !",5)
call QIe(CGe,1.,true,function GSx)
return false
endfunction
function GTx takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$4B0,true)
call TriggerAddCondition(t,Filter(function Gtx))
set t=null
endfunction
function Gux takes nothing returns boolean
local integer CGe=Qce()
call Dzx(Eye[CGe],EYe[CGe],EYe[CGe],zv,Eze[CGe],EZe[CGe],E_e[CGe]+GetRandomReal(-30,30))
set EWe[CGe]=EWe[CGe]-1
if EWe[CGe]<=0 or spe(Eye[CGe])then
call QDe()
set Eye[CGe]=null
call Dge(CGe)
endif
return false
endfunction
function GUx takes unit u,real d,real a returns nothing
local integer CGe=DFe()
set Eye[CGe]=u
set EYe[CGe]=d
set Eze[CGe]=GetUnitX(u)
set EZe[CGe]=GetUnitY(u)
set E_e[CGe]=a
set EWe[CGe]=$C
call QIe(CGe,.18,true,function Gux)
endfunction
function Gwx takes nothing returns boolean
local integer CGe=Qce()
call DXx(E3e[CGe],GetUnitX(E3e[CGe]),GetUnitY(E3e[CGe]),E4e[CGe],E4e[CGe],'d',GetRandomReal(0,'x'),600)
call DXx(E3e[CGe],GetUnitX(E3e[CGe]),GetUnitY(E3e[CGe]),E4e[CGe],E4e[CGe],'d',GetRandomReal('x',$F0),600)
call DXx(E3e[CGe],GetUnitX(E3e[CGe]),GetUnitY(E3e[CGe]),E4e[CGe],E4e[CGe],'d',GetRandomReal($F0,360),600)
set E5e[CGe]=E5e[CGe]-1
if E5e[CGe]<=0 then
set E3e[CGe]=null
call QDe()
call Dfe(CGe)
endif
return false
endfunction
function GWx takes unit u,real d returns nothing
local integer CGe=DDe()
set E3e[CGe]=u
set E4e[CGe]=d
set E5e[CGe]=$F
call QIe(CGe,.3,true,function Gwx)
endfunction
function Gyx takes unit u,real d,real x0,real y0 returns nothing
local real x=(((x0)*1.)+((0)*1.)*Cos(((400)*1.)*bj_DEGTORAD))
local real y=(((y0)*1.)+((0)*1.)*Sin(((400)*1.)*bj_DEGTORAD))
call DXx(u,x,y,d,d,'d',$B4,800)
set x=(((x0)*1.)+((60)*1.)*Cos(((400)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+((60)*1.)*Sin(((400)*1.)*bj_DEGTORAD))
call DXx(u,x,y,d,d,'d',$F0,800)
set x=(((x0)*1.)+(('x')*1.)*Cos(((400)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+(('x')*1.)*Sin(((400)*1.)*bj_DEGTORAD))
call DXx(u,x,y,d,d,'d',300,800)
set x=(((x0)*1.)+(($B4)*1.)*Cos(((400)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+(($B4)*1.)*Sin(((400)*1.)*bj_DEGTORAD))
call DXx(u,x,y,d,d,'d',0,800)
set x=(((x0)*1.)+(($F0)*1.)*Cos(((400)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+(($F0)*1.)*Sin(((400)*1.)*bj_DEGTORAD))
call DXx(u,x,y,d,d,'d',60,800)
set x=(((x0)*1.)+((300)*1.)*Cos(((400)*1.)*bj_DEGTORAD))
set y=(((y0)*1.)+((300)*1.)*Sin(((400)*1.)*bj_DEGTORAD))
call DXx(u,x,y,d,d,'d','x',800)
endfunction
function GYx takes nothing returns boolean
local integer CGe=Qce()
set E9e[CGe]=E9e[CGe]-1
if E9e[CGe]<=0 then
call QDe()
if SB==3 then
call CreateUnit(zv,'n03J',Xve[CGe],Xee[CGe],270)
endif
call Dde(CGe)
endif
return false
endfunction
function Gzx takes nothing returns nothing
local integer CGe=DCe()
set E9e[CGe]=R2I($A/ .03125)
set Xve[CGe]=tse(sD)
set Xee[CGe]=tSe(sD)
call QIe(CGe,.03125,true,function GYx)
endfunction
function GZx takes rect r returns nothing
local unit n
local player p
call GroupEnumUnitsInRect(sv,r,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
set p=GetOwningPlayer(n)
if p==zv then
call FlushChildHashtable(UH,GetHandleId(n))
call FlushChildHashtable(ht,GetHandleId(n))
call RemoveUnit(n)
endif
call GroupRemoveUnit(sv,n)
endloop
set p=null
set n=null
endfunction
function G_x takes integer id,rect r,integer G0x returns nothing
local integer i=1
loop
exitwhen i>G0x
set Qv=CreateUnit(zv,id,tse(r),tSe(r),270)
call uHe(Qv,0,0,0,yB-1,yB)
set i=i+1
endloop
endfunction
function G1x takes boolean b returns nothing
local integer i=1
if b then
loop
exitwhen i>5
if spe(QB[i])then
set QB[i]=CreateUnit(zv,uB[i],GetRectCenterX(TB[i]),GetRectCenterY(TB[i]),270)
call uHe(QB[i],0,0,0,yB-1,yB)
endif
set i=i+1
endloop
else
loop
exitwhen i>5
set QB[i]=CreateUnit(zv,uB[i],GetRectCenterX(TB[i]),GetRectCenterY(TB[i]),270)
call uHe(QB[i],0,0,0,yB-1,yB)
set i=i+1
endloop
endif
endfunction
function G2x takes integer a,integer dv,integer G3x returns nothing
local integer c=1
local integer g0x=0
set dv=R2I(I2R(dv)*(1.+.5*yB)*oj)
loop
exitwhen c>6
if XJ[c]!=null then
if s1e(XJ[c],pD)then
set Uv=Player(c-1)
call tze(c,4,2,400)
if yB==1 then
call UnitAddItemById(OJ[c],bj[5])
endif
if yB==2 then
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],bj[4])
call UnitAddItemById(OJ[c],bj[4])
if GetRandomReal(0,'d')<=30 and a==6 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=1
endif
if yB==3 then
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],bj[4])
if GetRandomReal(0,'d')<=40 and a==6 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=2
endif
if a==6 then
call UnitAddItemById(OJ[c],'I0G9')
endif
if GetRandomReal(0,'d')<=4 then
set lJ[c]=lJ[c]+5
call QKe(rj[c]+"|cffffff00"+" vượt ải Long Môn Phi Kiếm may mắn nhận được 1 mảnh Hành Giả Sa Mạc, xin chúc mừng !",5)
endif
call tFe(c,5000+5000*yB,1)
call tfe(c,'d'+'d'*yB,1)
call tDe(c,R2I(('d'+50*yB)*oj),1)
call tHe(c,$3A98+5000*yB,1)
call tke(c,8,dv,1)
call tje(c,20*yB,G3x,1)
call tye(c,7+g0x)
call Toe(Uv,$3A98+5000*yB,R2I(('d'+50*yB)*oj),5000+5000*yB,'d'+'d'*yB,dv,8)
endif
endif
set c=c+1
endloop
endfunction
function G4x takes unit u,integer i,unit v,integer id,real x,real y returns nothing
if id=='n036' then
call tUe('I054',x,y,5.)
set sB=sB-1
if sB==0 then
call QKe("|cffff0000"+"[ Long Môn Phi Kiếm ] Một toán quân xuất hiện trước Long Môn Quan !",5)
call QKe("|cffff0000"+"- Tào Công Công: đừng hòng nhập quan, quân bây đâu mau chặn hắn lại !",5)
set Qv=CreateUnit(zv,'n03A',GetRectCenterX(ef),GetRectCenterY(ef),270)
call uke(Qv,86*tH,670,$7B0C,310*tH,$3FC,$CF08,yB,2,5,8)
call G_x('n037',QD,$F)
set SB=2
endif
elseif id=='n03A' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call tUe(Zj[3],x,y,20)
call tUe('I09X',x,y,30)
call cqx(OJ[i],2,4)
call G2x(1,$C8,1)
if yB==1 then
call CreateItem('I00M',x,y)
call CreateItem(bj[4],x,y)
call CreateItem(bj[5],x,y)
endif
if yB==2 then
call tWe(bj[4],x,y,GetRandomInt(1,2))
call tWe(bj[5],x,y,3)
call w8e($B,GetRandomInt(1,5),x,y)
endif
if yB==3 then
call tWe(bj[5],x,y,GetRandomInt(2,3))
call CreateItem(bj[6],x,y)
endif
call QKe("|cffff0000"+"[ Long Môn Phi Kiếm ] Phía trước là rừng xương rồng, muốn vượt qua phải tìm đủ 5 loại thảo dược tại Lư Hương để xua tan khí độc !",5)
call G_x('n03J',sD,$A)
set SB=3
elseif id=='n03J' then
call Gzx()
call CreateItem(UB[GetRandomInt(1,5)],x,y)
elseif id=='n03B' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call tUe(Zj[3],x,y,25)
call tUe('I09X',x,y,40)
call cqx(OJ[i],2,4)
call G2x(2,300,2)
if yB==1 then
call CreateItem('I00M',x,y)
call tWe(bj[4],x,y,GetRandomInt(1,2))
call CreateItem(bj[5],x,y)
endif
if yB==2 then
call w8e($B,GetRandomInt(1,5),x,y)
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
endif
if yB==3 then
call tWe(bj[5],x,y,GetRandomInt(1,2))
call tWe(bj[6],x,y,2)
endif
call QKe("|cffff0000"+"[ Long Môn Phi Kiếm ] Phá hủy Long Môn Ngũ Trận theo thứ tự |rVũ - Trưng - Giác - Thương - Cung "+"|cffff0000"+"sẽ tìm được lối vào Long Môn Tiêu Cục, những kẻ không vượt qua được mê cung sẽ trở nên điên loạn !",5)
call G_x('n038',tD,20)
call G1x(false)
set SB=5
elseif id==uB[1]or id==uB[2]or id==uB[3]or id==uB[4]or id==uB[5]then
if id==uB[1]then
if tB!=0 then
call QKe("|cffffcc00"+"Thứ tự mở cơ quan không đúng, Vũ - Trưng - Giác - Thương - Cung !",5)
call G1x(true)
set tB=0
else
set tB=1
call QKe("|cffffcc00"+"Cơ Quan - Vũ đã được mở !",5)
endif
elseif id==uB[2]then
if tB!=1 then
call QKe("|cffffcc00"+"Thứ tự mở cơ quan không đúng, Vũ - Trưng - Giác - Thương - Cung !",5)
call G1x(true)
set tB=0
else
set tB=2
call QKe("|cffffcc00"+"Cơ Quan - Trưng đã được mở !",5)
endif
elseif id==uB[3]then
if tB!=2 then
call QKe("|cffffcc00"+"Thứ tự mở cơ quan không đúng, Vũ - Trưng - Giác - Thương - Cung !",5)
call G1x(true)
set tB=0
else
set tB=3
call QKe("|cffffcc00"+"Cơ Quan - Giác đã được mở !",5)
endif
elseif id==uB[4]then
if tB!=3 then
call QKe("|cffffcc00"+"Thứ tự mở cơ quan không đúng, Vũ - Trưng - Giác - Thương - Cung !",5)
call G1x(true)
set tB=0
else
set tB=4
call QKe("|cffffcc00"+"Cơ Quan - Thương đã được mở !",5)
endif
elseif id==uB[5]then
if tB!=4 then
call QKe("|cffffcc00"+"Thứ tự mở cơ quan không đúng, Vũ - Trưng - Giác - Thương - Cung !",5)
call G1x(true)
set tB=0
else
set tB=5
call QKe("|cffffcc00"+"Cơ Quan - Cung đã được mở !",5)
call QKe("|cffff0000"+"[ Long Môn Phi Kiếm ] Hộ Vệ Cổ Tộc xuất hiện, tiêu diệt hắn để mở lối vào Long Môn Tiêu Cục !",5)
set Qv=CreateUnit(zv,'n03C',GetRectCenterX(yD),GetRectCenterY(yD),270)
call uke(Qv,$96*tH,820,$9C40,350*tH,$424,$D6D8,yB,3,6,8)
set SB=6
endif
endif
elseif id=='n03C' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call tUe(Zj[3],x,y,30)
call tUe('I09X',x,y,50)
call cqx(OJ[i],3,5)
call G2x(3,400,3)
if yB==1 then
call CreateItem('I00M',x,y)
call tWe(bj[4],x,y,GetRandomInt(2,3))
call CreateItem(bj[5],x,y)
endif
if yB==2 then
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
call w8e($B,GetRandomInt(1,5),x,y)
endif
if yB==3 then
call tWe(bj[5],x,y,GetRandomInt(2,3))
call tWe(bj[6],x,y,2)
endif
call QKe("|cffff0000"+"[ Long Môn Phi Kiếm ] Lối vào Long Môn Tiêu Cục đã mở !",5)
call QKe("|cffff0000"+"- Kẻ nào dám nhìn trộm Nguyệt Cơ đại nhân tắm !",5)
set Qv=CreateUnit(zv,'n03D',GetRectCenterX(YD),GetRectCenterY(YD),270)
call uke(Qv,$9B*tH,830,$9E34,520*tH,$46A,70000,yB,3,6,9)
set SB=7
elseif id=='n03D' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call tUe(Zj[3],x,y,40)
call cqx(OJ[i],2,6)
call CreateItem('I09X',x,y)
if So[i]<$B or So[i]==20 then
call UnitAddItemById(OJ[i],'I09W')
endif
call G2x(4,500,4)
if yB==1 then
call CreateItem('I00N',x,y)
call w8e($A,GetRandomInt(1,5),x,y)
call CreateItem(bj[4],x,y)
call tWe(bj[5],x,y,2)
endif
if yB==2 then
call tWe(bj[4],x,y,GetRandomInt(1,2))
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
call w8e($B,GetRandomInt(1,5),x,y)
endif
if yB==3 then
call tWe(bj[5],x,y,GetRandomInt(2,3))
call tWe(bj[6],x,y,GetRandomInt(2,3))
endif
call QKe("|cffff0000"+"- Nguyệt Cơ: chỉ là sự hiểu lầm, công tử đi về phía trước sẽ thấy Long Môn Tiêu Cục !",5)
set Qv=CreateUnit(zv,'n03E',GetRectCenterX(ZD),GetRectCenterY(ZD),270)
call uke(Qv,$BE*tH,900,$B1BC,540*tH,$474,71000,yB,4,7,9)
call G_x('n039',zD,20)
set SB=8
elseif id=='n03E' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call tUe(Zj[3],x,y,50)
call cqx(OJ[i],2,6)
call G2x(5,600,5)
call CreateItem('I09X',x,y)
if yB==1 then
call CreateItem('I00N',x,y)
call w8e($A,GetRandomInt(1,5),x,y)
call tWe(bj[4],x,y,GetRandomInt(1,2))
call tWe(bj[5],x,y,2)
endif
if yB==2 then
call tWe(bj[4],x,y,GetRandomInt(1,2))
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[6],x,y)
call w8e($B,GetRandomInt(1,5),x,y)
endif
if yB==3 then
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[6],x,y)
call CreateItem(bj[7],x,y)
endif
call QKe("|cffff0000"+"[ Long Môn Phi Kiếm ] Vũ Sinh xuất hiện !",5)
call QKe("|cffff0000"+"- Vũ Sinh: kẻ nào dám làm loạn ở Long Môn Tiêu Cục, muốn lấy mật thư thì phải bước qua xác ta đã !",5)
set Qv=CreateUnit(zv,'n03F',GetRectCenterX(vf),GetRectCenterY(vf),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,$F0*tH,950,$BF68,620*tH,$492,76000,yB,4,7,9)
if yB>=3 then
call uJe(Qv)
endif
set SB=9
elseif id=='n03F' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v)+" lấy được mật thư, kết thúc vượt ải Long Môn Phi Kiếm",5)
if Bhe[(i)*(8)+4]==4 then
call Crx(u,i,4,4)
endif
call CreateItem(Zj[3],x,y)
call cqx(OJ[i],3,6)
call G2x(6,800,6)
call CreateItem('I09X',x,y)
if yB==1 then
call CreateItem('I049',x,y)
call CreateItem(mj[3],x,y)
call CreateItem('I00N',x,y)
call w8e($A,GetRandomInt(1,5),x,y)
call CreateItem(bj[4],x,y)
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
call t6e(i,6,1)
endif
if yB==2 then
call CreateItem('I0JN',x,y)
call CreateItem('I01Q',x,y)
call CreateItem(mj[4],x,y)
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[6],x,y)
call CreateItem(bj[7],x,y)
call w8e($B,GetRandomInt(1,5),x,y)
call t6e(i,6,2)
endif
if yB==3 then
call CreateItem('I0JN',x,y)
call CreateItem(mj[6],x,y)
call tWe(bj[5],x,y,GetRandomInt(1,2))
call tWe(bj[6],x,y,GetRandomInt(2,3))
call tWe(bj[7],x,y,2)
call t6e(i,6,3)
endif
set SB=$A
elseif id=='n037' or id=='n038' or id=='n039' then
call tUe('I054',x,y,5.)
endif
endfunction
function G5x takes nothing returns boolean
local integer CGe=Qce()
set Xie[CGe]=Xie[CGe]-1
if Xie[CGe]<=0 then
call QDe()
set tv=pD
call Txe(tv)
set mv=1
loop
exitwhen mv>6
if XJ[mv]!=null and s1e(XJ[mv],tv)then
call gKx(XJ[mv],Kd)
endif
set mv=mv+1
endloop
call Dce(CGe)
endif
return false
endfunction
function G6x takes nothing returns nothing
local integer CGe=DBe()
set Xie[CGe]=30
call QIe(CGe,1.,true,function G5x)
endfunction
function G7x takes nothing returns boolean
local integer CGe=Qce()
set XEe[CGe]=XEe[CGe]-1
if XEe[CGe]<=0 or SB==$A then
call QDe()
set SB=0
set WB=false
call QKe("|cffff0000"+"[ Hoạt Động ] Phụ bản Long Môn Phi Kiếm đã kết thúc !",5)
call GZx(pD)
call G6x()
call DestroyTimerDialog(XOe[CGe])
call DestroyTimer(XXe[CGe])
set XXe[CGe]=null
set XOe[CGe]=null
set TB[1]=null
set TB[2]=null
set TB[3]=null
set TB[4]=null
set TB[5]=null
call Dbe(CGe)
endif
return false
endfunction
function G8x takes integer lv returns nothing
local integer CGe=DNe()
set yB=lv
set WB=true
set XXe[CGe]=CreateTimer()
set XEe[CGe]=$708
call TimerStart(XXe[CGe],XEe[CGe],false,null)
set XOe[CGe]=CreateTimerDialog(XXe[CGe])
call TimerDialogSetTitle(XOe[CGe],"["+I2S(lv)+"*] Long Môn Phi Kiếm")
call TimerDialogDisplay(XOe[CGe],true)
call G_x('n036',qD,$F)
set sB=$F
set SB=1
set TB[1]=WD
set TB[2]=TD
set TB[3]=UD
set TB[4]=wD
set TB[5]=uD
set uB[1]='n03K'
set uB[2]='n03L'
set uB[3]='n03M'
set uB[4]='n03N'
set uB[5]='n03O'
set UB[1]='I07R'
set UB[2]='I07S'
set UB[3]='I07T'
set UB[4]='I07U'
set UB[5]='I07V'
call QIe(CGe,1.,true,function G7x)
endfunction
function G9x takes player p,integer i,item t returns boolean
local integer lv=S2I(BlzGetItemDescription(t))
if not wB then
if not WB then
set wB=true
call G8x(lv)
call QKe(rj[i]+"|cffffcc00"+" đã khiêu chiến Long Môn Phi Kiếm - "+Fj[lv],5)
else
call Qke(p,"|cffffcc00"+"Phụ bản đã được khiêu chiến trước đó !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản này chỉ có thể mở 1 lần trong mỗi trận !",5)
endif
call RemoveItem(t)
return false
endfunction
function hvx takes nothing returns nothing
local item t=GetEnumItem()
local integer id=GetItemTypeId(t)
if id=='I07R' or id=='I07S' or id=='I07V' or id=='I07U' or id=='I07T' then
call RemoveItem(t)
endif
set t=null
endfunction
function hex takes unit u returns nothing
local item t1=Q0e(u,UB[1])
local item t2=Q0e(u,UB[2])
local item t3=Q0e(u,UB[3])
local item t4=Q0e(u,UB[4])
local item t5=Q0e(u,UB[5])
if t1!=null and t2!=null and t3!=null and t4!=null and t5!=null and SB==3 then
call RemoveItem(t1)
call RemoveItem(t2)
call RemoveItem(t3)
call RemoveItem(t4)
call RemoveItem(t5)
call GZx(sD)
call QKe("|cffff0000"+"[ Long Môn Phi Kiếm ] Khí độc đã được xua tan, có thể vượt qua Rừng Xương Rồng, Lục Mạch Ngôn xuất hiện cản đường !",5)
set Qv=CreateUnit(zv,'n03B',GetRectCenterX(SD),GetRectCenterY(SD),270)
call uke(Qv,'n'*tH,730,$86C4,330*tH,$410,$D6D8,yB,2,5,8)
set SB=4
call EnumItemsInRect(pD,Wv,function hvx)
endif
set t1=null
set t2=null
set t3=null
set t4=null
set t5=null
endfunction
function hxx takes rect r returns nothing
local unit n
local player p
call GroupEnumUnitsInRect(sv,r,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
set p=GetOwningPlayer(n)
if p==zv then
call FlushChildHashtable(UH,GetHandleId(n))
call FlushChildHashtable(ht,GetHandleId(n))
call RemoveUnit(n)
endif
call GroupRemoveUnit(sv,n)
endloop
set p=null
set n=null
endfunction
function hox takes integer id,rect r,integer hrx returns nothing
local integer i=1
loop
exitwhen i>hrx
set Qv=CreateUnit(zv,id,tse(r),tSe(r),270)
call uHe(Qv,0,0,0,ec-1,ec)
set i=i+1
endloop
endfunction
function hix takes integer a,integer dv returns nothing
local integer c=1
local integer g0x=0
set dv=R2I(I2R(dv)*(1.+.5*ec)*oj)
loop
exitwhen c>6
if XJ[c]!=null then
if s1e(XJ[c],zG)then
set Uv=Player(c-1)
if ec==1 then
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],bj[5])
endif
if ec==2 then
call UnitAddItemById(OJ[c],bj[6])
if GetRandomReal(0,'d')<=30 and a==6 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=1
endif
if ec==3 then
call UnitAddItemById(OJ[c],bj[6])
call UnitAddItemById(OJ[c],bj[5])
if GetRandomReal(0,'d')<=40 and a==6 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=2
endif
if a==6 then
call UnitAddItemById(OJ[c],'I0G9')
endif
call tze(c,5,4,500)
call tfe(c,$96+$96*ec,1)
call tFe(c,$2710+5000*ec,1)
call tDe(c,R2I(($96+75*ec)*oj),1)
call tHe(c,$4E20+5000*ec,1)
call tke(c,5,dv,1)
call tye(c,9+g0x)
call Toe(Uv,$4E20+5000*ec,R2I(($96+75*ec)*oj),$2710+5000*ec,$96+$96*ec,dv,5)
endif
endif
set c=c+1
endloop
endfunction
function hax takes unit u,integer i,unit v,integer id,real x,real y returns nothing
if id=='n08U' then
call tUe('I054',x,y,5.5)
set YB=YB-1
if YB==0 then
call QKe("|cffff0000"+"[ Lương Sơn Bạc ] Hắc Toàn Phong Lý Quỳ xuất hiện !",5)
set Qv=CreateUnit(zv,'n08O',GetRectCenterX(pG),GetRectCenterY(pG),270)
call uke(Qv,$82*tH,780,$927C,330*tH,$410,$D6D8,ec,4,6,8)
set zB=2
endif
elseif id=='n08O' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call cqx(OJ[i],2,6)
call hix(1,300)
if ec==1 then
call tWe(bj[4],x,y,GetRandomInt(1,2))
call tWe(bj[5],x,y,2)
endif
if ec==2 then
call tUe(Zj[6],x,y,20)
call CreateItem(bj[4],x,y)
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
endif
if ec==3 then
call tUe(Zj[8],x,y,20)
call tWe(bj[5],x,y,GetRandomInt(2,3))
call CreateItem(bj[6],x,y)
endif
call QKe("|cffff0000"+"[ Lương Sơn Bạc ] Tiêu diệt 20 Lương Sơn Cung Thủ !",5)
call hox('n08V',TG,20)
set YB=20
set zB=3
elseif id=='n08V' then
set YB=YB-1
if YB==0 then
call QKe("|cffff0000"+"[ Lương Sơn Bạc ] Tiểu Lý Quảng Hoa Vinh xuất hiện !",5)
set Qv=CreateUnit(zv,'n08P',GetRectCenterX(PG),GetRectCenterY(PG),270)
call uke(Qv,$9B*tH,830,$9E34,350*tH,$424,$DEA8,ec,4,6,8)
set zB=4
endif
elseif id=='n08P' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call cqx(OJ[i],2,6)
call hix(2,400)
if ec==1 then
call tWe(bj[4],x,y,GetRandomInt(2,3))
call tWe(bj[5],x,y,2)
endif
if ec==2 then
call tUe(Zj[6],x,y,25)
call CreateItem(bj[4],x,y)
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
endif
if ec==3 then
call tUe(Zj[8],x,y,25)
call tWe(bj[5],x,y,GetRandomInt(1,2))
call tWe(bj[6],x,y,2)
endif
call QKe("|cffff0000"+"[ Lương Sơn Bạc ] Hoa Hòa Thượng Lỗ Trí Thâm xuất hiện !",5)
set Qv=CreateUnit(zv,'n08Q',GetRectCenterX(qG),GetRectCenterY(qG),270)
call uke(Qv,$AF*tH,870,$A9EC,420*tH,$442,$F618,ec,5,6,8)
set zB=5
elseif id=='n08Q' then
call cqx(OJ[i],2,6)
call hix(3,500)
if ec==1 then
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
endif
if ec==2 then
call tUe(Zj[6],x,y,30)
call CreateItem(bj[4],x,y)
call tWe(bj[5],x,y,2)
call CreateItem(bj[6],x,y)
endif
if ec==3 then
call tUe(Zj[8],x,y,30)
call tWe(bj[5],x,y,GetRandomInt(2,3))
call tWe(bj[6],x,y,2)
endif
call QKe("|cffff0000"+"[ Lương Sơn Bạc ] Tiêu diệt 4 tên Lính Báo Hiệu ở Lương Sơn Bạc !",5)
set Qv=CreateUnit(zv,'n08W',GetRectCenterX(uG),GetRectCenterY(uG),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uHe(Qv,0,0,0,ec-1,ec)
set Qv=CreateUnit(zv,'n08W',GetRectCenterX(UG),GetRectCenterY(UG),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uHe(Qv,0,0,0,ec-1,ec)
set Qv=CreateUnit(zv,'n08W',GetRectCenterX(wG),GetRectCenterY(wG),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uHe(Qv,0,0,0,ec-1,ec)
set Qv=CreateUnit(zv,'n08W',GetRectCenterX(WG),GetRectCenterY(WG),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uHe(Qv,0,0,0,ec-1,ec)
set YB=4
set zB=6
elseif id=='n08W' then
call tUe('I054',x,y,8.5)
set YB=YB-1
if YB==0 then
call QKe("|cffff0000"+"[ Lương Sơn Bạc ] Báo Tử Đầu Lâm Xung xuất hiện !",5)
set Qv=CreateUnit(zv,'n08R',GetRectCenterX(QG),GetRectCenterY(QG),270)
call uke(Qv,$C3*tH,910,$B3B0,520*tH,$46A,69000,ec,5,7,9)
set zB=7
endif
elseif id=='n08R' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call cqx(OJ[i],3,6)
call hix(4,600)
if ec==1 then
call tWe(bj[4],x,y,GetRandomInt(1,2))
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
endif
if ec==2 then
call w8e($D,GetRandomInt(1,5),x,y)
call tUe(Zj[6],x,y,40)
call tWe(bj[4],x,y,GetRandomInt(1,2))
call tWe(bj[5],x,y,3)
call CreateItem(bj[6],x,y)
endif
if ec==3 then
call tUe(Zj[8],x,y,35)
call tWe(bj[5],x,y,GetRandomInt(1,2))
call tWe(bj[6],x,y,3)
endif
call hox('n08X',yG,20)
call QKe("|cffff0000"+"[ Lương Sơn Bạc ] Trí Đa Tinh Ngô Dụng xuất hiện !",5)
set Qv=CreateUnit(zv,'n08S',GetRectCenterX(sG),GetRectCenterY(sG),270)
call uke(Qv,$F0*tH,960,$BF68,580*tH,$488,74000,ec,5,7,9)
set zB=8
elseif id=='n08S' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call cqx(OJ[i],3,6)
call hix(5,700)
if ec==1 then
call tWe(bj[4],x,y,GetRandomInt(2,3))
call tWe(bj[5],x,y,2)
call CreateItem(bj[6],x,y)
endif
if ec==2 then
call w8e($D,GetRandomInt(1,5),x,y)
call tUe(Zj[6],x,y,50)
call tWe(bj[4],x,y,GetRandomInt(2,3))
call CreateItem(bj[5],x,y)
call tWe(bj[6],x,y,2)
endif
if ec==3 then
call tUe(Zj[8],x,y,40)
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[6],x,y)
call CreateItem(bj[7],x,y)
endif
call QKe("|cffff0000"+"[ Lương Sơn Bạc ] Phá hủy Hảo Hán Kỳ ở Lương Sơn !",5)
set Qv=CreateUnit(zv,'n08Y',GetRectCenterX(YG),GetRectCenterY(YG),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uHe(Qv,0,0,0,ec-1,ec)
set zB=9
elseif id=='n08Y' then
call QKe("|cffff0000"+"[ Lương Sơn Bạc ] Hô Bảo Nghĩa Tống Giang xuất hiện !",5)
set Qv=CreateUnit(zv,'n08T',GetRectCenterX(SG),GetRectCenterY(SG),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,300*tH,$3F2,$CB20,740*tH,$4B0,79000,ec,6,8,9)
if ec>=3 then
call uJe(Qv)
endif
set zB=$A
elseif id=='n08T' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v)+", kết thúc vượt ải Lương Sơn Bạc",5)
if Bhe[(i)*(8)+6]==3 then
call Crx(u,i,6,3)
endif
call cqx(OJ[i],3,6)
call hix(6,$3E8)
if ec==1 then
call t6e(i,$D,1)
call CreateItem(mj[3],x,y)
call tWe(bj[4],x,y,GetRandomInt(1,2))
call tWe(bj[5],x,y,2)
call tWe(bj[6],x,y,3)
endif
if ec==2 then
call t6e(i,$D,2)
call w8e($D,GetRandomInt(1,5),x,y)
call CreateItem(mj[4],x,y)
call CreateItem(Zj[6],x,y)
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[6],x,y)
call CreateItem(bj[7],x,y)
endif
if ec==3 then
call t6e(i,$D,3)
call CreateItem(mj[6],x,y)
call tUe(Zj[8],x,y,45)
call tWe(bj[5],x,y,GetRandomInt(1,2))
call tWe(bj[6],x,y,3)
call tWe(bj[7],x,y,2)
endif
set zB=$B
endif
endfunction
function hnx takes nothing returns boolean
local integer CGe=Qce()
set XNe[CGe]=XNe[CGe]-1
if XNe[CGe]<=0 then
call QDe()
set tv=zG
call Txe(tv)
set mv=1
loop
exitwhen mv>6
if XJ[mv]!=null and s1e(XJ[mv],tv)then
call gKx(XJ[mv],Kd)
endif
set mv=mv+1
endloop
call DAe(CGe)
endif
return false
endfunction
function hVx takes nothing returns nothing
local integer CGe=DIe()
set XNe[CGe]=30
call QIe(CGe,1.,true,function hnx)
endfunction
function hEx takes nothing returns boolean
local integer CGe=Qce()
set XCe[CGe]=XCe[CGe]-1
if XCe[CGe]<=0 or zB==$B then
call QDe()
set zB=0
set vc=false
call QKe("|cffff0000"+"[ Hoạt Động ] Phụ bản Lương Sơn Bạc đã kết thúc !",5)
call hxx(zG)
call hVx()
call DestroyTimerDialog(XDe[CGe])
call DestroyTimer(Xde[CGe])
set Xde[CGe]=null
set XDe[CGe]=null
call DRe(CGe)
endif
return false
endfunction
function hXx takes integer lv returns nothing
local integer CGe=DOe()
set ec=lv
set vc=true
set Xde[CGe]=CreateTimer()
set XCe[CGe]=$708
call TimerStart(Xde[CGe],XCe[CGe],false,null)
set XDe[CGe]=CreateTimerDialog(Xde[CGe])
call TimerDialogSetTitle(XDe[CGe],"["+I2S(lv)+"*] Lương Sơn Bạc")
call TimerDialogDisplay(XDe[CGe],true)
call hox('n08U',tG,20)
set YB=20
set zB=1
call QIe(CGe,1.,true,function hEx)
endfunction
function hOx takes player p,integer i,item t returns boolean
local integer lv=S2I(BlzGetItemDescription(t))
if not ZB then
if not vc then
set ZB=true
call hXx(lv)
call QKe(rj[i]+"|cffffcc00"+" đã khiêu chiến Lương Sơn Bạc - "+Fj[lv],5)
else
call Qke(p,"|cffffcc00"+"Phụ bản đã được khiêu chiến trước đó !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản này chỉ có thể mở 1 lần trong mỗi trận !",5)
endif
call RemoveItem(t)
return false
endfunction
function hRx takes nothing returns boolean
local integer CGe=Qce()
local real a=GetUnitFacing(Xhe[CGe])
call Dlx(Xhe[CGe],XHe[CGe],XHe[CGe],'d',a)
call Dlx(Xhe[CGe],XHe[CGe],XHe[CGe],'d',a+$F)
call Dlx(Xhe[CGe],XHe[CGe],XHe[CGe],'d',a+30)
call Dlx(Xhe[CGe],XHe[CGe],XHe[CGe],'d',a+45)
call Dlx(Xhe[CGe],XHe[CGe],XHe[CGe],'d',a+60)
call Dlx(Xhe[CGe],XHe[CGe],XHe[CGe],'d',a-$F)
call Dlx(Xhe[CGe],XHe[CGe],XHe[CGe],'d',a-30)
call Dlx(Xhe[CGe],XHe[CGe],XHe[CGe],'d',a-45)
call Dlx(Xhe[CGe],XHe[CGe],XHe[CGe],'d',a-60)
set XGe[CGe]=XGe[CGe]-1
if XGe[CGe]<=0 or spe(Xhe[CGe])then
call QDe()
set Xhe[CGe]=null
call DXe(CGe)
endif
return false
endfunction
function hIx takes unit u,real d returns nothing
local integer CGe=DEe()
set Xhe[CGe]=u
set XHe[CGe]=d
set XGe[CGe]=5
call QIe(CGe,.5,true,function hRx)
endfunction
function hAx takes nothing returns boolean
local integer CGe=Qce()
set XKe[CGe]=XKe[CGe]-1
if XKe[CGe]==0 then
set XKe[CGe]=5
call IssuePointOrderById(ic[1],$D000F,tse(Yf),tSe(Yf))
call IssuePointOrderById(ic[2],$D000F,tse(Yf),tSe(Yf))
call IssuePointOrderById(ic[3],$D000F,tse(Yf),tSe(Yf))
call IssuePointOrderById(ic[4],$D000F,tse(Yf),tSe(Yf))
endif
if oc!=5 then
call QDe()
call RemoveUnit(ic[1])
call RemoveUnit(ic[2])
call RemoveUnit(ic[3])
set ic[1]=null
set ic[2]=null
set ic[3]=null
call DVe(CGe)
endif
return false
endfunction
function hNx takes nothing returns nothing
local integer CGe=Dne()
set XKe[CGe]=5
call QIe(CGe,1.,true,function hAx)
endfunction
function hbx takes rect r returns nothing
local unit n
local player p
call GroupEnumUnitsInRect(sv,r,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
set p=GetOwningPlayer(n)
if p==zv then
call FlushChildHashtable(UH,GetHandleId(n))
call FlushChildHashtable(ht,GetHandleId(n))
call RemoveUnit(n)
endif
call GroupRemoveUnit(sv,n)
endloop
set p=null
set n=null
endfunction
function hBx takes nothing returns nothing
local unit n
call GroupEnumUnitsInRect(sv,rF,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if GetUnitTypeId(n)=='n04L' then
call UnitRemoveAbility(n,'A0HL')
call Tje(n,6729,-2.)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
endfunction
function hcx takes integer id,rect r,integer hCx returns nothing
local integer i=1
loop
exitwhen i>hCx
set Qv=CreateUnit(zv,id,tse(r),tSe(r),270)
call uHe(Qv,0,0,0,Vc-1,Vc)
set i=i+1
endloop
endfunction
function hdx takes integer a,integer dv returns nothing
local integer c=1
local integer g0x=0
set dv=R2I(I2R(dv)*(1.+.5*Vc)*oj)
loop
exitwhen c>6
if XJ[c]!=null then
if s1e(XJ[c],rF)then
set Uv=Player(c-1)
if Vc==1 then
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],bj[5])
endif
if Vc==2 then
call UnitAddItemById(OJ[c],bj[6])
if GetRandomReal(0,'d')<=30 and a==5 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=1
endif
if Vc==3 then
call UnitAddItemById(OJ[c],bj[6])
call UnitAddItemById(OJ[c],bj[5])
if GetRandomReal(0,'d')<=40 and a==5 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=2
endif
if a==5 then
call UnitAddItemById(OJ[c],'I0G9')
endif
call tze(c,5,1,500)
call t_e(c,$C8,Vc)
call tFe(c,$2710+5000*Vc,1)
call tDe(c,R2I(($96+75*Vc)*oj),1)
call tHe(c,$4E20+5000*Vc,1)
call tke(c,3,dv,1)
call tye(c,$A+g0x)
call Toe(Uv,$4E20+5000*Vc,R2I(($96+75*Vc)*oj),$2710+5000*Vc,TH,dv,3)
endif
endif
set c=c+1
endloop
endfunction
function hDx takes unit u,integer i,unit v,integer id,real x,real y returns nothing
if id=='n049' then
call tUe('I054',x,y,8.5)
set xc=xc-1
if xc==0 then
call QKe("|cffff0000"+"[ Minh Linh Đình Viện ] Bách Thảo Ông xuất hiện !",5)
call QKe("|cffff0000"+"- Bách Thảo Ông: kẻ nào to gan dám phá nát vườn hoa của ta !",5)
set Qv=CreateUnit(zv,'n04P',GetRectCenterX(Qf),GetRectCenterY(Qf),270)
call uke(Qv,$DC*tH,940,$B98C,500*tH,$460,68000,Vc,5,7,9)
set oc=2
endif
elseif id=='n04P' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call cqx(OJ[i],2,6)
call hdx(1,300)
if Vc==1 then
if GetRandomReal(0,'d')<=50 then
call w7e(1,1,x,y)
endif
call tWe(bj[4],x,y,GetRandomInt(1,2))
call tWe(bj[5],x,y,3)
endif
if Vc==2 then
call tUe(Zj[7],x,y,20)
if GetRandomReal(0,'d')<=50 then
call w7e(2,1,x,y)
endif
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[6],x,y)
endif
if Vc==3 then
call tUe(Zj[8],x,y,20)
call w7e(3,1,x,y)
if GetRandomReal(0,'d')<=$F then
call w7e(4,1,x,y)
endif
call CreateItem(bj[5],x,y)
call CreateItem(bj[7],x,y)
endif
call QKe("|cffff0000"+"[ Minh Linh Đình Viện ] Tiến vào Đầm Bắc Hoàng phá hủy 5 Minh Linh Đăng Tọa !",5)
set Qv=CreateUnit(zv,'n04M',GetRectCenterX(Sf),GetRectCenterY(Sf),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uHe(Qv,0,0,0,Vc-1,Vc)
set Qv=CreateUnit(zv,'n04M',GetRectCenterX(tf),GetRectCenterY(tf),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uHe(Qv,0,0,0,Vc-1,Vc)
set Qv=CreateUnit(zv,'n04M',GetRectCenterX(Tf),GetRectCenterY(Tf),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uHe(Qv,0,0,0,Vc-1,Vc)
set Qv=CreateUnit(zv,'n04M',GetRectCenterX(uf),GetRectCenterY(uf),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uHe(Qv,0,0,0,Vc-1,Vc)
set Qv=CreateUnit(zv,'n04M',GetRectCenterX(Uf),GetRectCenterY(Uf),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uHe(Qv,0,0,0,Vc-1,Vc)
set xc=5
set oc=3
elseif id=='n04M' then
set xc=xc-1
if xc==0 then
call QKe("|cffff0000"+"[ Minh Linh Đình Viện ] Nguyên Hoàng xuất hiện !",5)
call QKe("|cffff0000"+"- Nguyên Hoàng: việc của Ngũ Tiên Giáo, ai cho ngươi nhúng tay vào !",5)
set Qv=CreateUnit(zv,'n04Q',GetRectCenterX(wf),GetRectCenterY(wf),270)
call uke(Qv,$E6*tH,950,$BB80,520*tH,$46A,69000,Vc,5,7,9)
set oc=4
endif
elseif id=='n04Q' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call cqx(OJ[i],2,6)
call hdx(2,400)
call tUe('I0AD',x,y,20+$A*(Vc-1))
if Vc==1 then
if GetRandomReal(0,'d')<=50 then
call w7e(1,2,x,y)
endif
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
endif
if Vc==2 then
call tUe(Zj[7],x,y,25)
if GetRandomReal(0,'d')<=50 then
call w7e(2,2,x,y)
endif
call tWe(bj[5],x,y,GetRandomInt(1,2))
call tWe(bj[6],x,y,2)
endif
if Vc==3 then
call tUe(Zj[8],x,y,25)
call w7e(3,2,x,y)
if GetRandomReal(0,'d')<=$F then
call w7e(4,2,x,y)
endif
call tWe(bj[5],x,y,2)
call CreateItem(bj[7],x,y)
endif
call QKe("|cffff0000"+"[ Minh Linh Đình Viện ] Tiếng sói tru dữ dội, là sinh cơ hay tử địa, vượt qua mê cung bảo thất vào Nhà Ngục Hỏa Lang Vương !",5)
set ic[1]=CreateUnit(zv,'n04U',GetRectCenterX(sf),GetRectCenterY(sf),270)
set ic[2]=CreateUnit(zv,'n04U',GetRectCenterX(Wf),GetRectCenterY(Wf),270)
set ic[3]=CreateUnit(zv,'n04U',GetRectCenterX(yf),GetRectCenterY(yf),270)
set ic[4]=CreateUnit(zv,'n04U',GetRectCenterX(iF),GetRectCenterY(iF),270)
set Qv=CreateUnit(zv,'n04N',GetRectCenterX(xF),GetRectCenterY(xF),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uHe(Qv,0,0,0,Vc-1,Vc)
set oc=5
call hNx()
elseif id=='n04N' then
call QKe("|cffff0000"+"[ Minh Linh Đình Viện ] Trấn Hồn Đăng bị phá vỡ, toàn bộ cơ quan đã bị vô hiệu, Hỏa Lang Vương xuất hiện !",5)
set Qv=CreateUnit(zv,'n04R',GetRectCenterX(aF),GetRectCenterY(aF),270)
call uke(Qv,320*tH,$406,$D2F0,560*tH,$47E,73000,Vc,6,8,9)
set oc=6
elseif id=='n04R' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call cqx(OJ[i],2,6)
call hdx(3,500)
call tUe('I0AD',x,y,30+$A*(Vc-1))
call CreateItem('I06A',x,y)
if Vc==1 then
call w7e(1,1,x,y)
call tWe(bj[4],x,y,GetRandomInt(1,2))
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
call w8e($C,GetRandomInt(1,5),x,y)
endif
if Vc==2 then
call tUe(Zj[7],x,y,30)
call w7e(2,1,x,y)
if GetRandomReal(0,'d')<=30 then
call w7e(3,1,x,y)
endif
call tWe(bj[5],x,y,GetRandomInt(2,3))
call tWe(bj[6],x,y,2)
endif
if Vc==3 then
call tUe(Zj[8],x,y,30)
call w7e(3,1,x,y)
if GetRandomReal(0,'d')<=50 then
call w7e(4,1,x,y)
endif
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
call CreateItem(bj[7],x,y)
endif
call QKe("|cffff0000"+"[ Minh Linh Đình Viện ] Tiến vào Thị Nguyệt Chiểu, trông thấy ánh mắt u buồn của một cô gái, tiêu diệt toàn bộ trùng độc trong vườn hoa !",5)
call hcx('n04K',zf,$C)
set xc=$C
set oc=7
elseif id=='n04K' then
call tUe('I054',x,y,2.5)
set xc=xc-1
if xc==0 then
if oc>=7 and oc<$A then
set oc=oc+1
call hcx('n04K',zf,$C)
set xc=$C
elseif oc==$A then
call QKe("|cffff0000"+"[ Minh Linh Đình Viện ] Ngâm Hà xuất hiện !",5)
call QKe("|cffff0000"+"- Ngâm Hà: hắn đã vì ta mà trồng nên vườn hoa này, các ngươi đi đi đừng khiến ta nổi giận !",5)
set Qv=CreateUnit(zv,'n04S',GetRectCenterX(Zf),GetRectCenterY(Zf),270)
call uke(Qv,350*tH,$424,$DEA8,580*tH,$488,74000,Vc,6,8,9)
set oc=$B
endif
endif
elseif id=='n04S' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call cqx(OJ[i],3,6)
call hdx(4,700)
call tUe('I0AD',x,y,50+$A*(Vc-1))
call tUe('I06A',x,y,2)
if Vc==1 then
call w7e(1,2,x,y)
call tWe(bj[4],x,y,GetRandomInt(1,2))
call tWe(bj[5],x,y,2)
call CreateItem(bj[6],x,y)
call w8e($C,GetRandomInt(1,5),x,y)
endif
if Vc==2 then
call tUe(Zj[7],x,y,35)
call w7e(2,2,x,y)
if GetRandomReal(0,'d')<=30 then
call w7e(3,2,x,y)
endif
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
call CreateItem(bj[7],x,y)
endif
if Vc==3 then
call tUe(Zj[8],x,y,35)
call w7e(3,2,x,y)
if GetRandomReal(0,'d')<=50 then
call w7e(4,2,x,y)
endif
call tWe(bj[5],x,y,2)
call tWe(bj[6],x,y,2)
call CreateItem(bj[7],x,y)
endif
call QKe("|cffff0000"+"[ Minh Linh Đình Viện ] Phía trước là Minh Linh Tâm Điện, tiêu diệt toàn bộ Minh Linh Sứ !",5)
call QKe("|cffff0000"+"[ Minh Linh Đình Viện ] Cẩn thận Minh Linh Sứ có thể phản đòn sát thương, tìm và phá hủy U Minh Đăng Tọa để xóa bỏ trạng thái phản đòn !",5)
call hcx('n04L',vF,20)
set xc=20
set Qv=CreateUnit(zv,'n04O',GetRectCenterX(xF),GetRectCenterY(xF),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uHe(Qv,0,0,0,Vc-1,Vc)
set oc=$C
elseif id=='n04O' then
call hBx()
call QKe("|cffff0000"+"[ Minh Linh Đình Viện ] Trạng thái phản đòn sát thương đã bị xóa bỏ !",5)
elseif id=='n04L' then
call tUe('I054',x,y,5.5)
set xc=xc-1
if xc==0 then
call QKe("|cffff0000"+"[ Minh Linh Đình Viện ] Thiên Cơ Quỷ Quái xuất hiện !",5)
call QKe("|cffff0000"+"- Thiên Cơ Quỷ Quái: tiểu tử, thiên đường có lối ngươi không đi, lại xông vào chốn địa ngục này, đừng trách lão phu !",5)
set Qv=CreateUnit(zv,'n04T',GetRectCenterX(eF),GetRectCenterY(eF),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,450*tH,$44C,$FDE8,740*tH,$4B0,79000,Vc,6,8,9)
if Vc>=2 then
call uJe(Qv)
endif
set oc=$D
endif
elseif id=='n04T' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v)+" kết thúc vượt ải Minh Linh Đình Viện",5)
if Bhe[(i)*(8)+7]==5 then
call Crx(u,i,7,5)
endif
call cqx(OJ[i],3,6)
call tUe('I06A',x,y,GetRandomInt(3,4))
call CreateItem('I01P',x,y)
if Vc==1 then
call w7e(1,3,x,y)
call CreateItem(mj[4],x,y)
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[6],x,y)
call CreateItem(bj[7],x,y)
call w8e($C,GetRandomInt(1,5),x,y)
call t6e(i,9,1)
endif
if Vc==2 then
call tUe(Zj[7],x,y,40)
call CreateItem(mj[5],x,y)
call w7e(2,3,x,y)
if GetRandomReal(0,'d')<=30 then
call w7e(3,3,x,y)
endif
call tWe(bj[5],x,y,GetRandomInt(1,2))
call tWe(bj[6],x,y,2)
call tWe(bj[7],x,y,2)
call t6e(i,9,2)
endif
if Vc==3 then
call CreateItem('I0JB',x,y)
call CreateItem(mj[6],x,y)
call tUe(Zj[8],x,y,40)
call UnitAddItemById(OJ[i],'I09S')
call CreateItem('I04D',x,y)
call w7e(3,3,x,y)
call w7e(4,3,x,y)
call w7e(4,2,x,y)
call w7e(4,1,x,y)
call tWe(bj[6],x,y,2)
call tWe(bj[7],x,y,2)
call CreateItem(bj[8],x,y)
call t6e(i,9,3)
endif
call CreateItem('I0AD',x,y)
if Nk>=3 then
call CreateItem('I01P',x,y)
endif
call hdx(5,$3E8)
set oc=$E
endif
endfunction
function hfx takes nothing returns boolean
local integer CGe=Qce()
set XMe[CGe]=XMe[CGe]-1
if XMe[CGe]<=0 then
call QDe()
set tv=rF
call Txe(tv)
set mv=1
loop
exitwhen mv>6
if XJ[mv]!=null and s1e(XJ[mv],tv)then
call gKx(XJ[mv],Kd)
endif
set mv=mv+1
endloop
call Dae(CGe)
endif
return false
endfunction
function hFx takes nothing returns nothing
local integer CGe=Die()
set XMe[CGe]=30
call QIe(CGe,1.,true,function hfx)
endfunction
function hgx takes nothing returns boolean
local integer CGe=Qce()
set XQe[CGe]=XQe[CGe]-1
if XQe[CGe]<=0 or oc==$E then
call QDe()
set oc=0
set nc=false
call QKe("|cffff0000"+"[ Hoạt Động ] Phụ bản Minh Linh Đình Viện đã kết thúc !",5)
call hbx(rF)
call hFx()
call DestroyTimerDialog(XSe[CGe])
call DestroyTimer(Xse[CGe])
set Xse[CGe]=null
set XSe[CGe]=null
call Dre(CGe)
endif
return false
endfunction
function hGx takes integer lv returns nothing
local integer CGe=Doe()
set Vc=lv
set nc=true
set Xse[CGe]=CreateTimer()
set XQe[CGe]=$960
call TimerStart(Xse[CGe],XQe[CGe],false,null)
set XSe[CGe]=CreateTimerDialog(Xse[CGe])
call TimerDialogSetTitle(XSe[CGe],"["+I2S(lv)+"*] Minh Linh Đình Viện")
call TimerDialogDisplay(XSe[CGe],true)
call hcx('n049',qf,20)
set xc=20
set oc=1
call QIe(CGe,1.,true,function hgx)
endfunction
function hhx takes player p,integer i,item t returns boolean
local integer lv=S2I(BlzGetItemDescription(t))
if not ac then
if not nc then
set ac=true
call hGx(lv)
call QKe(rj[i]+"|cffffcc00"+" đã khiêu chiến Minh Linh Đình Viện - "+Fj[lv],5)
else
call Qke(p,"|cffffcc00"+"Phụ bản đã được khiêu chiến trước đó !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản này chỉ có thể mở 1 lần trong mỗi trận !",5)
endif
call RemoveItem(t)
return false
endfunction
function hHx takes nothing returns boolean
local integer CGe=Qce()
call C7x(Xwe[CGe],XWe[CGe])
set XUe[CGe]=XUe[CGe]-1
if XUe[CGe]<=0 or spe(Xwe[CGe])then
call QDe()
set Xwe[CGe]=null
call Dxe(CGe)
endif
return false
endfunction
function hjx takes unit u,real d returns nothing
local integer CGe=Dee()
set Xwe[CGe]=u
set XWe[CGe]=d
set XUe[CGe]=3
call QIe(CGe,1.,true,function hHx)
endfunction
function hJx takes rect r returns nothing
local unit n
local player p
call GroupEnumUnitsInRect(sv,r,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
set p=GetOwningPlayer(n)
if p==zv and GetUnitTypeId(n)!='n02D' then
call FlushChildHashtable(UH,GetHandleId(n))
call FlushChildHashtable(ht,GetHandleId(n))
call RemoveUnit(n)
endif
call GroupRemoveUnit(sv,n)
endloop
set p=null
set n=null
endfunction
function hkx takes integer id,rect r,integer hKx returns nothing
local integer i=1
loop
exitwhen i>hKx
set Qv=CreateUnit(zv,id,tse(r),tSe(r),270)
call uHe(Qv,0,0,0,Ic-1,Ic)
set i=i+1
endloop
endfunction
function hlx takes integer a,integer dv returns nothing
local integer c=1
local integer g0x=0
set dv=R2I(I2R(dv)*(1.+.5*Ic)*oj)
loop
exitwhen c>6
if XJ[c]!=null then
if s1e(XJ[c],wd)then
set Uv=Player(c-1)
if Ic==1 then
call UnitAddItemById(OJ[c],bj[4])
call UnitAddItemById(OJ[c],bj[4])
endif
if Ic==2 then
call UnitAddItemById(OJ[c],bj[5])
if GetRandomReal(0,'d')<=20 and a==5 then
call UnitAddItemById(OJ[c],iJ[6])
endif
endif
if Ic==3 then
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],bj[4])
if GetRandomReal(0,'d')<=30 and a==5 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=1
endif
if a==5 then
call UnitAddItemById(OJ[c],'I0G9')
endif
call tze(c,2,2,$96)
call t_e(c,80,Ic)
call tFe(c,$9C4*a+$9C4*Ic,1)
call tDe(c,R2I((70+30*Ic)*oj),1)
call tHe(c,5000+5000*Ic,1)
call tke(c,2,dv,1)
call tye(c,5+g0x)
call Toe(Uv,5000+5000*Ic,R2I((70+30*Ic)*oj),$9C4*a+$9C4*Ic,TH,dv,2)
endif
endif
set c=c+1
endloop
endfunction
function hLx takes unit u,integer i,unit v,integer id,real x,real y returns nothing
if id=='n027' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v)+", vượt qua Sát Thủ Đường ải 1",5)
call tUe(Zj[1],x,y,20)
call hlx(1,'d')
call cqx(OJ[i],2,3)
if Ic==1 then
call tUe('I05M',x,y,30)
call tWe(bj[3],x,y,GetRandomInt(1,2))
call CreateItem(bj[4],x,y)
endif
if Ic==2 then
call tUe('I05N',x,y,20)
call CreateItem(bj[4],x,y)
call CreateItem(bj[5],x,y)
endif
if Ic==3 then
call tUe('I05O',x,y,20)
call tWe(bj[4],x,y,GetRandomInt(1,2))
call tWe(bj[5],x,y,2)
endif
call QKe("|cffff0000"+"[ Sát Thủ Đường ] ải 2 đã mở !",5)
set Qv=CreateUnit(zv,'n028',GetRectCenterX(Zd),GetRectCenterY(Zd),270)
call uke(Qv,18.5*tH,340,$30D4,79*tH,640,$7530,Ic,0,2,5)
set Ec=2
elseif id=='n028' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v)+", vượt qua Sát Thủ Đường ải 2",5)
call tUe(Zj[1],x,y,25)
call hlx(2,$C8)
call cqx(OJ[i],2,3)
if Ic==1 then
call tUe('I05M',x,y,40)
call tWe(bj[3],x,y,GetRandomInt(1,2))
call CreateItem(bj[4],x,y)
endif
if Ic==2 then
call tUe('I05N',x,y,30)
call tWe(bj[4],x,y,GetRandomInt(1,2))
call CreateItem(bj[5],x,y)
endif
if Ic==3 then
call tUe('I05O',x,y,30)
call tWe(bj[4],x,y,GetRandomInt(2,3))
call tWe(bj[5],x,y,2)
endif
call QKe("|cffff0000"+"[ Sát Thủ Đường ] ải 3 đã mở !",5)
call hkx('n025',zd,$F)
set Qv=CreateUnit(zv,'n029',GetRectCenterX(vD),GetRectCenterY(vD),270)
call uke(Qv,26*tH,430,$4268,'s'*tH,750,$8AAC,Ic,1,3,6)
call CreateUnit(zv,'n02D',GetRectCenterX(iD),GetRectCenterY(iD),270)
set Ec=3
elseif id=='n029' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v)+", vượt qua Sát Thủ Đường ải 3",5)
call tUe(Zj[1],x,y,30)
call cqx(OJ[i],2,4)
call hlx(3,300)
if Ic==1 then
call tUe('I05M',x,y,50)
call tWe(bj[3],x,y,GetRandomInt(1,2))
call tWe(bj[4],x,y,2)
endif
if Ic==2 then
call tUe('I05N',x,y,40)
call tUe('I00W',x,y,30)
call tWe(bj[4],x,y,GetRandomInt(2,3))
call CreateItem(bj[5],x,y)
endif
if Ic==3 then
call tUe('I05O',x,y,40)
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
endif
call QKe("|cffff0000"+"[ Sát Thủ Đường ] ải 4 đã mở !",5)
set Qv=CreateUnit(zv,'n02A',GetRectCenterX(eD),GetRectCenterY(eD),270)
call uke(Qv,32*tH,470,$4A38,'x'*tH,760,$8E94,Ic,1,3,6)
call CreateUnit(zv,'n02D',GetRectCenterX(rD),GetRectCenterY(rD),270)
set Ec=4
elseif id=='n02A' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v)+", vượt qua Sát Thủ Đường ải 4",5)
call tUe(Zj[1],x,y,35)
call cqx(OJ[i],2,4)
call hlx(4,400)
if Ic==1 then
call tUe('I05M',x,y,60)
call tWe(bj[3],x,y,GetRandomInt(2,3))
call tWe(bj[4],x,y,2)
endif
if Ic==2 then
call tUe('I05N',x,y,50)
call tUe('I01L',x,y,40)
call tUe('I00W',x,y,40)
call CreateItem('I069',x,y)
call CreateItem(bj[4],x,y)
call tWe(bj[5],x,y,2)
endif
if Ic==3 then
call tUe('I05O',x,y,50)
call CreateItem('I01L',x,y)
call CreateItem('I06A',x,y)
call tWe(bj[4],x,y,GetRandomInt(1,2))
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
endif
call QKe("|cffff0000"+"[ Sát Thủ Đường ] ải 5 đã mở !",5)
call hkx('n026',xD,$F)
set Qv=CreateUnit(zv,'n02B',GetRectCenterX(oD),GetRectCenterY(oD),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,48*tH,570,$5DC0,$A5*tH,850,$A410,Ic,1,4,6)
call CreateUnit(zv,'n02D',GetRectCenterX(aD),GetRectCenterY(aD),270)
set Ec=5
elseif id=='n02B' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v)+", hoàn thành vượt ải Sát Thủ Đường",5)
call CreateUnit(zv,'n02D',GetRectCenterX(nD),GetRectCenterY(nD),270)
if Bhe[(i)*(8)+1]==3 then
call Crx(u,i,1,4)
endif
call tUe(Zj[1],x,y,40)
call cqx(OJ[i],3,5)
call hlx(5,500)
if Ic==1 then
call CreateItem('I046',x,y)
call CreateItem('I05M',x,y)
call CreateItem(mj[1],x,y)
call tWe(bj[3],x,y,GetRandomInt(2,3))
call tWe(bj[4],x,y,2)
call CreateItem(bj[5],x,y)
call t6e(i,2,1)
endif
if Ic==2 then
call CreateItem('I05N',x,y)
call tUe('I01L',x,y,60)
call CreateItem(mj[2],x,y)
call CreateItem('I00W',x,y)
call w8e($A,GetRandomInt(1,5),x,y)
call tWe('I069',x,y,GetRandomInt(1,2))
call tWe(bj[4],x,y,GetRandomInt(1,2))
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
call t6e(i,2,2)
endif
if Ic==3 then
call CreateItem('I05O',x,y)
call CreateItem(mj[3],x,y)
call CreateItem('I01L',x,y)
call tWe('I06A',x,y,GetRandomInt(1,2))
call w8e($B,GetRandomInt(1,5),x,y)
call tWe(bj[4],x,y,GetRandomInt(2,3))
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[6],x,y)
call t6e(i,2,3)
endif
set Ec=6
elseif id=='n024' or id=='n025' or id=='n026' then
call tUe('I054',x,y,5.)
elseif id=='n02D' then
set mv=GetRandomInt(1,8)
if cFe[(i)*(5)+1]<$96 then
set cFe[(i)*(5)+1]=cFe[(i)*(5)+1]+3
call QKe(rj[i]+"|cffffcc00"+" mở Bảo Rương Sát Thủ Đường nhận được 1 Mảnh Mặt Nạ Hiệp Khách",5)
endif
if mv==1 then
call tFe(i,$2710*Ic,1)
call QKe(rj[i]+"|cffffcc00"+" mở Bảo Rương Sát Thủ Đường nhận được "+I2S($2710*Ic)+" chân khí !",5)
elseif mv==2 then
call CreateItem(bj[4],x,y)
call QKe(rj[i]+"|cffffcc00"+" mở Bảo Rương Sát Thủ Đường rơi ra 1 Huyền Tinh 4",5)
elseif mv==3 then
call CreateItem(bj[5],x,y)
call QKe(rj[i]+"|cffffcc00"+" mở Bảo Rương Sát Thủ Đường rơi ra 1 Huyền Tinh 5",5)
elseif mv==4 then
call CreateItem(Lj[1],x,y)
call QKe(rj[i]+"|cffffcc00"+" mở Bảo Rương Sát Thủ Đường rơi ra 1 Túi Bảo Thạch 1",5)
elseif mv==5 then
call CreateItem(Lj[2],x,y)
call QKe(rj[i]+"|cffffcc00"+" mở Bảo Rương Sát Thủ Đường rơi ra 1 Túi Bảo Thạch 2",5)
elseif mv==6 then
call tDe(i,'d'*Ic,1)
call QKe(rj[i]+"|cffffcc00"+" mở Bảo Rương Sát Thủ Đường nhận được "+I2S('d'*Ic)+" uy danh !",5)
elseif mv==7 then
call tfe(i,$96*Ic,1)
call QKe(rj[i]+"|cffffcc00"+" mở Bảo Rương Sát Thủ Đường nhận được "+I2S($96*Ic)+" NHHT !",5)
else
call CreateItem('I05Z',x,y)
call QKe(rj[i]+"|cffffcc00"+" mở Bảo Rương Sát Thủ Đường rơi ra 1 Căn Cốt Đơn",5)
endif
endif
endfunction
function hmx takes nothing returns boolean
local integer CGe=Qce()
set XZe[CGe]=XZe[CGe]-1
if XZe[CGe]<=0 then
call QDe()
set tv=wd
call Txe(tv)
set mv=1
loop
exitwhen mv>6
if XJ[mv]!=null and s1e(XJ[mv],tv)then
call gKx(XJ[mv],Kd)
endif
set mv=mv+1
endloop
call Dve(CGe)
endif
return false
endfunction
function hMx takes nothing returns nothing
local integer CGe=d9e()
set XZe[CGe]=30
call QIe(CGe,1.,true,function hmx)
endfunction
function hpx takes nothing returns boolean
local integer CGe=Qce()
set X2e[CGe]=X2e[CGe]-1
if X2e[CGe]<=0 or Ec==6 then
call QDe()
set Ec=0
set Oc=false
set Rc=false
call QKe("|cffff0000"+"[ Hoạt Động ] Phụ bản Sát Thủ Đường đã kết thúc !",5)
call hJx(wd)
call hMx()
set Ac=X2e[CGe]+Xc
call DestroyTimerDialog(X4e[CGe])
call DestroyTimer(X3e[CGe])
set X3e[CGe]=null
set X4e[CGe]=null
call d8e(CGe)
endif
return false
endfunction
function hPx takes integer lv returns nothing
local integer CGe=d7e()
set Ic=lv
set Rc=true
set X3e[CGe]=CreateTimer()
set X2e[CGe]=750
set Xc=Ac+30
set Ac=X2e[CGe]
call TimerStart(X3e[CGe],X2e[CGe],false,null)
set X4e[CGe]=CreateTimerDialog(X3e[CGe])
call TimerDialogSetTitle(X4e[CGe],"["+I2S(lv)+"*] Sát Thủ Đường")
call TimerDialogDisplay(X4e[CGe],true)
call hkx('n024',yd,$F)
set Qv=CreateUnit(zv,'n027',GetRectCenterX(Yd),GetRectCenterY(Yd),270)
call uke(Qv,18*tH,330,$2EE0,78*tH,630,$733C,Ic,0,2,5)
set Ec=1
call QIe(CGe,1.,true,function hpx)
endfunction
function hqx takes player p,integer i,item t returns boolean
local integer lv=S2I(BlzGetItemDescription(t))
if Oc then
if not Rc then
call hPx(lv)
call QKe(rj[i]+"|cffffcc00"+" đã khiêu chiến Sát Thủ Đường - "+Fj[lv],5)
else
call Qke(p,"|cffffcc00"+"Phụ bản đã được khiêu chiến trước đó !",5)
endif
else
call Qke(p,"|cffffcc00"+"Hoạt động vẫn chưa mở !",5)
endif
call RemoveItem(t)
return false
endfunction
function hQx takes nothing returns boolean
local integer CGe=Qce()
set X8e[CGe]=X8e[CGe]-1
if X8e[CGe]<=0 then
call QDe()
set Oc=false
if Xc==0 then
set Ac=780
endif
call d6e(CGe)
endif
return false
endfunction
function hsx takes nothing returns boolean
local integer CGe=d5e()
set X8e[CGe]=680
set Xc=0
set Ac=680
set Oc=true
call QKe("|cffff0000"+"[ Hoạt Động ] Lối vào Sát Thủ Đường đã mở, tới Tây Tháp Lâm tìm Nam Nhân Thần Bí để tham gia !",5)
call QIe(CGe,1.,true,function hQx)
return false
endfunction
function hSx takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$5B4,true)
call TriggerAddCondition(t,Filter(function hsx))
set t=null
endfunction
function htx takes rect r returns nothing
local unit n
local player p
call GroupEnumUnitsInRect(sv,r,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
set p=GetOwningPlayer(n)
if p==zv then
call FlushChildHashtable(UH,GetHandleId(n))
call FlushChildHashtable(ht,GetHandleId(n))
call RemoveUnit(n)
endif
call GroupRemoveUnit(sv,n)
endloop
set p=null
set n=null
endfunction
function hTx takes nothing returns nothing
local integer rd=GetRandomInt(1,$C)
local rect r=null
if rd==1 then
set r=Mh
elseif rd==2 then
set r=ph
elseif rd==3 then
set r=Ph
elseif rd==4 then
set r=qh
elseif rd==5 then
set r=Qh
elseif rd==6 then
set r=sh
elseif rd==7 then
set r=Sh
elseif rd==8 then
set r=th
elseif rd==9 then
set r=uh
elseif rd==$A then
set r=Uh
elseif rd==$B then
set r=wh
else
set r=yh
endif
call CreateUnit(zv,'n0AB',tse(r),tSe(r),270)
set r=null
endfunction
function hux takes integer id,rect r,integer hUx returns nothing
local integer i=1
loop
exitwhen i>hUx
set Qv=CreateUnit(zv,id,tse(r),tSe(r),270)
call uHe(Qv,0,0,0,Dc-1,Dc)
set i=i+1
endloop
endfunction
function hwx takes integer a returns nothing
local integer c=1
local integer g0x=0
local integer hWx=30+a*4
loop
exitwhen c>6
if XJ[c]!=null then
if s1e(XJ[c],Gh)then
set Uv=Player(c-1)
if Dc==1 then
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],bj[5])
endif
if Dc==2 then
call UnitAddItemById(OJ[c],bj[6])
if a==7 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=1
set hWx=hWx+$A
endif
if Dc==3 then
call UnitAddItemById(OJ[c],bj[6])
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],bj[5])
if a==7 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=2
set hWx=hWx+20
endif
if a==7 then
call UnitAddItemById(OJ[c],'I0G9')
endif
if GetRandomReal(0,'d')<=hWx then
call UnitAddItemById(OJ[c],'I0BJ')
endif
call tze(c,6,1,500)
call tfe(c,$C8+'d'*Dc,1)
call tDe(c,R2I(($96+75*Dc)*oj),1)
call tHe(c,$4E20+5000*Dc,1)
call tye(c,8+g0x)
call Toe(Uv,$4E20+5000*Dc,R2I(($96+75*Dc)*oj),0,$C8+'d'*Dc,0,0)
endif
endif
set c=c+1
endloop
endfunction
function hyx takes unit u,integer i,unit v,integer id,real x,real y returns nothing
local integer rd=GetRandomInt(1,6)
local integer hYx=0
if id=='n0A1' then
set bc=bc-1
if bc==0 then
call QKe("|cffff0000"+"[ Thái Thạch Cơ ] Kim Quân Thống Lĩnh xuất trận !",5)
set Qv=CreateUnit(zv,'n09X',GetRectCenterX(Jh),GetRectCenterY(Jh),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,310*tH,$3FC,$CF08,920*tH,$4D8,86000,Dc,5,8,$A)
set Bc=2
endif
elseif id=='n09X' then
call hwx(1)
if Dc==1 then
call CreateItem(bj[4],x,y)
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
endif
if Dc==2 then
call CreateItem(xJ[GetRandomInt(1,8)],x,y)
call CreateItem(bj[5],x,y)
call tWe(bj[6],x,y,2)
endif
if Dc==3 then
call CreateItem(xJ[GetRandomInt(1,8)],x,y)
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[7],x,y)
endif
call QKe("|cffff0000"+"[ Thái Thạch Cơ ] Kim Quân Thống Lĩnh bị đánh bại, phá hủy 4 Chiến Kỳ của Quân Kim đặt ở Thái Thạch Cơ và toàn bộ kẻ địch !",5)
set Qv=CreateUnit(zv,'n0A7',GetRectCenterX(Hh),GetRectCenterY(Hh),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,$C8*tH,600,1,300*tH,900,1,Dc,5,8,$A)
set Qv=CreateUnit(zv,'n0A7',GetRectCenterX(jh),GetRectCenterY(jh),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,$C8*tH,600,1,300*tH,900,1,Dc,5,8,$A)
set Qv=CreateUnit(zv,'n0A7',GetRectCenterX(Lh),GetRectCenterY(Lh),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,$C8*tH,600,1,300*tH,900,1,Dc,5,8,$A)
set Qv=CreateUnit(zv,'n0A7',GetRectCenterX(mh),GetRectCenterY(mh),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,$C8*tH,600,1,300*tH,900,1,Dc,5,8,$A)
call hux('n0A2',qh,6)
call hux('n0A2',Qh,6)
call hux('n0A2',sh,6)
call hux('n0A2',Sh,6)
call hTx()
set bc=28
set Bc=3
elseif id=='n0A7' or id=='n0A2' then
if Bc==3 then
if id=='n0A7' then
call QKe("|cffff0000"+"[ Thái Thạch Cơ ] Chiến Kỳ Quân Kim đã bị phá huy !",5)
endif
set bc=bc-1
if bc==0 then
call hwx(2)
if Dc==1 then
call CreateItem(bj[4],x,y)
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
endif
if Dc==2 then
call tWe(bj[5],x,y,GetRandomInt(2,3))
call tWe(bj[6],x,y,2)
endif
if Dc==3 then
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[6],x,y)
call CreateItem(bj[7],x,y)
endif
call QKe("|cffff0000"+"[ Thái Thạch Cơ ] Phá huy 2 Long Trụ Kim Quốc đặt tại chiến trường Thái Thạch Cơ và toàn bộ kẻ địch !",5)
set Qv=CreateUnit(zv,'n0A8',GetRectCenterX(kh),GetRectCenterY(kh),270)
call uke(Qv,500*tH,600,1,750*tH,900,1,Dc,5,8,$A)
set Qv=CreateUnit(zv,'n0A8',GetRectCenterX(Kh),GetRectCenterY(Kh),270)
call uke(Qv,500*tH,600,1,750*tH,900,1,Dc,5,8,$A)
call hux('n0A9',th,$A)
call hux('n0A9',wh,$A)
call hTx()
set bc=2
set Bc=4
endif
endif
elseif id=='n0A8' then
set bc=bc-1
if bc==0 then
call hwx(3)
if Dc==1 then
call CreateItem(bj[4],x,y)
call tWe(bj[5],x,y,2)
call CreateItem(bj[6],x,y)
endif
if Dc==2 then
call tWe(bj[5],x,y,GetRandomInt(2,3))
call tWe(bj[6],x,y,2)
endif
if Dc==3 then
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[6],x,y)
call CreateItem(bj[7],x,y)
endif
call QKe("|cffff0000"+"[ Thái Thạch Cơ ] Kim Quân Phó Tướng xuất trận !",5)
set Qv=CreateUnit(zv,'n09Y',GetRectCenterX(Th),GetRectCenterY(Th),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,450*tH,$44C,$FDE8,$3E8*tH,$4EC,90000,Dc,6,8,$A)
call hux('n0A9',Uh,$C)
call hTx()
set Bc=5
endif
elseif id=='n09Y' then
call hwx(4)
call cqx(OJ[i],3,6)
if Dc==1 then
call tWe(bj[4],x,y,GetRandomInt(1,2))
call tWe(bj[5],x,y,3)
call CreateItem(bj[6],x,y)
endif
if Dc==2 then
call CreateItem(xJ[GetRandomInt(1,8)],x,y)
call CreateItem(bj[6],x,y)
call CreateItem(bj[7],x,y)
endif
if Dc==3 then
call CreateItem(xJ[GetRandomInt(1,8)],x,y)
call tWe(bj[5],x,y,GetRandomInt(2,3))
call tWe(bj[6],x,y,2)
call CreateItem(bj[7],x,y)
endif
call QKe("|cffff0000"+"[ Thái Thạch Cơ ] Phá hủy toàn bộ Chiến Xa trên chiến trường Thái Thạch Cơ !",5)
call hux('n0A3',Mh,4)
call hux('n0A3',ph,4)
call hux('n0A3',Ph,4)
call hux('n0A3',qh,4)
call hux('n0A3',Qh,4)
call hux('n0A3',sh,4)
call hux('n0A3',Sh,4)
call hTx()
set bc=28
set Bc=6
elseif id=='n0A3' then
set bc=bc-1
if bc==0 then
call QKe("|cffff0000"+"[ Thái Thạch Cơ ] Tiêu hủy Xe Lương Thảo của quân Kim tại Thái Thạch Cơ !",5)
set Qv=CreateUnit(zv,'n0AA',GetRectCenterX(Wh),GetRectCenterY(Wh),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,800*tH,700,1,$4B0*tH,$41A,1,Dc,6,8,$A)
call hux('n0A2',yh,8)
set Bc=7
endif
elseif id=='n0AA' then
call hwx(5)
if Dc==1 then
call tWe(bj[4],x,y,GetRandomInt(2,3))
call CreateItem(bj[5],x,y)
call tWe(bj[6],x,y,2)
endif
if Dc==2 then
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[6],x,y)
call CreateItem(bj[7],x,y)
endif
if Dc==3 then
call tWe(bj[5],x,y,GetRandomInt(2,3))
call tWe(bj[6],x,y,2)
call CreateItem(bj[7],x,y)
endif
call QKe("|cffff0000"+"[ Thái Thạch Cơ ] Kim Quân Đại Tướng xuất trận !",5)
set Qv=CreateUnit(zv,'n09Z',GetRectCenterX(Kh),GetRectCenterY(Kh),$B4)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,660*tH,$49C,77000,$4B0*tH,$51E,$19258,Dc,6,9,$B)
if Dc==3 then
call uJe(Qv)
endif
call hux('n0A4',Mh,6)
call hux('n0A4',ph,6)
call hux('n0A4',Ph,6)
call hTx()
set Bc=8
elseif id=='n09Z' then
call hwx(6)
call cqx(OJ[i],3,6)
if Dc==1 then
call tWe(bj[4],x,y,GetRandomInt(2,3))
call tWe(bj[5],x,y,2)
call tWe(bj[6],x,y,2)
endif
if Dc==2 then
call CreateItem(xJ[GetRandomInt(1,8)],x,y)
call tWe(bj[5],x,y,GetRandomInt(2,3))
call tWe(bj[6],x,y,2)
call CreateItem(bj[7],x,y)
endif
if Dc==3 then
call CreateItem(xJ[GetRandomInt(1,8)],x,y)
call tWe(bj[5],x,y,GetRandomInt(1,2))
call tWe(bj[6],x,y,2)
call tWe(bj[7],x,y,2)
endif
call QKe("|cffff0000"+"[ Thái Thạch Cơ ] Kim Quân Nguyên Soái xuất trận !",5)
set Qv=CreateUnit(zv,'n0A0',GetRectCenterX(lh),GetRectCenterY(lh),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,$460*tH,$50A,97000,$550*tH,$546,$1CCF0,Dc,7,$B,$C)
if Dc>=2 then
call uJe(Qv)
endif
call hux('n0A4',uh,$F)
call hTx()
set Bc=9
elseif id=='n0A0' then
call hwx(7)
call cqx(OJ[i],3,6)
call CreateItem('I0JN',x,y)
if Dc==1 then
call CreateItem(mj[4],x,y)
call CreateItem('I0ID',x,y)
call tWe(bj[5],x,y,GetRandomInt(1,2))
call tWe(bj[6],x,y,2)
call tWe(bj[7],x,y,2)
call t6e(i,19,1)
endif
if Dc==2 then
call UnitAddItemById(OJ[i],'I0IJ')
call CreateItem(xJ[GetRandomInt(1,8)],x,y)
call CreateItem(mj[6],x,y)
call tWe(bj[6],x,y,GetRandomInt(2,3))
call tWe(bj[7],x,y,2)
call CreateItem(bj[8],x,y)
call t6e(i,19,2)
endif
if Dc==3 then
call CreateItem(mj[6],x,y)
call CreateItem(xJ[GetRandomInt(1,8)],x,y)
call tWe(bj[6],x,y,GetRandomInt(2,3))
call tWe(bj[7],x,y,GetRandomInt(2,3))
call CreateItem(bj[8],x,y)
call t6e(i,19,3)
endif
call QKe("|cffff0000"+"[ Thái Thạch Cơ ] Kim Quân Nguyên Soái - Hoàn Nhan Lượng bị đánh bại, đội ngũ tại Thái Thạch Cơ chặn đứng đà tiến quân của Kim Quốc, thật bá đạo !",5)
set Bc=$A
elseif id=='n0AB' then
set hYx=GetRandomInt(3,6)
set jJ[i]=jJ[i]+hYx*6
if rd==1 then
call tFe(i,$7530,1)
call QKe(rj[i]+" mở Bảo Rương Thái Thạch Cơ nhận được 30000 chân khí và "+I2S(hYx)+" Mảnh Viêm Đế !",5)
elseif rd==2 then
call tHe(i,$7530,1)
call QKe(rj[i]+" mở Bảo Rương Thái Thạch Cơ nhận được 30000 bạc và "+I2S(hYx)+" Mảnh Viêm Đế !",5)
elseif rd==3 then
call tfe(i,600,1)
call QKe(rj[i]+" mở Bảo Rương Thái Thạch Cơ nhận được 600 Ngũ Hành Hồn Thạch và "+I2S(hYx)+" Mảnh Viêm Đế !",5)
elseif rd==4 then
call UnitAddItemById(u,bj[5])
call QKe(rj[i]+" mở Bảo Rương Thái Thạch Cơ nhận được 1 Huyền Tinh cấp 5 và "+I2S(hYx)+" Mảnh Viêm Đế !",5)
elseif rd==5 then
call UnitAddItemById(u,bj[5])
call UnitAddItemById(u,bj[5])
call QKe(rj[i]+" mở Bảo Rương Thái Thạch Cơ nhận được 2 Huyền Tinh cấp 5 và "+I2S(hYx)+" Mảnh Viêm Đế !",5)
else
set jJ[i]=jJ[i]+30
call QKe(rj[i]+" mở Bảo Rương Thái Thạch Cơ nhận được "+I2S(hYx+5)+" Mảnh Viêm Đế !",5)
endif
endif
endfunction
function hzx takes nothing returns boolean
local integer CGe=Qce()
set Oxe[CGe]=Oxe[CGe]-1
if Oxe[CGe]<=0 then
call QDe()
set tv=Gh
call Txe(tv)
set mv=1
loop
exitwhen mv>6
if XJ[mv]!=null and s1e(XJ[mv],tv)then
call gKx(XJ[mv],Kd)
endif
set mv=mv+1
endloop
call d4e(CGe)
endif
return false
endfunction
function hZx takes nothing returns nothing
local integer CGe=d3e()
set Oxe[CGe]=30
call QIe(CGe,1.,true,function hzx)
endfunction
function h_x takes nothing returns boolean
local integer CGe=Qce()
set Oae[CGe]=Oae[CGe]-1
if Oae[CGe]<=0 or Bc==$A then
call QDe()
set Bc=0
set Cc=false
call QKe("|cffff0000"+"[ Hoạt Động ] Phụ bản Thái Thạch Cơ đã kết thúc !",5)
call htx(Gh)
call hZx()
call DestroyTimerDialog(OVe[CGe])
call DestroyTimer(One[CGe])
set One[CGe]=null
set OVe[CGe]=null
call d2e(CGe)
endif
return false
endfunction
function h0x takes integer lv returns nothing
local integer CGe=d1e()
set Dc=lv
set Cc=true
set One[CGe]=CreateTimer()
set Oae[CGe]=$708
call TimerStart(One[CGe],Oae[CGe],false,null)
set OVe[CGe]=CreateTimerDialog(One[CGe])
call TimerDialogSetTitle(OVe[CGe],"["+I2S(lv)+"*] Thái Thạch Cơ")
call TimerDialogDisplay(OVe[CGe],true)
set Bc=1
set bc=24
call hux('n0A1',Mh,6)
call hux('n0A1',ph,6)
call hux('n0A1',Ph,6)
call hux('n0A1',qh,6)
call QKe("|cffff0000"+"[ Thái Thạch Cơ ] Lối vào Thái Thạch Cơ đã mở, tiêu diệt tất cả kẻ địch trong phụ bản !",5)
call QIe(CGe,1.,true,function h_x)
endfunction
function h1x takes player p,integer i,item t returns boolean
local integer lv=S2I(BlzGetItemDescription(t))
if not Nc then
call Qke(p,"|cffffcc00"+"Phụ bản chỉ có thể được mở sau phút 25 !",5)
call RemoveItem(t)
return false
endif
if not cc then
if not Cc then
set cc=true
call h0x(lv)
call QKe(rj[i]+"|cffffcc00"+" đã mở phụ bản Thái Thạch Cơ - "+Fj[lv],5)
else
call Qke(p,"|cffffcc00"+"Phụ bản đã được khiêu chiến trước đó !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản này chỉ có thể mở 1 lần trong mỗi trận !",5)
endif
call RemoveItem(t)
return false
endfunction
function h2x takes nothing returns boolean
set Nc=true
call QKe("|cffff0000"+"Chiến sự bùng lên ở Thại Thạch Cơ, Kim Quốc Hoàng Đế đích thân ra trận. Nguyên Soái Ngu Doãn Văn kêu gọi chí sĩ gia nhập quân Tống tại Phong Lăng Độ !",$F)
return false
endfunction
function h3x takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$5DC,false)
call TriggerAddCondition(t,Filter(function h2x))
set t=null
endfunction
function h4x takes rect r returns nothing
local unit n
local player p
call GroupEnumUnitsInRect(sv,r,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
set p=GetOwningPlayer(n)
if p==zv then
call FlushChildHashtable(UH,GetHandleId(n))
call FlushChildHashtable(ht,GetHandleId(n))
call RemoveUnit(n)
endif
call GroupRemoveUnit(sv,n)
endloop
set p=null
set n=null
endfunction
function h5x takes integer id,real x,real y returns nothing
set Qv=CreateUnit(zv,id,x,y,270)
call uHe(Qv,0,0,0,Gc-1,Gc)
endfunction
function h6x takes integer a returns nothing
local integer c=1
local integer g0x=0
local integer hWx=30+a*4
loop
exitwhen c>6
if XJ[c]!=null then
if s1e(XJ[c],Rh)then
set Uv=Player(c-1)
if Gc==1 then
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],bj[5])
endif
if Gc==2 then
call UnitAddItemById(OJ[c],bj[6])
if a==7 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=1
set hWx=hWx+$A
endif
if Gc==3 then
call UnitAddItemById(OJ[c],bj[6])
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],bj[5])
if a==7 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=2
set hWx=hWx+20
endif
if a==7 then
call UnitAddItemById(OJ[c],'I0G9')
endif
if GetRandomReal(0,'d')<=hWx then
call UnitAddItemById(OJ[c],'I0BJ')
endif
call tze(c,6,2,500)
call tfe(c,$96+$96*Gc,1)
call tFe(c,$2710+5000*Gc,1)
call tDe(c,R2I(($96+'d'*Gc)*oj),1)
call tHe(c,$4E20+5000*Gc,1)
call tye(c,8+g0x)
call Toe(Uv,$4E20+5000*Gc,R2I(($96+'d'*Gc)*oj),$2710+5000*Gc,$96+$96*Gc,0,0)
endif
endif
set c=c+1
endloop
endfunction
function h7x takes unit u,integer i,unit v,integer id,real x,real y returns nothing
local integer rd=GetRandomInt(1,6)
local integer hYx=0
if id=='n09L' then
call h6x(1)
if Gc==1 then
call CreateItem(bj[4],x,y)
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
endif
if Gc==2 then
call CreateItem(bj[5],x,y)
call tWe(bj[6],x,y,2)
endif
if Gc==3 then
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[7],x,y)
endif
call CreateUnit(zv,'n0AQ',GetRectCenterX(oH),GetRectCenterY(oH),270)
call QKe("|cffff0000"+"[ Thiên Quỳnh Cung ] Thiên Kiếp bị đánh bại, Trắc Tư Thiên Quỳnh Cung - Vũ Lăng Nhi xuất hiện ở phía trước !",5)
set Qv=CreateUnit(zv,'n09M',GetRectCenterX(Nh),GetRectCenterY(Nh),270)
call uke(Qv,350*tH,$424,$DEA8,840*tH,$4C4,82000,Gc,6,8,9)
set fc=2
elseif id=='n09M' then
call h6x(2)
call cqx(OJ[i],3,6)
if Gc==1 then
call CreateItem(bj[4],x,y)
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
endif
if Gc==2 then
call tWe(bj[5],x,y,GetRandomInt(2,3))
call tWe(bj[6],x,y,2)
endif
if Gc==3 then
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[6],x,y)
call CreateItem(bj[7],x,y)
endif
call CreateUnit(zv,'n0AQ',GetRectCenterX(rH),GetRectCenterY(rH),270)
call CreateItem('I0IX',x,y)
call QKe("|cffff0000"+"[ Thiên Quỳnh Cung ] Phát hiện ra một Bình Thuốc Giải, tiếp tục đi về phía trước !",5)
set fc=3
elseif id=='n09N' then
call h6x(3)
call cqx(OJ[i],3,6)
if Gc==1 then
call CreateItem(bj[4],x,y)
call tWe(bj[5],x,y,2)
call CreateItem(bj[6],x,y)
endif
if Gc==2 then
call tWe(bj[5],x,y,GetRandomInt(2,3))
call tWe(bj[6],x,y,2)
endif
if Gc==3 then
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[6],x,y)
call CreateItem(bj[7],x,y)
endif
call CreateUnit(zv,'n0AQ',GetRectCenterX(iH),GetRectCenterY(iH),270)
call QKe("|cffff0000"+"[ Thiên Quỳnh Cung ] Hữu Sứ Thiên Quỳnh Cung - Tiêu Lương xuất hiện tại khu vực tiếp theo !",5)
call QKe("|cff7fff00"+"[ Tiêu Lương ] Mau tới đây, tên gà mái nhát cáy !",5)
set Qv=CreateUnit(zv,'n09O',GetRectCenterX(Bh),GetRectCenterY(Bh),270)
call uke(Qv,560*tH,$47E,73000,$410*tH,$4F6,92000,Gc,7,9,$A)
set fc=5
elseif id=='n09O' then
call h6x(4)
call cqx(OJ[i],3,6)
if Gc==1 then
call w8e($D,GetRandomInt(1,5),x,y)
call tWe(bj[4],x,y,GetRandomInt(1,2))
call tWe(bj[5],x,y,3)
call CreateItem(bj[6],x,y)
endif
if Gc==2 then
call CreateItem(bj[6],x,y)
call CreateItem(bj[7],x,y)
endif
if Gc==3 then
call tWe(bj[5],x,y,GetRandomInt(2,3))
call tWe(bj[6],x,y,2)
call CreateItem(bj[7],x,y)
endif
call CreateUnit(zv,'n0AQ',GetRectCenterX(aH),GetRectCenterY(aH),270)
call QKe("|cffff0000"+"[ Thiên Quỳnh Cung ] Tả Sứ Thiên Quỳnh Cung - Tiêu Ngọc xuất hiện tại khu vực tiếp theo !",5)
call QKe("|cff7fff00"+"[ Tiêu Ngọc ] Bọn giặc cỏ to gan, dám tới đây làm loạn !",5)
set Qv=CreateUnit(zv,'n09P',GetRectCenterX(Ch),GetRectCenterY(Ch),270)
call uke(Qv,700*tH,$4A6,78000,$438*tH,$500,94000,Gc,7,9,$A)
set fc=6
elseif id=='n09P' then
call h6x(5)
call cqx(OJ[i],3,6)
if Gc==1 then
call w8e($D,GetRandomInt(1,5),x,y)
call tWe(bj[4],x,y,GetRandomInt(2,3))
call CreateItem(bj[5],x,y)
call tWe(bj[6],x,y,2)
endif
if Gc==2 then
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[6],x,y)
call CreateItem(bj[7],x,y)
endif
if Gc==3 then
call tWe(bj[5],x,y,GetRandomInt(2,3))
call tWe(bj[6],x,y,2)
call CreateItem(bj[7],x,y)
endif
call CreateUnit(zv,'n0AQ',GetRectCenterX(nH),GetRectCenterY(nH),270)
call QKe("|cffff0000"+"[ Thiên Quỳnh Cung ] Tiến vào khu vực cuối cùng của Thiên Quỳnh Cung !",5)
call QKe("|cff7fff00"+"[ Lãnh Sương Nhiên ] Thiên Quỳnh Bảo Châu là trấn bảo của Thiên Quỳnh Cung, ngươi có gan cứ tới lấy !",5)
set Qv=CreateUnit(zv,'n09Q',GetRectCenterX(dh),GetRectCenterY(dh),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,780*tH,$4BA,80000,$488*tH,$514,$186A0,Gc,8,9,$B)
if Gc==3 then
call uJe(Qv)
endif
set fc=7
elseif id=='n09Q' then
call h6x(6)
call cqx(OJ[i],3,6)
if Gc==1 then
call w8e($D,GetRandomInt(1,5),x,y)
call tWe(bj[4],x,y,GetRandomInt(2,3))
call tWe(bj[5],x,y,2)
call tWe(bj[6],x,y,2)
endif
if Gc==2 then
call tWe(bj[5],x,y,GetRandomInt(2,3))
call tWe(bj[6],x,y,2)
call CreateItem(bj[7],x,y)
endif
if Gc==3 then
call tWe(bj[5],x,y,GetRandomInt(1,2))
call tWe(bj[6],x,y,2)
call tWe(bj[7],x,y,2)
endif
call CreateItem('I0IZ',x,y)
if Bhe[(i)*(8)+8]==6 then
call Crx(u,i,8,6)
endif
call CreateUnit(zv,'n0AQ',GetRectCenterX(VH),GetRectCenterY(VH),270)
call QKe("|cffff0000"+"[ Thiên Quỳnh Cung ] Lãnh Sương Lăng bị đánh bại rơi ra một viên ngọc có lẽ là Thiên Quỳnh Bảo Châu, mang về cho Linh Nhi !",5)
set fc=8
elseif id=='n09R' then
call h6x(7)
call cqx(OJ[i],3,6)
if Gc==1 then
call CreateItem('I0IE',x,y)
call w8e($D,GetRandomInt(1,5),x,y)
call CreateItem(mj[4],x,y)
call tWe(bj[5],x,y,GetRandomInt(1,2))
call tWe(bj[6],x,y,2)
call tWe(bj[7],x,y,2)
call t6e(i,18,1)
endif
if Gc==2 then
call UnitAddItemById(OJ[i],'I0II')
call CreateItem(mj[6],x,y)
call tWe(bj[6],x,y,GetRandomInt(2,3))
call tWe(bj[7],x,y,2)
call CreateItem(bj[8],x,y)
call t6e(i,18,2)
endif
if Gc==3 then
call UnitAddItemById(OJ[i],'I0IK')
call CreateItem(mj[6],x,y)
call tWe(bj[6],x,y,GetRandomInt(2,3))
call tWe(bj[7],x,y,3)
call CreateItem(bj[8],x,y)
call t6e(i,18,3)
endif
call QKe("|cffff0000"+"[ Thiên Quỳnh Cung ] Linh Nhi bị đánh bại, đội ngũ hoàn thành phụ bản Thiên Quỳnh Cung !",5)
set fc=$A
elseif id=='n0AQ' then
set hYx=GetRandomInt(3,6)
set jJ[i]=jJ[i]+hYx*6
if rd==1 then
call tFe(i,$7530,1)
call QKe(rj[i]+" mở Bảo Rương Thiên Quỳnh Cung nhận được 30000 chân khí và "+I2S(hYx)+" Mảnh Viêm Đế !",5)
elseif rd==2 then
call tHe(i,$7530,1)
call QKe(rj[i]+" mở Bảo Rương Thiên Quỳnh Cung nhận được 30000 bạc và "+I2S(hYx)+" Mảnh Viêm Đế !",5)
elseif rd==3 then
call tfe(i,600,1)
call QKe(rj[i]+" mở Bảo Rương Thiên Quỳnh Cung nhận được 600 Ngũ Hành Hồn Thạch và "+I2S(hYx)+" Mảnh Viêm Đế !",5)
elseif rd==4 then
call UnitAddItemById(u,bj[5])
call QKe(rj[i]+" mở Bảo Rương Thiên Quỳnh Cung nhận được 1 Huyền Tinh cấp 5 và "+I2S(hYx)+" Mảnh Viêm Đế !",5)
elseif rd==5 then
call UnitAddItemById(u,bj[5])
call UnitAddItemById(u,bj[5])
call QKe(rj[i]+" mở Bảo Rương Thiên Quỳnh Cung nhận được 2 Huyền Tinh cấp 5 và "+I2S(hYx)+" Mảnh Viêm Đế !",5)
else
set jJ[i]=jJ[i]+30
call QKe(rj[i]+" mở Bảo Rương Thiên Quỳnh Cung nhận được "+I2S(hYx+5)+" Mảnh Viêm Đế !",5)
endif
endif
endfunction
function h8x takes unit u returns boolean
local item t=null
if fc==3 then
set t=Q0e(u,'I0IX')
if t!=null then
call RemoveItem(t)
call QKe("|cff7fff00"+"[ Linh Nhi ] Ta vẫn chưa thấy có hiệu quả gì ... Nghe nói Thiên Quỳnh Cung này có 1 viên Thiên Quỳnh Bảo Châu có thể giải được vạn độc, các hạ có thể giúp ta tìm nó không !",$F)
set Qv=CreateUnit(zv,'n09N',GetRectCenterX(bh),GetRectCenterY(bh),270)
call uke(Qv,450*tH,$44C,$FDE8,960*tH,$4E2,88000,Gc,7,8,$A)
set fc=4
else
call QKe("|cff7fff00"+"[ Linh Nhi ] Ta cần thuốc giải độc !",5)
endif
elseif fc==8 then
set t=Q0e(u,'I0IZ')
if t!=null then
call RemoveItem(t)
call QKe("|cffff0000"+"[ Thiên Quỳnh Cung ] Tiểu Linh nuốt xong viên bảo châu, cười to lên 1 tiếng, không thấy bóng dáng đâu !",5)
set Qv=CreateUnit(zv,'n09R',GetRectCenterX(Dh),GetRectCenterY(Dh),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,880*tH,$4CE,84000,$4D8*tH,$528,$19E10,Gc,8,9,$B)
if Gc>=2 then
call uJe(Qv)
endif
call RemoveUnit(PH)
set Tv=AddSpecialEffect("war3mapImported\\EFF_dichchuyen.mdl",GetRectCenterX(Fh),GetRectCenterY(Fh))
call BlzSetSpecialEffectScale((Tv),((.4)*1.))
set fc=9
else
call QKe("|cff7fff00"+"[ Linh Nhi ] Các hạ có thể giúp ta tìm Thiên Quỳnh Bảo Châu !",5)
endif
endif
set t=null
return false
endfunction
function h9x takes nothing returns boolean
local integer CGe=Qce()
set ORe[CGe]=ORe[CGe]-1
if ORe[CGe]<=0 then
call QDe()
set tv=Rh
call Txe(tv)
set mv=1
loop
exitwhen mv>6
if XJ[mv]!=null and s1e(XJ[mv],tv)then
call gKx(XJ[mv],Kd)
endif
set mv=mv+1
endloop
call d0e(CGe)
endif
return false
endfunction
function Hvx takes nothing returns nothing
local integer CGe=d_e()
set ORe[CGe]=30
call QIe(CGe,1.,true,function h9x)
endfunction
function Hex takes nothing returns boolean
local integer CGe=Qce()
set Obe[CGe]=Obe[CGe]-1
if Obe[CGe]<=0 or fc==$A then
call QDe()
set fc=0
set gc=false
call QKe("|cffff0000"+"[ Hoạt Động ] Phụ bản Thiên Quỳnh Cung đã kết thúc !",5)
call h4x(Rh)
call Hvx()
call DestroyTimerDialog(Oce[CGe])
call DestroyTimer(OBe[CGe])
set OBe[CGe]=null
set Oce[CGe]=null
call dZe(CGe)
endif
return false
endfunction
function Hxx takes integer lv returns nothing
local integer CGe=dze()
set Gc=lv
set gc=true
set OBe[CGe]=CreateTimer()
set Obe[CGe]=$708
call TimerStart(OBe[CGe],Obe[CGe],false,null)
set Oce[CGe]=CreateTimerDialog(OBe[CGe])
call TimerDialogSetTitle(Oce[CGe],"["+I2S(lv)+"*] Thiên Quỳnh Cung")
call TimerDialogDisplay(Oce[CGe],true)
set fc=1
call QKe("|cffff0000"+"[ Thiên Quỳnh Cung ] Lối vào Thiên Quỳnh Cung đã mở, đánh bại Thống Lĩnh Thị Vệ Thiên Quỳnh Cung - Thiên Kiếp !",5)
set Qv=CreateUnit(zv,'n09L',GetRectCenterX(Ah),GetRectCenterY(Ah),270)
call uke(Qv,300*tH,$3F2,$CB20,620*tH,$492,76000,Gc,6,8,9)
call h5x('n09S',-27376.,9230.)
call h5x('n09S',-27349.75,8769.25)
call h5x('n09S',-26453.5,9254.25)
call h5x('n09S',-26475.,8782.5)
call h5x('n09S',-24118.,9458.75)
call h5x('n09S',-23899.25,9004.75)
call h5x('n09S',-24100.,8539.)
call h5x('n09S',-23329.75,9489.)
call h5x('n09S',-23345.25,8519.75)
call h5x('n09T',-27033.,11942.5)
call h5x('n09T',-26446.,11921.5)
call h5x('n09T',-26749.25,11678.)
call h5x('n09T',-27051.5,11419.)
call h5x('n09T',-26472.5,11387.5)
call h5x('n09T',-29959.,12458.75)
call h5x('n09T',-29543.75,12060.5)
call h5x('n09T',-29145.25,12376.)
call h5x('n09T',-29596.5,11485.5)
call h5x('n09T',-29213.,11149.5)
call h5x('n09T',-29924.5,11110.25)
call h5x('n09U',-24187.5,16228.)
call h5x('n09U',-23760.5,15756.5)
call h5x('n09U',-23349.25,16314.)
call h5x('n09U',-24146.5,15225.5)
call h5x('n09U',-23286.5,15309.)
call h5x('n09T',-29989.,15992.75)
call h5x('n09T',-29299.5,16018.5)
call h5x('n09T',-29261.75,15435.5)
call h5x('n09T',-29970.5,15457.)
call h5x('n09U',-23870.75,20088.75)
call h5x('n09U',-23244.,20112.5)
call h5x('n09U',-23828.,19615.5)
call h5x('n09U',-23257.75,19653.25)
call h5x('n09U',-23819.5,19132.25)
call h5x('n09U',-23199.5,19159.75)
call h5x('n09U',-27360.,22161.5)
call h5x('n09U',-27055.5,21863.)
call h5x('n09U',-26752.5,22190.)
call h5x('n09U',-26379.5,21881.25)
call h5x('n09U',-23912.25,21993.5)
call h5x('n09U',-23551.,21751.75)
call h5x('n09U',-23199.5,22014.5)
call QIe(CGe,1.,true,function Hex)
endfunction
function Hox takes player p,integer i,item t returns boolean
local integer lv=S2I(BlzGetItemDescription(t))
if not Fc then
if not gc then
set Fc=true
call Hxx(lv)
call QKe(rj[i]+"|cffffcc00"+" đã khiêu chiến Thiên Quỳnh Cung - "+Fj[lv],5)
else
call Qke(p,"|cffffcc00"+"Phụ bản đã được khiêu chiến trước đó !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản này chỉ có thể mở 1 lần trong mỗi trận !",5)
endif
call RemoveItem(t)
return false
endfunction
function Hrx takes nothing returns nothing
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
if fc==9 then
call gJx(u,p,gh)
endif
set p=null
set u=null
endfunction
function Hix takes nothing returns boolean
return(IsUnitType((GetTriggerUnit()),UNIT_TYPE_HERO))!=null
endfunction
function Hax takes nothing returns boolean
local integer CGe=Qce()
set Ohe[CGe]=Ohe[CGe]-1
if Ohe[CGe]<=0 or spe(Ofe[CGe])then
call QDe()
if not spe(Ofe[CGe])then
if not spe(OFe[CGe])or not spe(Oge[CGe])or not spe(OGe[CGe])then
call Qre(AddSpecialEffect(("war3mapImported\\NMK_effect1.mdl"),((GetUnitX(Ofe[CGe]))*1.),((GetUnitY(Ofe[CGe]))*1.)))
call SetUnitState(Ofe[CGe],UNIT_STATE_LIFE,GetUnitState(Ofe[CGe],UNIT_STATE_LIFE)+.1*GetUnitState(Ofe[CGe],UNIT_STATE_MAX_LIFE))
call Qle("|cff7fff00"+"+10%",GetUnitX(Ofe[CGe]),GetUnitY(Ofe[CGe]))
endif
endif
set Ofe[CGe]=null
call RemoveUnit(OFe[CGe])
call RemoveUnit(Oge[CGe])
call RemoveUnit(OGe[CGe])
set OFe[CGe]=null
set Oge[CGe]=null
set OGe[CGe]=null
call dYe(CGe)
endif
return false
endfunction
function Hnx takes unit u returns nothing
local integer CGe=dye()
set Ohe[CGe]=$F
set Ofe[CGe]=u
set OFe[CGe]=CreateUnit(zv,'n0AP',GetRandomReal(GetRectMinX(uh),GetRectMaxX(uh)),GetRandomReal(GetRectMinY(uh),GetRectMaxY(uh)),270)
set Oge[CGe]=CreateUnit(zv,'n0AP',GetRandomReal(GetRectMinX(uh),GetRectMaxX(uh)),GetRandomReal(GetRectMinY(uh),GetRectMaxY(uh)),270)
set OGe[CGe]=CreateUnit(zv,'n0AP',GetRandomReal(GetRectMinX(uh),GetRectMaxX(uh)),GetRandomReal(GetRectMinY(uh),GetRectMaxY(uh)),270)
call QIe(CGe,1.,true,function Hax)
endfunction
function HVx takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,Fh)
call TriggerAddCondition(t,Filter(function Hix))
call TriggerAddAction(t,function Hrx)
set t=null
endfunction
function HEx takes rect r returns nothing
local unit n
local player p
call GroupEnumUnitsInRect(sv,r,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
set p=GetOwningPlayer(n)
if p==zv then
call FlushChildHashtable(UH,GetHandleId(n))
call FlushChildHashtable(ht,GetHandleId(n))
call RemoveUnit(n)
endif
call GroupRemoveUnit(sv,n)
endloop
set p=null
set n=null
endfunction
function HXx takes integer lv returns nothing
local integer c=1
loop
exitwhen c>6
if XJ[c]!=null then
if s1e(XJ[c],ZG)then
set Uv=Player(c-1)
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],bj[5])
if GetRandomReal(0,'d')<=25 then
call UnitAddItemById(OJ[c],'I0HO')
endif
call tfe(c,'d'+50*lv,1)
call tDe(c,R2I($96+50*lv*oj),1)
call tHe(c,$4E20+$2710*lv,1)
call tye(c,9)
call Toe(Uv,$4E20+$2710*lv,R2I($96+50*lv*oj),0,'d'+50*lv,0,0)
endif
endif
set c=c+1
endloop
endfunction
function HOx takes unit u,integer i,unit v,integer id,real x,real y returns nothing
if id=='n08Z' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v)+", vượt qua Thông Thiên Tháp tầng 1",5)
call HXx(1)
call t6e(i,$E,1)
call CreateItem('I0HI',x,y)
call tWe(bj[4],x,y,GetRandomInt(2,3))
call tWe(bj[5],x,y,3)
call tUe('I0GL',x,y,30)
set hc=2
elseif id=='n090' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v)+", vượt qua Thông Thiên Tháp tầng 2",5)
call HXx(2)
call t6e(i,$E,2)
call CreateItem(vJ[1],x,y)
call CreateItem(bj[4],x,y)
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
call tUe('I0GL',x,y,40)
call UnitAddItemById(OJ[i],'I0HL')
set hc=3
elseif id=='n091' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v)+", vượt qua Thông Thiên Tháp tầng 3",5)
call HXx(3)
call t6e(i,$E,3)
call CreateItem(vJ[2],x,y)
call tWe(bj[4],x,y,GetRandomInt(1,2))
call tWe(bj[5],x,y,2)
call CreateItem(bj[6],x,y)
call tUe('I0GL',x,y,50)
set hc=4
elseif id=='n092' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v)+", vượt qua Thông Thiên Tháp tầng 4",5)
call HXx(4)
call t6e(i,$E,4)
call CreateItem(vJ[3],x,y)
call tWe(bj[4],x,y,GetRandomInt(2,3))
call tWe(bj[5],x,y,3)
call CreateItem(bj[6],x,y)
call CreateItem('I0GL',x,y)
set hc=5
elseif id=='n093' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v)+", vượt qua Thông Thiên Tháp tầng 5",5)
call HXx(5)
call t6e(i,$E,5)
call CreateItem(vJ[4],x,y)
call tWe(bj[4],x,y,GetRandomInt(1,2))
call CreateItem(bj[5],x,y)
call tWe(bj[6],x,y,2)
call CreateItem('I0GL',x,y)
set hc=6
elseif id=='n094' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v)+", vượt qua Thông Thiên Tháp tầng 6",5)
call HXx(6)
if GetRandomReal(0,'d')<=30 then
call CreateItem('I0KK',x,y)
endif
call t6e(i,$E,6)
call CreateItem(vJ[5],x,y)
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[6],x,y)
call CreateItem(bj[7],x,y)
call CreateItem('I0GL',x,y)
set hc=7
elseif id=='n095' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v)+", vượt qua toàn bộ các tầng Thông Thiên Tháp !",5)
call HXx(7)
call t6e(i,$E,7)
call CreateItem(vJ[6],x,y)
call tWe(bj[6],x,y,GetRandomInt(1,2))
call CreateItem(bj[7],x,y)
call CreateItem(bj[8],x,y)
call CreateItem('I0GL',x,y)
set hc=8
endif
endfunction
function HRx takes nothing returns boolean
local integer CGe=Qce()
set Oke[CGe]=Oke[CGe]-1
if Oke[CGe]<=0 then
call QDe()
set tv=ZG
call Txe(tv)
set mv=1
loop
exitwhen mv>6
if XJ[mv]!=null and s1e(XJ[mv],tv)then
call gKx(XJ[mv],Kd)
endif
set mv=mv+1
endloop
call dWe(CGe)
endif
return false
endfunction
function HIx takes nothing returns nothing
local integer CGe=dwe()
set Oke[CGe]=30
call QIe(CGe,1.,true,function HRx)
endfunction
function HAx takes nothing returns boolean
local integer CGe=Qce()
set Ome[CGe]=Ome[CGe]-1
if Ome[CGe]<=0 or hc==8 then
call QDe()
set hc=0
set Jc=false
call QKe("|cffff0000"+"[ Hoạt Động ] Phụ bản Thông Thiên Tháp đã kết thúc !",5)
call HEx(ZG)
call HIx()
call DestroyTimerDialog(Ope[CGe])
call DestroyTimer(OMe[CGe])
set OMe[CGe]=null
set Ope[CGe]=null
call dUe(CGe)
endif
return false
endfunction
function HNx takes nothing returns nothing
local integer CGe=due()
set Jc=true
set OMe[CGe]=CreateTimer()
set Ome[CGe]=$708
call TimerStart(OMe[CGe],Ome[CGe],false,null)
set Ope[CGe]=CreateTimerDialog(OMe[CGe])
call TimerDialogSetTitle(Ope[CGe],"Thông Thiên Tháp")
call TimerDialogDisplay(Ope[CGe],true)
set hc=1
call QIe(CGe,1.,true,function HAx)
endfunction
function Hbx takes player p,integer i returns boolean
if not jc then
if not Jc then
set jc=true
call HNx()
call QKe(rj[i]+"|cffffcc00"+" đã khiêu chiến Thông Thiên Tháp",5)
else
call Qke(p,"|cffffcc00"+"Phụ bản đã được khiêu chiến trước đó !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản này chỉ có thể mở 1 lần trong mỗi trận !",5)
endif
return false
endfunction
function HBx takes player p,integer i returns nothing
if Jc then
if hc==1 and Hc==0 then
if bJ[i]>=3 then
set Hc=Hc+1
set Qv=CreateUnit(zv,'n08Z',GetRectCenterX(eh),GetRectCenterY(eh),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,0,0,0,0,0,0,2,0,3,0)
call QKe("|cffff0000"+"[ Thông Thiên Tháp ] Vượt ải tầng "+I2S(hc)+" bắt đầu, đánh bại "+GetObjectName('n08Z'),$A)
else
call Qke(p,"|cffffcc00"+"Cấp độ trùng sinh không đủ để khiêu chiến !",5)
endif
elseif hc==2 and Hc==1 then
if bJ[i]>=4 then
set Hc=Hc+1
set Qv=CreateUnit(zv,'n090',GetRectCenterX(eh),GetRectCenterY(eh),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,0,0,0,0,0,0,2,0,4,0)
call QKe("|cffff0000"+"[ Thông Thiên Tháp ] Vượt ải tầng "+I2S(hc)+" bắt đầu, đánh bại "+GetObjectName('n090'),$A)
else
call Qke(p,"|cffffcc00"+"Cấp độ trùng sinh không đủ để khiêu chiến !",5)
endif
elseif hc==3 and Hc==2 then
if bJ[i]>=5 then
set Hc=Hc+1
set Qv=CreateUnit(zv,'n091',GetRectCenterX(eh),GetRectCenterY(eh),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,0,0,0,0,0,0,2,0,5,0)
call QKe("|cffff0000"+"[ Thông Thiên Tháp ] Vượt ải tầng "+I2S(hc)+" bắt đầu, đánh bại "+GetObjectName('n091'),$A)
else
call Qke(p,"|cffffcc00"+"Cấp độ trùng sinh không đủ để khiêu chiến !",5)
endif
elseif hc==4 and Hc==3 then
if bJ[i]>=6 then
set Hc=Hc+1
set Qv=CreateUnit(zv,'n092',GetRectCenterX(eh),GetRectCenterY(eh),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,0,0,0,0,0,0,2,0,6,0)
call QKe("|cffff0000"+"[ Thông Thiên Tháp ] Vượt ải tầng "+I2S(hc)+" bắt đầu, đánh bại "+GetObjectName('n092'),$A)
else
call Qke(p,"|cffffcc00"+"Cấp độ trùng sinh không đủ để khiêu chiến !",5)
endif
elseif hc==5 and Hc==4 then
if bJ[i]>=7 then
set Hc=Hc+1
set Qv=CreateUnit(zv,'n093',GetRectCenterX(eh),GetRectCenterY(eh),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,0,0,0,0,0,0,3,0,0,7)
call QKe("|cffff0000"+"[ Thông Thiên Tháp ] Vượt ải tầng "+I2S(hc)+" bắt đầu, đánh bại "+GetObjectName('n093'),$A)
else
call Qke(p,"|cffffcc00"+"Cấp độ trùng sinh không đủ để khiêu chiến !",5)
endif
elseif hc==6 and Hc==5 then
if bJ[i]>=8 then
set Hc=Hc+1
set Qv=CreateUnit(zv,'n094',GetRectCenterX(eh),GetRectCenterY(eh),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,0,0,0,0,0,0,3,0,0,8)
call QKe("|cffff0000"+"[ Thông Thiên Tháp ] Vượt ải tầng "+I2S(hc)+" bắt đầu, đánh bại "+GetObjectName('n094'),$A)
else
call Qke(p,"|cffffcc00"+"Cấp độ trùng sinh không đủ để khiêu chiến !",5)
endif
elseif hc==7 and Hc==6 then
if bJ[i]>=9 then
set Hc=Hc+1
set Qv=CreateUnit(zv,'n095',GetRectCenterX(eh),GetRectCenterY(eh),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,0,0,0,0,0,0,3,0,0,9)
call QKe("|cffff0000"+"[ Thông Thiên Tháp ] Vượt ải tầng "+I2S(hc)+" bắt đầu, đánh bại "+GetObjectName('n095'),$A)
else
call Qke(p,"|cffffcc00"+"Cấp độ trùng sinh không đủ để khiêu chiến !",5)
endif
endif
else
call Qke(p,"|cffffcc00"+"Thời gian hoạt động Thông Thiên Tháp đã kết thúc !",5)
endif
endfunction
function Hcx takes nothing returns boolean
local integer CGe=Qce()
set Ose[CGe]=Ose[CGe]-1
if Ose[CGe]<=0 then
call QDe()
if Pc then
set Qv=CreateUnit(zv,'n02G',OSe[CGe],Ote[CGe],270)
call uHe(Qv,0,0,0,qc-1,qc)
endif
call dTe(CGe)
endif
return false
endfunction
function HCx takes nothing returns nothing
local integer CGe=dte()
set Ose[CGe]=R2I($A/ .03125)
set OSe[CGe]=tse(RD)
set Ote[CGe]=tSe(RD)
call QIe(CGe,.03125,true,function Hcx)
endfunction
function Hdx takes rect r returns nothing
local unit n
local player p
call GroupEnumUnitsInRect(sv,r,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
set p=GetOwningPlayer(n)
if p==zv then
call FlushChildHashtable(UH,GetHandleId(n))
call FlushChildHashtable(ht,GetHandleId(n))
call RemoveUnit(n)
endif
call GroupRemoveUnit(sv,n)
endloop
set p=null
set n=null
endfunction
function HDx takes nothing returns nothing
local unit n
call GroupEnumUnitsInRect(sv,VD,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if GetUnitTypeId(n)=='n02P' then
call FlushChildHashtable(UH,GetHandleId(n))
call FlushChildHashtable(ht,GetHandleId(n))
call RemoveUnit(n)
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
endfunction
function Hfx takes integer id,rect r,integer HFx returns nothing
local integer i=1
loop
exitwhen i>HFx
set Qv=CreateUnit(zv,id,tse(r),tSe(r),270)
call uHe(Qv,0,0,0,qc-1,qc)
set i=i+1
endloop
endfunction
function Hgx takes integer a,integer dv returns nothing
local integer c=1
local integer g0x=0
set dv=R2I(I2R(dv)*(1.+.5*qc)*oj)
loop
exitwhen c>6
if XJ[c]!=null then
if s1e(XJ[c],VD)then
set Uv=Player(c-1)
if qc==1 then
call UnitAddItemById(OJ[c],bj[4])
call UnitAddItemById(OJ[c],bj[4])
endif
if qc==2 then
call UnitAddItemById(OJ[c],bj[5])
if GetRandomReal(0,'d')<=30 and a==6 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=1
endif
if qc==3 then
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],bj[5])
if GetRandomReal(0,'d')<=40 and a==6 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=1
endif
if a==6 then
call UnitAddItemById(OJ[c],'I0G9')
endif
call tze(c,4,1,400)
call t_e(c,'x',qc)
call tFe(c,$FA0*a+$FA0*qc,1)
call tDe(c,R2I((80+40*qc)*oj),1)
call tHe(c,$2710+5000*qc,1)
call tke(c,1,dv,1)
call tye(c,7+g0x)
call Toe(Uv,$2710+5000*qc,R2I((80+40*qc)*oj),$FA0*a+$FA0*qc,TH,dv,1)
endif
endif
set c=c+1
endloop
endfunction
function HGx takes unit u,integer i,unit v,integer id,real x,real y returns nothing
if id=='n02H' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call tUe(Zj[2],x,y,20)
call cqx(OJ[i],2,4)
call Hgx(1,$C8)
if qc==1 then
call tWe(bj[3],x,y,GetRandomInt(1,2))
call tWe(bj[4],x,y,2)
endif
if qc==2 then
call tWe(bj[4],x,y,GetRandomInt(1,2))
call CreateItem(bj[5],x,y)
endif
if qc==3 then
call tUe('I05P',x,y,20)
call CreateItem(bj[4],x,y)
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
endif
call tWe('I054',x,y,GetRandomInt(3,4)+2*qc)
call tUe('I057',x,y,$F+qc*$F)
call QKe("|cffff0000"+"[ Vạn Hoa Cốc ] Lối vào cốc đã mở, xuất hiện một toán kẻ địch cản đường, mau tiêu diệt chúng !",5)
call Hfx('n02E',OD,$F)
set Kc=$F
set lc=2
elseif id=='n02E' then
call tUe('I054',x,y,5.)
set Kc=Kc-1
if Kc==0 then
call QKe("|cffff0000"+"[ Vạn Hoa Cốc ] Thiết Phù Đồ xuất hiện !",5)
set Qv=CreateUnit(zv,'n02I',GetRectCenterX(CD),GetRectCenterY(CD),270)
call uke(Qv,30*tH,460,$4844,$87*tH,790,$9470,qc,1,3,6)
set lc=3
endif
elseif id=='n02I' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call tUe(Zj[2],x,y,25)
call cqx(OJ[i],2,4)
call Hgx(2,300)
if qc==1 then
call tWe(bj[3],x,y,GetRandomInt(1,2))
call tWe(bj[4],x,y,2)
endif
if qc==2 then
call tWe(bj[4],x,y,GetRandomInt(2,3))
call CreateItem(bj[5],x,y)
endif
if qc==3 then
call tUe('I05P',x,y,30)
call CreateItem(bj[4],x,y)
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
endif
call tWe('I054',x,y,GetRandomInt(3,4)+2*qc)
call tUe('I057',x,y,25+qc*$F)
call QKe("|cffff0000"+"[ Vạn Hoa Cốc ] âm thanh lạ phát ra bên phải, tới đó xem có chuyện gì !",5)
set Qv=CreateUnit(zv,'n02J',GetRectCenterX(ID),GetRectCenterY(ID),270)
call uke(Qv,36*tH,490,$4E20,$A0*tH,840,$A028,qc,1,3,6)
set lc=4
elseif id=='n02J' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call tUe(Zj[2],x,y,30)
call cqx(OJ[i],2,4)
call Hgx(3,400)
if qc==1 then
call tWe(bj[3],x,y,GetRandomInt(1,2))
call tWe(bj[4],x,y,3)
endif
if qc==2 then
call tWe(bj[4],x,y,GetRandomInt(1,2))
call tWe(bj[5],x,y,2)
endif
if qc==3 then
call tUe('I05P',x,y,40)
call CreateItem(bj[4],x,y)
call tWe(bj[5],x,y,2)
call CreateItem(bj[6],x,y)
endif
call tWe('I054',x,y,GetRandomInt(4,5)+2*qc)
call tUe('I057',x,y,35+qc*$F)
call QKe("|cffff0000"+"[ Vạn Hoa Cốc ] quay trở lại và đi về con đường vào sâu trong cốc để cứu người !",5)
call Hfx('n02F',AD,20)
call Hfx('n02G',RD,3)
set Kc=20
set lc=5
elseif id=='n02F' then
call tUe('I054',x,y,5.)
set Kc=Kc-1
if Kc==0 then
call QKe("|cffff0000"+"[ Vạn Hoa Cốc ] Liễu Sinh và Giả Như xuất hiện trước thác nước !",5)
set Qv=CreateUnit(zv,'n02L',GetRectCenterX(bD),GetRectCenterY(bD),270)
call uke(Qv,48*tH,560,$5BCC,$B9*tH,890,$ADD4,qc,1,4,7)
set Qv=CreateUnit(zv,'n02K',GetRectCenterX(ND),GetRectCenterY(ND),270)
call uke(Qv,48*tH,560,$5BCC,$B9*tH,890,$ADD4,qc,1,4,7)
set Kc=2
set lc=6
endif
elseif id=='n02L' or id=='n02K' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
set Kc=Kc-1
if Kc==0 then
call tUe(Zj[2],x,y,40)
call cqx(OJ[i],2,5)
call Hgx(4,500)
if qc==1 then
call tWe(bj[3],x,y,GetRandomInt(1,2))
call tWe(bj[4],x,y,3)
endif
if qc==2 then
call tUe('I05O',x,y,20)
call CreateItem(bj[4],x,y)
call tWe(bj[5],x,y,3)
call w8e($A,GetRandomInt(1,5),x,y)
endif
if qc==3 then
call tUe('I05P',x,y,40)
call tWe(bj[4],x,y,2)
call tWe(bj[5],x,y,3)
call CreateItem(bj[6],x,y)
call w8e($C,GetRandomInt(1,5),x,y)
endif
call tWe('I054',x,y,GetRandomInt(5,6)+2*qc)
call tUe('I057',x,y,45+qc*$F)
call QKe("|cffff0000"+"[ Vạn Hoa Cốc ] Mở hầm rượu để chiêu dụ lão tăng nghiện rượu, cẩn thận bầy thú canh giữ !",5)
call QKe("|cff7fff00"+"Sử dụng chuột trái bấm vào Cơ Quan khi đứng gần sẽ bắt đầu mở (không thể di chuyển trong 10 giây), nếu bị tấn công sẽ ngừng mở !",5)
call Hfx('n02P',BD,5)
set Lc=CreateUnit(zv,'n02R',GetRectCenterX(BD),GetRectCenterY(BD),270)
set lc=7
endif
elseif id=='n02M' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call tUe(Zj[2],x,y,50)
call cqx(OJ[i],3,5)
call Hgx(5,600)
if qc==1 then
call tWe(bj[3],x,y,GetRandomInt(1,2))
call CreateItem(bj[4],x,y)
call CreateItem(bj[5],x,y)
call w8e(9,GetRandomInt(1,5),x,y)
endif
if qc==2 then
call tUe('I05O',x,y,40)
call CreateItem(bj[4],x,y)
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
call w8e($A,GetRandomInt(1,5),x,y)
endif
if qc==3 then
call tUe('I05P',x,y,50)
call tWe(bj[4],x,y,GetRandomInt(2,3))
call CreateItem(bj[5],x,y)
call tWe(bj[6],x,y,2)
call w8e($C,GetRandomInt(1,5),x,y)
endif
call tWe('I054',x,y,GetRandomInt(6,7)+2*qc)
call tUe('I057',x,y,55+qc*$F)
call QKe("|cffff0000"+"[ Vạn Hoa Cốc ] Hầm rượu bị phá hủy, Túy Tăng nổi giận, đi sang con đường bên trái và đánh bại ông ta !",5)
set Qv=CreateUnit(zv,'n02N',GetRectCenterX(cD),GetRectCenterY(cD),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,'i'*tH,720,$84D0,390*tH,$438,$EE48,qc,2,5,8)
set lc=9
elseif id=='n02N' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
if Bhe[(i)*(8)+2]==4 then
call Crx(u,i,2,4)
endif
call CreateItem(Zj[2],x,y)
call cqx(OJ[i],2,6)
call Hgx(6,800)
if qc==1 then
call CreateItem('I047',x,y)
call CreateItem(mj[2],x,y)
call w8e(9,GetRandomInt(1,5),x,y)
call tWe(bj[3],x,y,GetRandomInt(1,2))
call tWe(bj[4],x,y,2)
call tWe(bj[5],x,y,2)
call t6e(i,3,1)
endif
if qc==2 then
call UnitAddItemById(OJ[i],'I09O')
call CreateItem(mj[3],x,y)
call CreateItem('I04F',x,y)
call tUe('I05O',x,y,50)
call w8e($A,GetRandomInt(1,5),x,y)
call tWe(bj[4],x,y,GetRandomInt(1,2))
call tWe(bj[5],x,y,2)
call tWe(bj[6],x,y,2)
call t6e(i,3,2)
endif
if qc==3 then
call CreateItem('I05P',x,y)
call CreateItem(mj[4],x,y)
call w8e($C,GetRandomInt(1,5),x,y)
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[6],x,y)
call CreateItem(bj[7],x,y)
call t6e(i,3,3)
endif
call tWe('I054',x,y,GetRandomInt(7,8)+3*qc)
call CreateItem('I057',x,y)
call QKe("|cffff0000"+"[ Vạn Hoa Cốc ] Đánh bại Túy Tăng và tìm thấy Thanh Thanh, hoàn thành phụ bản Vạn Hoa Cốc !",5)
set lc=$A
elseif id=='n02G' then
call CreateItem('I07E',x,y)
call HCx()
endif
endfunction
function Hhx takes nothing returns boolean
local integer CGe=Qce()
set Owe[CGe]=Owe[CGe]-1
if Owe[CGe]<=0 then
call QDe()
set tv=VD
call Txe(tv)
set mv=1
loop
exitwhen mv>6
if XJ[mv]!=null and s1e(XJ[mv],tv)then
call gKx(XJ[mv],Kd)
endif
set mv=mv+1
endloop
call dSe(CGe)
endif
return false
endfunction
function HHx takes nothing returns nothing
local integer CGe=dse()
set Owe[CGe]=30
call QIe(CGe,1.,true,function Hhx)
endfunction
function Hjx takes nothing returns boolean
local integer CGe=Qce()
set Oze[CGe]=Oze[CGe]-1
if Oze[CGe]<=0 or lc==$A then
call QDe()
set lc=0
set Pc=false
call QKe("|cffff0000"+"[ Hoạt Động ] Phụ bản Vạn Hoa Cốc đã kết thúc !",5)
call Hdx(VD)
call HHx()
call DestroyTimerDialog(O_e[CGe])
call DestroyTimer(OZe[CGe])
set OZe[CGe]=null
set O_e[CGe]=null
call dQe(CGe)
endif
return false
endfunction
function HJx takes integer lv returns nothing
local integer CGe=dqe()
set qc=lv
set Pc=true
set OZe[CGe]=CreateTimer()
set Oze[CGe]=$5DC
call TimerStart(OZe[CGe],Oze[CGe],false,null)
set O_e[CGe]=CreateTimerDialog(OZe[CGe])
call TimerDialogSetTitle(O_e[CGe],"["+I2S(lv)+"*] Vạn Hoa Cốc")
call TimerDialogDisplay(O_e[CGe],true)
set Qv=CreateUnit(zv,'n02H',GetRectCenterX(XD),GetRectCenterY(XD),270)
call uke(Qv,27*tH,440,$445C,$82*tH,780,$927C,qc,1,3,6)
set lc=1
call QIe(CGe,1.,true,function Hjx)
endfunction
function Hkx takes player p,integer i,item t returns boolean
local integer lv=S2I(BlzGetItemDescription(t))
if not pc then
if not Pc then
set pc=true
call HJx(lv)
call QKe(rj[i]+"|cffffcc00"+" đã khiêu chiến Vạn Hoa Cốc - "+Fj[lv],5)
else
call Qke(p,"|cffffcc00"+"Phụ bản đã được khiêu chiến trước đó !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản này chỉ có thể mở 1 lần trong mỗi trận !",5)
endif
call RemoveItem(t)
return false
endfunction
function HKx takes nothing returns boolean
local integer CGe=Qce()
set O3e[CGe]=O3e[CGe]-1
if sre(GetUnitX(Lc),GetUnitY(Lc),GetUnitX(Mc),GetUnitY(Mc))>=$3E8 then
set mc=false
endif
if not mc then
call QKe("|cffffcc00"+"Mở cơ quan thất bại !",5)
set O3e[CGe]=0
elseif O3e[CGe]>0 then
call QKe("|cffffcc00"+"Cơ quan đang mở, thời gian còn lại "+I2S(O3e[CGe])+" giây !",3)
endif
if O3e[CGe]<=0 then
call QDe()
call PauseUnit(Mc,false)
set Mc=null
if mc then
call HDx()
call RemoveUnit(Lc)
set Lc=null
set mc=false
set lc=8
call QKe("|cffff0000"+"[ Vạn Hoa Cốc ] Cơ Quan Hầm Rượu đã mở, Cốc Tiên Tiên xuất hiện !",5)
set Qv=CreateUnit(zv,'n02M',GetRectCenterX(dD),GetRectCenterY(dD),270)
call uke(Qv,80*tH,650,$7724,290*tH,$3E8,$C738,qc,2,5,8)
endif
call dPe(CGe)
endif
return false
endfunction
function Hlx takes nothing returns nothing
local integer CGe=dpe()
set O3e[CGe]=$A
call PauseUnit(Mc,true)
call QKe("|cffffcc00"+"Bắt đầu mở cơ quan !",5)
call QIe(CGe,1.,true,function HKx)
endfunction
function HLx takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
if not mc then
if sre(GetUnitX(Lc),GetUnitY(Lc),GetUnitX(XJ[i]),GetUnitY(XJ[i]))<=$C8 then
if p==GetLocalPlayer()then
call ClearSelection()
call SelectUnit(XJ[i],true)
endif
set Mc=XJ[i]
set mc=true
call Hlx()
endif
endif
set p=null
return false
endfunction
function Hmx takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())=='n02R' and HLx()
endfunction
function HMx takes nothing returns boolean
local unit u=GetTriggerUnit()
if Mc==u then
set mc=false
endif
return false
endfunction
function Hpx takes nothing returns boolean
return lc==7 and HMx()
endfunction
function HPx takes unit u returns nothing
local integer i=0
local item t=null
local integer b=0
loop
exitwhen i>5
set t=UnitItemInSlot(u,i)
if GetItemTypeId(t)=='I07E' then
set b=b+1
endif
set i=i+1
endloop
if b==6 then
set i=0
loop
exitwhen i>5
set t=UnitItemInSlot(u,i)
call RemoveItem(t)
set i=i+1
endloop
call UnitAddItemById(u,'I07G')
endif
set t=null
endfunction
function Hqx takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Player(0),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerRegisterPlayerUnitEvent(t,Player(1),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerRegisterPlayerUnitEvent(t,Player(2),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerRegisterPlayerUnitEvent(t,Player(3),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerRegisterPlayerUnitEvent(t,Player(4),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerRegisterPlayerUnitEvent(t,Player(5),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerAddCondition(t,Condition(function Hmx))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function Hpx))
set t=null
endfunction
function HQx takes integer a,integer Hsx returns nothing
local integer c=1
local integer n=0
local integer rd=0
set uc[1]=0
set uc[2]=0
set uc[3]=0
set uc[4]=0
set uc[5]=0
set uc[6]=0
loop
exitwhen c>6
if XJ[c]!=null then
if s1e(XJ[c],Yh)then
set n=n+1
set uc[n]=c
set Uv=Player(c-1)
if GetRandomReal(0,'d')<=25 then
call UnitAddItemById(OJ[c],'I0HO')
endif
call UnitAddItemById(OJ[c],'I0G9')
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],'I0BJ')
call tze(c,6,3,$3E8)
call tfe(c,$C8+$C8*a,1)
call tDe(c,R2I(($C8+'d'*a)*oj),1)
call tHe(c,$4E20+$2710*a,1)
call tye(c,5)
call Toe(Uv,$4E20+$2710*a,R2I(($C8+'d'*a)*oj),0,$C8+'d'*a,0,0)
endif
endif
set c=c+1
endloop
if n!=0 then
set rd=GetRandomInt(1,n)
call UnitAddItemById(OJ[uc[rd]],Hsx)
call QKe(rj[uc[rd]]+" may mắn nhận được "+GetObjectName(Hsx)+", xin chúc mừng !",$A)
endif
endfunction
function HSx takes unit u,integer i,unit v,integer id,real x,real y returns nothing
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
set Qc=null
if id=='n0AC' then
call HQx(1,'I0JQ')
call CreateItem('I0IW',x,y)
call tWe(bj[4],x,y,GetRandomInt(1,2))
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
call t6e(i,17,1)
elseif id=='n0AD' then
call HQx(2,'I0JR')
call UnitAddItemById(OJ[i],'I0IT')
call CreateItem('I0IW',x,y)
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[6],x,y)
call CreateItem(bj[7],x,y)
call t6e(i,17,2)
elseif id=='n0AF' then
if GetRandomReal(0,'d')<=30 then
call CreateItem('I0KH',x,y)
endif
call HQx(3,'I0JS')
call CreateItem('I0IW',x,y)
call tWe(bj[6],x,y,GetRandomInt(1,2))
call CreateItem(bj[7],x,y)
call CreateItem(bj[8],x,y)
call t6e(i,17,3)
elseif id=='n0AG' then
call HQx(4,'I0JT')
call CreateItem('I0IW',x,y)
call tWe(bj[6],x,y,GetRandomInt(2,3))
call tWe(bj[7],x,y,GetRandomInt(2,3))
call CreateItem(bj[8],x,y)
call t6e(i,17,4)
endif
endfunction
function Htx takes nothing returns boolean
local integer CGe=Qce()
set O7e[CGe]=O7e[CGe]-1
if O7e[CGe]<=0 then
call QDe()
if not spe(Rve[CGe])then
call QKe("|cffff0000"+"Khiêu chiến Vạn Kiếm Trũng thất bại, ngươi còn quá yếu đuối, hãy về luyện tập thêm !",5)
call RemoveUnit(Rve[CGe])
endif
call DestroyTimerDialog(O9e[CGe])
call DestroyTimer(O8e[CGe])
set O8e[CGe]=null
set O9e[CGe]=null
set Rve[CGe]=null
set Qc=null
set Sc=false
call dMe(CGe)
endif
return false
endfunction
function HTx takes integer id,real hp,real ar,real QPe,integer lv returns nothing
local integer CGe=dme()
set O8e[CGe]=CreateTimer()
set O7e[CGe]=600
call TimerStart(O8e[CGe],O7e[CGe],false,null)
set O9e[CGe]=CreateTimerDialog(O8e[CGe])
call TimerDialogSetTitle(O9e[CGe],"Vạn Kiếm Trũng")
call TimerDialogDisplay(O9e[CGe],true)
set Rve[CGe]=CreateUnit(zv,id,GetRectCenterX(vH),GetRectCenterY(vH),270)
call uke(Rve[CGe],0,0,0,hp,ar,QPe,3,0,0,lv)
if id=='I0JB' then
call uJe(Rve[CGe])
endif
set Qc=Rve[CGe]
set Sc=true
call QIe(CGe,1.,true,function Htx)
endfunction
function Hux takes unit u,integer i,integer id,item t returns boolean
if not s1e(u,Yh)then
call QKe("|cffff0000"+"Chỉ có thể sử dụng lệnh bài trong Vạn Kiếm Trũng !",5)
return false
endif
if Sc then
call QKe("|cffff0000"+"Thời gian khiêu chiến Vạn Kiếm Trũng vẫn chưa kết thúc !",5)
return false
endif
if Tc>=$A then
call QKe("|cffff0000"+"Mỗi trận chỉ có thể triệu hồi tối đa 10 lần !",5)
return false
endif
set Tc=Tc+1
call QKe(rj[i]+" đã triệu hồi "+GetObjectName(id)+" tại Vạn Kiếm Trũng, số lần triệu hồi còn lại: "+"|cff7fff00"+I2S(5-Tc),$F)
if id=='I0J8' then
call HTx('n0AC',75*tH,600,$6D60,4)
call RemoveItem(t)
elseif id=='I0J9' then
call HTx('n0AD',280*tH,990,$C738,7)
call RemoveItem(t)
elseif id=='I0JA' then
call HTx('n0AF',920*tH,$4D8,86000,$A)
call RemoveItem(t)
elseif id=='I0JB' then
call HTx('n0AG',$5A0*tH,$55A,$1EC30,$C)
call RemoveItem(t)
endif
return false
endfunction
function HUx takes nothing returns boolean
local integer CGe=Qce()
local real a=GetUnitFacing(XJ[Rie[CGe]])
local real x=(((GetUnitX(XJ[Rie[CGe]]))*1.)+(($FA)*1.)*Cos(((a+$B4)*1.)*bj_DEGTORAD))
local real y=(((GetUnitY(XJ[Rie[CGe]]))*1.)+(($FA)*1.)*Sin(((a+$B4)*1.)*bj_DEGTORAD))
local real x2=GetUnitX(Bze[Rie[CGe]])
local real y2=GetUnitY(Bze[Rie[CGe]])
local real db=sre(x,y,x2,y2)
if db>=$4B0 and not spe(Bze[Rie[CGe]])then
call Qke(Rae[CGe],"|cffff0000"+"Khoảng cách hộ tống quá xa, Tiêu Xa đã dừng lại",3)
call IssueImmediateOrderById(Bze[Rie[CGe]],$D0004)
else
call IssuePointOrderById(Bze[Rie[CGe]],$D0012,x,y)
endif
set Rre[CGe]=Rre[CGe]-1
if Rre[CGe]<=0 or spe(Bze[Rie[CGe]])or B0e[Rie[CGe]]==5 then
call QDe()
if B0e[Rie[CGe]]==5 then
set B0e[Rie[CGe]]=0
else
if spe(Bze[Rie[CGe]])then
call Qke(Rae[CGe],"|cffffcc00"+"Tiêu Xa đã bị phá hủy, vận tiêu thất bại !",3)
set B0e[Rie[CGe]]=0
set Bze[Rie[CGe]]=null
set BZe[Rie[CGe]]=0
else
call Qke(Rae[CGe],"|cffffcc00"+"Thời gian vận tiêu đã kết thúc, họ tống thất bại!",3)
set B0e[Rie[CGe]]=0
call RemoveUnit(Bze[Rie[CGe]])
set Bze[Rie[CGe]]=null
set BZe[Rie[CGe]]=0
endif
endif
set Rae[CGe]=null
call dLe(CGe)
endif
return false
endfunction
function Hwx takes integer i returns nothing
local integer CGe=dle()
set Rre[CGe]=450
set Rie[CGe]=i
set Rae[CGe]=Player(i-1)
call QIe(CGe,2.,true,function HUx)
endfunction
function HWx takes unit u,player p,integer i,integer w5e returns nothing
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real r=GetRandomReal(0,'d')
local integer t0e=0
local real db=sre(x,y,GetUnitX(Bze[i]),GetUnitY(Bze[i]))
if w5e=='I08O' then
if Bze[i]!=null then
call Qke(p,"|cffffcc00"+"Bạn đã nhận Tiêu Xa trước đó !",3)
else
if B_e[i]>=5 then
call Qke(p,"|cffffcc00"+"Mỗi trận chỉ có thể vận tiêu 5 lần !",3)
else
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl"),((x)*1.),((y)*1.)))
set B_e[i]=B_e[i]+1
set Bze[i]=CreateUnit(p,'n05F',GetRectCenterX(mF),GetRectCenterY(mF),0)
if r<=40 then
set BZe[i]=1
elseif r>40 and r<=80 then
set BZe[i]=2
elseif r>80 then
set BZe[i]=3
endif
set B0e[i]=1
call UnitAddAbility(Bze[i],Hj[BZe[i]])
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call Qke(p,"|cffffcc00"+"Hộ tống Tiêu Xa đến gặp Tiêu Sư ở 4 trạm Tây Tháp Lâm > Hoài Thủy Sa Châu > Phong Lăng Độ > Dương Châu (Quan Quân Nhu), thời gian hộ tống là 15 phút, cẩn thận Đạo Tặc trên đường đi!",3)
call Hwx(i)
endif
endif
elseif w5e=='I08P' then
if B0e[i]==1 and Bze[i]!=null and db<800 then
set B0e[i]=2
call Qke(p,"|cffffcc00"+"Tiếp tục hộ tống Tiêu Xa đến gặp Tiêu Sư ở Hoài Thủy Sa Châu !",3)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl"),((x)*1.),((y)*1.)))
call tze(i,1,1,$96)
call UnitAddItemById(OJ[i],bj[4])
set t0e=(80+20*BZe[i])+($A*BZe[i]*(1+bJ[i]))
call tfe(i,t0e,1)
call tDe(i,30+30*BZe[i],1)
call tHe(i,$2710+$2710*BZe[i],1)
call tke(i,5,R2I(('d'+'d'*bJ[i])*oj),1)
call tye(i,2)
call Toe(p,$2710+$2710*BZe[i],30+30*BZe[i],0,t0e,R2I(('d'+'d'*bJ[i])*oj),5)
endif
elseif w5e=='I08Q' then
if B0e[i]==2 and Bze[i]!=null and db<800 then
set B0e[i]=3
call Qke(p,"|cffffcc00"+"Tiếp tục hộ tống Tiêu Xa đến gặp Tiêu Sư ở Phong Lăng Độ !",3)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl"),((x)*1.),((y)*1.)))
call tze(i,1,1,$96)
call UnitAddItemById(OJ[i],bj[4])
set t0e=(80+20*BZe[i])+($A*BZe[i]*(1+bJ[i]))
call tfe(i,t0e,1)
call tDe(i,30+30*BZe[i],1)
call tHe(i,$3A98+$2710*BZe[i],1)
call tke(i,5,R2I(($C8+'d'*bJ[i])*oj),1)
call tye(i,2)
call Toe(p,$3A98+$2710*BZe[i],30+30*BZe[i],0,t0e,R2I(($C8+'d'*bJ[i])*oj),5)
endif
elseif w5e=='I08R' then
if B0e[i]==3 and Bze[i]!=null and db<800 then
set B0e[i]=4
call Qke(p,"|cffffcc00"+"Tiếp tục hộ tống Tiêu Xa đến gặp Tiêu Sư ở Dương Châu !",3)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl"),((x)*1.),((y)*1.)))
call tze(i,1,1,$96)
call UnitAddItemById(OJ[i],bj[4])
set t0e=(80+20*BZe[i])+($A*BZe[i]*(1+bJ[i]))
call tfe(i,t0e,1)
call tDe(i,35+35*BZe[i],1)
call tHe(i,$4E20+$2710*BZe[i],1)
call tke(i,5,R2I((300+'d'*bJ[i])*oj),1)
call tye(i,2)
call Toe(p,$4E20+$2710*BZe[i],30+30*BZe[i],0,t0e,R2I((300+'d'*bJ[i])*oj),5)
endif
elseif w5e=='I08S' then
if B0e[i]==4 and Bze[i]!=null and db<800 then
set B0e[i]=5
call Qke(p,"|cffffcc00"+"Bạn đã hoàn thành hộ tống Tiêu Xa và nhận được phần thưởng !",3)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl"),((x)*1.),((y)*1.)))
set bhe[(i)*($A)+2]=bhe[(i)*($A)+2]+2
if Bhe[(i)*(8)+4]==2 then
call Crx(u,i,4,2)
endif
call tze(i,1,1,$96)
if BZe[i]==1 then
call UnitAddItemById(OJ[i],bj[4])
call UnitAddItemById(OJ[i],bj[4])
elseif BZe[i]==2 then
call UnitAddItemById(OJ[i],bj[5])
elseif BZe[i]==3 then
call UnitAddItemById(OJ[i],bj[5])
call UnitAddItemById(OJ[i],bj[5])
endif
if GetRandomReal(0,'d')<=25 then
call UnitAddItemById(OJ[i],'I0HO')
endif
call UnitAddItemById(OJ[i],'I0G9')
set t0e=(80+20*BZe[i])+($A*BZe[i]*(1+bJ[i]))
call tfe(i,t0e,1)
call tDe(i,40+40*BZe[i],1)
call tHe(i,$7530+$2710*BZe[i],1)
call tke(i,5,R2I((400+'d'*bJ[i])*oj),1)
call tye(i,4)
call Toe(p,$7530+$2710*BZe[i],40+40*BZe[i],0,t0e,R2I((400+'d'*bJ[i])*oj),5)
call RemoveUnit(Bze[i])
set BZe[i]=0
set Bze[i]=null
endif
endif
endfunction
function Hyx takes integer QZe,integer c,real x,real y returns nothing
local real r=360/ I2R(QZe)
local integer i=1
local real HYx=1.+1.*bJ[c]
local real Hzx=1.+.6*bJ[c]
loop
exitwhen i>QZe
set Qv=tTe(zv,'n05G',(((x)*1.)+(($FA)*1.)*Cos(((r*i)*1.)*bj_DEGTORAD)),(((y)*1.)+(($FA)*1.)*Sin(((r*i)*1.)*bj_DEGTORAD)),270,$B4)
call BlzSetUnitMaxHP(Qv,R2I(BlzGetUnitMaxHP(Qv)*HYx))
call BlzSetUnitArmor(Qv,R2I(BlzGetUnitArmor(Qv)*Hzx))
call SetUnitState(Qv,UNIT_STATE_LIFE,GetUnitState(Qv,UNIT_STATE_MAX_LIFE))
call IssueTargetOrderById(Qv,$D000F,Bze[c])
set i=i+1
endloop
endfunction
function HZx takes nothing returns boolean
local integer CGe=Qce()
set RXe[CGe]=RXe[CGe]-1
if RXe[CGe]<=0 then
call QDe()
if not spe(Bze[ROe[CGe]])then
call Hyx(RRe[CGe],ROe[CGe],GetUnitX(Bze[ROe[CGe]]),GetUnitY(Bze[ROe[CGe]]))
call Qke(Player(ROe[CGe]-1),"|cffff0000"+"Đạo tặc xuất hiện, Tiêu Xa đang gặp nguy hiểm",3)
endif
call dKe(CGe)
endif
return false
endfunction
function H_x takes integer i,integer QZe returns nothing
local integer CGe=dke()
set RXe[CGe]=20
set ROe[CGe]=i
set RRe[CGe]=QZe
call QIe(CGe,1.,true,function HZx)
endfunction
function H0x takes nothing returns nothing
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local real x=GetUnitX(u)
local real y=GetUnitY(u)
if B0e[i]==1 then
if sre(x,y,GetUnitX(Bze[i]),GetUnitY(Bze[i]))<800 then
call Qke(p,"|cff7fff00"+"--- Tây Tháp Lâm ---",3)
call gJx(u,p,Fd)
call SetUnitX(Bze[i],GetUnitX(u))
call SetUnitY(Bze[i],GetUnitY(u))
else
call Qke(p,"|cffffcc00"+"Khoảng cách giữa bạn và Tiêu Xa quá xa, không thể chuyển bản đồ!",3)
endif
endif
set p=null
set u=null
endfunction
function H1x takes nothing returns nothing
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local real x=GetUnitX(u)
local real y=GetUnitY(u)
if B0e[i]==2 then
if sre(x,y,GetUnitX(Bze[i]),GetUnitY(Bze[i]))<800 then
call Qke(p,"|cff7fff00"+"--- Hoài Thủy Sa Châu ---",3)
call gJx(u,p,LF)
call SetUnitX(Bze[i],GetUnitX(u))
call SetUnitY(Bze[i],GetUnitY(u))
call H_x(i,5)
else
call Qke(p,"|cffffcc00"+"Khoảng cách giữa bạn và Tiêu Xa quá xa, không thể chuyển bản đồ!",3)
endif
endif
set p=null
set u=null
endfunction
function H2x takes nothing returns nothing
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local real x=GetUnitX(u)
local real y=GetUnitY(u)
if B0e[i]==3 then
if sre(x,y,GetUnitX(Bze[i]),GetUnitY(Bze[i]))<800 then
call Qke(p,"|cff7fff00"+"--- Phong Lăng Độ ---",3)
call gJx(u,p,JF)
call SetUnitX(Bze[i],GetUnitX(u))
call SetUnitY(Bze[i],GetUnitY(u))
call H_x(i,$A)
else
call Qke(p,"|cffffcc00"+"Khoảng cách giữa bạn và Tiêu Xa quá xa, không thể chuyển bản đồ!",3)
endif
endif
set p=null
set u=null
endfunction
function H3x takes nothing returns nothing
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local real x=GetUnitX(u)
local real y=GetUnitY(u)
if B0e[i]==4 then
if sre(x,y,GetUnitX(Bze[i]),GetUnitY(Bze[i]))<800 then
call Qke(p,"|cff7fff00"+"--- Dương Châu ---",3)
call gJx(u,p,Kd)
call SetUnitX(Bze[i],GetUnitX(u))
call SetUnitY(Bze[i],GetUnitY(u))
else
call Qke(p,"|cffffcc00"+"Khoảng cách giữa bạn và Tiêu Xa quá xa, không thể chuyển bản đồ!",3)
endif
endif
set p=null
set u=null
endfunction
function H4x takes nothing returns boolean
return(IsUnitType((GetTriggerUnit()),UNIT_TYPE_HERO))!=null
endfunction
function H5x takes unit u,player p,integer i returns nothing
local real r=GetRandomReal(0,'d')
if Bze[i]!=null then
if B1e[i]>0 then
call UnitRemoveAbility(Bze[i],Hj[BZe[i]])
if r<=40 then
set BZe[i]=1
elseif r>40 and r<=80 then
set BZe[i]=2
elseif r>80 then
set BZe[i]=3
endif
call UnitAddAbility(Bze[i],Hj[BZe[i]])
if BZe[i]==1 then
call Qke(p,"|cffffcc00"+"Bạn nhận được Tiêu Xa Thường",3)
elseif BZe[i]==2 then
call Qke(p,"|cffffcc00"+"Bạn nhận được Tiêu Xa Quân Dụng",3)
elseif BZe[i]==3 then
call Qke(p,"|cffffcc00"+"Bạn nhận được Tiêu Xa Hoàng Gia",3)
endif
set B1e[i]=B1e[i]-1
call Qke(p,"|cffffcc00"+"[ Đổi Tiêu Lệnh ]|r: "+I2S(B1e[i]),5)
call Qre(AddSpecialEffect("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl",GetUnitX(Bze[i]),GetUnitY(Bze[i])))
else
call Qke(p,"|cffffcc00"+"[ Đổi Tiêu Lệnh ]|r: "+I2S(B1e[i]),5)
endif
else
call Qke(p,"|cffffcc00"+"Bạn vẫn chưa nhận Tiêu Xa",3)
endif
endfunction
function H6x takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,lF)
call TriggerAddCondition(t,Filter(function H4x))
call TriggerAddAction(t,function H0x)
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,jF)
call TriggerAddCondition(t,Filter(function H4x))
call TriggerAddAction(t,function H1x)
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,kF)
call TriggerAddCondition(t,Filter(function H4x))
call TriggerAddAction(t,function H2x)
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,KF)
call TriggerAddCondition(t,Filter(function H4x))
call TriggerAddAction(t,function H3x)
set t=null
endfunction
function H7x takes integer id returns string
if id==2 then
return"war3mapImported\\BTNFrameUI_item_non.blp"
elseif id==6 then
return"war3mapImported\\BTNFrameUI_item_ao.blp"
elseif id==5 then
return"war3mapImported\\BTNFrameUI_item_lung.blp"
elseif id==7 then
return"war3mapImported\\BTNFrameUI_item_tay.blp"
elseif id==$A then
return"war3mapImported\\BTNFrameUI_item_giay.blp"
elseif id==22 then
return"war3mapImported\\BTNFrameUI_item_huychuong.blp"
elseif id==8 then
return"war3mapImported\\BTNFrameUI_item_vukhi.blp"
elseif id==1 then
return"war3mapImported\\BTNFrameUI_item_lien.blp"
elseif id==3 then
return"war3mapImported\\BTNFrameUI_item_nhan.blp"
elseif id==9 then
return"war3mapImported\\BTNFrameUI_item_boi.blp"
elseif id==$B then
return"war3mapImported\\BTNFrameUI_item_hophu.blp"
elseif id==4 then
return"war3mapImported\\BTNFrameUI_item_mattich.blp"
elseif id==$C then
return"war3mapImported\\BTNFrameUI_item_huychuong.blp"
elseif id==$D then
return"war3mapImported\\BTNFrameUI_item_anhhung_non.blp"
elseif id==$E then
return"war3mapImported\\BTNFrameUI_item_anhhung_ao.blp"
elseif id==$F then
return"war3mapImported\\BTNFrameUI_item_phiphong.blp"
elseif id==16 then
return"war3mapImported\\BTNFrameUI_item_chanlinh.blp"
elseif id==17 then
return"war3mapImported\\BTNFrameUI_item_channguyen.blp"
elseif id==18 then
return"war3mapImported\\BTNFrameUI_item_matna.blp"
elseif id==21 then
return"war3mapImported\\BTNFrameUI_item_quanan.blp"
else
return"war3mapImported\\BTNFrameUI_item_trong.blp"
endif
return null
endfunction
function H8x takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local framehandle f=BlzGetTriggerFrame()
if f!=null then
call BlzFrameSetVisible(f,false)
call BlzFrameSetVisible(f,true)
endif
if not EC then
set f=null
set p=null
return false
endif
if ti[id]then
call Qke(p,"|cffff0000"+"Xin đừng thao tác quá nhanh !",5)
set f=null
set p=null
return false
endif
call UMe(id,.5)
if not Ub[id+1]or BQe[id]or bNe[id]or bye[id]or bLe[id]or b5e[id]or bQe[id]or b1e[id]or BHe[id]or b9e[id]then
set f=null
set p=null
return false
endif
if VC[id]then
set VC[id]=false
if bue[(id+1)*(20)+1]!=null then
if GetLocalPlayer()==p then
call Uge(B3e[1],BlzGetItemIconPath(bue[(id+1)*(20)+1]))
endif
endif
if bue[(id+1)*(20)+2]!=null then
if GetLocalPlayer()==p then
call Uge(B3e[2],BlzGetItemIconPath(bue[(id+1)*(20)+2]))
endif
endif
if bue[(id+1)*(20)+3]!=null then
if GetLocalPlayer()==p then
call Uge(B3e[3],BlzGetItemIconPath(bue[(id+1)*(20)+3]))
endif
endif
if bue[(id+1)*(20)+5]!=null then
if GetLocalPlayer()==p then
call Uge(B3e[5],BlzGetItemIconPath(bue[(id+1)*(20)+5]))
endif
endif
if bue[(id+1)*(20)+6]!=null then
if GetLocalPlayer()==p then
call Uge(B3e[6],BlzGetItemIconPath(bue[(id+1)*(20)+6]))
endif
endif
if bue[(id+1)*(20)+7]!=null then
if GetLocalPlayer()==p then
call Uge(B3e[7],BlzGetItemIconPath(bue[(id+1)*(20)+7]))
endif
endif
if bue[(id+1)*(20)+8]!=null then
if GetLocalPlayer()==p then
call Uge(B3e[8],BlzGetItemIconPath(bue[(id+1)*(20)+8]))
endif
endif
if bue[(id+1)*(20)+9]!=null then
if GetLocalPlayer()==p then
call Uge(B3e[9],BlzGetItemIconPath(bue[(id+1)*(20)+9]))
endif
endif
if bue[(id+1)*(20)+$A]!=null then
if GetLocalPlayer()==p then
call Uge(B3e[$A],BlzGetItemIconPath(bue[(id+1)*(20)+$A]))
endif
endif
if bue[(id+1)*(20)+$B]!=null then
if GetLocalPlayer()==p then
call Uge(B3e[$B],BlzGetItemIconPath(bue[(id+1)*(20)+$B]))
endif
endif
if NJ[id+1]>0 then
set uv="war3mapImported\\BTNphiphong_"+I2S(NJ[id+1])+".blp"
if GetLocalPlayer()==p then
call Uge(B3e[$F],uv)
endif
endif
if gJ[id+1]>0 then
set uv="war3mapImported\\BTNquanan_"+I2S(gJ[id+1])+".blp"
if GetLocalPlayer()==p then
call Uge(B3e[21],uv)
endif
endif
if yr[id+1]+Yr[id+1]>0 then
if GetLocalPlayer()==p then
call Uge(B3e[20],Zr[id+1])
endif
endif
if cxe[(id+1)*(20)+1]>0 then
if GetLocalPlayer()==p then
call Uge(B3e[17],lC[id+1])
endif
endif
if jo[id+1]>0 then
if GetLocalPlayer()==p then
call Uge(B3e[22],Ko[id+1])
endif
endif
if bee[(id+1)*(8)+1]+bee[(id+1)*(8)+2]+bee[(id+1)*(8)+3]+bee[(id+1)*(8)+4]+bee[(id+1)*(8)+5]+bee[(id+1)*(8)+6]+bee[(id+1)*(8)+7]+bee[(id+1)*(8)+8]>0 then
if GetLocalPlayer()==p then
call Uge(B3e[16],fo[id+1])
endif
endif
if bHe[(id+1)*(20)+1]>0 then
if GetLocalPlayer()==p then
call Uge(B3e[$E],bJe[(id+1)*(2)+1])
endif
endif
if bHe[(id+1)*(20)+2]>0 then
if GetLocalPlayer()==p then
call Uge(B3e[$D],bJe[(id+1)*(2)+2])
endif
endif
if So[id+1]>0 then
if GetLocalPlayer()==p then
call Uge(B3e[4],wo[id+1])
endif
endif
if BMe[(id+1)*(20)+1]+BMe[(id+1)*(20)+2]+BMe[(id+1)*(20)+3]>=3 then
if GetLocalPlayer()==p then
call Uge(B3e[19],aA[id+1])
endif
endif
if ir[id+1]>0 then
if GetLocalPlayer()==p then
call Uge(B3e[$C],Er[id+1])
endif
endif
endif
if B2e[id]==false then
if GetLocalPlayer()==p then
call BlzFrameSetVisible(wc,true)
endif
set B2e[id]=true
else
set B2e[id]=false
if GetLocalPlayer()==p then
call BlzFrameSetVisible(wc,false)
endif
endif
set f=null
set p=null
return false
endfunction
function H9x takes nothing returns nothing
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local integer yae=LoadInteger(ht,Wc,GetHandleId(f))
local string sVe=B6e[(id)*(23)+yae]
local real x=.285
local real y=.258
local real w=.245
local real h=.265
if B4e[(id)*(23)+yae]!=0 then
if yae==4 then
set sVe=sVe+"|cffadd8e6"+"

Độ luyện: "+I2S(Bme[(id+1)*(20)+3]/ 2)+"/"+I2S(nj[to[id+1]])+"|r"
endif
if yae==23 then
set w=.252
set h=.38
set y=.17
call gGx(id+1)
set sVe=B6e[(id)*(23)+yae]
endif
if GetLocalPlayer()==p then
set zc=B5e[(id)*(23)+yae]
set Zc=sVe
set rC=x
set iC=y
set aC=w
set nC=h
endif
if GetLocalPlayer()==p then
call BlzFrameSetAbsPoint(yc,FRAMEPOINT_BOTTOMLEFT,rC,iC)
call BlzFrameSetSize(yc,aC,nC)
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextTitle",0),zc)
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,true)
endif
endif
set sVe=null
set f=null
set p=null
endfunction
function jvx takes nothing returns nothing
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
if GetLocalPlayer()==p then
call BlzFrameSetVisible(yc,false)
call BlzFrameSetVisible(Yc,false)
endif
set f=null
set p=null
endfunction
function jex takes integer s returns boolean
return(s>=1 and s<=3)or(s>=5 and s<=$B)
endfunction
function jxx takes nothing returns boolean
local framehandle f=BlzGetTriggerFrame()
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
local integer yae=LoadInteger(ht,Wc,GetHandleId(f))
if GetLocalPlayer()==p then
call BlzFrameSetVisible(f,false)
call BlzFrameSetVisible(f,true)
endif
if ti[id]then
call Qke(p,"|cffff0000"+"Xin đừng thao tác quá nhanh !",5)
set f=null
set p=null
return false
endif
if spe(XJ[id+1])then
call Qke(p,"|cffff0000"+"Không thể tháo gỡ trang bị khi đang trọng thương !",5)
set f=null
set p=null
return false
endif
if B4e[(id)*(23)+yae]>0 and jex(yae)then
call Z0e(XJ[id+1],p,id+1,bue[(id+1)*(20)+yae])
set B5e[(id)*(23)+yae]=null
set B6e[(id)*(23)+yae]=null
set B4e[(id)*(23)+yae]=0
if GetLocalPlayer()==p then
call Uge(B3e[yae],H7x(yae))
call BlzFrameSetVisible(yc,true)
call BlzFrameSetVisible(yc,false)
endif
endif
set f=null
set p=null
return false
endfunction
function jox takes integer i,real Q_e,real x,real y returns nothing
set B3e[i]=Uhe(H7x(i))
call Ude(B3e[i],Q_e,x,y)
call Uke(B3e[i],function jxx)
call Ule(B3e[i],function H9x)
call ULe(B3e[i],function jvx)
call SaveInteger(ht,Wc,GetHandleId(B3e[i]),i)
call BlzFrameSetParent(B3e[i],wc)
endfunction
function jrx takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer id=(GetPlayerId((p)))
if B2e[id] then
set B2e[id]=false
if GetLocalPlayer()==p then
call BlzFrameSetVisible(wc,false)
endif
endif
set p=null
return false
endfunction
function jix takes nothing returns nothing
local real z=.01
local real y=.02
set wc=UJe("war3mapImported\\FrameUI_InvenBackground.tga")
call UFe(wc,516,606,.005,.215)
call jox($C,52,z+.065,y+.4823)
call jox($D,52,z+.10184,y+.4823)
call jox($E,52,z+.13868,y+.4823)
call jox($E,52,z+.13868,y+.4823)
call jox($F,52,z+.17552,y+.4823)
call jox(16,52,z+.08342,.47)
call jox(17,52,z+.12026,.47)
call jox(18,52,z+.1571,.47)
call jox(19,52,z+.08342,.2379)
call jox(21,52,z+.12026,.2379)
call jox(20,52,z+.1571,.2379)
call jox(2,52,.032,.4515)
call jox(6,52,.032,.4107)
call jox(5,52,.032,.3699)
call jox(7,52,.032,.3291)
call jox($A,52,.032,.2883)
call jox(22,52,.032,.2475)
call jox(8,52,.228,.4515)
call jox(1,52,.228,.4107)
call jox(3,52,.228,.3699)
call jox(9,52,.228,.3291)
call jox($B,52,.228,.2883)
call jox(4,52,.228,.2475)
call jox(23,80,.022,.4933)
set yc=BlzCreateFrame("BoxedText",BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI,0),0,0)
call BlzFrameSetVisible(wc,false)
call BlzFrameSetVisible(yc,false)
endfunction
function jax takes nothing returns nothing
local trigger t=CreateTrigger()
call BlzLoadTOCFile("war3mapimported\\BoxedText.toc")
call BlzTriggerRegisterPlayerKeyEvent(t,Player(0),OSKEY_B,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(1),OSKEY_B,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(2),OSKEY_B,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(3),OSKEY_B,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(4),OSKEY_B,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(5),OSKEY_B,0,true)
call TriggerAddAction(t,function H8x)
set Uc=Uhe("war3mapImported\\bt5.tga")
call UFe(Uc,58,58,.235,.137)
call Uke(Uc,function H8x)
set t=CreateTrigger()
call TriggerRegisterPlayerEvent(t,Player(0),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(1),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(2),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(3),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(4),EVENT_PLAYER_END_CINEMATIC)
call TriggerRegisterPlayerEvent(t,Player(5),EVENT_PLAYER_END_CINEMATIC)
call TriggerAddAction(t,function jrx)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,10.,false)
call TriggerAddAction(t,function jix)
set t=null
endfunction
function jnx takes nothing returns boolean
local integer CGe=Qce()
set Rbe[CGe]=Rbe[CGe]-1
if Rbe[CGe]<=0 then
call QDe()
set tv=ah
call Txe(tv)
set mv=1
loop
exitwhen mv>6
if XJ[mv]!=null and s1e(XJ[mv],tv)then
call gKx(XJ[mv],Kd)
endif
set mv=mv+1
endloop
call dJe(CGe)
endif
return false
endfunction
function jVx takes nothing returns nothing
local integer CGe=dje()
set Rbe[CGe]=30
call QIe(CGe,1.,true,function jnx)
endfunction
function jEx takes nothing returns boolean
local integer CGe=Qce()
set Rde[CGe]=Rde[CGe]-1
if Rde[CGe]<=0 or RC==2 then
call QDe()
set RC=0
set IC=false
set AC=false
if not spe(XC)then
call FlushChildHashtable(UH,GetHandleId(XC))
call FlushChildHashtable(ht,GetHandleId(XC))
call RemoveUnit(XC)
endif
call jVx()
call DestroyTimerDialog(Rfe[CGe])
call DestroyTimer(RDe[CGe])
set RDe[CGe]=null
set Rfe[CGe]=null
call dHe(CGe)
endif
return false
endfunction
function jXx takes nothing returns nothing
local integer CGe=dhe()
set AC=true
set RDe[CGe]=CreateTimer()
set Rde[CGe]=$4B0
call TimerStart(RDe[CGe],Rde[CGe],false,null)
set Rfe[CGe]=CreateTimerDialog(RDe[CGe])
call TimerDialogSetTitle(Rfe[CGe],"Bách Thắng Đao Vương")
call TimerDialogDisplay(Rfe[CGe],true)
call RemoveUnit(NH)
set XC=CreateUnit(zv,'n098',GetRectCenterX(ih),GetRectCenterY(ih),270)
call UnitAddAbility(XC,Ej[GetRandomInt(1,5)])
call uke(XC,0,0,0,0,0,0,3,0,0,9)
set RC=1
call QIe(CGe,1.,true,function jEx)
endfunction
function jOx takes player p,integer i returns boolean
if not IC then
if not AC then
if OC then
set IC=true
call jXx()
call QKe(rj[i]+"|cffffcc00"+" đã khiêu chiến Bách Thắng Đao Vương",5)
else
call Qke(p,"|cffffcc00"+"Sau 20 phút mới có thể tiến hành khiêu chiến !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản đã được khiêu chiến trước đó !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản này chỉ có thể mở 1 lần trong mỗi trận !",5)
endif
return false
endfunction
function jRx takes rect r returns nothing
local unit n
local player p
call GroupEnumUnitsInRect(sv,r,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
set p=GetOwningPlayer(n)
if p==zv then
call FlushChildHashtable(UH,GetHandleId(n))
call FlushChildHashtable(ht,GetHandleId(n))
call RemoveUnit(n)
endif
call GroupRemoveUnit(sv,n)
endloop
set p=null
set n=null
endfunction
function jIx takes nothing returns nothing
local integer c=1
local integer g0x=0
loop
exitwhen c>6
if XJ[c]!=null then
if s1e(XJ[c],nF)then
call tze(c,5,2,$7D0)
if CC==1 then
call UnitAddItemById(OJ[c],bj[6])
endif
if CC==2 then
call UnitAddItemById(OJ[c],bj[6])
call UnitAddItemById(OJ[c],bj[6])
if GetRandomReal(0,'d')<=30 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=3
endif
if CC==3 then
call UnitAddItemById(OJ[c],bj[7])
if GetRandomReal(0,'d')<=40 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=6
endif
call UnitAddItemById(OJ[c],'I0G9')
set Uv=Player(c-1)
call t_e(c,$3E8,CC)
call tDe(c,R2I(($C8+'d'*CC)*oj),1)
call tHe(c,$C350+$4E20*CC,1)
call tye(c,30+g0x)
call Toe(Uv,$C350+$4E20*CC,R2I(($C8+'d'*CC)*oj),0,TH,0,0)
endif
endif
set c=c+1
endloop
endfunction
function jAx takes unit u,integer i,unit v,integer id,real x,real y returns nothing
if id=='n04W' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v)+" đạt danh hiệu Thiên Hạ Vô Song",5)
set NC=2
call jIx()
call CreateItem('I0AE',x,y)
call tUe(Zj[8],x,y,50)
if GetRandomReal(0,'d')<=30 then
call CreateItem('I0KJ',x,y)
endif
if CC==1 then
call CreateItem('I04C',x,y)
call CreateItem(mj[5],x,y)
call tWe(bj[5],x,y,GetRandomInt(2,3))
call tWe(bj[6],x,y,2)
call CreateItem(bj[7],x,y)
call t6e(i,$A,1)
endif
if CC==2 then
call CreateItem(mj[6],x,y)
call tWe(bj[6],x,y,GetRandomInt(1,2))
call tWe(bj[7],x,y,2)
call CreateItem(bj[8],x,y)
call t6e(i,$A,2)
endif
if CC==3 then
if not bC and dC[i]==1 then
set bGe[(i)*(20)+$E]=1
endif
call CreateItem(mj[6],x,y)
call CreateItem(bj[6],x,y)
call CreateItem(bj[7],x,y)
call tWe(bj[8],x,y,2)
call t6e(i,$A,3)
endif
endif
endfunction
function jNx takes nothing returns boolean
local integer CGe=Qce()
set Rhe[CGe]=Rhe[CGe]-1
if Rhe[CGe]<=0 then
call QDe()
set tv=nF
call Txe(tv)
set mv=1
loop
exitwhen mv>6
if XJ[mv]!=null and s1e(XJ[mv],tv)then
call gKx(XJ[mv],Kd)
endif
set mv=mv+1
endloop
call dGe(CGe)
endif
return false
endfunction
function jbx takes nothing returns nothing
local integer CGe=dge()
set Rhe[CGe]=30
call QIe(CGe,1.,true,function jNx)
endfunction
function jBx takes nothing returns boolean
local integer CGe=Qce()
if Rke[CGe]==$4B0 then
set bC=true
endif
set Rke[CGe]=Rke[CGe]-1
if Rke[CGe]<=0 or NC==2 then
call QDe()
set NC=0
set BC=false
set cC=false
call QKe("|cffff0000"+"[ Hoạt Động ] Phụ bản Hoa Sơn Luận Kiếm đã kết thúc !",5)
call jRx(nF)
call jbx()
call DestroyTimerDialog(Rle[CGe])
call DestroyTimer(RKe[CGe])
set RKe[CGe]=null
set Rle[CGe]=null
call dFe(CGe)
endif
return false
endfunction
function jcx takes integer lv returns nothing
local integer CGe=dfe()
set CC=lv
set cC=true
set RKe[CGe]=CreateTimer()
set Rke[CGe]=$708
call TimerStart(RKe[CGe],Rke[CGe],false,null)
set Rle[CGe]=CreateTimerDialog(RKe[CGe])
call TimerDialogSetTitle(Rle[CGe],"["+I2S(lv)+"*] Hoa Sơn Luận Kiếm")
call TimerDialogDisplay(Rle[CGe],true)
set Qv=CreateUnit(zv,'n04W',GetRectCenterX(EF),GetRectCenterY(EF),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,390*tH,$438,$F230,780*tH,$4BA,80000,CC,7,8,9)
if CC>=3 then
call uJe(Qv)
endif
set NC=1
call QIe(CGe,1.,true,function jBx)
endfunction
function jCx takes player p,integer i,item t returns boolean
local integer lv=S2I(BlzGetItemDescription(t))
local item jdx=Q0e(XJ[i],'I0BE')
if not BC then
if not cC then
if jdx!=null then
call RemoveItem(jdx)
set BC=true
call jcx(lv)
call QKe(rj[i]+"|cffffcc00"+" đã khiêu chiến Hoa Sơn Luận Kiếm - "+Fj[lv],5)
else
call Qke(p,"|cffffcc00"+"Bạn không mang theo Thiệp Anh Hùng !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản đã được khiêu chiến trước đó !",5)
endif
else
call Qke(p,"|cffffcc00"+"Phụ bản này chỉ có thể mở 1 lần trong mỗi trận !",5)
endif
call RemoveItem(t)
set jdx=null
return false
endfunction
function jDx takes rect r returns nothing
local unit n
local player p
call GroupEnumUnitsInRect(sv,r,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
set p=GetOwningPlayer(n)
if p==zv then
call FlushChildHashtable(UH,GetHandleId(n))
call FlushChildHashtable(ht,GetHandleId(n))
call RemoveUnit(n)
endif
call GroupRemoveUnit(sv,n)
endloop
set p=null
set n=null
endfunction
function jfx takes integer id,rect r,integer jFx returns nothing
local integer i=1
loop
exitwhen i>jFx
set Qv=CreateUnit(zv,id,tse(r),tSe(r),270)
call uHe(Qv,0,0,0,hC-1,hC)
set i=i+1
endloop
endfunction
function jgx takes nothing returns boolean
local integer CGe=Qce()
set Rpe[CGe]=Rpe[CGe]-1
if Rpe[CGe]<=0 then
call QDe()
call QKe("|cffff0000"+"[ Lâu Lan Tầm Bảo ] Lâu Lan Thành Chủ đã xuất hiện !",5)
set Qv=CreateUnit(zv,'n031',GetRectCenterX(jD),GetRectCenterY(jD),270)
call UnitAddAbility(Qv,Ej[GetRandomInt(1,5)])
call uke(Qv,$AA*tH,860,$A7F8,580*tH,$488,75000,hC,3,6,9)
if hC>=2 then
call uJe(Qv)
endif
call dDe(CGe)
endif
return false
endfunction
function jGx takes nothing returns nothing
local integer CGe=dde()
set Rpe[CGe]=$A
call QIe(CGe,1.,true,function jgx)
endfunction
function jhx takes integer a,integer dv returns nothing
local integer c=1
local integer g0x=0
set dv=R2I(I2R(dv)*(1.+.5*hC)*oj)
loop
exitwhen c>6
if XJ[c]!=null then
if s1e(XJ[c],DD)then
set Uv=Player(c-1)
if hC==1 then
call UnitAddItemById(OJ[c],bj[4])
call UnitAddItemById(OJ[c],bj[4])
endif
if hC==2 then
call UnitAddItemById(OJ[c],bj[5])
if GetRandomReal(0,'d')<=30 and a==5 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=1
endif
if hC==3 then
call UnitAddItemById(OJ[c],bj[5])
call UnitAddItemById(OJ[c],bj[5])
if GetRandomReal(0,'d')<=40 and a==5 then
call UnitAddItemById(OJ[c],iJ[6])
endif
set g0x=1
endif
if a==5 then
call UnitAddItemById(OJ[c],'I0G9')
endif
call tze(c,3,2,$C8)
call tFe(c,$FA0+$FA0*hC,1)
call tfe(c,'d'+'d'*hC,1)
call tDe(c,R2I((80+40*hC)*oj),1)
call tHe(c,$2710+5000*hC,1)
call tke(c,7,dv,1)
call tye(c,7+g0x)
call Toe(Uv,$2710+5000*hC,R2I((80+40*hC)*oj),$FA0+$FA0*hC,'d'+'d'*hC,dv,7)
endif
endif
set c=c+1
endloop
endfunction
function jHx takes unit u,integer i,unit v,integer id,real x,real y returns nothing
if id=='n02U' or id=='n02V' or id=='n02W' or id=='n02X' then
set DC=DC-1
if DC==0 then
call jhx(1,$C8)
if hC==1 then
if GetRandomReal(0,'d')<=40 then
call U9e(1,GetRandomInt(1,$B),x,y)
endif
call tWe(bj[3],x,y,GetRandomInt(3,4))
call tWe(bj[4],x,y,2)
endif
if hC==2 then
if GetRandomReal(0,'d')<=30 then
call U9e(3,GetRandomInt(1,$B),x,y)
endif
call tWe(bj[4],x,y,GetRandomInt(1,2))
call tWe(bj[5],x,y,2)
endif
if hC==3 then
call U9e(4,GetRandomInt(1,$B),x,y)
call tWe(bj[5],x,y,GetRandomInt(1,2))
call CreateItem(bj[6],x,y)
endif
call QKe("|cffff0000"+"[ Lâu Lan Tầm Bảo ] Phù Thủy Đại Mạc đã xuất hiện !",5)
set Qv=CreateUnit(zv,'n02Y',GetRectCenterX(hD),GetRectCenterY(hD),270)
call uke(Qv,50*tH,580,$5FB4,$E6*tH,950,$BD74,hC,1,4,7)
set fC=2
endif
elseif id=='n02Y' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call jhx(2,300)
if hC==1 then
call U9e(1,GetRandomInt(1,$B),x,y)
call tWe(bj[3],x,y,GetRandomInt(1,2))
call tWe(bj[4],x,y,3)
endif
if hC==2 then
if GetRandomReal(0,'d')<=60 then
call U9e(3,GetRandomInt(1,$B),x,y)
endif
call tWe(bj[4],x,y,GetRandomInt(2,3))
call tWe(bj[5],x,y,2)
endif
if hC==3 then
call U9e(4,GetRandomInt(1,$B),x,y)
if GetRandomReal(0,'d')<=20 then
call U9e(5,GetRandomInt(1,$B),x,y)
endif
call tWe(bj[5],x,y,GetRandomInt(1,2))
call tWe(bj[6],x,y,2)
endif
call QKe("|cffff0000"+"[ Lâu Lan Tầm Bảo ] Lâu Lan Tướng Quân đã xuất hiện !",5)
set Qv=CreateUnit(zv,'n02Z',GetRectCenterX(HD),GetRectCenterY(HD),270)
call uke(Qv,83*tH,660,$7918,300*tH,$3F2,$CB20,hC,2,5,8)
set fC=3
elseif id=='n02Z' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call jhx(3,500)
if hC==1 then
if GetRandomReal(0,'d')<=40 then
call U9e(2,GetRandomInt(1,$B),x,y)
endif
call w8e(9,GetRandomInt(1,5),x,y)
call tWe(bj[3],x,y,GetRandomInt(1,2))
call CreateItem(bj[4],x,y)
call CreateItem(bj[5],x,y)
endif
if hC==2 then
if GetRandomReal(0,'d')<=30 then
call U9e(4,GetRandomInt(1,$B),x,y)
endif
call w8e($B,GetRandomInt(1,5),x,y)
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
endif
if hC==3 then
if GetRandomReal(0,'d')<=50 then
call U9e(5,GetRandomInt(1,$B),x,y)
endif
call tWe(bj[5],x,y,GetRandomInt(2,3))
call tWe(bj[6],x,y,2)
endif
call QKe("|cffff0000"+"[ Lâu Lan Tầm Bảo ] Hoàng Tử Lâu Lan đã xuất hiện !",5)
set Qv=CreateUnit(zv,'n030',GetRectCenterX(jD),GetRectCenterY(jD),270)
call uke(Qv,$8C*tH,800,$9858,360*tH,$42E,$E678,hC,2,6,8)
set fC=4
elseif id=='n030' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
call jhx(4,600)
if hC==1 then
call w8e(9,GetRandomInt(1,5),x,y)
call U9e(1,GetRandomInt(1,$B),x,y)
if GetRandomReal(0,'d')<=70 then
call U9e(2,GetRandomInt(1,$B),x,y)
endif
call tWe(bj[3],x,y,GetRandomInt(1,2))
call tWe(bj[4],x,y,2)
call CreateItem(bj[5],x,y)
endif
if hC==2 then
call U9e(3,GetRandomInt(1,$B),x,y)
if GetRandomReal(0,'d')<=50 then
call U9e(4,GetRandomInt(1,$B),x,y)
endif
call w8e($B,GetRandomInt(1,5),x,y)
call tWe(bj[4],x,y,GetRandomInt(1,2))
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
endif
if hC==3 then
call U9e(5,GetRandomInt(1,$B),x,y)
if GetRandomReal(0,'d')<=25 then
call U9e(6,GetRandomInt(1,$B),x,y)
endif
call CreateItem(bj[5],x,y)
call CreateItem(bj[6],x,y)
call CreateItem(bj[7],x,y)
endif
call jGx()
set fC=5
elseif id=='n031' then
call QKe(rj[i]+" đã đánh bại "+GetUnitName(v),5)
set fC=6
if Bhe[(i)*(8)+3]==1 then
call UnitAddItemById(OJ[i],'I0JF')
call Qke(Player(i-1),"|cffffcc00"+"Vật phẩm nhiệm vụ được chuyển về rương !",5)
endif
if hC==1 then
call CreateItem('I048',x,y)
call CreateItem(mj[2],x,y)
call w8e(9,GetRandomInt(1,5),x,y)
call U9e(2,GetRandomInt(1,$B),x,y)
if GetRandomReal(0,'d')<=30 then
call U9e(3,GetRandomInt(1,$B),x,y)
endif
call tWe(bj[3],x,y,GetRandomInt(1,2))
call CreateItem(bj[4],x,y)
call tWe(bj[5],x,y,3)
call t6e(i,4,1)
endif
if hC==2 then
call CreateItem('I04G',x,y)
call CreateItem(mj[3],x,y)
call U9e(4,GetRandomInt(1,$B),x,y)
call w8e($B,GetRandomInt(1,5),x,y)
if GetRandomReal(0,'d')<=30 then
call U9e(5,GetRandomInt(1,$B),x,y)
endif
call tWe(bj[4],x,y,GetRandomInt(2,3))
call tWe(bj[5],x,y,2)
call tWe(bj[6],x,y,2)
call t6e(i,4,2)
endif
if hC==3 then
call U9e(5,GetRandomInt(1,$B),x,y)
call U9e(6,GetRandomInt(1,$B),x,y)
call CreateItem(mj[5],x,y)
call tWe(bj[5],x,y,GetRandomInt(1,2))
call tWe(bj[6],x,y,2)
call tWe(bj[7],x,y,2)
call t6e(i,4,3)
endif
call jhx(5,800)
elseif id=='n02T' then
call tUe('I054',x,y,5.)
endif
endfunction
function jjx takes nothing returns boolean
local integer CGe=Qce()
set Rse[CGe]=Rse[CGe]-1
if Rse[CGe]<=0 then
call QDe()
set tv=DD
call Txe(tv)
set mv=1
loop
exitwhen mv>6
if XJ[mv]!=null and s1e(XJ[mv],tv)then
call gKx(XJ[mv],Kd)
endif
set mv=mv+1
endloop
call dCe(CGe)
endif
return false
endfunction
function jJx takes nothing returns nothing
local integer CGe=dce()
set Rse[CGe]=30
call QIe(CGe,1.,true,function jjx)
endfunction
function jkx takes nothing returns boolean
local integer CGe=Qce()
set Rue[CGe]=Rue[CGe]-1
if Rue[CGe]<=0 or fC==6 then
call QDe()
set fC=0
set gC=false
set GC=false
call QKe("|cffff0000"+"[ Hoạt Động ] Phụ bản Lâu Lan Tầm Bảo đã kết thúc !",5)
call jDx(DD)
call jJx()
set HC=Rue[CGe]+FC
call DestroyTimerDialog(Rwe[CGe])
call DestroyTimer(RUe[CGe])
set RUe[CGe]=null
set Rwe[CGe]=null
call dBe(CGe)
endif
return false
endfunction
function jKx takes integer lv returns nothing
local integer CGe=dbe()
set hC=lv
set GC=true
set RUe[CGe]=CreateTimer()
set Rue[CGe]=$4B0
set jC=false
set FC=HC+$A
set HC=Rue[CGe]
call TimerStart(RUe[CGe],Rue[CGe],false,null)
set Rwe[CGe]=CreateTimerDialog(RUe[CGe])
call TimerDialogSetTitle(Rwe[CGe],"["+I2S(lv)+"*] Lâu Lan Tầm Bảo")
call TimerDialogDisplay(Rwe[CGe],true)
call jfx('n02T',JD,40)
set Qv=CreateUnit(zv,'n02U',GetRectCenterX(fD),GetRectCenterY(fD),270)
call uke(Qv,47*tH,550,$59D8,$B9*tH,890,$AFC8,hC,1,4,7)
set Qv=CreateUnit(zv,'n02V',GetRectCenterX(FD),GetRectCenterY(FD),270)
call uke(Qv,47*tH,550,$59D8,$B9*tH,890,$AFC8,hC,1,4,7)
set Qv=CreateUnit(zv,'n02W',GetRectCenterX(gD),GetRectCenterY(gD),270)
call uke(Qv,47*tH,550,$59D8,$B9*tH,890,$AFC8,hC,1,4,7)
set Qv=CreateUnit(zv,'n02X',GetRectCenterX(GD),GetRectCenterY(GD),270)
call uke(Qv,47*tH,550,$59D8,$B9*tH,890,$AFC8,hC,1,4,7)
set DC=4
set fC=1
call QIe(CGe,1.,true,function jkx)
endfunction
function jlx takes player p,integer i,item t returns boolean
local integer lv=S2I(BlzGetItemDescription(t))
if gC then
if not GC then
call jKx(lv)
call QKe(rj[i]+"|cffffcc00"+" đã khiêu chiến Lâu Lan Tầm Bảo - "+Fj[lv],5)
else
call Qke(p,"|cffffcc00"+"Phụ bản đã được khiêu chiến trước đó !",5)
endif
else
call Qke(p,"|cffffcc00"+"Hoạt động vẫn chưa mở !",5)
endif
call RemoveItem(t)
return false
endfunction
function jLx takes nothing returns boolean
local integer CGe=Qce()
set Rze[CGe]=Rze[CGe]-1
if Rze[CGe]<=0 then
call QDe()
set gC=false
if FC==0 then
set HC=$4BA
endif
call dNe(CGe)
endif
return false
endfunction
function jmx takes nothing returns boolean
local integer CGe=dAe()
set Rze[CGe]=890
set FC=0
set HC=890
set gC=true
call QKe("|cffff0000"+"[ Hoạt Động ] Lối vào Lâu Lan Cổ Thành đã mở, tới Đôn Hoàng Cổ Thành tìm Yến Tiểu Lâu để tham gia !",5)
call QIe(CGe,1.,true,function jLx)
return false
endfunction
function jMx takes nothing returns boolean
local integer CGe=Qce()
set R1e[CGe]=R1e[CGe]-1
if R1e[CGe]<=0 or spe(R2e[CGe])then
call QDe()
call Tje(R2e[CGe],6729,-15.)
call UnitRemoveAbility(R2e[CGe],'A0HL')
set R2e[CGe]=null
call dIe(CGe)
endif
return false
endfunction
function jpx takes unit u returns nothing
local integer CGe=dRe()
set R2e[CGe]=u
set R1e[CGe]=30
call Tje(u,6729,15.)
call QIe(CGe,1.,true,function jMx)
endfunction
function jPx takes nothing returns boolean
local unit u=GetTriggerUnit()
if GetUnitLifePercent(u)<=30 then
call UnitAddAbility(u,'A0HL')
set jC=true
call jpx(u)
endif
set u=null
return false
endfunction
function jqx takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())=='n031' and jC==false and jPx()
endfunction
function jQx takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$834,true)
call TriggerAddCondition(t,Filter(function jmx))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function jqx))
set t=null
endfunction
function jsx takes player p,integer i returns nothing
local integer c=1
loop
exitwhen c>6
if c!=i then
call SetPlayerAllianceStateBJ(Player(c-1),p,3)
call SetPlayerAllianceStateBJ(p,Player(c-1),3)
endif
set c=c+1
endloop
endfunction
function jSx takes nothing returns nothing
local integer i=1
local player p=null
loop
exitwhen i>6
if B9e[i]>0 then
set p=Player(i-1)
call jsx(p,i)
call gkx(XJ[i],Player(i-1),GetRectCenterX(Tg),GetRectCenterY(Tg))
set p=null
endif
set i=i+1
endloop
endfunction
function jtx takes player p,integer i returns nothing
local integer c=1
loop
exitwhen c>6
if c!=i then
if B9e[c]!=0 then
if B9e[c]==B9e[i]then
call SetPlayerAllianceStateBJ(Player(c-1),p,3)
call SetPlayerAllianceStateBJ(p,Player(c-1),3)
else
call SetPlayerAllianceStateBJ(Player(c-1),p,1)
call SetPlayerAllianceStateBJ(p,Player(c-1),1)
endif
endif
endif
set c=c+1
endloop
endfunction
function jTx takes integer jux,rect r returns nothing
local integer i=1
local player p=null
loop
exitwhen i>6
if B9e[i]==jux then
set p=Player(i-1)
call jtx(p,i)
call gkx(XJ[i],p,GetRectCenterX(r),GetRectCenterY(r))
call SetUnitInvulnerable(XJ[i],true)
set cve[i]=true
set p=null
endif
set i=i+1
endloop
endfunction
function jUx takes nothing returns boolean
local integer CGe=Qce()
if R6e[CGe]==300 then
set kC=false
call QKe("|cffffcc00"+"Thời gian báo danh Liên Đấu đã kết thúc",3)
call DestroyTimer(PC)
call DestroyTimerDialog(qC)
if B8e[1]>0 and B8e[2]>0 then
call QKe("|cffffcc00"+"Trận đấu sẽ bắt đầu sau 15 giây",4)
call jTx(1,Sg)
call jTx(2,tg)
set PC=CreateTimer()
call StartTimerBJ(PC,false,300)
set qC=CreateTimerDialogBJ(PC,"Liên Đấu")
else
call QKe("|cffffcc00"+"Không đủ số người tham gia trận đấu, liên đấu kết thúc!",5)
set JC=false
set R6e[CGe]=0
call jSx()
set cve[1]=false
set cve[2]=false
set cve[3]=false
set cve[4]=false
set cve[5]=false
set cve[6]=false
set B9e[1]=0
set B9e[2]=0
set B9e[3]=0
set B9e[4]=0
set B9e[5]=0
set B9e[6]=0
set B8e[1]=0
set B8e[2]=0
endif
endif
if R6e[CGe]==285 then
call QKe("|cffff0000"+"Liên đấu chính thức bắt đầu, 2 đội có thể tấn công nhau!!!",3)
call SetUnitInvulnerable(XJ[1],false)
call SetUnitInvulnerable(XJ[2],false)
call SetUnitInvulnerable(XJ[3],false)
call SetUnitInvulnerable(XJ[4],false)
call SetUnitInvulnerable(XJ[5],false)
call SetUnitInvulnerable(XJ[6],false)
endif
if KC then
call DestroyTimer(PC)
call DestroyTimerDialog(qC)
set KC=false
set R6e[CGe]=0
call jSx()
set JC=false
set B8e[1]=0
set B8e[2]=0
set cve[1]=false
set cve[2]=false
set cve[3]=false
set cve[4]=false
set cve[5]=false
set cve[6]=false
set B9e[1]=0
set B9e[2]=0
set B9e[3]=0
set B9e[4]=0
set B9e[5]=0
set B9e[6]=0
endif
set R6e[CGe]=R6e[CGe]-1
if R6e[CGe]<=0 then
call QDe()
if JC then
call DestroyTimer(PC)
call DestroyTimerDialog(qC)
set JC=false
call QKe("|cffffcc00"+"Liên đấu kết thúc, kết quả hòa nhau !",5)
call jSx()
set B8e[1]=0
set B8e[2]=0
set cve[1]=false
set cve[2]=false
set cve[3]=false
set cve[4]=false
set cve[5]=false
set cve[6]=false
set B9e[1]=0
set B9e[2]=0
set B9e[3]=0
set B9e[4]=0
set B9e[5]=0
set B9e[6]=0
endif
call dOe(CGe)
endif
return false
endfunction
function jwx takes nothing returns boolean
local integer CGe=dXe()
set R6e[CGe]=360
call QIe(CGe,1.,true,function jUx)
return false
endfunction
function jWx takes nothing returns nothing
if not JC then
set PC=CreateTimer()
call StartTimerBJ(PC,false,60)
set qC=CreateTimerDialogBJ(PC,"Liên Đấu Báo Danh")
call QKe("|cffffcc00"+"Quá trình báo danh Liên Đấu diễn ra trong 1 phút",5)
call jwx()
set JC=true
set kC=true
set B8e[1]=0
set B8e[2]=0
else
call QKe("|cffffcc00"+"Liên đấu đã được đăng ký!",3)
endif
endfunction
function jyx takes unit u,player p,integer i,integer jux returns boolean
if vo[i]then
call Qke(p,"|cffff0000"+"Không thể tham gia liên đấu khi đang bật PK !",5)
return false
endif
if kC then
if jux==1 then
if B8e[1]<3 then
set B8e[1]=B8e[1]+1
call QKe(rj[i]+" đã tham gia Liên Đấu đội ngũ 1",3)
call QKe("|cffffff00"+"Số người tham gia Liên Đấu hiện tại giữa 2 đội: "+I2S(B8e[1])+" - "+I2S(B8e[2]),3)
set B9e[i]=jux
call gkx(u,p,GetRectCenterX(Qg),GetRectCenterY(Qg))
else
call Qke(p,"|cffffcc00"+"Đội ngũ Liên Đấu bạn muốn tham gia đã đầy",3)
endif
elseif jux==2 then
if B8e[2]<3 then
set B8e[2]=B8e[2]+1
call QKe(rj[i]+" đã tham gia Liên Đấu đội ngũ 2",3)
call QKe("|cffffff00"+"Số người tham gia Liên Đấu hiện tại giữa 2 đội: "+I2S(B8e[1])+" - "+I2S(B8e[2]),3)
set B9e[i]=jux
call gkx(u,p,GetRectCenterX(sg),GetRectCenterY(sg))
else
call Qke(p,"|cffffcc00"+"Đội ngũ Liên Đấu bạn muốn tham gia đã đầy",3)
endif
endif
else
call QKe("|cffffcc00"+"Thời gian báo danh Liên Đấu đã kết thúc",3)
endif
return false
endfunction
function jYx takes unit u,unit v,player p,player q,integer i,integer j returns boolean
call QKe(rj[i]+" đánh bại "+rj[j]+" tại lôi đài liên đấu !",5)
set cve[j]=false
set B8e[B9e[j]]=B8e[B9e[j]]-1
if B8e[B9e[j]]==0 then
set KC=true
call QKe("Đội ngũ của "+rj[i]+" tại lôi đài liên đấu đánh bại đội ngũ đối phương giành chiến thắng, xin chúc mừng !",3)
endif
return false
endfunction
function jzx takes integer i returns integer
local integer lv=cxe[(i)*(20)+1]+cxe[(i)*(20)+2]+cxe[(i)*(20)+3]+cxe[(i)*(20)+4]
if lv>=4 then
return lv-3
endif
return 0
endfunction
function jZx takes nothing returns string
local string cKx="123456789"
local string n=""
local string m=""
local string j_x=""
local integer i=1
local integer c=0
local integer rd=0
local integer k=0
loop
exitwhen i>4
set rd=GetRandomInt(1,StringLength(cKx))
set k=S2I(SubString(cKx,rd-1,rd))
set j_x=j_x+I2S(k)
set c=1
loop
exitwhen c>StringLength(cKx)
set n=SubString(cKx,c-1,c)
if S2I(n)!=k then
set m=m+n
endif
set c=c+1
endloop
set cKx=m
set n=""
set m=""
set i=i+1
endloop
set uv=j_x
set cKx=null
set n=null
set m=null
set j_x=null
return uv
endfunction
function j0x takes unit u,integer TMe,integer U3e,real r returns nothing
if TMe==1 then
call T_e(u,.04*U3e*r)
elseif TMe==2 then
call TWe(u,.4*U3e*r)
elseif TMe==3 then
call Tue(u,24*U3e*r)
elseif TMe==4 then
call T5e(u,55*U3e*r)
elseif TMe==5 then
call Tje(u,Vx,.04*U3e*r)
elseif TMe==6 then
call Tje(u,4888,40*U3e*r)
elseif TMe==7 then
call Tje(u,Cx,.04*U3e*r)
elseif TMe==8 then
call T6e(u,55*U3e*r)
elseif TMe==9 then
call Tje(u,6780,65*U3e*r)
endif
endfunction
function j1x takes integer TMe,integer U3e returns string
if TMe==1 then
return"Diên Dương|r
- Tỉ lệ sinh lực + "+I2S(4*U3e)+"%"
elseif TMe==2 then
return"Cường Thân|r
- Sát thương ngũ hành + "+I2S(40*U3e)+"%"
elseif TMe==3 then
return"Vô Song|r
- Kháng tất cả + "+I2S(24*U3e)
elseif TMe==4 then
return"Tinh Võ|r
- Công kích ngoại công + "+I2S(55*U3e)
elseif TMe==5 then
return"Tạ Kinh|r
- Chịu sát thương chí mạng - "+I2S(4*U3e)+"%"
elseif TMe==6 then
return"Tuyệt Sát|r
- Chí mạng + "+I2S(40*U3e)
elseif TMe==7 then
return"Thực Cốt|r
- Độc sát duy trì + "+I2S(4*U3e)+"%"
elseif TMe==8 then
return"Thanh Phong|r
- Công kích nội công + "+I2S(55*U3e)
else
return"Truy ảnh|r
- Chính xác + "+I2S(65*U3e)
endif
endfunction
function j2x takes integer lv returns string
if lv==1 then
return"|cff7fff00**|r"
elseif lv==2 then
return"|cff0078d7***|r"
elseif lv==3 then
return"|cff9370db****|r"
elseif lv==4 then
return"|cffffa500*****|r"
elseif lv==5 then
return"|cffffa500******|r"
elseif lv==6 then
return"|cffffa500*******|r"
elseif lv==7 then
return"|cffffa500********|r"
elseif lv==8 then
return"|cffffff00*********|r"
else
return"|cffffff00**********|r"
endif
endfunction
function j3x takes integer lv,boolean b returns string
if b then
if lv>=1 and lv<=6 then
return "|cff7fff00"
elseif lv>=7 and lv<=9 then
return "|cff0078d7"
elseif lv>=$A and lv<=$C then
return "|cff9370db"
elseif lv>=$D and lv<=24 then
return "|cffffa500"
else
return "|cffffff00"
endif
else
if lv>=1 and lv<=3 then
return"*"
elseif lv>=4 and lv<=6 then
return"**"
elseif lv>=7 and lv<=9 then
return"***"
elseif lv>=$A and lv<=$C then
return"****"
elseif lv>=$D and lv<=$F then
return"*****"
elseif lv>=16 and lv<=18 then
return"******"
elseif lv>=19 and lv<=21 then
return"*******"
elseif lv>=22 and lv<=24 then
return"********"
elseif lv>=25 and lv<=27 then
return"*********"
else
return"**********"
endif
endif
endfunction
function j4x takes integer lv returns string
if lv>=1 and lv<=6 then
return"war3mapImported\\BTNChanNguyen_1.blp"
elseif lv>=7 and lv<=9 then
return"war3mapImported\\BTNChanNguyen_2.blp"
elseif lv>=$A and lv<=$C then
return"war3mapImported\\BTNChanNguyen_3.blp"
elseif lv>=$D and lv<=18 then
return"war3mapImported\\BTNChanNguyen_4.blp"
elseif lv>=19 and lv<=24 then
return"war3mapImported\\BTNChanNguyen_5.blp"
elseif lv>=25 and lv<=27 then
return"war3mapImported\\BTNChanNguyen_6.blp"
else
return"war3mapImported\\BTNChanNguyen_7.blp"
endif
endfunction
function j5x takes integer i returns nothing
local integer lv=jzx(i)
local string s="Loại: chân nguyên
"
set s=s+"Cấp độ: "+I2S(lv)+"/30
"
set s=s+"Tài phú: "+I2S((lv+3)*$A5A)+"

"
set s=s+"|cff0078d7Cấp sao thuộc tính và tư chất|r
"
set s=s+"|cff7fff00"+"[ "+I2S(cxe[(i)*(20)+1])+"/9 ] "+j1x(cee[(i)*(20)+1],cxe[(i)*(20)+1])+"
"
set s=s+j2x(cxe[(i)*(20)+1])+"

"
set s=s+"|cff7fff00"+"[ "+I2S(cxe[(i)*(20)+2])+"/9 ] "+j1x(cee[(i)*(20)+2],cxe[(i)*(20)+2])+"
"
set s=s+j2x(cxe[(i)*(20)+2])+"

"
set s=s+"|cff7fff00"+"[ "+I2S(cxe[(i)*(20)+3])+"/9 ] "+j1x(cee[(i)*(20)+3],cxe[(i)*(20)+3])+"
"
set s=s+j2x(cxe[(i)*(20)+3])+"

"
set s=s+"|cff7fff00"+"[ "+I2S(cxe[(i)*(20)+4])+"/9 ] "+j1x(cee[(i)*(20)+4],cxe[(i)*(20)+4])+"
"
set s=s+j2x(cxe[(i)*(20)+4])
set eC=j3x(lv,true)+"Chân Nguyên Hộ Thể ["+I2S(lv)+"]
"+j3x(lv,false)+"|r"
set oC=j4x(lv)
set xC=s
set lC[i]=oC
set s=null
endfunction
function j6x takes item t,string z returns nothing
local string s="Loại: chân nguyên
"
set s=s+"Cấp độ: 1/30
"
set s=s+"Tài phú: 10600

"
set s=s+"|cff0078d7Cấp sao thuộc tính và tư chất|r
"
set s=s+"|cff7fff00"+"[ 1/9 ] "+j1x(S2I(SubString(z,0,1)),1)+"
"
set s=s+"|cff7fff00**|r

"
set s=s+"|cff7fff00"+"[ 1/9 ] "+j1x(S2I(SubString(z,1,2)),1)+"
"
set s=s+"|cff7fff00**|r

"
set s=s+"|cff7fff00"+"[ 1/9 ] "+j1x(S2I(SubString(z,2,3)),1)+"
"
set s=s+"|cff7fff00**|r

"
set s=s+"|cff7fff00"+"[ 1/9 ] "+j1x(S2I(SubString(z,3,4)),1)+"
"
set s=s+"|cff7fff00**|r"
call BlzSetItemName(t,"|cff7fff00"+"Chân Nguyên Hộ Thể [1]
*|r")
call BlzSetItemIconPath(t,"war3mapImported\\BTNChanNguyen_1.blp")
call BlzSetItemExtendedTooltip(t,s)
call BlzSetItemDescription(t,s)
set s=null
endfunction
function j7x takes unit u,integer i,item t returns nothing
local player p=GetOwningPlayer(u)
local integer lv=jzx(i)
local integer id=GetHandleId(t)
local string s=LoadStr(IT,id,7312)
if lv==0 then
call FlushChildHashtable(IT,id)
call RemoveItem(t)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã kích hoạt Chân Nguyên mới !",5)
set cee[(i)*(20)+1]=S2I(SubString(s,0,1))
set cee[(i)*(20)+2]=S2I(SubString(s,1,2))
set cee[(i)*(20)+3]=S2I(SubString(s,2,3))
set cee[(i)*(20)+4]=S2I(SubString(s,3,4))
set cxe[(i)*(20)+1]=1
set cxe[(i)*(20)+2]=1
set cxe[(i)*(20)+3]=1
set cxe[(i)*(20)+4]=1
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+$2968*2
call tCe(i,$2968,1)
call j0x(XJ[i],cee[(i)*(20)+1],cxe[(i)*(20)+1],1)
call j0x(XJ[i],cee[(i)*(20)+2],cxe[(i)*(20)+2],1)
call j0x(XJ[i],cee[(i)*(20)+3],cxe[(i)*(20)+3],1)
call j0x(XJ[i],cee[(i)*(20)+4],cxe[(i)*(20)+4],1)
call j5x(i)
set B4e[(i-1)*(23)+17]=17
set B5e[(i-1)*(23)+17]=eC
set B6e[(i-1)*(23)+17]="
"+xC
if GetLocalPlayer()==p then
call Uge(B3e[17],oC)
endif
else
call Qke(p,"|cffffcc00"+"Bạn cần phải giải phóng Chân Nguyên trước đó !",5)
endif
set s=null
set p=null
endfunction
function j8x takes unit u,player p,integer i returns nothing
local item t=UnitItemInSlot(u,0)
local integer id=GetHandleId(t)
local string s=""
if tHe(i,SH,0)and tFe(i,3*sH,0)then
if S2I(SubString(LoadStr(IT,id,4358),0,1))==6 then
call tHe(i,SH,De)
call tFe(i,3*sH,De)
call FlushChildHashtable(IT,id)
call RemoveItem(t)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã ngưng tụ Chân Nguyên !",5)
set s=jZx()
set Sv=CreateItem('I0GA',GetUnitX(OJ[i]),GetUnitY(OJ[i]))
call SaveStr(IT,GetHandleId(Sv),7312,s)
call j6x(Sv,s)
call UnitAddItem(u,Sv)
else
call Qke(p,"|cffffcc00"+"Yêu cầu đặt Thiệp Đồng Hành (6 Kỹ Năng) tại ô đầu tiên trong hành trang (Numpad 7)!",5)
endif
else
call Qke(p,"|cffffcc00"+"Bạc hoặc chân khí không đủ yêu cầu !",5)
endif
set s=null
set t=null
endfunction
function j9x takes unit u,integer i returns nothing
local player p=GetOwningPlayer(u)
local integer lv=jzx(i)
if lv>0 then
call j0x(u,cee[(i)*(20)+1],cxe[(i)*(20)+1],De)
call j0x(u,cee[(i)*(20)+2],cxe[(i)*(20)+2],De)
call j0x(u,cee[(i)*(20)+3],cxe[(i)*(20)+3],De)
call j0x(u,cee[(i)*(20)+4],cxe[(i)*(20)+4],De)
set cxe[(i)*(20)+1]=0
set cxe[(i)*(20)+2]=0
set cxe[(i)*(20)+3]=0
set cxe[(i)*(20)+4]=0
set cee[(i)*(20)+1]=0
set cee[(i)*(20)+2]=0
set cee[(i)*(20)+3]=0
set cee[(i)*(20)+4]=0
set B5e[(i-1)*(23)+17]=null
set B6e[(i-1)*(23)+17]=null
set B4e[(i-1)*(23)+17]=0
set oC="war3mapImported\\BTNFrameUI_item_channguyen.blp"
if GetLocalPlayer()==p then
call Uge(B3e[17],oC)
call BlzFrameSetVisible(yc,true)
call BlzFrameSetVisible(yc,false)
endif
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]-(lv+3)*$A5A*2
call tCe(i,(lv+3)*$A5A,De)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Bạn đã giải phóng Chân Nguyên !",5)
else
call Qke(p,"|cffffcc00"+"Bạn vẫn chưa kích hoạt Chân Nguyên !",5)
endif
set p=null
endfunction
function Jvx takes integer i returns nothing
local boolean b=false
local integer c=0
loop
set c=GetRandomInt(1,4)
if cxe[(i)*(20)+c]<9 then
set cxe[(i)*(20)+c]=cxe[(i)*(20)+c]+1
set b=true
set mv=c
endif
exitwhen b
endloop
endfunction
function Jex takes unit u,integer i,integer z returns nothing
local player p=GetOwningPlayer(u)
local integer lv=jzx(i)
if z==1 then
if lv>=1 and lv<$A then
if GetRandomReal(0,'d')<=(75-lv*2)then
call Jvx(i)
call j0x(XJ[i],cee[(i)*(20)+mv],1,1)
call j5x(i)
set B4e[(i-1)*(23)+17]=17
set B5e[(i-1)*(23)+17]=eC
set B6e[(i-1)*(23)+17]="
"+xC
if GetLocalPlayer()==p then
call Uge(B3e[17],oC)
set zc=eC
set Zc="
"+xC
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextTitle",0),zc)
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+$A5A*2
call tCe(i,$A5A,1)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Tu luyện Chân Nguyên thành công, xin chúc mừng !",5)
else
call Qke(p,"|cffffcc00"+"Tu luyện Chân Nguyên thất bại, thật đáng tiếc !",5)
endif
else
call Qke(p,"|cffffcc00"+"Cấp độ tu luyện Chân Nguyên không đúng !",5)
endif
elseif z==2 then
if lv>=$A and lv<20 then
if GetRandomReal(0,'d')<=(75-lv*2)then
call Jvx(i)
call j0x(XJ[i],cee[(i)*(20)+mv],1,1)
call j5x(i)
set B4e[(i-1)*(23)+17]=17
set B5e[(i-1)*(23)+17]=eC
set B6e[(i-1)*(23)+17]="
"+xC
if GetLocalPlayer()==p then
call Uge(B3e[17],oC)
set zc=eC
set Zc="
"+xC
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextTitle",0),zc)
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+$A5A*2
call tCe(i,$A5A,1)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Tu luyện Chân Nguyên thành công, xin chúc mừng !",5)
else
call Qke(p,"|cffffcc00"+"Tu luyện Chân Nguyên thất bại, thật đáng tiếc !",5)
endif
else
call Qke(p,"|cffffcc00"+"Cấp độ tu luyện Chân Nguyên không đúng !",5)
endif
elseif z==3 then
if lv>=20 and lv<30 then
if GetRandomReal(0,'d')<=(75-lv*2)then
call Jvx(i)
call j0x(XJ[i],cee[(i)*(20)+mv],1,1)
call j5x(i)
set B4e[(i-1)*(23)+17]=17
set B5e[(i-1)*(23)+17]=eC
set B6e[(i-1)*(23)+17]="
"+xC
if GetLocalPlayer()==p then
call Uge(B3e[17],oC)
set zc=eC
set Zc="
"+xC
endif
call BlzFrameSetText(BlzGetFrameByName("BoxedTextTitle",0),zc)
call BlzFrameSetText(BlzGetFrameByName("BoxedTextValue",0),Zc)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+$A5A*2
call tCe(i,$A5A,1)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call Qke(p,"|cffffcc00"+"Tu luyện Chân Nguyên thành công, xin chúc mừng !",5)
else
call Qke(p,"|cffffcc00"+"Tu luyện Chân Nguyên thất bại, thật đáng tiếc !",5)
endif
else
call Qke(p,"|cffffcc00"+"Cấp độ tu luyện Chân Nguyên không đúng !",5)
endif
endif
set p=null
endfunction
function Jxx takes unit u,player p,integer i,integer w5e returns nothing
local integer lv=6
local integer c=0
local integer id=0
local item t=null
local integer z='I063'
if w5e=='I0AG' then
set lv=4
set z='I061'
elseif w5e=='I0AH' then
set lv=5
set z='I062'
endif
loop
exitwhen c>5
set t=UnitItemInSlot(u,c)
set id=GetHandleId(t)
if S2I(SubString(LoadStr(IT,id,4358),0,1))==lv then
call FlushChildHashtable(IT,id)
call RemoveItem(t)
call UnitAddItemById(u,z)
endif
set c=c+1
endloop
set t=null
endfunction
function Jox takes integer i,integer tJe returns nothing
call j0x(XJ[i],cee[(i)*(20)+tJe],cxe[(i)*(20)+tJe],1)
call j5x(i)
set Bue[(3)*(20)+i]=Bue[(3)*(20)+i]+$A5A*cxe[(i)*(20)+tJe]*2
call tCe(i,$A5A*cxe[(i)*(20)+tJe],1)
set B4e[(i-1)*(23)+17]=17
set B5e[(i-1)*(23)+17]=eC
set B6e[(i-1)*(23)+17]="
"+xC
endfunction
function JEx takes nothing returns nothing
local integer i=0
call FogEnable(false)
call FogMaskEnable(false)
call SetTimeOfDay(10.)
call UseTimeOfDayBJ(false)
call PlayMusic("Sound\\soundtrack.mp3")
loop
exitwhen i>5
if sBe(Player(i))then
set Nk=Nk+1
endif
set B2e[i]=false
set BQe[i]=false
set bNe[i]=false
set bye[i]=false
set bLe[i]=false
set b5e[i]=false
set bQe[i]=false
set b1e[i]=false
set BHe[i]=false
set b9e[i]=false
set i=i+1
endloop
call Qye('A026')
call Qye('A027')
call Qye('A028')
call Qye('A029')
call Qye('A02A')
endfunction
function JXx takes nothing returns nothing
call QKe("|cffff0000"+"Đang tải dữ liệu nền . . .",1)
set aj[1]='H002'
set aj[2]='H003'
set aj[3]='H000'
set aj[4]='H001'
set aj[5]='H004'
set aj[6]='H005'
set aj[7]='H007'
set aj[8]='H006'
set aj[9]='H00A'
set aj[$A]='H00B'
set aj[$B]='H008'
set aj[$C]='H009'
set aj[$D]='H00C'
set aj[$E]='H00D'
set aj[$F]='H00E'
set aj[16]='H00F'
set aj[17]='H00G'
set aj[18]='H00H'
set aj[19]='H00I'
set aj[20]='H00J'
set aj[21]='H00L'
set aj[22]='H00M'
set aj[23]='H00N'
set aj[24]='H00Q'
set aj[25]='H00O'
set aj[26]='H00P'
set oJ[1]='A0WL'
set oJ[2]='A0WM'
set oJ[3]='A0WN'
set oJ[4]='A0WO'
set oJ[5]='A0WP'
set oJ[6]='A0WQ'
set oJ[7]='A0WR'
set oJ[8]='A0WS'
set oJ[9]='A0WT'
set oJ[$A]='A0WU'
set oJ[$B]='A0WV'
set oJ[$C]='A0WW'
set oJ[$D]='A0WX'
set oJ[$E]='A0WY'
set oJ[$F]='A0WZ'
set oJ[16]='A0X0'
set oJ[17]='A0X1'
set oJ[18]='A0X2'
set oJ[19]='A0X3'
set oJ[20]='A0X4'
set oJ[21]='A0X5'
set oJ[22]='A0X6'
set oJ[23]='A0X7'
set oJ[24]='A0X8'
set oJ[25]='A0X9'
set oJ[26]='A0XA'
set cRe[(1)*(20)+1]='H00S'
set cRe[(1)*(20)+2]='H00R'
set cRe[(2)*(20)+1]='H00T'
set cRe[(2)*(20)+2]='H00U'
set cRe[(3)*(20)+1]='H00V'
set cRe[(3)*(20)+2]='H00W'
set cRe[(4)*(20)+1]='H00X'
set cRe[(4)*(20)+2]='H00Y'
set cRe[(5)*(20)+1]='H00Z'
set cRe[(5)*(20)+2]='H010'
set cRe[(6)*(20)+1]='H011'
set cRe[(6)*(20)+2]='H012'
set cRe[(7)*(20)+1]='H013'
set cRe[(7)*(20)+2]='H014'
set cRe[(8)*(20)+1]='H015'
set cRe[(8)*(20)+2]='H016'
set cRe[(9)*(20)+1]='H017'
set cRe[(9)*(20)+2]='H018'
set cRe[($A)*(20)+1]='H019'
set cRe[($A)*(20)+2]='H01A'
set cRe[($B)*(20)+1]='H01B'
set cRe[($B)*(20)+2]='H01C'
set cRe[($C)*(20)+1]='H01D'
set cRe[($C)*(20)+2]='H01E'
set cRe[($D)*(20)+1]='H01T'
set cRe[($D)*(20)+2]='H01U'
set cRe[($E)*(20)+1]='H01F'
set cRe[($E)*(20)+2]='H01G'
set cRe[($F)*(20)+1]='H01H'
set cRe[($F)*(20)+2]='H01I'
set cRe[(16)*(20)+1]='H01L'
set cRe[(16)*(20)+2]='H01M'
set cRe[(17)*(20)+1]='H01N'
set cRe[(17)*(20)+2]='H01O'
set cRe[(18)*(20)+1]='H01P'
set cRe[(18)*(20)+2]='H01Q'
set cRe[(19)*(20)+1]='H01R'
set cRe[(19)*(20)+2]='H01S'
set nj[0]=0
set nj[1]=5000
set nj[2]=$3A98
set nj[3]=$61A8
set nj[4]=$9C40
set nj[5]=$EA60
set nj[6]=90000
set nj[7]=$1FBD0
set nj[8]=$2BF20
set nj[9]=$3D090
set nj[$A]=$3D090
set wj[1]='A0QC'
set wj[2]='A0QD'
set wj[3]='A0QE'
set wj[4]='A0QF'
set wj[5]='A0QG'
set wj[6]='A0QH'
set wj[7]='A0YY'
set vJ[1]='I0GI'
set vJ[2]='I0HJ'
set vJ[3]='I0HK'
set vJ[4]='I0I7'
set vJ[5]='I0I8'
set vJ[6]='I0I9'
set dj[1]=$C8
set dj[2]=500
set dj[3]=$5DC
set dj[4]=$FA0
set dj[5]=8000
set dj[6]=$3A98
set dj[7]=$7530
set dj[8]=$EA60
set dj[9]=$186A0
set dj[$A]=$249F0
set dj[$B]=$30D40
set dj[$C]=$493E0
set dj[$D]=$7A120
set Tj[4]='I0BI'
set Tj[8]='I054'
set Tj[9]='I057'
set Tj[16]='I00A'
set Tj[17]='I08M'
set Tj[19]='I0GL'
set Jj[8]=$3E8
set Jj[9]=5000
set Jj[$A]=$61A8
set Jj[$B]=75000
set Jj[$C]=$36EE8
set Jj[$D]=$76688
set Uj[1]='n013'
set Uj[2]='n06V'
set Uj[3]='n06W'
set Uj[4]='n06X'
set Uj[5]='n06Y'
set Uj[6]='n06Z'
set Uj[7]='n070'
set Uj[8]='n071'
set Uj[9]='n072'
set Uj[$A]='n073'
set Uj[$B]='n074'
set Uj[$C]='n075'
set Uj[$D]='n076'
set Uj[$E]='n077'
set Uj[$F]='n078'
set Uj[16]='n079'
set Uj[17]='n07A'
set Uj[18]='n07B'
set Uj[19]='n07C'
set Uj[20]='n07D'
set Uj[21]='n07E'
set Uj[22]='n07F'
set Uj[23]='n07G'
set Uj[24]='n07H'
set Uj[25]='n07J'
set Uj[26]='n07I'
set Uj[27]='n08I'
set Uj[28]='n09I'
set Uj[29]='n0AY'
set Uj[30]='n0AZ'
set cOe[(1)*($B)+1]='A0OV'
set cOe[(1)*($B)+2]='A0OW'
set cOe[(1)*($B)+3]='A0OX'
set cOe[(1)*($B)+4]='A0OY'
set cOe[(1)*($B)+5]='A0OZ'
set cOe[(1)*($B)+6]='A0P0'
set cOe[(1)*($B)+7]='A0P2'
set cOe[(1)*($B)+8]='A0P1'
set cOe[(1)*($B)+9]='A0P3'
set cOe[(1)*($B)+$A]='A0P4'
set cOe[(1)*($B)+$B]='A0YZ'
set cOe[(2)*($B)+1]='A0P5'
set cOe[(2)*($B)+2]='A0P6'
set cOe[(2)*($B)+3]='A0P7'
set cOe[(2)*($B)+4]='A0P8'
set cOe[(2)*($B)+5]='A0OZ'
set cOe[(2)*($B)+6]='A0P9'
set cOe[(2)*($B)+7]='A0PB'
set cOe[(2)*($B)+8]='A0P1'
set cOe[(2)*($B)+9]='A0PC'
set cOe[(2)*($B)+$A]='A0P4'
set cOe[(2)*($B)+$B]='A0YZ'
set Hj[1]='A0HN'
set Hj[2]='A0HO'
set Hj[3]='A0HP'
set cne[(1)*(20)+1]='A0ET'
set cne[(1)*(20)+2]='A0EU'
set cne[(1)*(20)+3]='A0EV'
set cne[(1)*(20)+4]='A0EW'
set cne[(1)*(20)+5]='A0EX'
set cne[(2)*(20)+1]='A0EY'
set cne[(2)*(20)+2]='A0EZ'
set cne[(2)*(20)+3]='A0F0'
set cne[(2)*(20)+4]='A0F1'
set cne[(2)*(20)+5]='A0F2'
set cne[(3)*(20)+0]='A0F3'
set cne[(4)*(20)+0]='A0F4'
set cne[(5)*(20)+1]='A0F5'
set cne[(5)*(20)+2]='A0F6'
set cne[(5)*(20)+3]='A0F7'
set cne[(5)*(20)+4]='A0F8'
set cne[(5)*(20)+5]='A0F9'
set cne[(6)*(20)+0]='A0FA'
set cne[(7)*(20)+0]='A0FB'
set cne[(8)*(20)+0]='A0FC'
set cne[(9)*(20)+0]='A0FD'
set kj[1]='n064'
set kj[2]='n065'
set kj[3]='n066'
set kj[4]='n067'
set Gj[1]='n04A'
set Gj[2]='n04G'
set Gj[3]='n04J'
set Gj[4]='n04H'
set Gj[5]='n04I'
set xJ[1]='I0IL'
set xJ[2]='I0IM'
set xJ[3]='I0IN'
set xJ[4]='I0IO'
set xJ[5]='I0IP'
set xJ[6]='I0IQ'
set xJ[7]='I0IR'
set xJ[8]='I0IS'
set Dj[1]=6000
set Dj[2]=6000
set Dj[3]=6000
set Dj[4]=$BB8
set Dj[5]=$BB8
set Dj[6]=$BB8
set Dj[7]=$5DC
set Dj[8]=$5DC
set Dj[9]=$5DC
set Dj[$A]=750
set Dj[$B]=750
set Dj[$C]=750
set Dj[$D]=325
set Dj[$E]=325
set Dj[$F]=325
set Dj[16]=162.5
set Dj[17]=162.5
set Dj[18]=162.5
set Dj[19]=81.25
set Dj[20]=81.25
set Dj[21]=81.25
set Dj[22]=40.625
set Dj[23]=40.625
set Dj[24]=40.625
set Dj[25]=20.3125
set Dj[26]=20.3125
set Dj[27]=20.3125
set Dj[28]=10.15625
set Dj[29]=10.15625
set sj[1]=$B4
set sj[2]=300
set sj[3]=450
set sj[4]=900
set sj[5]=$708
set sj[6]=$BB8
set sj[7]=7200
set sj[8]=$4650
set sj[9]=$8CA0
set sj[$A]=90000
set sj[$B]=$2BF20
set sj[$C]=$41EB0
set sj[$D]=$57E40
set sj[$E]=$6DDD0
set Sj[1]=500
set Sj[2]=$3E8
set Sj[3]=$7D0
set Sj[4]=$FA0
set Sj[5]=8000
set Sj[6]=$3E80
set Sj[7]=$7D00
set Sj[8]=$FA00
set zH[1]=$C8
set zH[2]=500
set zH[3]=$3E8
set zH[4]=$7D0
set zH[5]=$FA0
set zH[6]=8000
set zH[7]=$3E80
set zH[8]=$7530
set zH[9]=$C350
set zH[$A]=70000
set zH[$B]=94000
set Vj[1]='A02H'
set Vj[2]='A02I'
set Vj[3]='A02J'
set Vj[4]='A02K'
set Vj[5]='A02L'
set Ej[1]='A02C'
set Ej[2]='A02D'
set Ej[3]='A02E'
set Ej[4]='A02F'
set Ej[5]='A02G'
set Lj[1]='I0B8'
set Lj[2]='I0B9'
set Lj[3]='I0BA'
set Lj[4]='I0BB'
set Lj[5]='I0BC'
set Lj[6]='I0BD'
set Lj[7]='I0HG'
set Lj[8]='I0JG'
set iJ[1]='I0FW'
set iJ[2]='I0L3'
set iJ[3]='I0L4'
set iJ[4]='I0L5'
set iJ[5]='I0L6'
set iJ[6]='I0L7'
set iJ[7]='I0L8'
set iJ[8]='I0L9'
set mj[1]='I0JH'
set mj[2]='I0JI'
set mj[3]='I0JJ'
set mj[4]='I0JK'
set mj[5]='I0JL'
set mj[6]='I0JM'
set bj[1]='I001'
set bj[2]='I002'
set bj[3]='I003'
set bj[4]='I004'
set bj[5]='I005'
set bj[6]='I006'
set bj[7]='I007'
set bj[8]='I008'
set bj[9]='I009'
set bj[$A]='I00A'
set bj[$B]='I00B'
set bj[$C]='I00C'
set pj[1]='A0JD'
set pj[2]='A0JE'
set pj[3]='A0JF'
set pj[4]='A0JG'
set pj[5]='A0JH'
set pj[6]='A0JI'
set pj[7]='A0JJ'
set pj[8]='A0JK'
set pj[9]='A0JL'
set pj[$A]='A0JM'
set pj[$B]='A0JN'
set Zj[1]='I0GN'
set Zj[2]='I0GO'
set Zj[3]='I0GP'
set Zj[4]='I0GQ'
set Zj[5]='I0GR'
set Zj[6]='I0GS'
set Zj[7]='I0GT'
set Zj[8]='I0GU'
set Ij[1]='d'
set Ij[2]=300
set Ij[3]=600
set Ij[4]=$3E8
set Ij[5]=$5DC
set Ij[6]=$7D0
set Ij[7]=$BB8
set Ij[8]=$FA0
set Ij[9]=6000
set Ij[$A]=$2710
set Ij[$B]=$4E20
set Ij[$C]=$7530
set Ij[$D]=$9C40
set Nj[1]=4
set Nj[2]=8
set Nj[3]=16
set Nj[4]=32
set Nj[5]=64
set Nj[6]=$80
set Nj[7]=256
set Nj[8]=512
set Nj[9]=$400
set Nj[$A]=$800
set Nj[$B]=4096
set Nj[$C]=8192
set Nj[$D]=$4000
set Nj[$E]=$8000
set Nj[$F]=65536
set Nj[16]=$1FC7C
set cEe[(1)*(20)+0]=0
set cEe[(1)*(20)+1]=$FA0
set cEe[(1)*(20)+2]=8000
set cEe[(1)*(20)+3]=$2EE0
set cEe[(1)*(20)+4]=$3E80
set cEe[(2)*(20)+0]=0
set cEe[(2)*(20)+1]=6000
set cEe[(2)*(20)+2]=$2EE0
set cEe[(2)*(20)+3]=$4650
set cEe[(2)*(20)+4]=$5DC0
set cEe[(3)*(20)+0]=0
set cEe[(3)*(20)+1]=$3E80
set cEe[(3)*(20)+2]=$7D00
set cEe[(3)*(20)+3]=$BB80
set cEe[(3)*(20)+4]=$FA00
set fj[1]='n07M'
set fj[2]='n07N'
set fj[3]='n07O'
set fj[4]='n07P'
set fj[5]='n07Q'
set fj[6]='n07U'
set fj[7]='n07R'
set fj[8]='n07W'
set fj[9]='n07X'
set fj[$A]='n0AT'
set fj[$B]='n07S'
set fj[$C]='n07V'
set fj[$D]='n07T'
set fj[$E]='n09D'
set fj[$F]='n08L'
set fj[16]='n0AU'
set fj[17]='n07Y'
set fj[18]='n07Z'
set fj[19]='n050'
set fj[20]='n01A'
set fj[21]='n080'
set fj[22]='n081'
set fj[23]='n04Y'
set fj[24]='n0AV'
set fj[25]='n082'
set fj[26]='n083'
set fj[27]='n084'
set fj[28]='n085'
set fj[29]='n086'
set fj[30]='n087'
set fj[31]='n0AW'
set fj[32]='n09E'
set fj[33]='n09G'
set fj[34]='n09H'
set fj[35]='n088'
set fj[36]='n09F'
set cAe[(1)*(40)+1]='d'
set cAe[(1)*(40)+2]='e'
set cAe[(1)*(40)+3]='f'
set cAe[(1)*(40)+4]='g'
set cAe[(1)*(40)+5]='h'
set cAe[(1)*(40)+6]='i'
set cAe[(1)*(40)+7]='j'
set cAe[(1)*(40)+8]='k'
set cAe[(1)*(40)+9]='l'
set cAe[(1)*(40)+$A]='n'
set cAe[(1)*(40)+$B]=$D2
set cAe[(1)*(40)+$C]=$DC
set cAe[(1)*(40)+$D]=300
set cAe[(1)*(40)+$E]=404
set cAe[(1)*(40)+$F]=505
set cAe[(1)*(40)+16]=606
set cAe[(1)*(40)+17]=$410
set cAe[(1)*(40)+18]=$41B
set cAe[(1)*(40)+19]=$426
set cAe[(1)*(40)+20]=$430
set cAe[(1)*(40)+21]=$43B
set cAe[(1)*(40)+22]=$446
set cAe[(1)*(40)+23]=$450
set cAe[(1)*(40)+24]=$45B
set cAe[(1)*(40)+25]=$7DA
set cAe[(1)*(40)+26]=$7E5
set cAe[(1)*(40)+27]=$7F0
set cAe[(1)*(40)+28]=$7FA
set cAe[(1)*(40)+29]=$805
set cAe[(1)*(40)+30]=$810
set cAe[(1)*(40)+31]=$81B
set cAe[(1)*(40)+32]=$BD9
set cAe[(1)*(40)+33]=$BEE
set cAe[(1)*(40)+34]=$BF9
set cAe[(1)*(40)+35]=$FB4
set cAe[(1)*(40)+36]=$FC1
set Aj[1]=4
set Aj[2]=4
set Aj[3]=8
set Aj[4]=8
set Aj[5]=$A
set Aj[6]=$A
set Aj[7]=$C
set Aj[8]=$C
set Aj[9]=$E
set Aj[$A]=$E
set Aj[$B]=16
set Aj[$C]=16
set Aj[$D]=16
endfunction
function JOx takes nothing returns nothing
call QKe("|cffff0000"+"Đang tải dữ liệu nền . . .",1)
set rj[1]="|cffff0000"+GetPlayerName(Player(0))+"|r"
set rj[2]="|c000042FF"+GetPlayerName(Player(1))+"|r"
set rj[3]="|c001CE6B9"+GetPlayerName(Player(2))+"|r"
set rj[4]="|c00540081"+GetPlayerName(Player(3))+"|r"
set rj[5]="|c00FFFC01"+GetPlayerName(Player(4))+"|r"
set rj[6]="|c00fEBA0E"+GetPlayerName(Player(5))+"|r"
set coe[(0)*(20)+1]="trangsuc_lien"
set coe[(0)*(20)+2]="phongcu_non"
set coe[(0)*(20)+3]="trangsuc_nhan"
set coe[(0)*(20)+5]="phongcu_lung"
set coe[(0)*(20)+6]="phongcu_ao"
set coe[(0)*(20)+7]="phongcu_tay"
set coe[(0)*(20)+9]="trangsuc_boi"
set coe[(0)*(20)+$A]="phongcu_giay"
set coe[(0)*(20)+$B]="trangsuc_phu"
set coe[(1)*(20)+8]="vukhi_kiem"
set coe[(2)*(20)+8]="vukhi_dao"
set coe[(3)*(20)+8]="vukhi_thuong"
set coe[(4)*(20)+8]="vukhi_chuy"
set coe[(5)*(20)+8]="vukhi_trienthu"
set coe[(6)*(20)+8]="vukhi_con"
set coe[(7)*(20)+8]="vukhi_tutien"
set coe[(8)*(20)+8]="vukhi_phidao"
set coe[(9)*(20)+8]="vukhi_truongdao"
set cre[(0)*(20)+1]="liên"
set cre[(0)*(20)+2]="nón"
set cre[(0)*(20)+3]="nhẫn"
set cre[(0)*(20)+4]="phi phong"
set cre[(0)*(20)+5]="lưng"
set cre[(0)*(20)+6]="áo"
set cre[(0)*(20)+7]="tay"
set cre[(0)*(20)+8]="vũ khí"
set cre[(1)*(20)+8]="kiếm"
set cre[(2)*(20)+8]="đao"
set cre[(3)*(20)+8]="thương"
set cre[(4)*(20)+8]="chùy"
set cre[(5)*(20)+8]="triền thủ"
set cre[(6)*(20)+8]="côn"
set cre[(7)*(20)+8]="tụ tiễn"
set cre[(8)*(20)+8]="phi đao"
set cre[(9)*(20)+8]="trường đao"
set cre[(0)*(20)+9]="bội"
set cre[(0)*(20)+$A]="giày"
set cre[(0)*(20)+$B]="phù"
set cre[(0)*(20)+$C]="bí kíp"
set cie[(0)*(20)+0]="vô hệ"
set cie[(0)*(20)+1]="kim"
set cie[(0)*(20)+2]="mộc"
set cie[(0)*(20)+3]="thủy"
set cie[(0)*(20)+4]="hỏa"
set cie[(0)*(20)+5]="thổ"
set cie[(1)*(20)+1]="vật"
set cie[(1)*(20)+2]="độc"
set cie[(1)*(20)+3]="băng"
set cie[(1)*(20)+4]="hỏa"
set cie[(1)*(20)+5]="lôi"
set Cj[1]="23451"
set Cj[2]="54132"
set Cj[3]="42513"
set Cj[4]="15324"
set Cj[5]="31245"
set Rj[0]="1"
set Rj[1]="10"
set Rj[2]="30"
set Rj[3]="50"
set Rj[4]="70"
set Rj[5]="100"
set Rj[6]="150"
set Rj[7]="200"
set Rj[8]="trùng sinh 1"
set Rj[9]="trùng sinh 2"
set Rj[$A]="trùng sinh 3"
set Rj[$B]="trùng sinh 4"
set Rj[$C]="trùng sinh 5"
set Rj[$D]="trùng sinh 6"
set Xj[1]=""
set Xj[2]="|cff7fff00"
set Xj[3]="|cff0078d7"
set Xj[4]="|cff9370db"
set Xj[5]="|cffffa500"
set Xj[6]="|cffffa500"
set Xj[7]="|cffffa500"
set Xj[8]="|cffffa500"
set Xj[9]="|cffffff00"
set Xj[$A]="|cffffff00"
set Xj[$B]="|cffffff00"
set Xj[$C]="|cffffff00"
set Xj[$D]="|cffffff00"
set Oj[1]="*"
set Oj[2]="**"
set Oj[3]="***"
set Oj[4]="****"
set Oj[5]="*****"
set Oj[6]="******"
set Oj[7]="*******"
set Oj[8]="********"
set Oj[9]="*********"
set Oj[$A]="**********"
set Oj[$B]="***********"
set Oj[$C]="************"
set Oj[$D]="*************"
set uj[1]="Thời gian kinh nghiệm +20% còn lại: "
set uj[2]="Thời gian tu luyện kỹ năng +3 còn lại: "
set uj[3]="Thời gian tu luyện mật tịch +2 còn lại: "
set uj[4]="Vật phẩm được chuyển về rương !"
set uj[5]="Giải Ngọc Chùy: "
set uj[$D]="Bạn đã kích hoạt Bàn Cổ Phù - Sơ, tăng 10% tỉ lệ khi cường hóa +1 đến +8"
set uj[$E]="Bạn đã kích hoạt Bàn Cổ Phù - Trung, tăng 10% tỉ lệ khi cường hóa +9 đến +12"
set uj[$F]="Bạn đã kích hoạt Bàn Cổ Phù - Cao, tăng 10% tỉ lệ khi cường hóa +13 đến +16"
set uj[21]=" đã nhận phần thưởng lễ bao tích lũy đồng !"
set uj[22]=" đã nhận phần thưởng phúc lợi !"
set uj[18]="Nhận được 800 NHHT !"
set ij[0]=""
set ij[1]="|cff7fff00"
set ij[2]="|cff0078d7"
set ij[3]="|cff0078d7"
set ij[4]="|cff9370db"
set ij[5]="|cff9370db"
set ij[6]="|cffffa500"
set ij[7]="|cffffa500"
set ij[8]="|cffffff00"
set ij[9]="|cffffff00"
set ij[$A]="|cffff0000"
set ij[$B]="|cffff0000"
set ij[$C]="|cffff0000"
set Qj[1]="-ThuongThien-"
set Qj[2]="-ChuyThien-"
set Qj[3]="-DaoThieu-"
set Qj[4]="-QuyenThieu-"
set Qj[5]="-TuTien-"
set Qj[6]="-PhiDao-"
set Qj[7]="-DaoDoc-"
set Qj[8]="-ChuongDoc-"
set Qj[9]="-KiemThuy-"
set Qj[$A]="-DaoThuy-"
set Qj[$B]="-KiemNga-"
set Qj[$C]="-ChuongNga-"
set Qj[$D]="-BongCai-"
set Qj[$E]="-ChuongCai-"
set Qj[$F]="-MaNhan-"
set Qj[16]="-ChienNhan-"
set Qj[17]="-KiemVo-"
set Qj[18]="-KhiVo-"
set Qj[19]="-DaoCon-"
set Qj[20]="-KiemCon-"
set Qj[21]="-KhiDoan-"
set Qj[22]="-ChiDoan-"
set Qj[23]="-ThienLa-"
set Qj[24]="-TuDuong-"
set Qj[25]="-KiemMinh-"
set Qj[26]="-ChuyMinh-"
set zj[1]="Thọ Nguyên Thuật"
set zj[2]="Ninh Tâm Tĩnh Thần"
set zj[3]="Phù Không Lược ảnh"
set zj[4]="Kim Cang Quyết"
set zj[5]="Băng Sơn Kích"
set zj[6]="Thiên Cang Quyết"
set zj[7]="Địa Sát Quyết"
set zj[8]="Lạc Thần Quyết"
set Mj[1]="nón"
set Mj[2]="áo"
set Mj[3]="lưng"
set Mj[4]="tay"
set Mj[5]="giày"
set Mj[6]="liên"
set Mj[7]="nhẫn"
set Mj[8]="bội"
set Mj[9]="phù"
set Mj[$A]="vũ khí"
set Kj[1]="Sử Thi"
set Kj[2]="Thanh Đồng"
set Kj[3]="Bạch Ngân"
set Kj[4]="Hoàng Kim"
set cVe[(1)*(20)+1]="|cff7fff00[ Anh Hùng ] Dật Hiệp Bào
**"
set cVe[(2)*(20)+1]="|cff7fff00[ Anh Hùng ] Tiêu Dao Cân
**"
set cVe[(1)*(20)+2]="|cff0078d7[ Anh Hùng ] Thanh Sương Bào
***"
set cVe[(2)*(20)+2]="|cff0078d7[ Anh Hùng ] Tiến Hiền Quán
***"
set cVe[(1)*(20)+3]="|cff9370db[ Anh Hùng ] Bích Hoa Bào
****"
set cVe[(2)*(20)+3]="|cff9370db[ Anh Hùng ] Lang Nha Quán
****"
set cVe[(1)*(20)+4]="|cffffa500[ Anh Hùng ] Toàn Long Bào
*****"
set cVe[(2)*(20)+4]="|cffffa500[ Anh Hùng ] Tử Kim Thúc Ngạch
*****"
set cVe[(1)*(20)+5]="|cffffa500[ Anh Hùng ] Hàn Sương Bào
******"
set cVe[(2)*(20)+5]="|cffffa500[ Anh Hùng ] Thông Thiên Phát Quán
******"
set cVe[(1)*(20)+6]="|cffffa500[ Anh Hùng ] Long Minh Trang
*******"
set cVe[(2)*(20)+6]="|cffffa500[ Anh Hùng ] Long Minh Quán
*******"
set cVe[(1)*(20)+7]="|cffffa500[ Anh Hùng ] Thanh Sương Y
********"
set cVe[(2)*(20)+7]="|cffffa500[ Anh Hùng ] Thanh Sương Đai
********"
set cVe[(1)*(20)+8]="|cffffff00[ Anh Hùng ] Như ý Thanh Hồng Giáp
*********"
set cVe[(2)*(20)+8]="|cffffff00[ Anh Hùng ] Như ý Thanh Hồng Cân
*********"
set cVe[(1)*(20)+9]="|cffffff00[ Anh Hùng ] Định Quốc
**********"
set cVe[(2)*(20)+9]="|cffffff00[ Anh Hùng ] An Bang
**********"
set cXe[(1)*(20)+1]="Vận Tiêu (600)"
set cXe[(1)*(20)+2]="Truy Nã (80)"
set cXe[(1)*(20)+3]="Thương Hội (80)"
set cXe[(1)*(20)+4]="Địa Đồ Thần Bí (400)"
set cXe[(2)*(20)+1]="Đào Chu Công Mộ (600)"
set cXe[(2)*(20)+2]="Sát Thủ Đường (750)"
set cXe[(2)*(20)+3]="Phong Lăng Thủy Trại (400)"
set cXe[(2)*(20)+4]="Tranh Đoạt Lãnh Thổ (200)"
set cXe[(3)*(20)+1]="Hoạt Tử Nhân Mộ (800)"
set cXe[(3)*(20)+2]="Lâu Lan Tầm Bảo (1000)"
set cXe[(3)*(20)+3]="Tần Lăng (800)"
set cXe[(4)*(20)+1]="Vạn Hoa Cốc (2400)"
set cXe[(4)*(20)+2]="Long Môn Phi Kiếm (2400)"
set cXe[(4)*(20)+3]="Bích Lạc Cốc (2400)"
set cXe[(4)*(20)+4]="Bách Man Sơn (2500)"
set cXe[(5)*(20)+1]="Minh Linh Đình Viện (2500)"
set cXe[(5)*(20)+2]="Hoa Sơn Luận Kiếm (2000)"
set cXe[(5)*(20)+3]="Hỏa Kỳ Lân (1000)"
set cXe[(5)*(20)+4]="Lương Sơn Bạc (3000)"
set cXe[(6)*(20)+1]="Thái Thạch Cơ (3500)"
set cXe[(6)*(20)+2]="Thiên Quỳnh Cung(3500)"
set cXe[(6)*(20)+3]="Vạn Kiếm Trũng (1000)"
set Bj[0]="|cff6d6d6d"
set Bj[1]="|cff7fff00"
set Fj[1]="Thường"
set Fj[2]="Anh Hùng"
set Fj[3]="Địa Ngục"
set cae[(1)*(20)+1]="010000000000"
set cae[(1)*(20)+2]="001000000000"
set cae[(1)*(20)+3]="102000000000"
set cae[(1)*(20)+4]="050100000000"
set cae[(1)*(20)+5]="020010000000"
set cae[(1)*(20)+6]="002020000000"
set cae[(1)*(20)+7]="000401000000"
set cae[(1)*(20)+8]="000003000000"
set cae[(1)*(20)+9]="000000200000"
set cae[(1)*(20)+$A]="000022300000"
set cae[(1)*(20)+$B]="000012120000"
set cae[(1)*(20)+$C]="000002021000"
set cae[(1)*(20)+$D]="000011110100"
set cae[(1)*(20)+$E]="000000001200"
set cae[(1)*(20)+$F]="000000221110"
set cae[(1)*(20)+16]="000000021030"
set cae[(2)*(20)+1]="110000000000"
set cae[(2)*(20)+2]="040000000000"
set cae[(2)*(20)+3]="200100000000"
set cae[(2)*(20)+4]="001200000000"
set cae[(2)*(20)+5]="012110000000"
set cae[(2)*(20)+6]="000101000000"
set cae[(2)*(20)+7]="001102000000"
set cae[(2)*(20)+8]="002011100000"
set cae[(2)*(20)+9]="000000300000"
set cae[(2)*(20)+$A]="000000020000"
set cae[(2)*(20)+$B]="000000011000"
set cae[(2)*(20)+$C]="000002212000"
set cae[(2)*(20)+$D]="000000202100"
set cae[(2)*(20)+$E]="000001111010"
set cae[(2)*(20)+$F]="000000000120"
set cae[(2)*(20)+16]="000000000211"
set cae[(3)*(20)+1]="201000000000"
set cae[(3)*(20)+2]="023000000000"
set cae[(3)*(20)+3]="000010000000"
set cae[(3)*(20)+4]="000020000000"
set cae[(3)*(20)+5]="000111000000"
set cae[(3)*(20)+6]="000000100000"
set cae[(3)*(20)+7]="000000200000"
set cae[(3)*(20)+8]="000000110000"
set cae[(3)*(20)+9]="000022120000"
set cae[(3)*(20)+$A]="000002021000"
set cae[(3)*(20)+$B]="000011110100"
set cae[(3)*(20)+$C]="000000001200"
set cae[(3)*(20)+$D]="000000002110"
set cae[(3)*(20)+$E]="000000001001"
set cae[(3)*(20)+$F]="000000002002"
set cae[(3)*(20)+16]="000000001104"
set tj[$B]="a"
set tj[$C]="b"
set tj[$D]="c"
set tj[$E]="d"
set tj[$F]="e"
set tj[16]="f"
set tj[17]="g"
set tj[18]="h"
set tj[19]="i"
set tj[20]="j"
set tj[21]="k"
set tj[22]="l"
set tj[23]="m"
set tj[24]="n"
set tj[25]="o"
set tj[26]="p"
set tj[27]="q"
set tj[28]="r"
set tj[29]="s"
set tj[30]="t"
set tj[31]="u"
set tj[32]="v"
set tj[33]="w"
set tj[34]="x"
set tj[35]="y"
set tj[36]="z"
set tj[37]="A"
set tj[38]="B"
set tj[39]="C"
set tj[40]="D"
set tj[41]="E"
set tj[42]="F"
set tj[43]="G"
set tj[44]="H"
set tj[45]="I"
set tj[46]="J"
set tj[47]="K"
set tj[48]="L"
set tj[49]="M"
set tj[50]="N"
set tj[51]="O"
set tj[52]="P"
set tj[53]="Q"
set tj[54]="R"
set tj[55]="S"
set tj[56]="T"
set tj[57]="U"
set tj[58]="V"
set tj[59]="W"
set tj[60]="X"
set tj[61]="Y"
set tj[62]="Z"
set tj[63]="0"
set tj[64]="1"
set tj[65]="2"
set tj[66]="3"
set tj[67]="4"
set tj[68]="5"
set tj[69]="6"
set tj[70]="7"
set tj[71]="8"
set tj[72]="9"
set tj[73]="."
set tj[74]="_"
set tj[75]="#"
endfunction
function JRx takes nothing returns nothing
call QKe("|cffff0000"+"Đang tải dữ liệu nền . . .",1)
set jj[1]=Vg
set jj[2]=Eg
set jj[3]=Xg
set jj[4]=Og
set jj[5]=Rg
set jj[6]=Ig
set jj[7]=Ag
set jj[8]=Ng
set jj[9]=bg
set jj[$A]=Bg
set jj[$B]=cg
set jj[$C]=Cg
set jj[$D]=dg
set jj[$E]=Dg
set jj[$F]=fg
set jj[16]=Fg
set jj[17]=gg
set jj[18]=Gg
set jj[19]=hg
set jj[20]=Hg
set jj[21]=jg
set Wj[1]=IG
set Wj[2]=AG
set Wj[3]=NG
set Wj[4]=bG
set Wj[5]=BG
set lj[1]=vG
set lj[2]=eG
set lj[3]=xG
set lj[4]=oG
set lj[5]=rG
set lj[6]=iG
set lj[7]=aG
set lj[8]=nG
set lj[9]=VG
set IJ[1]=UC
set IJ[2]=wC
set IJ[3]=WC
set IJ[4]=yC
set IJ[5]=YC
set IJ[6]=zC
set RJ[1]=ZC
set RJ[2]=vd
set RJ[3]=ed
set RJ[4]=xd
set RJ[5]=od
set RJ[6]=ad
set AJ[1]=Bd
set AJ[2]=cd
set AJ[3]=Cd
set AJ[4]=dd
set AJ[5]=Dd
set AJ[6]=fd
set hj[1]=NF
set hj[2]=bF
set hj[3]=BF
set hj[4]=cF
set hj[5]=CF
set Yj[1]=HG
set Yj[2]=jG
set Yj[3]=JG
set Yj[4]=kG
set Yj[5]=KG
set Yj[6]=lG
set Yj[7]=LG
set Yj[8]=mG
endfunction
function JIx takes nothing returns nothing
call QKe("|cffff0000"+"Đang tải dữ liệu nền . . .",1)
call S4e()
call S3e()
call S5e()
call SUe()
endfunction
function JAx takes nothing returns nothing
local integer i=0
call QKe("|cffff0000"+"Đang tải dữ liệu nền . . .",1)
call S0e()
call SWe()
call Cwx()
call STe()
loop
exitwhen i>30
set yj[i+1]=BlzGetAbilityTooltip('Afbt',i)
set i=i+1
endloop
call SaveInteger(UH,GetHandleId(DH),7237,1)
call SaveInteger(UH,GetHandleId(fH),7237,2)
call SaveInteger(UH,GetHandleId(jH),7237,3)
call SaveInteger(UH,GetHandleId(gH),7237,4)
call SaveInteger(UH,GetHandleId(BH),7237,5)
call UnitAddAbility(DH,Ej[1])
call UnitAddAbility(fH,Ej[2])
call UnitAddAbility(jH,Ej[3])
call UnitAddAbility(gH,Ej[4])
call UnitAddAbility(BH,Ej[5])
endfunction
function JNx takes nothing returns nothing
local integer i=1
call QKe("|cffff0000"+"Đang tải dữ liệu nền . . .",1)
call S9e()
loop
exitwhen i>6
set Uv=Player(i-1)
if sBe(Uv)then
set VJ[i]=false
set EJ[i]=null
call SetPlayerAbilityAvailable(Uv,Vj[1],false)
call SetPlayerAbilityAvailable(Uv,Vj[2],false)
call SetPlayerAbilityAvailable(Uv,Vj[3],false)
call SetPlayerAbilityAvailable(Uv,Vj[4],false)
call SetPlayerAbilityAvailable(Uv,Vj[5],false)
call SetPlayerAbilityAvailable(Uv,'A0O2',false)
call SetPlayerAbilityAvailable(Uv,'A0O3',false)
set PJ[i]=GetPlayerName(Uv)
set qJ[i]=SubString(PJ[i],2,4)
set pJ[i]=StringLength(PJ[i])
set QJ[i]=SubString(PJ[i],pJ[i]-1,pJ[i])
set sJ[i]=t7e(PJ[i])
set cle[(i)*($A)+1]=999
set cle[(i)*($A)+3]=1
set Vi[i]="00000000"
call yme(i-1)
call yMe(i-1)
endif
set i=i+1
endloop
endfunction
function Jbx takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,2.,false)
call TriggerAddAction(t,function JXx)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddAction(t,function JOx)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,3.,false)
call TriggerAddAction(t,function JRx)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,3.5,false)
call TriggerAddAction(t,function JIx)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,4.,false)
call TriggerAddAction(t,function JAx)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,4.5,false)
call TriggerAddAction(t,function JNx)
set t=null
endfunction
function JBx takes player p,integer i returns nothing
call Qke(p,"|cffff0000"+"------ Túi Huyền Tinh ------",$A)
call Qke(p,"|cff7fff00"+"-------------------------------------------",$A)
call Qke(p,"|cffffcc00"+"[ Huyền Tinh "+I2S(1)+" ]|r - số lượng: "+I2S(cNe[(i)*(20)+1]),$F)
call Qke(p,"|cffffcc00"+"[ Huyền Tinh "+I2S(2)+" ]|r - số lượng: "+I2S(cNe[(i)*(20)+2]),$F)
call Qke(p,"|cffffcc00"+"[ Huyền Tinh "+I2S(3)+" ]|r - số lượng: "+I2S(cNe[(i)*(20)+3]),$F)
call Qke(p,"|cffffcc00"+"[ Huyền Tinh "+I2S(4)+" ]|r - số lượng: "+I2S(cNe[(i)*(20)+4]),$F)
call Qke(p,"|cffffcc00"+"[ Huyền Tinh "+I2S(5)+" ]|r - số lượng: "+I2S(cNe[(i)*(20)+5]),$F)
call Qke(p,"|cffffcc00"+"[ Huyền Tinh "+I2S(6)+" ]|r - số lượng: "+I2S(cNe[(i)*(20)+6]),$F)
call Qke(p,"|cffffcc00"+"[ Huyền Tinh "+I2S(7)+" ]|r - số lượng: "+I2S(cNe[(i)*(20)+7]),$F)
call Qke(p,"|cffffcc00"+"[ Huyền Tinh "+I2S(8)+" ]|r - số lượng: "+I2S(cNe[(i)*(20)+8]),$F)
call Qke(p,"|cffffcc00"+"[ Huyền Tinh "+I2S(9)+" ]|r - số lượng: "+I2S(cNe[(i)*(20)+9]),$F)
call Qke(p,"|cffffcc00"+"[ Huyền Tinh "+I2S($A)+" ]|r - số lượng: "+I2S(cNe[(i)*(20)+$A]),$F)
call Qke(p,"|cffffcc00"+"[ Huyền Tinh "+I2S($B)+" ]|r - số lượng: "+I2S(cNe[(i)*(20)+$B]),$F)
call Qke(p,"|cffffcc00"+"[ Huyền Tinh "+I2S($C)+" ]|r - số lượng: "+I2S(cNe[(i)*(20)+$C]),$F)
call Qke(p,"|cff7fff00"+"-------------------------------------------",$A)
endfunction
function Jcx takes player p,integer i returns nothing
call Qke(p,"|cffff0000"+"------ Mảnh Mặt Nạ ------",$A)
call Qke(p,"|cff7fff00"+"-------------------------------------------",$A)
call Qke(p,"|cffffcc00"+"[ Mảnh Mặt Nạ Hiệp Khách ]|r - số lượng: "+"|cff7fff00"+I2S(cFe[(i)*(5)+1]/ 3),$F)
call Qke(p,"|cffffcc00"+"[ Mảnh Võ Lâm Quán ]|r - số lượng: "+"|cff7fff00"+I2S(cFe[(i)*(5)+2]/ 3),$F)
call Qke(p,"|cffffcc00"+"[ Mảnh Tuyệt Thế Quán ]|r - số lượng: "+"|cff7fff00"+I2S(cFe[(i)*(5)+3]/ 3),$F)
call Qke(p,"|cffffcc00"+"[ Mảnh Quân Lâm Miện ]|r - số lượng: "+"|cff7fff00"+I2S(cFe[(i)*(5)+4]/ 3),$F)
call Qke(p,"|cffffcc00"+"[ Mảnh Thông Thiên Quán ]|r - số lượng: "+"|cff7fff00"+I2S(cFe[(i)*(5)+5]/ 3),$F)
call Qke(p,"|cff7fff00"+"-------------------------------------------",$A)
endfunction
function JCx takes player p,integer i returns nothing
call Qke(p,"|cffff0000"+"------ Sự Kiện Trung Thu 2021 ------",$A)
call Qke(p,"|cff7fff00"+"- Củi khô: "+I2S(ni[i]/ 3),$F)
call Qke(p,"|cff7fff00"+"- Tích lũy thả hoa đăng: "+I2S(Oi[i]/ 2),$F)
call Qke(p,"|cff7fff00"+"- Tích lũy Hộp BánH Trung Thu: "+I2S(Ei[i])+"/30",$F)
call Qke(p,"|cff9370db"+"------ Hộp Bánh Trung Thu ------",$A)
call Qke(p,"|cffffcc00"+"[ Bánh Thập Cẩm ]|r - số lượng: "+SubString(Vi[i],0,1)+"/9",$F)
call Qke(p,"|cffffcc00"+"[ Bánh Bát Bửu ]|r - số lượng: "+SubString(Vi[i],1,2)+"/9",$F)
call Qke(p,"|cffffcc00"+"[ Bánh Hạt Sen ]|r - số lượng: "+SubString(Vi[i],2,3)+"/9",$F)
call Qke(p,"|cffffcc00"+"[ Bánh Vi Cá ]|r - số lượng: "+SubString(Vi[i],3,4)+"/9",$F)
call Qke(p,"|cffffcc00"+"[ Bánh Đậu Xanh ]|r - số lượng: "+SubString(Vi[i],4,5)+"/9",$F)
call Qke(p,"|cffffcc00"+"[ Bánh Gà Quay ]|r - số lượng: "+SubString(Vi[i],5,6)+"/9",$F)
call Qke(p,"|cffffcc00"+"[ Bánh Đậu Đỏ ]|r - số lượng: "+SubString(Vi[i],6,7)+"/9",$F)
call Qke(p,"|cffffcc00"+"[ Bánh Trà Xanh ]|r - số lượng: "+SubString(Vi[i],7,8)+"/9",$F)
call Qke(p,"|cff7fff00"+"-------------------------------------------",$A)
call Qke(p,"|cffffff00"+"Tiền xu cổ: "+I2S(rJ[i]/ 4),$F)
call Qke(p,"|cff7fff00"+"-------------------------------------------",$A)
endfunction
function Jdx takes player p,integer i,integer U3e,integer QZe returns nothing
local integer c=1
call tLe(i)
if U3e>0 and QZe>0 then
if U3e<$D and QZe<9 then
if cNe[(i)*(20)+U3e]>=QZe then
set cNe[(i)*(20)+U3e]=cNe[(i)*(20)+U3e]-QZe
set Yk[i]=Yk[i]-QZe*2
call Qke(p,"|cffffcc00"+"[ Huyền Tinh "+I2S(U3e)+" ]|r - số lượng: "+I2S(cNe[(i)*(20)+U3e]),5)
loop
exitwhen c>QZe
set Sv=CreateItem(bj[U3e],GetUnitX(OJ[i]),GetUnitY(OJ[i]))
call UnitAddItem(OJ[i],Sv)
set c=c+1
endloop
endif
endif
elseif U3e==0 and QZe==0 then
call JBx(p,i)
endif
endfunction
function JDx takes player p,integer i returns nothing
call Qke(p,"|cffff0000"+yj[$B],$A)
call Qke(p,"|cff7fff00"+"-------------------------------------------",$A)
call Qke(p,"|cffffcc00"+yj[$C]+I2S(erx(i)),$A)
call Qke(p,"|cffffcc00"+yj[$D]+I2S((GetPlayerState((p),PLAYER_STATE_RESOURCE_LUMBER))),$A)
call Qke(p,"|cffffcc00"+yj[$E]+I2S(Bne[(i)*(5)+3]/ 2),$A)
call Qke(p,"|cffffcc00"+yj[$F]+I2S(fA[i]),$A)
call Qke(p,"|cffffcc00"+yj[16]+I2S(B1e[i]),$A)
call Qke(p,"|cffffcc00"+yj[17]+I2S(Bpe[(1)*(6)+i]),$A)
call Qke(p,"|cff7fff00"+"-------------------------------------------",$A)
endfunction
function Jfx takes nothing returns boolean
local integer CGe=Qce()
call Qke(Ixe[CGe],"|cffffcc00"+"Đang dịch chuyển về thành . . . "+I2S(Ive[CGe])+" !",1)
set Ive[CGe]=Ive[CGe]-1
if Ive[CGe]<=0 or spe(Iee[CGe])then
call QDe()
call Qre(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportCaster.mdl",Iee[CGe],"origin"))
call Qke(Ixe[CGe],"|cffffcc00"+"Dịch chuyển thành công!",3)
call gkx(Iee[CGe],Ixe[CGe],mJ[Ire[CGe]],MJ[Ire[CGe]])
call PauseUnit(Iee[CGe],false)
call Qre(Ioe[CGe])
set TJ[Ire[CGe]]=true
set Ioe[CGe]=null
set Ixe[CGe]=null
set Iee[CGe]=null
call dEe(CGe)
endif
return false
endfunction
function JFx takes unit u,player p,integer i,integer t returns nothing
local integer CGe=dVe()
set Iee[CGe]=u
set Ive[CGe]=17-t
set Ixe[CGe]=p
set Ire[CGe]=i
set Ioe[CGe]=AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",GetUnitX(u),GetUnitY(u))
set TJ[Ire[CGe]]=false
call PauseUnit(Iee[CGe],true)
call QIe(CGe,.5,true,function Jfx)
endfunction
function Jgx takes player p,integer i returns nothing
if tue(XJ[i])and TJ[i]then
if eox(XJ[i],5)then
call JFx(XJ[Ui[i]],p,i,wi[Kk[i]+1])
endif
endif
endfunction
function JGx takes nothing returns boolean
local integer CGe=Qce()
set IVe[CGe]=IVe[CGe]-1
if IVe[CGe]<=0 then
call QDe()
set uJ[IEe[CGe]]=false
call dne(CGe)
endif
return false
endfunction
function Jhx takes integer i returns nothing
local integer CGe=dae()
set IVe[CGe]=R2I(30/ .03125)
set IEe[CGe]=i
set uJ[IEe[CGe]]=true
call QIe(CGe,.03125,true,function JGx)
endfunction
function JHx takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
local string s=GetEventPlayerChatString()
local integer z=0
local real x=0
local real y=0
if SubString(s,0,6)==yj[21]then
set z=S2I(SubString(s,6,$B))
if z>$9C4 then
set z=$9C4
endif
if GetLocalPlayer()==p then
call SetCameraField(CAMERA_FIELD_TARGET_DISTANCE,z,.0)
endif
elseif SubString(s,1,4)=="sm " or SubString(s,1,4)=="tp " or SubString(s,1,4)=="nc " then
call wpe(p,i,s)
elseif SubString(s,0,3)==yj[22]then
call tLe(i)
call Jdx(p,i,S2I(SubString(s,3,5)),S2I(SubString(s,6,7)))
elseif s=="-cl" then
if p==GetLocalPlayer()then
call ClearTextMessages()
endif
elseif s==yj[26]then
call Jgx(p,i)
elseif SubString(s,0,6)=="-give " then
if not eK[i]then
set z=6
loop
exitwhen z>$B
if QYe(XJ[i])then
set z=$B
else
set Sv=UnitItemInSlot(OJ[i],S2I(SubString(s,z,z+1))-1)
if Sv!=null then
call UnitAddItem(XJ[i],Sv)
endif
endif
set z=z+1
endloop
endif
elseif SubString(s,0,6)=="-send " then
if not eK[i]then
set z=6
loop
exitwhen z>$B
set Sv=UnitItemInSlot(XJ[i],S2I(SubString(s,z,z+1))-1)
if Sv!=null then
call UnitAddItem(OJ[i],Sv)
endif
set z=z+1
endloop
endif
elseif s==yj[28]then
call Qke(p,"|cffffcc00"+uj[1]+I2S(BFe[(i)*(4)+1]/ 2),$A)
call Qke(p,"|cffffcc00"+uj[2]+I2S(BFe[(i)*(4)+2]/ 2),$A)
call Qke(p,"|cffffcc00"+uj[3]+I2S(BFe[(i)*(4)+3]/ 2),$A)
elseif s==yj[18]then
call JDx(p,i)
elseif SubString(s,0,8)==yj[19]then
if eox(XJ[i],6)then
call c5x(p,i,S2I(SubString(s,8,$A)))
endif
elseif s=="-event" then
call JCx(p,i)
elseif s=="-matna" then
call Jcx(p,i)
elseif SubString(s,0,3)=="-go" then
set z=S2I(SubString(s,4,5))
set wv=false
if eox(XJ[i],7)then
set wv=true
endif
if tJ[i]>=3 or wv then
if uJ[i]then
call Qke(p,"|cffffcc00"+"Giãn cách 30 giây mới có thể sử dụng Càn Khôn Phù !",5)
else
if z>0 and z<=6 and z!=i then
if XJ[z]!=null then
if tue(XJ[i])and tue(XJ[z])then
if not wv then
set tJ[i]=tJ[i]-3
endif
call Jhx(i)
call gkx(XJ[i],p,GetUnitX(XJ[z]),GetUnitY(XJ[z]))
call Qke(p,"|cffffcc00"+"Di chuyển tới vị trí đồng đội !",5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl"),((GetUnitX(XJ[z]))*1.),((GetUnitY(XJ[z]))*1.)))
else
call Qke(p,"|cffffcc00"+"Bạn hoặc đồng đội đang đứng trong khu vực không thể dịch chuyển !",5)
endif
else
call Qke(p,"|cffffcc00"+"Người chơi không tồn tại !",5)
endif
endif
endif
else
call Qke(p,"|cffffcc00"+"Không có Càn Khôn Phù !",5)
endif
if not wv then
call Qke(p,"|cffffcc00"+"Số lượng Càn Khôn Phù: "+I2S(tJ[i]/ 3),5)
endif
endif
set p=null
set s=null
return false
endfunction
function Jjx takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetTriggerPlayer()
local player g=GetOwningPlayer(u)
if g==zv then
if(GetUnitAbilityLevel((u),('B006'))>0)then
call Qke(p,"- "+GetUnitName(u)+" |cffffff00[ Kim ]|r, Sinh lực: "+"|cff7fff00"+I2S(R2I(GetUnitLifePercent(u)))+"%",3)
elseif(GetUnitAbilityLevel((u),('B007'))>0)then
call Qke(p,"- "+GetUnitName(u)+" |cff7fff00[ Mộc ]|r, Sinh lực: "+"|cff7fff00"+I2S(R2I(GetUnitLifePercent(u)))+"%",3)
elseif(GetUnitAbilityLevel((u),('B008'))>0)then
call Qke(p,"- "+GetUnitName(u)+" |cff00ced1[ Thủy ]|r, Sinh lực: "+"|cff7fff00"+I2S(R2I(GetUnitLifePercent(u)))+"%",3)
elseif(GetUnitAbilityLevel((u),('B009'))>0)then
call Qke(p,"- "+GetUnitName(u)+" |cffff0000[ Hỏa ]|r, Sinh lực: "+"|cff7fff00"+I2S(R2I(GetUnitLifePercent(u)))+"%",3)
elseif(GetUnitAbilityLevel((u),('B00A'))>0)then
call Qke(p,"- "+GetUnitName(u)+" |cff6d6d6d[ Thổ ]|r, Sinh lực: "+"|cff7fff00"+I2S(R2I(GetUnitLifePercent(u)))+"%",3)
endif
endif
set u=null
set p=null
set g=null
return false
endfunction
function JJx takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
local integer Jkx=0
local integer JKx=0
if GetLocalPlayer()==p then
call ClearTextMessages()
endif
call Qke(p,"|cffff0000"+"------ Thời Gian Hoạt Động ------",$A)
call Qke(p,"|cff7fff00"+"-------------------------------------------",$A)
set Jkx=R2I(KB/ 60)
set JKx=R2I((I2R(KB)/ 60-I2R(Jkx))*60)
if JB then
call Qke(p,"|cffffcc00"+"[ Đào Chu Công Mộ ]|r - "+"|cffff0000"+"thời gian hoạt động còn: "+I2S(Jkx)+"m:"+I2S(JKx)+"s",$F)
else
if jB then
call Qke(p,"|cffffcc00"+"[ Đào Chu Công Mộ ]|r - thời gian khiêu chiến còn: "+"|cffff0000"+I2S(Jkx)+"m:"+I2S(JKx)+"s",$F)
else
call Qke(p,"|cffffcc00"+"[ Đào Chu Công Mộ ]|r - thời gian mở lần sau: "+"|cff7fff00"+I2S(Jkx)+"m:"+I2S(JKx)+"s",$F)
endif
endif
set Jkx=R2I(Ac/ 60)
set JKx=R2I((I2R(Ac)/ 60-I2R(Jkx))*60)
if Rc then
call Qke(p,"|cffffcc00"+"[ Sát Thủ Đường ]|r - "+"|cffff0000"+"thời gian hoạt động còn: "+I2S(Jkx)+"m:"+I2S(JKx)+"s",$F)
else
if Oc then
call Qke(p,"|cffffcc00"+"[ Sát Thủ Đường ]|r - thời gian khiêu chiến còn: "+"|cffff0000"+I2S(Jkx)+"m:"+I2S(JKx)+"s",$F)
else
call Qke(p,"|cffffcc00"+"[ Sát Thủ Đường ]|r - thời gian mở lần sau: "+"|cff7fff00"+I2S(Jkx)+"m:"+I2S(JKx)+"s",$F)
endif
endif
set Jkx=R2I(HC/ 60)
set JKx=R2I((I2R(HC)/ 60-I2R(Jkx))*60)
if GC then
call Qke(p,"|cffffcc00"+"[ Lâu Lan Tầm Bảo ]|r - "+"|cffff0000"+"thời gian hoạt động còn: "+I2S(Jkx)+"m:"+I2S(JKx)+"s",$F)
else
if gC then
call Qke(p,"|cffffcc00"+"[ Lâu Lan Tầm Bảo ]|r - thời gian khiêu chiến còn: "+"|cffff0000"+I2S(Jkx)+"m:"+I2S(JKx)+"s",$F)
else
call Qke(p,"|cffffcc00"+"[ Lâu Lan Tầm Bảo ]|r - thời gian mở lần sau: "+"|cff7fff00"+I2S(Jkx)+"m:"+I2S(JKx)+"s",$F)
endif
endif
set Jkx=R2I(qB/ 60)
set JKx=R2I((I2R(qB)/ 60-I2R(Jkx))*60)
if pB then
call Qke(p,"|cffffcc00"+"[ Hoạt Tử Nhân Mộ ]|r - "+"|cffff0000"+"thời gian hoạt động còn: "+I2S(Jkx)+"m:"+I2S(JKx)+"s",$F)
else
if MB then
call Qke(p,"|cffffcc00"+"[ Hoạt Tử Nhân Mộ ]|r - thời gian khiêu chiến còn: "+"|cffff0000"+I2S(Jkx)+"m:"+I2S(JKx)+"s",$F)
else
call Qke(p,"|cffffcc00"+"[ Hoạt Tử Nhân Mộ ]|r - thời gian mở lần sau: "+"|cff7fff00"+I2S(Jkx)+"m:"+I2S(JKx)+"s",$F)
endif
endif
set Jkx=R2I(Vo/ 60)
set JKx=R2I((I2R(Vo)/ 60-I2R(Jkx))*60)
if no then
call Qke(p,"|cffffcc00"+"[ Tranh Đoạt Lãnh Thổ ]|r - "+"|cffff0000"+"thời gian hoạt động còn: "+I2S(Jkx)+"m:"+I2S(JKx)+"s",$F)
else
call Qke(p,"|cffffcc00"+"[ Tranh Đoạt Lãnh Thổ ]|r - thời gian mở lần sau: "+"|cff7fff00"+I2S(Jkx)+"m:"+I2S(JKx)+"s",$F)
endif
set Jkx=R2I(kr/ 60)
set JKx=R2I((I2R(kr)/ 60-I2R(Jkx))*60)
if jr then
call Qke(p,"|cffffcc00"+"[ Bạch Hổ Đường ]|r - "+"|cffff0000"+"thời gian hoạt động còn: "+I2S(Jkx)+"m:"+I2S(JKx)+"s",$F)
else
if Hr then
call Qke(p,"|cffffcc00"+"[ Bạch Hổ Đường ]|r - thời gian khiêu chiến còn: "+"|cffff0000"+I2S(Jkx)+"m:"+I2S(JKx)+"s",$F)
else
call Qke(p,"|cffffcc00"+"[ Bạch Hổ Đường ]|r - thời gian mở lần sau: "+"|cff7fff00"+I2S(Jkx)+"m:"+I2S(JKx)+"s",$F)
endif
endif
set Jkx=R2I(ik/ 60)
set JKx=R2I((I2R(ik)/ 60-I2R(Jkx))*60)
call Qke(p,"|cffffcc00"+"[ Phong Lăng Thủy Trại ]|r - xuất hiện Boss lần sau: "+"|cff7fff00"+I2S(Jkx)+"m:"+I2S(JKx)+"s",$F)
set Jkx=R2I(nk/ 60)
set JKx=R2I((I2R(nk)/ 60-I2R(Jkx))*60)
call Qke(p,"|cffffcc00"+"[ Tần Thủy Hoàng ]|r - xuất hiện Boss lần sau: "+"|cff7fff00"+I2S(Jkx)+"m:"+I2S(JKx)+"s",$F)
set Jkx=R2I(ak/ 60)
set JKx=R2I((I2R(ak)/ 60-I2R(Jkx))*60)
call Qke(p,"|cffffcc00"+"[ Hỏa Kỳ Lân ]|r - xuất hiện Boss lần sau: "+"|cff7fff00"+I2S(Jkx)+"m:"+I2S(JKx)+"s",$F)
call Qke(p,"|cff7fff00"+"-------------------------------------------",$A)
set p=null
return false
endfunction
function Jlx takes nothing returns boolean
local integer CGe=Qce()
set IIe[CGe]=IIe[CGe]-1
if IIe[CGe]<=0 then
call QDe()
set UJ[IAe[CGe]]=false
call die(CGe)
endif
return false
endfunction
function JLx takes integer i returns nothing
local integer CGe=dre()
set IIe[CGe]=R2I(5/ .03125)
set IAe[CGe]=i
set UJ[IAe[CGe]]=true
call QIe(CGe,.03125,true,function Jlx)
endfunction
function Jmx takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
local unit u=XJ[i]
local integer JMx=(GJ[i]-$96)/ 2
if UJ[i]then
call Qke(p,"|cffffcc00"+"Giãn cách lên xuống thú cưỡi là 5 giây!",3)
set p=null
set u=null
return false
endif
if GJ[i]>=$B8 and not Ti[i]then
set p=null
set u=null
return false
endif
if spe(u)then
set p=null
set u=null
return false
endif
if JMx>0 then
if(GetUnitAbilityLevel(((u)),('A0YV'))>0)then
call JLx(i)
if(bde[(GetPlayerId(GetOwningPlayer(((u)))))])then
call yBe(u)
call Qke(p,"|cffffcc00"+"Xuống ngựa!",3)
call yIe(u,p,i,false,fj[JMx])
else
call yGe(u,fj[JMx])
call Qke(p,"|cffffcc00"+"Lên ngựa!",3)
call yIe(u,p,i,true,fj[JMx])
endif
else
call JLx(i)
if(bde[(GetPlayerId(GetOwningPlayer(((u)))))])then
call yBe(u)
call Qke(p,"|cffffcc00"+"Xuống ngựa!",3)
call yIe(u,p,i,false,fj[JMx])
else
call yde(u,fj[JMx])
call AddUnitAnimationProperties(u,"gold",true)
call Qke(p,"|cffffcc00"+"Lên ngựa!",3)
call yIe(u,p,i,true,fj[JMx])
endif
endif
else
call Qke(p,"|cffffcc00"+"Bạn không sở hữu thú cưỡi!",3)
endif
set p=null
set u=null
return false
endfunction
function Jpx takes nothing returns nothing
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
if GetLocalPlayer()==p then
call ClearTextMessages()
endif
call TGe(p,i)
set p=null
endfunction
function JPx takes nothing returns nothing
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
if WJ[i]then
call Qre(Zb[i])
set Zb[i]=AddSpecialEffect("war3mapImported\\dummy.mdx",GetUnitX(XJ[i]),GetUnitY(XJ[i]))
set WJ[i]=false
if BPe[(1)*(6)+i]!=0 then
call UnitRemoveAbility(XJ[i],wj[BPe[(1)*(6)+i]])
endif
else
if vB[i]!=null then
call Qre(Zb[i])
set Zb[i]=AddSpecialEffect(vB[i],GetUnitX(XJ[i]),GetUnitY(XJ[i]))
set WJ[i]=true
endif
if BPe[(1)*(6)+i]!=0 then
call UnitAddAbility(XJ[i],wj[BPe[(1)*(6)+i]])
endif
endif
set p=null
endfunction
function Jqx takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
if not vo[i]then
call u3e(p,i,true)
else
call u3e(p,i,false)
endif
set p=null
return false
endfunction
function JQx takes nothing returns nothing
local player p=GetTriggerPlayer()
if GetLocalPlayer()==p then
call ClearTextMessages()
call SetCameraField(CAMERA_FIELD_TARGET_DISTANCE,$9C4,.0)
endif
set p=null
endfunction
function Jsx takes nothing returns nothing
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
if not eK[i]then
call UnitAddItem(OJ[i],UnitItemInSlot(XJ[i],0))
call UnitAddItem(OJ[i],UnitItemInSlot(XJ[i],1))
call UnitAddItem(OJ[i],UnitItemInSlot(XJ[i],2))
call UnitAddItem(OJ[i],UnitItemInSlot(XJ[i],3))
call UnitAddItem(OJ[i],UnitItemInSlot(XJ[i],4))
call UnitAddItem(OJ[i],UnitItemInSlot(XJ[i],5))
endif
set p=null
endfunction
function JSx takes nothing returns nothing
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
local integer c=0
if not eK[i]then
loop
exitwhen c>5
if not QYe(XJ[i])then
call UnitAddItem(XJ[i],UnitItemInSlot(OJ[i],c))
else
set c=6
endif
set c=c+1
endloop
endif
set p=null
endfunction
function Jtx takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
local unit u=XJ[i]
if(bde[(GetPlayerId(GetOwningPlayer(((u)))))])then
call Qke(p,"|cffffcc00"+"Không thể chuyển đổi kỹ năng khi đang cưỡi ngựa !",5)
set p=null
set u=null
return false
endif
if not wJ[i]then
set wJ[i]=true
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),true)
else
set wJ[i]=false
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+$B]),false)
call SetPlayerAbilityAvailable((p),(Bwe[(i)*(20)+1]),true)
endif
set p=null
set u=null
return false
endfunction
function JTx takes nothing returns nothing
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
if GetLocalPlayer()==p then
call ClearTextMessages()
endif
call Qke(p,"|cffff0000"+"------ Thông tin đồng hành ------",$A)
call Qke(p,"|cff7fff00"+"-------------------------------------------",$A)
if QI[i]!=null then
call Qke(p,"|cffffcc00"+"- Đồng hành: |r"+GetObjectName(Uj[sI[i]]),$A)
call Qke(p,"|cffffcc00"+"- Cấp độ: |r"+I2S(SI[i]),$A)
call Qke(p,"|cffffcc00"+"- Tài phú: |r"+"|cff7fff00"+I2S('d'*R2I(Pow(pI[i],2))*SI[i]),$A)
call Qke(p,"|cffffcc00"+"- Kinh nghiệm: |r"+I2S(BDe[(0)*(20)+i]/ 3)+"/"+I2S(SI[i]*50),$A)
call Qke(p,"|cffffcc00"+"- Lĩnh ngộ: |r"+I2S(R2I(tI[i]))+"/100",$A)
else
call Qke(p,"|cff6d6d6d"+"[ Chưa sở hữu đồng hành ]|r",$A)
endif
call Qke(p,"|cff7fff00"+"------ Mảnh Trang Bị Đồng Hành ------",$A)
call Qke(p,"|cffffcc00"+"- Mảnh Trang Bị Đồng Hành - Nón: |r"+I2S(cBe[(i)*(20)+1]/ 2),$A)
call Qke(p,"|cffffcc00"+"- Mảnh Trang Bị Đồng Hành - áo: |r"+I2S(cBe[(i)*(20)+2]/ 2),$A)
call Qke(p,"|cffffcc00"+"- Mảnh Trang Bị Đồng Hành - Phù: |r"+I2S(cBe[(i)*(20)+3]/ 2),$A)
call Qke(p,"|cffffcc00"+"- Mảnh Trang Bị Đồng Hành - Giày: |r"+I2S(cBe[(i)*(20)+4]/ 2),$A)
call Qke(p,"|cffffcc00"+"- Mảnh Trang Bị Đồng Hành - Nhẫn: |r"+I2S(cBe[(i)*(20)+5]/ 2),$A)
call Qke(p,"|cffffcc00"+"- Mảnh Trang Bị Đồng Hành - Vũ Khí: |r"+I2S(cBe[(i)*(20)+6]/ 2),$A)
call Qke(p,"|cff7fff00"+"-------------------------------------------",$A)
set p=null
endfunction
function Jux takes nothing returns nothing
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
call vxx(p,i,true)
set p=null
endfunction
function JUx takes nothing returns nothing
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
call vxx(p,i,false)
set p=null
endfunction
function Jwx takes nothing returns nothing
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
call Qke(p,"|cffff0000"+"------ Lãnh Thổ ------",$A)
call Qke(p,"|cff7fff00"+"-------------------------------------------",$A)
if no then
call Qke(p,"|cffff0000"+"(Thời gian tranh đoạt còn lại: "+I2S(Eo)+" giây)",$A)
else
call Qke(p,"|cffffcc00"+"(Thời gian mở lần sau: "+I2S(Vo)+" giây)",$A)
endif
if ro[1]==2 then
call Qke(p,"|cff7fff00"+"- Tây Tháp Lâm: (đã chiếm lĩnh)",$A)
else
if ao[1]then
call Qke(p,"|cffff0000"+"- Tây Tháp Lâm: đã chiếm long trụ: "+I2S(ro[1])+"/2",$A)
else
call Qke(p,"|cff6d6d6d"+"- Tây Tháp Lâm: đã chiếm long trụ: "+I2S(ro[1])+"/2",$A)
endif
endif
if ro[2]==2 then
call Qke(p,"|cff7fff00"+"- Hoài Thủy Sa Châu: (đã chiếm lĩnh)",$A)
else
if ao[2]then
call Qke(p,"|cffff0000"+"- Hoài Thủy Sa Châu: đã chiếm long trụ: "+I2S(ro[2])+"/2",$A)
else
call Qke(p,"|cff6d6d6d"+"- Hoài Thủy Sa Châu: đã chiếm long trụ: "+I2S(ro[2])+"/2",$A)
endif
endif
if ro[3]==2 then
call Qke(p,"|cff7fff00"+"- Phong Lăng Độ: (đã chiếm lĩnh)",$A)
else
if ao[3]then
call Qke(p,"|cffff0000"+"- Phong Lăng Độ: đã chiếm long trụ: "+I2S(ro[3])+"/2",$A)
else
call Qke(p,"|cff6d6d6d"+"- Phong Lăng Độ: đã chiếm long trụ: "+I2S(ro[3])+"/2",$A)
endif
endif
if ro[4]==2 then
call Qke(p,"|cff7fff00"+"- Hoa Sơn: (đã chiếm lĩnh)",$A)
else
if ao[4]then
call Qke(p,"|cffff0000"+"- Hoa Sơn: đã chiếm long trụ: "+I2S(ro[4])+"/2",$A)
else
call Qke(p,"|cff6d6d6d"+"- Hoa Sơn: đã chiếm long trụ: "+I2S(ro[4])+"/2",$A)
endif
endif
if ro[5]==2 then
call Qke(p,"|cff7fff00"+"- Mông Cổ Vương Đỉnh: (đã chiếm lĩnh)",$A)
else
if ao[5]then
call Qke(p,"|cffff0000"+"- Mông Cổ Vương Đỉnh: đã chiếm long trụ: "+I2S(ro[5])+"/2",$A)
else
call Qke(p,"|cff6d6d6d"+"- Mông Cổ Vương Đỉnh: đã chiếm long trụ: "+I2S(ro[5])+"/2",$A)
endif
endif
if ro[6]==2 then
call Qke(p,"|cff7fff00"+"- Trường Bạch Sơn: (đã chiếm lĩnh)",$A)
else
if ao[6]then
call Qke(p,"|cffff0000"+"- Trường Bạch Sơn: đã chiếm long trụ: "+I2S(ro[6])+"/2",$A)
else
call Qke(p,"|cff6d6d6d"+"- Trường Bạch Sơn: đã chiếm long trụ: "+I2S(ro[6])+"/2",$A)
endif
endif
if ro[7]==2 then
call Qke(p,"|cff7fff00"+"- Đôn Hoàng Cổ Thành: (đã chiếm lĩnh)",$A)
else
if ao[7]then
call Qke(p,"|cffff0000"+"- Đôn Hoàng Cổ Thành: đã chiếm long trụ: "+I2S(ro[7])+"/2",$A)
else
call Qke(p,"|cff6d6d6d"+"- Đôn Hoàng Cổ Thành: đã chiếm long trụ: "+I2S(ro[7])+"/2",$A)
endif
endif
if ro[8]==2 then
call Qke(p,"|cff7fff00"+"- Tần Lăng: (đã chiếm lĩnh)",$A)
else
if ao[8]then
call Qke(p,"|cffff0000"+"- Tần Lăng: đã chiếm long trụ: "+I2S(ro[8])+"/2",$A)
else
call Qke(p,"|cff6d6d6d"+"- Tần Lăng: đã chiếm long trụ: "+I2S(ro[8])+"/2",$A)
endif
endif
call Qke(p,"|cffffff00"+"Tổng số lãnh thổ đã chiếm: "+I2S(oo)+"/8",5)
call Qke(p,"|cff7fff00"+"-------------------------------------------",$A)
set p=null
endfunction
function JWx takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Player(0),"-",false)
call TriggerRegisterPlayerChatEvent(t,Player(1),"-",false)
call TriggerRegisterPlayerChatEvent(t,Player(2),"-",false)
call TriggerRegisterPlayerChatEvent(t,Player(3),"-",false)
call TriggerRegisterPlayerChatEvent(t,Player(4),"-",false)
call TriggerRegisterPlayerChatEvent(t,Player(5),"-",false)
call TriggerAddCondition(t,Filter(function JHx))
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Player(0),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerRegisterPlayerUnitEvent(t,Player(1),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerRegisterPlayerUnitEvent(t,Player(2),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerRegisterPlayerUnitEvent(t,Player(3),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerRegisterPlayerUnitEvent(t,Player(4),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerRegisterPlayerUnitEvent(t,Player(5),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerAddCondition(t,Condition(function Jjx))
set t=CreateTrigger()
call BlzTriggerRegisterPlayerKeyEvent(t,Player(0),OSKEY_Z,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(1),OSKEY_Z,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(2),OSKEY_Z,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(3),OSKEY_Z,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(4),OSKEY_Z,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(5),OSKEY_Z,0,true)
call TriggerAddAction(t,function JJx)
set SJ=UJe("war3mapImported\\FrameButtonTGA_fakebuttons.tga")
call UFe(SJ,$FA,50,.009,.145)
set SJ=UJe("war3mapImported\\FrameButtonTGA_fakebuttons2.tga")
call UFe(SJ,350,50,.6,.134)
set t=CreateTrigger()
call BlzTriggerRegisterPlayerKeyEvent(t,Player(0),OSKEY_M,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(1),OSKEY_M,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(2),OSKEY_M,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(3),OSKEY_M,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(4),OSKEY_M,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(5),OSKEY_M,0,true)
call TriggerAddAction(t,function Jmx)
set t=CreateTrigger()
call BlzTriggerRegisterPlayerKeyEvent(t,Player(0),OSKEY_N,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(1),OSKEY_N,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(2),OSKEY_N,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(3),OSKEY_N,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(4),OSKEY_N,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(5),OSKEY_N,0,true)
call TriggerAddAction(t,function Jpx)
set t=CreateTrigger()
call BlzTriggerRegisterPlayerKeyEvent(t,Player(0),OSKEY_Y,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(1),OSKEY_Y,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(2),OSKEY_Y,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(3),OSKEY_Y,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(4),OSKEY_Y,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(5),OSKEY_Y,0,true)
call TriggerAddAction(t,function JPx)
set t=CreateTrigger()
call BlzTriggerRegisterPlayerKeyEvent(t,Player(0),OSKEY_OEM_2,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(1),OSKEY_OEM_2,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(2),OSKEY_OEM_2,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(3),OSKEY_OEM_2,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(4),OSKEY_OEM_2,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(5),OSKEY_OEM_2,0,true)
call TriggerAddAction(t,function Jqx)
set t=CreateTrigger()
call BlzTriggerRegisterPlayerKeyEvent(t,Player(0),OSKEY_TAB,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(1),OSKEY_TAB,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(2),OSKEY_TAB,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(3),OSKEY_TAB,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(4),OSKEY_TAB,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(5),OSKEY_TAB,0,true)
call TriggerAddAction(t,function JQx)
set t=CreateTrigger()
call BlzTriggerRegisterPlayerKeyEvent(t,Player(0),OSKEY_7,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(1),OSKEY_7,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(2),OSKEY_7,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(3),OSKEY_7,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(4),OSKEY_7,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(5),OSKEY_7,0,true)
call TriggerAddAction(t,function Jsx)
set t=CreateTrigger()
call BlzTriggerRegisterPlayerKeyEvent(t,Player(0),OSKEY_8,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(1),OSKEY_8,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(2),OSKEY_8,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(3),OSKEY_8,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(4),OSKEY_8,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(5),OSKEY_8,0,true)
call TriggerAddAction(t,function JSx)
set t=CreateTrigger()
call BlzTriggerRegisterPlayerKeyEvent(t,Player(0),OSKEY_0,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(1),OSKEY_0,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(2),OSKEY_0,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(3),OSKEY_0,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(4),OSKEY_0,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(5),OSKEY_0,0,true)
call TriggerAddAction(t,function Jtx)
set t=CreateTrigger()
call BlzTriggerRegisterPlayerKeyEvent(t,Player(0),OSKEY_F8,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(1),OSKEY_F8,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(2),OSKEY_F8,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(3),OSKEY_F8,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(4),OSKEY_F8,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(5),OSKEY_F8,0,true)
call TriggerAddAction(t,function JTx)
set t=CreateTrigger()
call BlzTriggerRegisterPlayerKeyEvent(t,Player(0),OSKEY_OEM_4,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(1),OSKEY_OEM_4,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(2),OSKEY_OEM_4,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(3),OSKEY_OEM_4,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(4),OSKEY_OEM_4,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(5),OSKEY_OEM_4,0,true)
call TriggerAddAction(t,function Jux)
set t=CreateTrigger()
call BlzTriggerRegisterPlayerKeyEvent(t,Player(0),OSKEY_OEM_6,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(1),OSKEY_OEM_6,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(2),OSKEY_OEM_6,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(3),OSKEY_OEM_6,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(4),OSKEY_OEM_6,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(5),OSKEY_OEM_6,0,true)
call TriggerAddAction(t,function JUx)
set t=CreateTrigger()
call BlzTriggerRegisterPlayerKeyEvent(t,Player(0),OSKEY_X,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(1),OSKEY_X,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(2),OSKEY_X,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(3),OSKEY_X,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(4),OSKEY_X,0,true)
call BlzTriggerRegisterPlayerKeyEvent(t,Player(5),OSKEY_X,0,true)
call TriggerAddAction(t,function Jwx)
set t=null
endfunction
function Jyx takes nothing returns nothing
loop
call ExecuteFunc("Jyx")
endloop
endfunction
function JYx takes nothing returns nothing
set bj_lastCreatedGameCache=InitGameCache("0X0092847A1.w3v")
if SaveGameCache(bj_lastCreatedGameCache)then
call Jyx()
endif
endfunction
function Jzx takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.0,false)
call TriggerAddAction(t,function JYx)
endfunction
function JZx takes nothing returns nothing
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
call QKe(rj[i]+" rời khỏi trò chơi!",$A)
call FlushChildHashtable(UH,GetHandleId(XJ[i]))
set yJ[i]=true
call RemoveUnit(XJ[i])
set XJ[i]=null
call RemoveUnit(OJ[i])
set OJ[i]=null
call RemoveUnit(QI[i])
set QI[i]=null
set p=null
endfunction
function J_x takes nothing returns nothing
local integer i=1
local string Uae=""
loop
exitwhen i>6
if XJ[i]!=null then
set Uae=GetPlayerName(Player(i-1))
if PJ[i]!=Uae or pJ[i]!=StringLength(Uae)or qJ[i]!=SubString(Uae,2,4)or QJ[i]!=SubString(Uae,pJ[i]-1,pJ[i])then
call QH()
endif
if pJ[i]<6 then
call QH()
endif
endif
set i=i+1
endloop
if bj_lastCreatedItem!=null then
call QH()
endif
set Uae=null
endfunction
function J0x takes nothing returns nothing
call QKe("|cffffff00"+"F9 để xem các hướng dẫn chi tiết trong trò chơi !",$A)
call QKe("|cffadd8e6"+"Để ủng hộ cho đội ngũ Kiếm Vũ Cửu Thiên và nâng cấp VIP hãy liên hệ trực tiếp: fb.com/tmahorpg. Chúc các bạn chơi vui vẻ !",5)
endfunction
function J1x takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterPlayerEventLeave(t,Player(0))
call TriggerRegisterPlayerEventLeave(t,Player(1))
call TriggerRegisterPlayerEventLeave(t,Player(2))
call TriggerRegisterPlayerEventLeave(t,Player(3))
call TriggerRegisterPlayerEventLeave(t,Player(4))
call TriggerRegisterPlayerEventLeave(t,Player(5))
call TriggerAddAction(t,function JZx)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,60.,true)
call TriggerAddAction(t,function J_x)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,933.,true)
call TriggerAddAction(t,function J0x)
set t=null
endfunction
function J2x takes nothing returns nothing
local string s="|cffffcc00Custom Map Kiếm Vũ Cửu Thiên 2.25|r
|cff7fff00DISCORD: discord.gg/9uGdYmF

Fanpage: FB.com/tmahorpg
Group: FB.com/groups/mapkiemhiepwar3
Website hướng dẫn: sites.google.com/view/kvctwiki/|r

Ngày cập nhật: |cffadd8e615.9.2021|r
Tác giả: |cffadd8e6Silva.Fox & Team: Vasco, Mask.Devil, knight artorias|r
Hỗ trợ: |cffadd8e6dhguardianes.|r
Terrain, Doodad, Model: |cffadd8e6Custom Map China, uuu9.com, gamevn.com, hiveworkshop.com, WEVN Group, Thiên Kiếm (Rex), Tình Kiếm Truyền Kỳ (Sky), SRORPG, Tran Nguyen (SW2 - Tac Gia Hac Am Xam Tac)|r

|cffff0000[ Chân thành xin lỗi một số tác giả nếu chúng tôi vô ý sử dụng Model của các bạn mà không được thông qua chính thức ]|r"
call CreateQuestBJ(0,"Thông tin",s,"war3mapImported\\BTNHeroButton_hoatdong.blp")
set s="|cffadd8e6- Đào Công Chi Mộ: Quan Nhất Đao (Tây Tháp Lâm)
- Sát Thủ Đường: Nam Nhân Thần Bí (Tây Tháp Lâm)
- Vạn Hoa Cốc: Đào Tử (Hoài Thủy Sa Châu)
- Lâu Lan Tầm Bảo: Yến Tiểu Lâu (Đôn Hoàng Cổ Thành)
- Hoạt Tử Nhân Mộ: Thuyền Phu (Hoa Sơn)
- Long Môn Phi Kiếm: Lộ Trinh Phi (Dương Châu)
- Bích Lạc Cốc: Nghĩa Quân Hào Kiệt (Phong Lăng Độ)
- Bách Man Sơn: Tốc Bất Đài (Mông Cổ Vương Đỉnh)
- Minh Linh Đình Viện: Cổ Yên Nhiên (Trường Bạch Sơn)
- Bạch Hổ Đường: Hộ Vệ Bạch Hổ Đường (Dương Châu)
- Thần Long Đảo: Thuyền Phu (Hoài Thủy Sa Châu)
- Phong Lăng Thủy Trại: Thuyền Phu Phong Lăng Độ (Phong Lăng Độ)
- Lương Sơn Bạc: Đới Tung (Hoài Thủy Sa Châu)
- Thông Thiên Tháp: Tiêu Dịch (Ba Lăng Huyện)
- Thiên Quỳnh Cung: Lý Hương Lan (Dương Châu)
- Thái Thạch Cơ: Ngu Doãn Văn (Phong Lăng Độ)
- Vạn Kiếm Trũng: Hoàng Dược Sư (Hoa Sơn)"
call CreateQuestBJ(0,"NPC Hoạt Động",s,"war3mapImported\\BTNHeroButton_hoatdong.blp")
set s="|cffadd8e6- Trùng sinh: Bắc Đẩu Lão Nhân (Ba Lăng Huyện)
- Tẩy điểm, chuyển phái, nhận mật tịch: Sứ Giả Môn Phái (Ba Lăng Huyện)
- Thương hội: Chủ Thương Hội
- Vận tiêu: Lục Tam Cần (Ba Lăng Huyện)
- Truy nã: Bổ Đầu Hình Bộ (Dương Châu)
- Băng hội: Đặc Sứ Bang Hội (Dương Châu)
- Nhận thưởng trùng sinh: Vương Chi Vọng (Dương Châu)
- Thành tựu: Lễ Bộ Thị Lang (Dương Châu)
- Lịch luyện: Lễ Quan (Dương Châu)
- Quan ấn: Quan Viên Quan Hàm (Dương Châu)
- Phi phong: Tiền Trang
- Huy Chương: Tần Khuê (Dương Châu)
- Năng động: Sứ Giả Hoạt Động (Dương Châu)
- Thú cưỡi: Mã Phu
- Đồng hành: Diệp Bảo Bảo (Dương Châu)
- Ngũ Hành ấn và xin tách bảo thạch: Dã Luyện Đại Sư (Dương Châu)
- Trang bị anh hùng: Hạ Hầu Nguyên Thao (Dương Châu)
- Sự kiện Trung Thu: Thưởng Nguyệt Sứ (Dương Châu)
- Mặt Nạ: Ca Thư Mạc (Ba Lăng Huyện)"
call CreateQuestBJ(0,"NPC Tính Năng",s,"war3mapImported\\BTNHeroButton_hoatdong.blp")
set s="|cffadd8e6-matna: xem số lượng Mảnh Mặt Nạ
-zoom x: chỉnh camera tối đa 2500
-cl: xóa chữ màn hình
-sm xx/-tp xx/-nc xx: tăng sức mạnh, thân pháp, nội công xx điểm
-htxx y: lấy huyền tinh cấp xx(1 - 12) số lượng y(1 - 9)
-give xyzabc: gửi vật phẩm tại ô trong rương tới nhân vật (xyzabc = 1 - 6 VD: -give 123456)
-send xyzabc: ngược lại với give
-event: kiểm tra thông tin sự kiện"
call CreateQuestBJ(0,"Mã Lệnh",s,"war3mapImported\\BTNHeroButton_kynang.blp")
set s="|cffadd8e6- Nhân vật: phím B
- Kỹ năng: phím K
- Kinh mạch: phím J
- Bí bảo: phím O
- Thần binh: phím I
- Hóa cảnh: phím H
- Tâm pháp: phím T
- Khảm bảo thạch: phím P
- Nhiệm vụ: phím L
- Thành tựu: phím U
- Thời gian hoạt động: phím Z
- Cưỡi thú: phím M
- Bang hội: phím N
- Danh hiệu: phím Y
- Bật/tắt PK: phím /
- Zoom xa nhất: phím TAB
- Chuyển tất cả đồ về rương: phím 7
- Chuyển tất cả đồ đến nhân vật: phím 8
- Chuyển kỹ năng Trấn Phái: phím 0
- Đồng hành: phím F8
- Lưu bảo thạch trong rương: phím [
- Rút bảo thạch về rương: phím ]
- Xem thời gian tranh đoạt lãnh thổ: phím X"
call CreateQuestBJ(0,"Phím Tắt",s,"war3mapImported\\BTNBTNButton_enter.blp")
set s="|cffffcc00Để lưu và tiếp tục trò chơi bạn có thể sử dụng hệ thống Save/Load Code|r
Khi muốn bảo lưu trò chơi bạn dùng lệnh |cffadd8e6-save|r, File save sẽ được lưu theo đường dẫn |cffadd8e6Documents/Warcraft III Public Test/CustomMapData/KVCT/save.txt|r

Khi muốn Load mã Save đã được lưu lần trước, bạn có thể dùng 1 trong 2 cách:
- Cách 1: ở đầu trò chơi, không chọn nhân vật và sử dụng lệnh -autoload >> chọn hệ phái bạn đã Save, sau đó chờ trong giây lát và tiến hành nhập 4 số mật khẩu
- Cách 2: ở đầu trò chơi, không chọn nhân vật và tiến hành Copy >> Paste lần lượt 7 mã Save được lưu trong File Save.txt, sau đó chờ trong giây lát và tiến hành nhập 4 số mật khẩu được lưu"
call CreateQuestBJ(0,"Save/Load",s,"war3mapImported\\BTNHeroButton_kynang.blp")
set s="|cffffcc00Những người trong trận phải nằm trong các mốc sau đây mới có thể chơi cùng nhau|r

|cffadd8e6Mốc trùng sinh cách nhau tối đa 3 cấp: 0 - 4, 1 - 5, 2 - 6, 3 - 7, 4 - 8, 5 - 9

Mốc tài phú:
- Mốc 1: 0 - 1.200.000 tài phú
- Mốc 2: 900.000 - 1.800.000
- Mốc 3: 1.200.000 trở lên|r"
call CreateQuestBJ(0,"Mốc Giới Hạn",s,"war3mapImported\\BTNHeroButton_kynang.blp")
set s="|cffffcc00Hệ thống PK cho phép những người chơi trong trận có thể tỷ võ với nhau ở bất kỳ khu vực luyện công nào:
- Sử dụng lệnh -pkon để bật PK
- Sử dụng lệnh -pkoff để tắt PK
- Sau khi bật PK, giữa những người chơi cùng bật PK sẽ có thể giao chiến với nhau, không ảnh hưởng đến người chơi không bật PK
- Không thể chuyển đổi PK trong phụ bản hoạt động
- Không thể vào phụ bản hoạt động khi đang bật PK.|r"
call CreateQuestBJ(0,"Hệ Thống PK",s,"war3mapImported\\BTNHeroButton_kynang.blp")
set s="- Da Hồ Ly: Hồ Ly
- Da Cá Sấu: Cá Sấu
- Da Bò: Thần Tý Cung
- Da Vượn Lớn: Diệp Hầu
- Da Báo Gấm: Cẩm Mao Báo
- Da Sư Tử: Lạc Quang
- Da Cự Điểu: Đại Điêu
- Da Sói: Chiến Sĩ Vong Trận
- Da Bạch Hổ: Long Môn Phi Kiếm ải 1 2 3
- Da Rắn: Long Môn Phi Kiếm ải 4 5 6"
set s=s+"
- Ngũ Hành Trục Quyển (NHTQ) 1: quái Tinh Anh, Thủ Lĩnh (TA-TL) Tây Tháp Lâm
- NHTQ 2: TA-TL Hoài Thủy Sa Châu
- NHTQ 3: TA-TL Phong Lăng Độ
- NHTQ 4: TA-TL Hoa Sơn
- NHTQ 5: TA-TL Mông Cổ Vương Đỉnh
- NHTQ 6: TA-TL Trường Bạch Sơn
- NHTQ 7: TA-TL Đôn Hoàng Cổ Thành
- NHTQ 8: TA-TL Thần Long Đảo, Phong Lăng Thủy Trại"
set s=s+"
- NHTQ 9: Vạn Hoa Cốc 5 6, Lâu Lan Tầm Bảo 3 4 5
- NHTQ 10: Long Môn Phi Kiếm 4 5 6, Vạn Hoa Cốc (AH) 4 5 6, Sát Thủ Đường 5 (AH)
- NHTQ 11: Lâu Lan Tầm Bảo (AH) 4 5 6, Long Môn Phi Kiếm (AH), Sát Thủ Đường 5 (DN)
- NHTQ 12: Minh Linh Đình Viện 3 4 5, Bách Man Sơn 4 5, Vạn Hoa Cốc (DN) 4 5 6
- NHTQ 13: Lương Sơn Bạc (AH) 4 5 6, Thiên Quỳnh Cung 4 5 6 7"
call CreateQuestBJ(2,"Danh Sách Vật Phẩm 1",s,"war3mapImported\\BTNsachchetao_2.blp")
set s="- Vũ Hoa Thạch: Heo Rừng
- Hổ Tinh Thạch: Diêm Bang
- Băng Thạch: Đà Thủ Tào Bang
- Kê Huyết Thạch: Bưu Bá Khán Thủ
- Kim Hồng Thạch: Thiết Giác Man Binh
- Khổng Tước Thạch: Hàn Thương
- Bồ Đào Thạch: Sa Đạo
- Huỳnh Thạch: Quỷ Sứ
- Cúc Hoa Thạch: Thủy Tặc Đầu Lĩnh
- Kim Cang Thạch: Sát Thủ Đường 3 4 5 (AH)"
set s=s+"
- Gỗ Dương: Phạm Giới Tăng Nhân
- Gỗ Sam: Võ Sĩ Tây Hạ
- Gỗ Cứng: Hổ Kỵ Hoành Sơn
- Gỗ Mít: Dị Nhân Kiếm Khách
- Gỗ Bồ Đề: Mông Cổ Võ Sĩ
- Gỗ Thiết Chương: Đao Trảm
- Gỗ Thiết Tuyến: Hoang Nguyên Đao Khách, Bách Phu Trưởng
- Gỗ Thanh Long: Bạch Khởi
- Gỗ Ngà Voi: Bích Lạc Cốc 1
- Gỗ Hàng Long: Bích Lạc Cốc 2"
call CreateQuestBJ(2,"Danh Sách Vật Phẩm 2",s,"war3mapImported\\BTNsachchetao_2.blp")
set s="- Đồng Khoáng: Xích Mao Hổ
- Tích Khoáng: Thủ Lĩnh Diêm Bang
- Thiết Khoáng: Ngưu Chấn Sơn
- Ngân Khoáng: Hầu Vương Hoa Sơn
- Kim Khoáng: Trát Mộc Hợp
- Ô Kim Khoáng: Bạch Viễn Hải
- Tử Kim Khoáng: Kỷ Thiên Thành
- Hàn Thiết Khoáng: Thái Sử Khang
- Huyền Thiết Khoáng: Boss Hoàng Kim Giả Dật Sơn
- Vẫn Thiết Khoáng: Boss Hoàng Kim Man Tăng Bất Giới Hòa Thượng
- Lục Thủy Tinh: Thần Long Đảo
- Viêm Linh Bố: Sát Thủ Đường 4 5(AH + DN)
- Lam Thủy Tinh: Thủy Tặc
- Thiên Văn Thạch: Tần Thủy Hoàng
- Ma Lang Giáp: Bích Lạc Cốc 3
- Địa Long Giáp: Bích Lạc Cốc (AH)
- Hoàng Thủy Tinh: Hồng Anh Thông
- Lưu Li Kim: Minh Linh Đinh Viện 6
- Huyền Viêm Cương: Long Môn Phi Kiếm 5 (AH), Bích Lạc Cốc 3 (AH)
- Khí Hồn Cao Cấp: Bách Man Sơn
- Bích Long Băng Châu: Thái Thạch Cơ 7
- Thiên Cang Lệnh: Thiên Quỳnh Cung 7"
call CreateQuestBJ(2,"Danh Sách Vật Phẩm 3",s,"war3mapImported\\BTNsachchetao_2.blp")
set s="- Thiệp Đồng Hành: xác suất nhận được ở tất cả Boss phụ bản
- Tiến Cấp Đơn: Vạn Hoa Cốc, Boss Hoàng Kim
- Phôi Trang Bị Đồng Hành - Bích Huyết: Sát Thủ Đường
- Phôi Trang Bị Đồng Hành - Kim Lân: Sát Thủ Đường (AH), Hoạt Tử Nhân Mộ (AH)
- Phôi Trang Bị Đồng Hành - Đơn Tâm: Sát Thủ Đường (DN), Vạn Hoa Cốc (AH)
- Phôi Trang Bị Đồng Hành - Long Đằng: Vạn Hoa Cốc (DN)
- Căn Cốt Đơn: Bách Man Sơn, Bích Lạc Cốc, Boss Hoàng Kim, Hỏa Kỳ Lân
- Tinh Hoa Hắc Thiết: Đào Chu Công Mộ, Cao Sĩ Hiền, Hương Ngọc Tiên
- Tinh Hoa Thanh Đồng: Đào Chu Công Mộ (AH), Thần Thương Phương Vãn, Nhu Tiểu Thúy
- Tinh Hoa Bạch Ngân: Đào Chu Công Mộ (DN), Giả Dật Sơn, Man Tăng Bất Giới Hòa Thượng, Sát Thủ Đường (AH), Tần Thủy Hoàng
- Tinh Hoa Hoàng Kim: Tiêu Xa Quân Kim, Trần Vô Mệnh, Độc Cô Kiếm, Sát Thủ Đường (DN), Minh Linh Đình Viện
- Tinh Hoa Kim Long: Độc Cô Kiếm"
call CreateQuestBJ(2,"Danh Sách Vật Phẩm 4",s,"war3mapImported\\BTNsachchetao_2.blp")
set s="- Thiên Tinh Thạch - Đại Thánh: Thành Tựu (Lễ Bộ Thị Lang - Dương Châu)
- Thiên Tinh Thạch - Siêu Thần: Minh Linh Đình Viện
- Thiên Tinh Thạch - Trấn Thiên: Âu Dương Phong (Hoa Sơn Luận Kiếm)
- Thiên Tinh Thạch - Phong Vân: Bách Thắng Đao Vương (Bá Đao Sơn Trang)
- Bí Bảo: Lâu Lan Tầm Bảo
- Kỹ Năng Quyển Thú Cưỡi: Bích Lạc Cốc
- Tinh Chú Thạch: Minh Linh Đình Viện
- Sách Kỹ Năng Chân Linh 1 (SKNCL): Sát Thủ Đường
- SKNCL 2: Vạn Hoa Cốc
- SKNCL 3: Long Môn Phi Kiếm
- SKNCL 4: Bích Lạc Cốc
- SKNCL 5: Bách Man Sơn
- SKNCL 6: Lương Sơn Bạc (AH)
- SKNCL 7: Minh Linh Đình Viện (AH)
- SKNCL 8: Hỏa Kỳ Lân, Hoa Sơn Luận Kiếm, Lương Sơn Bạc (DN), Minh Linh Đình Viện (DN)
- Phôi Thần Binh, Thần Binh Dẫn: Thông Thiên Tháp"
call CreateQuestBJ(2,"Danh Sách Vật Phẩm 5",s,"war3mapImported\\BTNsachchetao_2.blp")
set s="- Bát Quái Linh Phù: Thái Thạch Cơ - Anh Hùng
- Thoát Thai Hoán Cốt Hoàn 1: Linh Nhi (Thiên Quỳnh Cung - Anh Hùng)
- Thoát Thai Hoán Cốt Hoàn 2: Kim Quân Nguyên Soái (Thái Thạch Cơ - Anh Hùng)
- Thoát Thai Hoán Cốt Hoàn 3: Linh Nhi (Thiên Quỳnh Cung - Địa Ngục)"
call CreateQuestBJ(2,"Hóa Cảnh",s,"war3mapImported\\BTNItem_batquailinhphu.blp")
set s=null
endfunction
function J3x takes nothing returns boolean
local integer CGe=Qce()
set vk[Ice[CGe]]=R2I(I2R(vk[Ice[CGe]-1])*1.+Ice[CGe]*zJ+zJ+YJ)
set Ice[CGe]=Ice[CGe]+1
if Ice[CGe]==$C8 then
call QDe()
set vk[$C8]=vk[$C7]
call doe(CGe)
endif
return false
endfunction
function J4x takes nothing returns boolean
local integer CGe=dxe()
set Ice[CGe]=2
set vk[0]=0
set vk[1]=ZJ
set ek[0]=2.5
set ek[1]=1.5
set ek[2]=1.4
set ek[3]=1.3
set ek[4]=1.1
set ek[5]=.9
set ek[6]=.8
set ek[7]=.7
set ek[8]=.6
set ek[9]=.2
set ek[$A]=.2
set ek[$B]=.15
set ek[$C]=.1
call QIe(CGe,.01,true,function J3x)
return false
endfunction
function J5x takes nothing returns boolean
local unit n
call GroupEnumUnitsInRect(sv,Ad,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
call RemoveUnit(n)
call GroupRemoveUnit(sv,n)
endloop
return false
endfunction
function J6x takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1.,false)
call TriggerAddCondition(t,Filter(function J4x))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,600.,false)
call TriggerAddCondition(t,Filter(function J5x))
set t=null
endfunction
function J7x takes unit v,real d returns nothing
local integer id=GetHandleId(v)
if IsUnitType(v,UNIT_TYPE_TAUREN)then
call SaveReal(ht,id,Sx,LoadReal(ht,id,Sx)+d)
endif
endfunction
function J8x takes nothing returns boolean
local real d=GetEventDamage()
local unit u=GetEventDamageSource()
local unit v=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local player g=GetOwningPlayer(v)
local string s=""
local boolean J9x=false
local integer z=GetUnitTypeId(v)
local real r=0
local string x=""
local real dc=0
local real pd=0
call DisableTrigger(xk)
if(te[Te])==0 then
call QMe(v,d)
set ze=true
call J7x(v,d*3)
call uee(u,v,false,d,0,THe(u))
else
set J9x=true
endif
if THe(u)=='B007' then
set x="|cff7fff00"
call TOe(v)
elseif THe(u)=='B008' then
if(GetUnitAbilityLevel((v),('B002'))>0)then
call TIe(v)
endif
elseif THe(u)=='B009' then
call TEe(v)
endif
if J9x then
set s=I2S(R2I(d))
set r=10.
set dc=d
if We then
if(te[Te])==0 then
set dc=d*(TKe(u,ax)-TKe(v,Vx))
set s="|cffffcc00"+I2S(R2I(dc))+"|r"
else
set s="|cffffcc00"+I2S(R2I(d))+"|r"
endif
set r=11.
endif
if d==0 or ye then
set s="Nộ"
set x="|cffffa500"
endif
if(GetLocalPlayer()==p)then
call Qme(x+s+"|r",GetUnitX(v),GetUnitY(v),r)
endif
if(GetLocalPlayer()==g)then
call Qme("|cffff4500"+s+"|r",GetUnitX(v),GetUnitY(v),r)
endif
call J7x(v,dc*1.35)
if TKe(v,6729)>0 and not tOe(u)and d>'d' then
set pd=TKe(v,6729)
set d=((d*pd)+(TKe(u,4487)*(1.-TKe(u,6068))))*(1-TKe(u,894))
if pd>0 then
call Qme("|cff9370db"+I2S(R2I(d))+"|r",GetUnitX(u),GetUnitY(u),9.)
call J7x(u,d*2)
call uee(v,u,false,d,0,999)
endif
endif
endif
set s=null
set u=null
set v=null
set x=null
set p=null
set g=null
call EnableTrigger(xk)
return false
endfunction
function kvx takes nothing returns boolean
local integer CGe=Qce()
set IFe[CGe]=IFe[CGe]+1
if IFe[CGe]<=$A0 then
call UnitRemoveBuffs(Ige[CGe],false,true)
endif
if IFe[CGe]==$A0 then
call UnitRemoveAbility(Ige[CGe],'A0ID')
endif
if IFe[CGe]>=5760 then
call QDe()
call SaveInteger(UH,Ife[CGe],7918,1)
set Ige[CGe]=null
call dee(CGe)
endif
return false
endfunction
function kex takes unit u returns nothing
local integer CGe=dve()
set Ife[CGe]=GetHandleId(u)
set Ige[CGe]=u
set IFe[CGe]=0
call SaveInteger(UH,Ife[CGe],7918,0)
call tKe(Ige[CGe],'A0ID')
call QIe(CGe,.03125,true,function kvx)
endfunction
function kxx takes nothing returns boolean
local unit u=GetTriggerUnit()
if LoadInteger(UH,GetHandleId(u),7918)>0 and GetUnitState(u,UNIT_STATE_LIFE)/ GetUnitState(u,UNIT_STATE_MAX_LIFE)<=.15 then
if not(GetUnitAbilityLevel((u),('A03Z'))>0)and not(GetUnitAbilityLevel((u),('A04G'))>0)then
call kex(u)
endif
endif
if(GetUnitAbilityLevel((u),('A0ID'))>0)then
call BlzSetEventDamage(0)
endif
set u=null
return true
endfunction
function kox takes nothing returns boolean
return kxx()and J8x()
endfunction
function krx takes nothing returns nothing
call TriggerRegisterUnitEvent(xk,GetFilterUnit(),EVENT_UNIT_DAMAGED)
endfunction
function kix takes nothing returns nothing
set xk=CreateTrigger()
call TriggerAddCondition(xk,Condition(function kox))
call TriggerAddAction(Fe,(function krx))
endfunction
function kax takes unit u returns boolean
local integer id=GetUnitTypeId(u)
local real r=0
local player p=GetOwningPlayer(u)
if zv!=p then
set p=null
return false
endif
set r=LoadReal(f2,id,6780)
if r>0 then
call Tje(u,6780,r)
endif
set r=LoadReal(f2,id,5762)
if r>0 then
call Tje(u,5762,r)
endif
set r=LoadReal(f2,id,4888)
if r>0 then
call Tje(u,4888,r)
endif
set r=LoadReal(f2,id,7614)
if r>0 then
call Tje(u,7614,r)
endif
set r=LoadReal(f2,id,ax)
if r>0 then
call Tje(u,ax,r)
endif
set r=LoadReal(f2,id,Vx)
if r>0 then
call Tje(u,Vx,r)
endif
set r=LoadReal(f2,id,4141)
if r>0 then
call Tje(u,4141,r)
endif
set r=LoadReal(f2,id,mx)
if r>0 then
call Tje(u,5034,r)
call Tje(u,611,r)
call Tje(u,Ax,r)
call Tje(u,7185,r)
call Tje(u,Nx,r)
endif
set r=LoadReal(f2,id,7350)
if r>0 then
call Tje(u,jx,r)
call Tje(u,6282,r)
call Tje(u,7255,r)
call Tje(u,Jx,r)
call Tje(u,kx,r)
endif
set r=LoadReal(f2,id,Mx)
if r>0 then
call Tje(u,572,r)
call Tje(u,lx,r)
call Tje(u,6210,r)
call Tje(u,6491,r)
call Tje(u,7896,r)
endif
set r=LoadReal(f2,id,6729)
if r>0 then
call Tje(u,6729,r)
endif
set r=LoadReal(f2,id,Ix)
if r>0 then
call Tje(u,Ix,r)
endif
set r=LoadReal(f2,id,7557)
if r>0 then
call Tje(u,7557,r)
endif
set u=null
set p=null
return false
endfunction
function knx takes integer id,real x,real y returns nothing
set Qv=CreateUnit(zv,id,x,y,270)
call kax(Qv)
call SaveReal(ht,GetHandleId(Qv),Ek,x)
call SaveReal(ht,GetHandleId(Qv),Xk,y)
endfunction
function kVx takes nothing returns boolean
local integer CGe=Qce()
call QKe("|cffff0000"+"Hệ thống tiến hành tạo quái vật trên bản đồ !",$F)
if Ije[CGe]==0 then
call knx('n001',15239.5,-21953.)
call knx('n001',14912.75,-22294.25)
call knx('n001',14854.5,-22806.75)
call knx('n001',16884.25,-22307.)
call knx('n001',17460.5,-22257.25)
call knx('n001',14891.,-24234.)
call knx('n001',17065.75,-22903.)
call knx('n001',17663.75,-22932.5)
call knx('n001',15871.75,-24003.25)
call knx('n001',18328.,-27778.5)
call knx('n001',15679.5,-24993.5)
call knx('n001',15094.,-24651.25)
call knx('n001',18633.75,-23778.25)
call knx('n001',19089.,-24064.5)
call knx('n001',18701.5,-24323.5)
call knx('n001',18989.,-24901.5)
call knx('n001',16241.75,-29325.5)
call knx('n001',16233.75,-28758.75)
call knx('n001',17113.5,-26194.5)
call knx('n001',15505.25,-24416.5)
call knx('n001',16872.5,-28673.5)
call knx('n001',18799.25,-27993.25)
call knx('n001',18426.25,-28352.5)
call knx('n001',17889.75,-28130.5)
call knx('n001',17302.5,-26682.75)
call knx('n001',17629.,-26323.25)
call knx('n001',18167.25,-26476.25)
call knx('n000',17387.75,-17336.25)
call knx('n000',17916.5,-17233.75)
call knx('n000',17523.5,-17804.5)
call knx('n000',17921.25,-19135.)
call knx('n000',18310.25,-18774.5)
call knx('n000',18355.25,-19211.5)
call knx('n000',18799.,-19104.75)
call knx('n000',18113.75,-19602.)
call knx('n000',13025.25,-17718.75)
call knx('n000',13640.75,-17696.25)
call knx('n000',13861.,-18003.5)
call knx('n000',13387.,-18062.75)
call knx('n000',14584.,-19362.25)
call knx('n000',14884.,-19856.25)
call knx('n000',14533.25,-19769.)
call knx('n000',14150.5,-19646.75)
call knx('n000',14453.,-20110.5)
call knx('n000',12082.75,-19003.25)
call knx('n000',12440.75,-18725.25)
call knx('n000',12195.25,-19409.5)
call knx('n002',12143.25,-20847.25)
call knx('n002',12758.,-20859.)
call knx('n002',12465.75,-21162.25)
call knx('n002',12752.75,-21413.75)
call knx('n002',12095.,-21417.75)
call knx('n002',12489.5,-23104.)
call knx('n002',13251.75,-23211.5)
call knx('n002',13186.,-23802.5)
call knx('n002',12817.,-23399.5)
call knx('n002',12540.75,-23799.5)
call knx('n002',13816.75,-25441.75)
call knx('n002',13340.5,-25548.5)
call knx('n002',14213.75,-26267.5)
call knx('n002',14233.,-25817.)
call knx('n002',14154.75,-27543.)
call knx('n002',14822.5,-27531.25)
call knx('n002',14861.,-28057.)
call knx('n002',14108.,-28061.)
call knx('n002',14464.25,-27841.5)
call knx('n002',14835.5,-26101.)
call knx('n002',13600.,-21911.5)
call knx('n002',13580.,-22360.)
call knx('n002',11889.5,-22222.)
elseif Ije[CGe]==1 then
call knx('n005',-2261.25,-26687.75)
call knx('n005',-1917.75,-27026.)
call knx('n005',-1509.25,-26863.)
call knx('n005',-1588.,-27494.75)
call knx('n005',-2357.5,-27309.5)
call knx('n005',-1248.25,-21412.5)
call knx('n005',-771.,-20992.25)
call knx('n005',-551.5,-21805.)
call knx('n005',-929.5,-21833.5)
call knx('n005',-1729.75,-25584.75)
call knx('n005',-2457.5,-25333.5)
call knx('n005',-2615.5,-24890.75)
call knx('n005',-1936.,-22927.)
call knx('n005',-1326.,-23037.5)
call knx('n005',-1059.75,-23589.)
call knx('n005',-1719.5,-23550.)
call knx('n005',444.25,-22436.)
call knx('n005',914.75,-21978.5)
call knx('n005',1246.75,-22454.5)
call knx('n005',754.25,-22921.25)
call knx('n005',-2052.5,-25147.5)
call knx('n004',842.5,-26663.25)
call knx('n004',616.25,-27119.)
call knx('n004',1230.5,-26840.)
call knx('n004',1171.5,-27348.25)
call knx('n004',2469.,-26328.)
call knx('n004',2901.75,-26326.)
call knx('n004',3064.5,-26660.75)
call knx('n004',3312.5,-26120.75)
call knx('n004',2759.,-25951.75)
call knx('n004',2471.,-24270.25)
call knx('n004',2847.25,-23815.25)
call knx('n004',3276.,-24524.)
call knx('n004',2893.5,-24254.25)
call knx('n004',3480.25,-22058.)
call knx('n004',3951.,-21745.25)
call knx('n004',3882.25,-22154.5)
call knx('n004',4324.5,-22183.25)
call knx('n004',3814.75,-22564.75)
call knx('n003',8126.,-23840.)
call knx('n003',8494.5,-24138.)
call knx('n003',8885.,-24296.75)
call knx('n003',8782.,-24733.75)
call knx('n003',5590.5,-26172.5)
call knx('n003',6258.25,-26146.)
call knx('n003',6547.5,-26592.25)
call knx('n003',5970.5,-26570.5)
call knx('n003',5546.25,-26884.)
call knx('n003',7445.75,-24422.5)
call knx('n003',7247.25,-24968.)
call knx('n003',6234.25,-21888.)
call knx('n003',6876.5,-21838.)
call knx('n003',7014.25,-22334.25)
call knx('n003',6601.75,-22151.75)
call knx('n003',6379.5,-22496.75)
call knx('n003',7583.75,-25288.5)
call knx('n003',4271.5,-24213.75)
call knx('n003',4650.5,-24665.)
call knx('n003',4174.75,-23615.5)
call knx('n003',8834.5,-25490.)
elseif Ije[CGe]==2 then
call knx('n00E',17199.75,-10106.5)
call knx('n00E',17191.,-9642.25)
call knx('n00E',17657.,-10225.5)
call knx('n00E',17773.5,-9714.)
call knx('n00E',17437.,-9918.25)
call knx('n00E',15355.25,-9315.5)
call knx('n00E',15618.,-8874.5)
call knx('n00E',15776.75,-9350.)
call knx('n00E',15870.75,-9805.)
call knx('n00E',16987.25,-8500.5)
call knx('n00E',17502.,-8471.5)
call knx('n00E',17151.75,-8874.25)
call knx('n00E',15469.,-7285.5)
call knx('n00E',16157.75,-7322.5)
call knx('n00E',15806.5,-7465.75)
call knx('n00E',15037.5,-8236.)
call knx('n00E',15315.,-7924.5)
call knx('n00E',16580.,-8632.25)
call knx('n00C',12937.5,-14369.)
call knx('n00C',13513.5,-14439.5)
call knx('n00C',13513.5,-14960.25)
call knx('n00C',13148.5,-14765.5)
call knx('n00C',12673.25,-14940.75)
call knx('n00C',16882.,-12720.5)
call knx('n00C',17434.25,-12455.5)
call knx('n00C',17554.75,-13134.75)
call knx('n00C',17245.5,-12857.75)
call knx('n00C',16189.5,-14009.)
call knx('n00C',16564.75,-13933.5)
call knx('n00C',16573.5,-13440.75)
call knx('n00C',13292.75,-12680.75)
call knx('n00C',13718.75,-12345.75)
call knx('n00C',14085.5,-12630.25)
call knx('n00C',13670.,-12814.25)
call knx('n00C',13470.5,-13169.5)
call knx('n00C',15613.25,-11841.75)
call knx('n00C',15537.25,-12317.5)
call knx('n00C',16182.75,-11871.)
call knx('n00C',15106.5,-12465.75)
call knx('n00C',16928.,-14091.75)
call knx('n00D',12177.75,-11234.5)
call knx('n00D',12208.75,-11625.75)
call knx('n00D',11821.5,-11823.25)
call knx('n00D',10953.,-10362.25)
call knx('n00D',11159.,-10878.)
call knx('n00D',11338.25,-10492.)
call knx('n00D',10901.75,-7424.)
call knx('n00D',12764.75,-9510.)
call knx('n00D',11426.75,-7491.5)
call knx('n00D',11171.75,-7656.)
call knx('n00D',13041.5,-9199.75)
call knx('n00D',13402.5,-9415.75)
call knx('n00D',13148.25,-9730.5)
call knx('n00D',13277.75,-8783.5)
call knx('n00D',12634.,-8847.75)
call knx('n00D',10911.,-8688.75)
call knx('n00D',11685.,-8797.25)
elseif Ije[CGe]==3 then
call knx('n008',23979.25,-19783.25)
call knx('n008',24448.25,-20117.5)
call knx('n008',23633.5,-20167.5)
call knx('n008',24174.,-20449.5)
call knx('n008',24847.5,-21242.25)
call knx('n008',25580.5,-20912.)
call knx('n008',25661.,-21548.75)
call knx('n008',25077.75,-21779.5)
call knx('n008',26403.,-20086.25)
call knx('n008',25989.5,-19529.)
call knx('n008',25341.75,-21353.5)
call knx('n008',26810.75,-19860.75)
call knx('n008',26300.75,-19227.5)
call knx('n006',25063.,-18376.)
call knx('n006',27738.25,-19027.)
call knx('n006',27634.75,-18299.)
call knx('n006',28260.5,-18165.)
call knx('n006',27947.,-18616.)
call knx('n006',28337.5,-18870.75)
call knx('n006',24643.75,-18097.5)
call knx('n006',24149.,-18322.5)
call knx('n006',23908.5,-17797.)
call knx('n006',21584.25,-17259.75)
call knx('n006',22159.,-16878.5)
call knx('n006',21985.,-17300.5)
call knx('n006',22422.75,-17464.25)
call knx('n006',23063.5,-15799.25)
call knx('n006',22775.,-16189.75)
call knx('n006',23381.,-16358.25)
call knx('n007',23409.5,-21973.25)
call knx('n007',23762.75,-22243.)
call knx('n007',23324.25,-22463.)
call knx('n007',21688.5,-21155.25)
call knx('n007',22286.25,-20821.)
call knx('n007',22705.,-20959.25)
call knx('n007',22381.25,-21460.5)
call knx('n007',21862.75,-18995.5)
call knx('n007',22426.25,-18839.75)
call knx('n007',22576.75,-19450.75)
call knx('n007',21937.5,-19720.)
call knx('n007',22134.75,-19257.)
call knx('n007',22102.5,-21132.75)
elseif Ije[CGe]==4 then
call knx('n00I',-29586.5,-25968.25)
call knx('n00I',-29047.5,-25720.75)
call knx('n00I',-29502.25,-26700.5)
call knx('n00I',-29230.,-26305.)
call knx('n00I',-28856.,-26665.25)
call knx('n00I',-30812.75,-29176.5)
call knx('n00I',-30174.,-28954.5)
call knx('n00I',-29744.25,-29635.5)
call knx('n00I',-30339.25,-29417.)
call knx('n00I',-30407.25,-29984.5)
call knx('n00I',-27717.75,-28819.)
call knx('n00I',-27037.5,-28850.5)
call knx('n00I',-27200.25,-29399.)
call knx('n00I',-27646.5,-29324.75)
call knx('n00I',-26024.,-25973.5)
call knx('n00I',-25536.5,-25855.)
call knx('n00I',-25149.,-26402.75)
call knx('n00I',-25621.75,-26703.5)
call knx('n00I',-25583.5,-26255.25)
call knx('n00J',-25590.5,-28328.)
call knx('n00J',-25075.25,-28454.)
call knx('n00J',-25146.5,-28935.)
call knx('n00J',-25379.5,-28678.25)
call knx('n00J',-25713.75,-28893.25)
call knx('n00J',-23601.5,-27229.5)
call knx('n00J',-22940.75,-26947.25)
call knx('n00J',-23084.5,-27466.5)
call knx('n00J',-23468.,-27862.)
call knx('n00J',-23544.25,-25303.5)
call knx('n00J',-22860.5,-25031.75)
call knx('n00J',-23088.,-25409.5)
call knx('n00J',-23308.25,-25713.)
call knx('n00J',-23334.5,-29360.5)
call knx('n00J',-22982.5,-29146.5)
call knx('n00J',-23270.75,-29731.)
call knx('n00J',-22777.,-29616.)
call knx('n00K',-21088.,-29581.)
call knx('n00K',-21088.25,-25900.)
call knx('n00K',-20375.75,-29467.)
call knx('n00K',-20758.,-29935.25)
call knx('n00K',-21019.,-27356.5)
call knx('n00K',-20323.,-26936.)
call knx('n00K',-20115.25,-27791.25)
call knx('n00K',-20476.,-27413.75)
call knx('n00K',-20654.75,-27876.5)
call knx('n00K',-20766.75,-25031.75)
call knx('n00K',-20274.75,-25531.)
call knx('n00K',-20789.75,-25485.75)
call knx('n00K',-19002.5,-25287.5)
call knx('n00K',-18490.5,-25120.)
call knx('n00K',-18124.,-25732.5)
call knx('n00K',-18575.25,-25510.)
call knx('n00K',-18603.5,-25928.5)
call knx('n00K',-20450.75,-28987.5)
elseif Ije[CGe]==5 then
call knx('n00B',-7133.5,-27915.)
call knx('n00B',-6697.5,-27801.)
call knx('n00B',-6814.75,-28146.)
call knx('n00B',-6454.75,-28285.25)
call knx('n00B',-6946.5,-28468.25)
call knx('n00B',-8541.25,-26158.25)
call knx('n00B',-8122.,-26072.)
call knx('n00B',-7776.5,-26723.)
call knx('n00B',-8262.5,-26662.)
call knx('n00B',-6102.,-26061.)
call knx('n00B',-5780.5,-25588.75)
call knx('n00B',-5750.5,-26355.75)
call knx('n00B',-6172.25,-26662.25)
call knx('n00B',-6984.5,-25155.25)
call knx('n00B',-6474.,-25352.75)
call knx('n00B',-6626.5,-25068.75)
call knx('n00B',-8135.5,-26388.25)
call knx('n00B',-6780.75,-25503.75)
call knx('n009',-10433.25,-27816.5)
call knx('n009',-12578.75,-29691.)
call knx('n009',-12055.75,-29589.5)
call knx('n009',-11838.5,-30031.)
call knx('n009',-12259.5,-30018.75)
call knx('n009',-9214.,-28874.5)
call knx('n009',-9167.75,-29610.75)
call knx('n009',-9713.75,-29691.75)
call knx('n009',-9706.,-29068.25)
call knx('n009',-10334.,-27473.)
call knx('n009',-9700.,-27874.75)
call knx('n009',-9742.25,-27426.75)
call knx('n009',-10023.,-27648.25)
call knx('n009',-10932.,-28356.25)
call knx('n009',-11254.,-28650.5)
call knx('n009',-10909.25,-28863.75)
call knx('n00A',-12273.5,-22473.)
call knx('n00A',-9756.5,-22209.)
call knx('n00A',-8478.,-21694.)
call knx('n00A',-7743.25,-22054.)
call knx('n00A',-10766.,-22022.)
call knx('n00A',-10365.,-21641.)
call knx('n00A',-10228.5,-22114.)
call knx('n00A',-10453.25,-22555.25)
call knx('n00A',-7474.75,-21702.75)
call knx('n00A',-12362.,-23189.)
call knx('n00A',-11953.75,-23445.25)
call knx('n00A',-14957.75,-24371.75)
call knx('n00A',-14576.25,-24210.)
call knx('n00A',-14206.25,-24409.5)
call knx('n00A',-14781.25,-24758.5)
call knx('n00A',-13450.5,-24995.75)
call knx('n00A',-14888.,-26416.5)
call knx('n00A',-13588.,-25667.25)
call knx('n00A',-15299.,-26808.)
call knx('n00A',-14544.75,-26939.25)
call knx('n00A',-13726.75,-26203.25)
call knx('n00A',-8160.25,-22140.5)
call knx('n00A',-11893.25,-22257.75)
call knx('n00A',-11869.,-21756.75)
call knx('n00A',-12862.25,-25034.)
elseif Ije[CGe]==6 then
call knx('n00L',27313.75,-9145.75)
call knx('n00L',27678.5,-9405.75)
call knx('n00L',28006.5,-9056.25)
call knx('n00L',28011.75,-9871.)
call knx('n00L',27303.,-9774.)
call knx('n00L',22145.75,-9122.75)
call knx('n00L',22551.75,-9408.5)
call knx('n00L',22848.,-9118.75)
call knx('n00L',22901.75,-9728.5)
call knx('n00L',22269.5,-9744.5)
call knx('n00L',24551.5,-5732.5)
call knx('n00L',24639.5,-6517.5)
call knx('n00L',25450.,-5745.)
call knx('n00L',25546.5,-6507.75)
call knx('n00M',25049.,-6132.)
call knx('n00M',25634.75,-3473.75)
call knx('n00M',25682.5,-4237.75)
call knx('n00M',26176.,-3542.)
call knx('n00M',26105.,-4383.75)
call knx('n00M',24044.5,-3433.75)
call knx('n00M',24541.75,-3303.75)
call knx('n00M',24562.,-4176.5)
call knx('n00M',24064.,-4198.25)
call knx('n00M',27355.5,-3153.5)
call knx('n00M',27973.5,-3083.5)
call knx('n00M',28048.25,-3891.25)
call knx('n00M',27383.5,-3852.)
call knx('n00M',22182.25,-3223.5)
call knx('n00M',22871.25,-3246.)
call knx('n00M',22870.25,-4042.)
call knx('n00M',22183.,-3995.5)
call knx('n00N',27710.,-3415.5)
call knx('n00N',22504.,-3642.5)
call knx('n00N',27094.75,-260.5)
call knx('n00N',27884.,-395.)
call knx('n00N',27874.25,-1049.75)
call knx('n00N',27065.5,-1019.75)
call knx('n00N',22750.5,-744.25)
call knx('n00N',23024.,-201.)
call knx('n00N',22255.75,-397.5)
call knx('n00N',22325.5,-1096.5)
call knx('n00N',27470.5,-639.75)
call knx('n00N',23129.,-1031.25)
elseif Ije[CGe]==7 then
call knx('n00H',1337.5,-13756.5)
call knx('n00H',1770.,-13740.5)
call knx('n00H',1176.75,-14215.5)
call knx('n00H',1568.5,-14089.25)
call knx('n00H',1114.,-15629.5)
call knx('n00H',1537.75,-15513.25)
call knx('n00H',1402.25,-15939.5)
call knx('n00H',1778.,-15810.)
call knx('n00H',3861.,-17137.)
call knx('n00H',4493.25,-17665.)
call knx('n00H',4375.5,-17256.)
call knx('n00H',3577.5,-17611.25)
call knx('n00H',3570.25,-14173.)
call knx('n00H',3857.,-14353.)
call knx('n00H',3831.25,-13859.)
call knx('n00H',3204.75,-13993.5)
call knx('n00H',3307.5,-14431.75)
call knx('n00H',4041.,-17510.5)
call knx('n00G',7408.25,-15672.)
call knx('n00G',6892.75,-15089.5)
call knx('n00G',7371.5,-15234.75)
call knx('n00G',6764.75,-15695.)
call knx('n00G',7068.5,-15431.)
call knx('n00G',7610.,-13833.25)
call knx('n00G',8044.,-13677.75)
call knx('n00G',8274.,-14029.)
call knx('n00G',7874.,-14156.5)
call knx('n00G',5624.5,-14081.)
call knx('n00G',6107.,-14249.5)
call knx('n00G',5374.,-14479.5)
call knx('n00G',5719.75,-14788.25)
call knx('n00G',4358.5,-15741.25)
call knx('n00G',4609.,-16021.5)
call knx('n00G',4867.,-15752.5)
call knx('n00G',5099.75,-15540.)
call knx('n00G',5762.75,-14394.)
call knx('n00F',2058.75,-11895.)
call knx('n00F',2656.25,-12274.)
call knx('n00F',2222.5,-12277.)
call knx('n00F',1769.,-12467.5)
call knx('n00F',2274.75,-12692.5)
call knx('n00F',5366.5,-12252.5)
call knx('n00F',5798.25,-12417.)
call knx('n00F',5216.,-12600.75)
call knx('n00F',5655.,-12782.5)
call knx('n00F',1100.75,-9675.25)
call knx('n00F',1706.25,-9626.5)
call knx('n00F',1417.,-9878.25)
call knx('n00F',1191.5,-10162.25)
call knx('n00F',1700.25,-10109.75)
call knx('n00F',6941.,-10652.)
call knx('n00F',7310.,-10329.)
call knx('n00F',4853.25,-12358.5)
call knx('n00F',7635.,-10578.25)
call knx('n00F',7326.,-10877.75)
call knx('n00F',6994.5,-11228.)
call knx('n00F',7675.,-11152.5)
elseif Ije[CGe]==8 then
call knx('n04Z',-20064.5,-21691.75)
call knx('n04Z',-19696.5,-21558.25)
call knx('n04Z',-19528.,-21893.5)
call knx('n04Z',-19832.5,-22011.75)
call knx('n04Z',-21320.75,-20781.25)
call knx('n04Z',-20964.5,-20475.75)
call knx('n04Z',-20709.,-20840.5)
call knx('n04Z',-21245.75,-21176.5)
call knx('n04Z',-20903.75,-21115.)
call knx('n04Z',-18409.,-20274.)
call knx('n04Z',-18030.5,-19685.)
call knx('n04Z',-17643.75,-20013.25)
call knx('n04Z',-17813.5,-20458.)
call knx('n04Z',-18002.25,-20125.5)
call knx('n04Z',-17519.5,-18869.25)
call knx('n04Z',-17931.5,-18592.5)
call knx('n04Z',-19793.,-20151.)
call knx('n04Z',-19583.,-20481.25)
call knx('n04Z',-19193.75,-19079.)
call knx('n054',-12672.75,-19223.)
call knx('n054',-12423.,-18803.25)
call knx('n054',-12268.5,-19156.5)
call knx('n054',-12243.,-19538.75)
call knx('n054',-12995.75,-17690.)
call knx('n054',-12570.,-17909.)
call knx('n054',-13022.,-18046.75)
call knx('n054',-11592.5,-17898.75)
call knx('n054',-11278.75,-17616.75)
call knx('n054',-11090.25,-17991.)
call knx('n054',-11854.5,-19320.)
call knx('n054',-14190.,-18403.)
call knx('n054',-13819.5,-18695.75)
call knx('n054',-14192.,-19141.)
call knx('n054',-14450.,-18821.)
endif
set Ije[CGe]=Ije[CGe]+1
if Ije[CGe]==9 then
call QDe()
call C9e(CGe)
endif
return false
endfunction
function kEx takes nothing returns boolean
local integer CGe=C8e()
set Ije[CGe]=0
call QIe(CGe,3.,true,function kVx)
return false
endfunction
function kXx takes nothing returns boolean
local integer CGe=Qce()
local unit n=FirstOfGroup(ok)
if n!=null then
if not spe(n)and not tOe(n)then
call kax(n)
call SaveReal(ht,GetHandleId(n),Ek,GetUnitX(n))
call SaveReal(ht,GetHandleId(n),Xk,GetUnitY(n))
if(IsUnitType((n),UNIT_TYPE_TAUREN))then
call uHe(n,0,0,0,0,0)
endif
endif
call GroupRemoveUnit(ok,n)
else
call QDe()
call Qne(ok)
set ok=null
call C7e(CGe)
endif
set n=null
return false
endfunction
function kOx takes nothing returns boolean
local integer CGe=C6e()
set ok=CreateGroup()
call GroupEnumUnitsOfPlayer(ok,zv,Wv)
call QIe(CGe,.01,true,function kXx)
return false
endfunction
function kRx takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.0,false)
call TriggerAddCondition(t,Condition(function kOx))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,30.,false)
call TriggerAddCondition(t,Condition(function kEx))
set t=null
endfunction
function kIx takes nothing returns boolean
local unit u=GetEnteringUnit()
local integer id=GetUnitTypeId(u)
local real r=0
local player p=GetOwningPlayer(u)
if zv!=p then
set p=null
set u=null
return false
endif
set r=LoadReal(f2,id,6780)
if r>0 then
call Tje(u,6780,r)
endif
set r=LoadReal(f2,id,5762)
if r>0 then
call Tje(u,5762,r)
endif
set r=LoadReal(f2,id,4888)
if r>0 then
call Tje(u,4888,r)
endif
set r=LoadReal(f2,id,7614)
if r>0 then
call Tje(u,7614,r)
endif
set r=LoadReal(f2,id,ax)
if r>0 then
call Tje(u,ax,r)
endif
set r=LoadReal(f2,id,Vx)
if r>0 then
call Tje(u,Vx,r)
endif
set r=LoadReal(f2,id,4141)
if r>0 then
call Tje(u,4141,r)
endif
set r=LoadReal(f2,id,mx)
if r>0 then
call Tje(u,5034,r)
call Tje(u,611,r)
call Tje(u,Ax,r)
call Tje(u,7185,r)
call Tje(u,Nx,r)
endif
set r=LoadReal(f2,id,7350)
if r>0 then
call Tje(u,jx,r)
call Tje(u,6282,r)
call Tje(u,7255,r)
call Tje(u,Jx,r)
call Tje(u,kx,r)
endif
set r=LoadReal(f2,id,Mx)
if r>0 then
call Tje(u,572,r)
call Tje(u,lx,r)
call Tje(u,6210,r)
call Tje(u,6491,r)
call Tje(u,7896,r)
endif
set r=LoadReal(f2,id,6729)
if r>0 then
call Tje(u,6729,r)
endif
set r=LoadReal(f2,id,Ix)
if r>0 then
call Tje(u,Ix,r)
endif
set r=LoadReal(f2,id,7557)
if r>0 then
call Tje(u,7557,r)
endif
set u=null
set p=null
return false
endfunction
function kAx takes nothing returns nothing
local trigger t=CreateTrigger()
local region r=CreateRegion()
call RegionAddRect(r,bj_mapInitialPlayableArea)
call TriggerRegisterEnterRegion(t,r,Wv)
call TriggerAddCondition(t,Condition(function kIx))
set t=null
set r=null
endfunction
function kNx takes nothing returns boolean
local integer t=1
local string kbx="|cffadd8e6"
local integer i=1
set mC=CreateMultiboardBJ(6,23,"|cffff4500Chiến Tích|r")
call MultiboardDisplay(mC,true)
call MultiboardMinimize(mC,true)
loop
exitwhen t>7
call MultiboardSetItemWidthBJ(mC,1,t,1.)
call MultiboardSetItemStyleBJ(mC,1,t,false,false)
call MultiboardSetItemWidthBJ(mC,2,t,8.5)
call MultiboardSetItemStyleBJ(mC,2,t,true,false)
call MultiboardSetItemWidthBJ(mC,3,t,4.5)
call MultiboardSetItemStyleBJ(mC,3,t,true,false)
call MultiboardSetItemWidthBJ(mC,4,t,5.5)
call MultiboardSetItemStyleBJ(mC,4,t,true,false)
call MultiboardSetItemWidthBJ(mC,5,t,4.5)
call MultiboardSetItemStyleBJ(mC,5,t,true,false)
call MultiboardSetItemWidthBJ(mC,6,t,7.)
call MultiboardSetItemStyleBJ(mC,6,t,true,false)
set t=t+1
endloop
set t=0
loop
exitwhen t>5
if sBe(Player(t))then
call MultiboardSetItemValueBJ(mC,2,t+2,rj[t+1])
call MultiboardSetItemValueBJ(mC,3,t+2,I2S(GetHeroLevel(XJ[t+1])))
call MultiboardSetItemValueBJ(mC,4,t+2,"0")
call MultiboardSetItemValueBJ(mC,5,t+2,"0")
call MultiboardSetItemValueBJ(mC,6,t+2,"0")
else
call MultiboardSetItemValueBJ(mC,2,t+2,"|cff6d6d6dTrống|r")
call MultiboardSetItemValueBJ(mC,3,t+2,"0")
call MultiboardSetItemValueBJ(mC,4,t+2,"0")
call MultiboardSetItemValueBJ(mC,5,t+2,"0")
call MultiboardSetItemValueBJ(mC,6,t+2,"0")
endif
set t=t+1
endloop
call MultiboardSetItemValueBJ(mC,2,1,"|cffff0000"+"Tên|r")
call MultiboardSetItemValueBJ(mC,3,1,"|cffff0000"+"Cấp|r")
call MultiboardSetItemValueBJ(mC,4,1,"|cffff0000"+"TP|r")
call MultiboardSetItemValueBJ(mC,5,1,"|cffff0000"+"TG|r")
call MultiboardSetItemValueBJ(mC,6,1,"|cffff0000"+"Năng động|r")
call MultiboardSetItemStyleBJ(mC,1,8,true,true)
call MultiboardSetItemStyleBJ(mC,3,8,false,false)
call MultiboardSetItemStyleBJ(mC,4,8,false,false)
call MultiboardSetItemStyleBJ(mC,5,8,false,false)
call MultiboardSetItemStyleBJ(mC,6,8,false,false)
call MultiboardSetItemStyleBJ(mC,2,8,true,false)
call MultiboardSetItemWidthBJ(mC,1,8,8.)
call MultiboardSetItemIconBJ(mC,1,8,"war3mapImported\\BTNClock.blp")
call MultiboardSetItemValueBJ(mC,1,8,"|cffffcc00"+"Thời gian: |r")
call MultiboardSetItemStyleBJ(mC,1,9,false,false)
call MultiboardSetItemStyleBJ(mC,3,9,false,false)
call MultiboardSetItemStyleBJ(mC,4,9,false,false)
call MultiboardSetItemStyleBJ(mC,5,9,false,false)
call MultiboardSetItemStyleBJ(mC,6,9,false,false)
call MultiboardSetItemStyleBJ(mC,2,9,true,false)
call MultiboardSetItemWidthBJ(mC,2,9,8.)
call MultiboardSetItemWidthBJ(mC,2,9,8.)
call MultiboardSetItemValueBJ(mC,2,9,"|cffffff00"+"Thuộc Tính|r")
set t=$A
loop
exitwhen t>$B
call MultiboardSetItemWidthBJ(mC,1,t,5)
call MultiboardSetItemWidthBJ(mC,3,t,5)
call MultiboardSetItemWidthBJ(mC,5,t,5)
call MultiboardSetItemWidthBJ(mC,2,t,5)
call MultiboardSetItemWidthBJ(mC,4,t,5)
call MultiboardSetItemWidthBJ(mC,6,t,5)
call MultiboardSetItemStyleBJ(mC,1,t,true,false)
call MultiboardSetItemStyleBJ(mC,3,t,true,false)
call MultiboardSetItemStyleBJ(mC,5,t,true,false)
call MultiboardSetItemStyleBJ(mC,2,t,true,false)
call MultiboardSetItemStyleBJ(mC,4,t,true,false)
call MultiboardSetItemStyleBJ(mC,6,t,true,false)
set t=t+1
endloop
call MultiboardSetItemWidthBJ(mC,1,$C,5.)
call MultiboardSetItemWidthBJ(mC,3,$C,5.)
call MultiboardSetItemWidthBJ(mC,2,$C,9.)
call MultiboardSetItemWidthBJ(mC,4,$C,9.)
call MultiboardSetItemWidthBJ(mC,5,$C,1.)
call MultiboardSetItemWidthBJ(mC,6,$C,1.)
call MultiboardSetItemStyleBJ(mC,1,$C,true,false)
call MultiboardSetItemStyleBJ(mC,3,$C,true,false)
call MultiboardSetItemStyleBJ(mC,5,$C,true,false)
call MultiboardSetItemStyleBJ(mC,2,$C,true,false)
call MultiboardSetItemStyleBJ(mC,4,$C,true,false)
call MultiboardSetItemStyleBJ(mC,6,$C,true,false)
set t=$D
loop
exitwhen t>17
call MultiboardSetItemWidthBJ(mC,1,t,5.)
call MultiboardSetItemWidthBJ(mC,3,t,5.)
call MultiboardSetItemWidthBJ(mC,5,t,0)
call MultiboardSetItemWidthBJ(mC,2,t,13.)
call MultiboardSetItemWidthBJ(mC,4,t,7.)
call MultiboardSetItemWidthBJ(mC,6,t,0)
call MultiboardSetItemStyleBJ(mC,1,t,true,false)
call MultiboardSetItemStyleBJ(mC,3,t,true,false)
call MultiboardSetItemStyleBJ(mC,5,t,true,false)
call MultiboardSetItemStyleBJ(mC,2,t,true,false)
call MultiboardSetItemStyleBJ(mC,4,t,true,false)
call MultiboardSetItemStyleBJ(mC,6,t,true,false)
set t=t+1
endloop
call MultiboardSetItemValueBJ(mC,1,$A,"|cff7fff00"+"-NHHT:|r")
call MultiboardSetItemValueBJ(mC,3,$A,"|cff7fff00"+"-C.Khí:|r")
call MultiboardSetItemValueBJ(mC,5,$A,"|cff7fff00"+"-K.Mạch:|r")
call MultiboardSetItemValueBJ(mC,1,$B,"|cff7fff00"+"-U.Danh:|r")
call MultiboardSetItemValueBJ(mC,3,$B,"|cff7fff00"+"-K.Năng:|r")
call MultiboardSetItemValueBJ(mC,5,$B,"|cff7fff00"+"-T.Năng:|r")
call MultiboardSetItemValueBJ(mC,1,$C,"|cff7fff00"+"-Q.Hàm:|r")
call MultiboardSetItemValueBJ(mC,3,$C,"|cff7fff00"+"-P.Phong:|r")
call MultiboardSetItemValueBJ(mC,1,$D,kbx+"-K. Vật:|r")
call MultiboardSetItemValueBJ(mC,1,$E,kbx+"-K. Độc:|r")
call MultiboardSetItemValueBJ(mC,1,$F,kbx+"-K. Băng:|r")
call MultiboardSetItemValueBJ(mC,1,16,kbx+"-K. Hỏa:|r")
call MultiboardSetItemValueBJ(mC,1,17,kbx+"-K. Lôi:|r")
call MultiboardSetItemValueBJ(mC,3,$D,kbx+"-ST. Vật:|r")
call MultiboardSetItemValueBJ(mC,3,$E,kbx+"-ST. Độc:|r")
call MultiboardSetItemValueBJ(mC,3,$F,kbx+"-ST. Băng:|r")
call MultiboardSetItemValueBJ(mC,3,16,kbx+"-ST. Hỏa:|r")
call MultiboardSetItemValueBJ(mC,3,17,kbx+"-ST. Lôi:")
set t=18
loop
exitwhen t>23
call MultiboardSetItemWidthBJ(mC,1,t,4.5)
call MultiboardSetItemWidthBJ(mC,3,t,4.5)
call MultiboardSetItemWidthBJ(mC,5,t,4.5)
call MultiboardSetItemWidthBJ(mC,2,t,6.)
call MultiboardSetItemWidthBJ(mC,4,t,4.5)
call MultiboardSetItemWidthBJ(mC,6,t,6.)
call MultiboardSetItemStyleBJ(mC,1,t,true,false)
call MultiboardSetItemStyleBJ(mC,3,t,true,false)
call MultiboardSetItemStyleBJ(mC,5,t,true,false)
call MultiboardSetItemStyleBJ(mC,2,t,true,false)
call MultiboardSetItemStyleBJ(mC,4,t,true,false)
call MultiboardSetItemStyleBJ(mC,6,t,true,false)
set t=t+1
endloop
call MultiboardSetItemValueBJ(mC,1,18,kbx+"-TCCB:")
call MultiboardSetItemValueBJ(mC,3,18,kbx+"-TCKN:")
call MultiboardSetItemValueBJ(mC,5,18,kbx+"-TDTC:")
call MultiboardSetItemValueBJ(mC,1,19,kbx+"-KDST:")
call MultiboardSetItemValueBJ(mC,3,19,kbx+"-TNST:")
call MultiboardSetItemValueBJ(mC,5,19,kbx+"-TDDC:")
call MultiboardSetItemValueBJ(mC,1,20,kbx+"-Chí.M:")
call MultiboardSetItemValueBJ(mC,3,20,kbx+"-STCM:")
call MultiboardSetItemValueBJ(mC,5,20,kbx+"-C.Xác:")
call MultiboardSetItemValueBJ(mC,1,21,kbx+"-Kh.CM:")
call MultiboardSetItemValueBJ(mC,3,21,kbx+"-GSTCM:")
call MultiboardSetItemValueBJ(mC,5,21,kbx+"-Né.Tr:")
call MultiboardSetItemValueBJ(mC,1,22,"|cff7fff00"+"-HP.Sinh:")
call MultiboardSetItemValueBJ(mC,3,22,"|cff7fff00"+"-T.Sinh:")
call MultiboardSetItemValueBJ(mC,5,22,"|cff7fff00"+"-HP.Nội:")
call MultiboardSetItemValueBJ(mC,1,23,"|cffff0000"+"-Sinh:")
call MultiboardSetItemValueBJ(mC,3,23,"|cff7fff00"+"-H.Cảnh:")
call MultiboardSetItemValueBJ(mC,5,23,"|cff0078d7"+"-Nội:")
set kbx=null
set ZH=true
return false
endfunction
function kBx takes nothing returns boolean
call QKe("|cffff0000"+"Đã tải xong dữ liệu nền !",3)
set eJ[1]="Sơ Nhập Giang Hồ"
set eJ[2]="Vô Danh Tiểu Tốt"
set eJ[3]="Sơ Hiển Phong Mang"
set eJ[4]="Kỳ Tài Xuất Chúng"
set eJ[5]="Hiệp Cốt Đơn Tâm"
set eJ[6]="Nghĩa Bạc Vân Thiên"
set eJ[7]="Ngạo Thị Quần Hùng"
set eJ[8]="Cái Thế Vô Song"
set eJ[9]="Nhất Đại Tôn Sư"
set eJ[$A]="Tiếu Ngạo Giang Hồ"
set Pj[0]="không"
set Pj[1]="|cff0078d7Trí Sự|r"
set Pj[2]="|cff9370dbTư Mã|r"
set Pj[3]="|cffffa500Thái Thú|r"
set Pj[4]="|cffffa500Thiếu Khanh|r"
set Pj[5]="|cffffa500Thượng Khanh|r"
set Pj[6]="|cffffff00Quốc Công|r"
set Pj[7]="|cffffff00Thừa Tướng|r"
set Pj[8]="|cffffff00Hoàng Đế|r"
set qj[0]="không"
set qj[1]="|cff0078d7Siêu Phàm|r"
set qj[2]="|cff0078d7Xuất Trần|r"
set qj[3]="|cff9370dbLăng Tuyệt|r"
set qj[4]="|cff9370dbKinh Thế|r"
set qj[5]="|cff9370dbNgự Không|r"
set qj[6]="|cffffa500Hỗn Thiên|r"
set qj[7]="|cffffa500Sồ Phượng|r"
set qj[8]="|cffffa500Tiềm Long|r"
set qj[9]="|cffffff00Chí Tôn|r"
set qj[$A]="|cffffff00Vô Song|r"
set qj[$B]="|cffffff00Đại Thánh|r"
set qj[$C]="|cffffff00Siêu Thần|r"
set qj[$D]="|cffffff00Trấn Thiên|r"
set qj[$E]="|cffffff00Phong Vân|r"
set vj=1
call SetGameSpeed(MAP_SPEED_FASTEST)
call kNx()
call QKe("|cffffff00"+"Chọn nhân vật để bắt đầu hành trình mới hoặc ấn -autoload để tiền hành Load nhân vật đã lưu trước đó !",3)
return false
endfunction
function kcx takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,5.,false)
call TriggerAddCondition(t,Filter(function kBx))
endfunction
function kCx takes nothing returns boolean
local integer i=1
local player p=GetLocalPlayer()
local integer z=GetPlayerId(p)+1
local unit u=XJ[z]
local real a=0
local real x=0
if ZH then
call MultiboardSetItemValueBJ(mC,2,$A,I2S(DJ[z]))
call MultiboardSetItemValueBJ(mC,4,$A,I2S(fJ[z]))
call MultiboardSetItemValueBJ(mC,6,$A,I2S(FJ[z]))
call MultiboardSetItemValueBJ(mC,2,$B,I2S(dJ[z]))
call MultiboardSetItemValueBJ(mC,4,$B,I2S(BJ[z]))
call MultiboardSetItemValueBJ(mC,6,$B,I2S(boe[z]))
call MultiboardSetItemValueBJ(mC,2,$C,Pj[gJ[z]])
call MultiboardSetItemValueBJ(mC,4,$C,qj[NJ[z]])
set x=TKe(u,5034)
set a=(x*.1)/(x*.1+$FA)
call MultiboardSetItemValueBJ(mC,2,$D,I2S(R2I(x))+" [ -"+I2S(R2I(a*'d'))+"% ]")
set x=TKe(u,611)
set a=(x*.12)/(x*.12+$C8)
call MultiboardSetItemValueBJ(mC,2,$E,I2S(R2I(x))+" [ -"+I2S(R2I(a*'d'))+"% ]")
set x=TKe(u,Ax)
set a=(x*.12)/(x*.12+$C8)
call MultiboardSetItemValueBJ(mC,2,$F,I2S(R2I(x))+" [ -"+I2S(R2I(a*'d'))+"% ]")
set x=TKe(u,7185)
set a=(x*.12)/(x*.12+$C8)
call MultiboardSetItemValueBJ(mC,2,16,I2S(R2I(x))+" [ -"+I2S(R2I(a*'d'))+"% ]")
set x=TKe(u,Nx)
set a=(x*.12)/(x*.12+$C8)
call MultiboardSetItemValueBJ(mC,2,17,I2S(R2I(x))+" [ -"+I2S(R2I(a*'d'))+"% ]")
call MultiboardSetItemValueBJ(mC,4,$D,I2S(R2I(TKe(u,7695)*'d'))+"%")
call MultiboardSetItemValueBJ(mC,4,$E,I2S(R2I(TKe(u,5724)*'d'))+"%")
call MultiboardSetItemValueBJ(mC,4,$F,I2S(R2I(TKe(u,bx)*'d'))+"%")
call MultiboardSetItemValueBJ(mC,4,16,I2S(R2I(TKe(u,Bx)*'d'))+"%")
call MultiboardSetItemValueBJ(mC,4,17,I2S(R2I(TKe(u,cx)*'d'))+"%")
call MultiboardSetItemValueBJ(mC,2,18,I2S(R2I(TKe(u,5319)*'d'))+"%")
call MultiboardSetItemValueBJ(mC,4,18,I2S(R2I(TKe(u,vx)*'d'))+"%")
call MultiboardSetItemValueBJ(mC,6,18,I2S(R2I(TKe(u,4346)))+" [ "+SubString(R2S(Tpe(u)),0,4)+"/s ]")
call MultiboardSetItemValueBJ(mC,2,19,I2S(R2I(TKe(u,xx)*'d'))+"%")
call MultiboardSetItemValueBJ(mC,4,19,I2S(R2I(TKe(u,ox)*'d'))+"%")
call MultiboardSetItemValueBJ(mC,6,19,I2S(R2I(TKe(u,5363)/ 6)))
set x=TKe(u,4888)
set a=((x*.1)/(x*.1+$B4))*'d'
call MultiboardSetItemValueBJ(mC,2,20,I2S(R2I(x))+" [ "+I2S(R2I(a))+"% ]")
call MultiboardSetItemValueBJ(mC,4,20,I2S(R2I(TKe(u,ax)*'d'))+"%")
call MultiboardSetItemValueBJ(mC,6,20,I2S(R2I(TKe(u,6780)*(1+TKe(u,Ze)))))
set x=TKe(u,7614)
set a=((x*.1)/(x*.1+$B4))*'d'
call MultiboardSetItemValueBJ(mC,2,21,I2S(R2I(x))+" [ "+I2S(R2I(a))+"% ]")
call MultiboardSetItemValueBJ(mC,4,21,I2S(R2I(TKe(u,Vx)*'d'))+"%")
set x=TKe(u,5762)
set a=((x*.15)/(x*.15+500))*'d'
call MultiboardSetItemValueBJ(mC,6,21,I2S(R2I(x))+" [ "+I2S(R2I(a))+"% ]")
call MultiboardSetItemValueBJ(mC,2,22,I2S(R2I(BYe[(z)*(2)+1])))
call MultiboardSetItemValueBJ(mC,4,22,I2S(bJ[z]))
call MultiboardSetItemValueBJ(mC,6,22,I2S(R2I(BYe[(z)*(2)+2])))
call MultiboardSetItemValueBJ(mC,2,23,I2S(R2I(GetUnitState(u,UNIT_STATE_MAX_LIFE))))
call MultiboardSetItemValueBJ(mC,4,23,I2S(bEe[z]))
call MultiboardSetItemValueBJ(mC,6,23,I2S(R2I(GetUnitState(u,UNIT_STATE_MAX_MANA))))
endif
set p=null
set u=null
return false
endfunction
function kdx takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerAddCondition(t,Filter(function kCx))
set t=null
endfunction
function kDx takes nothing returns nothing
call StartTimerBJ(LC,false,999999.)
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function kFx takes integer i returns nothing
if cge[i]-qH!=qr[i]then
call QH()
endif
set qr[i]=qr[i]+2
set cge[i]=qr[i]+qH
endfunction
function kgx takes nothing returns nothing
local integer i=1
local integer kGx=0
local integer toe=0
set MC=(R2I(TimerGetElapsed(LC))/ 60)
set pC=ModuloInteger(R2I(TimerGetElapsed(LC)),60)
call MultiboardSetItemValueBJ(mC,2,8,(I2S(MC)+(":"+I2S(pC))))
if R2I(wH)*2-uH!=0 then
set WH=-$600
endif
loop
exitwhen i>6
if XJ[i]!=null then
set kGx=R2I(qr[i]/ 'x')
set toe=ModuloInteger(R2I(qr[i]/ 2),60)
call MultiboardSetItemValueBJ(mC,5,(i+1),I2S(kGx)+"h"+I2S(toe))
if pC==59 then
call kFx(i)
endif
if BFe[(i)*(4)+1]>0 then
set BFe[(i)*(4)+1]=BFe[(i)*(4)+1]-2
endif
if BFe[(i)*(4)+2]>0 then
set BFe[(i)*(4)+2]=BFe[(i)*(4)+2]-2
endif
if BFe[(i)*(4)+3]>0 then
set BFe[(i)*(4)+3]=BFe[(i)*(4)+3]-2
endif
endif
set i=i+1
endloop
set KB=KB-1
set Ac=Ac-1
set HC=HC-1
set qB=qB-1
set ik=ik-1
set ak=ak-1
set nk=nk-1
set Vo=Vo-1
set kr=kr-1
endfunction
function khx takes nothing returns boolean
set Vk[1]=GetRandomInt(1,4)
set Vk[2]=GetRandomInt(1,4)
set Vk[3]=GetRandomInt(1,3)
set Vk[4]=GetRandomInt(1,4)
set Vk[5]=GetRandomInt(1,4)
set Vk[6]=GetRandomInt(1,3)
return false
endfunction
function kHx takes nothing returns boolean
local integer rd=GetRandomInt(1,9)
call tTe(Zv,'n06F',GetRectCenterX(lj[rd]),GetRectCenterY(lj[rd]),270,570)
return false
endfunction
function kjx takes nothing returns nothing
local item t=GetEnumItem()
if GetItemTypeId(t)!='wolg' then
call FlushChildHashtable(IT,GetHandleId(t))
call FlushChildHashtable(UH,GetHandleId(t))
call RemoveItem(t)
endif
set t=null
endfunction
function kJx takes nothing returns boolean
local integer CGe=Qce()
set IMe[CGe]=IMe[CGe]-1
if IMe[CGe]==20 then
call QKe("|cffff0000"+"Hệ thống tự động xóa vật phẩm sau 20 giây!",5)
endif
if IMe[CGe]==$F then
call QKe("|cffff0000"+"Hệ thống tự động xóa vật phẩm sau 15 giây!",5)
endif
if IMe[CGe]==$A then
call QKe("|cffff0000"+"Hệ thống tự động xóa vật phẩm sau 10 giây!",5)
endif
if IMe[CGe]==5 then
call QKe("|cffff0000"+"Hệ thống tự động xóa vật phẩm sau 5 giây!",5)
endif
if IMe[CGe]<=0 then
call QDe()
call EnumItemsInRect(XG,Wv,function kjx)
call QKe("|cffff0000"+"Toàn bộ vật phẩm trong các khu vực luyện công và thành thị bị xóa khỏi trò chơi !",5)
call C5e(CGe)
endif
return false
endfunction
function kkx takes nothing returns nothing
local integer CGe=C4e()
local integer i=1
loop
exitwhen i>6
if XJ[i]!=null then
call tFe(i,8222,1)
endif
set i=i+1
endloop
set IMe[CGe]=30
call QKe("|cffff0000"+"Hệ thống tự động xóa vật phảm sau 30 giây!",5)
call QIe(CGe,1.,true,function kJx)
endfunction
function kKx takes nothing returns boolean
call BlzFrameSetVisible(BlzFrameGetParent(BlzGetOriginFrame(ORIGIN_FRAME_MINIMAP_BUTTON,0)),false)
return false
endfunction
function klx takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerAddAction(t,function kgx)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,5.,false)
call TriggerAddAction(t,function khx)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,600.,true)
call TriggerAddAction(t,function kHx)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1800.,true)
call TriggerAddAction(t,function kkx)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.1,false)
call TriggerAddAction(t,function kKx)
set t=null
endfunction
function kLx takes nothing returns boolean
local integer CGe=Qce()
local unit n
call GroupEnumUnitsInRange(sv,Ite[CGe],ITe[CGe],$3E8,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if(IsUnitType((n),UNIT_TYPE_HERO))and not spe(n)then
call tRe(n,Ise[CGe])
call Qre(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIlm\\AIlmTarget.mdl",n,"origin"))
endif
call GroupRemoveUnit(sv,n)
endloop
set n=null
set IQe[CGe]=IQe[CGe]-1
if IQe[CGe]<=0 then
call QDe()
call Qre(ISe[CGe])
set ISe[CGe]=null
call C3e(CGe)
endif
return false
endfunction
function kmx takes integer tAe,real x,real y returns nothing
local integer CGe=C2e()
set Ise[CGe]=tAe
set ISe[CGe]=AddSpecialEffect("Doodads\\Northrend\\Props\\FirePit\\FirePit.mdl",x,y)
set IQe[CGe]=18
set Ite[CGe]=x
set ITe[CGe]=y
call BlzSetSpecialEffectScale((ISe[CGe]),((1.)*1.))
call BlzSetSpecialEffectZ(ISe[CGe],sxe(x,y))
call QIe(CGe,10.,true,function kLx)
endfunction
function kMx takes unit u returns boolean
local integer id=GetHandleId(u)
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local integer TMe=Bue[(2)*(20)+i]
local integer ex=Bue[(1)*(20)+i]/ 2
local integer er=vk[GetHeroLevel(u)-1]
local integer st=(GetHeroLevel(u)-'d')*3+(bJ[i]+1)*300+JA[i]*$F+bEe[i]*300
set Rk=true
if er>ex then
call QH()
endif
if TMe!=GetHeroStr(u,true)+GetHeroAgi(u,true)+GetHeroInt(u,true)then
call QH()
endif
if(LoadReal(UH,id,705)/ 2)!=GetUnitState(u,UNIT_STATE_MAX_LIFE)then
call QH()
endif
if(LoadReal(UH,id,6732)/ 2)!=GetUnitState(u,UNIT_STATE_MAX_MANA)then
call QH()
endif
if bie[i]!=bae[i]+bne[i]+bVe[i]or bie[i]>st or boe[i]>st or JA[i]>20 then
call QH()
endif
set Rk=false
set p=null
return false
endfunction
function kpx takes nothing returns boolean
local unit u=GetKillingUnit()
local unit v=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local player g=GetOwningPlayer(v)
local integer U3e=GetUnitLevel(v)
local integer i=GetPlayerId(p)+1
local integer j=GetPlayerId(g)+1
local real x=GetUnitX(v)
local real y=GetUnitY(v)
local integer id=GetUnitTypeId(v)
local integer a=0
local real T0e=0
local real b=0
local integer sIe=GetHandleId(v)
if g==zv then
if not(GetUnitAbilityLevel((v),('A0Z8'))>0)then
set Ok[i]=Ok[i]+2
set bhe[(i)*($A)+1]=bhe[(i)*($A)+1]+2
endif
set T0e=1.
if BFe[(i)*(4)+1]>0 then
set T0e=1.2
endif
if Bpe[(1)*(6)+i]>0 then
set T0e=T0e+.03+.02*Bpe[(1)*(6)+i]
endif
set a=R2I((1+TKe(u,sx))*T0e*(60+U3e*30)*ek[bJ[i]+bEe[i]]*xj)
call tRe(u,a)
set T0e=0
if BFe[(i)*(4)+2]>0 then
set T0e=6
endif
if BUe[(i)*(20)+7]>0 and Bme[(i)*(20)+1]<5*SH then
set Bme[(i)*(20)+1]=Bme[(i)*(20)+1]+(16+R2I(T0e))
endif
if BUe[(i)*(20)+8]>0 and Bme[(i)*(20)+2]<5*SH then
set Bme[(i)*(20)+2]=Bme[(i)*(20)+2]+($C+R2I(T0e))
endif
set T0e=0
if BFe[(i)*(4)+3]>0 then
set T0e=4
endif
if So[i]>=1 and So[i]<20 and Bme[(i)*(20)+3]<5*SH then
set Bme[(i)*(20)+3]=Bme[(i)*(20)+3]+($A+R2I(T0e))*(1+ba[i])
endif
if So[i]>=21 and So[i]<30 and Bme[(i)*(20)+3]<5*SH then
set Bme[(i)*(20)+3]=Bme[(i)*(20)+3]+(8+R2I(T0e))*(1+ba[i])
endif
if So[i]>=31 and So[i]<40 and Bme[(i)*(20)+3]<5*SH then
set Bme[(i)*(20)+3]=Bme[(i)*(20)+3]+(8+R2I(T0e))*(1+ba[i])
endif
if(GetUnitAbilityLevel((v),('A0H6'))>0)then
call Gdx(u,i,v,id,x,y)
elseif(GetUnitAbilityLevel((v),('A0H7'))>0)then
call hLx(u,i,v,id,x,y)
elseif(GetUnitAbilityLevel((v),('A0H9'))>0)then
call HGx(u,i,v,id,x,y)
elseif(GetUnitAbilityLevel((v),('A0HC'))>0)then
call jHx(u,i,v,id,x,y)
elseif(GetUnitAbilityLevel((v),('A0HD'))>0)then
call GMx(u,i,v,id,x,y)
elseif(GetUnitAbilityLevel((v),('A0HF'))>0)then
call G4x(u,i,v,id,x,y)
elseif(GetUnitAbilityLevel((v),('A0HG'))>0)then
call g1x(u,i,v,id,x,y)
elseif(GetUnitAbilityLevel((v),('A0HI'))>0)then
call Gnx(u,i,v,id,x,y)
elseif(GetUnitAbilityLevel((v),('A0HJ'))>0)then
call hDx(u,i,v,id,x,y)
elseif(GetUnitAbilityLevel((v),('A0HM'))>0)then
call jAx(u,i,v,id,x,y)
elseif(GetUnitAbilityLevel((v),('A0HQ'))>0)then
call wJe(u,i,v,id,x,y)
elseif(GetUnitAbilityLevel((v),('A0HS'))>0)then
call zLe(u,i,v,id,x,y)
elseif(GetUnitAbilityLevel((v),('A0NB'))>0)then
call zxe(u,i,v,id,x,y)
elseif(GetUnitAbilityLevel((v),('A0TN'))>0)then
call hax(u,i,v,id,x,y)
elseif(GetUnitAbilityLevel((v),('A0TO'))>0)then
call HOx(u,i,v,id,x,y)
elseif(GetUnitAbilityLevel((v),('A0XL'))>0)then
call h7x(u,i,v,id,x,y)
elseif(GetUnitAbilityLevel((v),('A0XM'))>0)then
call hyx(u,i,v,id,x,y)
elseif(GetUnitAbilityLevel((v),('A0XN'))>0)then
call HSx(u,i,v,id,x,y)
endif
if(IsUnitType((v),UNIT_TYPE_TAUREN))then
if(IsUnitType((u),UNIT_TYPE_HERO))then
call kMx(u)
endif
set b=LoadReal(UH,sIe,705)*500
if LoadReal(ht,sIe,Sx)<(b*.7)then
call QH()
endif
if GetUnitState(v,UNIT_STATE_MAX_LIFE)<b then
call QH()
endif
set a=LoadInteger(UH,id,ke)
if a!=0 then
call CreateItem(a,x,y)
endif
call Yte(u,i,v,id,x,y)
if id=='n05N' then
call u5e(v)
endif
if HA[i]!=0 and id==HA[i]then
set hA[i]=true
call Qke(p,"|cffffcc00"+"[ Truy Nã ] cập nhật nhiệm vụ, đã đánh bại "+GetObjectName(id),5)
set bce[(i-1)*($C)+3]="Nhiệm vụ truy nã "+"|cff6d6d6d"+"(hoàn thành)"
endif
if id=='n0AI' and Bhe[(i)*(8)+1]==1 then
call Crx(u,i,1,1)
endif
else
if NA[i]<'t' then
if LoadInteger(AA,NA[i],6658)==id then
set bA[i]=bA[i]+1
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ tân thủ: "+I2S(bA[i])+"/"+I2S((LoadInteger(AA,(NA[i]),(539)))),3)
endif
endif
if id=='n04Z' then
if Bqe[(i)*(2)+1]==1 then
set Bqe[(i)*(2)+2]=Bqe[(i)*(2)+2]+1
call Qke(p,"|cffffcc00"+"Cập nhật nhiệm vụ Xà Huyệt Thoát Hiểm: "+I2S(Bqe[(i)*(2)+2])+"/200",5)
endif
endif
if GetRandomReal(0,'d')<=$F then
call tHe(i,U3e*5+GetRandomInt(20,30),1)
endif
set a=LoadInteger(UH,id,ke)
if a!=0 and GetRandomReal(0,'d')<=4. then
if not Tk[i]then
call CreateItem(a,x,y)
else
call UnitAddItemById(OJ[i],a)
endif
endif
if(GetUnitAbilityLevel((v),('A0H4'))>0)then
if not ii then
set ni[i]=ni[i]+3
endif
if GetRandomReal(0,'d')<=(U3e/ 5*3)+5 then
set FA[i]=FA[i]+3
call Qke(p,"|cffffcc00"+"- Địa Đồ Thần Bí: |r"+I2S(FA[i]/ 3),3)
endif
call tFe(i,U3e*$A,1)
call tHe(i,U3e*GetRandomInt($F,20),1)
call CreateItem(bj[GetRandomInt(1,2)],x+GetRandomReal(-'d','d'),y+GetRandomReal(-'d','d'))
set a=LoadInteger(UH,id,5510)
if a!=0 then
if GetRandomReal(0,'d')<=50 or U3e<=85 then
if not Tk[i]then
call CreateItem(a,x+GetRandomReal(-'d','d'),y+GetRandomReal(-'d','d'))
else
call UnitAddItemById(OJ[i],a)
endif
endif
endif
set a=LoadInteger(UH,id,Ke)
if a!=0 then
if GetRandomReal(0,'d')<=75 or U3e<=85 then
call w8e(a,GetRandomInt(1,5),x+GetRandomReal(-'d','d'),y+GetRandomReal(-'d','d'))
endif
endif
call kmx(U3e*80,x,y)
endif
if(GetUnitAbilityLevel((v),('A0H5'))>0)then
if not ii then
set ni[i]=ni[i]+3
endif
set FA[i]=FA[i]+3
call Qke(p,"|cffffcc00"+"- Địa Đồ Thần Bí: |r"+I2S(FA[i]/ 3),3)
call tFe(i,U3e*20,1)
call tHe(i,U3e*GetRandomInt(25,35),1)
call CreateItem(bj[GetRandomInt(2,3)],x+GetRandomReal(-'d','d'),y+GetRandomReal(-'d','d'))
set a=LoadInteger(UH,id,5510)
if not Tk[i]then
call CreateItem(a,x+GetRandomReal(-'d','d'),y+GetRandomReal(-'d','d'))
else
call UnitAddItemById(OJ[i],a)
endif
set a=LoadInteger(UH,id,Ke)
call w8e(a,GetRandomInt(1,5),x+GetRandomReal(-'d','d'),y+GetRandomReal(-'d','d'))
call kmx(U3e*$A0,x,y)
endif
endif
set x=LoadReal(ht,sIe,Ek)
set y=LoadReal(ht,sIe,Xk)
if x!=0 and y!=0 then
set Ik[i]=Ik[i]+1
if Ik[i]>='d' then
call wFe(v,sIe,x,y,$F)
set Ik[i]=0
else
call wFe(v,sIe,x,y,0)
endif
endif
endif
if(IsUnitType((v),UNIT_TYPE_HERO))then
call gDx(v,g,j,true)
if(IsUnitType((u),UNIT_TYPE_HERO))then
if cve[j]then
call jYx(u,v,p,g,i,j)
else
call QKe(rj[j]+" bị "+rj[i]+" đánh trọng thương !",$F)
endif
else
if Nk>3 then
set Pv=GetUnitLifePercent(u)+9
else
set Pv=GetUnitLifePercent(u)+18
endif
call SetUnitLifePercentBJ(u,Pv)
if(GetUnitAbilityLevel((u),('A0JP'))>0)and Pv>=50 then
call UnitRemoveAbility(u,'A0JP')
endif
endif
endif
set u=null
set v=null
set p=null
set g=null
return false
endfunction
function kPx takes nothing returns boolean
return tOe(GetTriggerUnit())==false and kpx()
endfunction
function kqx takes nothing returns boolean
local unit u=GetTriggerUnit()
call kMx(u)
set u=null
return false
endfunction
function kQx takes nothing returns boolean
return(not Rk and(IsUnitType((GetTriggerUnit()),UNIT_TYPE_HERO))and not tOe(GetAttacker())and GetUnitTypeId(GetTriggerUnit())!='H00K' and kqx())!=null
endfunction
function ksx takes nothing returns boolean
local unit u=GetAttacker()
call kMx(u)
set u=null
return false
endfunction
function kSx takes nothing returns boolean
return(not Rk and(IsUnitType((GetAttacker()),UNIT_TYPE_HERO))and not tOe(GetTriggerUnit())and GetUnitTypeId(GetAttacker())!='H00K' and ksx())!=null
endfunction
function ktx takes nothing returns nothing
local unit v=GetTriggerUnit()
local unit u=GetAttacker()
local player p=GetOwningPlayer(u)
if IsUnitAlly(v,p)then
call IssueImmediateOrderById(u,$D0004)
endif
set v=null
set p=null
set u=null
endfunction
function kTx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Filter(function kPx))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function kQx))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function kSx))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(t,function ktx)
set t=null
endfunction
function kux takes nothing returns boolean
return((IsUnitType((GetTriggerUnit()),UNIT_TYPE_HERO))==false)!=null
endfunction
function kUx takes nothing returns nothing
local unit u=GetTriggerUnit()
call RemoveUnit(u)
set u=null
endfunction
function kwx takes nothing returns nothing
local trigger kWx=CreateTrigger()
call Qfe(kWx,EVENT_PLAYER_UNIT_DECAY)
call TriggerAddCondition(kWx,Condition(function kux))
call TriggerAddAction(kWx,function kUx)
set kWx=null
endfunction
function kyx takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer i=(GetPlayerId((p))+1)
local unit u=GetTriggerUnit()
local integer id=GetUnitTypeId(u)
local integer b=LoadInteger(UH,id,22)
if not ZH then
set p=null
set u=null
return Yv
endif
if lk[i]then
set p=null
set u=null
return Yv
endif
if Ak then
set p=null
set u=null
return Yv
endif
if VJ[i]then
set p=null
set u=null
return Yv
endif
if XJ[i]!=null then
set p=null
set u=null
return Yv
endif
set Ak=true
if EJ[i]==u then
if b>=2 then
call QKe("|cffff0000"+"Trong mỗi trận chỉ có thể tồn tại tối đa 2 nhân vật cùng hệ phái",5)
else
set EJ[i]=null
set VJ[i]=yv
call Qre(AddSpecialEffect(("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl"),((GetRectCenterX(uC))*1.),((GetRectCenterY(uC))*1.)))
call QKe(rj[i]+" đã chọn hệ phái "+"|cff7fff00"+GetUnitName(u),5)
call SaveInteger(UH,id,22,b+1)
set XJ[i]=CreateUnit(p,id,GetRectCenterX(uC),GetRectCenterY(uC),270)
if p==GetLocalPlayer()then
call ClearSelection()
call PanCameraToTimed(GetRectCenterX(uC),GetRectCenterY(uC),0)
call SelectUnit(XJ[i],yv)
endif
call gcx(p,XJ[i],yv)
call gjx(i)
set Ub[i]=true
endif
else
set EJ[i]=u
call SetUnitAnimation(u,"attack")
call QueueUnitAnimation(u,"stand")
endif
set Ak=false
set p=null
set u=null
return Yv
endfunction
function kYx takes nothing returns boolean
return((IsUnitType((GetTriggerUnit()),UNIT_TYPE_HERO))and GetOwningPlayer(GetTriggerUnit())==Zv and kyx())!=null
endfunction
function kzx takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Player(0),EVENT_PLAYER_UNIT_SELECTED,Wv)
call TriggerRegisterPlayerUnitEvent(t,Player(1),EVENT_PLAYER_UNIT_SELECTED,Wv)
call TriggerRegisterPlayerUnitEvent(t,Player(2),EVENT_PLAYER_UNIT_SELECTED,Wv)
call TriggerRegisterPlayerUnitEvent(t,Player(3),EVENT_PLAYER_UNIT_SELECTED,Wv)
call TriggerRegisterPlayerUnitEvent(t,Player(4),EVENT_PLAYER_UNIT_SELECTED,Wv)
call TriggerRegisterPlayerUnitEvent(t,Player(5),EVENT_PLAYER_UNIT_SELECTED,Wv)
call TriggerAddCondition(t,Filter(function kYx))
set t=null
endfunction
function kZx takes integer i,integer lv returns integer
local real k_x=I2R(vk[lv]-vk[lv-1])
local real k0x=I2R(GetHeroXP(XJ[i])-vk[lv-1])
if lv==$C8 then
return 0
endif
return R2I(k0x/ k_x*'d')
endfunction
function k1x takes unit u,integer i,player p,integer d returns nothing
local integer s=0
set Ao=0
call Uee()
set s=qb[i]
call CDe(Ao,(s))
call Uee()
set s=GetHeroLevel(u)
call CDe(Ao,(s))
call Uee()
set s=kZx(i,GetHeroLevel(u))
call CDe(Ao,(s))
call Uee()
call tDe(i,0,0)
set s=dJ[i]
if s-cGe[(i)*($A)+4]>2*SH then
set s=0
endif
call CDe(Ao,(s))
call Uee()
call tge(i,0,0)
set s=hJ[i]
call CDe(Ao,(s))
call Uee()
call tHe(i,0,0)
set s=sde(p)
call CDe(Ao,(s))
call Uee()
call tFe(i,0,0)
set s=fJ[i]
call CDe(Ao,(s))
call Uee()
call tfe(i,0,0)
set s=DJ[i]
call CDe(Ao,(s))
call Uee()
call tGe(i,0,0)
set s=cce[(i)*(20)+1]
if s<0 then
set s=0
endif
call CDe(Ao,(s))
call Uee()
call the(i,0,0)
set s=cCe[(i)*(20)+1]
call CDe(Ao,(s))
call tje(i,0,1,0)
call Uee()
set s=cBe[(i)*(20)+1]/ 2
call CDe(Ao,(s))
call Uee()
set s=cBe[(i)*(20)+2]/ 2
call CDe(Ao,(s))
call Uee()
set s=cBe[(i)*(20)+3]/ 2
call CDe(Ao,(s))
call Uee()
set s=cBe[(i)*(20)+4]/ 2
call CDe(Ao,(s))
call Uee()
set s=cBe[(i)*(20)+5]/ 2
call CDe(Ao,(s))
call Uee()
set s=cBe[(i)*(20)+6]/ 2
call CDe(Ao,(s))
call Uee()
call tke(i,1,0,0)
set s=cde[(i)*(20)+1]
call CDe(Ao,(s))
call Uee()
call tke(i,2,0,0)
set s=cde[(i)*(20)+2]
call CDe(Ao,(s))
call Uee()
call tke(i,3,0,0)
set s=cde[(i)*(20)+3]
call CDe(Ao,(s))
call Uee()
call tke(i,4,0,0)
set s=cde[(i)*(20)+4]
call CDe(Ao,(s))
call Uee()
call tke(i,5,0,0)
set s=cde[(i)*(20)+5]
call CDe(Ao,(s))
call Uee()
call tke(i,6,0,0)
set s=cde[(i)*(20)+6]
call CDe(Ao,(s))
call Uee()
call tke(i,7,0,0)
set s=cde[(i)*(20)+7]
call CDe(Ao,(s))
call Uee()
call tke(i,8,0,0)
set s=cde[(i)*(20)+8]
call CDe(Ao,(s))
call Uee()
call tke(i,9,0,0)
set s=cde[(i)*(20)+9]
call CDe(Ao,(s))
call Uee()
call tke(i,$A,0,0)
set s=cde[(i)*(20)+$A]
call CDe(Ao,(s))
call Uee()
set s=d
call CDe(Ao,(s))
set bk=Uxe(UAe(p))
endfunction
function k2x takes unit u,integer i,player p,integer d returns nothing
local integer s=0
set Ao=0
call Uee()
set s=NA[i]
call CDe(Ao,(s))
call Uee()
set s=BGe[(i)*(3)+3]
call CDe(Ao,(s))
call Uee()
set s=RA[i]
call CDe(Ao,(s))
call Uee()
set s=vr[i]
call CDe(Ao,(s))
call Uee()
set s=xr[i]
call CDe(Ao,(s))
call Uee()
set s=JA[i]/ 2
call CDe(Ao,(s))
call Uee()
set s=kA[i]/ 2
call CDe(Ao,(s))
call Uee()
set s=GetUnitAbilityLevel(XJ[i],'A0YT')-bEe[i]-1
if s-cGe[(i)*($A)+3]>5 then
set s=0
endif
call CDe(Ao,(s))
call tbe(i,0,0)
call Uee()
set s=BUe[(i)*(20)+1]
call CDe(Ao,(s))
call Uee()
set s=BUe[(i)*(20)+2]
call CDe(Ao,(s))
call Uee()
set s=BUe[(i)*(20)+3]
call CDe(Ao,(s))
call Uee()
set s=BUe[(i)*(20)+4]
call CDe(Ao,(s))
call Uee()
set s=BUe[(i)*(20)+5]
call CDe(Ao,(s))
call Uee()
set s=BUe[(i)*(20)+6]
call CDe(Ao,(s))
call Uee()
set s=BUe[(i)*(20)+7]
call CDe(Ao,(s))
call Uee()
set s=BUe[(i)*(20)+8]
call CDe(Ao,(s))
call Uee()
set s=BUe[(i)*(20)+9]
call CDe(Ao,(s))
call Uee()
set s=BUe[(i)*(20)+$A]
call CDe(Ao,(s))
call Uee()
set s=Bme[(i)*(20)+1]/ 2
call CDe(Ao,(s))
call Uee()
set s=Bme[(i)*(20)+2]/ 2
call CDe(Ao,(s))
call Uee()
set s=Bme[(i)*(20)+3]/ 2
call CDe(Ao,(s))
call Uee()
set s=jJ[i]
call CDe(Ao,(s))
call Uee()
set s=So[i]
call CDe(Ao,(s))
call Uee()
set s=d
call CDe(Ao,(s))
call Uee()
set s=mo[i]
call CDe(Ao,(s))
call Uee()
set s=Bpe[(1)*(6)+i]
call CDe(Ao,(s))
call Uee()
set s=GA[i]
call CDe(Ao,(s))
call Uee()
set s=vj-1
call CDe(Ao,(s))
call Uee()
set s=0
call CDe(Ao,(s))
call Uee()
set s=0
call CDe(Ao,(s))
call Uee()
set s=uI[i]
call CDe(Ao,(s))
call Uee()
set s=BUe[(i)*(20)+$B]
call CDe(Ao,(s))
call Uee()
set s=$186A0+bfe[(i)*($C)+1]*$2710+bfe[(i)*($C)+2]*$3E8+bfe[(i)*($C)+3]*'d'+bfe[(i)*($C)+4]*$A+bfe[(i)*($C)+5]
call CDe(Ao,(s))
call Uee()
set s=$186A0+bfe[(i)*($C)+6]*$2710+bfe[(i)*($C)+7]*$3E8+bfe[(i)*($C)+8]*'d'+bfe[(i)*($C)+9]*$A+bfe[(i)*($C)+$A]
call CDe(Ao,(s))
set Bk=Uxe(UAe(p))
endfunction
function k3x takes unit u,integer i,player p,integer d returns nothing
local integer s=0
set Ao=0
call tde(i,0,0)
call Uee()
set s=FJ[i]
call CDe(Ao,(s))
call Uee()
set s=$2710+cbe[(i)*(20)+1]*$3E8+cbe[(i)*(20)+2]*'d'+cbe[(i)*(20)+3]*$A+cbe[(i)*(20)+4]
call CDe(Ao,(s))
call Uee()
set s=$2710+cbe[(i)*(20)+5]*$3E8+cbe[(i)*(20)+6]*'d'+cbe[(i)*(20)+7]*$A+cbe[(i)*(20)+8]
call CDe(Ao,(s))
call Uee()
set s=$186A0+cfe[(i)*(20)+1]*$2710+cfe[(i)*(20)+2]*$3E8+cfe[(i)*(20)+3]*'d'+cfe[(i)*(20)+4]*$A+cfe[(i)*(20)+5]
call CDe(Ao,(s))
call Uee()
set s=$186A0+cfe[(i)*(20)+6]*$2710+cfe[(i)*(20)+7]*$3E8+cfe[(i)*(20)+8]*'d'+cfe[(i)*(20)+9]*$A+cfe[(i)*(20)+$A]
call CDe(Ao,(s))
call Uee()
set s=$186A0+cfe[(i)*(20)+$B]*$2710+cfe[(i)*(20)+$C]*$3E8+cfe[(i)*(20)+$D]*'d'+cfe[(i)*(20)+$E]*$A+cfe[(i)*(20)+$F]
call CDe(Ao,(s))
call Uee()
set s=$2710+cfe[(i)*(20)+16]*$3E8+cfe[(i)*(20)+17]*'d'+cfe[(i)*(20)+18]*$A+cfe[(i)*(20)+19]
call CDe(Ao,(s))
call Uee()
if bWe[(i)*(6)+1]!=null then
set s=LoadInteger(IT,GetHandleId(bWe[(i)*(6)+1]),ci)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if bWe[(i)*(6)+2]!=null then
set s=LoadInteger(IT,GetHandleId(bWe[(i)*(6)+2]),ci)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if bWe[(i)*(6)+3]!=null then
set s=LoadInteger(IT,GetHandleId(bWe[(i)*(6)+3]),ci)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if bWe[(i)*(6)+4]!=null then
set s=LoadInteger(IT,GetHandleId(bWe[(i)*(6)+4]),ci)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if bWe[(i)*(6)+5]!=null then
set s=LoadInteger(IT,GetHandleId(bWe[(i)*(6)+5]),ci)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if bWe[(i)*(6)+6]!=null then
set s=LoadInteger(IT,GetHandleId(bWe[(i)*(6)+6]),ci)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
set s=NJ[i]
if s>8 then
if s-cGe[(i)*($A)+1]>2 then
set s=0
endif
endif
call CDe(Ao,(s))
call Uee()
set s=gJ[i]
call CDe(Ao,(s))
call Uee()
if BMe[(i)*(20)+1]>$C8 then
call QH()
endif
set s=BMe[(i)*(20)+1]
call CDe(Ao,(s))
call Uee()
if BMe[(i)*(20)+2]>$C8 then
call QH()
endif
set s=BMe[(i)*(20)+2]
call CDe(Ao,(s))
call Uee()
if BMe[(i)*(20)+3]>$C8 then
call QH()
endif
set s=BMe[(i)*(20)+3]
call CDe(Ao,(s))
call Uee()
set s=$3E8+bIe[(i)*(20)+1]*$A+bAe[(i)*(20)+1]
call CDe(Ao,(s))
call Uee()
set s=$3E8+bIe[(i)*(20)+2]*$A+bAe[(i)*(20)+2]
call CDe(Ao,(s))
call Uee()
set s=$3E8+bIe[(i)*(20)+3]*$A+bAe[(i)*(20)+3]
call CDe(Ao,(s))
call Uee()
set s=$3E8+bIe[(i)*(20)+4]*$A+bAe[(i)*(20)+4]
call CDe(Ao,(s))
call Uee()
set s=d
call CDe(Ao,(s))
call Uee()
set s=BGe[(i)*(3)+1]
call CDe(Ao,(s))
call Uee()
set s=BGe[(i)*(3)+2]
call CDe(Ao,(s))
call Uee()
set s=$2710+S2I(SubString(Vi[i],0,1))*$3E8+S2I(SubString(Vi[i],1,2))*'d'+S2I(SubString(Vi[i],2,3))*$A+S2I(SubString(Vi[i],3,4))
call CDe(Ao,(s))
call Uee()
set s=$2710+S2I(SubString(Vi[i],4,5))*$3E8+S2I(SubString(Vi[i],5,6))*'d'+S2I(SubString(Vi[i],6,7))*$A+S2I(SubString(Vi[i],7,8))
call CDe(Ao,(s))
call Uee()
set s=Ei[i]
call CDe(Ao,(s))
call Uee()
set s=Oi[i]
call CDe(Ao,(s))
set Ck=Uxe(UAe(p))
endfunction
function k4x takes unit u,integer i,player p,integer d returns nothing
local integer s=0
local integer id=0
local item t=null
set Ao=0
set t=bue[(i)*(20)+2]
set id=GetHandleId(t)
call Uee()
if t!=null then
set s=LoadInteger(IT,id,4386)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,5563)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,7774)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,6119)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,6036)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,5621)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
set s=bRe[(i)*(20)+2]
call CDe(Ao,(s))
set t=bue[(i)*(20)+6]
set id=GetHandleId(t)
call Uee()
if t!=null then
set s=LoadInteger(IT,id,4386)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,5563)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,7774)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,6119)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,6036)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,5621)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
set s=bRe[(i)*(20)+6]
call CDe(Ao,(s))
set t=bue[(i)*(20)+5]
set id=GetHandleId(t)
call Uee()
if t!=null then
set s=LoadInteger(IT,id,4386)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,5563)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,7774)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,6119)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,6036)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,5621)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
set s=bRe[(i)*(20)+5]
call CDe(Ao,(s))
set t=bue[(i)*(20)+7]
set id=GetHandleId(t)
call Uee()
if t!=null then
set s=LoadInteger(IT,id,4386)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,5563)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,7774)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,6119)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,6036)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,5621)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
set s=bRe[(i)*(20)+7]
call CDe(Ao,(s))
set t=bue[(i)*(20)+$A]
set id=GetHandleId(t)
call Uee()
if t!=null then
set s=LoadInteger(IT,id,4386)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,5563)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,7774)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,6119)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,6036)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,5621)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
set s=bRe[(i)*(20)+$A]
call CDe(Ao,(s))
set t=bue[(i)*(20)+1]
set id=GetHandleId(t)
call Uee()
if t!=null then
set s=LoadInteger(IT,id,4386)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,7774)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,6119)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,6036)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,5621)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
set s=bRe[(i)*(20)+1]
call CDe(Ao,(s))
set t=bue[(i)*(20)+3]
set id=GetHandleId(t)
call Uee()
if t!=null then
set s=LoadInteger(IT,id,4386)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,7774)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,6119)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,6036)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,5621)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
set s=bRe[(i)*(20)+3]
call CDe(Ao,(s))
set t=bue[(i)*(20)+9]
set id=GetHandleId(t)
call Uee()
if t!=null then
set s=LoadInteger(IT,id,4386)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,7774)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,6119)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,6036)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,5621)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
set s=bRe[(i)*(20)+9]
call CDe(Ao,(s))
set dk=Uxe(UAe(p))
endfunction
function k5x takes unit u,integer i,player p,integer d returns nothing
local integer s=0
local item t=null
local integer id=0
set Ao=0
call Uee()
set s=yr[i]
call CDe(Ao,(s))
call Uee()
set s=Yr[i]
call CDe(Ao,(s))
call Uee()
set s=$186A0+SI[i]*$3E8+PI[i]*'d'+qI[i]*$A+pI[i]
call CDe(Ao,(s))
call Uee()
set s=sI[i]
call CDe(Ao,(s))
call Uee()
set s=BDe[(0)*(20)+i]
call CDe(Ao,(s))
call Uee()
set s=R2I(tI[i])
call CDe(Ao,(s))
call Uee()
set s=$F4240+BCe[(i)*(20)+1]*$186A0+BCe[(i)*(20)+2]*$2710+BCe[(i)*(20)+3]*$3E8+BCe[(i)*(20)+4]*'d'+BCe[(i)*(20)+5]*$A+BCe[(i)*(20)+6]
call CDe(Ao,(s))
call Uee()
set s=$F4240+Bde[(i)*(20)+1]*$186A0+Bde[(i)*(20)+2]*$2710+Bde[(i)*(20)+3]*$3E8+Bde[(i)*(20)+4]*'d'+Bde[(i)*(20)+5]*$A+Bde[(i)*(20)+6]
call CDe(Ao,(s))
call Uee()
set s=bKe[(i)*(20)+1]
call CDe(Ao,(s))
call Uee()
set s=bKe[(i)*(20)+2]
call CDe(Ao,(s))
call Uee()
set s=bKe[(i)*(20)+3]
call CDe(Ao,(s))
call Uee()
set s=bKe[(i)*(20)+4]
call CDe(Ao,(s))
call Uee()
set s=bKe[(i)*(20)+5]
call CDe(Ao,(s))
call Uee()
set s=bKe[(i)*(20)+6]
call CDe(Ao,(s))
call Uee()
set s='d'+cee[(i)*(20)+1]*$A+cxe[(i)*(20)+1]
call CDe(Ao,(s))
call Uee()
set s='d'+cee[(i)*(20)+2]*$A+cxe[(i)*(20)+2]
call CDe(Ao,(s))
call Uee()
set s='d'+cee[(i)*(20)+3]*$A+cxe[(i)*(20)+3]
call CDe(Ao,(s))
call Uee()
set s='d'+cee[(i)*(20)+4]*$A+cxe[(i)*(20)+4]
call CDe(Ao,(s))
call Uee()
set s=jo[i]
call CDe(Ao,(s))
call Uee()
set s=bOe[(i)*(20)+1]
call CDe(Ao,(s))
call Uee()
set s=bOe[(i)*(20)+2]
call CDe(Ao,(s))
call Uee()
set s=bOe[(i)*(20)+3]
call CDe(Ao,(s))
call Uee()
set s=bOe[(i)*(20)+4]
call CDe(Ao,(s))
call Uee()
set s=bOe[(i)*(20)+5]
call CDe(Ao,(s))
call Uee()
set s=bOe[(i)*(20)+6]
call CDe(Ao,(s))
set t=bue[(i)*(20)+8]
set id=GetHandleId(t)
call Uee()
if t!=null then
set s=LoadInteger(IT,id,4386)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,5563)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,7774)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,6119)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,6036)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,5621)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
set s=bRe[(i)*(20)+8]
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,8105)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
set s=d
call CDe(Ao,(s))
call Uee()
set s=HJ[i]
call CDe(Ao,(s))
call Uee()
set s=BFe[(i)*(4)+4]
call CDe(Ao,(s))
set Dk=Uxe(UAe(p))
set t=null
endfunction
function k6x takes unit u,integer i,player p,integer d returns nothing
local integer s=0
local item t=null
local integer id=0
local string ss=""
set Ao=0
call Uee()
set t=bve[(i)*(6)+1]
set id=GetHandleId(t)
if t!=null then
set s=LoadInteger(IT,id,4815)*'d'+LoadInteger(IT,id,7708)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
set t=bve[(i)*(6)+2]
set id=GetHandleId(t)
if t!=null then
set s=LoadInteger(IT,id,4815)*'d'+LoadInteger(IT,id,7708)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
set t=bve[(i)*(6)+3]
set id=GetHandleId(t)
if t!=null then
set s=LoadInteger(IT,id,4815)*'d'+LoadInteger(IT,id,7708)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
set t=bve[(i)*(6)+4]
set id=GetHandleId(t)
if t!=null then
set s=LoadInteger(IT,id,4815)*'d'+LoadInteger(IT,id,7708)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
set t=bve[(i)*(6)+5]
set id=GetHandleId(t)
if t!=null then
set s=LoadInteger(IT,id,4815)*'d'+LoadInteger(IT,id,7708)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
set t=bve[(i)*(6)+6]
set id=GetHandleId(t)
if t!=null then
set s=LoadInteger(IT,id,4815)*'d'+LoadInteger(IT,id,7708)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
set s=ir[i]
call CDe(Ao,(s))
call Uee()
set s=R2I(Vr[i])
call CDe(Ao,(s))
call Uee()
set s=bHe[(i)*(20)+1]
call CDe(Ao,(s))
call Uee()
set s=bHe[(i)*(20)+2]
call CDe(Ao,(s))
call tLe(i)
call Uee()
set s=cNe[(i)*(20)+1]
call CDe(Ao,(s))
call Uee()
set s=cNe[(i)*(20)+2]
call CDe(Ao,(s))
call Uee()
set s=cNe[(i)*(20)+3]
call CDe(Ao,(s))
call Uee()
set s=cNe[(i)*(20)+4]
call CDe(Ao,(s))
call Uee()
set s=cNe[(i)*(20)+5]
call CDe(Ao,(s))
call Uee()
set s=cNe[(i)*(20)+6]
call CDe(Ao,(s))
call Uee()
set s=cNe[(i)*(20)+7]
call CDe(Ao,(s))
call Uee()
set s=cNe[(i)*(20)+8]
call CDe(Ao,(s))
call Uee()
set s=cNe[(i)*(20)+9]
call CDe(Ao,(s))
call Uee()
set s=cNe[(i)*(20)+$A]
call CDe(Ao,(s))
call Uee()
set s=cNe[(i)*(20)+$B]
call CDe(Ao,(s))
call Uee()
set s=cNe[(i)*(20)+$C]
call CDe(Ao,(s))
call Uee()
set s=d
call CDe(Ao,(s))
call Uee()
set s=25
call CDe(Ao,(s))
call Uee()
set s=3
call CDe(Ao,(s))
call Uee()
set s=Mk[i]
call CDe(Ao,(s))
call Uee()
set s=qr[i]/ 2
call CDe(Ao,(s))
call Uee()
set s=cHe[(1)*(6)+i]
call CDe(Ao,(s))
call Uee()
set s=cHe[(2)*(6)+i]
call CDe(Ao,(s))
call Uee()
set s=sk[i]
call CDe(Ao,(s))
call Uee()
if Bne[(i)*(5)+4]<0 then
set Bne[(i)*(5)+4]=($5440-cHe[(1)*(6)+i])*$A
endif
set s=Bne[(i)*(5)+4]
call CDe(Ao,(s))
call Uee()
if xB[i] then
set s=1
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
set s=$3E8+bFe[(i)*(8)+1]*$A+bge[(i)*(8)+1]
call CDe(Ao,(s))
call Uee()
set s=$3E8+bFe[(i)*(8)+2]*$A+bge[(i)*(8)+2]
call CDe(Ao,(s))
call Uee()
set s=$3E8+bFe[(i)*(8)+3]*$A+bge[(i)*(8)+3]
call CDe(Ao,(s))
call Uee()
set s=$3E8+bFe[(i)*(8)+4]*$A+bge[(i)*(8)+4]
call CDe(Ao,(s))
call Uee()
set s=$3E8+bFe[(i)*(8)+5]*$A+bge[(i)*(8)+5]
call CDe(Ao,(s))
call Uee()
set s=$3E8+bFe[(i)*(8)+6]*$A+bge[(i)*(8)+6]
call CDe(Ao,(s))
call Uee()
set s=$3E8+bFe[(i)*(8)+7]*$A+bge[(i)*(8)+7]
call CDe(Ao,(s))
call Uee()
set s=$3E8+bFe[(i)*(8)+8]*$A+bge[(i)*(8)+8]
call CDe(Ao,(s))
call Uee()
set s=Zo[i]
call CDe(Ao,(s))
call Uee()
set s=$2710+bee[(i)*(8)+1]*$3E8+bee[(i)*(8)+2]*'d'+bee[(i)*(8)+3]*$A+bee[(i)*(8)+4]
call CDe(Ao,(s))
call Uee()
set s=$2710+bee[(i)*(8)+5]*$3E8+bee[(i)*(8)+6]*'d'+bee[(i)*(8)+7]*$A+bee[(i)*(8)+8]
call CDe(Ao,(s))
set fk=Uxe(UAe(p))
set t=null
set ss=null
endfunction
function k7x takes unit u,integer i,player p,integer d returns nothing
local integer s=0
local integer id=0
local item t=null
set Ao=0
call Uee()
set s=d
call CDe(Ao,(s))
call Uee()
set s=bEe[i]
call CDe(Ao,(s))
call Uee()
set s=$2710+bXe[(i)*(8)+1]*$3E8+bXe[(i)*(8)+2]*'d'+bXe[(i)*(8)+3]*$A+bXe[(i)*(8)+4]
call CDe(Ao,(s))
call Uee()
set s=$2710+bXe[(i)*(8)+5]*$3E8+bXe[(i)*(8)+6]*'d'+bXe[(i)*(8)+7]*$A+bXe[(i)*(8)+8]
call CDe(Ao,(s))
set t=bue[(i)*(20)+$B]
set id=GetHandleId(t)
call Uee()
if t!=null then
set s=LoadInteger(IT,id,4386)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,7774)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,6119)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,6036)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
if t!=null then
set s=LoadInteger(IT,id,5621)
else
set s=0
endif
call CDe(Ao,(s))
call Uee()
set s=bRe[(i)*(20)+$B]
call CDe(Ao,(s))
call Uee()
set s=d
call CDe(Ao,(s))
call Uee()
set s=$2710+Bhe[(i)*(8)+1]*$3E8+Bhe[(i)*(8)+2]*'d'+Bhe[(i)*(8)+3]*$A+Bhe[(i)*(8)+4]
call CDe(Ao,(s))
call Uee()
set s=$2710+Bhe[(i)*(8)+5]*$3E8+Bhe[(i)*(8)+6]*'d'+Bhe[(i)*(8)+7]*$A+Bhe[(i)*(8)+8]
call CDe(Ao,(s))
call Uee()
set s=$186A0+bGe[(i)*(20)+5]*$2710+bGe[(i)*(20)+$C]*$3E8+bGe[(i)*(20)+$D]*'d'+bGe[(i)*(20)+$E]*$A+bGe[(i)*(20)+16]
call CDe(Ao,(s))
call Uee()
set s=bhe[(i)*($A)+1]/ 2
call CDe(Ao,(s))
call Uee()
set s=bhe[(i)*($A)+2]/ 2
call CDe(Ao,(s))
call Uee()
set s=bhe[(i)*($A)+3]/ 2
call CDe(Ao,(s))
call Uee()
set s=bhe[(i)*($A)+4]/ 2
call CDe(Ao,(s))
call Uee()
set s=bhe[(i)*($A)+5]/ 2
call CDe(Ao,(s))
call Uee()
set s=JJ[i]/ 3+XA[i]/ 2
call CDe(Ao,(s))
call Uee()
set s=IA[i]
call CDe(Ao,(s))
call Uee()
set s=nA[i]
call CDe(Ao,(s))
call Uee()
set s=cFe[(i)*(5)+1]
call CDe(Ao,(s))
call Uee()
set s=cFe[(i)*(5)+2]
call CDe(Ao,(s))
call Uee()
set s=cFe[(i)*(5)+3]
call CDe(Ao,(s))
call Uee()
set s=cFe[(i)*(5)+4]
call CDe(Ao,(s))
call Uee()
set s=cFe[(i)*(5)+5]
call CDe(Ao,(s))
call Uee()
set s=kJ[i]
call CDe(Ao,(s))
call Uee()
set s=1
call CDe(Ao,(s))
call Uee()
set s=KJ[i]
call CDe(Ao,(s))
call Uee()
set s=rJ[i]
call CDe(Ao,(s))
call Uee()
set s=lJ[i]
call CDe(Ao,(s))
call Uee()
set s=GJ[i]
call CDe(Ao,(s))
call Uee()
set s=Bpe[(2)*(6)+i]
call CDe(Ao,(s))
call Uee()
set s=Bpe[(4)*(6)+i]
call CDe(Ao,(s))
call Uee()
set s=0
call CDe(Ao,(s))
call Uee()
set s=0
call CDe(Ao,(s))
call Uee()
set s=0
call CDe(Ao,(s))
call Uee()
set s=0
call CDe(Ao,(s))
call Uee()
set s=0
call CDe(Ao,(s))
call Uee()
set s=0
call CDe(Ao,(s))
call Uee()
set s=0
call CDe(Ao,(s))
set Fk=Uxe(UAe(p))
set t=null
endfunction
function k8x takes player p,integer kp returns nothing
local integer i=GetPlayerId(p)+1
local string UHe="KVCT-SaveCode/"+GetPlayerName(p)+Qj[qb[i]]+I2S(Mk[i])+".txt"
if p==GetLocalPlayer()then
call PreloadGenStart()
call PreloadGenClear()
call Preload("=== Thong Tin Save ===")
call Preload("Nguoi choi: "+GetPlayerName(p))
call Preload("-load1 "+bk)
call Preload("-load2 "+Bk)
call Preload("-load3 "+Ck)
call Preload("-load4 "+dk)
call Preload("-load5 "+Dk)
call Preload("-load6 "+fk)
call Preload("-load7 "+Fk)
call Preload("Thoi Gian Choi: "+I2S(qr[i]/ 2)+" phut")
call Preload("Nhan Vat: "+Qj[qb[i]]+" - Cap do: "+I2S(GetHeroLevel(XJ[i])))
call Preload("Trung sinh: "+I2S(bJ[i])+" - Hoa canh: "+I2S(bEe[i]))
if xB[i]then
call Preload("Chuyen Doi He Phai: On")
else
call Preload("Chuyen Doi He Phai: Off")
endif
call Preload("KEY PASS: "+I2S(kp))
call PreloadGenEnd(UHe)
endif
set UHe=null
endfunction
function k9x takes nothing returns boolean
local integer CGe=Qce()
set IWe[CGe]=IWe[CGe]+1
if IWe[CGe]==1 then
call k2x(XJ[Iye[CGe]],Iye[CGe],IYe[CGe],Ize[CGe])
endif
if IWe[CGe]==3 then
call k3x(XJ[Iye[CGe]],Iye[CGe],IYe[CGe],Ize[CGe])
endif
if IWe[CGe]==4 then
call k4x(XJ[Iye[CGe]],Iye[CGe],IYe[CGe],Ize[CGe])
endif
if IWe[CGe]==5 then
call k5x(XJ[Iye[CGe]],Iye[CGe],IYe[CGe],Ize[CGe])
endif
if IWe[CGe]==6 then
call k6x(XJ[Iye[CGe]],Iye[CGe],IYe[CGe],Ize[CGe])
endif
if IWe[CGe]==7 then
call k7x(XJ[Iye[CGe]],Iye[CGe],IYe[CGe],Ize[CGe])
endif
if IWe[CGe]==8 then
call zge()
call zGe(Iye[CGe]-1,1,"-load1 "+bk)
call zGe(Iye[CGe]-1,2,"-load2 "+Bk)
call zGe(Iye[CGe]-1,3,"-load3 "+Ck)
call zGe(Iye[CGe]-1,4,"-load4 "+dk)
call zGe(Iye[CGe]-1,5,"-load5 "+Dk)
call zGe(Iye[CGe]-1,6,"-load6 "+fk)
call zGe(Iye[CGe]-1,7,"-load7 "+Fk)
call zHe(Iye[CGe]-1,Ize[CGe],Qj[qb[Iye[CGe]]])
call k8x(IYe[CGe],Ize[CGe])
endif
if IWe[CGe]==9 then
call QDe()
set gk=true
set bk=""
set Bk=""
set Ck=""
set dk=""
set Dk=""
set fk=""
set Fk=""
call Qke(IYe[CGe],"|cffffcc00"+"Trò chơi được lưu thành công tại [ Documents/Warcraft III Public Test/CustomMapData/KVCT/Save.txt ]",$F)
call Qke(IYe[CGe],"|cffff0000"+"Bạn còn lại "+I2S(6-pk[Iye[CGe]])+" lần Save trong trận !",5)
call PauseUnit(XJ[Iye[CGe]],false)
call PauseUnit(OJ[Iye[CGe]],false)
set IYe[CGe]=null
call C1e(CGe)
endif
return false
endfunction
function Kvx takes integer i,player p,integer b returns nothing
local integer CGe=C0e()
set Iye[CGe]=i
set IYe[CGe]=p
set Ize[CGe]=b
set IWe[CGe]=0
call k1x(XJ[Iye[CGe]],Iye[CGe],IYe[CGe],Ize[CGe])
call QIe(CGe,.1,true,function k9x)
endfunction
function Kex takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
local integer b=GetRandomInt(1,9)*$3E8+GetRandomInt(1,9)*'d'+GetRandomInt(1,9)*$A+GetRandomInt(1,9)
local string Uae=GetPlayerName(p)
local string Kxx=Qj[qb[i]]
if XJ[i]!=null and gk and pk[i]<mk and not Pk[i]then
if PJ[i]==Uae and pJ[i]==StringLength(Uae)and qJ[i]==SubString(Uae,2,4)and QJ[i]==SubString(Uae,pJ[i]-1,pJ[i])then
call PauseUnit(XJ[i],true)
call PauseUnit(OJ[i],true)
set pk[i]=pk[i]+1
set Mk[i]=Mk[i]+1
call SetPlayerState(p,PLAYER_STATE_RESOURCE_FOOD_USED,Mk[i])
call SetPlayerState(p,PLAYER_STATE_FOOD_CAP_CEILING,Mk[i])
set gk=false
call Kvx(i,p,b)
endif
endif
set p=null
set Uae=null
set Kxx=null
return false
endfunction
function Kox takes player p,string s returns nothing
local integer i=GetPlayerId(p)+1
if UBe(p,s)then
set Ao=0
call Uee()
set che[(1)*(6)+i]=(Cde(Ao))
call Uee()
set che[(2)*(6)+i]=(Cde(Ao))
call Uee()
set che[(3)*(6)+i]=(Cde(Ao))
call Uee()
set che[(4)*(6)+i]=(Cde(Ao))
call Uee()
set che[(5)*(6)+i]=(Cde(Ao))
call Uee()
set che[(6)*(6)+i]=(Cde(Ao))
call Uee()
set che[(7)*(6)+i]=(Cde(Ao))
call Uee()
set che[(8)*(6)+i]=(Cde(Ao))
call Uee()
set che[(9)*(6)+i]=(Cde(Ao))
call Uee()
set che[($A)*(6)+i]=(Cde(Ao))
call Uee()
set che[($B)*(6)+i]=(Cde(Ao))
call Uee()
set che[($C)*(6)+i]=(Cde(Ao))
call Uee()
set che[($D)*(6)+i]=(Cde(Ao))
call Uee()
set che[($E)*(6)+i]=(Cde(Ao))
call Uee()
set che[($F)*(6)+i]=(Cde(Ao))
call Uee()
set che[(16)*(6)+i]=(Cde(Ao))
call Uee()
set che[(17)*(6)+i]=(Cde(Ao))
call Uee()
set che[(18)*(6)+i]=(Cde(Ao))
call Uee()
set che[(19)*(6)+i]=(Cde(Ao))
call Uee()
set che[(20)*(6)+i]=(Cde(Ao))
call Uee()
set che[(21)*(6)+i]=(Cde(Ao))
call Uee()
set che[(22)*(6)+i]=(Cde(Ao))
call Uee()
set che[(23)*(6)+i]=(Cde(Ao))
call Uee()
set che[(24)*(6)+i]=(Cde(Ao))
call Uee()
set che[(25)*(6)+i]=(Cde(Ao))
call Uee()
set che[(26)*(6)+i]=(Cde(Ao))
call Uee()
set che[($AE)*(6)+i]=(Cde(Ao))
endif
endfunction
function Krx takes player p,string s returns nothing
local integer i=GetPlayerId(p)+1
if UBe(p,s)then
set Ao=0
call Uee()
set che[(27)*(6)+i]=(Cde(Ao))
call Uee()
set che[(28)*(6)+i]=(Cde(Ao))
call Uee()
set che[(29)*(6)+i]=(Cde(Ao))
call Uee()
set che[(30)*(6)+i]=(Cde(Ao))
call Uee()
set che[(31)*(6)+i]=(Cde(Ao))
call Uee()
set che[(32)*(6)+i]=(Cde(Ao))
call Uee()
set che[(33)*(6)+i]=(Cde(Ao))
call Uee()
set che[(34)*(6)+i]=(Cde(Ao))
call Uee()
set che[(35)*(6)+i]=(Cde(Ao))
call Uee()
set che[(36)*(6)+i]=(Cde(Ao))
call Uee()
set che[(37)*(6)+i]=(Cde(Ao))
call Uee()
set che[(38)*(6)+i]=(Cde(Ao))
call Uee()
set che[(39)*(6)+i]=(Cde(Ao))
call Uee()
set che[(40)*(6)+i]=(Cde(Ao))
call Uee()
set che[(41)*(6)+i]=(Cde(Ao))
call Uee()
set che[(42)*(6)+i]=(Cde(Ao))
call Uee()
set che[(43)*(6)+i]=(Cde(Ao))
call Uee()
set che[(44)*(6)+i]=(Cde(Ao))
call Uee()
set che[(45)*(6)+i]=(Cde(Ao))
call Uee()
set che[(46)*(6)+i]=(Cde(Ao))
call Uee()
set che[(47)*(6)+i]=(Cde(Ao))
call Uee()
set che[(48)*(6)+i]=(Cde(Ao))
call Uee()
set che[(49)*(6)+i]=(Cde(Ao))
call Uee()
set che[($AF)*(6)+i]=(Cde(Ao))
call Uee()
set che[($C2)*(6)+i]=(Cde(Ao))
call Uee()
set che[($C3)*(6)+i]=(Cde(Ao))
call Uee()
set che[($C4)*(6)+i]=(Cde(Ao))
call Uee()
set che[($C5)*(6)+i]=(Cde(Ao))
call Uee()
set che[($C6)*(6)+i]=(Cde(Ao))
call Uee()
set che[($C7)*(6)+i]=(Cde(Ao))
call Uee()
set che[($C8)*(6)+i]=(Cde(Ao))
call Uee()
set che[($C9)*(6)+i]=(Cde(Ao))
call Uee()
set che[($D6)*(6)+i]=(Cde(Ao))
call Uee()
set che[($D7)*(6)+i]=(Cde(Ao))
endif
endfunction
function Kix takes player p,string s returns nothing
local integer i=GetPlayerId(p)+1
if UBe(p,s)then
set Ao=0
call Uee()
set che[(50)*(6)+i]=(Cde(Ao))
call Uee()
set che[(51)*(6)+i]=(Cde(Ao))
call Uee()
set che[(52)*(6)+i]=(Cde(Ao))
call Uee()
set che[(53)*(6)+i]=(Cde(Ao))
call Uee()
set che[(54)*(6)+i]=(Cde(Ao))
call Uee()
set che[(55)*(6)+i]=(Cde(Ao))
call Uee()
set che[($CA)*(6)+i]=(Cde(Ao))
call Uee()
set che[('q')*(6)+i]=(Cde(Ao))
call Uee()
set che[('r')*(6)+i]=(Cde(Ao))
call Uee()
set che[('s')*(6)+i]=(Cde(Ao))
call Uee()
set che[('t')*(6)+i]=(Cde(Ao))
call Uee()
set che[('u')*(6)+i]=(Cde(Ao))
call Uee()
set che[('v')*(6)+i]=(Cde(Ao))
call Uee()
set che[('w')*(6)+i]=(Cde(Ao))
call Uee()
set che[('x')*(6)+i]=(Cde(Ao))
call Uee()
set che[('y')*(6)+i]=(Cde(Ao))
call Uee()
set che[('z')*(6)+i]=(Cde(Ao))
call Uee()
set che[('{')*(6)+i]=(Cde(Ao))
call Uee()
set che[('|')*(6)+i]=(Cde(Ao))
call Uee()
set che[('}')*(6)+i]=(Cde(Ao))
call Uee()
set che[($7E)*(6)+i]=(Cde(Ao))
call Uee()
set che[($7F)*(6)+i]=(Cde(Ao))
call Uee()
set che[($B0)*(6)+i]=(Cde(Ao))
call Uee()
set che[($C0)*(6)+i]=(Cde(Ao))
call Uee()
set che[($C1)*(6)+i]=(Cde(Ao))
call Uee()
set che[($CB)*(6)+i]=(Cde(Ao))
call Uee()
set che[($CC)*(6)+i]=(Cde(Ao))
call Uee()
set che[($CD)*(6)+i]=(Cde(Ao))
call Uee()
set che[($CE)*(6)+i]=(Cde(Ao))
endif
endfunction
function Kax takes player p,string s returns nothing
local integer i=GetPlayerId(p)+1
if UBe(p,s)then
set Ao=0
call Uee()
set che[(56)*(6)+i]=(Cde(Ao))
call Uee()
set che[(57)*(6)+i]=(Cde(Ao))
call Uee()
set che[(58)*(6)+i]=(Cde(Ao))
call Uee()
set che[(59)*(6)+i]=(Cde(Ao))
call Uee()
set che[(60)*(6)+i]=(Cde(Ao))
call Uee()
set che[($E1)*(6)+i]=(Cde(Ao))
call Uee()
set che[(61)*(6)+i]=(Cde(Ao))
call Uee()
set che[(62)*(6)+i]=(Cde(Ao))
call Uee()
set che[(63)*(6)+i]=(Cde(Ao))
call Uee()
set che[(64)*(6)+i]=(Cde(Ao))
call Uee()
set che[(65)*(6)+i]=(Cde(Ao))
call Uee()
set che[(66)*(6)+i]=(Cde(Ao))
call Uee()
set che[($E2)*(6)+i]=(Cde(Ao))
call Uee()
set che[(67)*(6)+i]=(Cde(Ao))
call Uee()
set che[(68)*(6)+i]=(Cde(Ao))
call Uee()
set che[(69)*(6)+i]=(Cde(Ao))
call Uee()
set che[(70)*(6)+i]=(Cde(Ao))
call Uee()
set che[(71)*(6)+i]=(Cde(Ao))
call Uee()
set che[(72)*(6)+i]=(Cde(Ao))
call Uee()
set che[($E3)*(6)+i]=(Cde(Ao))
call Uee()
set che[(73)*(6)+i]=(Cde(Ao))
call Uee()
set che[(74)*(6)+i]=(Cde(Ao))
call Uee()
set che[(75)*(6)+i]=(Cde(Ao))
call Uee()
set che[(76)*(6)+i]=(Cde(Ao))
call Uee()
set che[(77)*(6)+i]=(Cde(Ao))
call Uee()
set che[(78)*(6)+i]=(Cde(Ao))
call Uee()
set che[($E4)*(6)+i]=(Cde(Ao))
call Uee()
set che[(79)*(6)+i]=(Cde(Ao))
call Uee()
set che[(80)*(6)+i]=(Cde(Ao))
call Uee()
set che[(81)*(6)+i]=(Cde(Ao))
call Uee()
set che[(82)*(6)+i]=(Cde(Ao))
call Uee()
set che[(83)*(6)+i]=(Cde(Ao))
call Uee()
set che[(84)*(6)+i]=(Cde(Ao))
call Uee()
set che[($E5)*(6)+i]=(Cde(Ao))
call Uee()
set che[(85)*(6)+i]=(Cde(Ao))
call Uee()
set che[(86)*(6)+i]=(Cde(Ao))
call Uee()
set che[(87)*(6)+i]=(Cde(Ao))
call Uee()
set che[(88)*(6)+i]=(Cde(Ao))
call Uee()
set che[(89)*(6)+i]=(Cde(Ao))
call Uee()
set che[($E6)*(6)+i]=(Cde(Ao))
call Uee()
set che[(90)*(6)+i]=(Cde(Ao))
call Uee()
set che[(91)*(6)+i]=(Cde(Ao))
call Uee()
set che[(92)*(6)+i]=(Cde(Ao))
call Uee()
set che[(93)*(6)+i]=(Cde(Ao))
call Uee()
set che[(94)*(6)+i]=(Cde(Ao))
call Uee()
set che[($E7)*(6)+i]=(Cde(Ao))
call Uee()
set che[(95)*(6)+i]=(Cde(Ao))
call Uee()
set che[(96)*(6)+i]=(Cde(Ao))
call Uee()
set che[(97)*(6)+i]=(Cde(Ao))
call Uee()
set che[(98)*(6)+i]=(Cde(Ao))
call Uee()
set che[(99)*(6)+i]=(Cde(Ao))
call Uee()
set che[($E8)*(6)+i]=(Cde(Ao))
call Uee()
set che[('d')*(6)+i]=(Cde(Ao))
endif
endfunction
function Knx takes player p,string s returns nothing
local integer i=GetPlayerId(p)+1
if UBe(p,s)then
set Ao=0
call Uee()
set che[($80)*(6)+i]=(Cde(Ao))
call Uee()
set che[($81)*(6)+i]=(Cde(Ao))
call Uee()
set che[($82)*(6)+i]=(Cde(Ao))
call Uee()
set che[($83)*(6)+i]=(Cde(Ao))
call Uee()
set che[($84)*(6)+i]=(Cde(Ao))
call Uee()
set che[($85)*(6)+i]=(Cde(Ao))
call Uee()
set che[($86)*(6)+i]=(Cde(Ao))
call Uee()
set che[($87)*(6)+i]=(Cde(Ao))
call Uee()
set che[($88)*(6)+i]=(Cde(Ao))
call Uee()
set che[($89)*(6)+i]=(Cde(Ao))
call Uee()
set che[($8A)*(6)+i]=(Cde(Ao))
call Uee()
set che[($8B)*(6)+i]=(Cde(Ao))
call Uee()
set che[($8C)*(6)+i]=(Cde(Ao))
call Uee()
set che[($8D)*(6)+i]=(Cde(Ao))
call Uee()
set che[($8E)*(6)+i]=(Cde(Ao))
call Uee()
set che[($8F)*(6)+i]=(Cde(Ao))
call Uee()
set che[($90)*(6)+i]=(Cde(Ao))
call Uee()
set che[($91)*(6)+i]=(Cde(Ao))
call Uee()
set che[($92)*(6)+i]=(Cde(Ao))
call Uee()
set che[($93)*(6)+i]=(Cde(Ao))
call Uee()
set che[($94)*(6)+i]=(Cde(Ao))
call Uee()
set che[($95)*(6)+i]=(Cde(Ao))
call Uee()
set che[($96)*(6)+i]=(Cde(Ao))
call Uee()
set che[($97)*(6)+i]=(Cde(Ao))
call Uee()
set che[($98)*(6)+i]=(Cde(Ao))
call Uee()
set che[('j')*(6)+i]=(Cde(Ao))
call Uee()
set che[('k')*(6)+i]=(Cde(Ao))
call Uee()
set che[('l')*(6)+i]=(Cde(Ao))
call Uee()
set che[('m')*(6)+i]=(Cde(Ao))
call Uee()
set che[('n')*(6)+i]=(Cde(Ao))
call Uee()
set che[($EA)*(6)+i]=(Cde(Ao))
call Uee()
set che[('o')*(6)+i]=(Cde(Ao))
call Uee()
set che[('p')*(6)+i]=(Cde(Ao))
call Uee()
set che[($B2)*(6)+i]=(Cde(Ao))
call Uee()
set che[($BE)*(6)+i]=(Cde(Ao))
call Uee()
set che[($BF)*(6)+i]=(Cde(Ao))
endif
endfunction
function KVx takes player p,string s returns nothing
local integer i=GetPlayerId(p)+1
if UBe(p,s)then
set Ao=0
call Uee()
set che[($99)*(6)+i]=(Cde(Ao))
call Uee()
set che[($9A)*(6)+i]=(Cde(Ao))
call Uee()
set che[($9B)*(6)+i]=(Cde(Ao))
call Uee()
set che[($9C)*(6)+i]=(Cde(Ao))
call Uee()
set che[($9D)*(6)+i]=(Cde(Ao))
call Uee()
set che[($D8)*(6)+i]=(Cde(Ao))
call Uee()
set che[($9E)*(6)+i]=(Cde(Ao))
call Uee()
set che[($9F)*(6)+i]=(Cde(Ao))
call Uee()
set che[($A0)*(6)+i]=(Cde(Ao))
call Uee()
set che[($A1)*(6)+i]=(Cde(Ao))
call Uee()
set che[($A2)*(6)+i]=(Cde(Ao))
call Uee()
set che[($A3)*(6)+i]=(Cde(Ao))
call Uee()
set che[($A4)*(6)+i]=(Cde(Ao))
call Uee()
set che[($A5)*(6)+i]=(Cde(Ao))
call Uee()
set che[($A6)*(6)+i]=(Cde(Ao))
call Uee()
set che[($A7)*(6)+i]=(Cde(Ao))
call Uee()
set che[($A8)*(6)+i]=(Cde(Ao))
call Uee()
set che[($A9)*(6)+i]=(Cde(Ao))
call Uee()
set che[($AA)*(6)+i]=(Cde(Ao))
call Uee()
set che[($AB)*(6)+i]=(Cde(Ao))
call Uee()
set che[($AC)*(6)+i]=(Cde(Ao))
call Uee()
set che[($AD)*(6)+i]=(Cde(Ao))
call Uee()
set che[($B3)*(6)+i]=(Cde(Ao))
call Uee()
set che[($B4)*(6)+i]=(Cde(Ao))
call Uee()
set che[($B5)*(6)+i]=(Cde(Ao))
call Uee()
set che[($B6)*(6)+i]=(Cde(Ao))
call Uee()
set che[($B7)*(6)+i]=(Cde(Ao))
call Uee()
set che[($B8)*(6)+i]=(Cde(Ao))
call Uee()
set che[($B9)*(6)+i]=(Cde(Ao))
call Uee()
set che[($BA)*(6)+i]=(Cde(Ao))
call Uee()
set che[($BB)*(6)+i]=(Cde(Ao))
call Uee()
set che[($BD)*(6)+i]=(Cde(Ao))
call Uee()
set che[($CF)*(6)+i]=(Cde(Ao))
call Uee()
set che[($D0)*(6)+i]=(Cde(Ao))
call Uee()
set che[($D1)*(6)+i]=(Cde(Ao))
call Uee()
set che[($D2)*(6)+i]=(Cde(Ao))
call Uee()
set che[($D3)*(6)+i]=(Cde(Ao))
call Uee()
set che[($D9)*(6)+i]=(Cde(Ao))
call Uee()
set che[($DA)*(6)+i]=(Cde(Ao))
call Uee()
set che[($DB)*(6)+i]=(Cde(Ao))
call Uee()
set che[($DC)*(6)+i]=(Cde(Ao))
call Uee()
set che[($D4)*(6)+i]=(Cde(Ao))
call Uee()
set che[($D5)*(6)+i]=(Cde(Ao))
endif
endfunction
function KEx takes player p,string s returns nothing
local integer i=GetPlayerId(p)+1
if UBe(p,s)then
set Ao=0
call Uee()
set che[($DD)*(6)+i]=(Cde(Ao))
call Uee()
set che[($DE)*(6)+i]=(Cde(Ao))
call Uee()
set che[($DF)*(6)+i]=(Cde(Ao))
call Uee()
set che[($E0)*(6)+i]=(Cde(Ao))
call Uee()
set che[('e')*(6)+i]=(Cde(Ao))
call Uee()
set che[('f')*(6)+i]=(Cde(Ao))
call Uee()
set che[('g')*(6)+i]=(Cde(Ao))
call Uee()
set che[('h')*(6)+i]=(Cde(Ao))
call Uee()
set che[($E9)*(6)+i]=(Cde(Ao))
call Uee()
set che[('i')*(6)+i]=(Cde(Ao))
call Uee()
set che[($B1)*(6)+i]=(Cde(Ao))
call Uee()
set che[($EB)*(6)+i]=(Cde(Ao))
call Uee()
set che[($EC)*(6)+i]=(Cde(Ao))
call Uee()
set che[($ED)*(6)+i]=(Cde(Ao))
call Uee()
set che[($EE)*(6)+i]=(Cde(Ao))
call Uee()
set che[($EF)*(6)+i]=(Cde(Ao))
call Uee()
set che[($F0)*(6)+i]=(Cde(Ao))
call Uee()
set che[($F1)*(6)+i]=(Cde(Ao))
call Uee()
set che[($F2)*(6)+i]=(Cde(Ao))
call Uee()
set che[($F3)*(6)+i]=(Cde(Ao))
call Uee()
set che[($F4)*(6)+i]=(Cde(Ao))
call Uee()
set che[($F5)*(6)+i]=(Cde(Ao))
call Uee()
set che[($F6)*(6)+i]=(Cde(Ao))
call Uee()
set che[($F7)*(6)+i]=(Cde(Ao))
call Uee()
set che[($F8)*(6)+i]=(Cde(Ao))
call Uee()
set che[($F9)*(6)+i]=(Cde(Ao))
call Uee()
set che[($FA)*(6)+i]=(Cde(Ao))
call Uee()
set che[($FB)*(6)+i]=(Cde(Ao))
call Uee()
set che[($FC)*(6)+i]=(Cde(Ao))
call Uee()
set che[($FD)*(6)+i]=(Cde(Ao))
call Uee()
set che[($FE)*(6)+i]=(Cde(Ao))
call Uee()
set che[($FF)*(6)+i]=(Cde(Ao))
call Uee()
set che[(256)*(6)+i]=(Cde(Ao))
call Uee()
set che[(257)*(6)+i]=(Cde(Ao))
call Uee()
set che[(258)*(6)+i]=(Cde(Ao))
endif
endfunction
function KXx takes player p,boolean b returns boolean
local integer i=GetPlayerId(p)+1
local real x=GetRectCenterX(IJ[i])
local real y=GetRectCenterY(IJ[i])
local unit n=null
local string Uae=GetPlayerName(p)
if che[($B4)*(6)+i]<=25 and che[($B4)*(6)+i]>19 and che[($B5)*(6)+i]==3 then
if Lk[i]!=null then
call RemoveUnit(Lk[i])
endif
set VJ[i]=true
set n=CreateUnit(p,hk,x,y,270)
if b then
call BlzSetUnitName(n,"Nhập Mật Khẩu: "+I2S(che[($AE)*(6)+i]))
endif
call Qke(p,"|cffff0000"+"Nhập chính xác mã KEY PASS được cung cấp trong File Save để kích hoạt trò chơi",99)
set Hk[i]=3
if GetLocalPlayer()==p then
call ClearSelection()
call SelectUnit(n,true)
call SetCameraTargetController(n,x,y,true)
endif
endif
set n=null
set Uae=null
return false
endfunction
function KOx takes nothing returns nothing
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
local string f=GetEventPlayerChatString()
local integer k=S2I(SubString(f,5,6))
local string s=SubString(f,7,StringLength(f))
local boolean b1=false
local boolean b2=false
if ZH then
if XJ[i]==null then
if k==1 then
call Kox(p,s)
endif
if k==2 then
call Krx(p,s)
endif
if k==3 then
call Kix(p,s)
endif
if k==4 then
call Kax(p,s)
endif
if k==5 then
call Knx(p,s)
endif
if k==6 then
call KVx(p,s)
endif
if k==7 then
call KEx(p,s)
if che[($AE)*(6)+i]==che[($AF)*(6)+i]and che[($AE)*(6)+i]==che[($B0)*(6)+i]and che[($AE)*(6)+i]==che[($B1)*(6)+i]and che[($AE)*(6)+i]==che[($B2)*(6)+i]and che[($AE)*(6)+i]==che[($B3)*(6)+i]and che[($AE)*(6)+i]==che[($DD)*(6)+i]and che[($AE)*(6)+i]!=0 then
if che[($C5)*(6)+i]==(vj-1)then
call KXx(p,false)
endif
endif
endif
endif
endif
set s=null
set f=null
set p=null
endfunction
function KRx takes nothing returns boolean
local integer CGe=Qce()
if I3e[CGe]<$D then
set I4e[CGe]=I4e[CGe]+1
if I4e[CGe]==2 then
set I4e[CGe]=0
call QKe("[ "+rj[I2e[CGe]]+" ]: Dữ liệu đang giải mã ... ",1)
endif
endif
if I3e[CGe]==$D then
call Kox(I1e[CGe],SubString(Kr[I2e[CGe]],7,StringLength(Kr[I2e[CGe]])))
endif
if I3e[CGe]==$E then
call Krx(I1e[CGe],SubString(lr[I2e[CGe]],7,StringLength(lr[I2e[CGe]])))
endif
if I3e[CGe]==$F then
call Kix(I1e[CGe],SubString(Lr[I2e[CGe]],7,StringLength(Lr[I2e[CGe]])))
endif
if I3e[CGe]==16 then
call Kax(I1e[CGe],SubString(mr[I2e[CGe]],7,StringLength(mr[I2e[CGe]])))
endif
if I3e[CGe]==17 then
call Knx(I1e[CGe],SubString(Mr[I2e[CGe]],7,StringLength(Mr[I2e[CGe]])))
endif
if I3e[CGe]==18 then
call KVx(I1e[CGe],SubString(pr[I2e[CGe]],7,StringLength(pr[I2e[CGe]])))
endif
set I3e[CGe]=I3e[CGe]+1
if I3e[CGe]==19 then
call QDe()
call KEx(I1e[CGe],SubString(Pr[I2e[CGe]],7,StringLength(Pr[I2e[CGe]])))
if che[($C5)*(6)+I2e[CGe]]==(vj-1)and che[($AE)*(6)+I2e[CGe]]==che[($AF)*(6)+I2e[CGe]]and che[($AE)*(6)+I2e[CGe]]==che[($B0)*(6)+I2e[CGe]]and che[($AE)*(6)+I2e[CGe]]==che[($B1)*(6)+I2e[CGe]]and che[($AE)*(6)+I2e[CGe]]==che[($B2)*(6)+I2e[CGe]]and che[($AE)*(6)+I2e[CGe]]==che[($B3)*(6)+I2e[CGe]]and che[($AE)*(6)+I2e[CGe]]==che[($DD)*(6)+I2e[CGe]]and che[($AE)*(6)+I2e[CGe]]!=0 then
call KXx(I1e[CGe],true)
else
set kk[I2e[CGe]]=false
call SetPlayerAbilityAvailable(I1e[CGe],'A0O2',false)
call SetPlayerAbilityAvailable(I1e[CGe],'A0O3',false)
call SetPlayerAbilityAvailable(I1e[CGe],'A0NU',true)
call SetPlayerAbilityAvailable(I1e[CGe],'A0NV',true)
call SetPlayerAbilityAvailable(I1e[CGe],'A0NW',true)
call SetPlayerAbilityAvailable(I1e[CGe],'A0NX',true)
call SetPlayerAbilityAvailable(I1e[CGe],'A0NY',true)
call SetPlayerAbilityAvailable(I1e[CGe],'A0NZ',true)
call SetPlayerAbilityAvailable(I1e[CGe],'A0O0',true)
call SetPlayerAbilityAvailable(I1e[CGe],'A0O1',true)
call SetPlayerAbilityAvailable(I1e[CGe],'A0US',true)
call SetPlayerAbilityAvailable(I1e[CGe],'A0UW',true)
call SetPlayerAbilityAvailable(I1e[CGe],'A0XC',true)
call SetPlayerAbilityAvailable(I1e[CGe],'A0XK',true)
endif
set I1e[CGe]=null
set Gk=true
call C_e(CGe)
endif
return false
endfunction
function KIx takes player p,integer i returns nothing
local integer CGe=CZe()
set I3e[CGe]=1
set I4e[CGe]=0
set I1e[CGe]=p
set I2e[CGe]=i
set Gk=false
call QIe(CGe,.5,true,function KRx)
endfunction
function KAx takes integer Wve returns boolean
local integer i=1
local integer c=0
loop
exitwhen i>6
if XJ[i]!=null and qb[i]==Wve then
set c=c+1
endif
set i=i+1
endloop
if c>=3 then
return false
endif
return true
endfunction
function KNx takes integer i returns integer
if i==1 then
return 2
elseif i==2 then
return 1
elseif i==3 then
return 4
elseif i==4 then
return 3
elseif i==5 then
return 6
elseif i==6 then
return 5
elseif i==7 then
return 8
elseif i==8 then
return 7
elseif i==9 then
return $A
elseif i==$A then
return 9
elseif i==$B then
return $C
elseif i==$C then
return $B
elseif i==$D then
return $E
elseif i==$E then
return $D
elseif i==$F then
return 16
elseif i==16 then
return $F
elseif i==17 then
return 18
elseif i==18 then
return 17
elseif i==19 then
return 20
elseif i==20 then
return 19
elseif i==21 then
return 22
elseif i==22 then
return 21
elseif i==23 then
return 24
elseif i==24 then
return 23
elseif i==25 then
return 26
elseif i==26 then
return 25
endif
return 0
endfunction
function Kbx takes integer i returns integer
if i==1 or i==2 or i==4 or i==16 or i==17 or i==22 or i==26 then
return 1
else
return 2
endif
endfunction
function KBx takes player p,integer i,integer id,real x,real y returns unit
local integer Kcx=id
if che[($BD)*(6)+i]==1 then
set Kcx=KNx(id)
endif
set kJ[i]=che[($FB)*(6)+i]
set KJ[i]=che[($FD)*(6)+i]
if kJ[i]>0 and KJ[i]==0 then
set XJ[i]=CreateUnit(p,cRe[(kJ[i])*(20)+Kbx(Kcx)],x,y,270)
call UnitAddAbility(XJ[i],oJ[Kcx])
call UnitAddAbility(XJ[i],'A0YV')
call SetPlayerAbilityAvailable(p,'A0YV',false)
if kJ[i]>=$D and kJ[i]<=19 then
call ShowUnit(XJ[i],false)
endif
else
set XJ[i]=CreateUnit(p,aj[Kcx],x,y,270)
endif
call gcx(p,XJ[i],false)
return XJ[i]
endfunction
function KCx takes player p,integer i returns boolean
local real x=GetRectCenterX(IJ[i])
local real y=GetRectCenterY(IJ[i])
local unit u=KBx(p,i,che[(1)*(6)+i],x,y)
local integer id=GetHandleId(u)
local real a=I2R(vk[che[(2)*(6)+i]]-vk[che[(2)*(6)+i]-1])
local integer b=0
if not KAx(qb[i])then
set u=null
call RemoveUnit(XJ[i])
set XJ[i]=null
return false
endif
call tRe(u,vk[che[(2)*(6)+i]-1]+R2I(I2R(che[(3)*(6)+i])/ 'd'*a))
set bJ[i]=che[(34)*(6)+i]
set bEe[i]=che[($DE)*(6)+i]
call SetUnitAbilityLevel(u,'A0YT',bJ[i]+bEe[i]+1)
call MultiboardSetItemValueBJ(mC,3,(i+1),ij[bJ[i]+bEe[i]]+I2S(GetHeroLevel(XJ[i]))+" ("+I2S(bJ[i]+bEe[i])+")")
if bJ[i]>9 or bEe[i]>3 then
call QH()
endif
if bJ[i]>0 then
set cGe[(i)*($A)+3]=bJ[i]
call Tje(XJ[i],xx,.03*bJ[i])
set BJ[i]=$C8+20*bJ[i]
set boe[i]=boe[i]+300*bJ[i]
set bre[i]=bre[i]+$C8*bJ[i]
if bEe[i]>0 then
set boe[i]=boe[i]+300*bEe[i]
set bre[i]=bre[i]+$C8*bEe[i]
endif
set rk[i]=$C8
else
set rk[i]=GetHeroLevel(XJ[i])
endif
set Mk[i]=che[($B6)*(6)+i]
set qr[i]=che[($B7)*(6)+i]*2
set cge[i]=qr[i]+qH
call PauseUnit(u,true)
call PauseUnit(OJ[i],true)
set u=null
return false
endfunction
function Kdx takes unit u,integer i returns nothing
call tDe(i,che[(4)*(6)+i],1)
set cGe[(i)*($A)+4]=che[(4)*(6)+i]
call tge(i,che[(5)*(6)+i],1)
call tHe(i,che[(6)*(6)+i],1)
call tFe(i,che[(7)*(6)+i],1)
call tfe(i,che[(8)*(6)+i],1)
call tGe(i,che[(9)*(6)+i],1)
set GA[i]=che[($C4)*(6)+i]
call the(i,che[($A)*(6)+i],1)
set cCe[(i)*(20)+3]=0
call tje(i,che[($B)*(6)+i],1,1)
call tje(i,che[($C)*(6)+i],2,1)
call tje(i,che[($D)*(6)+i],3,1)
call tje(i,che[($E)*(6)+i],4,1)
call tje(i,che[($F)*(6)+i],5,1)
call tje(i,che[(16)*(6)+i],6,1)
call tke(i,1,che[(17)*(6)+i],1)
call tke(i,2,che[(18)*(6)+i],1)
call tke(i,3,che[(19)*(6)+i],1)
call tke(i,4,che[(20)*(6)+i],1)
call tke(i,5,che[(21)*(6)+i],1)
call tke(i,6,che[(22)*(6)+i],1)
call tke(i,7,che[(23)*(6)+i],1)
call tke(i,8,che[(24)*(6)+i],1)
call tke(i,9,che[(25)*(6)+i],1)
call tke(i,$A,che[(26)*(6)+i],1)
set NA[i]=che[(27)*(6)+i]
set RA[i]=che[(29)*(6)+i]
set vr[i]=che[(30)*(6)+i]
set xr[i]=che[(31)*(6)+i]
set Vi[i]=SubString(I2S(che[($CB)*(6)+i]),1,5)+SubString(I2S(che[($CC)*(6)+i]),1,5)
set Ei[i]=che[($CD)*(6)+i]
set Oi[i]=che[($CE)*(6)+i]
set JA[i]=che[(32)*(6)+i]*2
set boe[i]=boe[i]+$F*JA[i]
set bre[i]=bre[i]+$A*JA[i]
set kA[i]=che[(33)*(6)+i]*2
set NJ[i]=che[('w')*(6)+i]
if NJ[i]>0 and NJ[i]<=$E then
call vFx(i)
set cGe[(i)*($A)+1]=NJ[i]
endif
set gJ[i]=che[('x')*(6)+i]
if gJ[i]>0 and gJ[i]<=8 then
call vhx(i)
endif
if che[($DC)*(6)+i]>0 then
call y3e(u,i)
endif
call wce(i)
set Bpe[(1)*(6)+i]=che[($C3)*(6)+i]
call yse(i)
set JJ[i]=che[($F3)*(6)+i]*3
set IA[i]=che[($F4)*(6)+i]
call MultiboardSetItemValueBJ(mC,6,(i+1),I2S(JJ[i]/ 3))
set jJ[i]=che[(48)*(6)+i]
set cNe[(i)*(20)+1]=che[($A2)*(6)+i]
set cNe[(i)*(20)+2]=che[($A3)*(6)+i]
set cNe[(i)*(20)+3]=che[($A4)*(6)+i]
set cNe[(i)*(20)+4]=che[($A5)*(6)+i]
set cNe[(i)*(20)+5]=che[($A6)*(6)+i]
set cNe[(i)*(20)+6]=che[($A7)*(6)+i]
set cNe[(i)*(20)+7]=che[($A8)*(6)+i]
set cNe[(i)*(20)+8]=che[($A9)*(6)+i]
set cNe[(i)*(20)+9]=che[($AA)*(6)+i]
set cNe[(i)*(20)+$A]=che[($AB)*(6)+i]
set cNe[(i)*(20)+$B]=che[($AC)*(6)+i]
set cNe[(i)*(20)+$C]=che[($AD)*(6)+i]
set Yk[i]=(che[($A2)*(6)+i]+che[($A3)*(6)+i]+che[($A4)*(6)+i]+che[($A5)*(6)+i]+che[($A6)*(6)+i]+che[($A7)*(6)+i]+che[($A8)*(6)+i]+che[($A9)*(6)+i]+che[($AA)*(6)+i]+che[($AB)*(6)+i]+che[($AC)*(6)+i]+che[($AD)*(6)+i])*2
endfunction
function KDx takes unit u,integer i returns nothing
local player p=GetOwningPlayer(u)
if che[($BE)*(6)+i]==0 then
set BUe[(i)*(20)+1]=che[(35)*(6)+i]
set BUe[(i)*(20)+2]=che[(36)*(6)+i]
set BUe[(i)*(20)+3]=che[(37)*(6)+i]
set BUe[(i)*(20)+4]=che[(38)*(6)+i]
set BUe[(i)*(20)+5]=che[(39)*(6)+i]
set BUe[(i)*(20)+6]=che[(40)*(6)+i]
set BUe[(i)*(20)+7]=che[(41)*(6)+i]
set BUe[(i)*(20)+8]=che[(42)*(6)+i]
if BUe[(i)*(20)+1]>0 then
call Cdx(p,i,1,false,BUe[(i)*(20)+1])
endif
if BUe[(i)*(20)+2]>0 then
call Cdx(p,i,2,false,BUe[(i)*(20)+2])
endif
if BUe[(i)*(20)+3]>0 then
call Cdx(p,i,3,false,BUe[(i)*(20)+3])
endif
if BUe[(i)*(20)+4]>0 then
call Cdx(p,i,4,false,BUe[(i)*(20)+4])
endif
if BUe[(i)*(20)+5]>0 then
call Cdx(p,i,5,false,BUe[(i)*(20)+5])
endif
if BUe[(i)*(20)+6]>0 then
call Cdx(p,i,6,false,BUe[(i)*(20)+6])
endif
if BUe[(i)*(20)+7]>0 then
call Cdx(p,i,7,false,BUe[(i)*(20)+7])
endif
if BUe[(i)*(20)+8]>0 then
call Cdx(p,i,8,false,BUe[(i)*(20)+8])
endif
set BJ[i]=BJ[i]-tNe(i)*4
call tce(i)
endif
set BUe[(i)*(20)+9]=che[(43)*(6)+i]
set BUe[(i)*(20)+$A]=che[(44)*(6)+i]
set BUe[(i)*(20)+$B]=che[($C9)*(6)+i]
if BUe[(i)*(20)+9]>0 then
call Cdx(p,i,9,false,BUe[(i)*(20)+9])
endif
if BUe[(i)*(20)+$A]>0 then
call Cdx(p,i,$A,false,BUe[(i)*(20)+$A])
endif
if BUe[(i)*(20)+$B]>0 then
call Cdx(p,i,$B,false,BUe[(i)*(20)+$B])
endif
set So[i]=che[(49)*(6)+i]
set Bme[(i)*(20)+1]=che[(45)*(6)+i]*2
set Bme[(i)*(20)+2]=che[(46)*(6)+i]*2
set Bme[(i)*(20)+3]=che[(47)*(6)+i]*2
if So[i]>0 then
call W_e(i,So[i])
call W0e(i)
call W1e(i)
if So[i]>=31 then
call Tje(XJ[i],Rx,$5DC*(So[i]-30))
endif
endif
set p=null
endfunction
function Kfx takes unit u,integer i returns nothing
if che[($C2)*(6)+i]==0 then
set FJ[i]=che[(50)*(6)+i]
set cbe[(i)*(20)+1]=S2I(SubString(I2S(che[(51)*(6)+i]),1,2))
set cbe[(i)*(20)+2]=S2I(SubString(I2S(che[(51)*(6)+i]),2,3))
set cbe[(i)*(20)+3]=S2I(SubString(I2S(che[(51)*(6)+i]),3,4))
set cbe[(i)*(20)+4]=S2I(SubString(I2S(che[(51)*(6)+i]),4,5))
set cbe[(i)*(20)+5]=S2I(SubString(I2S(che[(52)*(6)+i]),1,2))
set cbe[(i)*(20)+6]=S2I(SubString(I2S(che[(52)*(6)+i]),2,3))
set cbe[(i)*(20)+7]=S2I(SubString(I2S(che[(52)*(6)+i]),3,4))
set cbe[(i)*(20)+8]=S2I(SubString(I2S(che[(52)*(6)+i]),4,5))
call tde(i,0,0)
call WSe(u,i)
else
set FJ[i]=(bJ[i]+1)*7
endif
set cfe[(i)*(20)+1]=S2I(SubString(I2S(che[(53)*(6)+i]),1,2))
set cfe[(i)*(20)+2]=S2I(SubString(I2S(che[(53)*(6)+i]),2,3))
set cfe[(i)*(20)+3]=S2I(SubString(I2S(che[(53)*(6)+i]),3,4))
set cfe[(i)*(20)+4]=S2I(SubString(I2S(che[(53)*(6)+i]),4,5))
set cfe[(i)*(20)+5]=S2I(SubString(I2S(che[(53)*(6)+i]),5,6))
set cfe[(i)*(20)+6]=S2I(SubString(I2S(che[(54)*(6)+i]),1,2))
set cfe[(i)*(20)+7]=S2I(SubString(I2S(che[(54)*(6)+i]),2,3))
set cfe[(i)*(20)+8]=S2I(SubString(I2S(che[(54)*(6)+i]),3,4))
set cfe[(i)*(20)+9]=S2I(SubString(I2S(che[(54)*(6)+i]),4,5))
set cfe[(i)*(20)+$A]=S2I(SubString(I2S(che[(54)*(6)+i]),5,6))
set cfe[(i)*(20)+$B]=S2I(SubString(I2S(che[(55)*(6)+i]),1,2))
set cfe[(i)*(20)+$C]=S2I(SubString(I2S(che[(55)*(6)+i]),2,3))
set cfe[(i)*(20)+$D]=S2I(SubString(I2S(che[(55)*(6)+i]),3,4))
set cfe[(i)*(20)+$E]=S2I(SubString(I2S(che[(55)*(6)+i]),4,5))
set cfe[(i)*(20)+$F]=S2I(SubString(I2S(che[(55)*(6)+i]),5,6))
set cfe[(i)*(20)+16]=S2I(SubString(I2S(che[($CA)*(6)+i]),1,2))
set cfe[(i)*(20)+17]=S2I(SubString(I2S(che[($CA)*(6)+i]),2,3))
set cfe[(i)*(20)+18]=S2I(SubString(I2S(che[($CA)*(6)+i]),3,4))
set cfe[(i)*(20)+19]=S2I(SubString(I2S(che[($CA)*(6)+i]),4,5))
call t5e(i)
if che[('q')*(6)+i]!=0 then
set bWe[(i)*(6)+1]=Z3e(i,S2I(SubString(I2S(che[('q')*(6)+i]),0,1)),S2I(SubString(I2S(che[('q')*(6)+i]),1,3)),GetRectCenterX(bd),GetRectCenterY(bd))
call SetItemVisible(bWe[(i)*(6)+1],false)
set Ci[i]=Ci[i]+1
endif
if che[('r')*(6)+i]!=0 then
set bWe[(i)*(6)+2]=Z3e(i,S2I(SubString(I2S(che[('r')*(6)+i]),0,1)),S2I(SubString(I2S(che[('r')*(6)+i]),1,3)),GetRectCenterX(bd),GetRectCenterY(bd))
call SetItemVisible(bWe[(i)*(6)+2],false)
set Ci[i]=Ci[i]+1
endif
if che[('s')*(6)+i]!=0 then
set bWe[(i)*(6)+3]=Z3e(i,S2I(SubString(I2S(che[('s')*(6)+i]),0,1)),S2I(SubString(I2S(che[('s')*(6)+i]),1,3)),GetRectCenterX(bd),GetRectCenterY(bd))
call SetItemVisible(bWe[(i)*(6)+3],false)
set Ci[i]=Ci[i]+1
endif
if che[('t')*(6)+i]!=0 then
set bWe[(i)*(6)+4]=Z3e(i,S2I(SubString(I2S(che[('t')*(6)+i]),0,1)),S2I(SubString(I2S(che[('t')*(6)+i]),1,3)),GetRectCenterX(bd),GetRectCenterY(bd))
call SetItemVisible(bWe[(i)*(6)+4],false)
set Ci[i]=Ci[i]+1
endif
if che[('u')*(6)+i]!=0 then
set bWe[(i)*(6)+5]=Z3e(i,S2I(SubString(I2S(che[('u')*(6)+i]),0,1)),S2I(SubString(I2S(che[('u')*(6)+i]),1,3)),GetRectCenterX(bd),GetRectCenterY(bd))
call SetItemVisible(bWe[(i)*(6)+5],false)
set Ci[i]=Ci[i]+1
endif
if che[('v')*(6)+i]!=0 then
set bWe[(i)*(6)+6]=Z3e(i,S2I(SubString(I2S(che[('v')*(6)+i]),0,1)),S2I(SubString(I2S(che[('v')*(6)+i]),1,3)),GetRectCenterX(bd),GetRectCenterY(bd))
call SetItemVisible(bWe[(i)*(6)+6],false)
set Ci[i]=Ci[i]+1
endif
endfunction
function KFx takes nothing returns boolean
local integer CGe=Qce()
if I8e[CGe]==$A then
call Z1e(I9e[CGe],2,che[(56)*(6)+I9e[CGe]],che[(57)*(6)+I9e[CGe]],che[(58)*(6)+I9e[CGe]],che[(59)*(6)+I9e[CGe]],che[(60)*(6)+I9e[CGe]],che[($E1)*(6)+I9e[CGe]],che[(61)*(6)+I9e[CGe]],0)
endif
if I8e[CGe]==9 then
call Z1e(I9e[CGe],6,che[(62)*(6)+I9e[CGe]],che[(63)*(6)+I9e[CGe]],che[(64)*(6)+I9e[CGe]],che[(65)*(6)+I9e[CGe]],che[(66)*(6)+I9e[CGe]],che[($E2)*(6)+I9e[CGe]],che[(67)*(6)+I9e[CGe]],0)
endif
if I8e[CGe]==8 then
call Z1e(I9e[CGe],5,che[(68)*(6)+I9e[CGe]],che[(69)*(6)+I9e[CGe]],che[(70)*(6)+I9e[CGe]],che[(71)*(6)+I9e[CGe]],che[(72)*(6)+I9e[CGe]],che[($E3)*(6)+I9e[CGe]],che[(73)*(6)+I9e[CGe]],0)
endif
if I8e[CGe]==7 then
call Z1e(I9e[CGe],7,che[(74)*(6)+I9e[CGe]],che[(75)*(6)+I9e[CGe]],che[(76)*(6)+I9e[CGe]],che[(77)*(6)+I9e[CGe]],che[(78)*(6)+I9e[CGe]],che[($E4)*(6)+I9e[CGe]],che[(79)*(6)+I9e[CGe]],0)
endif
if I8e[CGe]==6 then
call Z1e(I9e[CGe],$A,che[(80)*(6)+I9e[CGe]],che[(81)*(6)+I9e[CGe]],che[(82)*(6)+I9e[CGe]],che[(83)*(6)+I9e[CGe]],che[(84)*(6)+I9e[CGe]],che[($E5)*(6)+I9e[CGe]],che[(85)*(6)+I9e[CGe]],0)
endif
if I8e[CGe]==5 then
call Z1e(I9e[CGe],1,che[(86)*(6)+I9e[CGe]],0,che[(87)*(6)+I9e[CGe]],che[(88)*(6)+I9e[CGe]],che[(89)*(6)+I9e[CGe]],che[($E6)*(6)+I9e[CGe]],che[(90)*(6)+I9e[CGe]],0)
endif
if I8e[CGe]==4 then
call Z1e(I9e[CGe],3,che[(91)*(6)+I9e[CGe]],0,che[(92)*(6)+I9e[CGe]],che[(93)*(6)+I9e[CGe]],che[(94)*(6)+I9e[CGe]],che[($E7)*(6)+I9e[CGe]],che[(95)*(6)+I9e[CGe]],0)
endif
if I8e[CGe]==3 then
call Z1e(I9e[CGe],9,che[(96)*(6)+I9e[CGe]],0,che[(97)*(6)+I9e[CGe]],che[(98)*(6)+I9e[CGe]],che[(99)*(6)+I9e[CGe]],che[($E8)*(6)+I9e[CGe]],che[('d')*(6)+I9e[CGe]],0)
endif
if I8e[CGe]==2 then
call Z1e(I9e[CGe],$B,che[('e')*(6)+I9e[CGe]],0,che[('f')*(6)+I9e[CGe]],che[('g')*(6)+I9e[CGe]],che[('h')*(6)+I9e[CGe]],che[($E9)*(6)+I9e[CGe]],che[('i')*(6)+I9e[CGe]],0)
endif
set I8e[CGe]=I8e[CGe]-1
if I8e[CGe]<=0 then
call QDe()
call Z1e(I9e[CGe],8,che[('j')*(6)+I9e[CGe]],che[('k')*(6)+I9e[CGe]],che[('l')*(6)+I9e[CGe]],che[('m')*(6)+I9e[CGe]],che[('n')*(6)+I9e[CGe]],che[($EA)*(6)+I9e[CGe]],che[('o')*(6)+I9e[CGe]],che[('p')*(6)+I9e[CGe]])
call Cze(CGe)
endif
return false
endfunction
function Kgx takes unit u,integer i returns nothing
local integer CGe=CYe()
set I8e[CGe]=$A
set I9e[CGe]=i
call QIe(CGe,.1,true,function KFx)
endfunction
function KGx takes unit u,integer i returns nothing
set lJ[i]=che[($FF)*(6)+i]
set GJ[i]=che[(256)*(6)+i]
if che[(256)*(6)+i]>=$B8 then
set GJ[i]=0
set Pk[i]=true
else
call Cjx(i)
endif
set BMe[(i)*(20)+1]=che[('y')*(6)+i]
set BMe[(i)*(20)+2]=che[('z')*(6)+i]
set BMe[(i)*(20)+3]=che[('{')*(6)+i]
if BMe[(i)*(20)+1]+BMe[(i)*(20)+2]+BMe[(i)*(20)+3]>=3 and BMe[(i)*(20)+1]+BMe[(i)*(20)+2]+BMe[(i)*(20)+3]<=600 then
call Chx(i)
endif
set bIe[(i)*(20)+1]=S2I(SubString(I2S(che[('|')*(6)+i]),1,3))
set bAe[(i)*(20)+1]=S2I(SubString(I2S(che[('|')*(6)+i]),3,4))
if bIe[(i)*(20)+1]>0 then
call WZe(u,i,1)
endif
set bIe[(i)*(20)+2]=S2I(SubString(I2S(che[('}')*(6)+i]),1,3))
set bAe[(i)*(20)+2]=S2I(SubString(I2S(che[('}')*(6)+i]),3,4))
if bIe[(i)*(20)+2]>0 then
call WZe(u,i,2)
endif
set bIe[(i)*(20)+3]=S2I(SubString(I2S(che[($7E)*(6)+i]),1,3))
set bAe[(i)*(20)+3]=S2I(SubString(I2S(che[($7E)*(6)+i]),3,4))
if bIe[(i)*(20)+3]>0 then
call WZe(u,i,3)
endif
set bIe[(i)*(20)+4]=S2I(SubString(I2S(che[($7F)*(6)+i]),1,3))
set bAe[(i)*(20)+4]=S2I(SubString(I2S(che[($7F)*(6)+i]),3,4))
if bIe[(i)*(20)+4]>0 then
call WZe(u,i,4)
endif
set yr[i]=che[($80)*(6)+i]
set Yr[i]=che[($81)*(6)+i]
if yr[i]+Yr[i]>=1 and yr[i]+Yr[i]<=$A0 then
call Zve(i)
endif
endfunction
function Khx takes unit u,integer i returns nothing
set bKe[(i)*(20)+1]=che[($88)*(6)+i]
set bKe[(i)*(20)+2]=che[($89)*(6)+i]
set bKe[(i)*(20)+3]=che[($8A)*(6)+i]
set bKe[(i)*(20)+4]=che[($8B)*(6)+i]
set bKe[(i)*(20)+5]=che[($8C)*(6)+i]
set bKe[(i)*(20)+6]=che[($8D)*(6)+i]
call c1x(i,che[($82)*(6)+i],che[($83)*(6)+i],che[($84)*(6)+i],che[($85)*(6)+i],che[($86)*(6)+i],che[($87)*(6)+i])
call YJe(i)
set cee[(i)*(20)+1]=S2I(SubString(I2S(che[($8E)*(6)+i]),1,2))
set cxe[(i)*(20)+1]=S2I(SubString(I2S(che[($8E)*(6)+i]),2,3))
set cee[(i)*(20)+2]=S2I(SubString(I2S(che[($8F)*(6)+i]),1,2))
set cxe[(i)*(20)+2]=S2I(SubString(I2S(che[($8F)*(6)+i]),2,3))
set cee[(i)*(20)+3]=S2I(SubString(I2S(che[($90)*(6)+i]),1,2))
set cxe[(i)*(20)+3]=S2I(SubString(I2S(che[($90)*(6)+i]),2,3))
set cee[(i)*(20)+4]=S2I(SubString(I2S(che[($91)*(6)+i]),1,2))
set cxe[(i)*(20)+4]=S2I(SubString(I2S(che[($91)*(6)+i]),2,3))
if cxe[(i)*(20)+1]+cxe[(i)*(20)+2]+cxe[(i)*(20)+3]+cxe[(i)*(20)+4]>=4 and cxe[(i)*(20)+1]+cxe[(i)*(20)+2]+cxe[(i)*(20)+3]+cxe[(i)*(20)+4]<=34 then
call Jox(i,1)
call Jox(i,2)
call Jox(i,3)
call Jox(i,4)
endif
set jo[i]=che[($92)*(6)+i]
set bOe[(i)*(20)+1]=che[($93)*(6)+i]
set bOe[(i)*(20)+2]=che[($94)*(6)+i]
set bOe[(i)*(20)+3]=che[($95)*(6)+i]
set bOe[(i)*(20)+4]=che[($96)*(6)+i]
set bOe[(i)*(20)+5]=che[($97)*(6)+i]
set bOe[(i)*(20)+6]=che[($98)*(6)+i]
if jo[i]>0 then
call w6e(i)
endif
call wue(u,i)
endfunction
function KHx takes unit u,integer i returns nothing
set Bhe[(i)*(8)+1]=S2I(SubString(I2S(che[($EB)*(6)+i]),1,2))
set Bhe[(i)*(8)+2]=S2I(SubString(I2S(che[($EB)*(6)+i]),2,3))
set Bhe[(i)*(8)+3]=S2I(SubString(I2S(che[($EB)*(6)+i]),3,4))
set Bhe[(i)*(8)+4]=S2I(SubString(I2S(che[($EB)*(6)+i]),4,5))
set Bhe[(i)*(8)+5]=S2I(SubString(I2S(che[($EC)*(6)+i]),1,2))
set Bhe[(i)*(8)+6]=S2I(SubString(I2S(che[($EC)*(6)+i]),2,3))
set Bhe[(i)*(8)+7]=S2I(SubString(I2S(che[($EC)*(6)+i]),3,4))
set Bhe[(i)*(8)+8]=S2I(SubString(I2S(che[($EC)*(6)+i]),4,5))
call Cxx(u,i)
set bGe[(i)*(20)+5]=S2I(SubString(I2S(che[($ED)*(6)+i]),1,2))
set bGe[(i)*(20)+$C]=S2I(SubString(I2S(che[($ED)*(6)+i]),2,3))
set bGe[(i)*(20)+$D]=S2I(SubString(I2S(che[($ED)*(6)+i]),3,4))
set bGe[(i)*(20)+$E]=S2I(SubString(I2S(che[($ED)*(6)+i]),4,5))
set bGe[(i)*(20)+16]=S2I(SubString(I2S(che[($ED)*(6)+i]),5,6))
set bhe[(i)*($A)+1]=che[($EE)*(6)+i]*2
set bhe[(i)*($A)+2]=che[($EF)*(6)+i]*2
set bhe[(i)*($A)+3]=che[($F0)*(6)+i]*2
set bhe[(i)*($A)+4]=che[($F1)*(6)+i]*2
set bhe[(i)*($A)+5]=che[($F2)*(6)+i]*2
set nA[i]=che[($F5)*(6)+i]
set cFe[(i)*(5)+1]=che[($F6)*(6)+i]
set cFe[(i)*(5)+2]=che[($F7)*(6)+i]
set cFe[(i)*(5)+3]=che[($F8)*(6)+i]
set cFe[(i)*(5)+4]=che[($F9)*(6)+i]
set cFe[(i)*(5)+5]=che[($FA)*(6)+i]
set rJ[i]=che[($FE)*(6)+i]
if nA[i]>0 then
call Cmx(u,i)
endif
endfunction
function Kjx takes player p,integer i returns nothing
local integer b=0
local string KJx=GetPlayerName(p)
local boolean RJx=false
if che[($99)*(6)+i]>0 then
call wne(i,1,che[($99)*(6)+i])
endif
if che[($9A)*(6)+i]>0 then
call wne(i,2,che[($9A)*(6)+i])
endif
if che[($9B)*(6)+i]>0 then
call wne(i,3,che[($9B)*(6)+i])
endif
if che[($9C)*(6)+i]>0 then
call wne(i,4,che[($9C)*(6)+i])
endif
if che[($9D)*(6)+i]>0 then
call wne(i,5,che[($9D)*(6)+i])
endif
if che[($D8)*(6)+i]>0 then
call wne(i,6,che[($D8)*(6)+i])
endif
set ir[i]=che[($9E)*(6)+i]
set Vr[i]=che[($9F)*(6)+i]
if ir[i]>0 then
call YXe(i)
endif
set bHe[(i)*(20)+1]=che[($A0)*(6)+i]
set bHe[(i)*(20)+2]=che[($A1)*(6)+i]
call Yde(i)
set BGe[(i)*(3)+1]=che[($C0)*(6)+i]
set BGe[(i)*(3)+2]=che[($C1)*(6)+i]
set BGe[(i)*(3)+3]=che[(28)*(6)+i]
set BFe[(i)*(4)+4]=che[($BF)*(6)+i]
set Bne[(i)*(5)+4]=che[($BB)*(6)+i]
set uI[i]=che[($C8)*(6)+i]
if che[($BB)*(6)+i]<0 then
call QH()
endif
set sk[i]=che[($BA)*(6)+i]
if che[($B8)*(6)+i]>0 then
set cHe[(1)*(6)+i]=che[($B8)*(6)+i]
set b=b+1
set RJx=true
endif
if che[($B9)*(6)+i]>0 then
set cHe[(2)*(6)+i]=che[($B9)*(6)+i]
set b=b+1
set RJx=true
endif
if che[($C3)*(6)+i]>0 then
set RJx=true
if b!=2 then
call QH()
endif
endif
if b==2 then
if PJ[i]==KJx and pJ[i]==StringLength(KJx)and qJ[i]==SubString(KJx,2,4)and QJ[i]==SubString(KJx,pJ[i]-1,pJ[i])then
call ecx(i)
set Bne[(i)*(5)+1]=(($5440-che[($B8)*(6)+i])*$A+$4D2)*3
endif
endif
if RJx then
set Pk[i]=RJx
endif
set bSe[(i-1)*(9)+1]="|cff7fff00"+"Càn"
set bSe[(i-1)*(9)+2]="|cff7fff00"+"Khôn"
set bSe[(i-1)*(9)+3]="|cff7fff00"+"Cấn"
set bSe[(i-1)*(9)+4]="|cff7fff00"+"Chấn"
set bSe[(i-1)*(9)+5]="|cff7fff00"+"Khảm"
set bSe[(i-1)*(9)+6]="|cff7fff00"+"Tốn"
set bSe[(i-1)*(9)+7]="|cff7fff00"+"Ly"
set bSe[(i-1)*(9)+8]="|cff7fff00"+"Đoài"
set bSe[(i-1)*(9)+9]="|cff7fff00"+"Hóa Cảnh"
call wQe(i)
call CWx(XJ[i],i)
call The(i)
call t5e(i)
endfunction
function Kkx takes player p,integer i returns nothing
if GetLocalPlayer()==p then
call ResetToGameCamera(0)
call SelectUnit(XJ[i],true)
call PanCameraToTimed(GetUnitX(XJ[i]),GetUnitY(XJ[i]),0)
endif
call PauseUnit(XJ[i],false)
call PauseUnit(OJ[i],false)
endfunction
function KKx takes integer n returns nothing
local integer i=1
local string Uae=GetPlayerName(Player(n-1))
loop
exitwhen i>6
if n!=i then
if Uae==GetPlayerName(Player(i-1))then
call QH()
endif
if sJ[n]==sJ[i]then
call QH()
endif
endif
set i=i+1
endloop
set Uae=null
endfunction
function Klx takes nothing returns boolean
local integer CGe=Qce()
set Aoe[CGe]=Aoe[CGe]+1
call Qke(Aie[CGe],"Loading . . . "+I2S(Aoe[CGe]),1)
if Aoe[CGe]==2 then
call Kdx(XJ[Are[CGe]],Are[CGe])
endif
if Aoe[CGe]==3 then
call KDx(XJ[Are[CGe]],Are[CGe])
endif
if Aoe[CGe]==4 then
call Kfx(XJ[Are[CGe]],Are[CGe])
endif
if Aoe[CGe]==5 then
call Kgx(XJ[Are[CGe]],Are[CGe])
endif
if Aoe[CGe]==8 then
call KGx(XJ[Are[CGe]],Are[CGe])
endif
if Aoe[CGe]==9 then
call Khx(XJ[Are[CGe]],Are[CGe])
endif
if Aoe[CGe]==$A then
call KHx(XJ[Are[CGe]],Are[CGe])
endif
if Aoe[CGe]==$B then
call Kjx(Aie[CGe],Are[CGe])
endif
if Aoe[CGe]>=$C then
call QDe()
call Qke(Aie[CGe],"|cffff0000"+"Load hoàn thiện !",1)
call SetUnitState(XJ[Are[CGe]],UNIT_STATE_LIFE,GetUnitState(XJ[Are[CGe]],UNIT_STATE_MAX_LIFE))
call SetUnitState(XJ[Are[CGe]],UNIT_STATE_MANA,GetUnitState(XJ[Are[CGe]],UNIT_STATE_MAX_MANA))
call y4e(Are[CGe])
set Ub[Are[CGe]]=true
call Kkx(Aie[CGe],Are[CGe])
call KKx(Are[CGe])
call SetPlayerState(Aie[CGe],PLAYER_STATE_RESOURCE_FOOD_USED,Mk[Are[CGe]])
call SetPlayerState(Aie[CGe],PLAYER_STATE_FOOD_CAP_CEILING,Mk[Are[CGe]])
call gjx(Are[CGe])
set VC[Are[CGe]-1]=true
set oi[Are[CGe]-1]=true
if Pk[Are[CGe]]then
call PauseUnit(XJ[Are[CGe]],true)
endif
set Aie[CGe]=null
call Cye(CGe)
endif
return false
endfunction
function KLx takes player p returns nothing
local integer CGe=CWe()
set Aie[CGe]=p
set Are[CGe]=GetPlayerId(p)+1
set Aoe[CGe]=0
call KCx(Aie[CGe],Are[CGe])
call QIe(CGe,.5,true,function Klx)
endfunction
function Kmx takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local integer id=GetSpellAbilityId()
if Hk[i]>0 then
if id=='A0NT' then
set jk[i]=0
set Hk[i]=Hk[i]-1
if che[($AE)*(6)+i]==S2I(Jk[i])then
call Qke(p,"|cffffcc00"+"Kích hoạt Load Game thành công, xin chờ trong giây lát ! . . . ",3)
if p==GetLocalPlayer()then
call ClearSelection()
call ResetToGameCamera(0)
call PanCameraToTimed(GetRectCenterX(IJ[i]),GetRectCenterY(IJ[i]),0)
endif
call RemoveUnit(u)
call KLx(p)
else
call Qke(p,"|cffffcc00"+"Sai KEY PASS, số lần nhập còn lại "+I2S(Hk[i]),3)
set Jk[i]=""
endif
else
if jk[i]<4 then
set Jk[i]=Jk[i]+BlzGetAbilityTooltip(id,0)
set jk[i]=jk[i]+1
if p==GetLocalPlayer()then
call ClearTextMessages()
call Qke(p,"|cffffcc00"+"KEY PASS: |r"+Jk[i],99)
endif
endif
endif
else
call Qke(p,"|cffffcc00"+"Đá quá 3 lần sai KEY PASS, không thể tiếp tục nhập !",3)
endif
set u=null
set p=null
return false
endfunction
function KMx takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())==hk and Kmx()
endfunction
function Kpx takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local integer id=GetSpellAbilityId()
local string s=""
local string n=GetObjectName(id)
if id=='A0XK' then
if not kk[i]then
set kk[i]=true
call SetPlayerAbilityAvailable(p,'A0NU',false)
call SetPlayerAbilityAvailable(p,'A0NV',false)
call SetPlayerAbilityAvailable(p,'A0NW',false)
call SetPlayerAbilityAvailable(p,'A0NX',false)
call SetPlayerAbilityAvailable(p,'A0NY',false)
call SetPlayerAbilityAvailable(p,'A0NZ',false)
call SetPlayerAbilityAvailable(p,'A0O0',false)
call SetPlayerAbilityAvailable(p,'A0O1',false)
call SetPlayerAbilityAvailable(p,'A0US',false)
call SetPlayerAbilityAvailable(p,'A0UW',false)
call SetPlayerAbilityAvailable(p,'A0XC',false)
call SetPlayerAbilityAvailable(p,'A0O2',true)
call SetPlayerAbilityAvailable(p,'A0O3',true)
else
set kk[i]=false
call SetPlayerAbilityAvailable(p,'A0O2',false)
call SetPlayerAbilityAvailable(p,'A0O3',false)
call SetPlayerAbilityAvailable(p,'A0NU',true)
call SetPlayerAbilityAvailable(p,'A0NV',true)
call SetPlayerAbilityAvailable(p,'A0NW',true)
call SetPlayerAbilityAvailable(p,'A0NX',true)
call SetPlayerAbilityAvailable(p,'A0NY',true)
call SetPlayerAbilityAvailable(p,'A0NZ',true)
call SetPlayerAbilityAvailable(p,'A0O0',true)
call SetPlayerAbilityAvailable(p,'A0O1',true)
call SetPlayerAbilityAvailable(p,'A0US',true)
call SetPlayerAbilityAvailable(p,'A0UW',true)
call SetPlayerAbilityAvailable(p,'A0XC',true)
endif
else
if SubString(n,0,6)=="Select" then
set s=Qj[S2I(SubString(n,6,8))]
endif
if XJ[i]==null then
if Gk then
if s!="" then
call zFe(i-1,s)
call KIx(p,i)
call SetPlayerAbilityAvailable(p,'A0XK',false)
call SetPlayerAbilityAvailable(p,'A0NU',false)
call SetPlayerAbilityAvailable(p,'A0NV',false)
call SetPlayerAbilityAvailable(p,'A0NW',false)
call SetPlayerAbilityAvailable(p,'A0NX',false)
call SetPlayerAbilityAvailable(p,'A0NY',false)
call SetPlayerAbilityAvailable(p,'A0NZ',false)
call SetPlayerAbilityAvailable(p,'A0O0',false)
call SetPlayerAbilityAvailable(p,'A0O1',false)
call SetPlayerAbilityAvailable(p,'A0O2',false)
call SetPlayerAbilityAvailable(p,'A0O3',false)
call SetPlayerAbilityAvailable(p,'A0US',false)
call SetPlayerAbilityAvailable(p,'A0UW',false)
call SetPlayerAbilityAvailable(p,'A0XC',false)
endif
else
call Qke(p,"|cffffcc00"+"Một người chơi khác đang Load, vui lòng chờ trong giây lát !",5)
endif
endif
endif
set u=null
set p=null
set s=null
set n=null
return false
endfunction
function KPx takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())=='e009' and Kpx()
endfunction
function Kqx takes nothing returns nothing
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
if not lk[i]and XJ[i]==null and ZH then
set lk[i]=true
set Lk[i]=CreateUnit(p,'e009',GetRectCenterX(IJ[i]),GetRectCenterY(IJ[i]),270)
if GetLocalPlayer()==p then
call ClearSelection()
call SelectUnit(Lk[i],true)
call SetCameraTargetController(Lk[i],GetRectCenterX(IJ[i]),GetRectCenterY(IJ[i]),true)
endif
endif
set p=null
endfunction
function KQx takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Player(0),GetObjectName('Adis'),true)
call TriggerRegisterPlayerChatEvent(t,Player(1),GetObjectName('Adis'),true)
call TriggerRegisterPlayerChatEvent(t,Player(2),GetObjectName('Adis'),true)
call TriggerRegisterPlayerChatEvent(t,Player(3),GetObjectName('Adis'),true)
call TriggerRegisterPlayerChatEvent(t,Player(4),GetObjectName('Adis'),true)
call TriggerRegisterPlayerChatEvent(t,Player(5),GetObjectName('Adis'),true)
call TriggerAddAction(t,function Kex)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Player(0),GetObjectName('Aroc'),false)
call TriggerRegisterPlayerChatEvent(t,Player(1),GetObjectName('Aroc'),false)
call TriggerRegisterPlayerChatEvent(t,Player(2),GetObjectName('Aroc'),false)
call TriggerRegisterPlayerChatEvent(t,Player(3),GetObjectName('Aroc'),false)
call TriggerRegisterPlayerChatEvent(t,Player(4),GetObjectName('Aroc'),false)
call TriggerRegisterPlayerChatEvent(t,Player(5),GetObjectName('Aroc'),false)
call TriggerAddAction(t,function KOx)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Player(0),GetObjectName('Amls'),true)
call TriggerRegisterPlayerChatEvent(t,Player(1),GetObjectName('Amls'),true)
call TriggerRegisterPlayerChatEvent(t,Player(2),GetObjectName('Amls'),true)
call TriggerRegisterPlayerChatEvent(t,Player(3),GetObjectName('Amls'),true)
call TriggerRegisterPlayerChatEvent(t,Player(4),GetObjectName('Amls'),true)
call TriggerRegisterPlayerChatEvent(t,Player(5),GetObjectName('Amls'),true)
call TriggerAddAction(t,function Kqx)
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function KMx))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function KPx))
set t=null
endfunction
function LoadExtra___ResetVC takes nothing returns nothing
set Qk=0
endfunction
function Ksx takes integer i1,integer i2 returns nothing
if i1==i2 then
set Qk=Qk+1
endif
endfunction
function LoadExtra___UpVCPlus takes nothing returns nothing
set Qk=Qk+1
endfunction
function KSx takes integer i returns integer
local string s=Tve(GetPlayerName(Player(i-1)))
local string s2=""
local integer c=1
local integer a=0
loop
exitwhen c>YH
set s2=SubString(yH[c],$F,StringLength(yH[c]))
if s==s2 then
set a=c
set qk[i]=s
endif
set c=c+1
endloop
set s=null
set s2=null
return a
endfunction
function Ktx takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
local string s=SubString(GetEventPlayerChatString(),5,StringLength(GetEventPlayerChatString()))
local integer l=StringLength(s)
local string KTx=GetPlayerName(p)
local integer Kux=StringLength(KTx)
local integer KUx=0
local integer Kwx=0
local integer KWx=0
local integer Kyx=0
local integer j=1
local string KYx=""
set Qk=0
set s=sOe(s)
set s=sne(s,"-",4,0)
if UUe(s)then
set co=0
call UPe()
set KUx=(Cfe(co))
call Ksx(KUx,Kux)
call UPe()
set Kwx=(Cfe(co))
set N9e[(1)*(6)+i]=KSx(i)
if N9e[(1)*(6)+i]>0 then
set Kyx=S2I(SubString(yH[N9e[(1)*(6)+i]],8,$D))
if Kwx==Kyx then
if cHe[(1)*(6)+i]==0 then
set Qk=Qk+1
else
if Kwx<cHe[(1)*(6)+i]then
set Qk=Qk+1
endif
endif
endif
endif
call UPe()
set KWx=(Cfe(co))
set Kyx=S2I(SubString(yH[N9e[(1)*(6)+i]],4,7))
call Ksx(KWx,Kyx)
loop
exitwhen j>Kux
call UPe()
set KYx=KYx+I2S((Cfe(co)))
set j=j+1
endloop
if KYx==qk[i]then
if KYx==SubString(yH[N9e[(1)*(6)+i]],$F,StringLength(yH[N9e[(1)*(6)+i]]))then
set Qk=Qk+1
endif
endif
if Qk==4 then
set cHe[(2)*(6)+i]=S2I(SubString(KYx,0,4))
set cHe[(1)*(6)+i]=Kwx
call Qke(p,"|cffff0000"+GetObjectName('rde2'),5)
set sk[i]=S2I(SubString(I2S(KWx),0,1))-1
set Pk[i]=false
endif
endif
set s=null
set p=null
set KTx=null
set KYx=null
return false
endfunction
function Kzx takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Player(0),GetObjectName('Amdf'),false)
call TriggerAddCondition(t,Condition(function Ktx))
set t=null
endfunction
function KZx takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
if eox(XJ[i],3)and Ute(i)then
call Uue(Kk[i])
set cje[(i)*(3)+1]=yv
call Qke(p,"|cffffcc00"+yj[1],3)
endif
set p=null
return false
endfunction
function K_x takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
if eox(XJ[i],3)and Ute(i)then
set cje[(i)*(3)+1]=Yv
call Qke(p,"|cffffcc00"+yj[2],3)
endif
set p=null
return false
endfunction
function K0x takes integer i,integer id returns boolean
return( not(rk[i]<LoadInteger(IT,id,89)or bJ[i]<LoadInteger(IT,id,462)))
endfunction
function K1x takes unit u,player p,integer i returns nothing
local item t=UnitItemInSlot(u,0)
local integer w5e=GetItemTypeId(t)
if t!=null then
if w5e=='I0A2' or w5e=='I0A4' or w5e=='I0A5' or w5e=='I0A6' or w5e=='I0A7' then
if not(GetUnitAbilityLevel((u),('A0IL'))>0)and K0x(i,w5e)then
call Qke(p,"|cffffcc00"+yj[3],3)
call Zfe(u,p,i,t,true,false)
set mv=GetItemCharges(t)
if mv>1 then
call SetItemCharges(t,mv-1)
else
call RemoveItem(t)
endif
endif
endif
endif
set t=null
endfunction
function K2x takes unit u,player p,integer i returns nothing
local item t=UnitItemInSlot(u,1)
local integer w5e=GetItemTypeId(t)
if t!=null then
if w5e=='I0A3' or w5e=='I0A8' or w5e=='I0A9' or w5e=='I0AA' or w5e=='I0AB' then
if not(GetUnitAbilityLevel((u),('A0IM'))>0)and K0x(i,w5e)then
call Qke(p,"|cffffcc00"+yj[3],3)
call Zfe(u,p,i,t,false,false)
set mv=GetItemCharges(t)
if mv>1 then
call SetItemCharges(t,mv-1)
else
call RemoveItem(t)
endif
endif
endif
endif
set t=null
endfunction
function K3x takes nothing returns boolean
local integer CGe=Qce()
local integer c=R2I(I2R(cHe[(2)*(6)+AEe[CGe]])/ S2R(SubString(yi[AEe[CGe]],0,4)))
if not spe(AXe[CGe])then
if GetUnitLifePercent(AXe[CGe])<=I2R(Sk[AEe[CGe]])then
call K1x(AXe[CGe],AOe[CGe],AEe[CGe])
endif
if GetUnitManaPercent(AXe[CGe])<=I2R(tk[AEe[CGe]])then
call K2x(AXe[CGe],AOe[CGe],AEe[CGe])
endif
endif
if not cje[(AEe[CGe])*(3)+2]then
call QDe()
set AXe[CGe]=null
set AOe[CGe]=null
call Cwe(CGe)
endif
return false
endfunction
function K4x takes unit u,player p,integer i returns nothing
local integer CGe=CUe()
set AXe[CGe]=u
set AEe[CGe]=i
set AOe[CGe]=p
call QIe(CGe,cle[(i)*($A)+2]*8*.01,true,function K3x)
endfunction
function K5x takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
if eox(XJ[i],4)and Ute(i)then
call Uue(Kk[i])
set cje[(i)*(3)+2]=true
call K4x(XJ[i],p,i)
call Qke(p,"|cffffcc00"+GetObjectName('Apak'),3)
call Qke(p,"|cffff0000"+GetObjectName('Asal'),$A)
call Qke(p,"|cff7fff00"+GetObjectName('Aprg')+I2S(Sk[i])+"%",$A)
call Qke(p,"|cff7fff00"+GetObjectName('Arbr')+I2S(tk[i])+"%",$A)
call Qke(p,"|cff7fff00"+"-------------------------------------------",$A)
endif
set p=null
return false
endfunction
function K6x takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
if eox(XJ[i],4)and Ute(i)then
set cje[(i)*(3)+2]=false
call Qke(p,"|cffffcc00"+GetObjectName('Auco'),3)
endif
set p=null
return false
endfunction
function K7x takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
local string n=GetEventPlayerChatString()
local integer s=S2I(SubString(n,8,$A))
if eox(XJ[i],5)and Ute(i)then
if s<=50 then
set Sk[i]=s
call Qke(p,"|cffff0000"+GetObjectName('Asal'),$A)
call Qke(p,"|cff7fff00"+GetObjectName('Aprg')+I2S(Sk[i])+"%",$A)
call Qke(p,"|cff7fff00"+GetObjectName('Arbr')+I2S(tk[i])+"%",$A)
call Qke(p,"|cff7fff00"+"-------------------------------------------",$A)
else
call Qke(p,"|cffffcc00"+yj[4],5)
endif
endif
set n=null
set p=null
return false
endfunction
function K8x takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
local string n=GetEventPlayerChatString()
local integer s=S2I(SubString(n,8,$A))
if eox(XJ[i],5)and Ute(i)then
if s<=50 then
set tk[i]=s
call Qke(p,"|cffff0000"+GetObjectName('Asal'),$A)
call Qke(p,"|cff7fff00"+GetObjectName('Aprg')+I2S(Sk[i])+"%",$A)
call Qke(p,"|cff7fff00"+GetObjectName('Arbr')+I2S(tk[i])+"%",$A)
call Qke(p,"|cff7fff00"+"-------------------------------------------",$A)
else
call Qke(p,"|cffffcc00"+yj[4],5)
endif
endif
set n=null
set p=null
return false
endfunction
function K9x takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
local boolean b=false
if eox(XJ[i],7)then
set b=true
endif
if b and Ute(i)then
call Qke(p,"|cff7fff00"+GetObjectName('Adts')+"on",$A)
set Tk[i]=true
endif
set p=null
return false
endfunction
function lvx takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
local boolean b=false
if eox(XJ[i],7)then
set b=true
endif
if b and Ute(i)then
call Qke(p,"|cff7fff00"+GetObjectName('Adts')+"off",$A)
set Tk[i]=false
endif
set p=null
return false
endfunction
function lex takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
local boolean b=false
local integer s=S2I(SubString(GetEventPlayerChatString(),6,7))
if eox(XJ[i],5)then
set b=true
endif
if b and Ute(i)then
call Qke(p,"|cff7fff00"+GetObjectName('Asth')+I2S(s),$A)
set cJe[(i)*(2)+s]=GetUnitX(XJ[i])
set cke[(i)*(2)+s]=GetUnitY(XJ[i])
endif
set p=null
return false
endfunction
function lxx takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
local boolean b=false
local integer s=S2I(SubString(GetEventPlayerChatString(),$A,$C))
if eox(XJ[i],5)then
set b=true
endif
if b and Ute(i)then
set Uk[i]=s
call Qke(p,"|cffff0000"+GetObjectName('Amim')+I2S(Uk[i]),5)
endif
set p=null
return false
endfunction
function lox takes nothing returns boolean
local integer CGe=Qce()
set Abe[CGe]=Abe[CGe]-1
if Abe[CGe]==0 then
set Abe[CGe]=Uk[ANe[CGe]]*32
if ABe[CGe]==1 then
set ABe[CGe]=2
else
set ABe[CGe]=1
endif
call IssuePointOrderById(Ace[CGe],$D000F,cJe[(ANe[CGe])*(2)+ABe[CGe]],cke[(ANe[CGe])*(2)+ABe[CGe]])
endif
if not uk[ANe[CGe]]then
call QDe()
set Ace[CGe]=null
call Cue(CGe)
endif
return false
endfunction
function lrx takes integer i returns nothing
local integer CGe=CTe()
set ANe[CGe]=i
set Ace[CGe]=XJ[i]
set Abe[CGe]=Uk[ANe[CGe]]*32
set ABe[CGe]=1
call QIe(CGe,.03125,true,function lox)
endfunction
function lix takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
local boolean b=false
if eox(XJ[i],5)then
set b=true
endif
if b and Ute(i)then
if cJe[(i)*(2)+1]==0 or cJe[(i)*(2)+2]==0 then
call Qke(p,"|cffff0000"+GetObjectName('Aexh'),5)
set p=null
return false
endif
if sre(cJe[(i)*(2)+1],cke[(i)*(2)+1],cJe[(i)*(2)+2],cke[(i)*(2)+2])>$FA0 then
call Qke(p,"|cffff0000"+GetObjectName('Arpl'),5)
set p=null
return false
endif
if uk[i]then
set uk[i]=false
call Qke(p,"|cffff0000"+GetObjectName('Arpb'),5)
else
set uk[i]=true
call Qke(p,"|cffff0000"+GetObjectName('Amb2'),5)
call lrx(i)
endif
endif
set p=null
return false
endfunction
function lax takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Player(0),GetObjectName('AHab'),true)
call TriggerRegisterPlayerChatEvent(t,Player(1),GetObjectName('AHab'),true)
call TriggerRegisterPlayerChatEvent(t,Player(2),GetObjectName('AHab'),true)
call TriggerRegisterPlayerChatEvent(t,Player(3),GetObjectName('AHab'),true)
call TriggerRegisterPlayerChatEvent(t,Player(4),GetObjectName('AHab'),true)
call TriggerRegisterPlayerChatEvent(t,Player(5),GetObjectName('AHab'),true)
call TriggerAddCondition(t,Filter(function KZx))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Player(0),GetObjectName('Aply'),true)
call TriggerRegisterPlayerChatEvent(t,Player(1),GetObjectName('Aply'),true)
call TriggerRegisterPlayerChatEvent(t,Player(2),GetObjectName('Aply'),true)
call TriggerRegisterPlayerChatEvent(t,Player(3),GetObjectName('Aply'),true)
call TriggerRegisterPlayerChatEvent(t,Player(4),GetObjectName('Aply'),true)
call TriggerRegisterPlayerChatEvent(t,Player(5),GetObjectName('Aply'),true)
call TriggerAddCondition(t,Filter(function K_x))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Player(0),GetObjectName('AHdr'),true)
call TriggerRegisterPlayerChatEvent(t,Player(1),GetObjectName('AHdr'),true)
call TriggerRegisterPlayerChatEvent(t,Player(2),GetObjectName('AHdr'),true)
call TriggerRegisterPlayerChatEvent(t,Player(3),GetObjectName('AHdr'),true)
call TriggerRegisterPlayerChatEvent(t,Player(4),GetObjectName('AHdr'),true)
call TriggerRegisterPlayerChatEvent(t,Player(5),GetObjectName('AHdr'),true)
call TriggerAddCondition(t,Filter(function K5x))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Player(0),GetObjectName('Asps'),true)
call TriggerRegisterPlayerChatEvent(t,Player(1),GetObjectName('Asps'),true)
call TriggerRegisterPlayerChatEvent(t,Player(2),GetObjectName('Asps'),true)
call TriggerRegisterPlayerChatEvent(t,Player(3),GetObjectName('Asps'),true)
call TriggerRegisterPlayerChatEvent(t,Player(4),GetObjectName('Asps'),true)
call TriggerRegisterPlayerChatEvent(t,Player(5),GetObjectName('Asps'),true)
call TriggerAddCondition(t,Filter(function K6x))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Player(0),GetObjectName('prvt'),false)
call TriggerRegisterPlayerChatEvent(t,Player(1),GetObjectName('prvt'),false)
call TriggerRegisterPlayerChatEvent(t,Player(2),GetObjectName('prvt'),false)
call TriggerRegisterPlayerChatEvent(t,Player(3),GetObjectName('prvt'),false)
call TriggerRegisterPlayerChatEvent(t,Player(4),GetObjectName('prvt'),false)
call TriggerRegisterPlayerChatEvent(t,Player(5),GetObjectName('prvt'),false)
call TriggerAddCondition(t,Filter(function K7x))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Player(0),GetObjectName('ssil'),false)
call TriggerRegisterPlayerChatEvent(t,Player(1),GetObjectName('ssil'),false)
call TriggerRegisterPlayerChatEvent(t,Player(2),GetObjectName('ssil'),false)
call TriggerRegisterPlayerChatEvent(t,Player(3),GetObjectName('ssil'),false)
call TriggerRegisterPlayerChatEvent(t,Player(4),GetObjectName('ssil'),false)
call TriggerRegisterPlayerChatEvent(t,Player(5),GetObjectName('ssil'),false)
call TriggerAddCondition(t,Filter(function K8x))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Player(0),GetObjectName('Adef'),true)
call TriggerRegisterPlayerChatEvent(t,Player(1),GetObjectName('Adef'),true)
call TriggerRegisterPlayerChatEvent(t,Player(2),GetObjectName('Adef'),true)
call TriggerRegisterPlayerChatEvent(t,Player(3),GetObjectName('Adef'),true)
call TriggerRegisterPlayerChatEvent(t,Player(4),GetObjectName('Adef'),true)
call TriggerRegisterPlayerChatEvent(t,Player(5),GetObjectName('Adef'),true)
call TriggerAddCondition(t,Filter(function K9x))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Player(0),GetObjectName('Aclf'),true)
call TriggerRegisterPlayerChatEvent(t,Player(1),GetObjectName('Aclf'),true)
call TriggerRegisterPlayerChatEvent(t,Player(2),GetObjectName('Aclf'),true)
call TriggerRegisterPlayerChatEvent(t,Player(3),GetObjectName('Aclf'),true)
call TriggerRegisterPlayerChatEvent(t,Player(4),GetObjectName('Aclf'),true)
call TriggerRegisterPlayerChatEvent(t,Player(5),GetObjectName('Aclf'),true)
call TriggerAddCondition(t,Filter(function lvx))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Player(0),GetObjectName('Ainf'),false)
call TriggerRegisterPlayerChatEvent(t,Player(1),GetObjectName('Ainf'),false)
call TriggerRegisterPlayerChatEvent(t,Player(2),GetObjectName('Ainf'),false)
call TriggerRegisterPlayerChatEvent(t,Player(3),GetObjectName('Ainf'),false)
call TriggerRegisterPlayerChatEvent(t,Player(4),GetObjectName('Ainf'),false)
call TriggerRegisterPlayerChatEvent(t,Player(5),GetObjectName('Ainf'),false)
call TriggerAddCondition(t,Filter(function lex))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Player(0),GetObjectName('Aivs'),true)
call TriggerRegisterPlayerChatEvent(t,Player(1),GetObjectName('Aivs'),true)
call TriggerRegisterPlayerChatEvent(t,Player(2),GetObjectName('Aivs'),true)
call TriggerRegisterPlayerChatEvent(t,Player(3),GetObjectName('Aivs'),true)
call TriggerRegisterPlayerChatEvent(t,Player(4),GetObjectName('Aivs'),true)
call TriggerRegisterPlayerChatEvent(t,Player(5),GetObjectName('Aivs'),true)
call TriggerAddCondition(t,Filter(function lix))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Player(0),GetObjectName('Arsk'),false)
call TriggerRegisterPlayerChatEvent(t,Player(1),GetObjectName('Arsk'),false)
call TriggerRegisterPlayerChatEvent(t,Player(2),GetObjectName('Arsk'),false)
call TriggerRegisterPlayerChatEvent(t,Player(3),GetObjectName('Arsk'),false)
call TriggerRegisterPlayerChatEvent(t,Player(4),GetObjectName('Arsk'),false)
call TriggerRegisterPlayerChatEvent(t,Player(5),GetObjectName('Arsk'),false)
call TriggerAddCondition(t,Filter(function lxx))
set t=null
endfunction
function lnx takes integer i returns string
if i==1 then
return"tắt"
else
return"mở"
endif
endfunction
function lVx takes nothing returns boolean
local player p=GetTriggerPlayer()
local string s=GetEventPlayerChatString()
local integer i=GetPlayerId(p)+1
local integer s1=S2I(SubString(s,3,5))
local integer s2=S2I(SubString(s,6,7))
if eox(XJ[i],5)and Ute(i)then
if s1>=1 and s1<=$B and s2<2 and s2>=0 then
set cKe[(s1)*(6)+i]=s2
call Qke(p,yj[5]+"|cffffcc00"+"[ "+BlzGetAbilityResearchTooltip(Bwe[(i)*(20)+s1],0)+" ]|r - "+lnx(s2),3)
endif
endif
set p=null
set s=null
return false
endfunction
function lEx takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Player(0),GetObjectName('Acmg'),false)
call TriggerRegisterPlayerChatEvent(t,Player(1),GetObjectName('Acmg'),false)
call TriggerRegisterPlayerChatEvent(t,Player(2),GetObjectName('Acmg'),false)
call TriggerRegisterPlayerChatEvent(t,Player(3),GetObjectName('Acmg'),false)
call TriggerRegisterPlayerChatEvent(t,Player(4),GetObjectName('Acmg'),false)
call TriggerRegisterPlayerChatEvent(t,Player(5),GetObjectName('Acmg'),false)
call TriggerAddCondition(t,Filter(function lVx))
set t=null
endfunction
function lXx takes unit u,unit v,integer i,real x,real y returns boolean
local real x0=GetUnitX(u)
local real y0=GetUnitY(u)
local integer a=0
if not spe(v)then
set x=GetUnitX(v)
set y=GetUnitY(v)
endif
if qb[i]==1 then
set a=6
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A042'))>0)then
call IssueImmediateOrderById(u,$D0080)
return false
endif
set a=$A
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D026C)
return false
endif
set a=8
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D0228)
return false
endif
set a=3
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0079,x,y)
return false
endif
endif
if qb[i]==2 then
set a=6
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A04J'))>0)then
call IssueImmediateOrderById(u,$D0080)
return false
endif
set a=8
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0250,x,y)
return false
endif
set a=3
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0079,x,y)
return false
endif
endif
if qb[i]==3 then
set a=5
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A031'))>0)then
call IssueImmediateOrderById(u,$D0080)
return false
endif
set a=8
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D0228)
return false
endif
set a=$A
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0079,x,y)
return false
endif
endif
if qb[i]==4 then
set a=5
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A03I'))>0)then
call IssueImmediateOrderById(u,$D0080)
return false
endif
set a=8
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D0277)
return false
endif
set a=6
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D0228)
return false
endif
set a=$A
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0079,x,y)
return false
endif
endif
if qb[i]==5 then
set a=8
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueTargetOrderById(u,$D0097,v)
return false
endif
set a=5
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0079,x,y)
return false
endif
endif
if qb[i]==6 then
set a=$A
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D0277)
return false
endif
set a=8
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D026C)
return false
endif
set a=5
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0079,x,y)
return false
endif
endif
if qb[i]==7 then
set a=3
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A05Q'))>0)then
call IssueImmediateOrderById(u,$D026C)
return false
endif
set a=8
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0264,x,y)
return false
endif
set a=5
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0079,x,y)
return false
endif
endif
if qb[i]==8 then
set a=8
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0079,x,y)
return false
endif
endif
if qb[i]==9 then
set a=4
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A06M'))>0)then
call IssueImmediateOrderById(u,$D0080)
return false
endif
set a=$A
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D0277)
return false
endif
set a=5
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D0228)
return false
endif
set a=8
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0079,x,y)
return false
endif
endif
if qb[i]==$A then
set a=4
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A06M'))>0)then
call IssueImmediateOrderById(u,$D0080)
return false
endif
set a=$A
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A07F'))>0)then
call IssueImmediateOrderById(u,$D0277)
return false
endif
set a=5
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D0228)
return false
endif
endif
if qb[i]==$B then
set a=3
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A07K'))>0)then
call IssueImmediateOrderById(u,$D0228)
return false
endif
set a=2
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and GetUnitLifePercent(u)<=70 then
call IssueImmediateOrderById(u,$D0080)
return false
endif
endif
if qb[i]==$C then
set a=3
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A07W'))>0)then
call IssueImmediateOrderById(u,$D0080)
return false
endif
set a=9
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A085'))>0)then
call IssueImmediateOrderById(u,$D0228)
return false
endif
endif
if qb[i]==$D then
set a=4
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A08E'))>0)then
call IssueImmediateOrderById(u,$D0080)
return false
endif
set a=9
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A091'))>0)then
call IssueImmediateOrderById(u,$D0277)
return false
endif
set a=5
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D0228)
return false
endif
endif
if qb[i]==$E then
set a=4
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A08E'))>0)then
call IssueImmediateOrderById(u,$D0080)
return false
endif
set a=5
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D0228)
return false
endif
endif
if qb[i]==$F then
set a=6
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0264,x,y)
return false
endif
set a=5
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0250,x,y)
return false
endif
set a=4
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0079,x,y)
return false
endif
endif
if qb[i]==16 then
set a=8
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D0277)
return false
endif
set a=6
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D026C)
return false
endif
set a=4
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D0228)
return false
endif
endif
if qb[i]==17 then
set a=3
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A0A5'))>0)then
call IssueImmediateOrderById(u,$D0080)
return false
endif
set a=8
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D0228)
return false
endif
set a=5
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0079,x,y)
return false
endif
endif
if qb[i]==18 then
set a=3
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A0A5'))>0)then
call IssueImmediateOrderById(u,$D0080)
return false
endif
set a=8
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D026C)
return false
endif
set a=5
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D0228)
return false
endif
endif
if qb[i]==19 then
set a=3
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A0B0'))>0)then
call IssueImmediateOrderById(u,$D0080)
return false
endif
set a=4
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A0B3'))>0)then
call IssueImmediateOrderById(u,$D0228)
return false
endif
set a=5
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A0B6'))>0)then
call IssueImmediateOrderById(u,$D026C)
return false
endif
set a=8
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0264,x,y)
return false
endif
endif
if qb[i]==20 then
set a=3
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A0B0'))>0)then
call IssueImmediateOrderById(u,$D0080)
return false
endif
set a=5
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A0BK'))>0)then
call IssueImmediateOrderById(u,$D026C)
return false
endif
set a=$A
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0079,x,y)
return false
endif
set a=7
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueTargetOrderById(u,$D0097,v)
return false
endif
set a=4
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0264,x,y)
return false
endif
endif
if qb[i]==21 then
set a=3
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A0R6'))>0)then
call IssueImmediateOrderById(u,$D0080)
return false
endif
set a=8
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0079,x,y)
return false
endif
endif
if qb[i]==22 then
set a=4
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A0RN'))>0)then
call IssueImmediateOrderById(u,$D0080)
return false
endif
set a=8
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueTargetOrderById(u,$D0097,v)
return false
endif
set a=3
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0079,x,y)
return false
endif
endif
if qb[i]==23 then
set a=5
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D0228)
return false
endif
set a=8
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D0080)
return false
endif
set a=3
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0079,x,y)
return false
endif
endif
if qb[i]==24 then
set a=4
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D00C4)
return false
endif
set a=6
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D0228)
return false
endif
set a=8
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D0080)
return false
endif
set a=3
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0079,x,y)
return false
endif
endif
if qb[i]==25 then
set a=5
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssueImmediateOrderById(u,$D00C4)
return false
endif
set a=$B
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and wJ[i]then
call IssuePointOrderById(u,$D0264,x,y)
return false
endif
set a=7
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0250,x,y)
return false
endif
set a=4
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0079,x,y)
return false
endif
endif
if qb[i]==26 then
set a=5
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 and not(GetUnitAbilityLevel((u),('A0VT'))>0)then
call IssueImmediateOrderById(u,$D0228)
return false
endif
set a=8
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0264,x,y)
return false
endif
set a=4
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0250,x,y)
return false
endif
set a=3
if cKe[(a)*(6)+i]==0 and BlzGetUnitAbilityCooldownRemaining(u,Bwe[(i)*(20)+a])==0 and GetUnitAbilityLevel(u,Bwe[(i)*(20)+a])>0 then
call IssuePointOrderById(u,$D0079,x,y)
return false
endif
endif
return false
endfunction
function lOx takes nothing returns boolean
local integer CGe=Qce()
if Afe[CGe]==1 then
call lXx(AFe[CGe],Age[CGe],AGe[CGe],Ahe[CGe],AHe[CGe])
endif
set Afe[CGe]=Afe[CGe]-1
if Afe[CGe]<=0 then
set cje[(AGe[CGe])*(3)+3]=false
set AFe[CGe]=null
set Age[CGe]=null
call QDe()
call Cte(CGe)
endif
return false
endfunction
function lRx takes unit u,unit v,player p,integer i returns nothing
local integer CGe=CSe()
set AFe[CGe]=u
set Age[CGe]=v
set Ahe[CGe]=GetUnitX(v)
set AHe[CGe]=GetUnitY(v)
set Afe[CGe]=cle[(i)*($A)+1]
set AGe[CGe]=i
call QIe(CGe,cle[(i)*($A)+2]*.01,true,function lOx)
endfunction
function lIx takes nothing returns boolean
local unit u=GetAttacker()
local unit v=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
if(IsUnitType((u),UNIT_TYPE_HERO))and cje[(i)*(3)+1] and cje[(i)*(3)+3]==false then
set cje[(i)*(3)+3]=true
call lRx(u,v,p,i)
endif
set u=null
set v=null
set p=null
return false
endfunction
function lAx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function lIx))
set t=null
endfunction
function lNx takes nothing returns boolean
local real d=GetEventDamage()
local unit u=GetEventDamageSource()
local unit v=GetTriggerUnit()
call DisableTrigger(wk)
if(GetUnitAbilityLevel((v),('B000'))>0)then
call UnitRemoveAbility(v,'B000')
call QMe(v,d)
call OKx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B00D'))>0)then
call UnitRemoveAbility(v,'B00D')
call QMe(v,d)
call A7x(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B04B'))>0)then
call UnitRemoveAbility(v,'B04B')
call QMe(v,d)
call RMx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B00H'))>0)then
call UnitRemoveAbility(v,'B00H')
call QMe(v,d)
call VPx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B00J'))>0)then
call UnitRemoveAbility(v,'B00J')
call QMe(v,d)
call rjx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B04C'))>0)then
call UnitRemoveAbility(v,'B04C')
call QMe(v,d)
call F2x(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B00L'))>0)then
call UnitRemoveAbility(v,'B00L')
call QMe(v,d)
call i6x(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B00P'))>0)then
call UnitRemoveAbility(v,'B00P')
call QMe(v,d)
call Flx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B049'))>0)then
call UnitRemoveAbility(v,'B049')
call QMe(v,d)
call dlx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B00S'))>0)then
call UnitRemoveAbility(v,'B00S')
call QMe(v,d)
call idx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B00V'))>0)then
call UnitRemoveAbility(v,'B00V')
call QMe(v,d)
call NSx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B04A'))>0)then
call UnitRemoveAbility(v,'B04A')
call QMe(v,d)
call BNx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B00Y'))>0)then
call UnitRemoveAbility(v,'B00Y')
call QMe(v,d)
call ADx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B011'))>0)then
call UnitRemoveAbility(v,'B011')
call QMe(v,d)
call xhx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B04D'))>0)then
call UnitRemoveAbility(v,'B04D')
call QMe(v,d)
call awx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B014'))>0)then
call UnitRemoveAbility(v,'B014')
call QMe(v,d)
call bcx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B015'))>0)then
call UnitRemoveAbility(v,'B015')
call QMe(v,d)
call Oix(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B04E'))>0)then
call UnitRemoveAbility(v,'B04E')
call QMe(v,d)
call bVx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B018'))>0)then
call UnitRemoveAbility(v,'B018')
call QMe(v,d)
call Djx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B01B'))>0)then
call UnitRemoveAbility(v,'B01B')
call QMe(v,d)
call Dgx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B04F'))>0)then
call UnitRemoveAbility(v,'B04F')
call QMe(v,d)
call Fqx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B01D'))>0)then
call UnitRemoveAbility(v,'B01D')
call QMe(v,d)
call DVx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B01F'))>0)then
call UnitRemoveAbility(v,'B01F')
call QMe(v,d)
call dVx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B04G'))>0)then
call UnitRemoveAbility(v,'B04G')
call QMe(v,d)
call Ftx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B01H'))>0)then
call UnitRemoveAbility(v,'B01H')
call QMe(v,d)
call Rvx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B01K'))>0)then
call UnitRemoveAbility(v,'B01K')
call QMe(v,d)
call xdx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B04H'))>0)then
call UnitRemoveAbility(v,'B04H')
call QMe(v,d)
call N6x(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B01N'))>0)then
call UnitRemoveAbility(v,'B01N')
call QMe(v,d)
call fGx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B01P'))>0)then
call UnitRemoveAbility(v,'B01P')
call QMe(v,d)
call dCx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B04I'))>0)then
call UnitRemoveAbility(v,'B04I')
call QMe(v,d)
call dgx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B01S'))>0)then
call UnitRemoveAbility(v,'B01S')
call QMe(v,d)
call NGx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B01U'))>0)then
call UnitRemoveAbility(v,'B01U')
call QMe(v,d)
call nxx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B04J'))>0)then
call UnitRemoveAbility(v,'B04J')
call QMe(v,d)
call xnx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B01V'))>0)then
call UnitRemoveAbility(v,'B01V')
call QMe(v,d)
call BJx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B01X'))>0)then
call UnitRemoveAbility(v,'B01X')
call QMe(v,d)
call Rix(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B04K'))>0)then
call UnitRemoveAbility(v,'B04K')
call QMe(v,d)
call fmx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B020'))>0)then
call UnitRemoveAbility(v,'B020')
call QMe(v,d)
call DLx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B021'))>0)then
call UnitRemoveAbility(v,'B021')
call QMe(v,d)
call fZx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B04M'))>0)then
call UnitRemoveAbility(v,'B04M')
call QMe(v,d)
call D9x(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B025'))>0)then
call UnitRemoveAbility(v,'B025')
call QMe(v,d)
call dSx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B027'))>0)then
call UnitRemoveAbility(v,'B027')
call QMe(v,d)
call ABx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B04L'))>0)then
call UnitRemoveAbility(v,'B04L')
call QMe(v,d)
call oXx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B029'))>0)then
call UnitRemoveAbility(v,'B029')
call QMe(v,d)
call ixx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B02B'))>0)then
call UnitRemoveAbility(v,'B02B')
call QMe(v,d)
call AQx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B04O'))>0)then
call UnitRemoveAbility(v,'B04O')
call QMe(v,d)
call R_x(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B02E'))>0)then
call UnitRemoveAbility(v,'B02E')
call QMe(v,d)
call f2x(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B02H'))>0)then
call UnitRemoveAbility(v,'B02H')
call QMe(v,d)
call Fux(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B04N'))>0)then
call UnitRemoveAbility(v,'B04N')
call QMe(v,d)
call DIx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B02J'))>0)then
call UnitRemoveAbility(v,'B02J')
call QMe(v,d)
call RPx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B02L'))>0)then
call UnitRemoveAbility(v,'B02L')
call QMe(v,d)
call XSx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B04P'))>0)then
call UnitRemoveAbility(v,'B04P')
call QMe(v,d)
call cax(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B02O'))>0)then
call UnitRemoveAbility(v,'B02O')
call QMe(v,d)
call dbx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B02P'))>0)then
call UnitRemoveAbility(v,'B02P')
call QMe(v,d)
call Fbx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B04Q'))>0)then
call UnitRemoveAbility(v,'B04Q')
call QMe(v,d)
call d_x(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B02T'))>0)then
call UnitRemoveAbility(v,'B02T')
call QMe(v,d)
call o0x(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B02X'))>0)then
call UnitRemoveAbility(v,'B02X')
call QMe(v,d)
call Xnx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B04R'))>0)then
call UnitRemoveAbility(v,'B04R')
call QMe(v,d)
call d3x(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B02Z'))>0)then
call UnitRemoveAbility(v,'B02Z')
call QMe(v,d)
call oZx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B04S'))>0)then
call UnitRemoveAbility(v,'B04S')
call QMe(v,d)
call Ahx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B03W'))>0)then
call UnitRemoveAbility(v,'B03W')
call QMe(v,d)
call nMx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B03Y'))>0)then
call UnitRemoveAbility(v,'B03Y')
call QMe(v,d)
call V5x(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B04T'))>0)then
call UnitRemoveAbility(v,'B04T')
call QMe(v,d)
call aSx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B040'))>0)then
call UnitRemoveAbility(v,'B040')
call QMe(v,d)
call Idx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B043'))>0)then
call UnitRemoveAbility(v,'B043')
call QMe(v,d)
call oAx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B04U'))>0)then
call UnitRemoveAbility(v,'B04U')
call QMe(v,d)
call Akx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B045'))>0)then
call UnitRemoveAbility(v,'B045')
call QMe(v,d)
call Dkx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B048'))>0)then
call UnitRemoveAbility(v,'B048')
call QMe(v,d)
call fQx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B04V'))>0)then
call UnitRemoveAbility(v,'B04V')
call QMe(v,d)
call Ffx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B04Z'))>0)then
call UnitRemoveAbility(v,'B04Z')
call QMe(v,d)
call Fix(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B052'))>0)then
call UnitRemoveAbility(v,'B052')
call QMe(v,d)
call apx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B054'))>0)then
call UnitRemoveAbility(v,'B054')
call QMe(v,d)
call VMx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B057'))>0)then
call UnitRemoveAbility(v,'B057')
call QMe(v,d)
call a8x(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B058'))>0)then
call UnitRemoveAbility(v,'B058')
call QMe(v,d)
call dPx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B05C'))>0)then
call UnitRemoveAbility(v,'B05C')
call QMe(v,d)
call fTx(u,d,v,0)
endif
if(GetUnitAbilityLevel((v),('B05D'))>0)then
call UnitRemoveAbility(v,'B05D')
call QMe(v,d)
call D1x(u,d,v,0)
endif
call EnableTrigger(wk)
set u=null
set v=null
return false
endfunction
function lbx takes nothing returns boolean
return(GetEventDamage()>0)and lNx()
endfunction
function lBx takes nothing returns nothing
call TriggerRegisterUnitEvent(wk,GetFilterUnit(),EVENT_UNIT_DAMAGED)
endfunction
function lcx takes nothing returns nothing
set wk=CreateTrigger()
call TriggerAddCondition(wk,Filter(function lbx))
call TriggerAddAction(Fe,(function lBx))
endfunction
function lCx takes nothing returns boolean
local integer CGe=Qce()
local real z=SinBJ(AKe[CGe]*$F)*320
local real x=(((GetUnitX(Ale[CGe]))*1.)+((48)*1.)*Cos(((ALe[CGe])*1.)*bj_DEGTORAD))
local real y=(((GetUnitY(Ale[CGe]))*1.)+((48)*1.)*Sin(((ALe[CGe])*1.)*bj_DEGTORAD))
if sZe(x,y)==false then
set AKe[CGe]=0
set z=SinBJ(AKe[CGe]*$F)*320
else
call SetUnitX(Ale[CGe],x)
call SetUnitY(Ale[CGe],y)
endif
call SetUnitFlyHeight((Ale[CGe]),((z)*1.),.0)
set AKe[CGe]=AKe[CGe]-1
if AKe[CGe]<0 then
set Wk[Ame[CGe]]=false
set Ale[CGe]=null
call QDe()
call Cse(CGe)
endif
return false
endfunction
function ldx takes unit u,integer i,real x2,real y2 returns nothing
local integer CGe=CQe()
local real x1=GetUnitX(u)
local real y1=GetUnitY(u)
set ALe[CGe]=soe(x1,y1,x2,y2)
set Ale[CGe]=u
set Ame[CGe]=i
set AKe[CGe]=$C
call QIe(CGe,.03125,true,function lCx)
endfunction
function lDx takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real r=GetUnitFacing(u)
if cLe[i]>=5 then
if not(GetUnitAbilityLevel((u),('B004'))>0)then
set cLe[i]=cLe[i]-5
set x=(((x)*1.)+((448)*1.)*Cos(((r)*1.)*bj_DEGTORAD))
set y=(((y)*1.)+((448)*1.)*Sin(((r)*1.)*bj_DEGTORAD))
set Wk[i]=true
call ldx(u,i,x,y)
endif
else
call Qke(p,"|cffffcc00"+"Không đủ thể lực",1)
endif
set u=null
set p=null
return false
endfunction
function lfx takes nothing returns boolean
return GetSpellAbilityId()=='A003' and lDx()
endfunction
function lFx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Filter(function lfx))
set t=null
endfunction
function lgx takes nothing returns boolean
local integer CGe=Qce()
local real x1=GetUnitX(AQe[CGe])
local real y1=GetUnitY(AQe[CGe])
local real x2=GetUnitX(Ase[CGe])
local real y2=GetUnitY(Ase[CGe])
if Aqe[CGe]==1 then
call IssueImmediateOrderById(AQe[CGe],$D026C)
call IssueImmediateOrderById(AQe[CGe],$D0228)
call IssueImmediateOrderById(AQe[CGe],$D00A0)
call IssuePointOrderById(AQe[CGe],$D0250,x2,y2)
call IssueTargetOrderById(AQe[CGe],$D0097,Ase[CGe])
call IssueImmediateOrderById(AQe[CGe],$D0084)
call IssuePointOrderById(AQe[CGe],$D022D,x2,y2)
endif
set Aqe[CGe]=Aqe[CGe]-1
if Aqe[CGe]<=0 then
call QDe()
call SaveBoolean(UH,ASe[CGe],5215,false)
set AQe[CGe]=null
set Ase[CGe]=null
call Cqe(CGe)
endif
return false
endfunction
function lGx takes unit u,unit v returns nothing
local integer CGe=CPe()
set AQe[CGe]=u
set Ase[CGe]=v
set Aqe[CGe]=R2I(.7/ .03125)
set ASe[CGe]=GetHandleId(AQe[CGe])
call QIe(CGe,.03125,true,function lgx)
endfunction
function lhx takes nothing returns boolean
local unit u=GetAttacker()
local unit v=GetTriggerUnit()
local integer i=0
local real hp=0
if(IsUnitType((u),UNIT_TYPE_TAUREN))then
set i=GetHandleId(u)
set hp=GetUnitLifePercent(u)
if LoadBoolean(UH,i,5215)==false and not tOe(v)and hp<=80 then
call lGx(u,v)
call SaveBoolean(UH,i,5215,true)
endif
if(IsUnitType((u),UNIT_TYPE_TAUREN))and not(GetUnitAbilityLevel((u),('A0JP'))>0)and hp<=50 then
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl"),(u),"origin"))
call UnitAddAbility(u,'A0JP')
endif
elseif(IsUnitType((v),UNIT_TYPE_TAUREN))then
set i=GetHandleId(v)
set hp=GetUnitLifePercent(v)
if LoadBoolean(UH,i,5215)==false and not tOe(u)and hp<=80 then
call lGx(v,u)
call SaveBoolean(UH,i,5215,true)
endif
if(IsUnitType((v),UNIT_TYPE_TAUREN))and not(GetUnitAbilityLevel((v),('A0JP'))>0)and hp<=50 then
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl"),(v),"origin"))
call UnitAddAbility(v,'A0JP')
endif
endif
set u=null
set v=null
return false
endfunction
function lHx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function lhx))
set t=null
endfunction
function ljx takes nothing returns boolean
local integer CGe=Qce()
call QDe()
call Qre(AUe[CGe])
set AUe[CGe]=null
call Cpe(CGe)
return false
endfunction
function lJx takes real x,real y returns nothing
local integer CGe=CMe()
set AUe[CGe]=AddSpecialEffect("war3mapImported\\EFF_BOSSTARGET.mdl",x,y)
call QIe(CGe,1.5,true,function ljx)
endfunction
function lkx takes nothing returns nothing
local integer CGe=Qce()
local unit n=null
local real x=GetUnitX(Aze[CGe])
local real y=GetUnitY(Aze[CGe])
local real sWe=0
local real s6e=$7D0
local unit ne=null
set AYe[CGe]=AYe[CGe]-1
if AYe[CGe]<=0 and not spe(Aze[CGe])then
call GroupEnumUnitsInRange(sv,x,y,$7D0,Wv)
loop
set n=FirstOfGroup(sv)
exitwhen n==null
if IsUnitEnemy(n,zv)and not spe(n)and not tOe(n)then
set sWe=SquareRoot((GetUnitX(n)-x)*(GetUnitX(n)-x)+(GetUnitY(n)-y)*(GetUnitY(n)-y))
if(sWe<s6e)then
set s6e=sWe
set ne=n
endif
endif
call GroupRemoveUnit(sv,n)
endloop
call IssueTargetOrderById(Aze[CGe],$D000F,ne)
set n=null
set ne=null
call QDe()
set Aze[CGe]=null
call Cme(CGe)
endif
endfunction
function lKx takes unit u returns nothing
local integer CGe=CLe()
set Aze[CGe]=u
set AYe[CGe]=1
call QIe(CGe,1.2,true,function lkx)
endfunction
function llx takes nothing returns boolean
local unit u=GetTriggerUnit()
local unit v=GetSpellTargetUnit()
local integer z=GetSpellAbilityId()
local integer id=GetUnitTypeId(u)
local real x=GetUnitX(v)
local real y=GetUnitY(v)
local real d=0
local real T0e=1.
local real QPe=BlzGetUnitBaseDamage(u,0)
if(GetUnitAbilityLevel((u),('A0JP'))>0)then
set T0e=1.5
endif
if z=='A0JO' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call C6x(u,d,v)
elseif z=='A0JQ' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call Xjx(u,d,v,30)
elseif z=='A0JR' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call iFx(u,d,x,y)
elseif z=='A0JS' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call DLx(u,d,v,50)
elseif z=='A0JT' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call F8x(u,d,d,80)
elseif z=='A0JX' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call C7x(u,d)
elseif z=='A0QI' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call bYx(u,d,d,x,y)
elseif z=='A0K6' then
call lJx(GetUnitX(u),GetUnitY(u))
call rSx(u,'d',x,y)
elseif z=='A0KH' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*15.
call fCx(u,d,d,50,GetSpellTargetX(),GetSpellTargetY())
elseif z=='A0LI' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call Zre(u,d,x,y)
elseif z=='A0LJ' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call Rwx(u,d)
elseif z=='A0KI' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call Zre(u,d,x,y)
elseif z=='A0MU' then
call lJx(x,y)
set d=QPe*T0e*yk*20.
call O5x(u,d,d,50,x,y)
elseif z=='A0MV' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call E6x(u,d,GetUnitX(u),GetUnitY(u))
elseif z=='A0MW' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call Bax(u,d)
elseif z=='A0JU' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call Rjx(u,d,d,true)
elseif z=='A0JV' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call xox(u,d)
elseif z=='A0K2' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call Bax(u,d)
elseif z=='A0JW' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call bTx(u,d)
elseif z=='A0JZ' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call VRx(u,d,d,'d')
elseif z=='A0K0' then
call iRx(u)
elseif z=='A0KB' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call F4x(u,d,x,y)
elseif z=='A0KC' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call aux(u,d)
elseif z=='A0OQ' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
call XAx(u,'d',GetUnitFacing(u))
elseif z=='A0K1' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call NXx(u,d)
elseif z=='A0K3' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call C9x(u,d,v)
elseif z=='A0K7' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call cGx(u,GetUnitX(u),GetUnitY(u),d,d,'d',v)
elseif z=='A0K8' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call bTx(u,d)
elseif z=='A0K9' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*25.
call Vcx(u,d)
elseif z=='A0KA' then
set d=QPe*T0e*yk*15.
call dvx(u)
elseif z=='A0KO' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call O5x(u,d,d,50,x,y)
elseif z=='A0KP' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call omx(u,d)
elseif z=='A0KU' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set Pv=GetUnitFacing(u)
set x=GetUnitX(u)
set y=GetUnitY(u)
set Kv=(((x)*1.)+((300)*1.)*Cos(((Pv)*1.)*bj_DEGTORAD))
set Lv=(((y)*1.)+((300)*1.)*Sin(((Pv)*1.)*bj_DEGTORAD))
call ipx(u,500,'d',Kv,Lv)
set Kv=(((x)*1.)+((600)*1.)*Cos(((Pv)*1.)*bj_DEGTORAD))
set Lv=(((y)*1.)+((600)*1.)*Sin(((Pv)*1.)*bj_DEGTORAD))
call ipx(u,500,'d',Kv,Lv)
set Kv=(((x)*1.)+((900)*1.)*Cos(((Pv)*1.)*bj_DEGTORAD))
set Lv=(((y)*1.)+((900)*1.)*Sin(((Pv)*1.)*bj_DEGTORAD))
call ipx(u,500,'d',Kv,Lv)
elseif z=='A0KV' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call Bqx(u,d)
elseif z=='A0KW' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call Btx(u,d)
elseif z=='A0K4' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call RFx(u,d,v)
elseif z=='A0K5' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call RHx(u,d)
elseif z=='A0KJ' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call C7x(u,d)
elseif z=='A0KS' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call Ncx(u,d,d,80,x,y,GetUnitFacing(u),$A)
elseif z=='A0KT' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call Vrx(u,d)
elseif z=='A0L6' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call dux(u,d,d)
elseif z=='A0L7' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call VVx(u,d)
elseif z=='A0L8' then
call lJx(x,y)
set d=QPe*T0e*yk*20.
call o8x(u,d,d,GetUnitFacing(u))
elseif z=='A0KD' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call z5e(u,d)
elseif z=='A0KE' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*15.
call fCx(u,d,d,70,GetSpellTargetX(),GetSpellTargetY())
elseif z=='A0KF' then
call lJx(GetUnitX(u),GetUnitY(u))
call eDx(u,.5,'d')
elseif z=='A0KG' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call DLx(u,d,v,'d')
elseif z=='A0KQ' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call V1x(u,d)
elseif z=='A0KR' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call cGx(u,GetUnitX(u),GetUnitY(u),d,d,'d',v)
elseif z=='A0KX' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call A0x(u,d,d,70,x,y)
elseif z=='A0KY' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call aIx(u,d)
elseif z=='A0L1' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call XMx(u,d,v)
elseif z=='A0L2' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call fkx(u,d)
elseif z=='A0LB' then
call lJx(x,y)
call rSx(u,'d',x,y)
elseif z=='A0LC' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call hjx(u,d)
elseif z=='A0LD' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*15.
call REx(u,d,GetSpellTargetX(),GetSpellTargetY())
elseif z=='A0LQ' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call cXx(u,d)
elseif z=='A0LR' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*20.
call cRx(u,d,GetSpellTargetX(),GetSpellTargetY())
elseif z=='A0LS' then
call lJx(x,y)
set d=QPe*T0e*yk*20.
call cBx(u,d,v)
elseif z=='A0LT' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call cAx(u,d)
elseif z=='A0KK' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*15.
call bYx(u,d,d,GetSpellTargetX(),GetSpellTargetY())
elseif z=='A0KL' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call dux(u,d,d)
elseif z=='A0L3' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call Obx(u,d)
elseif z=='A0L4' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call RFx(u,d,v)
elseif z=='A0L5' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*15.
call oHx(u,d,d,80,GetSpellTargetX(),GetSpellTargetY())
elseif z=='A0LN' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call irx(u,d)
elseif z=='A0LO' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call iVx(u,d)
elseif z=='A0LP' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call O5x(u,d,d,70,x,y)
elseif z=='A0M1' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call ECx(u,d)
elseif z=='A0M2' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call hIx(u,d)
elseif z=='A0M3' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call Egx(u,d)
elseif z=='A0MI' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call dex(u,d)
elseif z=='A0MJ' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call b3x(u,d)
elseif z=='A0MK' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*20.
call fCx(u,d,d,50,GetSpellTargetX(),GetSpellTargetY())
elseif z=='A0ML' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call b7x(u,d)
elseif z=='A0MX' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call r_x(u,d)
elseif z=='A0MY' then
call lJx(x,y)
set d=QPe*T0e*yk*20.
call zRe(u,d,x,y)
elseif z=='A0MZ' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call r8x(u,d)
elseif z=='A0N0' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*20.
call r3x(u,d,GetSpellTargetX(),GetSpellTargetY())
elseif z=='A0KM' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call Rix(u,d,v,'d')
elseif z=='A0KN' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call x3x(u,d,d,'d')
elseif z=='A0LE' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*15.
call bYx(u,d,d,GetSpellTargetX(),GetSpellTargetY())
elseif z=='A0LF' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call aNx(u,d)
elseif z=='A0N6' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call NLx(u,d)
elseif z=='A0N7' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call dux(u,d,d)
elseif z=='A0N8' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call NPx(u,d)
elseif z=='A0N9' then
call lJx(x,y)
set d=QPe*T0e*yk*20.
call C8x(u,d,GetUnitFacing(u))
elseif z=='A0KZ' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call box(u,d,GetUnitFacing(u))
elseif z=='A0L0' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call brx(u,d)
elseif z=='A0LG' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call RIx(u,d)
elseif z=='A0LH' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call Rbx(u,d,x,y)
elseif z=='A0QS' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call Rdx(u,d)
elseif z=='A0M4' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call B6x(u,d)
elseif z=='A0M5' then
call lJx(x,y)
set d=QPe*T0e*yk*20.
call cvx(u,d,x,y)
elseif z=='A0M6' then
call cxx(u)
elseif z=='A0M8' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*20.
call F4x(u,d,GetSpellTargetX(),GetSpellTargetY())
elseif z=='A0L9' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*15.
call rRx(u,d,GetSpellTargetX(),GetSpellTargetY())
elseif z=='A0LA' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call rAx(u,d)
elseif z=='A0LK' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call cGx(u,GetUnitX(u),GetUnitY(u),d,d,'d',v)
elseif z=='A0LL' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*15.
call dmx(u,d,GetSpellTargetX(),GetSpellTargetY())
elseif z=='A0LM' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call dMx(u,d)
elseif z=='A0LV' then
call lJx(x,y)
call rSx(u,'d',x,y)
elseif z=='A0LW' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call f4x(u,d)
elseif z=='A0LX' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*20.
call Ncx(u,d,d,80,GetSpellTargetX(),GetSpellTargetY(),GetUnitFacing(u),$A)
elseif z=='A0MB' then
call lJx(x,y)
set d=QPe*T0e*yk*20.
call bYx(u,d,d,x,y)
elseif z=='A0MC' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call Vdx(u,d)
elseif z=='A0MD' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call D3x(u,d)
elseif z=='A0MM' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*20.
call oQx(u,d,GetSpellTargetX(),GetSpellTargetY())
elseif z=='A0MN' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call oSx(u,d)
elseif z=='A0MO' then
call lJx(x,y)
set d=QPe*T0e*yk*20.
call oUx(u,d)
elseif z=='A0MP' then
call lJx(x,y)
set d=QPe*T0e*yk*20.
call oYx(u,d,x,y)
endif
if z=='A0LU' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*15.
call gUx(u,d)
elseif z=='A0LY' then
call lJx(x,y)
set d=QPe*T0e*yk*20.
call Xkx(u,d,'d',x,y)
elseif z=='A0LZ' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call fjx(u,d)
elseif z=='A0M0' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*20.
call Xlx(u,d,GetUnitFacing(u))
elseif z=='A0M9' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*30.
call ilx(u,d)
elseif z=='A0MA' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*30.
call imx(u,d,GetUnitFacing(u))
elseif z=='A0ME' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call E1x(u,d)
elseif z=='A0MF' then
call lJx(x,y)
set d=QPe*T0e*yk*20.
call E6x(u,d,x,y)
elseif z=='A0MG' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*20.
call E8x(u,d,GetSpellTargetX(),GetSpellTargetY())
elseif z=='A0MH' then
call lJx(GetUnitX(u),GetUnitY(u))
call Xex(u)
elseif z=='A0MQ' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call I6x(u,d)
elseif z=='A0MR' then
call lJx(x,y)
set d=QPe*T0e*yk*20.
call Avx(u,d,x,y)
elseif z=='A0MS' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call Rwx(u,d)
elseif z=='A0MT' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*25.
call Axx(u,d,GetUnitFacing(u))
elseif z=='A0N1' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call eqx(u,d)
elseif z=='A0N2' then
call lJx(x,y)
set d=QPe*T0e*yk*20.
call dRx(u,d,x,y)
elseif z=='A0N3' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call esx(u,d)
elseif z=='A0N4' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*20.
call dAx(u,d,GetUnitFacing(u))
elseif z=='A0N5' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*300.
call fjx(u,d)
elseif z=='A0TP' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call Enx(u,d)
elseif z=='A0TQ' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*15.
call i0x(u,d,GetUnitFacing(u))
elseif z=='A0TR' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call F8x(u,d,d,'d')
elseif z=='A0TS' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call i2x(u,d,soe(GetUnitX(u),GetUnitY(u),x,y))
elseif z=='A0TT' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*20.
call VQx(u,d,GetUnitFacing(u))
elseif z=='A0TU' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call Vtx(u,d)
elseif z=='A0TV' then
call lJx(x,y)
set d=QPe*T0e*yk*15.
call n_x(u,d,v)
elseif z=='A0TW' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call GWx(u,d)
elseif z=='A0TX' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*20.
call Gyx(u,d,GetSpellTargetX(),GetSpellTargetY())
elseif z=='A0TY' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*20.
call XXx(u,d,GetSpellTargetX(),GetSpellTargetY())
elseif z=='A0TZ' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call fhx(u,d)
elseif z=='A0U0' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call bLx(u,d)
elseif z=='A0U1' then
call lJx(x,y)
set d=QPe*T0e*yk*20.
call bMx(u,d,x,y)
elseif z=='A0U2' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*20.
call bQx(u,d,GetSpellTargetX(),GetSpellTargetY())
elseif z=='A0U3' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*30.
call imx(u,d,GetUnitFacing(u))
elseif z=='A0U4' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call bRx(u,d)
elseif z=='A0U5' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*20.
call XUx(u,d,d,'d',GetUnitX(u),GetUnitY(u),GetUnitFacing(u))
elseif z=='A0U6' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*20.
call imx(u,d,GetUnitFacing(u))
elseif z=='A0U7' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*20.
call gWx(u,d,GetUnitFacing(u))
elseif z=='A0U8' then
call lJx(x,y)
set d=QPe*T0e*yk*20.
call Ftx(u,d,v,'d')
elseif z=='A0U9' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*20.
call f0x(u,d,GetUnitFacing(u))
elseif z=='A0UA' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call dux(u,d,d)
elseif z=='A0UB' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*20.
call Gkx(u,d,GetUnitFacing(u))
elseif z=='A0UC' then
call lJx(x,y)
set d=QPe*T0e*yk*20.
call imx(u,d,GetUnitFacing(u))
elseif z=='A0UD' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call R4x(u,d)
elseif z=='A0UE' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*20.
call R8x(u,d,GetUnitFacing(u))
elseif z=='A0UF' then
call lJx(x,y)
set d=QPe*T0e*yk*20.
call bVx(u,d,v,'d')
elseif z=='A0UG' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call Ixx(u,d)
elseif z=='A0UH' then
call lJx(x,y)
set d=QPe*T0e*yk*25.
call b9x(u,d,x,y)
elseif z=='A0UI' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*25.
call Fhx(u,d)
elseif z=='A0UJ' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*25.
call Fjx(u,d,GetUnitFacing(u))
elseif z=='A0UK' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*25.
call Bxx(u,d)
elseif z=='A0UL' then
call lJx(x,y)
set d=QPe*T0e*yk*25.
call FOx(u,d,d,'d',GetUnitX(u),GetUnitY(u),GetUnitFacing(u))
elseif z=='A0UM' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*25.
call e9x(u,d)
elseif z=='A0UN' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*25.
call Gkx(u,d,GetUnitFacing(u))
elseif z=='A0UO' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*25.
call gTx(u,d,GetUnitFacing(u))
elseif z=='A0XO' then
call lJx(x,y)
set d=QPe*T0e*yk*20.
call Vhx(u,v,d,d,'d')
elseif z=='A0XP' then
set x=GetSpellTargetX()
set y=GetSpellTargetY()
call lJx(x,y)
set d=QPe*T0e*yk*15.
call A0x(u,d,d,70,x,y)
elseif z=='A0XQ' then
call lJx(x,y)
call rSx(u,'d',x,y)
elseif z=='A0XR' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*25.
call dux(u,d,d)
elseif z=='A0XS' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call FBx(u,d)
elseif z=='A0XU' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call ERx(u,30,999,1.)
elseif z=='A0XV' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*15.
call ECx(u,d)
elseif z=='A0XW' then
call lJx(x,y)
set d=QPe*T0e*yk*25.
call bIx(u,d,v)
elseif z=='A0XX' then
call bdx(u)
elseif z=='A0XZ' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call bgx(u,d)
elseif z=='A0Y0' then
call lJx(x,y)
set d=QPe*T0e*yk*20.
call bfx(u,d,x,y)
elseif z=='A0Y2' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*25.
call Vxx(u,d)
elseif z=='A0Y1' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*25.
call x3x(u,d,d,'d')
elseif z=='A0Y3' then
call Hnx(u)
elseif z=='A0Y4' then
call lJx(x,y)
set d=QPe*T0e*yk*30.
call DUx(u,d,d,'d',GetUnitFacing(u))
elseif z=='A0Y5' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*30.
call Vgx(u,d)
elseif z=='A0Y7' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*30.
set Pv=GetUnitFacing(u)
call XUx(u,d,d,'d',GetUnitX(u),GetUnitY(u),Pv-30)
call XUx(u,d,d,'d',GetUnitX(u),GetUnitY(u),Pv-$F)
call XUx(u,d,d,'d',GetUnitX(u),GetUnitY(u),Pv)
call XUx(u,d,d,'d',GetUnitX(u),GetUnitY(u),Pv+$F)
call XUx(u,d,d,'d',GetUnitX(u),GetUnitY(u),Pv+30)
elseif z=='A0Y8' then
call lJx(GetUnitX(u),GetUnitY(u))
call eDx(u,1.,'d')
elseif z=='A0Y9' then
call lJx(x,y)
set d=QPe*T0e*yk*20.
call fnx(u,d,d,'d',1.,x,y)
elseif z=='A0YA' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call nSx(u,d)
elseif z=='A0YB' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*30.
call OYx(u,d,d,'d',GetUnitFacing(u))
elseif z=='A0YC' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*25.
call Vrx(u,d)
elseif z=='A0YE' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call VRx(u,d,d,'d')
elseif z=='A0YF' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*30.
call dux(u,d,d)
elseif z=='A0YG' then
call lJx(x,y)
set d=QPe*T0e*yk*25.
call nPx(u,d,x,y)
elseif z=='A0YH' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*30.
call GUx(u,d,GetUnitFacing(u))
elseif z=='A0YI' then
call lJx(x,y)
set d=QPe*T0e*yk*20.
call Fzx(u,d,d,'d',x,y)
elseif z=='A0YJ' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*25.
call DPx(u,d,d,'d',GetSpellTargetX(),GetSpellTargetY())
elseif z=='A0YK' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call nEx(u,d)
elseif z=='A0YL' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*20.
call zYe(u,d)
elseif z=='A0YM' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*25.
call nIx(u,d)
elseif z=='A0YN' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*25.
call nBx(u,d)
elseif z=='A0YO' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*25.
call ndx(u,d,GetUnitFacing(u))
elseif z=='A0YP' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*30.
call nax(u,d)
elseif z=='A0YQ' then
call lJx(GetUnitX(u),GetUnitY(u))
set d=QPe*T0e*yk*30.
call zSe(u,d)
elseif z=='A0YS' then
call lJx(x,y)
set d=QPe*T0e*yk*30.
call zUe(u,d,x,y)
elseif z=='A0YR' then
call lJx(GetSpellTargetX(),GetSpellTargetY())
set d=QPe*T0e*yk*30.
call DSx(u,d,GetUnitFacing(u))
endif
call lKx(u)
set u=null
set v=null
return false
endfunction
function lLx takes nothing returns boolean
return((IsUnitType((GetTriggerUnit()),UNIT_TYPE_TAUREN))and llx())!=null
endfunction
function lmx takes nothing returns boolean
local unit u=GetAttacker()
local integer id=GetUnitTypeId(u)
local unit v=GetTriggerUnit()
local real d=0
local real QPe=BlzGetUnitBaseDamage(u,0)
local real T0e=1.
if(GetUnitAbilityLevel((u),('A0JP'))>0)then
set T0e=1.5
endif
if id=='n01R' then
set d=QPe*T0e*yk*5.
call fGx(u,d,v,30)
elseif id=='n01S' then
set d=QPe*T0e*yk*5.
call idx(u,d,v,30)
elseif id=='n01T' then
set d=QPe*T0e*yk*5.
call ixx(u,d,v,30)
elseif id=='n01U' then
set d=QPe*T0e*yk*5.
call xdx(u,d,v,40)
elseif id=='n01V' then
set d=QPe*T0e*yk*5.
call A7x(u,d,v,40)
elseif id=='n051' then
set d=QPe*T0e*yk*5.
call NSx(u,d,v,40)
elseif id=='n05T' then
set d=QPe*T0e*yk*5.
call NSx(u,d,v,30)
elseif id=='n05R' then
set d=QPe*T0e*yk*5.
call A7x(u,d,v,30)
elseif id=='n055' then
set d=QPe*T0e*yk*5.
call dCx(u,d,v,50)
elseif id=='n01W' then
set d=QPe*T0e*yk*5.
call XSx(u,d,v,50)
elseif id=='n05Q' then
set d=QPe*T0e*yk*5.
call fZx(u,d,v,50)
elseif id=='n05P' then
set d=QPe*T0e*yk*5.
call Flx(u,d,v,30)
elseif id=='n021' then
set d=QPe*T0e*yk*5.
call A7x(u,d,v,40)
elseif id=='n022' then
set d=QPe*T0e*yk*3.5
call DVx(u,d,v,30)
elseif id=='n023' then
set d=QPe*T0e*yk*5.
call Rix(u,d,v,30)
elseif id=='n027' then
set d=QPe*T0e*yk*5.
call OKx(u,d,v,50)
elseif id=='n029' then
set d=QPe*T0e*yk*5.
call f2x(u,d,v,50)
elseif id=='n02A' then
set d=QPe*T0e*yk*5.
call iXx(u,d,v,35)
elseif id=='n02B' then
set d=QPe*T0e*yk*5.
call A7x(u,d,v,40)
elseif id=='n05Z' then
set d=QPe*T0e*yk*5.
call dbx(u,d,v,30)
elseif id=='n060' then
set d=QPe*T0e*yk*5.
call DLx(u,d,v,30)
elseif id=='n061' then
set d=QPe*T0e*yk*5.
call NSx(u,d,v,30)
elseif id=='n062' then
set d=QPe*T0e*yk*5.
call xdx(u,d,v,50)
elseif id=='n057' then
set d=QPe*T0e*yk*5.
call BJx(u,d,v,50)
elseif id=='n058' then
set d=QPe*T0e*yk*5.
call Flx(u,d,v,50)
elseif id=='n059' then
set d=QPe*T0e*yk*5.
call Dgx(u,d,v,50)
elseif id=='n05A' then
set d=QPe*T0e*yk*5.
call Rix(u,d,v,50)
elseif id=='n05B' then
set d=QPe*T0e*yk*5.
call fZx(u,d,v,50)
elseif id=='n05C' then
set d=QPe*T0e*yk*5.
call Fbx(u,d,v,50)
elseif id=='n05D' then
set d=QPe*T0e*yk*5.
call ryx(u,d,v)
elseif id=='n02H' then
set d=QPe*T0e*yk*5.
call dVx(u,d,v,30)
elseif id=='n02I' then
set d=QPe*T0e*yk*5.
call A7x(u,d,v,50)
elseif id=='n02J' then
set d=QPe*T0e*yk*5.
call ADx(u,d,v,50)
elseif id=='n02K' then
set d=QPe*T0e*yk*10.
call Xnx(u,d,v,50)
elseif id=='n02L' then
set d=QPe*T0e*yk*5.
call BJx(u,d,v,50)
elseif id=='n02M' then
set d=QPe*T0e*yk*5.
call Rix(u,d,v,50)
elseif id=='n02N' then
set d=QPe*T0e*yk*5.
call AQx(u,d,v,50)
elseif id=='n02U' then
set d=QPe*T0e*yk*5.
call Rix(u,d,v,50)
elseif id=='n02V' then
set d=QPe*T0e*yk*5.
call AQx(u,d,v,50)
elseif id=='n02W' then
set d=QPe*T0e*yk*5.
call Fbx(u,d,v,50)
elseif id=='n02X' then
set d=QPe*T0e*yk*5.
call Xnx(u,d,v,50)
elseif id=='n02Y' then
set d=QPe*T0e*yk*5.
call Djx(u,d,v,50)
elseif id=='n02Z' then
set d=QPe*T0e*yk*5.
call Flx(u,d,v,50)
elseif id=='n030' then
set d=QPe*T0e*yk*5.
call ABx(u,d,v,50)
elseif id=='n031' then
set d=QPe*T0e*yk*15.
call A7x(u,d,v,50)
elseif id=='n034' then
set d=QPe*T0e*yk*5.
call nxx(u,d,v,50)
elseif id=='n035' then
set d=QPe*T0e*yk*5.
call z1e(u,d,v,50)
elseif id=='n03A' then
set d=QPe*T0e*yk*5.
call fZx(u,d,v,50)
elseif id=='n03B' then
set d=QPe*T0e*yk*5.
call dVx(u,d,v,40)
elseif id=='n03C' then
set d=QPe*T0e*yk*5.
call o0x(u,d,v,50)
elseif id=='n03D' then
set d=QPe*T0e*yk*5.
call xdx(u,d,v,50)
elseif id=='n03E' then
set d=QPe*T0e*yk*5.
call NSx(u,d,v,50)
elseif id=='n03F' then
set d=QPe*T0e*yk*5.
call Fbx(u,d,v,50)
elseif id=='n064' then
set d=QPe*T0e*yk*5.
call Rvx(u,d,v,50)
elseif id=='n065' then
set d=QPe*T0e*yk*5.
call NSx(u,d,v,50)
elseif id=='n066' then
set d=QPe*T0e*yk*5.
call Flx(u,d,v,50)
elseif id=='n067' then
set d=QPe*T0e*yk*5.
call ABx(u,d,v,50)
elseif id=='n03S' then
set d=QPe*T0e*yk*5.
call Fux(u,d,v,50)
elseif id=='n03T' then
set d=QPe*T0e*yk*5.
call dCx(u,d,v,50)
elseif id=='n03U' then
set d=QPe*T0e*yk*5.
call B2x(u,d,v)
elseif id=='n04B' then
set d=QPe*T0e*yk*5.
call d6x(u,d,v,50)
elseif id=='n04C' then
set d=QPe*T0e*yk*5.
call Dgx(u,d,v,50)
elseif id=='n04D' then
set d=QPe*T0e*yk*5.
call Fux(u,d,v,50)
elseif id=='n04E' then
set d=QPe*T0e*yk*5.
call Flx(u,d,v,30)
elseif id=='n04F' then
set d=QPe*T0e*yk*5.
call dVx(u,d,v,50)
elseif id=='n04P' then
set d=QPe*T0e*yk*5.
call dVx(u,d,v,50)
elseif id=='n04Q' then
set d=QPe*T0e*yk*5.
call AQx(u,d,v,50)
elseif id=='n04R' then
set d=QPe*T0e*yk*5.
call f2x(u,d,v,50)
elseif id=='n04S' then
set d=QPe*T0e*yk*5.
call Xnx(u,d,v,50)
elseif id=='n04T' then
set d=QPe*T0e*yk*5.
call Aix(u,d,v)
elseif id=='n04W' then
set d=QPe*T0e*yk*5.
call elx(u,d,v)
elseif id=='n05E' then
set d=QPe*T0e*yk*15.
call AQx(u,d,v,50)
elseif id=='n08O' then
set d=QPe*T0e*yk*5.
call BNx(u,d,v,40)
elseif id=='n08P' then
set d=QPe*T0e*yk*5.
call xnx(u,d,v,50)
elseif id=='n08Q' then
set d=QPe*T0e*yk*5.
call A7x(u,d,v,50)
elseif id=='n08R' then
set d=QPe*T0e*yk*5.
call Fux(u,d,v,50)
elseif id=='n08S' then
set d=QPe*T0e*yk*5.
call d_x(u,d,v,50)
elseif id=='n08T' then
set d=QPe*T0e*yk*5.
call D9x(u,d,v,50)
elseif id=='n08Z' then
set d=QPe*T0e*yk*5.
call aSx(u,d,v,50)
elseif id=='n090' then
set d=QPe*T0e*yk*5.
call BNx(u,d,v,50)
elseif id=='n091' then
set d=QPe*T0e*yk*5.
call Fqx(u,d,v,50)
elseif id=='n092' then
set d=QPe*T0e*yk*5.
call N6x(u,d,v,50)
elseif id=='n093' then
set d=QPe*T0e*yk*5.
call oXx(u,d,v,50)
elseif id=='n094' then
set d=QPe*T0e*yk*5.
call Ftx(u,d,v,50)
elseif id=='n095' then
set d=QPe*T0e*yk*5.
call d3x(u,d,v,50)
elseif id=='n098' then
set d=QPe*T0e*yk*5.
call Ffx(u,d,v,50)
elseif id=='n09L' then
set d=QPe*T0e*yk*5.
call Ahx(u,d,v,50)
elseif id=='n09M' then
set d=QPe*T0e*yk*5.
call Flx(u,d,v,50)
elseif id=='n09N' then
set d=QPe*T0e*yk*5.
call Oix(u,d,v,50)
elseif id=='n09O' then
set d=QPe*T0e*yk*5.
call Fux(u,d,v,50)
elseif id=='n09P' then
set d=QPe*T0e*yk*5.
call Fbx(u,d,v,50)
elseif id=='n09Q' then
set d=QPe*T0e*yk*5.
call V5x(u,d,v,50)
elseif id=='n09R' then
set d=QPe*T0e*yk*5.
call V5x(u,d,v,50)
elseif id=='n09X' then
set d=QPe*T0e*yk*5.
call BNx(u,d,v,50)
elseif id=='n09Y' then
set d=QPe*T0e*yk*5.
call oXx(u,d,v,50)
elseif id=='n09Z' then
set d=QPe*T0e*yk*5.
call DIx(u,d,v,50)
elseif id=='n0A0' then
set d=QPe*T0e*yk*5.
call R_x(u,d,v,50)
elseif id=='n0AC' then
set d=QPe*T0e*yk*5.
call Fix(u,d,v,50)
elseif id=='n0AD' then
set d=QPe*T0e*yk*5.
call XSx(u,d,v,50)
elseif id=='n0AF' then
set d=QPe*T0e*yk*5.
call xnx(u,d,v,50)
elseif id=='n0AG' then
set d=QPe*T0e*yk*5.
call D1x(u,d,v,50)
endif
set u=null
set v=null
return false
endfunction
function lMx takes nothing returns boolean
return((IsUnitType((GetAttacker()),UNIT_TYPE_HERO))==false and lmx())!=null
endfunction
function lpx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function lLx))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function lMx))
set t=null
endfunction
function lPx takes nothing returns boolean
local unit u=GetBuyingUnit()
local item t=GetSoldItem()
local unit lqx=GetSellingUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local integer lQx=0
if GetUnitTypeId(lqx)!='n06B' then
set lqx=null
set p=null
set t=null
set u=null
return false
endif
set lQx=LoadInteger(IT,GetItemTypeId(t),544)
if lQx>0 then
if tHe(i,lQx*$A,0)then
call tHe(i,lQx*$A,De)
else
call RemoveItem(t)
call Qke(p,"|cffffcc00"+"Không đủ ngân lượng!",3)
endif
endif
set lqx=null
set p=null
set t=null
set u=null
return false
endfunction
function lsx takes nothing returns boolean
return((IsUnitType((GetBuyingUnit()),UNIT_TYPE_HERO))and lPx())!=null
endfunction
function lSx takes unit u,item e returns nothing
local integer i=-1
local integer c=0
local item t=null
loop
set i=i+1
set t=UnitItemInSlot(u,i)
if GetItemTypeId(t)==GetItemTypeId(e)and t!=e then
set c=GetItemCharges(t)+GetItemCharges(e)
call SetItemCharges(t,c)
call RemoveItem(e)
endif
exitwhen i==5
endloop
set t=null
endfunction
function ltx takes unit u,player p,integer i,integer id returns nothing
local integer c7x=LoadInteger(IT,id,544)
if tHe(i,c7x,0)then
call tHe(i,c7x,De)
if not QYe(u)then
set Sv=WMe(i,LoadInteger(IT,id,5789),LoadInteger(IT,id,lo),GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,Sv)
else
set Sv=WMe(i,LoadInteger(IT,id,5789),LoadInteger(IT,id,lo),GetUnitX(OJ[i]),GetUnitY(OJ[i]))
call UnitAddItem(OJ[i],Sv)
call Qke(p,"|cffffcc00"+"Hành trang đầy, vật phẩm được chuyển về rương !",5)
endif
else
call Qke(p,"|cffffcc00"+"Bạn không đủ ngân lượng !",5)
endif
endfunction
function lTx takes unit u,player p,integer i,integer id returns nothing
local integer c7x=$4E20
if tHe(i,c7x,0)then
call tHe(i,c7x,De)
if not QYe(u)then
set Sv=Wee(1,LoadInteger(IT,id,8105),GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,Sv)
else
set Sv=Wee(1,LoadInteger(IT,id,8105),GetUnitX(OJ[i]),GetUnitY(OJ[i]))
call UnitAddItem(OJ[i],Sv)
call Qke(p,"|cffffcc00"+"Hành trang đầy, vật phẩm được chuyển về rương !",5)
endif
else
call Qke(p,"|cffffcc00"+"Bạn không đủ ngân lượng !",5)
endif
endfunction
function lux takes unit u,player p,integer i,integer id,item t returns nothing
local integer c7x=S2I(SubString(BlzGetItemDescription(t),3,7))*$3E8
local integer tJe=S2I(SubString(BlzGetItemDescription(t),0,1))
local integer woe=S2I(SubString(BlzGetItemDescription(t),1,3))
if tHe(i,c7x,0)then
call tHe(i,c7x,De)
if not QYe(u)then
set Sv=Woe(t,woe,tJe,GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,Sv)
else
set Sv=Woe(t,woe,tJe,GetUnitX(OJ[i]),GetUnitY(OJ[i]))
call UnitAddItem(OJ[i],Sv)
call Qke(p,"|cffffcc00"+"Hành trang đầy, vật phẩm được chuyển về rương !",5)
endif
else
call Qke(p,"|cffffcc00"+"Bạn không đủ ngân lượng !",5)
endif
call RemoveItem(t)
endfunction
function lUx takes integer id returns integer
if id=='I09K' then
return 400
elseif id=='I09L' then
return 500
elseif id=='I09M' then
return 600
elseif id=='I09N' then
return 700
elseif id=='I09O' then
return 800
elseif id=='I09P' then
return 900
elseif id=='I09Q' then
return $3E8
elseif id=='I09R' then
return $44C
elseif id=='I09S' then
return $4B0
endif
return 0
endfunction
function lwx takes unit u,player p,integer i returns nothing
local integer c=0
loop
exitwhen c>5
set Sv=UnitItemInSlot(u,c)
set mv=lUx(GetItemTypeId(Sv))
if mv>0 then
call tfe(i,mv,1)
call Qke(p,"|cffffcc00"+"Đổi "+GetItemName(Sv)+" nhận được "+I2S(mv)+" NHHT",5)
call RemoveItem(Sv)
endif
set c=c+1
endloop
endfunction
function lWx takes unit u,player p,integer i returns nothing
local item t1=Q0e(u,'I0JN')
local item t2=Q0e(u,'I01F')
local item t3=Q0e(u,'I01G')
local item t4=Q0e(u,'I01M')
if t1!=null and t2!=null and t3!=null and t4!=null then
if jJ[i]>=600 then
if tHe(i,5*SH,0)then
call tHe(i,SH,De)
set jJ[i]=jJ[i]-600
call RemoveItem(t1)
call RemoveItem(t2)
call RemoveItem(t3)
call RemoveItem(t4)
call UnitAddItemById(u,'I0JP')
call Qke(p,"|cffffcc00"+"Bạn đã chế tạo Viêm Đế Bảo Rương !",5)
call Qre(AddSpecialEffectTarget(("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl"),(u),"origin"))
else
call Qke(p,"|cffffcc00"+"Không đủ bạc để chế tạo !",5)
endif
else
call Qke(p,"|cffffcc00"+"Mảnh Viêm Đế không đủ để chế tạo !",5)
endif
else
call Qke(p,"|cffffcc00"+"Nguyên liệu chế tạo không đủ !",5)
endif
call Qke(p,"|cffffcc00"+"Mảnh Viêm Đế hiện tại: |r"+"|cff7fff00"+I2S(jJ[i]/ 6),$A)
set t1=null
set t2=null
set t3=null
set t4=null
endfunction
function lyx takes player p,integer i returns boolean
local integer a=8
local integer b=3
if rJ[i]<a then
call Qke(p,"|cffffcc00"+"Không đủ điều kiện !",a-b)
return false
endif
set rJ[i]=rJ[i]-a
set zI[i]=zI[i]+b
call Qke(p,"|cffffff00"+uj[a-b]+I2S(zI[i]/ b),a-b)
call Qke(p,"|cffadd8e6"+"Tiền xu cổ: "+I2S(rJ[i]/(b+1)),(a-b)*2)
return false
endfunction
function lYx takes unit u,player p,integer i,item t returns nothing
local integer c=S2I(BlzGetItemDescription(t))
local integer s=0
local item n=null
local integer id=0
if LJ[i]<30 then
loop
exitwhen s>5
set n=UnitItemInSlot(OJ[i],s)
set id=GetItemTypeId(n)
if id=='I0LE' then
if LJ[i]<30 then
call RemoveItem(n)
set LJ[i]=LJ[i]+1
call tke(i,c,500,1)
call Qke(p,"|cffffcc00"+"Nhận được 500 điểm danh vọng trang bị "+Mj[c]+", số lần đổi còn lại "+I2S(30-LJ[i]),5)
endif
elseif id=='I0LF' then
if LJ[i]<30 then
call RemoveItem(n)
set LJ[i]=LJ[i]+1
call tke(i,c,$3E8,1)
call Qke(p,"|cffffcc00"+"Nhận được 1000 điểm danh vọng trang bị "+Mj[c]+", số lần đổi còn lại "+I2S(30-LJ[i]),5)
endif
elseif id=='I0LG' then
if LJ[i]<30 then
call RemoveItem(n)
set LJ[i]=LJ[i]+1
call tke(i,c,$7D0,1)
call Qke(p,"|cffffcc00"+"Nhận được 2000 điểm danh vọng trang bị "+Mj[c]+", số lần đổi còn lại "+I2S(30-LJ[i]),5)
endif
endif
set s=s+1
endloop
else
call Qke(p,"|cffffcc00"+"Mỗi trận chỉ có thể đổi danh vọng trang bị tối đa 30 lần !",5)
endif
call RemoveItem(t)
set n=null
endfunction
function lzx takes nothing returns boolean
local unit u=GetTriggerUnit()
local item t=GetManipulatedItem()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local integer w5e=GetItemTypeId(t)
local integer lZx=GetItemLevel(t)
local real l_x=GetWidgetLife(t)
local integer a=0
set mv=0
set Mv=0
if GetItemType(t)!=ITEM_TYPE_POWERUP then
set a=GetItemUserData(t)
if a==0 then
call SetItemUserData(t,i)
if GetItemType(t)==ITEM_TYPE_CHARGED then
call lSx(u,t)
endif
else
if a==i then
if GetItemType(t)==ITEM_TYPE_CHARGED then
call lSx(u,t)
endif
else
call UnitRemoveItem(u,t)
call Qke(p,"|cffffcc00"+"Không thể nhặt vật phẩm của người khác",3)
set t=null
set p=null
set u=null
return false
endif
endif
endif
if lZx==1 then
if l_x=='f' then
call ltx(u,p,i,w5e)
call RemoveItem(t)
elseif l_x=='g' then
call lTx(u,p,i,w5e)
call RemoveItem(t)
elseif l_x=='i' then
call lux(u,p,i,w5e,t)
elseif l_x=='j' then
call vDx(XJ[i],i,w5e,t)
elseif l_x=='k' then
call Yse(XJ[i],p,i,t)
elseif l_x=='m' then
call z9e(XJ[i],i,w5e)
call RemoveItem(t)
elseif l_x=='n' then
call c_x(XJ[i],p,i,w5e)
call RemoveItem(t)
elseif l_x=='o' then
call Yje(XJ[i],p,i,t)
elseif l_x=='p' then
call vGx(XJ[i],i,w5e,t)
elseif l_x=='r' then
call w_e(XJ[i],i,t)
elseif l_x=='s' then
call glx(XJ[i],p,i,w5e)
call RemoveItem(t)
elseif l_x=='t' then
call HWx(XJ[i],p,i,w5e)
call RemoveItem(t)
elseif l_x=='u' then
call dox(XJ[i],p,i,w5e)
call RemoveItem(t)
elseif l_x==$87 then
call CSx(p,TI[i],t)
elseif l_x==$88 then
call Ctx(p,i,t)
elseif l_x=='v' then
call YCe(XJ[i],i,w5e)
call RemoveItem(t)
elseif l_x=='w' then
call yve(XJ[i],i,w5e)
call RemoveItem(t)
elseif l_x=='y' then
call WWe(XJ[i],i,w5e)
call RemoveItem(t)
elseif l_x=='z' then
call CPx(XJ[i],p,i,t)
elseif l_x=='{' then
call y7e(XJ[i],p,i,t)
elseif l_x=='|' then
call CQx(XJ[i],p,i,t)
elseif l_x=='}' then
call y8e(XJ[i],p,i,w5e)
call RemoveItem(t)
elseif l_x==$7F then
call e0x(XJ[i],p,i,w5e)
call RemoveItem(t)
elseif l_x==$80 then
call y9e(XJ[i],p,i,t)
elseif l_x==$81 then
call c6x(OJ[Ui[i]],p,TI[i],t)
elseif l_x==$82 then
call c8x(OJ[Ui[i]],p,Ui[i],t)
elseif l_x==$83 then
call Cvx(OJ[Ui[i]],p,Ui[i],t)
elseif l_x==$84 then
call c4x(p,i,t)
elseif l_x==$85 then
call CHx(p,i,t)
elseif l_x==$86 then
call Csx(p,i,2,t)
elseif l_x==$8C then
call y1e(u,i,t)
elseif l_x==$8D then
call CKx(XJ[i],i,t)
elseif l_x==$8E then
set mv=0
set VA=0
call CLx(XJ[i],i,w5e)
call RemoveItem(t)
elseif l_x==$8F then
call lYx(XJ[i],p,i,t)
endif
if w5e=='I05Y' then
call Cgx(XJ[i],i)
call RemoveItem(t)
elseif w5e=='I060' then
call j8x(XJ[i],p,i)
call RemoveItem(t)
elseif w5e=='I065' then
call j9x(XJ[i],i)
call RemoveItem(t)
elseif w5e=='I066' then
call w2e(XJ[i],i)
call RemoveItem(t)
elseif w5e=='I06P' then
call C0x(XJ[i],p,i)
call RemoveItem(t)
elseif w5e=='I0B6' then
call Cqx(XJ[i],p,i)
call RemoveItem(t)
elseif w5e=='I0G3' then
call ZJe(XJ[i],p,i)
call RemoveItem(t)
elseif w5e=='I0AQ' then
call lwx(XJ[i],p,i)
call RemoveItem(t)
elseif w5e=='I073' or w5e=='I074' or w5e=='I075' then
call GGx(p,i,t)
elseif w5e=='I077' or w5e=='I078' or w5e=='I079' then
call hqx(p,i,t)
elseif w5e=='I07B' or w5e=='I07C' or w5e=='I07D' then
call Hkx(p,i,t)
elseif w5e=='I07I' or w5e=='I07J' or w5e=='I07K' then
call jlx(p,i,t)
elseif w5e=='I07M' or w5e=='I07N' or w5e=='I07O' then
call Gsx(p,i,t)
elseif w5e=='I07W' or w5e=='I07X' or w5e=='I07Y' then
call G9x(p,i,t)
elseif w5e=='I080' or w5e=='I081' or w5e=='I082' then
call g6x(p,i,t)
elseif w5e=='I089' or w5e=='I08A' or w5e=='I08B' then
call GRx(p,i,t)
elseif w5e=='I08D' or w5e=='I08E' or w5e=='I08F' then
call hhx(p,i,t)
elseif w5e=='I08H' or w5e=='I08I' or w5e=='I08J' then
call jCx(p,i,t)
elseif w5e=='I0H8' or w5e=='I0H9' or w5e=='I0HA' then
call hOx(p,i,t)
elseif w5e=='I0J0' or w5e=='I0J1' or w5e=='I0J2' then
call Hox(p,i,t)
elseif w5e=='I0J4' or w5e=='I0J5' or w5e=='I0J6' then
call h1x(p,i,t)
elseif w5e=='I095' or w5e=='I096' or w5e=='I097' or w5e=='I098' then
call zpe(p,i,t)
elseif w5e=='I0BZ' then
call zie(p,i)
call RemoveItem(t)
elseif w5e=='I0HC' then
call Hbx(p,i)
call RemoveItem(t)
elseif w5e=='I0HH' then
call HBx(p,i)
call RemoveItem(t)
elseif w5e=='I0HE' then
call jOx(p,i)
call RemoveItem(t)
elseif w5e=='I07F' then
call HPx(XJ[i])
call RemoveItem(t)
elseif w5e=='I07Q' then
call hex(XJ[i])
call RemoveItem(t)
elseif w5e=='I0CJ' then
call e3x(XJ[i],p,i)
call RemoveItem(t)
elseif w5e=='I086' then
call GIx(XJ[i])
call RemoveItem(t)
elseif w5e=='I087' then
call GNx()
call RemoveItem(t)
elseif w5e=='I088' then
call GAx(XJ[i])
call RemoveItem(t)
elseif w5e=='I08T' then
call H5x(XJ[i],p,i)
call RemoveItem(t)
elseif w5e=='I08W' then
call jWx()
call RemoveItem(t)
elseif w5e=='I08X' then
call jyx(u,p,i,1)
call RemoveItem(t)
elseif w5e=='I08Y' then
call jyx(u,p,i,2)
call RemoveItem(t)
elseif w5e=='I0FU' then
call C2x(p,i)
call RemoveItem(t)
elseif w5e=='I09D' then
call YEe(XJ[i],i)
call RemoveItem(t)
elseif w5e=='I09E' then
call YVe(XJ[i],i)
call RemoveItem(t)
elseif w5e=='I09F' then
call Yne(p,i,1)
call RemoveItem(t)
elseif w5e=='I09H' then
call Yne(p,i,5)
call RemoveItem(t)
elseif w5e=='I09G' then
call Yne(p,i,$A)
call RemoveItem(t)
elseif w5e=='I0F8' then
call Csx(p,i,1,t)
elseif w5e=='I09U' then
call vvx(p,i)
call RemoveItem(t)
elseif w5e=='I0AG' or w5e=='I0AH' or w5e=='I0AI' then
call Jxx(u,p,i,w5e)
call RemoveItem(t)
elseif w5e=='I0AP' then
call v8x(u,p,i)
call RemoveItem(t)
elseif w5e=='I0GJ' then
call yze(u,i)
call RemoveItem(t)
elseif w5e=='I0GK' then
call y0e(u,i)
call RemoveItem(t)
elseif w5e=='I0I6' then
call y2e(u,i)
call RemoveItem(t)
elseif w5e=='I0JO' then
call lWx(u,p,i)
call RemoveItem(t)
elseif w5e=='I0JW' then
call cJx(p,i)
call RemoveItem(t)
elseif w5e=='I0CL' then
call RemoveItem(t)
call gfx(p,i)
elseif w5e=='I0CM' then
if HJ[i]==0 then
if tHe(i,SH,0)then
set HJ[i]=1
call tHe(i,SH,De)
call Qke(p,"|cffffcc00"+"Bạn đã tiến hành tẩy tủy kỹ năng, vui lòng Save và Load để tăng lại điểm !",5)
endif
else
call tHe(i,SH,1)
set HJ[i]=0
call Qke(p,"|cffffcc00"+"Bạn đã hủy tẩy tủy kỹ năng !",5)
endif
call RemoveItem(t)
elseif w5e=='I0G8' then
if mo[i]==0 then
if tHe(i,SH,0)then
set mo[i]=1
call tHe(i,SH,De)
call Qke(p,"|cffffcc00"+"Bạn đã tiến hành tẩy kinh mạch, vui lòng Save và Load để tăng lại điểm (Không trả lại chân khí đã tăng) !",5)
endif
else
call tHe(i,SH,1)
set mo[i]=0
call Qke(p,"|cffffcc00"+"Bạn đã hủy tẩy kinh mạch !",5)
endif
call RemoveItem(t)
elseif w5e=='I0B7' then
call drx(p,i)
call RemoveItem(t)
elseif w5e=='I0H7' then
call ySe(p,i)
call RemoveItem(t)
elseif w5e=='I0G5' then
call Zle(XJ[i],p,i)
call RemoveItem(t)
elseif w5e=='I0CK' then
call C1x(p,i)
call RemoveItem(t)
elseif w5e=='I0IY' then
call h8x(u)
call RemoveItem(t)
elseif w5e=='I0LA' then
call lyx(p,i)
call RemoveItem(t)
elseif w5e=='I0LC' then
if rJ[i]>=4 then
set rJ[i]=rJ[i]-4
call UnitAddItemById(OJ[i],'I09T')
call Qke(p,"|cffffcc00"+"Vật phẩm được chuyển về rương !",5)
endif
call Qke(p,"|cffadd8e6"+"Tiền xu cổ: "+I2S(rJ[i]/ 4),5)
call RemoveItem(t)
elseif w5e=='I0BY' then
call RemoveItem(t)
if the(i,$9C40,0)and tHe(i,5000,0)then
call tHe(i,5000,De)
set tJ[i]=tJ[i]+3
call Qke(p,"|cffffcc00"+"Số lượng Càn Khôn Phù: "+I2S(tJ[i]/ 3),5)
else
call Qke(p,"|cffffcc00"+"Không đủ điều kiện !",5)
endif
elseif w5e=='I0BF' then
call RemoveItem(t)
if cCe[(i)*(20)+3]>=$2710 then
set cCe[(i)*(20)+3]=cCe[(i)*(20)+3]-$2710
call UnitAddItemById(OJ[i],'I090')
call Qke(p,"|cffffcc00"+"Bạn nhận được 1 Hạt Giống Cây Bát Nhã, vật phẩm được chuyển về rương !",5)
endif
endif
endif
set p=null
set u=null
set t=null
return false
endfunction
function l0x takes unit u,item t returns nothing
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local real x=GetRectCenterX(AJ[i])
local real y=GetRectCenterY(AJ[i])
local integer c=GetItemUserData(t)
if c==i or c==0 then
call sge(u)
call SetItemPosition(t,x,y)
call Qke(p,"|cffffcc00"+"Vật phẩm được chuyển về kho !",3)
else
call Qke(p,"|cffffcc00"+"Không thể nhặt vật phẩm của người khác",3)
endif
set p=null
endfunction
function l1x takes nothing returns boolean
local unit u=GetTriggerUnit()
local item t=GetOrderTargetItem()
local real d=sre(GetUnitX(u),GetUnitY(u),GetItemX(t),GetItemY(t))
if GetItemLevel(t)!=1 then
if d<$C8 then
call l0x(u,t)
endif
endif
set u=null
set t=null
return false
endfunction
function l2x takes nothing returns boolean
return((IsUnitType((GetTriggerUnit()),UNIT_TYPE_HERO))and QYe(GetTriggerUnit())and GetUnitTypeId(GetTriggerUnit())!='H00K' and l1x())!=null
endfunction
function l3x takes nothing returns boolean
local unit u=GetTriggerUnit()
local integer i=(GetPlayerId(GetOwningPlayer((u))))+1
local integer c=0
local item t=null
loop
exitwhen c>5
set t=UnitItemInSlot(u,c)
if t==null then
call UnitAddItem(u,RandomItemInRectBJ(AJ[i],Wv))
endif
set c=c+1
endloop
set t=null
set u=null
return false
endfunction
function l4x takes nothing returns boolean
return GetSpellAbilityId()=='A0E8' and l3x()
endfunction
function l5x takes integer i returns nothing
set mv=0
if Yi[i]==SubString(yH[N9e[(2)*(6)+i]],$F,StringLength(yH[N9e[(2)*(6)+i]]))then
set mv=i
endif
endfunction
function l6x takes nothing returns boolean
local unit u=GetTriggerUnit()
local integer i=(GetPlayerId(GetOwningPlayer((u))))+1
local integer c=0
local item t=null
loop
exitwhen c>5
set t=UnitItemInSlot(u,c)
if t!=null then
call SetItemPosition(t,GetRectCenterX(AJ[i]),GetRectCenterY(AJ[i]))
endif
set c=c+1
endloop
set t=null
set u=null
return false
endfunction
function l7x takes nothing returns boolean
return GetSpellAbilityId()=='A0E9' and l6x()
endfunction
function l8x takes nothing returns boolean
local unit u=GetBuyingUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local item t=GetSoldItem()
local integer w5e=GetItemTypeId(t)
if w5e=='I02Q' then
if p==GetLocalPlayer()then
call ClearSelection()
call SelectUnit(HH,true)
endif
endif
if w5e=='I058' then
if p==GetLocalPlayer()then
call ClearSelection()
call SelectUnit(hH,true)
endif
endif
if w5e=='I064' then
if p==GetLocalPlayer()then
call ClearSelection()
call SelectUnit(RH,true)
endif
endif
if w5e=='I0GM' then
if p==GetLocalPlayer()then
call ClearSelection()
call SelectUnit(IH,true)
endif
endif
if w5e=='I06I' then
if p==GetLocalPlayer()then
call ClearSelection()
call SelectUnit(bH,true)
endif
endif
if w5e=='I0AX' then
call y4e(i)
if p==GetLocalPlayer()then
call ClearSelection()
call SelectUnit(GH,true)
endif
endif
if w5e=='I0DP' then
call y4e(i)
if p==GetLocalPlayer()then
call ClearSelection()
call SelectUnit(MH,true)
endif
endif
if w5e=='I0D4' then
if p==GetLocalPlayer()then
call ClearSelection()
call SelectUnit(OH,true)
endif
endif
if w5e=='I0K3' then
if p==GetLocalPlayer()then
call ClearSelection()
call SelectUnit(CH,true)
endif
endif
if w5e=='I0KX' then
if p==GetLocalPlayer()then
call ClearSelection()
call SelectUnit(AH,true)
endif
endif
if w5e=='I0KL' then
if p==GetLocalPlayer()then
call ClearSelection()
call SelectUnit(FH,true)
endif
endif
if w5e=='I0D8' then
if S2I(SubString(yH[N9e[(1+1)*(6)+Kk[i]+1]],0,1))<1 then
call RemoveItem(t)
set t=null
set p=null
set u=null
return false
endif
if p==GetLocalPlayer()then
call ClearSelection()
call SelectUnit(pH,true)
endif
endif
if w5e=='I0D9' then
if S2I(SubString(yH[N9e[(1+1)*(6)+Kk[i]+1]],0,1))<1 then
call RemoveItem(t)
set t=null
set p=null
set u=null
return false
endif
if p==GetLocalPlayer()then
call ClearSelection()
call SelectUnit(cH,true)
endif
endif
if w5e=='I0DZ' then
if S2I(SubString(yH[N9e[(1+1)*(6)+Kk[i]+1]],0,1))<1 then
call RemoveItem(t)
set t=null
set p=null
set u=null
return false
endif
if p==GetLocalPlayer()then
call ClearSelection()
call SelectUnit(mH,true)
endif
endif
if w5e=='I0E0' then
if S2I(SubString(yH[N9e[(1+1)*(6)+Kk[i]+1]],0,1))<1 then
call RemoveItem(t)
set t=null
set p=null
set u=null
return false
endif
if p==GetLocalPlayer()then
call ClearSelection()
call SelectUnit(lH,true)
endif
endif
if w5e=='I0ES' then
if S2I(SubString(yH[N9e[(1+1)*(6)+Kk[i]+1]],0,1))<1 then
call RemoveItem(t)
set t=null
set p=null
set u=null
return false
endif
if p==GetLocalPlayer()then
call ClearSelection()
call SelectUnit(KH,true)
endif
endif
if w5e=='I0ET' then
if S2I(SubString(yH[N9e[(1+1)*(6)+Kk[i]+1]],0,1))<1 then
call RemoveItem(t)
set t=null
set p=null
set u=null
return false
endif
if p==GetLocalPlayer()then
call ClearSelection()
call SelectUnit(kH,true)
endif
endif
if w5e=='I0F9' then
if S2I(SubString(yH[N9e[(1+1)*(6)+Kk[i]+1]],0,1))<1 then
call RemoveItem(t)
set t=null
set p=null
set u=null
return false
endif
if p==GetLocalPlayer()then
call ClearSelection()
call SelectUnit(JH,true)
endif
endif
if w5e=='I0FN' then
if S2I(SubString(yH[N9e[(1+1)*(6)+Kk[i]+1]],0,1))<1 then
call RemoveItem(t)
set t=null
set p=null
set u=null
return false
endif
if p==GetLocalPlayer()then
call ClearSelection()
call SelectUnit(LH,true)
endif
endif
call RemoveItem(t)
set t=null
set p=null
set u=null
return false
endfunction
function l9x takes nothing returns boolean
return((IsUnitType((GetBuyingUnit()),UNIT_TYPE_HERO))and GetWidgetLife(GetSoldItem())=='h' and l8x())!=null
endfunction
function Lvx takes nothing returns boolean
local player p=GetTriggerPlayer()
local integer i=GetPlayerId(p)+1
call l5x(i)
set TI[i]=mv
set p=null
return false
endfunction
function Lex takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())=='n06Q' and Lvx()
endfunction
function Lxx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(t,Filter(function lzx))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(t,Filter(function l2x))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function l4x))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function l7x))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddCondition(t,Filter(function l9x))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddCondition(t,Filter(function lsx))
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Player(0),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerRegisterPlayerUnitEvent(t,Player(1),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerRegisterPlayerUnitEvent(t,Player(2),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerRegisterPlayerUnitEvent(t,Player(3),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerRegisterPlayerUnitEvent(t,Player(4),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerRegisterPlayerUnitEvent(t,Player(5),EVENT_PLAYER_UNIT_SELECTED,null)
call TriggerAddCondition(t,Condition(function Lex))
set t=null
endfunction
function Lox takes unit u,player p,integer i returns nothing
local integer rd=GetRandomInt(1,'d')
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
if rd>=95 then
call UnitAddItemById(u,Lj[6])
call QKe(rj[i]+" mở Rương Bảo Thạch nhận được 1 Túi Bảo Thạch cấp 6",5)
elseif rd>=85 then
call UnitAddItemById(u,Lj[5])
call QKe(rj[i]+" mở Rương Bảo Thạch nhận được 1 Túi Bảo Thạch cấp 5",5)
elseif rd>=65 then
call UnitAddItemById(u,Lj[4])
call QKe(rj[i]+" mở Rương Bảo Thạch nhận được 1 Túi Bảo Thạch cấp 4",5)
elseif rd>=35 then
call UnitAddItemById(u,Lj[3])
call QKe(rj[i]+" mở Rương Bảo Thạch nhận được 1 Túi Bảo Thạch cấp 3",5)
elseif rd>=$A then
call UnitAddItemById(u,Lj[2])
call QKe(rj[i]+" mở Rương Bảo Thạch nhận được 1 Túi Bảo Thạch cấp 2",5)
else
call UnitAddItemById(u,Lj[1])
call QKe(rj[i]+" mở Rương Bảo Thạch nhận được 1 Túi Bảo Thạch cấp 1",5)
endif
endfunction
function Lrx takes player p,integer i,integer s returns nothing
local integer c=GetRandomInt(1,$A)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl"),((GetUnitX(XJ[i]))*1.),((GetUnitY(XJ[i]))*1.)))
if tke(i,c,485*K1,0)then
call tfe(i,400*s,1)
call Qke(p,"|cffffcc00"+"Danh vọng trang bị - "+Mj[c]+" đã đạt mức tối đa, bạn nhận được "+I2S(s*400)+" NHHT !",5)
else
call tke(i,c,K1*s,1)
call Qke(p,"|cffffcc00"+"Sử dụng Lệnh Bài Du Long nhận được "+I2S(K1*s)+" danh vọng trang bị - "+Mj[c],5)
endif
endfunction
function Lix takes player p,integer i,integer lv,integer Lax returns nothing
local integer rd=GetRandomInt(1,$A)
local integer a=0
if rd<=2 then
set a=lv
elseif rd>2 and rd<=5 then
set a=lv-1
else
set a=lv-2
endif
call UnitAddItemById(OJ[i],Lj[a])
call UnitAddItemById(OJ[i],Lax)
call Qke(p,"|cffffcc00"+"Mở rương hoạt động nhận được Túi Bảo Thạch cấp "+I2S(a)+", vật phẩm được chuyển về rương !",5)
if GetRandomReal(0,'d')<=lv*5+$F then
call UnitAddItemById(OJ[i],iJ[1])
endif
endfunction
function Lnx takes player p,integer i,integer h1,integer h2,integer lv returns nothing
local integer rd=GetRandomInt(1,$A)
local integer a=0
if rd==1 then
call UnitAddItemById(OJ[i],bj[h1])
call Qke(p,"|cffffcc00"+"Mở rương Vạn Kiếm Trũng nhận được "+GetObjectName(bj[h1])+", vật phẩm được chuyển về rương !",5)
elseif rd==2 then
call UnitAddItemById(OJ[i],bj[h2])
call Qke(p,"|cffffcc00"+"Mở rương Vạn Kiếm Trũng nhận được "+GetObjectName(bj[h2])+", vật phẩm được chuyển về rương !",5)
elseif rd==3 or rd==4 then
set cFe[(i)*(5)+lv+1]=cFe[(i)*(5)+lv+1]+$F
call Qke(p,"|cffffcc00"+"Mở rương Vạn Kiếm Trũng nhận được 5 Mảnh Ghép Mặt Nạ !",5)
elseif rd>=5 and rd<=7 then
call tHe(i,5*sH*lv,1)
call Qke(p,"|cffffcc00"+"Mở rương Vạn Kiếm Trũng nhận được "+I2S(5*sH*lv)+" bạc !",5)
elseif rd==8 or rd==9 then
call tfe(i,800*lv,1)
call Qke(p,"|cffffcc00"+"Mở rương Vạn Kiếm Trũng nhận được "+I2S(800*lv)+" NHHT !",5)
else
call UnitAddItemById(OJ[i],'I0BK')
call Qke(p,"|cffffcc00"+"Mở rương Vạn Kiếm Trũng nhận được Du Long Danh Vọng Lệnh !",5)
endif
endfunction
function LVx takes unit u,player p,integer i,item t,integer w5e returns nothing
local integer rd=0
if w5e=='I054' then
call c0x(XJ[i],p,i)
call RemoveItem(t)
elseif w5e=='I0G9' then
set rd=GetRandomInt($2B67,$D903)
call tHe(i,rd,1)
if rd>=$C350 then
call QKe(rj[i]+"|cffffcc00"+" sử dụng Túi Phúc Hoàng Kim may mắn nhận được "+I2S(rd)+" bạc, xin chúc mừng !",5)
else
call Qke(p,"|cffffcc00"+"Bạn sử dụng Túi Phúc Hoàng Kim nhận được "+I2S(rd)+" bạc !",5)
endif
call RemoveItem(t)
elseif w5e=='I05Z' then
call CGx(XJ[i],i)
call RemoveItem(t)
elseif w5e=='I061' then
call Jex(XJ[i],i,1)
call RemoveItem(t)
elseif w5e=='I062' then
call Jex(XJ[i],i,2)
call RemoveItem(t)
elseif w5e=='I063' then
call Jex(XJ[i],i,3)
call RemoveItem(t)
elseif w5e=='I07G' then
if not s1e(u,VD)then
call UnitRemoveAbility(u,'Binv')
endif
elseif w5e=='I08U' then
call vqx(XJ[i],p,i,t)
elseif w5e=='I090' then
call Yle(u,p,i,t)
elseif w5e=='I0BG' then
call vsx(u,p,i,t)
elseif w5e=='I0BH' then
call vSx(u,p,i,t)
elseif w5e=='I0BJ' then
call Lrx(p,i,1)
call RemoveItem(t)
elseif w5e=='I0BK' then
call Lrx(p,i,3)
call RemoveItem(t)
elseif w5e=='I0EF' then
if SI[i]>0 then
call c2x(p,i,$B)
endif
elseif w5e=='I0G6' then
if SI[i]>0 then
call c2x(p,i,27)
endif
elseif w5e=='I0BU' then
call TAe(u,p,i,t)
elseif w5e=='I0BV' then
call RemoveItem(t)
call Lox(u,p,i)
elseif w5e=='I0B8' then
call RemoveItem(t)
set Sv=Z3e(i,1,GetRandomInt(1,$A),GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,Sv)
elseif w5e=='I0B9' then
call RemoveItem(t)
set Sv=Z3e(i,1,GetRandomInt($B,19),GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,Sv)
elseif w5e=='I0BA' then
call RemoveItem(t)
set Sv=Z3e(i,1,GetRandomInt(20,29),GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,Sv)
elseif w5e=='I0BB' then
call RemoveItem(t)
set Sv=Z3e(i,1,GetRandomInt(30,39),GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,Sv)
elseif w5e=='I0BC' then
call RemoveItem(t)
set Sv=Z3e(i,1,GetRandomInt(40,48),GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,Sv)
elseif w5e=='I0BD' then
call RemoveItem(t)
set Sv=Z3e(i,1,GetRandomInt(49,58),GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,Sv)
elseif w5e=='I0HG' then
call RemoveItem(t)
set Sv=Z3e(i,1,GetRandomInt(59,73),GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,Sv)
elseif w5e=='I0JG' then
call RemoveItem(t)
set Sv=Z3e(i,1,GetRandomInt(74,89),GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,Sv)
elseif w5e=='I0JH' then
call RemoveItem(t)
call Lix(p,i,3,'I0LE')
elseif w5e=='I0JI' then
call RemoveItem(t)
call Lix(p,i,4,'I0LE')
elseif w5e=='I0JJ' then
call RemoveItem(t)
call Lix(p,i,5,'I0LF')
elseif w5e=='I0JK' then
call RemoveItem(t)
call Lix(p,i,6,'I0LF')
elseif w5e=='I0JL' then
call RemoveItem(t)
call Lix(p,i,7,'I0LG')
elseif w5e=='I0JM' then
call RemoveItem(t)
call Lix(p,i,8,'I0LG')
elseif w5e=='I0JQ' then
call RemoveItem(t)
call Lnx(p,i,5,6,1)
elseif w5e=='I0JR' then
call RemoveItem(t)
call Lnx(p,i,6,7,2)
elseif w5e=='I0JS' then
call RemoveItem(t)
call Lnx(p,i,7,8,3)
elseif w5e=='I0JT' then
call RemoveItem(t)
call Lnx(p,i,8,9,4)
elseif w5e=='I0KH' then
call RemoveItem(t)
set cIe[(i)*(4)+1]=1
call Qke(p,"|cffffcc00"+"Kích hoạt biến thân Kiếm Tiên, có thể tới NPC Ca Thư Mạc để tiến hành biến thân !",5)
elseif w5e=='I0KI' then
call RemoveItem(t)
set cIe[(i)*(4)+2]=1
call Qke(p,"|cffffcc00"+"Kích hoạt biến thân Độc Cô Kiếm, có thể tới NPC Ca Thư Mạc để tiến hành biến thân !",5)
elseif w5e=='I0KJ' then
call RemoveItem(t)
set cIe[(i)*(4)+3]=1
call Qke(p,"|cffffcc00"+"Kích hoạt biến thân Âu Dương Phong, có thể tới NPC Ca Thư Mạc để tiến hành biến thân !",5)
elseif w5e=='I0KK' then
call RemoveItem(t)
set cIe[(i)*(4)+4]=1
call Qke(p,"|cffffcc00"+"Kích hoạt biến thân Tạ Trọng Hầu, có thể tới NPC Ca Thư Mạc để tiến hành biến thân !",5)
elseif w5e=='I0HO' then
call ZKe(u,p,i,t)
elseif w5e=='I09T' then
if not(GetUnitAbilityLevel((XJ[i]),('A0Z6'))>0)then
call e5x(XJ[i],i)
call Qke(p,"|cffffcc00"+"Trong 8 phút kinh nghiệm nhận được từ luyện công x2 !",5)
call RemoveItem(t)
else
call Qke(p,"|cffffcc00"+"Hiệu quả không cộng dồn !",5)
endif
elseif w5e=='I0JP' then
call RemoveItem(t)
set rd=GetRandomInt(1,$A)
if rd<=2 then
call UnitAddItemById(u,'I0IC')
elseif rd>2 and rd<=5 then
call UnitAddItemById(u,'I0IB')
else
call UnitAddItemById(u,'I0IA')
endif
elseif w5e=='I0GC' then
call RemoveItem(t)
call tfe(i,GetRandomInt('d',400),1)
call tHe(i,GetRandomInt($2710,$9C40),1)
set rd=GetRandomInt(1,8)
if rd==1 then
call UnitAddItemById(OJ[i],bj[7])
elseif rd==2 or rd==3 then
call UnitAddItemById(OJ[i],bj[6])
else
call UnitAddItemById(OJ[i],bj[GetRandomInt(4,5)])
endif
call Qre(AddSpecialEffectTarget("war3mapImported\\Fireworksred.mdl",u,"overhead"))
call Qre(AddSpecialEffectTarget("war3mapImported\\Fireworkspurple.mdl",u,"overhead"))
call Qre(AddSpecialEffectTarget("war3mapImported\\Fireworksred.mdl",u,"overhead"))
set Xi[i]=Xi[i]+3
call Qke(p,"|cff7fff00"+"Bạn đã sử dụng "+I2S(Xi[i]/ 3)+" Pháo Hoa !",5)
endif
endfunction
function LEx takes unit u,player p,integer i,integer w5e returns nothing
local integer lv=LoadInteger(UH,w5e,5710)
call tLe(i)
if cNe[(i)*(20)+lv]<99 then
set cNe[(i)*(20)+lv]=cNe[(i)*(20)+lv]+1
call Qke(p,"|cffffcc00"+"[ Huyền Tinh "+I2S(lv)+" ]|r - số lượng: "+I2S(cNe[(i)*(20)+lv]),5)
set Yk[i]=Yk[i]+2
else
set Sv=CreateItem(w5e,GetUnitX(u),GetUnitY(u))
call UnitAddItem(u,Sv)
endif
endfunction
function LXx takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local item it=GetManipulatedItem()
local integer w5e=GetItemTypeId(it)
local real l_x=GetWidgetLife(it)
local integer Z_e=GetItemLevel(it)
local integer LOx=GetUnitTypeId(u)
if LOx!='H00K' then
if w5e=='I0GA' then
call j7x(u,i,it)
endif
endif
if l_x=='e' then
call RemoveItem(it)
call LEx(u,p,i,w5e)
elseif l_x=='q' then
call w4e(XJ[i],i,it,w5e)
elseif l_x==$7E then
call eZx(u,p,i,w5e)
call RemoveItem(it)
elseif l_x==$89 then
call Zke(u,p,i,w5e)
call RemoveItem(it)
elseif l_x==$8A then
call wBe(u,i,it)
elseif l_x==$8D then
call Hux(u,i,w5e,it)
elseif l_x=='x' then
if w5e=='I0A2' or w5e=='I0A4' or w5e=='I0A5' or w5e=='I0A6' or w5e=='I0A7' then
call Zfe(u,p,i,it,true,true)
elseif w5e=='I0A3' or w5e=='I0A8' or w5e=='I0A9' or w5e=='I0AA' or w5e=='I0AB' then
call Zfe(u,p,i,it,false,true)
endif
elseif Z_e==3 then
call LVx(u,p,i,it,w5e)
elseif w5e=='I0AJ' then
call WYe(u,i,it)
elseif w5e=='I00D' then
call vox(u,i,it)
endif
set it=null
set p=null
set u=null
return false
endfunction
function LRx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddCondition(t,Filter(function LXx))
set t=null
endfunction
function LIx takes unit u,player p,integer i,integer LAx,integer WRe returns boolean
local real twe=.0
local integer c=1
local item t=null
local real a=0
local real b=0
set zk[i]=0
if LAx==1 then
loop
exitwhen c>5
set t=UnitItemInSlot(u,c)
if t!=null then
if GetWidgetLife(t)=='e' then
set a=Nj[WRe+1]
set b=Pow(3,I2R(LoadInteger(UH,GetItemTypeId(t),5710)-1))*'d'
set twe=twe+b/ a
else
call Qke(p,"|cffffcc00"+"Không thể đặt vào vật phẩm khác Huyền Tinh khi cường hóa!",3)
set t=null
return false
endif
endif
set c=c+1
endloop
set Zk[i]=4*R2I(Pow(1.5,I2R(WRe+1)))*$3E8
elseif LAx==2 then
loop
exitwhen c>5
set t=UnitItemInSlot(u,c)
if t!=null then
if GetWidgetLife(t)=='e' then
set a=Nj[WRe+1]*1.5
set b=Pow(3,I2R(LoadInteger(UH,GetItemTypeId(t),5710)-1))*'d'
set twe=twe+b/ a
else
call Qke(p,"|cffffcc00"+"Không thể đặt vào vật phẩm khác Huyền Tinh khi cường hóa!",3)
set t=null
return false
endif
endif
set c=c+1
endloop
set Zk[i]=6*R2I(Pow(1.5,I2R(WRe+1)))*$3E8
elseif LAx==3 then
loop
exitwhen c>5
set t=UnitItemInSlot(u,c)
if t!=null then
if GetWidgetLife(t)=='e' then
set a=Nj[WRe+1]*4
set b=Pow(3,I2R(LoadInteger(UH,GetItemTypeId(t),5710)-1))*'d'
set twe=twe+b/ a
else
call Qke(p,"|cffffcc00"+"Không thể đặt vào vật phẩm khác Huyền Tinh khi cường hóa!",3)
set t=null
return false
endif
endif
set c=c+1
endloop
set Zk[i]=$C*R2I(Pow(1.5,I2R(WRe+1)))*$3E8
endif
set zk[i]=twe
if WRe<=7 and Bge[(i)*(3)+1]==$A then
set zk[i]=zk[i]+$A
call Qke(p,"Tỉ lệ cường hóa: "+"|cffffcc00"+I2S(R2I(zk[i]))+"%|r (+10% từ Bàn Cổ Phù), bạc cần: |cffadd8e6"+I2S(R2I(Zk[i])),$F)
elseif WRe>=8 and WRe<=$B and Bge[(i)*(3)+2]==$A then
set zk[i]=zk[i]+$A
call Qke(p,"Tỉ lệ cường hóa: "+"|cffffcc00"+I2S(R2I(zk[i]))+"%|r (+10% từ Bàn Cổ Phù), bạc cần: |cffadd8e6"+I2S(R2I(Zk[i])),$F)
elseif WRe>=$C and Bge[(i)*(3)+3]==$A then
set zk[i]=zk[i]+$A
call Qke(p,"Tỉ lệ cường hóa: "+"|cffffcc00"+I2S(R2I(zk[i]))+"%|r (+10% từ Bàn Cổ Phù), bạc cần: |cffadd8e6"+I2S(R2I(Zk[i])),$F)
else
call Qke(p,"Tỉ lệ cường hóa: "+"|cffffcc00"+I2S(R2I(zk[i]))+"%|r, bạc cần: |cffadd8e6"+I2S(R2I(Zk[i])),$F)
endif
set t=null
return false
endfunction
function LNx takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local item t=UnitItemInSlot(u,0)
local integer id=GetHandleId(t)
local integer c=1
local integer WRe=0
local integer tJe=0
local integer woe=0
if GetItemTypeId(t)=='I000' then
set tJe=LoadInteger(IT,id,5789)
set woe=LoadInteger(IT,id,4386)
set WRe=LoadInteger(IT,id,7774)
if WRe<Aj[woe]then
if tJe==2 or tJe==5 or tJe==6 or tJe==7 or tJe==$A then
call LIx(u,p,i,1,WRe)
elseif tJe==1 or tJe==3 or tJe==9 or tJe==$B then
call LIx(u,p,i,2,WRe)
elseif tJe==8 then
call LIx(u,p,i,3,WRe)
endif
else
call Qke(p,"|cffffcc00"+"Trang bị đã đạt cấp cường hóa tối đa!",3)
endif
else
call Qke(p,"|cffffcc00"+"Trang bị cần cường hóa phải đặt ở ô đầu tiên trong rương!",3)
endif
set t=null
set p=null
set u=null
return false
endfunction
function Lbx takes nothing returns boolean
return GetSpellAbilityId()=='A0E1' and LNx()
endfunction
function LBx takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local item t=UnitItemInSlot(u,0)
local integer id=GetHandleId(t)
local integer c=1
local integer WRe=0
local integer tJe=0
local integer woe=0
if GetItemTypeId(t)=='I000' then
set tJe=LoadInteger(IT,id,5789)
set woe=LoadInteger(IT,id,4386)
set WRe=LoadInteger(IT,id,7774)
if WRe<Aj[woe]then
if zk[i]>0 and Zk[i]>0 then
if tHe(i,R2I(Zk[i]),0)then
if zk[i]>=100. then
call tHe(i,R2I(Zk[i]),De)
call QKe(rj[i]+" với "+"|cffffff00"+I2S(R2I(zk[i]))+"%|r đem "+cre[(0)*(20)+tJe]+" cường hóa +"+I2S(WRe+1)+" thành công, thật bá đạo!",5)
loop
exitwhen c>5
set Sv=UnitItemInSlot(u,c)
if Sv!=null then
if GetWidgetLife(Sv)=='e' then
call RemoveItem(Sv)
endif
endif
set c=c+1
endloop
call Qre(AddSpecialEffect("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",GetUnitX(u),GetUnitY(u)))
call SaveInteger(IT,id,7774,WRe+1)
set zk[i]=0
if WRe<=7 then
set Bge[(i)*(3)+1]=0
elseif WRe>=8 and WRe<=$B then
set Bge[(i)*(3)+2]=0
elseif WRe>=$C then
set Bge[(i)*(3)+3]=0
endif
call Wme(i,t)
else
call Qke(p,"|cffffcc00"+"Tỉ lệ cường hóa yêu cầu 100%!",3)
endif
else
call Qke(p,"|cffffcc00"+"Không đủ bạc cường hóa!",3)
endif
else
call Qke(p,"|cffffcc00"+"Cần kiểm tra tỉ lệ cường hóa trước!",3)
endif
else
call Qke(p,"|cffffcc00"+"Trang bị đã đạt cấp cường hóa tối đa!",3)
endif
else
call Qke(p,"|cffffcc00"+"Chỉ có thể cường hóa trang bị!",3)
endif
set t=null
set p=null
set u=null
return false
endfunction
function Lcx takes nothing returns boolean
return GetSpellAbilityId()=='A0E0' and LBx()
endfunction
function LCx takes nothing returns boolean
local unit u=GetTriggerUnit()
local integer i=(GetPlayerId(GetOwningPlayer((u)))+1)
set zk[i]=0
set Zk[i]=0
set u=null
return false
endfunction
function Ldx takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())=='H00K' and LCx()
endfunction
function LDx takes unit u,player p,integer tJe,integer WRe returns nothing
local integer c=1
local integer s=0
local string h=cae[(tJe)*(20)+WRe]
loop
exitwhen c>$C
set s=S2I(SubString(h,c-1,c))
if s>0 then
call tqe(u,bj[c],s)
call Qke(p,"|cffffcc00"+"Tách trang bị nhận được "+I2S(s)+" Huyền Tinh "+I2S(c),5)
endif
set c=c+1
endloop
set h=null
set p=null
set u=null
endfunction
function Lfx takes nothing returns boolean
local integer CGe=Qce()
set A2e[CGe]=A2e[CGe]-1
if A2e[CGe]<=0 or not vK[A1e[CGe]]then
call QDe()
set vK[A1e[CGe]]=false
call Cle(CGe)
endif
return false
endfunction
function LFx takes integer i returns nothing
local integer CGe=CKe()
set A1e[CGe]=i
set A2e[CGe]=R2I(30/ .03125)
call QIe(CGe,.03125,true,function Lfx)
endfunction
function Lgx takes nothing returns boolean
local unit u=GetTriggerUnit()
local item t=UnitItemInSlot(u,0)
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local integer id=GetHandleId(t)
local integer tJe=LoadInteger(IT,id,5789)
local integer WRe=LoadInteger(IT,id,7774)
if not vK[i]then
call Qke(p,"|cffffcc00"+"Bạn đã mở lệnh tách Huyền Tinh khỏi trang bị trong 30 giây!",5)
set vK[i]=true
call LFx(i)
else
if GetItemTypeId(t)=='I000' then
if WRe>0 then
if tJe==2 or tJe==5 or tJe==6 or tJe==7 or tJe==$A then
set vK[i]=false
call FlushChildHashtable(IT,id)
call Qre(AddSpecialEffect("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl",GetUnitX(u),GetUnitY(u)))
call RemoveItem(t)
call LDx(u,p,1,WRe)
elseif tJe==1 or tJe==3 or tJe==9 or tJe==$B then
set vK[i]=false
call FlushChildHashtable(IT,id)
call Qre(AddSpecialEffect("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl",GetUnitX(u),GetUnitY(u)))
call RemoveItem(t)
call LDx(u,p,2,WRe)
elseif tJe==8 then
set vK[i]=false
call FlushChildHashtable(IT,id)
call Qre(AddSpecialEffect("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl",GetUnitX(u),GetUnitY(u)))
call RemoveItem(t)
call LDx(u,p,3,WRe)
endif
else
call Qke(p,"|cffffcc00"+"Trang bị đặt vào phải có cấp cường hóa trên 1",3)
endif
else
call Qke(p,"|cffffcc00"+"Phải đặt vào trang bị đã cường hóa !",3)
endif
endif
set t=null
set p=null
set u=null
return false
endfunction
function LGx takes nothing returns boolean
return GetSpellAbilityId()=='A0E2' and Lgx()
endfunction
function Lhx takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function Lbx))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function Lcx))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call Qfe(t,EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddCondition(t,Filter(function Ldx))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function LGx))
set t=null
endfunction
function LHx takes integer lv,integer k returns boolean
if lv<9 then
if k==2 then
return false
endif
else
if k==1 then
return false
endif
endif
return true
endfunction
function Ljx takes integer Wve returns integer
if Wve<=3 then
return 1
elseif Wve<=6 then
return 2
elseif Wve<=9 then
return 3
elseif Wve<=$C then
return 4
else
return 5
endif
endfunction
function LJx takes integer i,integer tJe,integer lv returns boolean
local integer t=0
if tJe==2 then
set t=1
elseif tJe==6 then
set t=2
elseif tJe==5 then
set t=3
elseif tJe==7 then
set t=4
elseif tJe==$A then
set t=5
elseif tJe==1 then
set t=6
elseif tJe==3 then
set t=7
elseif tJe==9 then
set t=8
elseif tJe==$B then
set t=9
elseif tJe==8 then
set t=$A
endif
if lv<8 then
return true
else
if tke(i,t,Jj[lv],0)then
return true
endif
endif
return false
endfunction
function Lkx takes unit u,integer id returns boolean
local integer i=0
local item t=null
local boolean b=false
loop
exitwhen i>5
set t=UnitItemInSlot(u,i)
if GetItemTypeId(t)==id then
set i=5
set b=true
endif
set i=i+1
endloop
set t=null
return b
endfunction
function LKx takes unit u,integer id returns item
local integer i=0
local item t=null
set Sv=null
loop
exitwhen i>5
set t=UnitItemInSlot(u,i)
if GetItemTypeId(t)==id then
set i=5
set Sv=t
endif
set i=i+1
endloop
set t=null
return Sv
endfunction
function Llx takes unit u returns nothing
local integer i=0
local item t=null
loop
exitwhen i>5
set t=UnitItemInSlot(u,i)
call FlushChildHashtable(IT,GetHandleId(t))
call RemoveItem(t)
set i=i+1
endloop
set t=null
endfunction
function LLx takes nothing returns boolean
local integer CGe=Qce()
local integer c=0
local integer d=0
set A7e[CGe]=A7e[CGe]+1
if A7e[CGe]==1 then
set c=LoadInteger(IT,Nee[CGe],He)
if Lkx(A9e[CGe],c)then
set Nve[CGe]=Nve[CGe]+1
endif
endif
if A7e[CGe]==2 then
set c=LoadInteger(IT,Nee[CGe],je)
if c!=0 then
if Lkx(A9e[CGe],c)then
set Nve[CGe]=Nve[CGe]+1
endif
endif
endif
if A7e[CGe]==3 then
set c=LoadInteger(IT,Nee[CGe],Je)
if c!=0 then
if Lkx(A9e[CGe],c)then
set Nve[CGe]=Nve[CGe]+1
endif
endif
endif
if A7e[CGe]==4 then
set c=LoadInteger(IT,Nee[CGe],7882)
if c!=0 then
if Lkx(A9e[CGe],c)then
set Nve[CGe]=Nve[CGe]+1
endif
endif
endif
if A7e[CGe]==5 then
set Nie[CGe]=LKx(A9e[CGe],'I01R')
if Nie[CGe]!=null then
set c=LoadInteger(IT,GetHandleId(Nie[CGe]),4386)
if c==Noe[CGe]+1 then
set NVe[CGe]=LoadInteger(IT,GetHandleId(Nie[CGe]),5563)
set Nve[CGe]=Nve[CGe]+1
endif
endif
endif
if A7e[CGe]==6 then
set Nae[CGe]=LKx(A9e[CGe],'I01T')
if Nae[CGe]!=null then
set c=LoadInteger(IT,GetHandleId(Nae[CGe]),4386)
set d=LoadInteger(IT,GetHandleId(Nae[CGe]),5789)
if c==Noe[CGe]+1 and d==1 then
set Nve[CGe]=Nve[CGe]+1
endif
endif
endif
if A7e[CGe]==7 then
call QDe()
if Nve[CGe]==Nre[CGe]then
call Llx(A9e[CGe])
set Nne[CGe]=Wpe(A6e[CGe],Nxe[CGe],Noe[CGe]+1,0,NVe[CGe],0,NEe[CGe],NXe[CGe],NOe[CGe],NRe[CGe],GetUnitX(A9e[CGe]),GetUnitY(A9e[CGe]))
call UnitAddItem(A9e[CGe],Nne[CGe])
call Qre(AddSpecialEffect(("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl"),((GetUnitX(A9e[CGe]))*1.),((GetUnitY(A9e[CGe]))*1.)))
call Qke(A8e[CGe],"|cffffcc00"+"Trang bị được chế tạo và nâng cấp thành công !",5)
endif
call PauseUnit(A9e[CGe],false)
set A9e[CGe]=null
set A8e[CGe]=null
set Nne[CGe]=null
set Nie[CGe]=null
set Nae[CGe]=null
set eK[A6e[CGe]]=false
call Cke(CGe)
endif
return false
endfunction
function Lmx takes unit u,player p,integer i,integer id,integer LMx,integer tJe,integer woe,integer Lpx returns nothing
local integer CGe=CJe()
set A7e[CGe]=0
set A9e[CGe]=u
set A8e[CGe]=p
set A6e[CGe]=i
set NEe[CGe]=LoadInteger(IT,id,7774)
set NXe[CGe]=LoadInteger(IT,id,6119)
set NOe[CGe]=LoadInteger(IT,id,6036)
set NRe[CGe]=LoadInteger(IT,id,5621)
set Nee[CGe]=LMx
set Nxe[CGe]=tJe
set Noe[CGe]=woe
set Nre[CGe]=Lpx
set Nve[CGe]=1
set eK[A6e[CGe]]=true
call PauseUnit(A9e[CGe],true)
call QIe(CGe,.03125,true,function LLx)
endfunction
function LPx takes nothing returns boolean
local integer CGe=Qce()
local integer c=0
local integer d=0
set NBe[CGe]=NBe[CGe]+1
if NBe[CGe]==1 then
set c=LoadInteger(IT,NDe[CGe],He)
if Lkx(NCe[CGe],c)then
set Nde[CGe]=Nde[CGe]+1
endif
endif
if NBe[CGe]==2 then
set c=LoadInteger(IT,NDe[CGe],je)
if Lkx(NCe[CGe],c)then
set Nde[CGe]=Nde[CGe]+1
endif
endif
if NBe[CGe]==3 then
set c=LoadInteger(IT,NDe[CGe],Je)
if c!=0 then
if Lkx(NCe[CGe],c)then
set Nde[CGe]=Nde[CGe]+1
endif
endif
endif
if NBe[CGe]==4 then
set c=LoadInteger(IT,NDe[CGe],7882)
if c!=0 then
if Lkx(NCe[CGe],c)then
set Nde[CGe]=Nde[CGe]+1
endif
endif
endif
if NBe[CGe]==5 then
set NGe[CGe]=LKx(NCe[CGe],'I01T')
if NGe[CGe]!=null then
set c=LoadInteger(IT,GetHandleId(NGe[CGe]),4386)
set d=LoadInteger(IT,GetHandleId(NGe[CGe]),5789)
if c==NFe[CGe]+1 and d==2 then
set Nde[CGe]=Nde[CGe]+1
endif
endif
endif
if NBe[CGe]==6 then
call QDe()
if Nde[CGe]==Nge[CGe]then
call Llx(NCe[CGe])
set Nhe[CGe]=Wpe(Nbe[CGe],Nfe[CGe],NFe[CGe]+1,0,0,0,NHe[CGe],Nje[CGe],NJe[CGe],Nke[CGe],GetUnitX(NCe[CGe]),GetUnitY(NCe[CGe]))
call UnitAddItem(NCe[CGe],Nhe[CGe])
call Qre(AddSpecialEffect(("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl"),((GetUnitX(NCe[CGe]))*1.),((GetUnitY(NCe[CGe]))*1.)))
call Qke(Nce[CGe],"|cffffcc00"+"Trang bị được chế tạo và nâng cấp thành công !",5)
endif
call PauseUnit(NCe[CGe],false)
set NCe[CGe]=null
set Nce[CGe]=null
set Nhe[CGe]=null
set NGe[CGe]=null
set eK[Nbe[CGe]]=false
call Cje(CGe)
endif
return false
endfunction
function Lqx takes unit u,player p,integer i,integer id,integer LMx,integer tJe,integer woe,integer Lpx returns nothing
local integer CGe=CHe()
set NBe[CGe]=0
set NCe[CGe]=u
set Nce[CGe]=p
set Nbe[CGe]=i
set NHe[CGe]=LoadInteger(IT,id,7774)
set Nje[CGe]=LoadInteger(IT,id,6119)
set NJe[CGe]=LoadInteger(IT,id,6036)
set Nke[CGe]=LoadInteger(IT,id,5621)
set NDe[CGe]=LMx
set Nfe[CGe]=tJe
set NFe[CGe]=woe
set Nge[CGe]=Lpx
set Nde[CGe]=1
set eK[Nbe[CGe]]=true
call PauseUnit(NCe[CGe],true)
call QIe(CGe,.03125,true,function LPx)
endfunction
function LQx takes nothing returns boolean
local integer CGe=Qce()
local integer c=0
local integer d=0
set NMe[CGe]=NMe[CGe]+1
if NMe[CGe]==1 then
set c=LoadInteger(IT,NQe[CGe],He)
if Lkx(NPe[CGe],c)then
set Nqe[CGe]=Nqe[CGe]+1
endif
endif
if NMe[CGe]==2 then
set c=LoadInteger(IT,NQe[CGe],je)
if c!=0 then
if Lkx(NPe[CGe],c)then
set Nqe[CGe]=Nqe[CGe]+1
endif
endif
endif
if NMe[CGe]==3 then
set c=LoadInteger(IT,NQe[CGe],Je)
if c!=0 then
if Lkx(NPe[CGe],c)then
set Nqe[CGe]=Nqe[CGe]+1
endif
endif
endif
if NMe[CGe]==4 then
set NUe[CGe]=LKx(NPe[CGe],'I01S')
if NUe[CGe]!=null then
set c=LoadInteger(IT,GetHandleId(NUe[CGe]),4386)
if LHx(NSe[CGe],c)then
set NWe[CGe]=LoadInteger(IT,GetHandleId(NUe[CGe]),8105)
set Nwe[CGe]=Ljx(NWe[CGe])
set Nqe[CGe]=Nqe[CGe]+1
endif
endif
endif
if NMe[CGe]==5 then
set NTe[CGe]=LKx(NPe[CGe],'I01T')
if NTe[CGe]!=null then
set c=LoadInteger(IT,GetHandleId(NTe[CGe]),4386)
set d=LoadInteger(IT,GetHandleId(NTe[CGe]),5789)
if c==NSe[CGe]+1 and d==3 then
set Nqe[CGe]=Nqe[CGe]+1
endif
endif
endif
if NMe[CGe]==6 then
call QDe()
if Nqe[CGe]==Nte[CGe]then
call Llx(NPe[CGe])
set Nue[CGe]=Wpe(Nme[CGe],Nse[CGe],NSe[CGe]+1,N_e[CGe],Nwe[CGe],NWe[CGe],Nye[CGe],NYe[CGe],Nze[CGe],NZe[CGe],GetUnitX(NPe[CGe]),GetUnitY(NPe[CGe]))
call UnitAddItem(NPe[CGe],Nue[CGe])
call Qre(AddSpecialEffect(("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl"),((GetUnitX(NPe[CGe]))*1.),((GetUnitY(NPe[CGe]))*1.)))
call Qke(Npe[CGe],"|cffffcc00"+"Trang bị được chế tạo và nâng cấp thành công !",5)
endif
call PauseUnit(NPe[CGe],false)
set NPe[CGe]=null
set Npe[CGe]=null
set Nue[CGe]=null
set NTe[CGe]=null
set NUe[CGe]=null
set eK[Nme[CGe]]=false
call Che(CGe)
endif
return false
endfunction
function Lsx takes unit u,player p,integer i,integer id,integer LMx,integer tJe,integer woe,integer Lpx returns nothing
local integer CGe=Cge()
set NMe[CGe]=0
set NPe[CGe]=u
set Npe[CGe]=p
set Nme[CGe]=i
set Nye[CGe]=LoadInteger(IT,id,7774)
set NYe[CGe]=LoadInteger(IT,id,6119)
set Nze[CGe]=LoadInteger(IT,id,6036)
set NZe[CGe]=LoadInteger(IT,id,5621)
set NQe[CGe]=LMx
set Nse[CGe]=tJe
set NSe[CGe]=woe
set Nte[CGe]=Lpx
set Nqe[CGe]=1
set N_e[CGe]=LoadInteger(IT,id,lo)
set eK[Nme[CGe]]=true
call PauseUnit(NPe[CGe],true)
call QIe(CGe,.03125,true,function LQx)
endfunction
function LSx takes unit u returns integer
local integer i=0
local integer QZe=0
loop
exitwhen i>5
if UnitItemInSlot(u,i)!=null then
set QZe=QZe+1
endif
set i=i+1
endloop
return QZe
endfunction
function Ltx takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local item t=Q0e(u,'I000')
local integer id=0
local integer tJe=0
local integer woe=0
local integer LMx=0
local integer Lpx=0
if t!=null then
set id=GetHandleId(t)
set tJe=LoadInteger(IT,id,5789)
set woe=LoadInteger(IT,id,4386)
if woe<$D then
if tDe(i,dj[woe+1],0)and LJx(i,tJe,woe+1)then
if tJe==2 or tJe==5 or tJe==6 or tJe==7 or tJe==$A then
set LMx=$1ADB0+woe+1
set Lpx=LoadInteger(IT,LMx,6659)
if LSx(u)==Lpx then
call Lmx(u,p,i,id,LMx,tJe,woe,Lpx)
else
call Qke(p,"|cffffcc00"+"Chỉ có thể đặt vào đúng các vật phẩm yêu cầu !",5)
endif
elseif tJe==1 or tJe==3 or tJe==9 or tJe==$B then
set LMx=$1D4C0+woe+1
set Lpx=LoadInteger(IT,LMx,6659)
if LSx(u)==Lpx then
call Lqx(u,p,i,id,LMx,tJe,woe,Lpx)
else
call Qke(p,"|cffffcc00"+"Chỉ có thể đặt vào đúng các vật phẩm yêu cầu !",5)
endif
elseif tJe==8 then
set LMx=$1FBD0+woe+1
set Lpx=LoadInteger(IT,LMx,6659)
if LSx(u)==Lpx then
call Lsx(u,p,i,id,LMx,tJe,woe,Lpx)
else
call Qke(p,"|cffffcc00"+"Chỉ có thể đặt vào đúng các vật phẩm yêu cầu !",5)
endif
endif
else
call Qke(p,"|cffffcc00"+"Bạn không đủ điều kiện uy danh yêu cầu !",5)
endif
else
call Qke(p,"|cffffcc00"+"Trang bị này không thể chế tạo và nâng cấp !",5)
endif
else
call Qke(p,"|cffffcc00"+"Không tìm thấy thấy trang bị đưa vào !",5)
endif
return false
endfunction
function LTx takes nothing returns boolean
return GetSpellAbilityId()=='A0E7' and Ltx()
endfunction
function Lux takes nothing returns boolean
local unit u=GetTriggerUnit()
local integer i=1
local integer c=0
local integer w0e=0
local integer n=0
local boolean b=false
local item t=null
loop
exitwhen i>$B
set c=0
set n=0
loop
exitwhen c>5
set t=UnitItemInSlot(u,c)
if GetItemTypeId(t)==bj[i]then
set n=n+1
if n==3 then
set b=true
set c=5
endif
endif
set c=c+1
endloop
if b then
set c=0
set n=0
loop
exitwhen c>5
set t=UnitItemInSlot(u,c)
if GetItemTypeId(t)==bj[i]then
call RemoveItem(t)
set n=n+1
if n==3 then
set c=5
call UnitAddItemById(u,bj[i+1])
call Qre(AddSpecialEffect("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",GetUnitX(u),GetUnitY(u)))
endif
endif
set c=c+1
endloop
set i=$B
endif
set i=i+1
endloop
set t=null
return false
endfunction
function LUx takes nothing returns boolean
return GetSpellAbilityId()=='A0IF' and Lux()
endfunction
function Lwx takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local item tb=UnitItemInSlot(u,0)
local item LWx=UnitItemInSlot(u,1)
local integer tJe=0
local integer id=GetHandleId(tb)
local integer U3e=0
local integer Wve=0
if GetItemTypeId(tb)=='I000' and GetItemTypeId(LWx)=='I01R' then
set tJe=LoadInteger(IT,id,5789)
if tJe==2 or tJe==5 or tJe==6 or tJe==7 or tJe==$A then
set U3e=LoadInteger(IT,id,4386)
set Wve=LoadInteger(IT,GetHandleId(LWx),5563)
if U3e==LoadInteger(IT,GetHandleId(LWx),4386)and Wve!=0 then
call SaveInteger(IT,id,5563,Wve)
call Qke(p,"|cffffcc00"+"Ngũ hành của trang bị đã được thay đổi !",5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call FlushChildHashtable(IT,GetHandleId(LWx))
call RemoveItem(LWx)
set Sv=Wpe(i,tJe,U3e,0,Wve,0,LoadInteger(IT,id,7774),LoadInteger(IT,id,6119),LoadInteger(IT,id,6036),LoadInteger(IT,id,5621),GetUnitX(u),GetUnitY(u))
call RemoveItem(tb)
call UnitAddItem(u,Sv)
else
call Qke(p,"|cffffcc00"+"Phải đặt vào Ngũ Hành Trục Quyển có cấp độ tương ứng !",5)
endif
else
call Qke(p,"|cffffcc00"+"Chỉ có thể thay đổi ngũ hành Phòng Cụ !",5)
endif
else
call Qke(p,"|cffffcc00"+"Chỉ có thể đặt trang bị và ngũ hành trục quyển vào !",5)
endif
set tb=null
set LWx=null
set p=null
set u=null
return false
endfunction
function Lyx takes nothing returns boolean
return GetSpellAbilityId()=='A0IG' and Lwx()
endfunction
function LYx takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local item tb=UnitItemInSlot(u,0)
local item Lzx=UnitItemInSlot(u,1)
local integer U3e=0
local integer LZx=0
local integer Wve=0
local integer id=GetHandleId(tb)
if GetItemTypeId(tb)=='I000' and GetItemTypeId(Lzx)=='I01S' then
if LoadInteger(IT,id,5789)==8 then
set U3e=LoadInteger(IT,id,4386)
if U3e>=$A and LoadInteger(IT,GetHandleId(Lzx),4386)!=2 then
call Qke(p,"|cffffcc00"+"Vũ khí cấp 10 cần Khí Hồn Cao Cấp !",5)
set tb=null
set Lzx=null
set p=null
set u=null
return false
endif
if tHe(i,$C350*U3e,0)then
set LZx=LoadInteger(IT,GetHandleId(Lzx),8105)
if LZx!=0 then
set Wve=Ljx(LZx)
call tHe(i,$C350*U3e,De)
call Qke(p,"|cffffcc00"+"Thuộc tính của trang bị đã được thay đổi !",5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
call FlushChildHashtable(IT,GetHandleId(Lzx))
call RemoveItem(Lzx)
set Sv=Wpe(i,8,U3e,LoadInteger(IT,id,lo),Wve,LZx,LoadInteger(IT,id,7774),LoadInteger(IT,id,6119),LoadInteger(IT,id,6036),LoadInteger(IT,id,5621),GetUnitX(u),GetUnitY(u))
call RemoveItem(tb)
call UnitAddItem(u,Sv)
endif
else
call Qke(p,"|cffffcc00"+"Bạc cần: "+I2S($C350*U3e),5)
endif
else
call Qke(p,"|cffffcc00"+"Chỉ có thể thay đổi thuốc tính vũ khí !",5)
endif
else
call Qke(p,"|cffffcc00"+"Chỉ có thể đặt trang bị và khí hồn vào !",5)
endif
set tb=null
set Lzx=null
set p=null
set u=null
return false
endfunction
function L_x takes nothing returns boolean
return GetSpellAbilityId()=='A0JB' and LYx()
endfunction
function L0x takes nothing returns boolean
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
local item tb=UnitItemInSlot(u,0)
local integer tJe=0
local integer id=GetHandleId(tb)
local integer U3e=0
local integer Wve=0
local integer L1x=0
local integer LZx=0
local integer L2x=0
local integer s1=0
local integer s2=0
local integer s3=0
if GetItemTypeId(tb)=='I000' then
set tJe=LoadInteger(IT,id,5789)
set U3e=LoadInteger(IT,id,4386)
set Wve=LoadInteger(IT,id,5563)
set L1x=LoadInteger(IT,id,lo)
set LZx=LoadInteger(IT,id,8105)
set L2x=LoadInteger(IT,id,7774)
set s1=LoadInteger(IT,id,6119)
set s2=LoadInteger(IT,id,6036)
set s3=LoadInteger(IT,id,5621)
call Qke(p,"|cffffcc00"+"Thuộc tính của trang bị đã được giám định lại !",5)
call Qre(AddSpecialEffect(("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl"),((GetUnitX(u))*1.),((GetUnitY(u))*1.)))
set Sv=Wpe(i,tJe,U3e,L1x,Wve,LZx,L2x,s1,s2,s3,GetUnitX(u),GetUnitY(u))
call RemoveItem(tb)
call UnitAddItem(u,Sv)
endif
set tb=null
set p=null
set u=null
return false
endfunction
function L3x takes nothing returns boolean
return GetSpellAbilityId()=='A0V5' and L0x()
endfunction
function L4x takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function LTx))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function LUx))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function Lyx))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function L_x))
set t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Filter(function L3x))
set t=null
endfunction
function L5x takes nothing returns boolean
local unit u=GetAttacker()
local player p=GetOwningPlayer(u)
local integer i=GetPlayerId(p)+1
if(bde[(GetPlayerId(GetOwningPlayer(((u)))))])and bDe[i]!=null then
call SetUnitAnimation(bDe[i],"attack")
endif
set p=null
set u=null
return false
endfunction
function L6x takes nothing returns boolean
return((IsUnitType((GetAttacker()),UNIT_TYPE_HERO))and L5x())!=null
endfunction
function L7x takes nothing returns nothing
local trigger t=CreateTrigger()
call Qfe(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Filter(function L6x))
set t=null
endfunction
function RunInitializationTriggers takes nothing returns nothing
call ConditionalTriggerExecute(EH)
endfunction
function InitCustomTeams takes nothing returns nothing
call SetPlayerTeam(Player(0),0)
call SetPlayerTeam(Player(1),0)
call SetPlayerTeam(Player(2),0)
call SetPlayerTeam(Player(3),0)
call SetPlayerTeam(Player(4),0)
call SetPlayerTeam(Player(5),0)
call SetPlayerTeam(Player(6),0)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(5),true)
call SetPlayerTeam(Player(7),1)
endfunction
function main takes nothing returns nothing
local weathereffect we
local integer i
local player p
local unit u
local integer unitID
local trigger t
local real TSe
local integer Cbe
local integer CBe
local version v
local integer Cne
call SetCameraBounds(-31360.+GetCameraMargin(CAMERA_MARGIN_LEFT),-30208.+GetCameraMargin(CAMERA_MARGIN_BOTTOM),28544.-GetCameraMargin(CAMERA_MARGIN_RIGHT),29696.-GetCameraMargin(CAMERA_MARGIN_TOP),-31360.+GetCameraMargin(CAMERA_MARGIN_LEFT),29696.-GetCameraMargin(CAMERA_MARGIN_TOP),28544.-GetCameraMargin(CAMERA_MARGIN_RIGHT),-30208.+GetCameraMargin(CAMERA_MARGIN_BOTTOM))
call SetDayNightModels("Environment\\DNC\\DNCAshenvale\\DNCAshenvaleTerrain\\DNCAshenvaleTerrain.mdl","Environment\\DNC\\DNCAshenvale\\DNCAshenvaleUnit\\DNCAshenvaleUnit.mdl")
call SetWaterBaseColor(0,$FF,$FF,$FF)
call NewSoundEnvironment("Default")
call SetAmbientDaySound("LordaeronSummerDay")
call SetAmbientNightSound("LordaeronSummerNight")
call SetMapMusic("Music",true,0)
set sC=Rect(-31552.,-30272.,-17568.,-24576.)
set we=AddWeatherEffect(sC,'SNbs')
call EnableWeatherEffect(we,true)
set SC=Rect(288.,-17952.,8928.,-8896.)
set tC=Rect(10560.,-15168.,19680.,-6592.)
set TC=Rect(21440.,-11488.,28640.,1248.)
set uC=Rect(25760.,-26304.,26336.,-25728.)
set UC=Rect(-25152.,28096.,-24000.,29248.)
set wC=Rect(-23104.,28096.,-21952.,29248.)
set WC=Rect(-21056.,28096.,-19904.,29248.)
set yC=Rect(-25152.,26048.,-24000.,27200.)
set YC=Rect(-23104.,26048.,-21952.,27200.)
set zC=Rect(-21056.,26048.,-19904.,27200.)
set ZC=Rect(-24704.,28800.,-24448.,29056.)
set vd=Rect(-22656.,28800.,-22400.,29056.)
set ed=Rect(-20608.,28800.,-20352.,29056.)
set xd=Rect(-24704.,26752.,-24448.,27008.)
set od=Rect(-22656.,26752.,-22400.,27008.)
set ad=Rect(-20608.,26752.,-20352.,27008.)
set Vd=Rect(-25056.,28224.,-24864.,28384.)
set Ed=Rect(-23008.,28224.,-22816.,28384.)
set Xd=Rect(-20960.,28224.,-20768.,28384.)
set Od=Rect(-25056.,26176.,-24864.,26336.)
set Rd=Rect(-23008.,26176.,-22816.,26336.)
set Id=Rect(-20960.,26176.,-20768.,26336.)
set Ad=Rect(-30112.,27456.,-27744.,29440.)
set Nd=Rect(-17216.,28576.,-15936.,29760.)
set bd=Rect(-15648.,25888.,-12640.,29760.)
set Bd=Rect(-12160.,28032.,-10752.,29376.)
set cd=Rect(-10432.,28032.,-9024.,29376.)
set Cd=Rect(-8640.,28064.,-7232.,29408.)
set dd=Rect(-12224.,26272.,-10816.,27616.)
set Dd=Rect(-10432.,26240.,-9024.,27584.)
set fd=Rect(-8640.,26272.,-7232.,27616.)
set Fd=Rect(19136.,-18144.,19648.,-17632.)
set gd=Rect(96.,-28576.,480.,-28288.)
set Gd=Rect(-6080.,-29248.,-5696.,-28896.)
set hd=Rect(-30912.,-25408.,-30496.,-24992.)
set Hd=Rect(1856.,-17792.,2400.,-17248.)
set jd=Rect(15328.,-14976.,15712.,-14624.)
set Jd=Rect(27424.,-22560.,27872.,-22144.)
set kd=Rect(24896.,-11104.,25280.,-10752.)
set Kd=Rect(-29920.,-19040.,-29568.,-18688.)
set ld=Rect(-8032.,-22880.,-7744.,-22624.)
set Ld=Rect(-11040.,-27072.,-10752.,-26816.)
set md=Rect(23968.,20704.,28864.,29984.)
set Md=Rect(25952.,22656.,26784.,23424.)
set Pd=Rect(26016.,21312.,26752.,21984.)
set qd=Rect(27552.,22720.,28288.,23392.)
set Qd=Rect(26016.,24224.,26752.,24896.)
set sd=Rect(24480.,22720.,25216.,23392.)
set Sd=Rect(25728.,25984.,27040.,27264.)
set td=Rect(24544.,26464.,24864.,26784.)
set Td=Rect(27904.,26464.,28224.,26784.)
set ud=Rect(26208.,29120.,26528.,29440.)
set Ud=Rect(25728.,27808.,27040.,29088.)
set wd=Rect(16224.,19264.,22048.,30496.)
set Wd=Rect(18432.,19360.,18944.,19712.)
set yd=Rect(18336.,19840.,20416.,20896.)
set Yd=Rect(19040.,20992.,19392.,21344.)
set zd=Rect(18176.,22880.,20832.,24384.)
set Zd=Rect(19328.,22240.,19648.,22560.)
set vD=Rect(19040.,24192.,19360.,24512.)
set eD=Rect(18720.,27072.,19040.,27392.)
set xD=Rect(18272.,28032.,20704.,29152.)
set oD=Rect(17824.,28448.,18144.,28768.)
set rD=Rect(20800.,23552.,21056.,23808.)
set iD=Rect(20256.,22112.,20512.,22368.)
set aD=Rect(20160.,26592.,20416.,26848.)
set nD=Rect(20832.,28864.,21088.,29120.)
set VD=Rect(6240.,18656.,15520.,30496.)
set ED=Rect(7040.,21600.,7456.,22112.)
set XD=Rect(8288.,21888.,8672.,22304.)
set OD=Rect(9568.,21696.,11648.,22400.)
set RD=Rect(11232.,20128.,11936.,20704.)
set ID=Rect(12352.,20128.,12736.,20512.)
set AD=Rect(11904.,23264.,12800.,25216.)
set ND=Rect(14048.,27840.,14400.,28192.)
set bD=Rect(13248.,27968.,13600.,28320.)
set BD=Rect(11104.,28064.,11968.,28896.)
set cD=Rect(7680.,26304.,8192.,26816.)
set CD=Rect(11808.,21824.,12224.,22176.)
set dD=Rect(10784.,28736.,11040.,28992.)
set DD=Rect(-3232.,23232.,4960.,29984.)
set fD=Rect(-2080.,28640.,-1760.,28928.)
set FD=Rect(3424.,28576.,3744.,28864.)
set gD=Rect(3488.,24320.,3808.,24608.)
set GD=Rect(-2048.,24192.,-1728.,24480.)
set hD=Rect(-736.,26496.,-416.,26784.)
set HD=Rect(3456.,26496.,3776.,26784.)
set jD=Rect(768.,26464.,1088.,26752.)
set JD=Rect(-2400.,23968.,4000.,29120.)
set kD=Rect(-2752.,26304.,-2304.,26752.)
set KD=Rect(24480.,15616.,28576.,19488.)
set lD=Rect(25056.,16352.,27904.,19008.)
set LD=Rect(26336.,16800.,26624.,17088.)
set mD=Rect(26368.,18144.,26656.,18432.)
set MD=Rect(26336.,15808.,26688.,16192.)
set pD=Rect(13664.,8960.,23168.,18144.)
set PD=Rect(21760.,9248.,22272.,9728.)
set qD=Rect(21536.,10048.,22688.,11168.)
set QD=Rect(20928.,12320.,22368.,13408.)
set sD=Rect(20896.,15040.,22656.,17248.)
set we=AddWeatherEffect(sD,'FDgh')
call EnableWeatherEffect(we,true)
set SD=Rect(18240.,16736.,18752.,17216.)
set tD=Rect(15456.,12224.,18816.,14624.)
set we=AddWeatherEffect(tD,'FDbl')
call EnableWeatherEffect(we,true)
set TD=Rect(16832.,14208.,17120.,14496.)
set uD=Rect(15264.,13696.,15552.,13984.)
set UD=Rect(18688.,14336.,18976.,14624.)
set wD=Rect(16416.,12352.,16704.,12640.)
set WD=Rect(18400.,12256.,18688.,12544.)
set yD=Rect(17024.,13440.,17472.,13888.)
set YD=Rect(18912.,9536.,19232.,9824.)
set zD=Rect(14720.,9760.,17568.,10784.)
set ZD=Rect(16992.,9984.,17312.,10272.)
set vf=Rect(14816.,10048.,15136.,10336.)
set ef=Rect(22080.,13344.,22432.,13664.)
set xf=Rect(24160.,4800.,28704.,14496.)
set of=Rect(26400.,12800.,27904.,13920.)
set rf=Rect(27008.,13312.,27296.,13600.)
set af=Rect(27104.,11040.,28000.,12384.)
set nf=Rect(25536.,10144.,25824.,10432.)
set Vf=Rect(25824.,11392.,25984.,11552.)
set Ef=Rect(25024.,11040.,25184.,11200.)
set Xf=Rect(25216.,9312.,25376.,9472.)
set Of=Rect(26208.,9472.,26368.,9632.)
set Rf=Rect(26400.,10560.,26560.,10720.)
set If=Rect(26720.,13664.,26944.,13888.)
set Af=Rect(27904.,12064.,28128.,12288.)
set Nf=Rect(25376.,10976.,25600.,11200.)
set bf=Rect(27936.,6688.,28160.,6912.)
set Bf=Rect(26560.,8352.,26784.,8576.)
set cf=Rect(26912.,6624.,27232.,6944.)
set Cf=Rect(26976.,6016.,28160.,7520.)
set df=Rect(24512.,13024.,24960.,13440.)
set Df=Rect(832.,5984.,11840.,17760.)
set Ff=Rect(3296.,7392.,3744.,7872.)
set gf=Rect(2048.,8608.,4224.,11392.)
set Gf=Rect(2880.,9888.,3328.,10304.)
set hf=Rect(2720.,14112.,3360.,14688.)
set Hf=Rect(2880.,15200.,3264.,15616.)
set jf=Rect(8928.,15008.,11168.,16896.)
set Jf=Rect(10496.,16192.,10816.,16512.)
set kf=Rect(9344.,6528.,10944.,8064.)
set Kf=Rect(8544.,7456.,8896.,7808.)
set lf=Rect(6560.,12224.,7328.,12928.)
set Lf=Rect(2816.,12160.,3200.,12544.)
set mf=Rect(5792.,16640.,6144.,16960.)
set Mf=Rect(10144.,13088.,10496.,13408.)
set pf=Rect(7168.,6880.,7520.,7200.)
set Pf=Rect(6752.,9376.,7104.,9696.)
set qf=Rect(-12576.,11104.,-10272.,13280.)
set Qf=Rect(-8736.,12672.,-8192.,13152.)
set sf=Rect(-5408.,17504.,-5056.,17824.)
set Sf=Rect(-6016.,13536.,-5728.,13792.)
set tf=Rect(-5952.,12256.,-5664.,12512.)
set Tf=Rect(-3776.,13760.,-3488.,14016.)
set uf=Rect(-3936.,12096.,-3648.,12352.)
set Uf=Rect(-4928.,12736.,-4640.,12992.)
set wf=Rect(-5088.,13312.,-4800.,13568.)
set Wf=Rect(-3936.,18880.,-3584.,19200.)
set yf=Rect(-3872.,17760.,-3520.,18080.)
set Yf=Rect(-5600.,15872.,-2432.,19392.)
set zf=Rect(-12288.,18368.,-10656.,19616.)
set Zf=Rect(-11680.,19200.,-11360.,19552.)
set vF=Rect(-11520.,15616.,-9664.,16736.)
set eF=Rect(-11936.,15936.,-11552.,16352.)
set xF=Rect(-7104.,17344.,-6464.,17984.)
set oF=Rect(-13248.,12352.,-12736.,12800.)
set rF=Rect(-13824.,10272.,-1568.,21344.)
set we=AddWeatherEffect(rF,'FDgl')
call EnableWeatherEffect(we,true)
set iF=Rect(-5376.,16352.,-5024.,16672.)
set aF=Rect(-7488.,17472.,-7136.,17824.)
set nF=Rect(18752.,3776.,22752.,7616.)
set VF=Rect(20320.,4000.,20928.,4608.)
set EF=Rect(20512.,6144.,21056.,6656.)
set XF=Rect(-18816.,-22336.,-18432.,-22016.)
set OF=Rect(-15680.,-20096.,-10176.,-17248.)
set RF=Rect(-11328.,-18944.,-10912.,-18464.)
set IF=Rect(-22208.,-23200.,-16736.,-17728.)
set AF=Rect(-15104.,-18880.,-14752.,-18560.)
set NF=Rect(19168.,-27232.,19520.,-26880.)
set bF=Rect(13056.,-10368.,13408.,-10016.)
set BF=Rect(480.,-21056.,832.,-20704.)
set cF=Rect(-14848.,-25664.,-14496.,-25312.)
set CF=Rect(-26912.,-27616.,-26560.,-27264.)
set dF=Rect(23456.,-19072.,23808.,-18720.)
set DF=Rect(18816.,-29536.,19168.,-29184.)
set fF=Rect(7904.,-25088.,8256.,-24736.)
set FF=Rect(3712.,-10688.,4064.,-10336.)
set gF=Rect(-10112.,-23840.,-9760.,-23488.)
set GF=Rect(-22144.,-29600.,-21792.,-29248.)
set hF=Rect(11264.,-14528.,11584.,-14208.)
set HF=Rect(-30016.,-27872.,-29504.,-27392.)
set jF=Rect(12064.,-30176.,12288.,-29952.)
set JF=Rect(-10752.,-30144.,-10240.,-29664.)
set kF=Rect(9120.,-21728.,9344.,-21504.)
set KF=Rect(-5824.,-24736.,-5600.,-24512.)
set lF=Rect(26560.,-30176.,26784.,-29952.)
set LF=Rect(-3520.,-26368.,-3040.,-25920.)
set mF=Rect(25472.,-28960.,25824.,-28608.)
set MF=Rect(-2720.,-24352.,-2208.,-23872.)
set pF=Rect(3232.,-21056.,3744.,-20576.)
set PF=Rect(-12640.,-29696.,-12160.,-29248.)
set qF=Rect(8576.,-21632.,8896.,-21344.)
set QF=Rect(21472.,-15552.,21888.,-15200.)
set sF=Rect(24096.,-22560.,24512.,-22176.)
set SF=Rect(-14432.,-27648.,-14016.,-27264.)
set tF=Rect(-15456.,-22368.,-15040.,-21984.)
set TF=Rect(15136.,-27296.,15552.,-26880.)
set uF=Rect(17152.,-25792.,17568.,-25376.)
set UF=Rect(-672.,-22880.,-256.,-22464.)
set wF=Rect(5408.,-22912.,5824.,-22496.)
set WF=Rect(-8384.,-27776.,-7968.,-27360.)
set yF=Rect(-14016.,-22816.,-13600.,-22400.)
set YF=Rect(15872.,-8672.,16288.,-8256.)
set zF=Rect(15520.,-13376.,15936.,-12960.)
set ZF=Rect(26624.,-16640.,27040.,-16224.)
set vg=Rect(23072.,-21568.,23488.,-21152.)
set eg=Rect(-22176.,-27072.,-21760.,-26656.)
set xg=Rect(-28352.,-27744.,-27936.,-27328.)
set og=Rect(7136.,-11712.,7552.,-11296.)
set rg=Rect(2272.,-14400.,2688.,-13984.)
set ig=Rect(24896.,-224.,25312.,224.)
set ag=Rect(24896.,-7392.,25248.,-7008.)
set Vg=Rect(14976.,-19968.,15200.,-19744.)
set Eg=Rect(13184.,-29792.,13408.,-29568.)
set Xg=Rect(19392.,-23520.,19616.,-23296.)
set Og=Rect(-608.,-23968.,-384.,-23744.)
set Rg=Rect(-3136.,-22624.,-2912.,-22400.)
set Ig=Rect(6240.,-24736.,6464.,-24512.)
set Ag=Rect(-10368.,-26464.,-10144.,-26240.)
set Ng=Rect(-14176.,-21984.,-13952.,-21760.)
set bg=Rect(-15456.,-26496.,-15232.,-26272.)
set Bg=Rect(13280.,-11936.,13504.,-11712.)
set cg=Rect(17696.,-13216.,17920.,-12992.)
set Cg=Rect(14656.,-7424.,14880.,-7200.)
set dg=Rect(25056.,-16160.,25280.,-15936.)
set Dg=Rect(21440.,-19232.,21664.,-19008.)
set fg=Rect(27360.,-17792.,27584.,-17568.)
set Fg=Rect(-29536.,-29568.,-29312.,-29344.)
set gg=Rect(-27616.,-25600.,-27392.,-25376.)
set Gg=Rect(-20384.,-25376.,-20160.,-25152.)
set hg=Rect(7488.,-16256.,7712.,-16032.)
set Hg=Rect(4736.,-11296.,4960.,-11072.)
set jg=Rect(832.,-12896.,1056.,-12672.)
set Jg=Rect(13056.,1888.,17472.,7872.)
set kg=Rect(16320.,2656.,16896.,3168.)
set Kg=Rect(17088.,3136.,17376.,3424.)
set lg=Rect(13696.,2400.,16128.,3360.)
set Lg=Rect(13504.,3488.,14528.,7328.)
set mg=Rect(16096.,6656.,16608.,7168.)
set Mg=Rect(14592.,-3168.,19968.,512.)
set pg=Rect(14880.,-1472.,15296.,-1120.)
set Pg=Rect(19296.,-1472.,19712.,-1120.)
set qg=Rect(5216.,-1696.,10912.,4224.)
set Qg=Rect(5888.,-1600.,7264.,-384.)
set sg=Rect(8704.,-1600.,10080.,-384.)
set Sg=Rect(5600.,1728.,6432.,2592.)
set tg=Rect(9632.,1728.,10464.,2592.)
set Tg=Rect(-26304.,-21728.,-25888.,-21408.)
set ug=Rect(2368.,-6752.,8672.,-2848.)
set Ug=Rect(2784.,-6112.,3520.,-5440.)
set Wg=Rect(5120.,-5888.,5888.,-5120.)
set yg=Rect(3008.,-6624.,3232.,-6400.)
set Yg=Rect(-26400.,-19392.,-26112.,-19168.)
set zg=Rect(27456.,-4384.,27872.,-3968.)
set Zg=Rect(22336.,-10592.,22752.,-10176.)
set vG=Rect(24768.,-24736.,24960.,-24544.)
set eG=Rect(12736.,-26848.,12928.,-26656.)
set xG=Rect(4960.,-21408.,5152.,-21216.)
set oG=Rect(-9056.,-23104.,-8864.,-22912.)
set rG=Rect(12672.,-7392.,12864.,-7200.)
set iG=Rect(25568.,-14176.,25760.,-13984.)
set aG=Rect(-25536.,-27584.,-25344.,-27392.)
set nG=Rect(6176.,-9536.,6368.,-9344.)
set VG=Rect(-24384.,-18816.,-24192.,-18624.)
set EG=Rect(-31744.,-5120.,28800.,29984.)
set XG=Rect(-31744.,-30464.,28800.,1376.)
set OG=Rect(-1024.,320.,2048.,3520.)
set RG=Rect(3520.,-4736.,3648.,-4608.)
set IG=Rect(16032.,-23616.,16384.,-23232.)
set AG=Rect(23872.,-14592.,24224.,-14208.)
set NG=Rect(2656.,-25280.,3008.,-24896.)
set bG=Rect(-18496.,-26816.,-18144.,-26432.)
set BG=Rect(6720.,-14432.,7072.,-14048.)
set cG=Rect(6208.,-24640.,6464.,-24416.)
set CG=Rect(15584.,-7296.,15840.,-7072.)
set dG=Rect(6272.,-9408.,6528.,-9184.)
set DG=Rect(17280.,-24864.,17536.,-24640.)
set fG=Rect(15104.,10624.,15360.,10848.)
set FG=Rect(-11520.,-27072.,-11264.,-26848.)
set gG=Rect(-19840.,-28256.,-19584.,-28032.)
set GG=Rect(-9792.,16032.,-9536.,16256.)
set hG=Rect(25920.,-16256.,26176.,-16032.)
set HG=Rect(11712.,-23264.,12000.,-22944.)
set jG=Rect(7328.,-21856.,7616.,-21536.)
set JG=Rect(-7200.,-26528.,-6912.,-26208.)
set kG=Rect(16544.,-9824.,16832.,-9504.)
set KG=Rect(24928.,-19712.,25216.,-19392.)
set lG=Rect(-25280.,-30016.,-24992.,-29696.)
set LG=Rect(2208.,-10016.,2496.,-9696.)
set mG=Rect(27488.,-1920.,27776.,-1600.)
set MG=Rect(-18752.,9280.,-18176.,9824.)
set pG=Rect(-17536.,10848.,-17120.,11296.)
set PG=Rect(-19040.,13216.,-18624.,13664.)
set qG=Rect(-18848.,16736.,-18432.,17184.)
set QG=Rect(-17312.,19488.,-16896.,19936.)
set sG=Rect(-17504.,22144.,-17088.,22592.)
set SG=Rect(-20128.,21888.,-19712.,22336.)
set tG=Rect(-20608.,9792.,-15808.,11584.)
set TG=Rect(-20160.,12224.,-15872.,13056.)
set uG=Rect(-20416.,17984.,-20128.,18304.)
set UG=Rect(-20416.,16160.,-20128.,16480.)
set wG=Rect(-15872.,16832.,-15584.,17152.)
set WG=Rect(-16736.,18496.,-16448.,18816.)
set yG=Rect(-17888.,20896.,-16640.,22656.)
set YG=Rect(-19968.,20960.,-19488.,21440.)
set zG=Rect(-21152.,8032.,-15424.,23904.)
set ZG=Rect(-4576.,5440.,-1952.,9408.)
set vh=Rect(-3648.,6048.,-2944.,6528.)
set eh=Rect(-3520.,8256.,-2976.,8800.)
set xh=Rect(-3392.,5536.,-3200.,5664.)
set oh=Rect(22560.,-27424.,22912.,-27136.)
set rh=Rect(-9248.,6208.,-8704.,6720.)
set ih=Rect(-9152.,7968.,-8800.,8352.)
set ah=Rect(-10912.,5696.,-7072.,9312.)
set Vh=Rect(-9088.,5728.,-8864.,5952.)
set Eh=Rect(-24640.,-28256.,-24224.,-27808.)
set Xh=Rect(23648.,-24576.,24096.,-24128.)
set Oh=Rect(96.,19040.,544.,19456.)
set Rh=Rect(-31520.,7648.,-22368.,23296.)
set we=AddWeatherEffect(Rh,'LRma')
call EnableWeatherEffect(we,true)
set Ih=Rect(-31040.,8768.,-30688.,9152.)
set Ah=Rect(-27072.,8896.,-26688.,9280.)
set Nh=Rect(-23456.,8800.,-23072.,9184.)
set bh=Rect(-30304.,11584.,-29920.,11968.)
set Bh=Rect(-29888.,16224.,-29504.,16608.)
set Ch=Rect(-23360.,15680.,-22976.,16064.)
set dh=Rect(-30912.,21792.,-30528.,22176.)
set Dh=Rect(-27072.,18752.,-26688.,19136.)
set Fh=Rect(-23296.,11456.,-23136.,11616.)
set gh=Rect(-29312.,18784.,-28896.,19264.)
set Gh=Rect(-31552.,-3584.,-23232.,7264.)
set we=AddWeatherEffect(Gh,'FDwl')
call EnableWeatherEffect(we,true)
set hh=Rect(-24768.,-3264.,-24064.,-2560.)
set Hh=Rect(-28608.,-2752.,-28096.,-2208.)
set jh=Rect(-27136.,3872.,-26624.,4416.)
set Jh=Rect(-26784.,-128.,-26304.,416.)
set kh=Rect(-25024.,5440.,-24512.,5984.)
set Kh=Rect(-30304.,-2400.,-29792.,-1824.)
set lh=Rect(-30112.,5312.,-29600.,5856.)
set Lh=Rect(-24672.,-288.,-24160.,256.)
set mh=Rect(-30848.,1344.,-30336.,1888.)
set Mh=Rect(-26976.,-2944.,-25696.,-1440.)
set ph=Rect(-30208.,-608.,-28608.,960.)
set Ph=Rect(-26400.,2560.,-24192.,4032.)
set qh=Rect(-25184.,-928.,-23840.,704.)
set Qh=Rect(-29632.,-3040.,-27808.,-2240.)
set sh=Rect(-30976.,1184.,-30048.,2272.)
set Sh=Rect(-27424.,3488.,-26368.,4480.)
set th=Rect(-25856.,4736.,-23968.,6560.)
set Th=Rect(-29056.,2304.,-28544.,2784.)
set uh=Rect(-30720.,4128.,-28896.,5920.)
set Uh=Rect(-29760.,1696.,-27808.,3040.)
set wh=Rect(-30720.,-2944.,-29344.,-1056.)
set Wh=Rect(-27456.,5952.,-27040.,6368.)
set yh=Rect(-27840.,5152.,-26656.,6400.)
set Yh=Rect(-22272.,4000.,-18720.,7680.)
set we=AddWeatherEffect(Yh,'FDbl')
call EnableWeatherEffect(we,true)
set zh=Rect(-21824.,5568.,-21408.,5984.)
set Zh=Rect(-22112.,5696.,-21952.,5856.)
set vH=Rect(-20288.,5504.,-19744.,6016.)
set eH=Rect(17696.,-8224.,17984.,-7936.)
set xH=Rect(-31488.,20704.,-28768.,23168.)
set oH=Rect(-25440.,8832.,-25216.,9056.)
set rH=Rect(-26816.,11360.,-26592.,11584.)
set iH=Rect(-29792.,13664.,-29568.,13888.)
set aH=Rect(-26432.,15232.,-26208.,15456.)
set nH=Rect(-23648.,20288.,-23424.,20512.)
set VH=Rect(-27008.,21984.,-26784.,22208.)
set p=Player($F)
set u=CreateUnit(p,'n00V',17408.,-7424.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n00P',26560.,-26112.,206.941)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n00Q',26880.,-27584.,220.466)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n00R',25600.,-27968.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n00S',-25664.,-20224.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n00T',-26432.,-20288.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n00U',-24640.,-20032.,199.331)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n00W',24896.,-27904.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n00Y',23808.,-26240.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n00Z',-29779.3,-20572.4,316.903)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n010',22912.,-28608.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n09W',-24448.,-20864.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n012',-30025.6,-21341.9,315.767)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n014',-28992.,-20608.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n016',-29184.,-20544.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n017',-25216.,-16960.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n018',27008.,-28352.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n019',-29312.,-17920.,208.713)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01C',-25088.,-18624.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01D',26048.,-25664.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01E',-25600.,-16896.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01F',26752.,-14976.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01G',5632.,-9408.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n05H',25535.5,-29134.7,322.406)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01I',-27072.,-17984.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01K',-30016.,-18432.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01J',25549.9,-26416.4,308.407)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',19392.,-17472.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',256.,-28224.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',-5760.,-28736.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',-30720.,-24896.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',27776.,-22016.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',15168.,-14656.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',1664.,-17728.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',25088.,-11200.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01M',8512.,-15616.,203.738)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01N',-11072.,-26688.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01O',-7552.,-22848.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01X',15168.,-17344.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',26368.,23104.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n02C',12211.8,-27402.7,307.294)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',18240.,19584.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n02O',2560.,-20352.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n02Q',8128.,27200.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n02S',13056.,19840.,223.079)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',6976.,22272.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',-2624.,26880.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n032',17728.,-11584.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',26112.,16000.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n03G',-27190.2,-21146.4,229.259)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n03H',20992.,17152.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n03I',15232.,10752.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',22528.,9408.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',24640.,13504.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n040',-10624.,-26880.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n041',27328.,-15104.,222.483)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n042',2560.,8448.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n043',10112.,16320.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n044',6464.,6848.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',3200.,7424.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',-13184.,12992.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n04V',-27840.,-27008.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',20096.,4032.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set dH=CreateUnit(p,'n08F',3584.,-4672.,270.)
call SetUnitColor(dH,ConvertPlayerColor(4))
set u=CreateUnit(p,'n053',7744.,-26240.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n06G',3968.,-3968.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n08E',-18368.,-22080.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n05I',11840.,-28032.,302.039)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n05J',8512.,-21248.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n05K',-6080.,-24320.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n05L',-25728.,-21312.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n05V',-26304.,-21312.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n05W',-26240.,-19008.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n063',-25728.,-18560.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n068',6976.,-4096.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n069',5376.,-3968.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n06A',-27136.,-16256.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n06C',-29760.,-17088.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n06D',-24640.,-16512.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n06N',-24576.,-18752.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',-960.,2176.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n06O',-26176.,-17024.,318.812)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n06P',25472.,-25792.,311.352)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n06Q',-27648.,-20224.,316.711)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n06S',-27200.,-20160.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n06B',26688.,-25152.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n06B',-29246.5,-19941.4,210.11)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01O',-10816.,-18560.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n08K',-27456.,-19264.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n09C',192.,19840.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n08M',23936.,-29440.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n08N',7872.,-21632.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n096',22720.,-27072.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',-18816.,9280.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',-7744.,7424.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set NH=CreateUnit(p,'n097',-8960.,8384.,270.)
call SetUnitColor(NH,ConvertPlayerColor(4))
set u=CreateUnit(p,'n099',-24448.,-27776.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n09A',-2208.2,6355.8,191.605)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n09K',17984.,-7872.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set PH=CreateUnit(p,'n09V',-23552.,11520.,270.)
call SetUnitColor(PH,ConvertPlayerColor(4))
set u=CreateUnit(p,'n0A5',-9600.,-26304.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',-30528.,9152.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',-29120.,19392.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n01L',-24896.,-2752.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n0AH',11840.,-13312.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n0AJ',832.,-28224.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n0AK',24640.,-24448.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n0AL',-27648.,-16448.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n0AM',23680.,-28864.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n0AN',-18432.,-28544.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n0AO',27072.,-24192.,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set p=Player($C)
set u=CreateUnit(p,'n0AI',11260.5,-7176.5,270.)
set u=CreateUnit(p,'n01V',1333.6,-11094.1,270.)
set u=CreateUnit(p,'n01W',25115.7,-3159.5,270.)
set u=CreateUnit(p,'n01P',11956.4,-17890.2,270.)
set u=CreateUnit(p,'n01Q',15012.9,-11278.3,270.)
set u=CreateUnit(p,'n01R',1395.3,-25118.9,267.997)
set u=CreateUnit(p,'n01S',-7450.9,-25018.4,270.)
set u=CreateUnit(p,'n01T',22595.,-14247.3,270.)
set u=CreateUnit(p,'n01U',-22114.6,-25464.6,270.)
set u=CreateUnit(p,'n051',-20876.8,-18781.5,270.)
set u=CreateUnit(p,'n062',-18329.1,-29742.4,272.202)
set u=CreateUnit(p,'n061',-14545.,-27968.3,270.)
set u=CreateUnit(p,'n060',-2471.,-21440.4,275.083)
set u=CreateUnit(p,'n05Z',15754.1,-29790.2,270.)
set fH=CreateUnit(p,'n09B',3329.3,21249.4,270.)
set DH=CreateUnit(p,'n09B',2304.7,21247.,270.)
set BH=CreateUnit(p,'n09B',3329.2,20224.6,270.)
set jH=CreateUnit(p,'n09B',2819.3,20739.4,270.)
set gH=CreateUnit(p,'n09B',2302.9,20222.9,270.)
set p=Player($F)
set u=CreateUnit(p,'H001',-29314.3,27835.,270.)
set u=CreateUnit(p,'H000',-29563.4,27834.2,270.)
set u=CreateUnit(p,'H003',-28805.6,27837.5,270.)
set u=CreateUnit(p,'H002',-29055.3,27831.7,270.)
set u=CreateUnit(p,'H005',-28804.1,28096.2,270.)
set u=CreateUnit(p,'H004',-29058.,28096.6,270.)
set u=CreateUnit(p,'H007',-29309.9,28091.1,270.)
set u=CreateUnit(p,'H006',-29562.8,28087.8,270.)
set u=CreateUnit(p,'H00A',-28799.8,28338.7,270.)
set u=CreateUnit(p,'H00B',-29056.1,28340.,270.)
set u=CreateUnit(p,'H008',-29318.7,28348.5,270.)
set u=CreateUnit(p,'H009',-29562.7,28345.8,270.)
set u=CreateUnit(p,'H00E',-29315.8,28597.1,270.)
set u=CreateUnit(p,'H00F',-29060.8,28598.3,270.)
set u=CreateUnit(p,'H00D',-28548.8,28599.1,270.)
set u=CreateUnit(p,'H00C',-28804.3,28608.,270.)
set u=CreateUnit(p,'H00J',-29315.1,28853.7,270.)
set u=CreateUnit(p,'H00I',-29054.7,28853.2,270.)
set u=CreateUnit(p,'H00H',-28796.2,28850.7,270.)
set u=CreateUnit(p,'H00G',-28548.2,28856.4,270.)
set HH=CreateUnit(p,'n00X',24897.8,-27903.1,270.)
call SetUnitColor(HH,ConvertPlayerColor(4))
set hH=CreateUnit(p,'n015',-28994.,-20610.,270.)
call SetUnitColor(hH,ConvertPlayerColor(4))
set RH=CreateUnit(p,'n01B',-28993.,-20611.4,270.)
call SetUnitColor(RH,ConvertPlayerColor(4))
set bH=CreateUnit(p,'n01H',17405.6,-7425.8,121.996)
call SetUnitColor(bH,ConvertPlayerColor(4))
set MH=CreateUnit(p,'n04X',-24634.4,-16504.,255.66)
call SetUnitColor(MH,ConvertPlayerColor(4))
set GH=CreateUnit(p,'n06E',-24639.1,-16514.3,187.531)
call SetUnitColor(GH,ConvertPlayerColor(4))
set OH=CreateUnit(p,'n06R',-27650.8,-20224.9,95.101)
call SetUnitColor(OH,ConvertPlayerColor(4))
set pH=CreateUnit(p,'n06T',-27184.5,-20162.3,108.834)
call SetUnitColor(pH,ConvertPlayerColor(4))
set cH=CreateUnit(p,'n06U',-27198.9,-20159.8,337.741)
call SetUnitColor(cH,ConvertPlayerColor(4))
set mH=CreateUnit(p,'n07K',-27209.7,-20151.4,124.776)
call SetUnitColor(mH,ConvertPlayerColor(4))
set lH=CreateUnit(p,'n07L',-27189.,-20149.2,323.557)
call SetUnitColor(lH,ConvertPlayerColor(4))
set KH=CreateUnit(p,'n089',-27215.,-20171.2,205.275)
call SetUnitColor(KH,ConvertPlayerColor(4))
set kH=CreateUnit(p,'n08A',-27198.9,-20178.1,278.479)
call SetUnitColor(kH,ConvertPlayerColor(4))
set JH=CreateUnit(p,'n08B',-27185.7,-20175.1,226.842)
call SetUnitColor(JH,ConvertPlayerColor(4))
set u=CreateUnit(p,'n08C',-27612.6,-15761.3,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n08C',-27195.,-15760.3,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n08C',-30300.2,-18674.3,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n08C',-30293.4,-19081.2,91.21)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n08C',-24210.3,-18583.9,270.)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n08C',-24223.7,-19139.7,83.695)
call SetUnitColor(u,ConvertPlayerColor(4))
set LH=CreateUnit(p,'n08D',-27177.4,-20152.2,26.126)
call SetUnitColor(LH,ConvertPlayerColor(4))
set u=CreateUnit(p,'H00L',-28542.5,28339.9,267.67)
set u=CreateUnit(p,'H00M',-28295.3,28346.2,266.22)
set u=CreateUnit(p,'H00N',-28557.8,27835.5,271.646)
set u=CreateUnit(p,'H00O',-28550.8,28089.6,270.)
set u=CreateUnit(p,'H00P',-28292.8,28093.2,270.)
set u=CreateUnit(p,'H00Q',-28293.1,27829.5,270.)
set IH=CreateUnit(p,'n09J',-30026.6,-21335.3,156.857)
call SetUnitColor(IH,ConvertPlayerColor(4))
set u=CreateUnit(p,'n0A6',-9809.,-26233.4,269.868)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n0A6',-9409.8,-26193.2,267.627)
call SetUnitColor(u,ConvertPlayerColor(4))
set u=CreateUnit(p,'n0AE',27224.9,14077.,280.587)
call SetUnitColor(u,ConvertPlayerColor(4))
set CH=CreateUnit(p,'n0AR',27074.8,-24177.1,2.527)
call SetUnitColor(CH,ConvertPlayerColor(4))
set FH=CreateUnit(p,'n0AS',27075.3,-24177.2,46.166)
call SetUnitColor(FH,ConvertPlayerColor(4))
set AH=CreateUnit(p,'n0AX',-29319.5,-17926.,189.059)
call SetUnitColor(AH,ConvertPlayerColor(4))
call ConfigureNeutralVictim()
set Cxe=Filter(function CAe)
set filterIssueHauntOrderAtLocBJ=Filter(function IssueHauntOrderAtLocBJFilter)
set filterEnumDestructablesInCircleBJ=Filter(function Cre)
set filterGetUnitsInRectOfPlayer=Filter(function GetUnitsInRectOfPlayerFilter)
set filterGetUnitsOfTypeIdAll=Filter(function GetUnitsOfTypeIdAllFilter)
set filterGetUnitsOfPlayerAndTypeId=Filter(function GetUnitsOfPlayerAndTypeIdFilter)
set filterMeleeTrainedUnitIsHeroBJ=Filter(function MeleeTrainedUnitIsHeroBJFilter)
set filterLivingPlayerUnitsOfTypeId=Filter(function LivingPlayerUnitsOfTypeIdFilter)
set Cbe=0
loop
exitwhen Cbe==16
set bj_FORCE_PLAYER[Cbe]=CreateForce()
call ForceAddPlayer(bj_FORCE_PLAYER[Cbe],Player(Cbe))
set Cbe=Cbe+1
endloop
set bj_FORCE_ALL_PLAYERS=CreateForce()
call ForceEnumPlayers(bj_FORCE_ALL_PLAYERS,null)
set bj_cineModePriorSpeed=GetGameSpeed()
set bj_cineModePriorFogSetting=IsFogEnabled()
set bj_cineModePriorMaskSetting=IsFogMaskEnabled()
set Cbe=0
loop
exitwhen Cbe>=bj_MAX_QUEUED_TRIGGERS
set bj_queuedExecTriggers[Cbe]=null
set bj_queuedExecUseConds[Cbe]=false
set Cbe=Cbe+1
endloop
set bj_isSinglePlayer=false
set CBe=0
set Cbe=0
loop
exitwhen Cbe>=$C
if(GetPlayerController(Player(Cbe))==MAP_CONTROL_USER and GetPlayerSlotState(Player(Cbe))==PLAYER_SLOT_STATE_PLAYING)then
set CBe=CBe+1
endif
set Cbe=Cbe+1
endloop
set bj_isSinglePlayer=(CBe==1)
set bj_rescueSound=CreateSoundFromLabel("Rescue",false,false,false,$2710,$2710)
set bj_questDiscoveredSound=CreateSoundFromLabel("QuestNew",false,false,false,$2710,$2710)
set bj_questUpdatedSound=CreateSoundFromLabel("QuestUpdate",false,false,false,$2710,$2710)
set bj_questCompletedSound=CreateSoundFromLabel("QuestCompleted",false,false,false,$2710,$2710)
set bj_questFailedSound=CreateSoundFromLabel("QuestFailed",false,false,false,$2710,$2710)
set bj_questHintSound=CreateSoundFromLabel("Hint",false,false,false,$2710,$2710)
set bj_questSecretSound=CreateSoundFromLabel("SecretFound",false,false,false,$2710,$2710)
set bj_questItemAcquiredSound=CreateSoundFromLabel("ItemReward",false,false,false,$2710,$2710)
set bj_questWarningSound=CreateSoundFromLabel("Warning",false,false,false,$2710,$2710)
set bj_victoryDialogSound=CreateSoundFromLabel("QuestCompleted",false,false,false,$2710,$2710)
set bj_defeatDialogSound=CreateSoundFromLabel("QuestFailed",false,false,false,$2710,$2710)
call DelayedSuspendDecayCreate()
set v=VersionGet()
if(v==VERSION_REIGN_OF_CHAOS)then
set bj_MELEE_MAX_TWINKED_HEROES=bj_MELEE_MAX_TWINKED_HEROES_V0
else
set bj_MELEE_MAX_TWINKED_HEROES=bj_MELEE_MAX_TWINKED_HEROES_V1
endif
call InitQueuedTriggers()
call InitRescuableBehaviorBJ()
call InitDNCSounds()
call InitMapRects()
call InitSummonableCaps()
set Cne=0
loop
set bj_stockAllowedPermanent[Cne]=false
set bj_stockAllowedCharged[Cne]=false
set bj_stockAllowedArtifact[Cne]=false
set Cne=Cne+1
exitwhen Cne>$A
endloop
call SetAllItemTypeSlots($B)
call SetAllUnitTypeSlots($B)
set bj_stockUpdateTimer=CreateTimer()
call TimerStart(bj_stockUpdateTimer,bj_STOCK_RESTOCK_INITIAL_DELAY,false,function CRe)
set bj_stockItemPurchased=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(bj_stockItemPurchased,Player($F),EVENT_PLAYER_UNIT_SELL_ITEM,null)
call TriggerAddAction(bj_stockItemPurchased,function RemovePurchasedItem)
call DetectGameStarted()
call ExecuteFunc("L8x")
set i=0
set LC=CreateTimer()
set mC=CreateMultiboard()
set PC=CreateTimer()
set QC=DialogCreate()
set XH=CreateTrigger()
call TriggerRegisterTimerEventSingle(XH,.0)
call TriggerAddAction(XH,function kDx)
call ConditionalTriggerExecute(EH)
endfunction
function config takes nothing returns nothing
call SetMapName("TRIGSTR_003")
call SetMapDescription("TRIGSTR_005")
call SetPlayers(8)
call SetTeams(8)
call SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER)
call DefineStartLocation(0,-28928.,28224.)
call DefineStartLocation(1,-28928.,28224.)
call DefineStartLocation(2,-28928.,28224.)
call DefineStartLocation(3,-28928.,28224.)
call DefineStartLocation(4,-28928.,28224.)
call DefineStartLocation(5,-28928.,28224.)
call DefineStartLocation(6,-28928.,28224.)
call DefineStartLocation(7,-28928.,28224.)
call SetPlayerStartLocation(Player(0),0)
call ForcePlayerStartLocation(Player(0),0)
call SetPlayerColor(Player(0),ConvertPlayerColor(0))
call SetPlayerRacePreference(Player(0),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(0),false)
call SetPlayerController(Player(0),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(1),1)
call ForcePlayerStartLocation(Player(1),1)
call SetPlayerColor(Player(1),ConvertPlayerColor(1))
call SetPlayerRacePreference(Player(1),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(1),false)
call SetPlayerController(Player(1),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(2),2)
call ForcePlayerStartLocation(Player(2),2)
call SetPlayerColor(Player(2),ConvertPlayerColor(2))
call SetPlayerRacePreference(Player(2),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(2),false)
call SetPlayerController(Player(2),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(3),3)
call ForcePlayerStartLocation(Player(3),3)
call SetPlayerColor(Player(3),ConvertPlayerColor(3))
call SetPlayerRacePreference(Player(3),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(3),false)
call SetPlayerController(Player(3),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(4),4)
call ForcePlayerStartLocation(Player(4),4)
call SetPlayerColor(Player(4),ConvertPlayerColor(4))
call SetPlayerRacePreference(Player(4),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(4),false)
call SetPlayerController(Player(4),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(5),5)
call ForcePlayerStartLocation(Player(5),5)
call SetPlayerColor(Player(5),ConvertPlayerColor(5))
call SetPlayerRacePreference(Player(5),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(5),false)
call SetPlayerController(Player(5),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(6),6)
call ForcePlayerStartLocation(Player(6),6)
call SetPlayerColor(Player(6),ConvertPlayerColor(6))
call SetPlayerRacePreference(Player(6),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(6),false)
call SetPlayerController(Player(6),MAP_CONTROL_COMPUTER)
call SetPlayerStartLocation(Player(7),7)
call ForcePlayerStartLocation(Player(7),7)
call SetPlayerColor(Player(7),ConvertPlayerColor(7))
call SetPlayerRacePreference(Player(7),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(7),false)
call SetPlayerController(Player(7),MAP_CONTROL_COMPUTER)
call InitCustomTeams()
call SetStartLocPrioCount(0,5)
call SetStartLocPrio(0,0,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,1,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,2,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(1,5)
call SetStartLocPrio(1,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,1,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,2,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(2,5)
call SetStartLocPrio(2,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,2,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(3,5)
call SetStartLocPrio(3,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(4,5)
call SetStartLocPrio(4,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(5,5)
call SetStartLocPrio(5,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,4,4,MAP_LOC_PRIO_HIGH)
endfunction
function L9x takes nothing returns boolean
call Q3e(cUe,cWe)
return true
endfunction
function mvx takes nothing returns boolean
call Q4e(cUe,cWe)
return true
endfunction
function mex takes nothing returns boolean
call Q5e(cZe,cWe)
return true
endfunction
function mxx takes nothing returns boolean
call Q7e(cUe,cWe)
return true
endfunction
function mox takes nothing returns boolean
call Q8e(cUe,cWe)
return true
endfunction
function mrx takes nothing returns boolean
call Q9e(cUe,cWe)
return true
endfunction
function mix takes nothing returns boolean
local player p=c_e
local real Q6e=cWe
local real x=cye
local real y=cYe
local real mnx=cze
local integer mVx=c0e
local integer mEx=c1e
local integer mXx=c2e
local boolean mOx=c3e
call TriggerSleepAction(Q6e)
if IsPlayerAlly(GetLocalPlayer(),p)then
call PingMinimapEx(x,y,mnx,mVx,mEx,mXx,mOx)
endif
set p=null
return true
endfunction
function mRx takes nothing returns boolean
local real mIx=cWe
local real mAx=cye
local real y=cYe
local integer mNx=c0e
local integer mbx=c1e
loop
exitwhen mIx>mAx
if GetTerrainType(mIx,y)==mNx then
call SetTerrainType(mIx,y,mbx,-1,1,1)
endif
set mIx=mIx+$80
endloop
return true
endfunction
function mBx takes nothing returns boolean
local integer mNx=c0e
local integer mcx=c1e
local real mIx=cWe
local real mAx=cye
local real mCx=cYe
local real mdx=cze
loop
exitwhen mCx>mdx
call q7e(1,mIx,mAx,mCx,mNx,mcx)
set mCx=mCx+$80
endloop
return true
endfunction
function mDx takes nothing returns boolean
call SNe(cZe,cWe)
return true
endfunction
function mfx takes nothing returns boolean
local string QJe=cwe
if Nv or not true then
set Nv=false
return true
endif
call SIe(QJe)
call SRe()
return true
endfunction
function mFx takes nothing returns boolean
call SMe(cUe)
return true
endfunction
function mgx takes nothing returns boolean
call SPe(cZe)
return true
endfunction
function mGx takes nothing returns boolean
call Sqe(c5e,cWe,cye,cYe,cze)
return true
endfunction
function mhx takes nothing returns boolean
call Sse(c5e)
return true
endfunction
function mHx takes nothing returns boolean
call SSe(c4e)
return true
endfunction
function mjx takes nothing returns boolean
call u0e(cUe,cWe)
return true
endfunction
function L8x takes nothing returns nothing
set cpe[1]=CreateTrigger()
call TriggerAddAction(cpe[1],function L9x)
call TriggerAddCondition(cpe[1],Condition(function L9x))
set cpe[2]=CreateTrigger()
call TriggerAddAction(cpe[2],function mvx)
call TriggerAddCondition(cpe[2],Condition(function mvx))
set cPe[1]=CreateTrigger()
call TriggerAddAction(cPe[1],function mex)
call TriggerAddCondition(cPe[1],Condition(function mex))
set cpe[3]=CreateTrigger()
call TriggerAddAction(cpe[3],function mxx)
call TriggerAddCondition(cpe[3],Condition(function mxx))
set cpe[5]=CreateTrigger()
call TriggerAddAction(cpe[5],function mox)
call TriggerAddCondition(cpe[5],Condition(function mox))
set cpe[4]=CreateTrigger()
call TriggerAddAction(cpe[4],function mrx)
call TriggerAddCondition(cpe[4],Condition(function mrx))
set cqe[1]=CreateTrigger()
call TriggerAddAction(cqe[1],function mix)
call TriggerAddCondition(cqe[1],Condition(function mix))
set cse[1]=CreateTrigger()
call TriggerAddAction(cse[1],function mRx)
call TriggerAddCondition(cse[1],Condition(function mRx))
set cSe[1]=CreateTrigger()
call TriggerAddAction(cSe[1],function mBx)
call TriggerAddCondition(cSe[1],Condition(function mBx))
set cPe[2]=CreateTrigger()
call TriggerAddAction(cPe[2],function mDx)
call TriggerAddCondition(cPe[2],Condition(function mDx))
set cMe[1]=CreateTrigger()
call TriggerAddAction(cMe[1],function mfx)
call TriggerAddCondition(cMe[1],Condition(function mfx))
set cme[1]=CreateTrigger()
call TriggerAddAction(cme[1],function mFx)
call TriggerAddCondition(cme[1],Condition(function mFx))
set cte[1]=CreateTrigger()
call TriggerAddAction(cte[1],function mgx)
call TriggerAddCondition(cte[1],Condition(function mgx))
set cTe[1]=CreateTrigger()
call TriggerAddAction(cTe[1],function mGx)
call TriggerAddCondition(cTe[1],Condition(function mGx))
set cue[1]=CreateTrigger()
call TriggerAddAction(cue[1],function mhx)
call TriggerAddCondition(cue[1],Condition(function mhx))
set cQe[1]=CreateTrigger()
call TriggerAddAction(cQe[1],function mHx)
call TriggerAddCondition(cQe[1],Condition(function mHx))
set cpe[6]=CreateTrigger()
call TriggerAddAction(cpe[6],function mjx)
call TriggerAddCondition(cpe[6],Condition(function mjx))
call ExecuteFunc("Sme")
call ExecuteFunc("tee")
call ExecuteFunc("tVe")
call ExecuteFunc("tXe")
call ExecuteFunc("TDe")
call ExecuteFunc("use")
call ExecuteFunc("uTe")
call ExecuteFunc("uZe")
call ExecuteFunc("Uve")
call ExecuteFunc("Uce")
call ExecuteFunc("Uwe")
call ExecuteFunc("UWe")
call ExecuteFunc("U_e")
call ExecuteFunc("wVe")
call ExecuteFunc("wHe")
call ExecuteFunc("wPe")
call ExecuteFunc("yRe")
call ExecuteFunc("yhe")
call ExecuteFunc("YMe")
call ExecuteFunc("YSe")
call ExecuteFunc("Y5e")
call ExecuteFunc("zVe")
call ExecuteFunc("zKe")
call ExecuteFunc("ZIe")
call ExecuteFunc("Zbe")
call ExecuteFunc("ZSe")
call ExecuteFunc("Z2e")
call ExecuteFunc("vVx")
call ExecuteFunc("vcx")
call ExecuteFunc("vMx")
call ExecuteFunc("vYx")
call ExecuteFunc("v7x")
call ExecuteFunc("eCx")
call ExecuteFunc("egx")
call ExecuteFunc("ejx")
call ExecuteFunc("eWx")
call ExecuteFunc("xAx")
call ExecuteFunc("xLx")
call ExecuteFunc("xtx")
call ExecuteFunc("x6x")
call ExecuteFunc("oax")
call ExecuteFunc("oCx")
call ExecuteFunc("oFx")
call ExecuteFunc("okx")
call ExecuteFunc("o5x")
call ExecuteFunc("rox")
call ExecuteFunc("rXx")
call ExecuteFunc("rCx")
call ExecuteFunc("rgx")
call ExecuteFunc("rPx")
call ExecuteFunc("rux")
call ExecuteFunc("icx")
call ExecuteFunc("ijx")
call ExecuteFunc("iQx")
call ExecuteFunc("iux")
call ExecuteFunc("iYx")
call ExecuteFunc("i9x")
call ExecuteFunc("arx")
call ExecuteFunc("aOx")
call ExecuteFunc("afx")
call ExecuteFunc("aHx")
call ExecuteFunc("alx")
call ExecuteFunc("a0x")
call ExecuteFunc("nHx")
call ExecuteFunc("nlx")
call ExecuteFunc("nyx")
call ExecuteFunc("n8x")
call ExecuteFunc("VNx")
call ExecuteFunc("VJx")
call ExecuteFunc("Vzx")
call ExecuteFunc("Evx")
call ExecuteFunc("ENx")
call ExecuteFunc("EKx")
call ExecuteFunc("Eqx")
call ExecuteFunc("EUx")
call ExecuteFunc("Ezx")
call ExecuteFunc("XBx")
call ExecuteFunc("Xhx")
call ExecuteFunc("Xzx")
call ExecuteFunc("X4x")
call ExecuteFunc("X9x")
call ExecuteFunc("ORx")
call ExecuteFunc("Odx")
call ExecuteFunc("OJx")
call ExecuteFunc("Oqx")
call ExecuteFunc("OTx")
call ExecuteFunc("O_x")
call ExecuteFunc("O3x")
call ExecuteFunc("O8x")
call ExecuteFunc("Rlx")
call ExecuteFunc("Rtx")
call ExecuteFunc("IAx")
call ExecuteFunc("Ihx")
call ExecuteFunc("IKx")
call ExecuteFunc("Izx")
call ExecuteFunc("I2x")
call ExecuteFunc("ARx")
call ExecuteFunc("AMx")
call ExecuteFunc("AZx")
call ExecuteFunc("A3x")
call ExecuteFunc("Nax")
call ExecuteFunc("NNx")
call ExecuteFunc("NDx")
call ExecuteFunc("NJx")
call ExecuteFunc("Nzx")
call ExecuteFunc("N2x")
call ExecuteFunc("bJx")
call ExecuteFunc("b_x")
call ExecuteFunc("BIx")
call ExecuteFunc("Bdx")
call ExecuteFunc("BGx")
call ExecuteFunc("Bmx")
call ExecuteFunc("BZx")
call ExecuteFunc("cjx")
call ExecuteFunc("CVx")
call ExecuteFunc("CBx")
call ExecuteFunc("C5x")
call ExecuteFunc("dWx")
call ExecuteFunc("Dox")
call ExecuteFunc("Dcx")
call ExecuteFunc("Dsx")
call ExecuteFunc("Dyx")
call ExecuteFunc("fXx")
call ExecuteFunc("fNx")
call ExecuteFunc("ffx")
call ExecuteFunc("Fox")
call ExecuteFunc("FAx")
call ExecuteFunc("F0x")
call ExecuteFunc("gex")
call ExecuteFunc("gXx")
call ExecuteFunc("gSx")
call ExecuteFunc("Gjx")
call ExecuteFunc("GTx")
call ExecuteFunc("hSx")
call ExecuteFunc("h3x")
call ExecuteFunc("HVx")
call ExecuteFunc("Hqx")
call ExecuteFunc("H6x")
call ExecuteFunc("jax")
call ExecuteFunc("jQx")
call ExecuteFunc("JEx")
call ExecuteFunc("Jbx")
call ExecuteFunc("JWx")
call ExecuteFunc("Jzx")
call ExecuteFunc("J1x")
call ExecuteFunc("J2x")
call ExecuteFunc("J6x")
call ExecuteFunc("kix")
call ExecuteFunc("kRx")
call ExecuteFunc("kAx")
call ExecuteFunc("kcx")
call ExecuteFunc("kdx")
call ExecuteFunc("klx")
call ExecuteFunc("kTx")
call ExecuteFunc("kwx")
call ExecuteFunc("kzx")
call ExecuteFunc("KQx")
call ExecuteFunc("Kzx")
call ExecuteFunc("lax")
call ExecuteFunc("lEx")
call ExecuteFunc("lAx")
call ExecuteFunc("lcx")
call ExecuteFunc("lFx")
call ExecuteFunc("lHx")
call ExecuteFunc("lpx")
call ExecuteFunc("Lxx")
call ExecuteFunc("LRx")
call ExecuteFunc("Lhx")
call ExecuteFunc("L4x")
call ExecuteFunc("L7x")
endfunction
